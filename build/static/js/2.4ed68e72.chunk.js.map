{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js","../node_modules/react/index.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/isNativeFunction.js","../node_modules/@ckeditor/ckeditor5-utils/src/ckeditorerror.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js","../node_modules/@ckeditor/ckeditor5-engine/src/model/range.js","../node_modules/@ckeditor/ckeditor5-engine/src/model/position.js","../node_modules/@babel/runtime/helpers/extends/_index.mjs","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/get.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/superPropBase.js","../node_modules/@ckeditor/ckeditor5-utils/src/mix.js","../node_modules/react/jsx-runtime.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../node_modules/@ckeditor/ckeditor5-utils/src/spy.js","../node_modules/@ckeditor/ckeditor5-utils/src/eventinfo.js","../node_modules/@ckeditor/ckeditor5-utils/src/emittermixin.js","../node_modules/@ckeditor/ckeditor5-engine/src/model/element.js","../node_modules/@ckeditor/ckeditor5-engine/src/model/text.js","../../modules/HistoryContext.js","../../modules/createNameContext.js","../../modules/RouterContext.js","../../modules/Router.js","../../modules/MemoryRouter.js","../../modules/Lifecycle.js","../../modules/generatePath.js","../../modules/Redirect.js","../../modules/matchPath.js","../../modules/Route.js","../../modules/StaticRouter.js","../../modules/Switch.js","../../modules/hooks.js","../node_modules/@babel/runtime/helpers/objectWithoutProperties/_index.mjs","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../node_modules/lodash-es/isObject.js","../node_modules/@ckeditor/ckeditor5-utils/src/observablemixin.js","../node_modules/lodash-es/isObjectLike.js","../node_modules/@ckeditor/ckeditor5-utils/src/isiterable.js","../node_modules/lodash-es/_root.js","../node_modules/lodash-es/isArray.js","../node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","../node_modules/@ckeditor/ckeditor5-utils/src/comparearrays.js","../node_modules/@babel/runtime/helpers/inheritsLoose/_index.mjs","../node_modules/prop-types/index.js","../node_modules/clsx/dist/clsx.m.js","../node_modules/@ckeditor/ckeditor5-engine/src/model/textproxy.js","../node_modules/lodash-es/_getRawTag.js","../node_modules/lodash-es/_objectToString.js","../node_modules/lodash-es/_baseGetTag.js","../node_modules/lodash-es/_Symbol.js","../node_modules/lodash-es/_coreJsData.js","../node_modules/lodash-es/_isMasked.js","../node_modules/lodash-es/_baseIsNative.js","../node_modules/lodash-es/_getValue.js","../node_modules/lodash-es/_getNative.js","../node_modules/tiny-invariant/dist/tiny-invariant.esm.js","../node_modules/lodash-es/_copyObject.js","../node_modules/@ckeditor/ckeditor5-utils/src/uid.js","../node_modules/lodash-es/_nativeKeysIn.js","../node_modules/lodash-es/_baseKeysIn.js","../node_modules/lodash-es/keysIn.js","../node_modules/@ckeditor/ckeditor5-engine/src/model/treewalker.js","../node_modules/@babel/runtime/helpers/defineProperty/_index.mjs","../node_modules/@material-ui/core/esm/styles/colorManipulator.js","../node_modules/resolve-pathname/esm/resolve-pathname.js","../node_modules/value-equal/esm/value-equal.js","../node_modules/history/esm/history.js","../node_modules/@ckeditor/ckeditor5-utils/src/tomap.js","../node_modules/@ckeditor/ckeditor5-utils/src/objecttomap.js","../node_modules/react-redux/es/components/Context.js","../node_modules/react-redux/es/utils/batch.js","../node_modules/react-redux/es/utils/Subscription.js","../node_modules/react-redux/es/components/Provider.js","../node_modules/react-redux/es/utils/useIsomorphicLayoutEffect.js","../node_modules/react-redux/es/hooks/useReduxContext.js","../node_modules/react-redux/es/hooks/useStore.js","../node_modules/react-redux/es/hooks/useDispatch.js","../node_modules/react-redux/es/hooks/useSelector.js","../node_modules/react-redux/es/index.js","../node_modules/lodash-es/eq.js","../node_modules/@ckeditor/ckeditor5-engine/src/model/node.js","../node_modules/is-in-browser/dist/module.js","../node_modules/@babel/runtime/helpers/createClass/_index.mjs","../node_modules/jss/dist/jss.esm.js","../node_modules/@material-ui/styles/esm/mergeClasses/mergeClasses.js","../node_modules/@material-ui/styles/esm/makeStyles/multiKeyStore.js","../node_modules/@material-ui/styles/esm/useTheme/ThemeContext.js","../node_modules/@material-ui/styles/esm/useTheme/useTheme.js","../node_modules/@material-ui/styles/esm/ThemeProvider/nested.js","../node_modules/@material-ui/styles/esm/createGenerateClassName/createGenerateClassName.js","../node_modules/jss-plugin-rule-value-function/dist/jss-plugin-rule-value-function.esm.js","../node_modules/jss-plugin-global/dist/jss-plugin-global.esm.js","../node_modules/jss-plugin-nested/dist/jss-plugin-nested.esm.js","../node_modules/hyphenate-style-name/index.js","../node_modules/jss-plugin-camel-case/dist/jss-plugin-camel-case.esm.js","../node_modules/jss-plugin-default-unit/dist/jss-plugin-default-unit.esm.js","../node_modules/css-vendor/dist/css-vendor.esm.js","../node_modules/jss-plugin-vendor-prefixer/dist/jss-plugin-vendor-prefixer.esm.js","../node_modules/jss-plugin-props-sort/dist/jss-plugin-props-sort.esm.js","../node_modules/@material-ui/styles/esm/jssPreset/jssPreset.js","../node_modules/@material-ui/styles/esm/StylesProvider/StylesProvider.js","../node_modules/@material-ui/styles/esm/makeStyles/indexCounter.js","../node_modules/@material-ui/utils/esm/deepmerge.js","../node_modules/@material-ui/styles/esm/getStylesCreator/getStylesCreator.js","../node_modules/@material-ui/styles/esm/getStylesCreator/noopTheme.js","../node_modules/@material-ui/styles/esm/makeStyles/makeStyles.js","../node_modules/@material-ui/styles/esm/getThemeProps/getThemeProps.js","../node_modules/@material-ui/styles/esm/withStyles/withStyles.js","../node_modules/@material-ui/core/esm/styles/createBreakpoints.js","../node_modules/@material-ui/core/esm/styles/createMixins.js","../node_modules/@material-ui/core/esm/colors/common.js","../node_modules/@material-ui/core/esm/colors/grey.js","../node_modules/@material-ui/core/esm/colors/indigo.js","../node_modules/@material-ui/core/esm/colors/pink.js","../node_modules/@material-ui/core/esm/colors/red.js","../node_modules/@material-ui/core/esm/colors/orange.js","../node_modules/@material-ui/core/esm/colors/blue.js","../node_modules/@material-ui/core/esm/colors/green.js","../node_modules/@material-ui/core/esm/styles/createPalette.js","../node_modules/@material-ui/core/esm/styles/createTypography.js","../node_modules/@material-ui/core/esm/styles/shadows.js","../node_modules/@material-ui/core/esm/styles/shape.js","../node_modules/@babel/runtime/helpers/slicedToArray/_index.mjs","../node_modules/@babel/runtime/helpers/iterableToArrayLimit/_index.mjs","../node_modules/@material-ui/system/esm/merge.js","../node_modules/@material-ui/system/esm/breakpoints.js","../node_modules/@material-ui/system/esm/spacing.js","../node_modules/@material-ui/system/esm/memoize.js","../node_modules/@material-ui/core/esm/styles/createSpacing.js","../node_modules/@material-ui/core/esm/styles/transitions.js","../node_modules/@material-ui/core/esm/styles/zIndex.js","../node_modules/@material-ui/core/esm/styles/createMuiTheme.js","../node_modules/@material-ui/core/esm/styles/defaultTheme.js","../node_modules/@material-ui/core/esm/styles/withStyles.js","../node_modules/@ckeditor/ckeditor5-engine/src/model/nodelist.js","../node_modules/tiny-warning/dist/tiny-warning.esm.js","../node_modules/lodash-es/isBuffer.js","../node_modules/lodash-es/_nodeUtil.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","../node_modules/lodash-es/_toSource.js","../node_modules/react-dom/index.js","../node_modules/lodash-es/isArrayLike.js","../node_modules/@material-ui/core/esm/utils/capitalize.js","../node_modules/hoist-non-react-statics/dist/hoist-non-react-statics.cjs.js","../node_modules/@ckeditor/ckeditor5-engine/src/model/liverange.js","../node_modules/react-router-guards/dist/index.es.js","../node_modules/redux/es/redux.js","../../modules/BrowserRouter.js","../../modules/HashRouter.js","../../modules/utils/locationUtils.js","../../modules/Link.js","../../modules/NavLink.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../node_modules/lodash-es/isFunction.js","../node_modules/lodash-es/_isPrototype.js","../node_modules/lodash-es/_baseAssignValue.js","../node_modules/lodash-es/_assignValue.js","../node_modules/lodash-es/_baseUnary.js","../node_modules/lodash-es/_isIndex.js","../node_modules/@babel/runtime/helpers/toConsumableArray/_index.mjs","../node_modules/@babel/runtime/helpers/arrayWithoutHoles/_index.mjs","../node_modules/@babel/runtime/helpers/nonIterableSpread/_index.mjs","../node_modules/lodash-es/_baseIsTypedArray.js","../node_modules/lodash-es/isTypedArray.js","../node_modules/lodash-es/_defineProperty.js","../node_modules/@ckeditor/ckeditor5-utils/src/priorities.js","../node_modules/@ckeditor/ckeditor5-utils/src/version.js","../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../node_modules/@babel/runtime/helpers/arrayLikeToArray/_index.mjs","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/lodash-es/_baseIsArguments.js","../node_modules/lodash-es/isArguments.js","../node_modules/html-react-parser/index.js","../node_modules/webpack/buildin/global.js","../node_modules/webpack/buildin/harmony-module.js","../node_modules/react-is/index.js","../node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose/_index.mjs","../node_modules/@babel/runtime/helpers/unsupportedIterableToArray/_index.mjs","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","../node_modules/lodash-es/_freeGlobal.js","../node_modules/lodash-es/_cloneBuffer.js","../node_modules/lodash-es/isLength.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/construct.js","../node_modules/lodash-es/identity.js","../node_modules/lodash-es/_apply.js","../node_modules/lodash-es/_overRest.js","../node_modules/lodash-es/constant.js","../node_modules/lodash-es/_baseSetToString.js","../node_modules/lodash-es/_shortOut.js","../node_modules/lodash-es/_setToString.js","../node_modules/lodash-es/_baseRest.js","../node_modules/lodash-es/_isIterateeCall.js","../node_modules/lodash-es/_createAssigner.js","../node_modules/lodash-es/_baseTimes.js","../node_modules/lodash-es/_arrayLikeKeys.js","../node_modules/object-assign/index.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/getPrototypeOf.js","../node_modules/mini-create-react-context/dist/esm/index.js","../node_modules/path-to-regexp/index.js","../node_modules/symbol-observable/es/index.js","../node_modules/@babel/runtime/helpers/assertThisInitialized/_index.mjs","../node_modules/@babel/runtime/helpers/typeof/_index.mjs","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/assertThisInitialized.js","../node_modules/html-react-parser/lib/attributes-to-props.js","../node_modules/html-react-parser/lib/utilities.js","../node_modules/html-dom-parser/lib/client/utilities.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","../node_modules/@babel/runtime/helpers/setPrototypeOf/_index.mjs","../node_modules/symbol-observable/es/ponyfill.js","../node_modules/@babel/runtime/helpers/iterableToArray/_index.mjs","../node_modules/@babel/runtime/helpers/arrayWithHoles/_index.mjs","../node_modules/@babel/runtime/helpers/nonIterableRest/_index.mjs","../CKEditor/webpack/universalModuleDefinition","../CKEditor/webpack/bootstrap","../CKEditor/node_modules/lodash-es/_root.js","../CKEditor/node_modules/prop-types/index.js","../CKEditor/node_modules/lodash-es/_nodeUtil.js","../webpack:/CKEditor/external {\"root\":\"React\",\"commonjs2\":\"react\",\"commonjs\":\"react\",\"amd\":\"react\"}","../CKEditor/node_modules/lodash-es/_freeGlobal.js","../CKEditor/node_modules/lodash-es/isBuffer.js","../CKEditor/(webpack)/buildin/harmony-module.js","../CKEditor/node_modules/lodash-es/stubFalse.js","../CKEditor/node_modules/lodash-es/_cloneBuffer.js","../CKEditor/node_modules/prop-types/factoryWithThrowingShims.js","../CKEditor/node_modules/prop-types/lib/ReactPropTypesSecret.js","../CKEditor/(webpack)/buildin/global.js","../CKEditor/node_modules/lodash-es/isObject.js","../CKEditor/node_modules/lodash-es/now.js","../CKEditor/node_modules/lodash-es/_Symbol.js","../CKEditor/node_modules/lodash-es/_getRawTag.js","../CKEditor/node_modules/lodash-es/_objectToString.js","../CKEditor/node_modules/lodash-es/_baseGetTag.js","../CKEditor/node_modules/lodash-es/isObjectLike.js","../CKEditor/node_modules/lodash-es/isSymbol.js","../CKEditor/node_modules/lodash-es/toNumber.js","../CKEditor/node_modules/lodash-es/debounce.js","../CKEditor/node_modules/lodash-es/throttle.js","../CKEditor/node_modules/lodash-es/_listCacheClear.js","../CKEditor/node_modules/lodash-es/eq.js","../CKEditor/node_modules/lodash-es/_assocIndexOf.js","../CKEditor/node_modules/lodash-es/_listCacheDelete.js","../CKEditor/node_modules/lodash-es/_listCacheGet.js","../CKEditor/node_modules/lodash-es/_listCacheHas.js","../CKEditor/node_modules/lodash-es/_listCacheSet.js","../CKEditor/node_modules/lodash-es/_ListCache.js","../CKEditor/node_modules/lodash-es/_isMasked.js","../CKEditor/node_modules/lodash-es/_stackClear.js","../CKEditor/node_modules/lodash-es/_stackDelete.js","../CKEditor/node_modules/lodash-es/_stackGet.js","../CKEditor/node_modules/lodash-es/_stackHas.js","../CKEditor/node_modules/lodash-es/isFunction.js","../CKEditor/node_modules/lodash-es/_coreJsData.js","../CKEditor/node_modules/lodash-es/_toSource.js","../CKEditor/node_modules/lodash-es/_baseIsNative.js","../CKEditor/node_modules/lodash-es/_getValue.js","../CKEditor/node_modules/lodash-es/_getNative.js","../CKEditor/node_modules/lodash-es/_Map.js","../CKEditor/node_modules/lodash-es/_nativeCreate.js","../CKEditor/node_modules/lodash-es/_hashClear.js","../CKEditor/node_modules/lodash-es/_hashDelete.js","../CKEditor/node_modules/lodash-es/_hashGet.js","../CKEditor/node_modules/lodash-es/_hashHas.js","../CKEditor/node_modules/lodash-es/_hashSet.js","../CKEditor/node_modules/lodash-es/_Hash.js","../CKEditor/node_modules/lodash-es/_mapCacheClear.js","../CKEditor/node_modules/lodash-es/_isKeyable.js","../CKEditor/node_modules/lodash-es/_getMapData.js","../CKEditor/node_modules/lodash-es/_mapCacheDelete.js","../CKEditor/node_modules/lodash-es/_mapCacheGet.js","../CKEditor/node_modules/lodash-es/_mapCacheHas.js","../CKEditor/node_modules/lodash-es/_mapCacheSet.js","../CKEditor/node_modules/lodash-es/_MapCache.js","../CKEditor/node_modules/lodash-es/_stackSet.js","../CKEditor/node_modules/lodash-es/_Stack.js","../CKEditor/node_modules/lodash-es/_arrayEach.js","../CKEditor/node_modules/lodash-es/_defineProperty.js","../CKEditor/node_modules/lodash-es/_baseAssignValue.js","../CKEditor/node_modules/lodash-es/_assignValue.js","../CKEditor/node_modules/lodash-es/_copyObject.js","../CKEditor/node_modules/lodash-es/_baseTimes.js","../CKEditor/node_modules/lodash-es/_baseIsArguments.js","../CKEditor/node_modules/lodash-es/isArguments.js","../CKEditor/node_modules/lodash-es/isArray.js","../CKEditor/node_modules/lodash-es/_isIndex.js","../CKEditor/node_modules/lodash-es/isLength.js","../CKEditor/node_modules/lodash-es/_baseIsTypedArray.js","../CKEditor/node_modules/lodash-es/_baseUnary.js","../CKEditor/node_modules/lodash-es/isTypedArray.js","../CKEditor/node_modules/lodash-es/_arrayLikeKeys.js","../CKEditor/node_modules/lodash-es/_isPrototype.js","../CKEditor/node_modules/lodash-es/_overArg.js","../CKEditor/node_modules/lodash-es/_nativeKeys.js","../CKEditor/node_modules/lodash-es/_baseKeys.js","../CKEditor/node_modules/lodash-es/isArrayLike.js","../CKEditor/node_modules/lodash-es/keys.js","../CKEditor/node_modules/lodash-es/_baseAssign.js","../CKEditor/node_modules/lodash-es/_nativeKeysIn.js","../CKEditor/node_modules/lodash-es/_baseKeysIn.js","../CKEditor/node_modules/lodash-es/keysIn.js","../CKEditor/node_modules/lodash-es/_baseAssignIn.js","../CKEditor/node_modules/lodash-es/_copyArray.js","../CKEditor/node_modules/lodash-es/_arrayFilter.js","../CKEditor/node_modules/lodash-es/stubArray.js","../CKEditor/node_modules/lodash-es/_getSymbols.js","../CKEditor/node_modules/lodash-es/_copySymbols.js","../CKEditor/node_modules/lodash-es/_arrayPush.js","../CKEditor/node_modules/lodash-es/_getPrototype.js","../CKEditor/node_modules/lodash-es/_getSymbolsIn.js","../CKEditor/node_modules/lodash-es/_copySymbolsIn.js","../CKEditor/node_modules/lodash-es/_baseGetAllKeys.js","../CKEditor/node_modules/lodash-es/_getAllKeys.js","../CKEditor/node_modules/lodash-es/_getAllKeysIn.js","../CKEditor/node_modules/lodash-es/_DataView.js","../CKEditor/node_modules/lodash-es/_Promise.js","../CKEditor/node_modules/lodash-es/_Set.js","../CKEditor/node_modules/lodash-es/_WeakMap.js","../CKEditor/node_modules/lodash-es/_getTag.js","../CKEditor/node_modules/lodash-es/_initCloneArray.js","../CKEditor/node_modules/lodash-es/_Uint8Array.js","../CKEditor/node_modules/lodash-es/_cloneArrayBuffer.js","../CKEditor/node_modules/lodash-es/_cloneDataView.js","../CKEditor/node_modules/lodash-es/_cloneRegExp.js","../CKEditor/node_modules/lodash-es/_cloneSymbol.js","../CKEditor/node_modules/lodash-es/_cloneTypedArray.js","../CKEditor/node_modules/lodash-es/_initCloneByTag.js","../CKEditor/node_modules/lodash-es/_baseCreate.js","../CKEditor/node_modules/lodash-es/_initCloneObject.js","../CKEditor/node_modules/lodash-es/_baseIsMap.js","../CKEditor/node_modules/lodash-es/isMap.js","../CKEditor/node_modules/lodash-es/_baseIsSet.js","../CKEditor/node_modules/lodash-es/isSet.js","../CKEditor/node_modules/lodash-es/_baseClone.js","../CKEditor/node_modules/lodash-es/cloneDeepWith.js","../CKEditor/node_modules/lodash-es/isPlainObject.js","../CKEditor/node_modules/lodash-es/isElement.js","../CKEditor/node_modules/@ckeditor/ckeditor5-watchdog/src/utils/getsubnodes.js","../CKEditor/node_modules/@ckeditor/ckeditor5-watchdog/src/utils/areconnectedthroughproperties.js","../CKEditor/node_modules/@ckeditor/ckeditor5-watchdog/src/watchdog.js","../CKEditor/node_modules/@ckeditor/ckeditor5-watchdog/src/editorwatchdog.js","../CKEditor/node_modules/@ckeditor/ckeditor5-utils/src/uid.js","../CKEditor/node_modules/@ckeditor/ckeditor5-watchdog/src/contextwatchdog.js","../CKEditor/src/ckeditorcontext.jsx","../CKEditor/src/ckeditor.jsx","../node_modules/lodash-es/stubFalse.js","../node_modules/html-react-parser/index.mjs","../node_modules/redux-thunk/es/index.js","../node_modules/lodash-es/_overArg.js","../node_modules/lodash-es/_getPrototype.js","../node_modules/lodash-es/isPlainObject.js","../node_modules/lodash-es/_listCacheClear.js","../node_modules/lodash-es/_assocIndexOf.js","../node_modules/lodash-es/_listCacheDelete.js","../node_modules/lodash-es/_listCacheGet.js","../node_modules/lodash-es/_listCacheHas.js","../node_modules/lodash-es/_listCacheSet.js","../node_modules/lodash-es/_ListCache.js","../node_modules/lodash-es/_stackClear.js","../node_modules/lodash-es/_stackDelete.js","../node_modules/lodash-es/_stackGet.js","../node_modules/lodash-es/_stackHas.js","../node_modules/lodash-es/_Map.js","../node_modules/lodash-es/_nativeCreate.js","../node_modules/lodash-es/_hashClear.js","../node_modules/lodash-es/_hashDelete.js","../node_modules/lodash-es/_hashGet.js","../node_modules/lodash-es/_hashHas.js","../node_modules/lodash-es/_hashSet.js","../node_modules/lodash-es/_Hash.js","../node_modules/lodash-es/_mapCacheClear.js","../node_modules/lodash-es/_isKeyable.js","../node_modules/lodash-es/_getMapData.js","../node_modules/lodash-es/_mapCacheDelete.js","../node_modules/lodash-es/_mapCacheGet.js","../node_modules/lodash-es/_mapCacheHas.js","../node_modules/lodash-es/_mapCacheSet.js","../node_modules/lodash-es/_MapCache.js","../node_modules/lodash-es/_stackSet.js","../node_modules/lodash-es/_Stack.js","../node_modules/lodash-es/_arrayEach.js","../node_modules/lodash-es/_nativeKeys.js","../node_modules/lodash-es/_baseKeys.js","../node_modules/lodash-es/keys.js","../node_modules/lodash-es/_baseAssign.js","../node_modules/lodash-es/_baseAssignIn.js","../node_modules/lodash-es/_copyArray.js","../node_modules/lodash-es/_arrayFilter.js","../node_modules/lodash-es/stubArray.js","../node_modules/lodash-es/_getSymbols.js","../node_modules/lodash-es/_copySymbols.js","../node_modules/lodash-es/_arrayPush.js","../node_modules/lodash-es/_getSymbolsIn.js","../node_modules/lodash-es/_copySymbolsIn.js","../node_modules/lodash-es/_baseGetAllKeys.js","../node_modules/lodash-es/_getAllKeys.js","../node_modules/lodash-es/_getAllKeysIn.js","../node_modules/lodash-es/_DataView.js","../node_modules/lodash-es/_Promise.js","../node_modules/lodash-es/_Set.js","../node_modules/lodash-es/_WeakMap.js","../node_modules/lodash-es/_getTag.js","../node_modules/lodash-es/_initCloneArray.js","../node_modules/lodash-es/_Uint8Array.js","../node_modules/lodash-es/_cloneArrayBuffer.js","../node_modules/lodash-es/_cloneDataView.js","../node_modules/lodash-es/_cloneRegExp.js","../node_modules/lodash-es/_cloneSymbol.js","../node_modules/lodash-es/_cloneTypedArray.js","../node_modules/lodash-es/_initCloneByTag.js","../node_modules/lodash-es/_baseCreate.js","../node_modules/lodash-es/_initCloneObject.js","../node_modules/lodash-es/_baseIsMap.js","../node_modules/lodash-es/isMap.js","../node_modules/lodash-es/_baseIsSet.js","../node_modules/lodash-es/isSet.js","../node_modules/lodash-es/_baseClone.js","../node_modules/lodash-es/cloneDeepWith.js","../node_modules/lodash-es/isElement.js","../node_modules/@ckeditor/ckeditor5-utils/src/config.js","../node_modules/@ckeditor/ckeditor5-utils/src/collection.js","../node_modules/@ckeditor/ckeditor5-core/src/plugincollection.js","../node_modules/@ckeditor/ckeditor5-utils/src/toarray.js","../node_modules/@ckeditor/ckeditor5-utils/src/translation-service.js","../node_modules/@ckeditor/ckeditor5-utils/src/locale.js","../node_modules/@ckeditor/ckeditor5-core/src/context.js","../node_modules/lodash-es/clone.js","../node_modules/@ckeditor/ckeditor5-engine/src/view/node.js","../node_modules/@ckeditor/ckeditor5-engine/src/view/text.js","../node_modules/@ckeditor/ckeditor5-engine/src/view/textproxy.js","../node_modules/@ckeditor/ckeditor5-engine/src/view/matcher.js","../node_modules/lodash-es/isSymbol.js","../node_modules/lodash-es/_isKey.js","../node_modules/lodash-es/memoize.js","../node_modules/lodash-es/_memoizeCapped.js","../node_modules/lodash-es/_stringToPath.js","../node_modules/lodash-es/_arrayMap.js","../node_modules/lodash-es/_baseToString.js","../node_modules/lodash-es/toString.js","../node_modules/lodash-es/_castPath.js","../node_modules/lodash-es/last.js","../node_modules/lodash-es/_toKey.js","../node_modules/lodash-es/_baseGet.js","../node_modules/lodash-es/_baseSlice.js","../node_modules/lodash-es/_parent.js","../node_modules/lodash-es/_baseUnset.js","../node_modules/lodash-es/unset.js","../node_modules/lodash-es/get.js","../node_modules/lodash-es/_assignMergeValue.js","../node_modules/lodash-es/_createBaseFor.js","../node_modules/lodash-es/_baseFor.js","../node_modules/lodash-es/isArrayLikeObject.js","../node_modules/lodash-es/_safeGet.js","../node_modules/lodash-es/toPlainObject.js","../node_modules/lodash-es/_baseMergeDeep.js","../node_modules/lodash-es/_baseMerge.js","../node_modules/lodash-es/merge.js","../node_modules/lodash-es/_baseSet.js","../node_modules/lodash-es/set.js","../node_modules/@ckeditor/ckeditor5-engine/src/view/stylesmap.js","../node_modules/@ckeditor/ckeditor5-engine/src/view/element.js","../node_modules/@ckeditor/ckeditor5-engine/src/view/containerelement.js","../node_modules/@ckeditor/ckeditor5-engine/src/view/editableelement.js","../node_modules/@ckeditor/ckeditor5-engine/src/view/rooteditableelement.js","../node_modules/@ckeditor/ckeditor5-engine/src/view/treewalker.js","../node_modules/@ckeditor/ckeditor5-engine/src/view/position.js","../node_modules/@ckeditor/ckeditor5-engine/src/view/range.js","../node_modules/@ckeditor/ckeditor5-utils/src/count.js","../node_modules/@ckeditor/ckeditor5-engine/src/view/selection.js","../node_modules/@ckeditor/ckeditor5-engine/src/view/documentselection.js","../node_modules/@ckeditor/ckeditor5-engine/src/view/document.js","../node_modules/@ckeditor/ckeditor5-engine/src/view/attributeelement.js","../node_modules/@ckeditor/ckeditor5-engine/src/view/emptyelement.js","../node_modules/@ckeditor/ckeditor5-utils/src/env.js","../node_modules/@ckeditor/ckeditor5-utils/src/keyboard.js","../node_modules/@ckeditor/ckeditor5-engine/src/view/uielement.js","../node_modules/@ckeditor/ckeditor5-engine/src/view/rawelement.js","../node_modules/@ckeditor/ckeditor5-engine/src/view/documentfragment.js","../node_modules/@ckeditor/ckeditor5-engine/src/view/downcastwriter.js","../node_modules/@ckeditor/ckeditor5-utils/src/dom/istext.js","../node_modules/@ckeditor/ckeditor5-engine/src/view/filler.js","../node_modules/@ckeditor/ckeditor5-utils/src/fastdiff.js","../node_modules/@ckeditor/ckeditor5-utils/src/diff.js","../node_modules/@ckeditor/ckeditor5-utils/src/dom/insertat.js","../node_modules/@ckeditor/ckeditor5-utils/src/dom/remove.js","../node_modules/@ckeditor/ckeditor5-utils/src/dom/isnode.js","../node_modules/@ckeditor/ckeditor5-engine/src/view/renderer.js","../node_modules/@ckeditor/ckeditor5-utils/src/dom/global.js","../node_modules/@ckeditor/ckeditor5-utils/src/dom/indexof.js","../node_modules/@ckeditor/ckeditor5-utils/src/dom/getancestors.js","../node_modules/@ckeditor/ckeditor5-engine/src/view/domconverter.js","../node_modules/@ckeditor/ckeditor5-utils/src/dom/getcommonancestor.js","../node_modules/@ckeditor/ckeditor5-utils/src/dom/iswindow.js","../node_modules/@ckeditor/ckeditor5-utils/src/dom/emittermixin.js","../node_modules/@ckeditor/ckeditor5-engine/src/view/observer/observer.js","../node_modules/lodash-es/_setCacheAdd.js","../node_modules/lodash-es/_setCacheHas.js","../node_modules/lodash-es/_SetCache.js","../node_modules/lodash-es/_arraySome.js","../node_modules/lodash-es/_cacheHas.js","../node_modules/lodash-es/_equalArrays.js","../node_modules/lodash-es/_mapToArray.js","../node_modules/lodash-es/_setToArray.js","../node_modules/lodash-es/_equalByTag.js","../node_modules/lodash-es/_equalObjects.js","../node_modules/lodash-es/_baseIsEqualDeep.js","../node_modules/lodash-es/_baseIsEqual.js","../node_modules/lodash-es/isEqualWith.js","../node_modules/@ckeditor/ckeditor5-engine/src/view/observer/mutationobserver.js","../node_modules/@ckeditor/ckeditor5-engine/src/view/observer/domeventdata.js","../node_modules/@ckeditor/ckeditor5-engine/src/view/observer/domeventobserver.js","../node_modules/@ckeditor/ckeditor5-engine/src/view/observer/keyobserver.js","../node_modules/lodash-es/now.js","../node_modules/lodash-es/_trimmedEndIndex.js","../node_modules/lodash-es/_baseTrim.js","../node_modules/lodash-es/toNumber.js","../node_modules/lodash-es/debounce.js","../node_modules/@ckeditor/ckeditor5-engine/src/view/observer/fakeselectionobserver.js","../node_modules/@ckeditor/ckeditor5-engine/src/view/observer/selectionobserver.js","../node_modules/@ckeditor/ckeditor5-engine/src/view/observer/focusobserver.js","../node_modules/@ckeditor/ckeditor5-engine/src/view/observer/compositionobserver.js","../node_modules/@ckeditor/ckeditor5-engine/src/view/observer/inputobserver.js","../node_modules/@ckeditor/ckeditor5-utils/src/dom/isrange.js","../node_modules/@ckeditor/ckeditor5-utils/src/dom/getborderwidths.js","../node_modules/@ckeditor/ckeditor5-utils/src/dom/rect.js","../node_modules/@ckeditor/ckeditor5-utils/src/dom/scroll.js","../node_modules/@ckeditor/ckeditor5-engine/src/view/view.js","../node_modules/@ckeditor/ckeditor5-engine/src/conversion/mapper.js","../node_modules/@ckeditor/ckeditor5-engine/src/conversion/modelconsumable.js","../node_modules/@ckeditor/ckeditor5-engine/src/conversion/downcastdispatcher.js","../node_modules/@ckeditor/ckeditor5-engine/src/model/selection.js","../node_modules/@ckeditor/ckeditor5-engine/src/model/documentselection.js","../node_modules/@ckeditor/ckeditor5-engine/src/conversion/conversionhelpers.js","../node_modules/lodash-es/cloneDeep.js","../node_modules/@ckeditor/ckeditor5-engine/src/conversion/downcasthelpers.js","../node_modules/@ckeditor/ckeditor5-engine/src/model/utils/autoparagraphing.js","../node_modules/@ckeditor/ckeditor5-engine/src/conversion/upcasthelpers.js","../node_modules/@ckeditor/ckeditor5-engine/src/controller/editingcontroller.js","../node_modules/@ckeditor/ckeditor5-core/src/commandcollection.js","../node_modules/@ckeditor/ckeditor5-engine/src/conversion/viewconsumable.js","../node_modules/@ckeditor/ckeditor5-engine/src/model/schema.js","../node_modules/@ckeditor/ckeditor5-engine/src/conversion/upcastdispatcher.js","../node_modules/@ckeditor/ckeditor5-engine/src/dataprocessor/basichtmlwriter.js","../node_modules/@ckeditor/ckeditor5-engine/src/dataprocessor/htmldataprocessor.js","../node_modules/@ckeditor/ckeditor5-engine/src/controller/datacontroller.js","../node_modules/@ckeditor/ckeditor5-engine/src/conversion/conversion.js","../node_modules/@ckeditor/ckeditor5-engine/src/model/batch.js","../node_modules/@ckeditor/ckeditor5-engine/src/model/operation/operation.js","../node_modules/@ckeditor/ckeditor5-engine/src/model/documentfragment.js","../node_modules/@ckeditor/ckeditor5-engine/src/model/operation/utils.js","../node_modules/lodash-es/isEqual.js","../node_modules/@ckeditor/ckeditor5-engine/src/model/operation/attributeoperation.js","../node_modules/@ckeditor/ckeditor5-engine/src/model/operation/detachoperation.js","../node_modules/@ckeditor/ckeditor5-engine/src/model/operation/moveoperation.js","../node_modules/@ckeditor/ckeditor5-engine/src/model/operation/insertoperation.js","../node_modules/@ckeditor/ckeditor5-engine/src/model/operation/markeroperation.js","../node_modules/@ckeditor/ckeditor5-engine/src/model/operation/renameoperation.js","../node_modules/@ckeditor/ckeditor5-engine/src/model/operation/rootattributeoperation.js","../node_modules/@ckeditor/ckeditor5-engine/src/model/operation/mergeoperation.js","../node_modules/@ckeditor/ckeditor5-engine/src/model/operation/splitoperation.js","../node_modules/@ckeditor/ckeditor5-engine/src/model/rootelement.js","../node_modules/@ckeditor/ckeditor5-engine/src/model/writer.js","../node_modules/@ckeditor/ckeditor5-engine/src/model/differ.js","../node_modules/@ckeditor/ckeditor5-engine/src/model/history.js","../node_modules/@ckeditor/ckeditor5-utils/src/unicode.js","../node_modules/@ckeditor/ckeditor5-engine/src/model/document.js","../node_modules/@ckeditor/ckeditor5-engine/src/model/markercollection.js","../node_modules/@ckeditor/ckeditor5-engine/src/model/operation/nooperation.js","../node_modules/@ckeditor/ckeditor5-engine/src/model/operation/operationfactory.js","../node_modules/@ckeditor/ckeditor5-engine/src/model/liveposition.js","../node_modules/@ckeditor/ckeditor5-engine/src/model/utils/insertcontent.js","../node_modules/@ckeditor/ckeditor5-engine/src/model/utils/deletecontent.js","../node_modules/@ckeditor/ckeditor5-engine/src/model/utils/modifyselection.js","../node_modules/@ckeditor/ckeditor5-engine/src/model/utils/getselectedcontent.js","../node_modules/@ckeditor/ckeditor5-engine/src/model/utils/selection-post-fixer.js","../node_modules/@ckeditor/ckeditor5-engine/src/model/model.js","../node_modules/@ckeditor/ckeditor5-utils/src/keystrokehandler.js","../node_modules/@ckeditor/ckeditor5-core/src/editingkeystrokehandler.js","../node_modules/@ckeditor/ckeditor5-core/src/editor/editor.js","../node_modules/@ckeditor/ckeditor5-core/src/editor/utils/dataapimixin.js","../node_modules/@ckeditor/ckeditor5-core/src/editor/utils/elementapimixin.js","../node_modules/@ckeditor/ckeditor5-utils/src/dom/setdatainelement.js","../node_modules/@ckeditor/ckeditor5-ui/src/componentfactory.js","../node_modules/@ckeditor/ckeditor5-utils/src/focustracker.js","../node_modules/@ckeditor/ckeditor5-core/src/editor/editorui.js","../node_modules/@ckeditor/ckeditor5-ui/src/toolbar/normalizetoolbarconfig.js","../node_modules/@ckeditor/ckeditor5-engine/src/view/placeholder.js","../node_modules/@ckeditor/ckeditor5-utils/src/elementreplacer.js","../node_modules/@ckeditor/ckeditor5-editor-classic/src/classiceditorui.js","../node_modules/@ckeditor/ckeditor5-ui/src/toolbar/enabletoolbarkeyboardfocus.js","../node_modules/@ckeditor/ckeditor5-ui/src/viewcollection.js","../node_modules/@ckeditor/ckeditor5-ui/src/template.js","../node_modules/@ckeditor/ckeditor5-ui/src/view.js","../node_modules/lodash-es/isString.js","../node_modules/@ckeditor/ckeditor5-ui/src/editorui/bodycollection.js","../node_modules/@ckeditor/ckeditor5-utils/src/dom/createelement.js","../node_modules/@ckeditor/ckeditor5-ui/src/editorui/editoruiview.js","../node_modules/@ckeditor/ckeditor5-ui/src/label/labelview.js","../node_modules/@ckeditor/ckeditor5-ui/src/editorui/boxed/boxededitoruiview.js","../node_modules/@ckeditor/ckeditor5-ui/src/editableui/inline/inlineeditableuiview.js","../node_modules/@ckeditor/ckeditor5-ui/src/editableui/editableuiview.js","../node_modules/@ckeditor/ckeditor5-utils/src/dom/tounit.js","../node_modules/@ckeditor/ckeditor5-ui/src/panel/sticky/stickypanelview.js","../node_modules/@ckeditor/ckeditor5-ui/src/focuscycler.js","../node_modules/@ckeditor/ckeditor5-ui/src/toolbar/toolbarseparatorview.js","../node_modules/@ckeditor/ckeditor5-ui/src/toolbar/toolbarlinebreakview.js","../node_modules/@ckeditor/ckeditor5-utils/src/dom/resizeobserver.js","../node_modules/@ckeditor/ckeditor5-ui/src/dropdown/dropdownpanelview.js","../node_modules/@ckeditor/ckeditor5-utils/src/dom/position.js","../node_modules/@ckeditor/ckeditor5-ui/src/dropdown/dropdownview.js","../node_modules/@ckeditor/ckeditor5-utils/src/dom/getpositionedancestor.js","../node_modules/@ckeditor/ckeditor5-ui/src/icon/iconview.js","../node_modules/@ckeditor/ckeditor5-ui/src/tooltip/tooltipview.js","../node_modules/@ckeditor/ckeditor5-ui/src/button/buttonview.js","../node_modules/@ckeditor/ckeditor5-ui/theme/icons/dropdown-arrow.svg","../node_modules/@ckeditor/ckeditor5-ui/src/dropdown/button/dropdownbuttonview.js","../node_modules/@ckeditor/ckeditor5-ui/src/button/switchbuttonview.js","../node_modules/@ckeditor/ckeditor5-ui/src/dropdown/utils.js","../node_modules/@ckeditor/ckeditor5-ui/src/bindings/clickoutsidehandler.js","../node_modules/@ckeditor/ckeditor5-core/theme/icons/three-vertical-dots.svg","../node_modules/@ckeditor/ckeditor5-ui/src/toolbar/toolbarview.js","../node_modules/@ckeditor/ckeditor5-ui/src/bindings/preventdefault.js","../node_modules/@ckeditor/ckeditor5-editor-classic/src/classiceditoruiview.js","../node_modules/@ckeditor/ckeditor5-editor-classic/src/classiceditor.js","../node_modules/@ckeditor/ckeditor5-core/src/editor/utils/attachtoform.js","../node_modules/@ckeditor/ckeditor5-utils/src/dom/getdatafromelement.js","../node_modules/@ckeditor/ckeditor5-autoformat/src/blockautoformatediting.js","../node_modules/@ckeditor/ckeditor5-utils/src/first.js","../node_modules/@ckeditor/ckeditor5-autoformat/src/inlineautoformatediting.js","../node_modules/@ckeditor/ckeditor5-core/src/plugin.js","../node_modules/@ckeditor/ckeditor5-autoformat/src/autoformat.js","../node_modules/@material-ui/utils/esm/formatMuiErrorMessage.js","../node_modules/regenerator-runtime/runtime.js","../node_modules/react/cjs/react.production.min.js","../node_modules/react-dom/cjs/react-dom.production.min.js","../node_modules/scheduler/index.js","../node_modules/scheduler/cjs/scheduler.production.min.js","../node_modules/prop-types/factoryWithThrowingShims.js","../node_modules/prop-types/lib/ReactPropTypesSecret.js","../node_modules/path-to-regexp/node_modules/isarray/index.js","../node_modules/react-is/cjs/react-is.production.min.js","../node_modules/react/cjs/react-jsx-runtime.production.min.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/objectSpread2.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/defineProperty.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/get.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/superPropBase.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/inherits.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/setPrototypeOf.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createSuper.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/isNativeReflectConstruct.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/typeof.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/arrayLikeToArray.js","../node_modules/html-react-parser/lib/dom-to-react.js","../node_modules/react-property/index.js","../node_modules/react-property/lib/HTMLDOMPropertyConfig.js","../node_modules/react-property/lib/SVGDOMPropertyConfig.js","../node_modules/react-property/lib/injection.js","../node_modules/style-to-js/cjs/index.js","../node_modules/style-to-object/index.js","../node_modules/inline-style-parser/index.js","../node_modules/style-to-js/cjs/utilities.js","../node_modules/html-dom-parser/lib/client/html-to-dom.js","../node_modules/html-dom-parser/lib/client/domparser.js","../node_modules/html-dom-parser/lib/client/constants.js","../node_modules/html-dom-parser/node_modules/domhandler/lib/node.js","../node_modules/lodash-es/assignIn.js","../node_modules/@material-ui/core/esm/Container/Container.js","../node_modules/@material-ui/core/esm/Grid/Grid.js","../node_modules/@material-ui/core/esm/utils/setRef.js","../node_modules/@material-ui/core/esm/utils/useForkRef.js","../node_modules/@material-ui/core/esm/utils/useEventCallback.js","../node_modules/@material-ui/core/esm/utils/useIsFocusVisible.js","../node_modules/react-transition-group/esm/TransitionGroupContext.js","../node_modules/react-transition-group/esm/utils/ChildMapping.js","../node_modules/react-transition-group/esm/TransitionGroup.js","../node_modules/@material-ui/core/esm/ButtonBase/Ripple.js","../node_modules/@material-ui/core/esm/ButtonBase/TouchRipple.js","../node_modules/@material-ui/core/esm/ButtonBase/ButtonBase.js","../node_modules/@material-ui/core/esm/Button/Button.js"],"names":["_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","length","i","F","s","n","done","value","e","_e","f","TypeError","err","normalCompletion","didErr","step","next","_e2","_classCallCheck","instance","Constructor","_defineProperties","target","props","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","module","exports","require","Class","_cache","Map","undefined","fn","Function","toString","call","indexOf","has","get","set","Wrapper","construct","arguments","getPrototypeOf","this","constructor","create","setPrototypeOf","CKEditorError","errorName","context","data","message","JSON","stringify","getLinkToDocumentationMessage","name","type","is","error","stack","Error","logWarning","console","warn","formatConsoleArguments","logError","documentationMessage","_inherits","subClass","superClass","_typeof","obj","_possibleConstructorReturn","self","assertThisInitialized","_createSuper","Derived","hasNativeReflectConstruct","isNativeReflectConstruct","result","Super","NewTarget","Reflect","apply","Range","start","end","Position","_createAt","stickiness","isCollapsed","TreeWalker","boundaries","ignoreElementEnd","isEqual","startParentPath","getParentPath","endParentPath","compareArrays","root","position","isAfter","isBefore","otherRange","loose","containsStart","containsPosition","containsEnd","item","pos","_createBefore","ranges","isIntersecting","push","commonRangeStart","commonRangeEnd","shouldJoin","isTouching","startPosition","endPosition","diffAt","getCommonPath","posParent","parent","path","howMany","maxOffset","offset","getShiftedBy","slice","options","treeWalker","nextPosition","operation","_getTransformedByInsertOperation","_getTransformedByMoveOperation","_getTransformedBySplitOperation","_getTransformedByMergeOperation","operations","getTransformedByOperation","splice","range","j","containsRange","getCommonAncestor","nodeAfterStart","nodeAfter","nodeBeforeEnd","nodeBefore","toJSON","spread","_getTransformedByInsertion","sourcePosition","targetPosition","_getTransformedByMove","insertionPosition","deletionPosition","insertPosition","newPos","moveRange","_createFromPositionAndShift","_getTransformedByDeletion","differenceSet","getDifference","difference","common","getIntersection","transformedCommon","_getCombined","deletePosition","newStart","newEnd","shift","element","offsetSize","clone","ref","sort","a","b","refIndex","json","doc","fromJSON","getPath","newOffset","getChild","offsetToIndex","getTextNodeAtPosition","getNodeAfterPosition","getNodeBeforePosition","otherPosition","skip","getAncestors","includeSelf","parentName","findAncestor","cmp","Math","min","ancestorsA","ancestorsB","shifted","compareWith","left","right","leftParent","thisParentPath","posParentPath","movedRange","splitPosition","moveTargetPosition","graveyardPosition","transformed","source","combined","from","itemOrPosition","node","_createAfter","endOffset","startOffset","graveyard","getRoot","rootName","positionParent","textNode","_extends","assign","hasOwnProperty","_getPrototypeOf","__proto__","property","receiver","base","object","desc","getOwnPropertyDescriptor","mix","baseClass","mixins","forEach","mixin","getOwnPropertyNames","concat","getOwnPropertySymbols","sourceDescriptor","_slicedToArray","arr","_arr","_n","_d","_s","_i","unsupportedIterableToArray","_toConsumableArray","arrayLikeToArray","iter","spy","called","EventInfo","stop","off","_listeningTo","_emitterId","EmitterMixin","on","event","callback","listenTo","once","wasFired","args","stopListening","emitter","emitterInfo","eventCallbacks","emitters","_getEmitterId","_setEmitterId","emitterId","callbacks","createEventNamespace","lists","getCallbacksListsForNamespace","priority","priorities","callbackDefinition","added","removeCallback","pop","fire","eventOrInfo","eventInfo","getCallbacksForEvent","callbackArgs","_delegations","destinations","passAllDestinations","fireDelegatedEvents","return","rethrowUnexpectedError","delegate","events","to","nameOrFunction","eventName","stopDelegating","delete","clear","_getEmitterListenedTo","listeningEmitter","listenedToEmitterId","id","uid","getEvents","_events","childEventName","newEventNodes","childEvents","substr","lastIndexOf","eventNode","callbacksLists","childCallbacksLists","fireArgs","delegatedInfo","Element","attrs","children","_children","NodeList","_insertChild","childCount","index","getNode","getNodeIndex","getNodeStartOffset","relativePath","deep","map","_clone","getAttributes","nodes","items","Text","isIterable","TextProxy","normalize","_remove","_insertNodes","_removeNodes","child","attributes","Node","_data","historyContext","createContext","createNamedContext","Router","location","computeRootMatch","url","params","isExact","pathname","componentDidMount","_pendingLocation","componentWillUnmount","unlisten","render","RouterContext","history","state","match","staticContext","HistoryContext","React","Component","Lifecycle","onMount","componentDidUpdate","onUpdate","prevProps","onUnmount","cache","cacheCount","generatePath","generator","pathToRegexp","compilePath","pretty","Redirect","computedMatch","method","createLocation","prevLocation","locationsAreEqual","matchPath","exact","strict","sensitive","matched","cacheKey","pathCache","keys","regexp","values","memo","Route","component","addLeadingSlash","stripBasename","basename","createURL","createPath","staticHandler","methodName","invariant","noop","Switch","useContext","useHistory","_objectWithoutProperties","excluded","sourceSymbolKeys","propertyIsEnumerable","_assertThisInitialized","ReferenceError","isObject","observablePropertiesSymbol","boundObservablesSymbol","boundPropertiesSymbol","ObservableMixin","initObservable","properties","oldValue","newValue","bind","bindProperties","isStringArray","Set","size","boundProperties","propertyName","bindings","binding","bindTo","toMany","bindToMany","_observable","_bindProperties","_to","_bindings","unbind","boundObservables","unbindProperties","toObservable","toProperty","toProperties","toPropertyBindings","boundObservable","decorate","originalMethod","evt","observable","parsedArgs","parseBindToArgs","bindingsKeys","numberOfBindings","attachBindToListeners","updateBindToBound","updateBoundObservableProperty","observables","attribute","observableAndAttributePairs","getBindingTargets","every","lastObservable","parsed","chain","toPropertyName","bindingsToObservable","add","updateBoundObservables","propertyValue","toBindings","extend","isObjectLike","freeSelf","freeGlobal","minLen","_inheritsLoose","toVal","k","y","str","tmp","x","offsetInText","substring","parentFirst","ancestors","hasAttribute","getAttribute","getAttributeKeys","objectProto","nativeObjectToString","symToStringTag","toStringTag","getRawTag","isOwn","tag","unmasked","objectToString","baseGetTag","coreJsData","maskSrcKey","exec","IE_PROTO","isMasked","func","reIsHostCtor","funcProto","funcToString","reIsNative","RegExp","replace","baseIsNative","isFunction","test","toSource","getValue","getNative","prefix","condition","copyObject","customizer","isNew","baseAssignValue","assignValue","HEX_NUMBERS","fill","val","r1","random","r2","r3","r4","nativeKeysIn","baseKeysIn","isProto","isPrototype","keysIn","isArrayLike","arrayLikeKeys","direction","singleCharacters","shallow","_boundaryStartParent","_boundaryEndParent","_visitedParent","prevPosition","prevVisitedParent","_next","_previous","previousPosition","textNodeAtPosition","formatReturnValue","charactersCount","offsetInTextNode","_defineProperty","clamp","max","decomposeColor","color","charAt","re","colors","parseInt","round","join","hexToRgb","marker","_formatMuiErrorMessage","split","parseFloat","recomposeColor","getContrastRatio","foreground","background","lumA","getLuminance","lumB","rgb","h","l","hslToRgb","pow","Number","toFixed","fade","darken","coefficient","lighten","isAbsolute","spliceOne","list","resolvePathname","hasTrailingSlash","toParts","fromParts","isToAbs","isFromAbs","mustEndAbs","last","up","part","unshift","valueOf","valueEqual","aValue","bValue","stripLeadingSlash","toLowerCase","hasBasename","stripTrailingSlash","search","hash","currentLocation","hashIndex","searchIndex","parsePath","decodeURI","URIError","createTransitionManager","prompt","listeners","setPrompt","nextPrompt","confirmTransitionTo","action","getUserConfirmation","appendListener","isActive","listener","filter","notifyListeners","_len","_key","canUseDOM","window","document","createElement","getConfirmation","confirm","PopStateEvent","HashChangeEvent","getHistoryState","createBrowserHistory","globalHistory","canUseHistory","ua","navigator","userAgent","supportsHistory","needsHashChangeListener","_props","_props$forceRefresh","forceRefresh","_props$getUserConfirm","_props$keyLength","keyLength","getDOMLocation","historyState","_ref","_window$location","createKey","transitionManager","setState","nextState","handlePopState","isExtraneousPopstateEvent","handlePop","handleHashChange","forceNextPop","ok","fromLocation","toLocation","toIndex","allKeys","fromIndex","delta","go","revertPop","initialLocation","createHref","listenerCount","checkDOMListeners","addEventListener","removeEventListener","isBlocked","href","pushState","prevIndex","nextKeys","replaceState","goBack","goForward","block","unblock","listen","HashChangeEvent$1","HashPathCoders","hashbang","encodePath","decodePath","noslash","slash","stripHash","getHashPath","replaceHashPath","createHashHistory","_props$hashType","hashType","_HashPathCoders$hashT","ignorePath","encodedPath","allPaths","baseTag","querySelector","pushHashPath","nextPaths","lowerBound","upperBound","createMemoryHistory","_props$initialEntries","initialEntries","_props$initialIndex","initialIndex","entries","entry","nextIndex","nextEntries","canGo","toMap","objectToMap","ReactReduxContext","batch","nullListeners","notify","createListenerCollection","first","subscribe","isSubscribed","prev","Subscription","store","parentSub","unsubscribe","handleChangeWrapper","_proto","addNestedSub","trySubscribe","notifyNestedSubs","onStateChange","Boolean","tryUnsubscribe","Provider","contextValue","useMemo","subscription","previousState","getState","useEffect","Context","useIsomorphicLayoutEffect","useLayoutEffect","useReduxContext","createStoreHook","useDefaultReduxContext","useStore","createDispatchHook","useDefaultStore","dispatch","useDispatch","refEquality","createSelectorHook","selector","equalityFn","_useReduxContext","selectedState","contextSub","forceRender","useReducer","latestSubscriptionCallbackError","useRef","latestSelector","latestStoreState","latestSelectedState","storeState","current","checkForUpdates","newSelectedState","useSelectorWithStoreAndSubscription","useDebugValue","newBatch","useSelector","eq","other","_attrs","getChildIndex","getChildStartOffset","thisPath","nodePath","reduce","attr","_removeChildren","isBrowser","nodeType","plainObjectConstrurctor","cloneStyle","style","newStyle","createRule","decl","jss","declCopy","rule","plugins","onCreateRule","by","toCssValue","ignoreImportant","cssValue","indentStr","indent","toCss","_options$indent","fallbacks","fallback","prop","_prop","_value","_prop2","_value2","allowEmpty","escapeRegex","nativeEscape","CSS","escape","BaseStyleRule","isProcessed","renderer","renderable","sheet","Renderer","force","process","onChangeValue","isEmpty","isDefined","remove","removeProperty","setProperty","attached","StyleRule","_BaseStyleRule","_this","selectorText","scoped","generateId","_proto2","applyTo","opts","link","setSelector","replaceRule","pluginStyleRule","defaultToStringOptions","atRegExp","ConditionalRule","styles","at","query","rules","atMatch","RuleList","getRule","addRule","onProcessRule","keyRegExp","pluginConditionalRule","defaultToStringOptions$1","nameRegExp","KeyframesRule","frames","nameMatch","keyRegExp$1","refRegExp","findReferencedKeyframe","keyframes","replaceRef","refKeyframe","plugin","onProcessStyle","KeyframeRule","pluginKeyframeRule","FontFaceRule","keyRegExp$2","pluginFontFaceRule","ViewportRule","pluginViewportRule","SimpleRule","keysMap","defaultUpdateOptions","forceUpdateOptions","raw","counter","classes","ruleOptions","_this$options","register","unregister","update","updateOne","_this$options2","styleRule","nextValue","_nextValue","_prevValue","css","StyleSheet","deployed","queue","attach","deploy","detach","insertRule","addRules","deleteRule","_this$rules","PluginsRegistry","internal","external","registry","onProcessSheet","processedValue","use","newPlugin","SheetsRegistry","reset","_temp","_objectWithoutPropertiesLoose","globalThis","ns","moduleId","createGenerateId","ruleCounter","jssId","classNamePrefix","String","minify","memoize","getPropertyValue","cssRule","attributeStyleMap","getHead","findPrevNode","registry$1","insertionPoint","findHigherSheet","parentNode","findHighestSheet","nextSibling","comment","text","head","childNodes","nodeValue","trim","findCommentNode","getNonce","_insertRule","container","appendRule","cssRules","getValidRuleInsertionIndex","maxIndex","DomRenderer","hasInsertedRules","media","meta","el","textContent","createStyle","setAttribute","nonce","nextNode","insertBefore","insertionPointElement","appendChild","insertStyle","removeChild","insertRules","nativeParent","latestNativeParent","_insertionIndex","refCssRule","ruleStr","insertionIndex","nativeRule","getRules","instanceCounter","Jss","version","isInBrowser","setup","createStyleSheet","removeStyleSheet","getDynamicStyles","extracted","hasCSSTOMSupport","mergeClasses","baseClasses","newClasses","nextClasses","multiKeyStore","key1","key2","subCache","ThemeContext","useTheme","hasSymbol","for","pseudoClasses","now","Date","fnValuesNs","fnRuleNs","functionPlugin","fnValues","fnRule","atPrefix","GlobalContainerRule","GlobalPrefixedRule","separatorRegExp","addScope","scope","parts","jssGlobal","handleNestedGlobalContainerRule","handlePrefixedGlobalRule","parentRegExp","jssNested","getReplaceRef","replaceParentRefs","nestedProp","parentProp","parentSelectors","nestedSelectors","nested","getOptions","prevOptions","nestingLevel","isNested","isNestedConditional","uppercasePattern","msPattern","toHyphenLower","hyphenateStyleName","hName","convertCase","converted","hyphenate","camelCase","hyphenatedProp","px","ms","percent","addCamelCasedVersion","regExp","toUpperCase","newObj","units","border","margin","padding","height","width","bottom","top","inset","motion","outline","perspective","gap","grid","iterate","innerProp","_innerProp","isNaN","unit","defaultUnit","camelCasedOptions","js","vendor","browser","isTouch","documentElement","jsCssMap","Moz","O","Webkit","appearence","noPrefill","supportedProperty","colorAdjust","toUpper","c","camelize","pascalize","mask","longhand","textOrientation","transform","transition","writingMode","userSelect","breakPropsOld","inlineLogicalOld","newProp","unprefixed","prefixed","pascalized","scrollSnap","overscrollBehavior","propMap","order","flex2012","propMap$1","flex","propKeys","prefixCss","p","multiple","propertyDetectors","computed","getComputedStyle","key$1","el$1","cache$1","transitionProperties","transPropsRegExp","prefixTransitionCallback","p1","p2","prefixedValue","supportedValue","jssVendorPrefixer","prefixStyle","changeProp","supportedProp","changeValue","supportedValue$1","atRule","jssPropsSort","prop0","prop1","jssPreset","functions","global","vendorPrefixer","propsSort","defaultOptions","disableGeneration","generateClassName","_options$disableGloba","disableGlobal","_options$productionPr","productionPrefix","_options$seed","seed","seedPrefix","getNextCounterId","styleSheet","theme","createGenerateClassName","sheetsCache","sheetsManager","sheetsRegistry","StylesContext","indexCounter","increment","isPlainObject","deepmerge","output","getStylesCreator","stylesOrCreator","themingEnabled","overrides","stylesWithOverrides","noopTheme","getClasses","stylesOptions","cacheClasses","lastProp","lastJSS","generate","_ref2","stylesCreator","sheetManager","refs","staticSheet","dynamicStyles","flip","serverGenerateClassName","dynamicSheet","_ref3","_ref4","useSynchronousEffect","currentKey","makeStyles","classNamePrefixOption","_options$defaultTheme","defaultTheme","stylesOptions2","useStyles","shouldUpdate","getThemeProps","propName","defaultProps","withStyles","_options$withTheme","withTheme","displayName","WithStyles","forwardRef","innerRef","more","hoistNonReactStatics","createBreakpoints","breakpoints","_breakpoints$values","xs","sm","md","lg","xl","_breakpoints$unit","_breakpoints$step","between","endIndex","down","upperbound","only","createMixins","spacing","_toolbar","gutters","paddingLeft","paddingRight","toolbar","minHeight","black","white","grey","50","100","200","300","400","500","600","700","800","900","A100","A200","A400","A700","indigo","pink","red","orange","blue","green","light","primary","secondary","disabled","hint","divider","paper","default","active","hover","hoverOpacity","selected","selectedOpacity","disabledBackground","disabledOpacity","focus","focusOpacity","activatedOpacity","dark","icon","addLightOrDark","intent","shade","tonalOffset","tonalOffsetLight","tonalOffsetDark","main","createPalette","palette","_palette$primary","_palette$secondary","_palette$error","_palette$warning","warning","_palette$info","info","_palette$success","success","_palette$type","_palette$contrastThre","contrastThreshold","_palette$tonalOffset","getContrastText","augmentColor","mainShade","lightShade","darkShade","contrastText","types","caseAllCaps","textTransform","defaultFontFamily","createTypography","typography","_ref$fontFamily","fontFamily","_ref$fontSize","fontSize","_ref$fontWeightLight","fontWeightLight","_ref$fontWeightRegula","fontWeightRegular","_ref$fontWeightMedium","fontWeightMedium","_ref$fontWeightBold","fontWeightBold","_ref$htmlFontSize","htmlFontSize","allVariants","pxToRem2","pxToRem","coef","buildVariant","fontWeight","lineHeight","letterSpacing","casing","variants","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","button","caption","overline","createShadow","shadows","shape","borderRadius","merge","acc","defaultBreakpoints","m","directions","t","r","aliases","marginX","marginY","paddingX","paddingY","getCssProperties","arg","_prop$split2","dir","spacingKeys","createUnarySpacing","themeSpacing","abs","getStyleFromPropValue","cssProperties","transformer","propValue","cssProperty","styleFromPropValue","themeBreakpoints","_themeBreakpoints","breakpoint","handleBreakpoints","propTypes","filterProps","createSpacing","spacingInput","mui","argument","easing","easeInOut","easeOut","easeIn","sharp","duration","shortest","shorter","short","standard","complex","enteringScreen","leavingScreen","formatMs","milliseconds","_options$duration","durationOption","_options$easing","easingOption","_options$delay","delay","animatedProp","getAutoHeightDuration","constant","zIndex","mobileStepper","speedDial","appBar","drawer","modal","snackbar","tooltip","createMuiTheme","_options$breakpoints","breakpointsInput","_options$mixins","mixinsInput","_options$palette","paletteInput","_options$typography","typographyInput","muiTheme","transitions","withStylesWithoutDefault","_nodes","sum","totalOffset","nodeList","indexStart","freeExports","freeModule","Buffer","isBuffer","stubFalse","freeProcess","nodeUtil","ownKeys","enumerableOnly","symbols","sym","_objectSpread2","getOwnPropertyDescriptors","defineProperties","checkDCE","__REACT_DEVTOOLS_GLOBAL_HOOK__","isLength","capitalize","string","reactIs","REACT_STATICS","childContextTypes","contextType","contextTypes","getDefaultProps","getDerivedStateFromError","getDerivedStateFromProps","KNOWN_STATICS","caller","callee","arity","MEMO_STATICS","compare","TYPE_STATICS","getStatics","isMemo","ForwardRef","Memo","objectPrototype","targetComponent","sourceComponent","blacklist","inheritedComponent","targetStatics","sourceStatics","LiveRange","bindWithDocument","model","isDocumentOperation","_createFromRanges","boundariesChanged","contentChanged","doesOperationChangeRangeContent","oldRange","toRange","E","g","P","u","w","R","guards","ignoreGlobal","loading","d","G","I","Promise","throw","then","N","label","sent","trys","ops","S","T","C","freeze","CONTINUE","PROPS","REDIRECT","D","U","Y","z","V","_","q","A","B","H","J","K","L","M","Q","W","payload","redirect","X","Z","$","ee","v","randomString","ActionTypes","INIT","REPLACE","PROBE_UNKNOWN_ACTION","proto","createStore","reducer","preloadedState","enhancer","currentReducer","currentState","currentListeners","nextListeners","isDispatching","ensureCanMutateNextListeners","replaceReducer","nextReducer","outerSubscribe","observer","observeState","$$observable","getUndefinedStateErrorMessage","actionType","combineReducers","reducers","reducerKeys","finalReducers","shapeAssertionError","finalReducerKeys","assertReducerShape","hasChanged","previousStateForKey","nextStateForKey","errorMessage","bindActionCreator","actionCreator","bindActionCreators","actionCreators","boundActionCreators","compose","funcs","applyMiddleware","middlewares","_dispatch","middlewareAPI","middleware","BrowserRouter","createHistory","resolveToLocation","normalizeToLocation","forwardRefShim","LinkAnchor","navigate","onClick","rest","ex","isModifiedEvent","forwardedRef","Link","ariaCurrent","activeClassName","activeStyle","classNameProp","className","isActiveProp","locationProp","styleProp","escapedPath","classnames","joinClassnames","_unsupportedIterableToArray","_setPrototypeOf","Ctor","objValue","baseUnary","reIsUint","isIndex","typedArrayTags","baseIsTypedArray","nodeIsTypedArray","isTypedArray","normal","highest","high","low","lowest","windowOrGlobal","CKEDITOR_VERSION","_arrayLikeToArray","len","arr2","baseIsArguments","isArguments","domToReact","attributesToProps","htmlToDOM","domParserOptions","lowerCaseAttributeNames","HTMLReactParser","html","htmlparser2","originalModule","webpackPolyfill","sourceKeys","_isNativeReflectConstruct","sham","Proxy","allocUnsafe","cloneBuffer","buffer","isDeep","copy","_construct","Parent","identity","thisArg","nativeMax","overRest","array","otherArgs","baseSetToString","nativeNow","shortOut","setToString","count","lastCalled","stamp","remaining","baseRest","isIterateeCall","createAssigner","assigner","sources","guard","baseTimes","iteratee","inherited","isArr","isArg","isBuff","isType","skipIndexes","propIsEnumerable","toObject","test1","test2","fromCharCode","test3","letter","shouldUseNative","MAX_SIGNED_31_BIT_INT","commonjsGlobal","createEventEmitter","handlers","handler","changedBits","defaultValue","calculateChangedBits","_Provider$childContex","_Consumer$contextType","contextProp","getUniqueId","_Component","getChildContext","componentWillReceiveProps","nextProps","PropTypes","isRequired","Consumer","_Component2","_this2","observedBits","isarray","parse","compile","tokensToFunction","tokensToRegExp","PATH_REGEXP","res","tokens","defaultDelimiter","delimiter","escaped","capture","group","modifier","asterisk","partial","repeat","optional","pattern","escapeGroup","escapeString","encodeURIComponentPretty","encodeURI","charCodeAt","matches","flags","encode","encodeURIComponent","token","segment","attachKeys","route","endsWithDelimiter","groups","regexpToRegexp","arrayToRegexp","stringToRegexp","ponyfill","reactProperty","utilities","setStyleProp","htmlProperties","svgProperties","svg","isCustomAttribute","attributeName","attributeNameLowerCased","attributeValue","hasBooleanValue","hasOverloadedBooleanValue","PRESERVE_CUSTOM_ATTRIBUTES","styleToJS","styleToJSOptions","reactCompat","invertObject","override","isOverridePresent","isCustomComponent","tagName","constants","domhandler","CASE_SENSITIVE_TAG_NAMES","Comment","ProcessingInstruction","caseSensitiveTagNamesMap","formatAttributes","formatTagName","caseSensitiveTagName","getCaseSensitiveTagName","formatDOM","directive","nodeName","isIE","asyncGeneratorStep","gen","resolve","reject","_throw","_asyncToGenerator","symbolObservablePonyfill","_iterableToArray","_arrayWithHoles","_nonIterableRest","__WEBPACK_EXTERNAL_MODULE__3__","installedModules","__webpack_require__","modules","getter","mode","__esModule","ReactPropTypesSecret","emptyFunction","emptyFunctionWithReset","resetWarningCache","shim","componentName","propFullName","secret","getShim","ReactPropTypes","bool","number","symbol","any","arrayOf","elementType","instanceOf","objectOf","oneOf","oneOfType","checkPropTypes","reTrim","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","isBinary","nativeMin","wait","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","invokeFunc","time","leadingEdge","setTimeout","timerExpired","shouldInvoke","timeSinceLastCall","trailingEdge","timeWaiting","debounced","isInvoking","clearTimeout","cancel","flush","__data__","ListCache","Hash","MapCache","pairs","LARGE_ARRAY_SIZE","Stack","St","predicate","resIndex","nativeGetSymbols","keysFunc","symbolsFunc","dataViewCtorString","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","getTag","ArrayBuffer","ctorString","input","Uint8Array","arrayBuffer","byteLength","dataView","byteOffset","reFlags","lastIndex","symbolProto","symbolValueOf","typedArray","objectCreate","nodeIsMap","isMap","nodeIsSet","isSet","cloneableTags","baseClone","bitmask","isFlat","isFull","isFunc","stacked","subValue","objectCtorString","getSubNodes","excludedProperties","subNodes","shouldNodeBeSkipped","typeOfNode","EventTarget","Event","areConnectedThroughProperties","target1","target2","structure","excludedNodes","subNodes1","subNodes2","Watchdog","config","crashes","_crashNumberLimit","crashNumberLimit","_now","_minimumNonErrorTimePeriod","minimumNonErrorTimePeriod","_boundErrorHandler","reason","_handleError","_listeners","_restart","creator","_creator","destructor","_destructor","_stopErrorHandling","cb","_shouldReactToError","filename","lineno","colno","date","causesRestart","_shouldRestart","_fire","_isErrorComingFromThisItem","Editor","watchdogConfig","super","_editor","_throttledSave","_save","saveInterval","elementOrData","editor","destroy","_destroy","catch","_elementOrData","_config","updatedConfig","initialData","_cloneEditorConfiguration","_lastDocumentVersion","_getData","_excludedProps","getRootNames","_watchdogs","_watchdogConfig","_context","_contextProps","_actionQueue","ActionQueue","contextConfig","onEmpty","enqueue","_contextConfig","_create","itemId","_getWatchdog","_item","itemConfigurationOrItemConfigurations","itemConfigurations","all","watchdog","setCreator","_setExcludedProperties","setDestructor","rethrowRestartEventOnce","sourceElementOrData","itemIdOrItemIds","itemIds","_startErrorHandling","_promiseQueue","_onEmptyCallbacks","onEmptyCallback","nonErrorQueue","queueWithAction","ContextWatchdogContext","CKEditorContext","contextWatchdog","isLayoutReady","_initializeContextWatchdog","shouldComponentUpdate","_destroyContext","ContextWatchdog","onError","phase","willContextRestart","errorEvent","onReady","details","CKEditor","domContainer","createRef","_destroyEditor","_shouldUpdateEditor","setData","isReadOnly","_initializeEditor","EditorWatchdogAdapter","EditorWatchdog","_createEditor","willEditorRestart","_getConfig","modelDocument","viewDocument","editing","view","onChange","onFocus","onBlur","getData","_contextWatchdog","_id","getItem","onInit","createThunkMiddleware","extraArgument","thunk","withExtraArgument","overArg","getPrototype","listCacheClear","assocIndexOf","listCacheDelete","listCacheGet","listCacheHas","listCacheSet","stackClear","stackDelete","stackGet","stackHas","nativeCreate","hashClear","hashDelete","hashGet","hashHas","hashSet","mapCacheClear","isKeyable","getMapData","mapCacheDelete","mapCacheGet","mapCacheHas","mapCacheSet","stackSet","arrayEach","nativeKeys","baseKeys","baseAssign","baseAssignIn","copyArray","arrayFilter","stubArray","getSymbols","copySymbols","arrayPush","getSymbolsIn","copySymbolsIn","baseGetAllKeys","getAllKeys","getAllKeysIn","DataView","WeakMap","mapTag","promiseTag","setTag","weakMapTag","dataViewTag","initCloneArray","cloneArrayBuffer","cloneDataView","cloneRegExp","cloneSymbol","cloneTypedArray","initCloneByTag","baseCreate","initCloneObject","baseIsMap","baseIsSet","argsTag","funcTag","objectTag","cloneDeepWith","CLONE_DEEP_FLAG","isElement","Config","configurations","defaultConfigurations","define","cloneConfig","_setObjectToTarget","_setToTarget","_getFromSource","isDefine","configuration","leaveDOMReferences","Collection","initialItemsOrOptions","hasInitialItems","_items","_itemMap","_idProperty","idProperty","_bindToExternalToInternalMap","_bindToInternalToExternalMap","_skippedIndexesFromExternal","_getItemIdBeforeAdding","addMany","currentItemIndex","removed","idOrIndex","itemOrId","subject","ctx","find","_bindToCollection","removedItems","externalCollection","as","_setUpBindToBinding","using","callbackOrProperty","factory","addItem","externalItem","isExternalBoundToThis","externalItemBound","finalIndex","getIndex","skipped","itemDoesNotExist","PluginCollection","availablePlugins","contextPlugins","_plugins","_availablePlugins","PluginConstructor","pluginName","_contextPlugins","pluginInstance","removePlugins","that","loaded","pluginConstructors","mapToAvailableConstructors","removePluginConstructors","missingPlugins","getMissingPluginNames","errorId","loadPlugin","initPlugins","includes","instantiatePlugin","loadedPlugins","promise","requires","RequiredPluginConstructorOrName","RequiredPluginConstructor","getPluginConstructor","isContextPlugin","requiredBy","_add","PluginConstructorOrName","pluginNameOrConstructor","promises","plugin1","plugin2","toArray","_translate","language","quantity","numberOfLanguages","getNumberOfLanguages","CKEDITOR_TRANSLATIONS","messageId","hasTranslation","plural","dictionary","getPluralForm","pluralFormIndex","RTL_LANGUAGE_CODES","Locale","uiLanguage","contentLanguage","uiLanguageDirection","getLanguageDirection","contentLanguageDirection","_t","hasPluralForm","translatedString","interpolateString","languageCode","defaultConfig","builtinPlugins","languageConfig","locale","ui","editors","_contextOwner","Plugin","init","isContextOwner","names","_fireChange","_textData","otherNode","Matcher","_patterns","singleElement","isElementMatching","results","matchName","patterns","matchAttributes","getClassNames","hasClass","matchClasses","hasStyle","getStyle","matchStyles","isSymbol","reIsDeepProp","reIsPlainProp","isKey","resolver","memoized","Cache","memoizeCapped","rePropName","reEscapeChar","stringToPath","quote","subString","arrayMap","symbolToString","baseToString","castPath","toKey","baseGet","baseSlice","baseUnset","unset","assignMergeValue","createBaseFor","baseFor","fromRight","iterable","isArrayLikeObject","safeGet","toPlainObject","baseMergeDeep","srcIndex","mergeFunc","srcValue","isCommon","isTyped","baseMerge","baseSet","StylesMap","styleProcessor","_styles","_styleProcessor","getStyleNames","inlineStyle","stylesString","quoteType","propertyNameStart","propertyValueStart","stylesMap","char","parseInlineStyles","toNormalizedForm","propertyDescriptor","getReducedForm","nameOrObject","valueOrObject","toPath","_cleanEmptyObjectsOnPath","getNormalized","_getStylesEntries","pathParts","parentPath","parentObject","StylesProcessor","_normalizers","_extractors","_reducers","_consumables","appendStyleValue","normalizer","extractor","normalizedValue","callbackOrPath","shorthandName","styleNames","_mapStyleNames","alsoName","stylesObject","nameOrPath","valueToSet","parseAttributes","_classes","classString","parseClasses","stylesProcessor","setTo","_customProperties","otherElement","getAsString","matcher","childrenClone","getChildren","cloned","getFillerOffset","classesSet","classesString","classArray","ContainerElement","lastChild","EditableElement","isFocused","selection","editableElement","rootNameSymbol","RootEditableElement","getCustomProperty","_setCustomProperty","isAtEnd","_formatReturnValue","textLength","textProxy","isAtStart","editable","otherPath","getLastMatchingPosition","enlargeTrimSkip","previousSibling","startElement","endElement","_createFromParentsAndOffsets","Selection","selectable","placeOrOffset","_ranges","_lastRangeBackward","_isFake","_fakeSelectionLabel","rangeCount","anchor","firstRange","getFirstRange","lastRange","getLastRange","otherSelection","isFake","fakeSelectionLabel","thisRange","found","isBackward","numOfRangesA","getRanges","rangeA","getTrimmed","rangeB","getContainedElement","_setRanges","_setFakeOptions","DocumentSelection","fake","backward","_createIn","_createOn","newFocus","_addRange","newRanges","isLastBackward","_pushRange","storedRange","addedRange","intersectingRange","_selection","getFirstPosition","getLastPosition","getSelectedElement","isSimilar","setFocus","Document","roots","_postFixers","postFixer","writer","wasFixed","AttributeElement","_priority","_clonesGroup","nonUiChildrenCount","DEFAULT_PRIORITY","EmptyElement","env","isMac","isGecko","isSafari","isAndroid","isBlink","features","isRegExpUnicodePropertySupported","isSupported","macGlyphsToModifiers","modifiersToMacGlyphs","keyCodes","arrowleft","arrowup","arrowright","arrowdown","backspace","enter","space","esc","tab","ctrl","cmd","alt","code","generateKnownKeyCodes","getCode","keyCode","altKey","ctrlKey","shiftKey","parseKeystroke","keystroke","splitKeystrokeText","getEnvKeystrokeText","UIElement","domDocument","toDomElement","domElement","injectUiElementHandling","domConverter","domSelection","domTarget","ownerDocument","defaultView","getSelection","domSelectionCollapsed","getRangeAt","collapsed","domParent","focusNode","domOffset","focusOffset","viewPosition","domPositionToView","jumpedOverAnyUiElement","nextViewPosition","newDomPosition","viewPositionToDom","collapse","jumpOverUiElement","RawElement","DocumentFragment","DowncastWriter","_cloneGroups","_setTo","_setFocus","attributeElement","_document","renderFunction","uiElement","rawElement","_setAttribute","_removeAttribute","_addClass","_removeClass","_setStyle","_removeStyle","_removeCustomProperty","positionOrRange","_breakAttributes","_breakAttributesRange","newElement","insert","sourceRange","move","positionOffset","_removeFromClonedElementsGroup","mergeAttributes","mergeTextNodes","_appendChild","newPosition","validateNodesToInsert","getParentContainer","_addToClonedElementsGroup","rangeOrItem","validateRangeContainer","breakStart","breakEnd","parentContainer","mergePosition","walker","getWalker","rangeToRemove","parentElement","ancestor","countBefore","some","_wrapPosition","viewSelection","setSelection","_wrapRange","newRange","_unwrapChildren","newName","viewElement","groupName","wrapElement","wrapPositions","isText","isAttribute","isUI","isRaw","_wrapAttributeElement","shouldABeOutsideB","newAttribute","_wrapChildren","offsetChange","unwrapElement","unwrapPositions","unwrapped","_unwrapAttributeElement","movePositionToTextNode","breakTextNode","fakePosition","createAttributeElement","POSITIVE_INFINITY","wrapRange","wrap","wrapper","toWrap","canBeJoined","setStyle","addClass","toUnwrap","removeAttribute","removeClass","removeStyle","forceSplitText","rangeStart","rangeEnd","isContainerOrFragment","offsetAfter","clonedNode","nodesToMove","getIdentity","textToMove","t1","t2","nodeBeforeLength","errorContext","validNodesToInsert","validNode","startContainer","endContainer","NBSP_FILLER","createTextNode","BR_FILLER","fillerBr","dataset","ckeFiller","INLINE_FILLER","inlineFiller","startsWithFiller","domNode","isInlineFiller","domText","getDataWithoutFiller","jumpOverInlineFiller","fastDiff","atomicChanges","changeIndexes","findChangeBoundaryIndexes","changeIndexesToAtomicChanges","changeIndexesToChanges","arr1","firstIndex","findFirstDifferenceIndex","lastIndexOld","lastIndexNew","cutAndReverse","reverse","newArray","newLength","diff","_insert","_delete","aLength","bLength","es","fp","snake","y1","y2","insertAt","nodeToInsert","isNode","domDocuments","markedAttributes","markedChildren","markedTexts","_inlineFiller","_fakeSelectionContainer","mapViewToDom","inlineFillerPosition","_updateChildrenMappings","_isSelectionInInlineFiller","_removeInlineFiller","_getInlineFillerPosition","_needsInlineFillerAtSelection","_updateAttrs","_updateChildren","_updateText","fillerDomPosition","addInlineFiller","_updateSelection","_updateFocus","actualDomChildren","expectedDomChildren","viewChildrenToDom","withChildren","_diffNodeLists","actions","_findReplaceActions","equal","insertIndex","deleteIndex","viewChild","_updateElementMappings","unbindDomElement","bindElements","firstPos","ViewPosition","selectionPosition","domFillerNode","selectionParent","selectionOffset","isEditable","ViewText","viewText","findCorrespondingDomText","newDomText","viewToDom","actualText","expectedText","filler","insertData","deleteData","domAttrKeys","viewAttrKeys","nodesToUnbind","_markDescendantTextToSync","domToView","domChildList","fakeSelectionContainer","childList","filterOutFakeSelectionContainer","sameNodes","actualDom","expectedDom","newActions","actualSlice","expectedSlice","areSimilar","viewNode","_removeDomSelection","_removeFakeSelection","domRoot","_updateFakeSelection","_updateDomSelection","createFakeSelectionContainer","bindFakeSelection","_fakeSelectionNeedsUpdate","domRange","createRange","removeAllRanges","selectNodeContents","addRange","_domSelectionNeedsUpdate","ELEMENT_NODE","childAtOffset","fixGeckoSelectionAfterBr","isDomSelectionCorrect","oldViewSelection","domSelectionToView","anchorNode","contains","activeDomElement","activeElement","mapDomToView","domParentOrArray","nodeAfterFiller","fillerNode","node1","node2","COMMENT_NODE","actualDomChild","expectedDomChild","isBlockFiller","DOCUMENT_NODE","BR_FILLER_REF","DomConverter","blockFillerMode","preElements","blockElements","_blockFiller","_domToViewMapping","_viewToDomMapping","_fakeSelectionMapping","_rawContentElementMatcher","_encounteredRawContentDomNodes","WeakSet","viewDocumentSelection","ViewSelection","domFragment","viewFragment","textData","_processDataFromViewText","createDocumentFragment","bindDocumentFragments","createElementNS","fillerPositionOffset","childView","viewRange","domStart","domEnd","setStart","setEnd","domBefore","domAfter","viewParent","hostElement","getHostViewElement","_processDataFromDomText","isComment","isDocumentFragment","ViewDocumentFragment","viewName","keepOriginalCase","ViewElement","innerHTML","domChildrenToView","domChild","fakeSelectionToView","isDomSelectionBackward","viewRanges","domRangeToView","viewStart","viewEnd","ViewRange","findCorrespondingViewText","viewBefore","domElementOrDocumentFragment","firstChild","documentFragmentOrElement","viewEditable","domEditable","scrollX","scrollY","scrollPositions","forEachDomNodeAncestor","scrollLeft","scrollTop","scrollTo","DOCUMENT_FRAGMENT_NODE","isEqualNode","hasBlockParent","isNbspBlockFiller","anchorOffset","_isDomSelectionPositionCorrect","prevNode","_getTouchingViewTextNode","_nodeEndsWithSpace","_hasDomParentOfType","_getTouchingInlineDomNode","shouldLeftTrim","_checkShouldLeftTrimDomText","shouldRightTrim","_checkShouldRightTrimDomText","getNext","ViewTreeWalker","topmostParent","createTreeWalker","NodeFilter","SHOW_TEXT","SHOW_ELEMENT","acceptNode","FILTER_ACCEPT","FILTER_SKIP","currentNode","touchingNode","lca","nodeA","nodeB","boundaryParent","parents","isWindow","stringifiedObject","DomEmitterMixin","proxy","_getProxyEmitter","ProxyEmitter","getNodeUID","_domNode","_domListeners","listenerOptions","useCapture","passive","usePassive","domListener","_createDomListener","removeListener","domEvt","Observer","isEnabled","disable","setCacheAdd","setCacheHas","SetCache","arraySome","cacheHas","equalArrays","equalFunc","isPartial","arrLength","othLength","arrStacked","othStacked","seen","arrValue","othValue","compared","othIndex","mapToArray","setToArray","equalByTag","convert","equalObjects","objProps","objLength","objStacked","skipCtor","objCtor","othCtor","arrayTag","baseIsEqualDeep","objIsArr","othIsArr","objTag","othTag","objIsObj","othIsObj","isSameTag","objIsWrapped","othIsWrapped","objUnwrapped","othUnwrapped","baseIsEqual","isEqualWith","MutationObserver","characterData","characterDataOldValue","subtree","_renderer","_domElements","_mutationObserver","_onMutations","takeRecords","observe","disconnect","domMutations","mutatedTexts","mutatedElements","mutation","_isBogusBrMutation","oldText","newText","viewMutations","mutatedText","markToSync","viewChildren","newViewChildren","oldChildren","newChildren","viewSelectionAnchor","viewSelectionFocus","child1","child2","addedNode","removedNodes","addedNodes","DomEventData","domEvent","additionalData","preventDefault","stopPropagation","DomEventObserver","domEventType","checkShouldIgnoreEventFromTarget","onDomEvent","eventType","KeyObserver","metaKey","reWhitespace","trimmedEndIndex","reTrimStart","baseTrim","toNumber","debounce","remainingWait","FakeSelectionObserver","_fireSelectionChangeDoneDebounced","_handleSelectionMove","newSelection","oldSelection","SelectionObserver","mutationObserver","getObserver","_documents","_clearInfiniteLoopInterval","setInterval","_clearInfiniteLoop","_loopbackCounter","_handleSelectionChange","clearInterval","newViewSelection","hasDomSelection","FocusObserver","_renderTimeoutId","selectedEditable","CompositionObserver","isComposing","InputObserver","isRange","getBorderWidths","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","rectProperties","Rect","isSourceRange","_source","rangeRects","getDomRangeRects","copyRectProperties","getBoundingRect","getBoundingClientRect","innerWidth","innerHeight","anotherRect","rect","getArea","visibleRect","isBody","commonAncestorContainer","parentRect","intersectionRect","intersectRect","scrollBarWidth","scrollBarHeight","clientWidth","clientHeight","borderWidths","offsetWidth","offsetHeight","rects","clientRects","getClientRects","boundingRectData","NEGATIVE_INFINITY","rectangleCount","elementOrRange","body","scrollViewportToShowTarget","viewportOffset","targetWindow","getWindow","currentWindow","currentFrame","scrollAncestorsToShowRect","getParentElement","getRectRelativeToWindow","targetRect","scrollWindowToShowRect","frameElement","targetShiftedDownRect","moveBy","targetShiftedUpRect","viewportRect","excludeScrollbarsAndBorders","isAbove","isBelow","isLeftOf","isRightOf","getRect","parentWindow","firstRect","secondRect","relativeWindow","frame","frameRect","scrollAncestorsToShowTarget","View","domRoots","_initialDomRootAttributes","_observers","_ongoingChange","_postFixersInProgress","_renderingDisabled","_hasChangedSinceTheLastRendering","_writer","addObserver","_render","viewRoot","_name","initialDomRootAttributes","updateContenteditableAttribute","change","enable","viewRangeToDom","isRenderingInProgress","callbackResult","_callPostFixers","flag","disableObservers","enableObservers","Mapper","_modelToViewMapping","_viewToModelMapping","_viewToModelLengthCallbacks","_markerNameToElements","_elementToMarkerNames","_unboundMarkerNames","viewContainer","modelPosition","findPositionIn","viewBlock","findMappedViewAncestor","modelParent","modelOffset","_toModelOffset","ModelPosition","modelElement","toModelElement","markerName","toViewElement","elements","nameToElements","elementToNames","markerNames","ModelRange","toModelPosition","modelRange","toViewPosition","mapper","isPhantom","boundElements","getElementsWithSameId","viewElementName","lengthCallback","viewOffset","getModelLength","expectedOffset","lastLength","_moveViewPositionToTextNode","ModelConsumable","_consumable","_textProxyRegistry","_normalizeConsumableType","_getSymbolForTextProxy","itemConsumables","startMap","endMap","_addSymbolForTextProxy","DowncastDispatcher","conversionApi","dispatcher","_reconversionEventsMapping","differ","markers","getMarkersToRemove","convertMarkerRemove","changes","_mapChangesWithAutomaticReconversion","convertInsert","convertRemove","reconvertElement","convertAttribute","attributeKey","attributeOldValue","attributeNewValue","flushUnboundMarkerNames","markerRange","getRange","convertMarkerAdd","getMarkersToAdd","consumable","_createInsertConsumable","walkerValueToEventData","_convertInsertWithAttributes","_clearConversionApi","_createConsumableForRange","_testAndFire","elementRange","currentView","convertedViewElement","elementOrTextProxyToView","createRangeOn","unbindViewElement","markersAtSelection","getMarkersAtPosition","_createSelectionConsumable","shouldMarkerChangeBeConverted","Consumable","getItems","modelName","getEventName","itemsToReconvert","updated","getChanges","_isReconvertTriggerEvent","elementName","containsItem","anyNewRange","_removeAllRanges","directChange","_popRange","attributeKeys","visited","startBlock","getParentBlock","isTopBlockInRange","isUnvisitedTopBlock","endBlock","limitStartPosition","limitEndPosition","_checkRange","isUnvisitedBlock","schema","isBlock","hasParentLimit","isLimit","parentBlock","findAncestorBlock","storePrefix","LiveSelection","hasOwnRange","isGravityOverridden","getSelectedBlocks","containsEntireContent","_updateMarkers","_updateAttributes","prefixOrName","observeMarkers","_getStoredAttributes","overrideGravity","restoreGravity","startsWith","_model","_attributePriority","_selectionRestorePosition","_hasChangedRange","_overriddenGravityRegister","_observedMarkers","_fixGraveyardSelection","_validateSelectionRange","_updateMarker","changeParent","enqueueChange","storedAttributes","clearAttributesStoredInElement","_getDefaultRange","optionsOrPlaceOrOffset","overrideUid","liveRange","_prepareRange","fromRange","changed","markerGroup","selectionRange","oldMarkers","hasMarker","contained","clearAll","newAttributes","_getSurroundingAttributes","oldAttributes","_setAttributesTo","newKey","oldKey","realKey","getAttrsIfCharacter","isInline","getNearestSelectionRange","ConversionHelpers","dispatchers","_dispatchers","conversionHelper","cloneDeep","DowncastHelpers","normalizeToElementConfig","elementCreator","consume","converterPriority","triggerBy","_mapReconversionTriggerEvent","childName","downcastElementToElement","modelValue","getFromAttributeCreator","oldViewElement","newViewElement","viewWriter","ModelSelection","toViewRange","unwrap","downcastAttributeToElement","normalizeToAttributeConfig","attributeCreator","oldAttribute","downcastAttributeToAttribute","isOpening","viewStartElement","viewEndElement","bindElementToMarker","markerNameToElements","unbindElementFromMarkerName","clearClonedElementsGroup","downcastMarkerToElement","highlightDescriptor","prepareDescriptor","createViewElementFromHighlightDescriptor","rangeAfterWrap","ModelElement","highlightElement","viewHighlightElement","removeHighlight","downcastMarkerToHighlight","viewCreator","viewMarkerData","handleMarkerBoundary","viewData","removeMarkerFromAttribute","removeMarkerData","downcastMarkerToData","isStart","checkChild","createUIElement","insertMarkerAsElement","insertMarkerAsAttribute","viewElementType","modelData","viewElementDefinition","createContainerElement","ViewAttributeElement","createViewElementFromDefinition","modelAttributeValue","autoParagraphEmptyRoots","insertElement","isParagraphable","nodeOrType","wrapInParagraph","paragraph","createPositionAt","UpcastHelpers","upcastElementToElement","normalizeModelAttributeConfig","converter","prepareToAttributeConverter","getViewElementNameFromConfig","upcastElementToAttribute","viewKey","normalized","keyName","normalizeViewAttributeKeyValueConfig","upcastAttributeToAttribute","oldModel","normalizeElementToMarkerConfig","upcastElementToMarker","converterStart","prepareToElementConverter","normalizeDataToMarkerConfig","converterEnd","basePriority","maxPriority","priorityFactor","attrName","addMarkerElements","markerViewNames","markerViewName","modelCursor","convertChildren","viewItem","upcastAttributeToMarker","upcastDataToMarker","viewConfig","matcherResult","getModelElement","safeInsert","updateConversionResult","viewAttributeKeyToCopy","defaultModelValue","modelKey","configToTest","onlyViewNameIsDefined","modelAttribute","checkAttribute","setAttributeOn","configForElements","EditingController","downcastDispatcher","_disableRendering","convertChanges","convertSelection","toModelRange","modelSelection","createSelection","convertSelectionChange","createText","modelEnd","createRangeIn","isAttached","brokenPosition","breakAttributes","CommandCollection","_commands","commandName","command","execute","commands","ViewConsumable","consumables","elementConsumables","ViewElementConsumables","revert","consumablesFromElement","createFrom","_canConsumeName","_test","_consume","_revert","getRelatedStyles","consumableName","toConsume","combineWalkers","convertToMinimalFlatRanges","Schema","_sourceDefinitions","_attributeProperties","SchemaContext","getDefinition","itemName","definition","_clearCache","_compiledDefinitions","_compile","getDefinitions","def","isSelectable","isContent","_checkContextMatch","allowAttributes","positionOrBaseElement","elementToMerge","checkMerge","childDef","retValue","getAttributeProperties","selectionOrRangeOrPosition","rangeCommonAncestor","firstPosition","_getValidRangesForRange","backwardWalker","forwardWalker","limitElement","removeDisallowedAttributeFromNode","positionsInRange","getPositions","compiledDefinitions","sourceRules","itemNames","compileBaseItemRule","compileAllowContentOf","compileAllowWhere","compileAllowAttributesOf","compileInheritPropertiesFrom","cleanUpAllowIn","cleanUpAllowAttributes","contextItemIndex","contextItem","allowIn","parentRule","mapContextItem","getNames","endsWith","sourceItemRules","itemRule","allowContentOf","allowWhere","allowAttributesOf","inheritTypesFrom","sourceItemRule","typeNames","copyTypes","copyProperty","inheritFrom","inheritAllFrom","makeInheritAllWork","allowContentOfItemName","getAllowedChildren","allowedItem","allowedIn","inheritAttributes","existingItems","itemToCheck","ctxItem","forward","getMinimalFlatRanges","UpcastDispatcher","_splitParts","_cursorParents","_modelCursor","convertItem","_convertItem","_convertChildren","_safeInsert","_updateConversionResult","splitToAllowedParent","_splitToAllowedParent","getSplitParts","_getSplitParts","createContextTree","documentFragment","_removeEmptyElements","append","extractMarkersFromModelFragment","elementOrModelCursor","nextModelCursor","splitResult","createPositionBefore","createPositionAfter","savedCursorParent","allowedParent","findAllowedParent","treeWalkerValue","originalPart","splitPart","_registerSplitPair","cursorParent","anyRemoved","modelItem","markerElements","markerElement","currentPosition","contextDefinition","BasicHtmlWriter","fragment","implementation","createHTMLDocument","HtmlDataProcessor","_domParser","DOMParser","_domConverter","_htmlWriter","getHtml","_toDom","registerRawContentMatcher","parseFromString","DataController","upcastDispatcher","ViewDocument","htmlProcessor","processor","_viewWriter","ViewDowncastWriter","_checkIfRootsExists","hasContent","ignoreWhitespaces","modelElementOrFragment","viewDocumentFragment","toView","toData","clearBindings","intersection","_getMarkersRelativeToElement","modelRoot","newData","removeSelectionAttribute","toModel","viewElementOrFragment","rootNames","_getAllUpcastDefinitions","_getUpcastDefinition","Conversion","downcastDispatchers","upcastDispatchers","_helpers","_downcast","_createConversionHelpers","isDowncast","_upcast","alias","elementToElement","attributeToElement","elementToAttribute","attributeToAttribute","helpers","upcastAlso","upcastAlsoItem","Batch","op","baseVersion","Operation","__className","_normalizeNodes","_splitNodeAtPosition","_mergeNodesAtIndex","_move","_haveSameAttributes","mergedNode","offsetDiff","firstPart","secondPart","iteratorA","iteratorB","AttributeOperation","DetachOperation","MoveOperation","newTargetPosition","getMovedRangeStart","sourceElement","targetElement","sourceOffset","targetOffset","InsertOperation","shouldReceiveAttributes","gyPosition","originalNodes","MarkerOperation","affectsData","_markers","RenameOperation","oldName","RootAttributeOperation","MergeOperation","SplitOperation","mergedElement","getInsertionPosition","splitElement","RootElement","Writer","_assertWriterUsedCorrectly","isSameTree","addOperation","applyOperation","rangeRootPosition","usingOperation","updateMarker","addMarker","itemOrRange","setAttributeOnRange","setAttributeOnItem","removeAttributesFromItem","_addOperationForAffectedMarkers","flat","applyRemoveOperation","_merge","_mergeDetached","createPositionFromPath","renameOperation","firstSplitElement","firstCopyElement","elementOrString","shiftedRange","applyMarkerOperation","_set","markerOrName","currentMarker","hasUsingOperationDefined","affectsDataDefined","currentRange","updatedRange","managedUsingOperations","_refresh","keyOrObjectOrIterable","_setSelectionAttribute","keyOrIterableOfKeys","_removeSelectionAttribute","_overrideGravity","_restoreGravity","storeKey","_getStoreAttributeKey","_currentWriter","isAffected","elementBefore","elementAfter","affectedInLeftElement","affectedInRightElement","affectedAfterLeftElement","affectedBeforeRightElement","valueBefore","valueAfter","lastSplitPosition","previousValue","rootA","rootB","Differ","markerCollection","_markerCollection","_changesInElement","_elementSnapshots","_changedMarkers","_changeCount","_cachedChanges","_cachedChangesWithGraveyard","_isInInsertedElement","_markRemove","_markInsert","getMarkersIntersectingRange","bufferMarkerChange","_markAttribute","sourceParentInserted","targetParentInserted","graveyardParent","mergedIntoElement","buffered","includeChangesInGraveyard","diffSet","snapshotChildren","elementChildren","_getChildrenSnapshot","_generateActionsFromChanges","_getInsertDiff","_getRemoveDiff","elementAttributes","snapshotAttributes","_getAttributesDiff","changeCount","prevDiff","thisDiff","isConsecutiveTextRemove","isConsecutiveTextAdd","isConsecutiveAttributeChange","_changesInGraveyardFilter","changeItem","_markChange","_removeAllNestedChanges","_makeSnapshot","_getChangesForElement","_handleChange","inc","nodesToHandle","old","incEnd","oldEnd","intersectionLength","howManyAfter","attributePart","diffs","snapshot","oldChildrenLength","oldChildrenHandled","posInGy","rangeInGy","History","_operations","_undoPairs","_undoneOperations","undoneOperation","undoingOperation","isInsideSurrogatePair","character","isLowSurrogateHalf","isInsideCombinedSymbol","graveyardName","_hasSelectionChangedFromTheLastChangeBlock","createRoot","bufferOperation","_hasDocumentChangedFromTheLastChangeBlock","refresh","hasDataChanges","defaultRoot","_getDefaultRoot","validateTextNodePosition","rangeBoundary","MarkerCollection","Marker","oldMarker","_attachLiveRange","_managedUsingOperations","_affectsData","_destroyMarker","_detachLiveRange","_liveRange","NoOperation","OperationFactory","LivePosition","oldPosition","toPosition","Insertion","canMergeWith","_documentFragment","_documentFragmentPosition","_firstNode","_lastNode","_filterAttributesOf","_affectedStart","_affectedEnd","_handleNode","_insertPartialFragment","_mergeOnRight","removeDisallowedAttributes","nodeToSelect","_handleObject","_checkAndSplitToAllowedPosition","_appendToFragment","_handleDisallowedNode","livePosition","fromPosition","_setAffectedBoundaries","_mergeOnLeft","_tryAutoparagraphing","handleNodes","_canMergeLeft","mergePosLeft","_canMergeRight","mergePosRight","_getAllowedIn","tempPos","getLivePositionsForSelectedBlocks","ignoreMarkers","modifySelection","mergeBranches","checkShouldMerge","positionA","positionB","getAncestorsJustBelowCommonAncestor","startAncestor","endAncestor","mergeBranchesRight","mergeBranchesLeft","commonAncestor","parentToRemove","rename","clearAttributes","setAttributes","fromEntries","mergeRight","leftPos","rightPos","rangeToCheck","isCrossingLimitElement","shouldAutoparagraph","isTextAllowed","isParagraphAllowed","insertParagraph","collapseSelectionAt","replaceEntireContentWithParagraph","getLimitElement","shouldEntireContentBeReplacedWithParagraph","wordBoundaryCharacters","tryExtendingTo","isForward","isAtWordBoundary","isAtNodeBoundary","boundaryChar","getCorrectWordBreakPosition","getCorrectPosition","getSearchRange","searchEnd","offsetToCheck","removeRangeContent","parentsToCheck","itemRange","parentToCheck","removeRange","injectSelectionPostFixer","registerPostFixer","correctedRange","tryFixingRange","nonIntersectingRanges","previousRange","merged","mergeIntersectingRanges","selectionPostFixer","originalPosition","nearestSelectionRange","fixedPosition","tryFixingCollapsedRange","isTextAllowedOnStart","isTextAllowedOnEnd","startLimitElement","endLimitElement","startIsOnBlock","endIsOnBlock","checkSelectionOnNonLimitElements","fixedStart","fixedEnd","isStartInLimit","isEndInLimit","bothInSameParent","expandStart","expandEnd","findOutermostLimitAncestor","tryFixingNonCollapsedRage","startingNode","isLimitNode","Model","_pendingChanges","_validate","addChildCheck","childDefinition","_runPendingChanges","batchOrType","_execute","content","deleteContent","doNotAutoparagraph","nodesToInsert","insertion","getSelectionRange","affectedRange","getAffectedRange","insertContent","selRange","doNotResetEntireContent","leaveUnmerged","setSelectionFocus","frag","flatSubtreeRange","commonPath","commonParent","getNodeByPath","appendText","cloneElement","leftExcessRange","getSelectedContent","rangeOrElement","intersectingMarker","ret","currentBatch","callbackReturnValue","_handleChangeBlock","KeystrokeHandler","_listener","keyEvtData","EditingKeystrokeHandler","evtData","_addEditor","_getEditorConfig","conversion","addAlias","keystrokes","extraPlugins","readyPromise","_removeEditor","DataApiMixin","ElementApiMixin","updateSourceElement","HTMLTextAreaElement","ComponentFactory","_components","originalName","FocusTracker","_elements","_nextEventLoopTimeout","_focus","_blur","focusedElement","EditorUI","componentFactory","focusTracker","_editableElementsMap","ckeditorInstance","editorUI","normalizeToolbarConfig","removeItems","documentPlaceholders","hidePlaceholder","updateDocumentPlaceholders","placeholders","wasViewModified","updatePlaceholder","isDirectHost","getChildPlaceholderHostSubstitute","isEmptyish","selectionAnchor","needsPlaceholder","showPlaceholder","ElementReplacer","_replacedElements","display","ClassicEditorUI","_toolbarConfig","_elementReplacer","replacementElement","editingView","editingRoot","setEditableElement","attachDomRoot","_initPlaceholder","_initToolbar","restore","detachDomRoot","stickyPanel","limiterElement","viewportTopOffset","fillFromConfig","origin","originKeystrokeHandler","originFocusTracker","beforeFocus","afterBlur","enableToolbarKeyboardFocus","placeholderText","enablePlaceholder","ViewCollection","initialItems","_renderViewIntoCollectionParent","_parentElement","elementOrDocFragment","dest","evtName","isRendered","Template","_isRendered","_revertData","_renderNode","intoFragment","isApplying","revertData","_revertTemplateFromNode","isView","isTemplate","_renderText","_renderElement","_renderAttributes","_renderElementChildren","_setUpListeners","hasTemplateBinding","_bindToObservable","updater","getTextUpdater","attrValue","domAttrValue","attrNs","valueToBind","shouldExtend","getAttributeUpdater","_renderStyleAttribute","isFalsy","arrayValueReducer","setAttributeNS","styleName","styleValue","getStyleUpdater","childIndex","isViewCollection","setParent","childRevertData","eventListeners","revertBindings","schemaItem","domEvtName","domSelector","activateDomEventListener","syncValueSchemaValue","templateBinding","activateAttributeListener","revertBinding","eventNameOrFunctionOrAttribute","TemplateToBinding","eventNameOrFunction","if","valueIfTrue","TemplateIfBinding","template","extendTemplate","TemplateBinding","getValueSchemaValue","removeAttributeNS","normalizePlainTextDefinition","normalizeTextDefinition","arrayify","normalizeListeners","normalizeAttributes","cur","extendObjectValueArray","ext","_viewCollections","_unboundChildren","createCollection","collection","_bindTemplate","views","registerChild","getViews","isString","BodyCollection","_bodyCollectionContainer","class","namespace","xmlns","childElementCount","EditorUIView","attachToDom","detachFromDom","LabelView","bindTemplate","setTemplate","BoxedEditorUIView","_voiceLabelView","_createVoiceLabel","role","lang","voiceLabel","InlineEditableUIView","_editingView","_editableElement","_hasExternalElement","_updateIsFocusedClasses","updateAfterRender","toPx","StickyPanelView","_contentPanelPlaceholder","isSticky","_panelRect","_contentPanel","_hasViewportTopOffset","_isStickyToTheLimiter","limiterBottomOffset","marginLeft","_checkIfShouldBeSticky","limiterRect","panelRect","_limiterRect","_marginLeft","FocusCycler","keystrokeHandler","focusables","isFocusable","_getFocusableItem","viewIndex","focused","previous","collectionLength","ToolbarSeparatorView","ToolbarLineBreakView","ResizeObserver","_observerInstance","_createObserver","_element","_callback","_addElementCallback","_deleteElementCallback","_elementCallbacks","_getElementCallbacks","unobserve","ObserverConstructor","ResizeObserverPolyfill","_previousRects","_periodicCheckTimeout","_checkElementRectsAndExecuteCallback","_startPeriodicCheck","_stopPeriodicCheck","periodicCheck","_hasRectChanged","contentRect","currentRect","previousRect","DropdownPanelView","selectstart","focusLast","getPositionNameAndRect","elementRect","positionData","moveTo","getBestOfProcessedPositions","processedPositions","elementRectArea","bestPositionRect","bestPositionName","maxFitFactor","positionName","positionRect","limiterIntersectArea","viewportIntersectArea","fitFactor","getAbsoluteRectCoordinates","DropdownView","buttonView","panelView","isOpen","panelPosition","_getOptimalPosition","fitInViewport","positions","_panelPositions","closeDropdown","defaultPanelPositions","south","north","southEast","southWest","northEast","northWest","southMiddleEast","southMiddleWest","northMiddleEast","northMiddleWest","buttonRect","limiter","positionedElementAncestor","offsetParent","getPositionedAncestor","limiterViewportIntersectRect","getIntersectionArea","processedPosition","processPositionsToAreas","bestPositionData","getBestPositionNameAndRect","getVisible","absoluteRectCoordinates","ancestorPosition","ancestorBorderWidths","shiftRectCoordinatesDueToPositionedAncestor","IconView","viewBox","_updateXMLContent","_colorFillPaths","fillColor","querySelectorAll","TooltipView","ButtonView","ariaLabelUid","tooltipView","_createTooltipView","labelView","_createLabelView","iconView","keystrokeView","_createKeystrokeView","_getTooltipString","tabindex","isToggleable","mousedown","click","withKeystroke","DropdownButtonView","arrowView","_createArrowView","dropdownArrowIcon","SwitchButtonView","toggleSwitchView","_createToggleView","addDefaultBehavior","dropdownView","activator","contextElements","composedPath","contextElement","clickOutsideHandler","closeDropdownOnBlur","closeDropdownOnExecute","focusDropdownContentsOnArrows","ToolbarView","itemsView","ItemsView","_focusCycler","focusPrevious","focusNext","shouldGroupWhenFull","isFloating","maxWidth","_behavior","DynamicGrouping","StaticLayout","focusFirst","itemsOrConfig","itemsToClean","idx","itemsToAdd","_cleanSeparators","nonSeparatorPredicate","firstCommandItem","findIndex","lastCommandItem","viewFocusables","viewItemsView","viewFocusTracker","viewLocale","ungroupedItems","groupedItems","groupedItemsDropdown","_createGroupedItemsDropdown","resizeObserver","cachedPadding","shouldUpdateGroupingOnNextResize","_updateFocusCycleableItems","changeData","removedItem","currentIndex","addedItem","_updateGrouping","_enableGroupingOnResize","_enableGroupingOnMaxWidthChange","wereItemsGrouped","initialGroupedItemsCount","_areItemsOverflowing","_groupLastItem","_ungroupFirstItem","lastChildRect","toolbarRect","computedStyle","paddingProperty","previousWidth","dropdown","createDropdown","buttons","toolbarView","addToolbarToDropdown","tooltipPosition","verticalDotsIcon","ClassicEditorUIView","shouldToolbarGroupWhenFull","ClassicEditor","form","originalSubmit","onSubmit","submit","attachToForm","getInitialData","blockAutoformatEditing","callbackOrCommand","iteratorItem","blockToFormat","firstNode","firstNodeRange","blockRange","inlineAutoformatEditing","testRegexpOrCallback","formatCallback","testCallback","format","leftDel","rightDel","delStart","delEnd","rangeText","getTextAfterCode","testOutput","rangesToFormat","testOutputToRanges","rangesToRemove","arrays","_disableStack","forceDisable","Autoformat","_addListAutoformats","_addBasicStylesAutoformats","_addHeadingAutoformats","_addBlockQuoteAutoformats","_addCodeBlockAutoformats","_addHorizontalLineAutoformats","boldCallback","getCallbackFunctionForInlineAutoformat","italicCallback","codeCallback","strikethroughCallback","modelElements","level","validRanges","getValidRanges","formatMuiErrorMessage","runtime","Op","hasOwn","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","innerFn","outerFn","tryLocsList","protoGenerator","Generator","_invoke","GenStateSuspendedStart","GenStateExecuting","GenStateCompleted","doneResult","delegateResult","maybeInvokeDelegate","ContinueSentinel","_sent","dispatchException","abrupt","record","tryCatch","GenStateSuspendedYield","makeInvokeMethod","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","NativeIteratorPrototype","Gp","defineIteratorMethods","AsyncIterator","PromiseImpl","invoke","__await","previousPromise","callInvokeWithMethodAndArg","resultName","nextLoc","pushTryEntry","locs","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","iteratorMethod","isGeneratorFunction","genFun","ctor","mark","awrap","async","skipTempReset","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","Fragment","StrictMode","Profiler","Suspense","isMounted","enqueueForceUpdate","enqueueReplaceState","enqueueSetState","isReactComponent","forceUpdate","isPureReactComponent","__self","__source","$$typeof","_owner","_status","_result","ReactCurrentDispatcher","ReactCurrentBatchConfig","ReactCurrentOwner","IsSomeRendererActing","Children","PureComponent","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","_calculateChangedBits","_currentValue","_currentValue2","_threadCount","createFactory","isValidElement","lazy","_payload","_init","useCallback","useImperativeHandle","useState","aa","ba","ca","da","ea","fa","ha","ia","ja","ka","acceptsBooleans","attributeNamespace","mustUseProperty","sanitizeURL","removeEmptyString","oa","pa","qa","ma","na","la","xlinkHref","ra","sa","ta","wa","xa","ya","za","Aa","Ba","Ca","Da","Ea","Fa","Ga","Ha","Ia","Ja","Ma","Ka","La","Na","Oa","Pa","prepareStackTrace","Qa","Ra","Sa","Ta","Va","_valueTracker","setValue","stopTracking","Ua","Wa","checked","Xa","Ya","defaultChecked","_wrapperState","initialChecked","Za","initialValue","controlled","$a","ab","bb","eb","db","fb","defaultSelected","gb","dangerouslySetInnerHTML","hb","ib","jb","kb","lb","mb","nb","ob","namespaceURI","MSApp","execUnsafeLocalFunction","pb","qb","animationIterationCount","borderImageOutset","borderImageSlice","borderImageWidth","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","columns","flexGrow","flexPositive","flexShrink","flexNegative","flexOrder","gridArea","gridRow","gridRowEnd","gridRowSpan","gridRowStart","gridColumn","gridColumnEnd","gridColumnSpan","gridColumnStart","lineClamp","opacity","orphans","tabSize","widows","zoom","fillOpacity","floodOpacity","stopOpacity","strokeDasharray","strokeDashoffset","strokeMiterlimit","strokeOpacity","strokeWidth","rb","sb","tb","ub","menuitem","area","br","col","embed","hr","img","keygen","param","track","wbr","vb","wb","xb","srcElement","correspondingUseElement","yb","zb","Ab","Bb","Cb","stateNode","Db","Eb","Fb","Gb","Hb","Ib","Jb","Kb","Lb","Mb","Ob","Pb","Qb","Rb","Sb","Tb","Ub","Vb","Wb","Xb","Zb","alternate","$b","memoizedState","dehydrated","ac","cc","sibling","bc","dc","ec","fc","gc","hc","ic","jc","kc","lc","mc","nc","oc","pc","qc","rc","blockedOn","domEventName","eventSystemFlags","nativeEvent","targetContainers","sc","pointerId","tc","vc","wc","lanePriority","unstable_runWithPriority","hydrate","containerInfo","xc","yc","zc","Ac","Bc","unstable_scheduleCallback","unstable_NormalPriority","Cc","Dc","Ec","animationend","animationiteration","animationstart","transitionend","Fc","Gc","Hc","animation","Ic","Jc","Kc","Lc","Mc","Nc","Oc","Pc","Qc","unstable_now","Rc","Uc","pendingLanes","expiredLanes","suspendedLanes","pingedLanes","Vc","entangledLanes","entanglements","Wc","Xc","Yc","Zc","$c","eventTimes","clz32","bd","cd","log","LN2","dd","unstable_UserBlockingPriority","ed","fd","gd","hd","uc","jd","kd","ld","nd","od","charCode","pd","qd","rd","_reactName","_targetInst","currentTarget","isDefaultPrevented","defaultPrevented","returnValue","isPropagationStopped","cancelBubble","persist","isPersistent","wd","xd","yd","sd","eventPhase","bubbles","cancelable","timeStamp","isTrusted","td","ud","detail","vd","Ad","screenX","screenY","clientX","clientY","pageX","pageY","getModifierState","zd","relatedTarget","fromElement","toElement","movementX","movementY","Bd","Dd","dataTransfer","Fd","Hd","animationName","elapsedTime","pseudoElement","Jd","clipboardData","Ld","Md","Esc","Spacebar","Left","Up","Right","Down","Del","Win","Menu","Apps","Scroll","MozPrintableKey","Nd","8","9","12","13","16","17","18","19","20","27","32","33","34","35","36","37","38","39","40","45","46","112","113","114","115","116","117","118","119","120","121","122","123","144","145","224","Od","Alt","Control","Meta","Shift","Pd","Rd","which","Td","pressure","tangentialPressure","tiltX","tiltY","twist","pointerType","isPrimary","Vd","touches","targetTouches","changedTouches","Xd","Zd","deltaX","wheelDeltaX","deltaY","wheelDeltaY","wheelDelta","deltaZ","deltaMode","$d","ae","be","documentMode","ce","de","fe","ge","he","ie","le","datetime","email","month","password","tel","week","me","ne","oe","pe","qe","se","te","ue","ve","we","xe","ye","ze","oninput","Ae","detachEvent","Be","Ce","attachEvent","De","Ee","Fe","He","Ie","Je","Ke","Le","Me","compareDocumentPosition","Ne","HTMLIFrameElement","contentWindow","Oe","contentEditable","Pe","Qe","Re","Se","Te","Ue","selectionStart","selectionEnd","Ve","We","Xe","Ye","Ze","Yb","$e","af","bf","cf","df","Nb","ef","ff","gf","hf","je","ke","jf","kf","lf","mf","autoFocus","nf","__html","of","pf","qf","rf","sf","tf","vf","wf","xf","yf","zf","Af","Bf","Cf","Df","Ef","__reactInternalMemoizedUnmaskedChildContext","__reactInternalMemoizedMaskedChildContext","Ff","Gf","Hf","If","Jf","__reactInternalMemoizedMergedChildContext","Kf","Lf","Mf","Nf","Of","Pf","unstable_cancelCallback","Qf","unstable_shouldYield","Rf","unstable_requestPaint","Sf","Tf","unstable_getCurrentPriorityLevel","Uf","unstable_ImmediatePriority","Vf","Wf","Xf","unstable_LowPriority","Yf","unstable_IdlePriority","Zf","$f","ag","bg","cg","dg","eg","fg","gg","hg","ig","jg","kg","mg","ng","og","pg","qg","rg","sg","childLanes","tg","dependencies","firstContext","lanes","ug","vg","responders","wg","xg","updateQueue","baseState","firstBaseUpdate","lastBaseUpdate","shared","pending","effects","yg","zg","eventTime","lane","Ag","Bg","Cg","Dg","Eg","Fg","Gg","Kg","_reactInternals","Hg","Ig","Jg","Lg","Mg","Ng","UNSAFE_componentWillReceiveProps","Og","getSnapshotBeforeUpdate","UNSAFE_componentWillMount","componentWillMount","Pg","Qg","_stringRef","Rg","Sg","lastEffect","nextEffect","firstEffect","Tg","Ug","Vg","Wg","Xg","Yg","Zg","$g","ah","bh","ch","dh","eh","fh","gh","hh","ih","memoizedProps","revealOrder","jh","kh","lh","mh","nh","oh","pendingProps","ph","qh","rh","sh","th","uh","_workInProgressVersionPrimary","vh","wh","xh","yh","zh","Ah","Bh","Ch","Dh","Eh","Fh","Gh","Hh","baseQueue","Ih","Jh","Kh","lastRenderedReducer","eagerReducer","eagerState","lastRenderedState","Lh","Mh","_getVersion","mutableReadLanes","Nh","getSnapshot","setSnapshot","Oh","Ph","Qh","Rh","deps","Sh","Th","Uh","Vh","Wh","Xh","Yh","Zh","$h","ai","bi","ci","di","readContext","useDeferredValue","useTransition","useMutableSource","useOpaqueIdentifier","unstable_isNewReconciler","uf","ei","fi","gi","hi","ii","ji","ki","li","mi","baseLanes","ni","oi","pi","UNSAFE_componentWillUpdate","componentWillUpdate","qi","ri","pendingContext","Bi","Di","Ei","si","retryLane","ti","unstable_avoidThisFallback","unstable_expectedLoadTime","vi","wi","xi","yi","zi","isBackwards","rendering","renderingStartTime","tail","tailMode","Ai","Fi","Gi","wasMultiple","onclick","Hi","Ii","Ji","Ki","Li","Mi","Ni","Oi","Pi","Qi","Ri","Si","componentDidCatch","Ti","componentStack","Ui","Vi","Wi","Xi","__reactInternalSnapshotBeforeUpdate","Yi","Zi","$i","aj","bj","onCommitFiberUnmount","cj","dj","ej","fj","gj","hj","_reactRootContainer","ij","jj","kj","lj","mj","nj","ceil","oj","pj","qj","rj","sj","tj","uj","vj","Infinity","wj","ck","xj","yj","zj","Aj","Bj","Cj","Dj","Ej","Fj","Gj","Hj","Ij","Jj","Sc","Kj","Lj","Mj","callbackNode","expirationTimes","callbackPriority","Tc","Nj","Oj","Pj","Qj","Rj","Sj","Tj","finishedWork","finishedLanes","Uj","timeoutHandle","Wj","Xj","pingCache","Yj","Zj","va","ak","bk","dk","focusedElem","ek","onCommitFiberRoot","fk","gk","ik","pendingChildren","jk","mutableSourceEagerHydrationData","kk","lk","mk","nk","qk","hydrationOptions","mutableSources","_internalRoot","rk","tk","sk","uk","hk","unstable_observedBits","unmount","Vj","vk","Events","wk","findFiberByHostInstance","bundleType","rendererPackageName","xk","rendererConfig","overrideHookState","overrideHookStateDeletePath","overrideHookStateRenamePath","overrideProps","overridePropsDeletePath","overridePropsRenamePath","setSuspenseHandler","scheduleUpdate","currentDispatcherRef","findHostInstanceByFiber","findHostInstancesForRefresh","scheduleRefresh","scheduleRoot","setRefreshHandler","getCurrentFiber","yk","isDisabled","supportsFiber","inject","createPortal","findDOMNode","flushSync","unmountComponentAtNode","unstable_batchedUpdates","unstable_createPortal","unstable_renderSubtreeIntoContainer","performance","MessageChannel","unstable_forceFrameRate","cancelAnimationFrame","requestAnimationFrame","floor","port2","port1","onmessage","postMessage","sortIndex","startTime","expirationTime","priorityLevel","unstable_Profiling","unstable_continueExecution","unstable_getFirstCallbackNode","unstable_next","unstable_pauseExecution","unstable_wrapCallback","AsyncMode","ConcurrentMode","ContextConsumer","ContextProvider","Lazy","Portal","isAsyncMode","isConcurrentMode","isContextConsumer","isContextProvider","isForwardRef","isFragment","isLazy","isPortal","isProfiler","isStrictMode","isSuspense","isValidElementType","typeOf","jsx","jsxs","superPropBase","_get","possibleConstructorReturn","skipAttributesToProps","attribs","replaceElement","library","hasReplace","HTMLDOMPropertyConfig","SVGDOMPropertyConfig","injection","MUST_USE_PROPERTY","HAS_BOOLEAN_VALUE","HAS_NUMERIC_VALUE","HAS_POSITIVE_NUMERIC_VALUE","HAS_OVERLOADED_BOOLEAN_VALUE","checkMask","injectDOMPropertyConfig","domPropertyConfig","isSVG","propConfig","Properties","DOMAttributeNames","hasNumericValue","hasPositiveNumericValue","accept","acceptCharset","accessKey","allowFullScreen","allowTransparency","autoComplete","autoPlay","cellPadding","cellSpacing","charSet","challenge","cite","classID","cols","colSpan","contextMenu","controls","controlsList","coords","crossOrigin","dateTime","defer","download","draggable","encType","formAction","formEncType","formMethod","formNoValidate","formTarget","frameBorder","headers","hidden","hrefLang","htmlFor","httpEquiv","inputMode","integrity","keyParams","keyType","kind","loop","manifest","marginHeight","marginWidth","maxLength","mediaGroup","minLength","muted","noValidate","open","optimum","placeholder","playsInline","poster","preload","profile","radioGroup","readOnly","referrerPolicy","rel","required","reversed","rows","rowSpan","sandbox","scrolling","seamless","sizes","span","spellCheck","src","srcDoc","srcLang","srcSet","summary","tabIndex","title","useMap","wmode","about","datatype","inlist","resource","typeof","vocab","autoCapitalize","autoCorrect","autoSave","itemProp","itemScope","itemType","itemID","itemRef","security","unselectable","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeType","autoReverse","azimuth","baseFrequency","baseProfile","baselineShift","bbox","begin","bias","calcMode","capHeight","clip","clipPath","clipRule","clipPathUnits","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","decelerate","descent","diffuseConstant","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","exponent","externalResourcesRequired","fillRule","filterRes","filterUnits","floodColor","focusable","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","ideographic","imageRendering","in","in2","intercept","k1","k2","k3","k4","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","lightingColor","limitingConeAngle","local","markerEnd","markerMid","markerStart","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","mathematical","numOctaves","operator","orient","orientation","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","points","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","rotate","rx","ry","scale","shapeRendering","slope","specularConstant","specularExponent","speed","spreadMethod","stdDeviation","stemh","stemv","stitchTiles","stopColor","strikethroughPosition","strikethroughThickness","stroke","strokeLinecap","strokeLinejoin","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textRendering","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","vHanging","vIdeographic","vMathematical","vectorEffect","vertAdvY","vertOriginX","vertOriginY","viewTarget","visibility","widths","wordSpacing","xHeight","x1","x2","xChannelSelector","xlinkActuate","xlinkArcrole","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlnsXlink","xmlLang","xmlSpace","yChannelSelector","zoomAndPan","__importDefault","mod","style_to_object_1","utilities_1","declaration","declarations","hasIterator","COMMENT_REGEX","NEWLINE_REGEX","WHITESPACE_REGEX","PROPERTY_REGEX","COLON_REGEX","VALUE_REGEX","SEMICOLON_REGEX","TRIM_REGEX","EMPTY_STRING","column","updatePosition","lines","line","whitespace","errorsList","msg","silent","comments","decls","CUSTOM_PROPERTY_REGEX","HYPHEN_REGEX","NO_HYPHEN_REGEX","VENDOR_PREFIX_REGEX","trimHyphen","skipCamelCase","domparser","DIRECTIVE_REGEX","HTML","HEAD","BODY","FIRST_TAG_REGEX","HEAD_TAG_REGEX","BODY_TAG_REGEX","parseFromDocument","domParser","getElementsByTagName","parseFromTemplate","firstTagName","__extends","extendStatics","__","__assign","cloneNode","NodeWithChildren","DataNode","nodeTypes","startIndex","_a","recursive","_super","_b","instr","elem","cloneChildren","clone_1","clone_2","clone_3","childs","assignIn","Container","_props$component","_props$disableGutters","disableGutters","_props$fixed","fixed","_props$maxWidth","clsx","boxSizing","marginRight","maxWidthXs","maxWidthSm","maxWidthMd","maxWidthLg","maxWidthXl","SPACINGS","GRID_SIZES","getOffset","div","Grid","_props$alignContent","alignContent","_props$alignItems","alignItems","_props$container","_props$direction","_props$item","_props$justify","justify","_props$lg","_props$md","_props$sm","_props$spacing","_props$wrap","_props$xl","_props$xs","_props$zeroMinWidth","zeroMinWidth","StyledGrid","flexWrap","minWidth","flexDirection","justifyContent","generateGutter","accumulator","globalStyles","flexBasis","generateGrid","setRef","useForkRef","refA","refB","refValue","useEnhancedEffect","useEventCallback","hadKeyboardEvent","hadFocusVisibleRecently","hadFocusVisibleRecentlyTimeout","inputTypesWhitelist","handleKeyDown","handlePointerDown","handleVisibilityChange","visibilityState","isFocusVisible","isContentEditable","focusTriggersKeyboardModality","handleBlurVisible","useIsFocusVisible","onBlurVisible","ReactDOM","getChildMapping","mapFn","getProp","getNextChildMapping","prevChildMapping","onExited","nextChildMapping","getValueForKey","nextKeysPending","pendingKeys","prevKey","childMapping","nextKey","pendingNextKey","mergeChildMappings","hasPrev","hasNext","prevChild","isLeaving","exit","TransitionGroup","_React$Component","handleExited","isMounting","firstRender","mounted","appear","currentChildMapping","_this$props","childFactory","TransitionGroupContext","Ripple","_props$pulsate","pulsate","rippleX","rippleY","rippleSize","inProp","_props$onExited","timeout","_React$useState","leaving","setLeaving","rippleClassName","ripple","rippleVisible","ripplePulsate","rippleStyles","childClassName","childLeaving","childPulsate","timeoutId","TouchRipple","_props$center","center","centerProp","ripples","setRipples","rippleCallback","ignoringMouseDown","startTimer","startTimerCommit","startCommit","oldRipples","_options$pulsate","_options$center","_options$fakeElement","fakeElement","sqrt","sizeX","sizeY","animationDuration","backgroundColor","ButtonBase","buttonRefProp","buttonRef","_props$centerRipple","centerRipple","_props$disabled","_props$disableRipple","disableRipple","_props$disableTouchRi","disableTouchRipple","_props$focusRipple","focusRipple","focusVisibleClassName","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","onDragLeave","_props$tabIndex","TouchRippleProps","_props$type","rippleRef","focusVisible","setFocusVisible","_useIsFocusVisible","focusVisibleRef","useRippleHandler","rippleAction","eventCallback","skipRippleAction","handleMouseDown","handleDragLeave","handleMouseUp","handleMouseLeave","handleTouchStart","handleTouchEnd","handleTouchMove","handleBlur","handleFocus","isNonNativeButton","keydownRef","handleKeyUp","ComponentProp","buttonProps","handleUserRef","handleOwnRef","handleRef","_React$useState2","mountedState","setMountedState","enableTouchRipple","WebkitTapHighlightColor","verticalAlign","borderStyle","Button","_props$color","_props$disableElevati","disableElevation","_props$disableFocusRi","disableFocusRipple","endIconProp","endIcon","_props$fullWidth","fullWidth","_props$size","startIconProp","startIcon","_props$variant","variant","colorInherit","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","boxShadow","containedPrimary","containedSecondary","borderColor","textSizeSmall","textSizeLarge","outlinedSizeSmall","outlinedSizeLarge","containedSizeSmall","containedSizeLarge","sizeSmall","sizeLarge","iconSizeSmall","iconSizeMedium","iconSizeLarge"],"mappings":"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G,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAIA,GAAa,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAIA,GAAa,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAIA,GAAa,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,GAAIA,GAAa,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,GAAIA,GAAa,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,GAAIA,GAAa,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,GAAIA,GAAa,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,GAAI,EAAG,EAAG,EAAG,GAAI,GAAIA,GAAa,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,GAAI,EAAG,EAAG,EAAG,GAAI,GAAIA,GAAa,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,GAAI,EAAG,EAAG,EAAG,GAAI,GAAIA,GAAa,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,GAAI,EAAG,EAAG,EAAG,GAAI,GAAIA,GAAa,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,GAAI,EAAG,EAAG,EAAG,GAAI,GAAIA,GAAa,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,GAAI,EAAG,EAAG,EAAG,GAAI,GAAIA,GAAa,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,GAAI,EAAG,EAAG,EAAG,GAAI,GAAIA,GAAa,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,GAAI,EAAG,EAAG,EAAG,GAAI,GAAIA,GAAa,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,GAAI,EAAG,EAAG,EAAG,GAAI,GAAIA,GAAa,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,GAAI,EAAG,EAAG,EAAG,GAAI,GAAIA,GAAa,EAAG,GAAI,IAAK,EAAG,EAAG,GAAI,GAAI,EAAG,EAAG,EAAG,GAAI,GAAIA,GAAa,EAAG,GAAI,IAAK,EAAG,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","file":"static/js/2.4ed68e72.chunk.js","sourcesContent":["import unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nexport default function _createForOfIteratorHelper(o, allowArrayLike) {\n  var it;\n\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (it = unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react.production.min.js');\n} else {\n  module.exports = require('./cjs/react.development.js');\n}\n","import getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport setPrototypeOf from \"@babel/runtime/helpers/esm/setPrototypeOf\";\nimport isNativeFunction from \"@babel/runtime/helpers/esm/isNativeFunction\";\nimport construct from \"@babel/runtime/helpers/esm/construct\";\nexport default function _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}","export default function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/ckeditorerror\n */\n\n/* globals console */\n\n/**\n * URL to the documentation with error codes.\n */\nexport const DOCUMENTATION_URL =\n\t'https://ckeditor.com/docs/ckeditor5/latest/framework/guides/support/error-codes.html';\n\n/**\n * The CKEditor error class.\n *\n * You should throw `CKEditorError` when:\n *\n * * An unexpected situation occurred and the editor (most probably) will not work properly. Such exception will be handled\n * by the {@link module:watchdog/watchdog~Watchdog watchdog} (if it is integrated),\n * * If the editor is incorrectly integrated or the editor API is used in the wrong way. This way you will give\n * feedback to the developer as soon as possible. Keep in mind that for common integration issues which should not\n * stop editor initialization (like missing upload adapter, wrong name of a toolbar component) we use\n * {@link module:utils/ckeditorerror~logWarning `logWarning()`} and\n * {@link module:utils/ckeditorerror~logError `logError()`}\n * to improve developers experience and let them see the a working editor as soon as possible.\n *\n *\t\t/**\n *\t\t * Error thrown when a plugin cannot be loaded due to JavaScript errors, lack of plugins with a given name, etc.\n *\t\t *\n *\t\t * @error plugin-load\n *\t\t * @param pluginName The name of the plugin that could not be loaded.\n *\t\t * @param moduleName The name of the module which tried to load this plugin.\n *\t\t * /\n *\t\tthrow new CKEditorError( 'plugin-load', {\n *\t\t\tpluginName: 'foo',\n *\t\t\tmoduleName: 'bar'\n *\t\t} );\n *\n * @extends Error\n */\nexport default class CKEditorError extends Error {\n\t/**\n\t * Creates an instance of the CKEditorError class.\n\t *\n\t * @param {String} errorName The error id in an `error-name` format. A link to this error documentation page will be added\n\t * to the thrown error's `message`.\n\t * @param {Object|null} context A context of the error by which the {@link module:watchdog/watchdog~Watchdog watchdog}\n\t * is able to determine which editor crashed. It should be an editor instance or a property connected to it. It can be also\n\t * a `null` value if the editor should not be restarted in case of the error (e.g. during the editor initialization).\n\t * The error context should be checked using the `areConnectedThroughProperties( editor, context )` utility\n\t * to check if the object works as the context.\n\t * @param {Object} [data] Additional data describing the error. A stringified version of this object\n\t * will be appended to the error message, so the data are quickly visible in the console. The original\n\t * data object will also be later available under the {@link #data} property.\n\t */\n\tconstructor( errorName, context, data ) {\n\t\tconst message = `${ errorName }${ ( data ? ` ${ JSON.stringify( data ) }` : '' ) }${ getLinkToDocumentationMessage( errorName ) }`;\n\n\t\tsuper( message );\n\n\t\t/**\n\t\t * @type {String}\n\t\t */\n\t\tthis.name = 'CKEditorError';\n\n\t\t/**\n\t\t * A context of the error by which the Watchdog is able to determine which editor crashed.\n\t\t *\n\t\t * @type {Object|null}\n\t\t */\n\t\tthis.context = context;\n\n\t\t/**\n\t\t * The additional error data passed to the constructor. Undefined if none was passed.\n\t\t *\n\t\t * @type {Object|undefined}\n\t\t */\n\t\tthis.data = data;\n\t}\n\n\t/**\n\t * Checks if the error is of the `CKEditorError` type.\n\t */\n\tis( type ) {\n\t\treturn type === 'CKEditorError';\n\t}\n\n\t/**\n\t * A utility that ensures that the thrown error is a {@link module:utils/ckeditorerror~CKEditorError} one.\n\t * It is useful when combined with the {@link module:watchdog/watchdog~Watchdog} feature, which can restart the editor in case\n\t * of a {@link module:utils/ckeditorerror~CKEditorError} error.\n\t *\n\t * @static\n\t * @param {Error} err The error to rethrow.\n\t * @param {Object} context An object connected through properties with the editor instance. This context will be used\n\t * by the watchdog to verify which editor should be restarted.\n\t */\n\tstatic rethrowUnexpectedError( err, context ) {\n\t\tif ( err.is && err.is( 'CKEditorError' ) ) {\n\t\t\tthrow err;\n\t\t}\n\n\t\t/**\n\t\t * An unexpected error occurred inside the CKEditor 5 codebase. This error will look like the original one\n\t\t * to make the debugging easier.\n\t\t *\n\t\t * This error is only useful when the editor is initialized using the {@link module:watchdog/watchdog~Watchdog} feature.\n\t\t * In case of such error (or any {@link module:utils/ckeditorerror~CKEditorError} error) the watchdog should restart the editor.\n\t\t *\n\t\t * @error unexpected-error\n\t\t */\n\t\tconst error = new CKEditorError( err.message, context );\n\n\t\t// Restore the original stack trace to make the error look like the original one.\n\t\t// See https://github.com/ckeditor/ckeditor5/issues/5595 for more details.\n\t\terror.stack = err.stack;\n\n\t\tthrow error;\n\t}\n}\n\n/**\n * Logs a warning to the console with a properly formatted message and adds a link to the documentation.\n * Use whenever you want to log a warning to the console.\n *\n *\t\t/**\n *\t\t * There was a problem processing the configuration of the toolbar. The item with the given\n *\t\t * name does not exist, so it was omitted when rendering the toolbar.\n *\t\t *\n *\t\t * @error toolbarview-item-unavailable\n *\t\t * @param {String} name The name of the component.\n *\t\t * /\n *\t\tlogWarning( 'toolbarview-item-unavailable', { name } );\n *\n * See also {@link module:utils/ckeditorerror~CKEditorError} for an explanation when to throw an error and when to log\n * a warning or an error to the console.\n *\n * @param {String} errorName The error name to be logged.\n * @param {Object} [data] Additional data to be logged.\n * @returns {String}\n */\nexport function logWarning( errorName, data ) {\n\tconsole.warn( ...formatConsoleArguments( errorName, data ) );\n}\n\n/**\n * Logs an error to the console with a properly formatted message and adds a link to the documentation.\n * Use whenever you want to log an error to the console.\n *\n *\t\t/**\n *\t\t * There was a problem processing the configuration of the toolbar. The item with the given\n *\t\t * name does not exist, so it was omitted when rendering the toolbar.\n *\t\t *\n *\t\t * @error toolbarview-item-unavailable\n *\t\t * @param {String} name The name of the component.\n *\t\t * /\n *\t\t logError( 'toolbarview-item-unavailable', { name } );\n *\n * **Note**: In most cases logging a warning using {@link module:utils/ckeditorerror~logWarning} is enough.\n *\n * See also {@link module:utils/ckeditorerror~CKEditorError} for an explanation when to use each method.\n *\n * @param {String} errorName The error name to be logged.\n * @param {Object} [data] Additional data to be logged.\n * @returns {String}\n */\nexport function logError( errorName, data ) {\n\tconsole.error( ...formatConsoleArguments( errorName, data ) );\n}\n\nfunction getLinkToDocumentationMessage( errorName ) {\n\treturn `\\nRead more: ${ DOCUMENTATION_URL }#error-${ errorName }`;\n}\n\nfunction formatConsoleArguments( errorName, data ) {\n\tconst documentationMessage = getLinkToDocumentationMessage( errorName );\n\n\treturn data ? [ errorName, data, documentationMessage ] : [ errorName, documentationMessage ];\n}\n","import setPrototypeOf from \"@babel/runtime/helpers/esm/setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","import getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport isNativeReflectConstruct from \"@babel/runtime/helpers/esm/isNativeReflectConstruct\";\nimport possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nexport default function _createSuper(Derived) {\n  var hasNativeReflectConstruct = isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return possibleConstructorReturn(this, result);\n  };\n}","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/range\n */\n\nimport Position from './position';\nimport TreeWalker from './treewalker';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport compareArrays from '@ckeditor/ckeditor5-utils/src/comparearrays';\n\n/**\n * Represents a range in the model tree.\n *\n * A range is defined by its {@link module:engine/model/range~Range#start} and {@link module:engine/model/range~Range#end}\n * positions.\n *\n * You can create range instances via its constructor or the `createRange*()` factory methods of\n * {@link module:engine/model/model~Model} and {@link module:engine/model/writer~Writer}.\n */\nexport default class Range {\n\t/**\n\t * Creates a range spanning from `start` position to `end` position.\n\t *\n\t * @param {module:engine/model/position~Position} start Start position.\n\t * @param {module:engine/model/position~Position} [end] End position. If not set, range will be collapsed at `start` position.\n\t */\n\tconstructor( start, end = null ) {\n\t\t/**\n\t\t * Start position.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/model/position~Position}\n\t\t */\n\t\tthis.start = Position._createAt( start );\n\n\t\t/**\n\t\t * End position.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/model/position~Position}\n\t\t */\n\t\tthis.end = end ? Position._createAt( end ) : Position._createAt( start );\n\n\t\t// If the range is collapsed, treat in a similar way as a position and set its boundaries stickiness to 'toNone'.\n\t\t// In other case, make the boundaries stick to the \"inside\" of the range.\n\t\tthis.start.stickiness = this.isCollapsed ? 'toNone' : 'toNext';\n\t\tthis.end.stickiness = this.isCollapsed ? 'toNone' : 'toPrevious';\n\t}\n\n\t/**\n\t * Iterable interface.\n\t *\n\t * Iterates over all {@link module:engine/model/item~Item items} that are in this range and returns\n\t * them together with additional information like length or {@link module:engine/model/position~Position positions},\n\t * grouped as {@link module:engine/model/treewalker~TreeWalkerValue}.\n\t * It iterates over all {@link module:engine/model/textproxy~TextProxy text contents} that are inside the range\n\t * and all the {@link module:engine/model/element~Element}s that are entered into when iterating over this range.\n\t *\n\t * This iterator uses {@link module:engine/model/treewalker~TreeWalker} with `boundaries` set to this range\n\t * and `ignoreElementEnd` option set to `true`.\n\t *\n\t * @returns {Iterable.<module:engine/model/treewalker~TreeWalkerValue>}\n\t */\n\t* [ Symbol.iterator ]() {\n\t\tyield* new TreeWalker( { boundaries: this, ignoreElementEnd: true } );\n\t}\n\n\t/**\n\t * Returns whether the range is collapsed, that is if {@link #start} and\n\t * {@link #end} positions are equal.\n\t *\n\t * @type {Boolean}\n\t */\n\tget isCollapsed() {\n\t\treturn this.start.isEqual( this.end );\n\t}\n\n\t/**\n\t * Returns whether this range is flat, that is if {@link #start} position and\n\t * {@link #end} position are in the same {@link module:engine/model/position~Position#parent}.\n\t *\n\t * @type {Boolean}\n\t */\n\tget isFlat() {\n\t\tconst startParentPath = this.start.getParentPath();\n\t\tconst endParentPath = this.end.getParentPath();\n\n\t\treturn compareArrays( startParentPath, endParentPath ) == 'same';\n\t}\n\n\t/**\n\t * Range root element.\n\t *\n\t * @type {module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment}\n\t */\n\tget root() {\n\t\treturn this.start.root;\n\t}\n\n\t/**\n\t * Checks whether this range contains given {@link module:engine/model/position~Position position}.\n\t *\n\t * @param {module:engine/model/position~Position} position Position to check.\n\t * @returns {Boolean} `true` if given {@link module:engine/model/position~Position position} is contained\n\t * in this range,`false` otherwise.\n\t */\n\tcontainsPosition( position ) {\n\t\treturn position.isAfter( this.start ) && position.isBefore( this.end );\n\t}\n\n\t/**\n\t * Checks whether this range contains given {@link ~Range range}.\n\t *\n\t * @param {module:engine/model/range~Range} otherRange Range to check.\n\t * @param {Boolean} [loose=false] Whether the check is loose or strict. If the check is strict (`false`), compared range cannot\n\t * start or end at the same position as this range boundaries. If the check is loose (`true`), compared range can start, end or\n\t * even be equal to this range. Note that collapsed ranges are always compared in strict mode.\n\t * @returns {Boolean} `true` if given {@link ~Range range} boundaries are contained by this range, `false` otherwise.\n\t */\n\tcontainsRange( otherRange, loose = false ) {\n\t\tif ( otherRange.isCollapsed ) {\n\t\t\tloose = false;\n\t\t}\n\n\t\tconst containsStart = this.containsPosition( otherRange.start ) || ( loose && this.start.isEqual( otherRange.start ) );\n\t\tconst containsEnd = this.containsPosition( otherRange.end ) || ( loose && this.end.isEqual( otherRange.end ) );\n\n\t\treturn containsStart && containsEnd;\n\t}\n\n\t/**\n\t * Checks whether given {@link module:engine/model/item~Item} is inside this range.\n\t *\n\t * @param {module:engine/model/item~Item} item Model item to check.\n\t */\n\tcontainsItem( item ) {\n\t\tconst pos = Position._createBefore( item );\n\n\t\treturn this.containsPosition( pos ) || this.start.isEqual( pos );\n\t}\n\n\t/**\n\t * Checks whether this object is of the given.\n\t *\n\t *\t\trange.is( 'range' ); // -> true\n\t *\t\trange.is( 'model:range' ); // -> true\n\t *\n\t *\t\trange.is( 'view:range' ); // -> false\n\t *\t\trange.is( 'documentSelection' ); // -> false\n\t *\n\t * {@link module:engine/model/node~Node#is Check the entire list of model objects} which implement the `is()` method.\n\t *\n\t * @param {String} type\n\t * @returns {Boolean}\n\t */\n\tis( type ) {\n\t\treturn type === 'range' || type === 'model:range';\n\t}\n\n\t/**\n\t * Two ranges are equal if their {@link #start} and {@link #end} positions are equal.\n\t *\n\t * @param {module:engine/model/range~Range} otherRange Range to compare with.\n\t * @returns {Boolean} `true` if ranges are equal, `false` otherwise.\n\t */\n\tisEqual( otherRange ) {\n\t\treturn this.start.isEqual( otherRange.start ) && this.end.isEqual( otherRange.end );\n\t}\n\n\t/**\n\t * Checks and returns whether this range intersects with given range.\n\t *\n\t * @param {module:engine/model/range~Range} otherRange Range to compare with.\n\t * @returns {Boolean} `true` if ranges intersect, `false` otherwise.\n\t */\n\tisIntersecting( otherRange ) {\n\t\treturn this.start.isBefore( otherRange.end ) && this.end.isAfter( otherRange.start );\n\t}\n\n\t/**\n\t * Computes which part(s) of this {@link ~Range range} is not a part of given {@link ~Range range}.\n\t * Returned array contains zero, one or two {@link ~Range ranges}.\n\t *\n\t * Examples:\n\t *\n\t *\t\tlet range = model.createRange(\n\t *\t\t\tmodel.createPositionFromPath( root, [ 2, 7 ] ),\n\t *\t\t\tmodel.createPositionFromPath( root, [ 4, 0, 1 ] )\n\t *\t\t);\n\t *\t\tlet otherRange = model.createRange( model.createPositionFromPath( root, [ 1 ] ), model.createPositionFromPath( root, [ 5 ] ) );\n\t *\t\tlet transformed = range.getDifference( otherRange );\n\t *\t\t// transformed array has no ranges because `otherRange` contains `range`\n\t *\n\t *\t\totherRange = model.createRange( model.createPositionFromPath( root, [ 1 ] ), model.createPositionFromPath( root, [ 3 ] ) );\n\t *\t\ttransformed = range.getDifference( otherRange );\n\t *\t\t// transformed array has one range: from [ 3 ] to [ 4, 0, 1 ]\n\t *\n\t *\t\totherRange = model.createRange( model.createPositionFromPath( root, [ 3 ] ), model.createPositionFromPath( root, [ 4 ] ) );\n\t *\t\ttransformed = range.getDifference( otherRange );\n\t *\t\t// transformed array has two ranges: from [ 2, 7 ] to [ 3 ] and from [ 4 ] to [ 4, 0, 1 ]\n\t *\n\t * @param {module:engine/model/range~Range} otherRange Range to differentiate against.\n\t * @returns {Array.<module:engine/model/range~Range>} The difference between ranges.\n\t */\n\tgetDifference( otherRange ) {\n\t\tconst ranges = [];\n\n\t\tif ( this.isIntersecting( otherRange ) ) {\n\t\t\t// Ranges intersect.\n\n\t\t\tif ( this.containsPosition( otherRange.start ) ) {\n\t\t\t\t// Given range start is inside this range. This means that we have to\n\t\t\t\t// add shrunken range - from the start to the middle of this range.\n\t\t\t\tranges.push( new Range( this.start, otherRange.start ) );\n\t\t\t}\n\n\t\t\tif ( this.containsPosition( otherRange.end ) ) {\n\t\t\t\t// Given range end is inside this range. This means that we have to\n\t\t\t\t// add shrunken range - from the middle of this range to the end.\n\t\t\t\tranges.push( new Range( otherRange.end, this.end ) );\n\t\t\t}\n\t\t} else {\n\t\t\t// Ranges do not intersect, return the original range.\n\t\t\tranges.push( new Range( this.start, this.end ) );\n\t\t}\n\n\t\treturn ranges;\n\t}\n\n\t/**\n\t * Returns an intersection of this {@link ~Range range} and given {@link ~Range range}.\n\t * Intersection is a common part of both of those ranges. If ranges has no common part, returns `null`.\n\t *\n\t * Examples:\n\t *\n\t *\t\tlet range = model.createRange(\n\t *\t\t\tmodel.createPositionFromPath( root, [ 2, 7 ] ),\n\t *\t\t\tmodel.createPositionFromPath( root, [ 4, 0, 1 ] )\n\t *\t\t);\n\t *\t\tlet otherRange = model.createRange( model.createPositionFromPath( root, [ 1 ] ), model.createPositionFromPath( root, [ 2 ] ) );\n\t *\t\tlet transformed = range.getIntersection( otherRange ); // null - ranges have no common part\n\t *\n\t *\t\totherRange = model.createRange( model.createPositionFromPath( root, [ 3 ] ), model.createPositionFromPath( root, [ 5 ] ) );\n\t *\t\ttransformed = range.getIntersection( otherRange ); // range from [ 3 ] to [ 4, 0, 1 ]\n\t *\n\t * @param {module:engine/model/range~Range} otherRange Range to check for intersection.\n\t * @returns {module:engine/model/range~Range|null} A common part of given ranges or `null` if ranges have no common part.\n\t */\n\tgetIntersection( otherRange ) {\n\t\tif ( this.isIntersecting( otherRange ) ) {\n\t\t\t// Ranges intersect, so a common range will be returned.\n\t\t\t// At most, it will be same as this range.\n\t\t\tlet commonRangeStart = this.start;\n\t\t\tlet commonRangeEnd = this.end;\n\n\t\t\tif ( this.containsPosition( otherRange.start ) ) {\n\t\t\t\t// Given range start is inside this range. This means thaNt we have to\n\t\t\t\t// shrink common range to the given range start.\n\t\t\t\tcommonRangeStart = otherRange.start;\n\t\t\t}\n\n\t\t\tif ( this.containsPosition( otherRange.end ) ) {\n\t\t\t\t// Given range end is inside this range. This means that we have to\n\t\t\t\t// shrink common range to the given range end.\n\t\t\t\tcommonRangeEnd = otherRange.end;\n\t\t\t}\n\n\t\t\treturn new Range( commonRangeStart, commonRangeEnd );\n\t\t}\n\n\t\t// Ranges do not intersect, so they do not have common part.\n\t\treturn null;\n\t}\n\n\t/**\n\t * Returns a range created by joining this {@link ~Range range} with the given {@link ~Range range}.\n\t * If ranges have no common part, returns `null`.\n\t *\n\t * Examples:\n\t *\n\t *\t\tlet range = model.createRange(\n\t *\t\t\tmodel.createPositionFromPath( root, [ 2, 7 ] ),\n\t *\t\t\tmodel.createPositionFromPath( root, [ 4, 0, 1 ] )\n\t *\t\t);\n\t *\t\tlet otherRange = model.createRange(\n\t *\t\t\tmodel.createPositionFromPath( root, [ 1 ] ),\n\t *\t\t\tmodel.createPositionFromPath( root, [ 2 ] )\n \t *\t\t);\n\t *\t\tlet transformed = range.getJoined( otherRange ); // null - ranges have no common part\n\t *\n\t *\t\totherRange = model.createRange(\n\t *\t\t\tmodel.createPositionFromPath( root, [ 3 ] ),\n\t *\t\t\tmodel.createPositionFromPath( root, [ 5 ] )\n\t *\t\t);\n\t *\t\ttransformed = range.getJoined( otherRange ); // range from [ 2, 7 ] to [ 5 ]\n\t *\n\t * @param {module:engine/model/range~Range} otherRange Range to be joined.\n\t * @param {Boolean} [loose=false] Whether the intersection check is loose or strict. If the check is strict (`false`),\n\t * ranges are tested for intersection or whether start/end positions are equal. If the check is loose (`true`),\n\t * compared range is also checked if it's {@link module:engine/model/position~Position#isTouching touching} current range.\n\t * @returns {module:engine/model/range~Range|null} A sum of given ranges or `null` if ranges have no common part.\n\t */\n\tgetJoined( otherRange, loose = false ) {\n\t\tlet shouldJoin = this.isIntersecting( otherRange );\n\n\t\tif ( !shouldJoin ) {\n\t\t\tif ( this.start.isBefore( otherRange.start ) ) {\n\t\t\t\tshouldJoin = loose ? this.end.isTouching( otherRange.start ) : this.end.isEqual( otherRange.start );\n\t\t\t} else {\n\t\t\t\tshouldJoin = loose ? otherRange.end.isTouching( this.start ) : otherRange.end.isEqual( this.start );\n\t\t\t}\n\t\t}\n\n\t\tif ( !shouldJoin ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tlet startPosition = this.start;\n\t\tlet endPosition = this.end;\n\n\t\tif ( otherRange.start.isBefore( startPosition ) ) {\n\t\t\tstartPosition = otherRange.start;\n\t\t}\n\n\t\tif ( otherRange.end.isAfter( endPosition ) ) {\n\t\t\tendPosition = otherRange.end;\n\t\t}\n\n\t\treturn new Range( startPosition, endPosition );\n\t}\n\n\t/**\n\t * Computes and returns the smallest set of {@link #isFlat flat} ranges, that covers this range in whole.\n\t *\n\t * See an example of a model structure (`[` and `]` are range boundaries):\n\t *\n\t *\t\troot                                                            root\n\t *\t\t |- element DIV                         DIV             P2              P3             DIV\n\t *\t\t |   |- element H                   H        P1        f o o           b a r       H         P4\n\t *\t\t |   |   |- \"fir[st\"             fir[st     lorem                               se]cond     ipsum\n\t *\t\t |   |- element P1\n\t *\t\t |   |   |- \"lorem\"                                              ||\n\t *\t\t |- element P2                                                   ||\n\t *\t\t |   |- \"foo\"                                                    VV\n\t *\t\t |- element P3\n\t *\t\t |   |- \"bar\"                                                   root\n\t *\t\t |- element DIV                         DIV             [P2             P3]             DIV\n\t *\t\t |   |- element H                   H       [P1]       f o o           b a r        H         P4\n\t *\t\t |   |   |- \"se]cond\"            fir[st]    lorem                               [se]cond     ipsum\n\t *\t\t |   |- element P4\n\t *\t\t |   |   |- \"ipsum\"\n\t *\n\t * As it can be seen, letters contained in the range are: `stloremfoobarse`, spread across different parents.\n\t * We are looking for minimal set of flat ranges that contains the same nodes.\n\t *\n\t * Minimal flat ranges for above range `( [ 0, 0, 3 ], [ 3, 0, 2 ] )` will be:\n\t *\n\t *\t\t( [ 0, 0, 3 ], [ 0, 0, 5 ] ) = \"st\"\n\t *\t\t( [ 0, 1 ], [ 0, 2 ] ) = element P1 (\"lorem\")\n\t *\t\t( [ 1 ], [ 3 ] ) = element P2, element P3 (\"foobar\")\n\t *\t\t( [ 3, 0, 0 ], [ 3, 0, 2 ] ) = \"se\"\n\t *\n\t * **Note:** if an {@link module:engine/model/element~Element element} is not wholly contained in this range, it won't be returned\n\t * in any of the returned flat ranges. See in the example how `H` elements at the beginning and at the end of the range\n\t * were omitted. Only their parts that were wholly in the range were returned.\n\t *\n\t * **Note:** this method is not returning flat ranges that contain no nodes.\n\t *\n\t * @returns {Array.<module:engine/model/range~Range>} Array of flat ranges covering this range.\n\t */\n\tgetMinimalFlatRanges() {\n\t\tconst ranges = [];\n\t\tconst diffAt = this.start.getCommonPath( this.end ).length;\n\n\t\tconst pos = Position._createAt( this.start );\n\t\tlet posParent = pos.parent;\n\n\t\t// Go up.\n\t\twhile ( pos.path.length > diffAt + 1 ) {\n\t\t\tconst howMany = posParent.maxOffset - pos.offset;\n\n\t\t\tif ( howMany !== 0 ) {\n\t\t\t\tranges.push( new Range( pos, pos.getShiftedBy( howMany ) ) );\n\t\t\t}\n\n\t\t\tpos.path = pos.path.slice( 0, -1 );\n\t\t\tpos.offset++;\n\t\t\tposParent = posParent.parent;\n\t\t}\n\n\t\t// Go down.\n\t\twhile ( pos.path.length <= this.end.path.length ) {\n\t\t\tconst offset = this.end.path[ pos.path.length - 1 ];\n\t\t\tconst howMany = offset - pos.offset;\n\n\t\t\tif ( howMany !== 0 ) {\n\t\t\t\tranges.push( new Range( pos, pos.getShiftedBy( howMany ) ) );\n\t\t\t}\n\n\t\t\tpos.offset = offset;\n\t\t\tpos.path.push( 0 );\n\t\t}\n\n\t\treturn ranges;\n\t}\n\n\t/**\n\t * Creates a {@link module:engine/model/treewalker~TreeWalker TreeWalker} instance with this range as a boundary.\n\t *\n\t * For example, to iterate over all items in the entire document root:\n\t *\n\t *\t\t// Create a range spanning over the entire root content:\n\t *\t\tconst range = editor.model.createRangeIn( editor.model.document.getRoot() );\n\t *\n\t *\t\t// Iterate over all items in this range:\n\t *\t\tfor ( const value of range.getWalker() ) {\n\t *\t\t\tconsole.log( value.item );\n\t *\t\t}\n\t *\n\t * @param {Object} options Object with configuration options. See {@link module:engine/model/treewalker~TreeWalker}.\n\t * @param {module:engine/model/position~Position} [options.startPosition]\n\t * @param {Boolean} [options.singleCharacters=false]\n\t * @param {Boolean} [options.shallow=false]\n\t * @param {Boolean} [options.ignoreElementEnd=false]\n\t */\n\tgetWalker( options = {} ) {\n\t\toptions.boundaries = this;\n\n\t\treturn new TreeWalker( options );\n\t}\n\n\t/**\n\t * Returns an iterator that iterates over all {@link module:engine/model/item~Item items} that are in this range and returns\n\t * them.\n\t *\n\t * This method uses {@link module:engine/model/treewalker~TreeWalker} with `boundaries` set to this range and `ignoreElementEnd` option\n\t * set to `true`. However it returns only {@link module:engine/model/item~Item model items},\n\t * not {@link module:engine/model/treewalker~TreeWalkerValue}.\n\t *\n\t * You may specify additional options for the tree walker. See {@link module:engine/model/treewalker~TreeWalker} for\n\t * a full list of available options.\n\t *\n\t * @param {Object} options Object with configuration options. See {@link module:engine/model/treewalker~TreeWalker}.\n\t * @returns {Iterable.<module:engine/model/item~Item>}\n\t */\n\t* getItems( options = {} ) {\n\t\toptions.boundaries = this;\n\t\toptions.ignoreElementEnd = true;\n\n\t\tconst treeWalker = new TreeWalker( options );\n\n\t\tfor ( const value of treeWalker ) {\n\t\t\tyield value.item;\n\t\t}\n\t}\n\n\t/**\n\t * Returns an iterator that iterates over all {@link module:engine/model/position~Position positions} that are boundaries or\n\t * contained in this range.\n\t *\n\t * This method uses {@link module:engine/model/treewalker~TreeWalker} with `boundaries` set to this range. However it returns only\n\t * {@link module:engine/model/position~Position positions}, not {@link module:engine/model/treewalker~TreeWalkerValue}.\n\t *\n\t * You may specify additional options for the tree walker. See {@link module:engine/model/treewalker~TreeWalker} for\n\t * a full list of available options.\n\t *\n\t * @param {Object} options Object with configuration options. See {@link module:engine/model/treewalker~TreeWalker}.\n\t * @returns {Iterable.<module:engine/model/position~Position>}\n\t */\n\t* getPositions( options = {} ) {\n\t\toptions.boundaries = this;\n\n\t\tconst treeWalker = new TreeWalker( options );\n\n\t\tyield treeWalker.position;\n\n\t\tfor ( const value of treeWalker ) {\n\t\t\tyield value.nextPosition;\n\t\t}\n\t}\n\n\t/**\n\t * Returns a range that is a result of transforming this range by given `operation`.\n\t *\n\t * **Note:** transformation may break one range into multiple ranges (for example, when a part of the range is\n\t * moved to a different part of document tree). For this reason, an array is returned by this method and it\n\t * may contain one or more `Range` instances.\n\t *\n\t * @param {module:engine/model/operation/operation~Operation} operation Operation to transform range by.\n\t * @returns {Array.<module:engine/model/range~Range>} Range which is the result of transformation.\n\t */\n\tgetTransformedByOperation( operation ) {\n\t\tswitch ( operation.type ) {\n\t\t\tcase 'insert':\n\t\t\t\treturn this._getTransformedByInsertOperation( operation );\n\t\t\tcase 'move':\n\t\t\tcase 'remove':\n\t\t\tcase 'reinsert':\n\t\t\t\treturn this._getTransformedByMoveOperation( operation );\n\t\t\tcase 'split':\n\t\t\t\treturn [ this._getTransformedBySplitOperation( operation ) ];\n\t\t\tcase 'merge':\n\t\t\t\treturn [ this._getTransformedByMergeOperation( operation ) ];\n\t\t}\n\n\t\treturn [ new Range( this.start, this.end ) ];\n\t}\n\n\t/**\n\t * Returns a range that is a result of transforming this range by multiple `operations`.\n\t *\n\t * @see ~Range#getTransformedByOperation\n\t * @param {Iterable.<module:engine/model/operation/operation~Operation>} operations Operations to transform the range by.\n\t * @returns {Array.<module:engine/model/range~Range>} Range which is the result of transformation.\n\t */\n\tgetTransformedByOperations( operations ) {\n\t\tconst ranges = [ new Range( this.start, this.end ) ];\n\n\t\tfor ( const operation of operations ) {\n\t\t\tfor ( let i = 0; i < ranges.length; i++ ) {\n\t\t\t\tconst result = ranges[ i ].getTransformedByOperation( operation );\n\n\t\t\t\tranges.splice( i, 1, ...result );\n\t\t\t\ti += result.length - 1;\n\t\t\t}\n\t\t}\n\n\t\t// It may happen that a range is split into two, and then the part of second \"piece\" is moved into first\n\t\t// \"piece\". In this case we will have incorrect third range, which should not be included in the result --\n\t\t// because it is already included in the first \"piece\". In this loop we are looking for all such ranges that\n\t\t// are inside other ranges and we simply remove them.\n\t\tfor ( let i = 0; i < ranges.length; i++ ) {\n\t\t\tconst range = ranges[ i ];\n\n\t\t\tfor ( let j = i + 1; j < ranges.length; j++ ) {\n\t\t\t\tconst next = ranges[ j ];\n\n\t\t\t\tif ( range.containsRange( next ) || next.containsRange( range ) || range.isEqual( next ) ) {\n\t\t\t\t\tranges.splice( j, 1 );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn ranges;\n\t}\n\n\t/**\n\t * Returns an {@link module:engine/model/element~Element} or {@link module:engine/model/documentfragment~DocumentFragment}\n\t * which is a common ancestor of the range's both ends (in which the entire range is contained).\n\t *\n\t * @returns {module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment|null}\n\t */\n\tgetCommonAncestor() {\n\t\treturn this.start.getCommonAncestor( this.end );\n\t}\n\n\t/**\n\t * Returns an {@link module:engine/model/element~Element Element} contained by the range.\n\t * The element will be returned when it is the **only** node within the range and **fully–contained**\n\t * at the same time.\n\t *\n\t * @returns {module:engine/model/element~Element|null}\n\t */\n\tgetContainedElement() {\n\t\tif ( this.isCollapsed ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst nodeAfterStart = this.start.nodeAfter;\n\t\tconst nodeBeforeEnd = this.end.nodeBefore;\n\n\t\tif ( nodeAfterStart && nodeAfterStart.is( 'element' ) && nodeAfterStart === nodeBeforeEnd ) {\n\t\t\treturn nodeAfterStart;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Converts `Range` to plain object and returns it.\n\t *\n\t * @returns {Object} `Node` converted to plain object.\n\t */\n\ttoJSON() {\n\t\treturn {\n\t\t\tstart: this.start.toJSON(),\n\t\t\tend: this.end.toJSON()\n\t\t};\n\t}\n\n\t/**\n\t * Returns a new range that is equal to current range.\n\t *\n\t * @returns {module:engine/model/range~Range}\n\t */\n\tclone() {\n\t\treturn new this.constructor( this.start, this.end );\n\t}\n\n\t/**\n\t * Returns a result of transforming a copy of this range by insert operation.\n\t *\n\t * One or more ranges may be returned as a result of this transformation.\n\t *\n\t * @protected\n\t * @param {module:engine/model/operation/insertoperation~InsertOperation} operation\n\t * @returns {Array.<module:engine/model/range~Range>}\n\t */\n\t_getTransformedByInsertOperation( operation, spread = false ) {\n\t\treturn this._getTransformedByInsertion( operation.position, operation.howMany, spread );\n\t}\n\n\t/**\n\t * Returns a result of transforming a copy of this range by move operation.\n\t *\n\t * One or more ranges may be returned as a result of this transformation.\n\t *\n\t * @protected\n\t * @param {module:engine/model/operation/moveoperation~MoveOperation} operation\n\t * @returns {Array.<module:engine/model/range~Range>}\n\t */\n\t_getTransformedByMoveOperation( operation, spread = false ) {\n\t\tconst sourcePosition = operation.sourcePosition;\n\t\tconst howMany = operation.howMany;\n\t\tconst targetPosition = operation.targetPosition;\n\n\t\treturn this._getTransformedByMove( sourcePosition, targetPosition, howMany, spread );\n\t}\n\n\t/**\n\t * Returns a result of transforming a copy of this range by split operation.\n\t *\n\t * Always one range is returned. The transformation is done in a way to not break the range.\n\t *\n\t * @protected\n\t * @param {module:engine/model/operation/splitoperation~SplitOperation} operation\n\t * @returns {module:engine/model/range~Range}\n\t */\n\t_getTransformedBySplitOperation( operation ) {\n\t\tconst start = this.start._getTransformedBySplitOperation( operation );\n\t\tlet end = this.end._getTransformedBySplitOperation( operation );\n\n\t\tif ( this.end.isEqual( operation.insertionPosition ) ) {\n\t\t\tend = this.end.getShiftedBy( 1 );\n\t\t}\n\n\t\t// Below may happen when range contains graveyard element used by split operation.\n\t\tif ( start.root != end.root ) {\n\t\t\t// End position was next to the moved graveyard element and was moved with it.\n\t\t\t// Fix it by using old `end` which has proper `root`.\n\t\t\tend = this.end.getShiftedBy( -1 );\n\t\t}\n\n\t\treturn new Range( start, end );\n\t}\n\n\t/**\n\t * Returns a result of transforming a copy of this range by merge operation.\n\t *\n\t * Always one range is returned. The transformation is done in a way to not break the range.\n\t *\n\t * @protected\n\t * @param {module:engine/model/operation/mergeoperation~MergeOperation} operation\n\t * @returns {module:engine/model/range~Range}\n\t */\n\t_getTransformedByMergeOperation( operation ) {\n\t\t// Special case when the marker is set on \"the closing tag\" of an element. Marker can be set like that during\n\t\t// transformations, especially when a content of a few block elements were removed. For example:\n\t\t//\n\t\t// {} is the transformed range, [] is the removed range.\n\t\t// <p>F[o{o</p><p>B}ar</p><p>Xy]z</p>\n\t\t//\n\t\t// <p>Fo{o</p><p>B}ar</p><p>z</p>\n\t\t// <p>F{</p><p>B}ar</p><p>z</p>\n\t\t// <p>F{</p>}<p>z</p>\n\t\t// <p>F{}z</p>\n\t\t//\n\t\tif ( this.start.isEqual( operation.targetPosition ) && this.end.isEqual( operation.deletionPosition ) ) {\n\t\t\treturn new Range( this.start );\n\t\t}\n\n\t\tlet start = this.start._getTransformedByMergeOperation( operation );\n\t\tlet end = this.end._getTransformedByMergeOperation( operation );\n\n\t\tif ( start.root != end.root ) {\n\t\t\t// This happens when the end position was next to the merged (deleted) element.\n\t\t\t// Then, the end position was moved to the graveyard root. In this case we need to fix\n\t\t\t// the range cause its boundaries would be in different roots.\n\t\t\tend = this.end.getShiftedBy( -1 );\n\t\t}\n\n\t\tif ( start.isAfter( end ) ) {\n\t\t\t// This happens in three following cases:\n\t\t\t//\n\t\t\t// Case 1: Merge operation source position is before the target position (due to some transformations, OT, etc.)\n\t\t\t//         This means that start can be moved before the end of the range.\n\t\t\t//\n\t\t\t// Before: <p>a{a</p><p>b}b</p><p>cc</p>\n\t\t\t// Merge:  <p>b}b</p><p>cca{a</p>\n\t\t\t// Fix:    <p>{b}b</p><p>ccaa</p>\n\t\t\t//\n\t\t\t// Case 2: Range start is before merged node but not directly.\n\t\t\t//         Result should include all nodes that were in the original range.\n\t\t\t//\n\t\t\t// Before: <p>aa</p>{<p>cc</p><p>b}b</p>\n\t\t\t// Merge:  <p>aab}b</p>{<p>cc</p>\n\t\t\t// Fix:    <p>aa{bb</p><p>cc</p>}\n\t\t\t//\n\t\t\t//         The range is expanded by an additional `b` letter but it is better than dropping the whole `cc` paragraph.\n\t\t\t//\n\t\t\t// Case 3: Range start is directly before merged node.\n\t\t\t//         Resulting range should include only nodes from the merged element:\n\t\t\t//\n\t\t\t// Before: <p>aa</p>{<p>b}b</p><p>cc</p>\n\t\t\t// Merge:  <p>aab}b</p>{<p>cc</p>\n\t\t\t// Fix:    <p>aa{b}b</p><p>cc</p>\n\t\t\t//\n\n\t\t\tif ( operation.sourcePosition.isBefore( operation.targetPosition ) ) {\n\t\t\t\t// Case 1.\n\t\t\t\tstart = Position._createAt( end );\n\t\t\t\tstart.offset = 0;\n\t\t\t} else {\n\t\t\t\tif ( !operation.deletionPosition.isEqual( start ) ) {\n\t\t\t\t\t// Case 2.\n\t\t\t\t\tend = operation.deletionPosition;\n\t\t\t\t}\n\n\t\t\t\t// In both case 2 and 3 start is at the end of the merge-to element.\n\t\t\t\tstart = operation.targetPosition;\n\t\t\t}\n\n\t\t\treturn new Range( start, end );\n\t\t}\n\n\t\treturn new Range( start, end );\n\t}\n\n\t/**\n\t * Returns an array containing one or two {@link ~Range ranges} that are a result of transforming this\n\t * {@link ~Range range} by inserting `howMany` nodes at `insertPosition`. Two {@link ~Range ranges} are\n\t * returned if the insertion was inside this {@link ~Range range} and `spread` is set to `true`.\n\t *\n\t * Examples:\n\t *\n\t *\t\tlet range = model.createRange(\n\t *\t\t\tmodel.createPositionFromPath( root, [ 2, 7 ] ),\n\t *\t\t\tmodel.createPositionFromPath( root, [ 4, 0, 1 ] )\n\t *\t\t);\n\t *\t\tlet transformed = range._getTransformedByInsertion( model.createPositionFromPath( root, [ 1 ] ), 2 );\n\t *\t\t// transformed array has one range from [ 4, 7 ] to [ 6, 0, 1 ]\n\t *\n\t *\t\ttransformed = range._getTransformedByInsertion( model.createPositionFromPath( root, [ 4, 0, 0 ] ), 4 );\n\t *\t\t// transformed array has one range from [ 2, 7 ] to [ 4, 0, 5 ]\n\t *\n\t *\t\ttransformed = range._getTransformedByInsertion( model.createPositionFromPath( root, [ 3, 2 ] ), 4 );\n\t *\t\t// transformed array has one range, which is equal to original range\n\t *\n\t *\t\ttransformed = range._getTransformedByInsertion( model.createPositionFromPath( root, [ 3, 2 ] ), 4, true );\n\t *\t\t// transformed array has two ranges: from [ 2, 7 ] to [ 3, 2 ] and from [ 3, 6 ] to [ 4, 0, 1 ]\n\t *\n\t * @protected\n\t * @param {module:engine/model/position~Position} insertPosition Position where nodes are inserted.\n\t * @param {Number} howMany How many nodes are inserted.\n\t * @param {Boolean} [spread] Flag indicating whether this {~Range range} should be spread if insertion\n\t * was inside the range. Defaults to `false`.\n\t * @returns {Array.<module:engine/model/range~Range>} Result of the transformation.\n\t */\n\t_getTransformedByInsertion( insertPosition, howMany, spread = false ) {\n\t\tif ( spread && this.containsPosition( insertPosition ) ) {\n\t\t\t// Range has to be spread. The first part is from original start to the spread point.\n\t\t\t// The other part is from spread point to the original end, but transformed by\n\t\t\t// insertion to reflect insertion changes.\n\n\t\t\treturn [\n\t\t\t\tnew Range( this.start, insertPosition ),\n\t\t\t\tnew Range(\n\t\t\t\t\tinsertPosition.getShiftedBy( howMany ),\n\t\t\t\t\tthis.end._getTransformedByInsertion( insertPosition, howMany )\n\t\t\t\t)\n\t\t\t];\n\t\t} else {\n\t\t\tconst range = new Range( this.start, this.end );\n\n\t\t\trange.start = range.start._getTransformedByInsertion( insertPosition, howMany );\n\t\t\trange.end = range.end._getTransformedByInsertion( insertPosition, howMany );\n\n\t\t\treturn [ range ];\n\t\t}\n\t}\n\n\t/**\n\t * Returns an array containing {@link ~Range ranges} that are a result of transforming this\n\t * {@link ~Range range} by moving `howMany` nodes from `sourcePosition` to `targetPosition`.\n\t *\n\t * @protected\n\t * @param {module:engine/model/position~Position} sourcePosition Position from which nodes are moved.\n\t * @param {module:engine/model/position~Position} targetPosition Position to where nodes are moved.\n\t * @param {Number} howMany How many nodes are moved.\n\t * @param {Boolean} [spread=false] Whether the range should be spread if the move points inside the range.\n\t * @returns {Array.<module:engine/model/range~Range>} Result of the transformation.\n\t */\n\t_getTransformedByMove( sourcePosition, targetPosition, howMany, spread = false ) {\n\t\t// Special case for transforming a collapsed range. Just transform it like a position.\n\t\tif ( this.isCollapsed ) {\n\t\t\tconst newPos = this.start._getTransformedByMove( sourcePosition, targetPosition, howMany );\n\n\t\t\treturn [ new Range( newPos ) ];\n\t\t}\n\n\t\t// Special case for transformation when a part of the range is moved towards the range.\n\t\t//\n\t\t// Examples:\n\t\t//\n\t\t// <div><p>ab</p><p>c[d</p></div><p>e]f</p> --> <div><p>ab</p></div><p>c[d</p><p>e]f</p>\n\t\t// <p>e[f</p><div><p>a]b</p><p>cd</p></div> --> <p>e[f</p><p>a]b</p><div><p>cd</p></div>\n\t\t//\n\t\t// Without this special condition, the default algorithm leaves an \"artifact\" range from one of `differenceSet` parts:\n\t\t//\n\t\t// <div><p>ab</p><p>c[d</p></div><p>e]f</p> --> <div><p>ab</p>{</div>}<p>c[d</p><p>e]f</p>\n\t\t//\n\t\t// This special case is applied only if the range is to be kept together (not spread).\n\t\tconst moveRange = Range._createFromPositionAndShift( sourcePosition, howMany );\n\t\tconst insertPosition = targetPosition._getTransformedByDeletion( sourcePosition, howMany );\n\n\t\tif ( this.containsPosition( targetPosition ) && !spread ) {\n\t\t\tif ( moveRange.containsPosition( this.start ) || moveRange.containsPosition( this.end ) ) {\n\t\t\t\tconst start = this.start._getTransformedByMove( sourcePosition, targetPosition, howMany );\n\t\t\t\tconst end = this.end._getTransformedByMove( sourcePosition, targetPosition, howMany );\n\n\t\t\t\treturn [ new Range( start, end ) ];\n\t\t\t}\n\t\t}\n\n\t\t// Default algorithm.\n\t\tlet result;\n\n\t\tconst differenceSet = this.getDifference( moveRange );\n\t\tlet difference = null;\n\n\t\tconst common = this.getIntersection( moveRange );\n\n\t\tif ( differenceSet.length == 1 ) {\n\t\t\t// `moveRange` and this range may intersect but may be separate.\n\t\t\tdifference = new Range(\n\t\t\t\tdifferenceSet[ 0 ].start._getTransformedByDeletion( sourcePosition, howMany ),\n\t\t\t\tdifferenceSet[ 0 ].end._getTransformedByDeletion( sourcePosition, howMany )\n\t\t\t);\n\t\t} else if ( differenceSet.length == 2 ) {\n\t\t\t// `moveRange` is inside this range.\n\t\t\tdifference = new Range(\n\t\t\t\tthis.start,\n\t\t\t\tthis.end._getTransformedByDeletion( sourcePosition, howMany )\n\t\t\t);\n\t\t} // else, `moveRange` contains this range.\n\n\t\tif ( difference ) {\n\t\t\tresult = difference._getTransformedByInsertion( insertPosition, howMany, common !== null || spread );\n\t\t} else {\n\t\t\tresult = [];\n\t\t}\n\n\t\tif ( common ) {\n\t\t\tconst transformedCommon = new Range(\n\t\t\t\tcommon.start._getCombined( moveRange.start, insertPosition ),\n\t\t\t\tcommon.end._getCombined( moveRange.start, insertPosition )\n\t\t\t);\n\n\t\t\tif ( result.length == 2 ) {\n\t\t\t\tresult.splice( 1, 0, transformedCommon );\n\t\t\t} else {\n\t\t\t\tresult.push( transformedCommon );\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * Returns a copy of this range that is transformed by deletion of `howMany` nodes from `deletePosition`.\n\t *\n\t * If the deleted range is intersecting with the transformed range, the transformed range will be shrank.\n\t *\n\t * If the deleted range contains transformed range, `null` will be returned.\n\t *\n\t * @protected\n\t * @param {module:engine/model/position~Position} deletionPosition Position from which nodes are removed.\n\t * @param {Number} howMany How many nodes are removed.\n\t * @returns {module:engine/model/range~Range|null} Result of the transformation.\n\t */\n\t_getTransformedByDeletion( deletePosition, howMany ) {\n\t\tlet newStart = this.start._getTransformedByDeletion( deletePosition, howMany );\n\t\tlet newEnd = this.end._getTransformedByDeletion( deletePosition, howMany );\n\n\t\tif ( newStart == null && newEnd == null ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif ( newStart == null ) {\n\t\t\tnewStart = deletePosition;\n\t\t}\n\n\t\tif ( newEnd == null ) {\n\t\t\tnewEnd = deletePosition;\n\t\t}\n\n\t\treturn new Range( newStart, newEnd );\n\t}\n\n\t/**\n\t * Creates a new range, spreading from specified {@link module:engine/model/position~Position position} to a position moved by\n\t * given `shift`. If `shift` is a negative value, shifted position is treated as the beginning of the range.\n\t *\n\t * @protected\n\t * @param {module:engine/model/position~Position} position Beginning of the range.\n\t * @param {Number} shift How long the range should be.\n\t * @returns {module:engine/model/range~Range}\n\t */\n\tstatic _createFromPositionAndShift( position, shift ) {\n\t\tconst start = position;\n\t\tconst end = position.getShiftedBy( shift );\n\n\t\treturn shift > 0 ? new this( start, end ) : new this( end, start );\n\t}\n\n\t/**\n\t * Creates a range inside an {@link module:engine/model/element~Element element} which starts before the first child of\n\t * that element and ends after the last child of that element.\n\t *\n\t * @protected\n\t * @param {module:engine/model/element~Element} element Element which is a parent for the range.\n\t * @returns {module:engine/model/range~Range}\n\t */\n\tstatic _createIn( element ) {\n\t\treturn new this( Position._createAt( element, 0 ), Position._createAt( element, element.maxOffset ) );\n\t}\n\n\t/**\n\t * Creates a range that starts before given {@link module:engine/model/item~Item model item} and ends after it.\n\t *\n\t * @protected\n\t * @param {module:engine/model/item~Item} item\n\t * @returns {module:engine/model/range~Range}\n\t */\n\tstatic _createOn( item ) {\n\t\treturn this._createFromPositionAndShift( Position._createBefore( item ), item.offsetSize );\n\t}\n\n\t/**\n\t * Combines all ranges from the passed array into a one range. At least one range has to be passed.\n\t * Passed ranges must not have common parts.\n\t *\n\t * The first range from the array is a reference range. If other ranges start or end on the exactly same position where\n\t * the reference range, they get combined into one range.\n\t *\n\t *\t\t[  ][]  [    ][ ][             ][ ][]  [  ]  // Passed ranges, shown sorted\n\t *\t\t[    ]                                       // The result of the function if the first range was a reference range.\n\t *\t            [                           ]        // The result of the function if the third-to-seventh range was a reference range.\n\t *\t                                           [  ]  // The result of the function if the last range was a reference range.\n\t *\n\t * @param {Array.<module:engine/model/range~Range>} ranges Ranges to combine.\n\t * @returns {module:engine/model/range~Range} Combined range.\n\t */\n\tstatic _createFromRanges( ranges ) {\n\t\tif ( ranges.length === 0 ) {\n\t\t\t/**\n\t\t\t * At least one range has to be passed to\n\t\t\t * {@link module:engine/model/range~Range._createFromRanges `Range._createFromRanges()`}.\n\t\t\t *\n\t\t\t * @error range-create-from-ranges-empty-array\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'range-create-from-ranges-empty-array',\n\t\t\t\tnull\n\t\t\t);\n\t\t} else if ( ranges.length == 1 ) {\n\t\t\treturn ranges[ 0 ].clone();\n\t\t}\n\n\t\t// 1. Set the first range in `ranges` array as a reference range.\n\t\t// If we are going to return just a one range, one of the ranges need to be the reference one.\n\t\t// Other ranges will be stuck to that range, if possible.\n\t\tconst ref = ranges[ 0 ];\n\n\t\t// 2. Sort all the ranges so it's easier to process them.\n\t\tranges.sort( ( a, b ) => {\n\t\t\treturn a.start.isAfter( b.start ) ? 1 : -1;\n\t\t} );\n\n\t\t// 3. Check at which index the reference range is now.\n\t\tconst refIndex = ranges.indexOf( ref );\n\n\t\t// 4. At this moment we don't need the original range.\n\t\t// We are going to modify the result and we need to return a new instance of Range.\n\t\t// We have to create a copy of the reference range.\n\t\tconst result = new this( ref.start, ref.end );\n\n\t\t// 5. Ranges should be checked and glued starting from the range that is closest to the reference range.\n\t\t// Since ranges are sorted, start with the range with index that is closest to reference range index.\n\t\tif ( refIndex > 0 ) {\n\t\t\tfor ( let i = refIndex - 1; true; i++ ) {\n\t\t\t\tif ( ranges[ i ].end.isEqual( result.start ) ) {\n\t\t\t\t\tresult.start = Position._createAt( ranges[ i ].start );\n\t\t\t\t} else {\n\t\t\t\t\t// If ranges are not starting/ending at the same position there is no point in looking further.\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// 6. Ranges should be checked and glued starting from the range that is closest to the reference range.\n\t\t// Since ranges are sorted, start with the range with index that is closest to reference range index.\n\t\tfor ( let i = refIndex + 1; i < ranges.length; i++ ) {\n\t\t\tif ( ranges[ i ].start.isEqual( result.end ) ) {\n\t\t\t\tresult.end = Position._createAt( ranges[ i ].end );\n\t\t\t} else {\n\t\t\t\t// If ranges are not starting/ending at the same position there is no point in looking further.\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * Creates a `Range` instance from given plain object (i.e. parsed JSON string).\n\t *\n\t * @param {Object} json Plain object to be converted to `Range`.\n\t * @param {module:engine/model/document~Document} doc Document object that will be range owner.\n\t * @returns {module:engine/model/element~Element} `Range` instance created using given plain object.\n\t */\n\tstatic fromJSON( json, doc ) {\n\t\treturn new this( Position.fromJSON( json.start, doc ), Position.fromJSON( json.end, doc ) );\n\t}\n\n\t// @if CK_DEBUG_ENGINE // toString() {\n\t// @if CK_DEBUG_ENGINE // \treturn `${ this.root } [ ${ this.start.path.join( ', ' ) } ] - [ ${ this.end.path.join( ', ' ) } ]`;\n\t// @if CK_DEBUG_ENGINE // }\n\n\t// @if CK_DEBUG_ENGINE // log() {\n\t// @if CK_DEBUG_ENGINE // \tconsole.log( 'ModelPosition: ' + this );\n\t// @if CK_DEBUG_ENGINE // }\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/position\n */\n\nimport TreeWalker from './treewalker';\nimport compareArrays from '@ckeditor/ckeditor5-utils/src/comparearrays';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n\n// To check if component is loaded more than once.\nimport '@ckeditor/ckeditor5-utils/src/version';\n\n/**\n * Represents a position in the model tree.\n *\n * A position is represented by its {@link module:engine/model/position~Position#root} and\n * a {@link module:engine/model/position~Position#path} in that root.\n *\n * You can create position instances via its constructor or the `createPosition*()` factory methods of\n * {@link module:engine/model/model~Model} and {@link module:engine/model/writer~Writer}.\n *\n * **Note:** Position is based on offsets, not indexes. This means that a position between two text nodes\n * `foo` and `bar` has offset `3`, not `1`. See {@link module:engine/model/position~Position#path} for more information.\n *\n * Since a position in the model is represented by a {@link module:engine/model/position~Position#root position root} and\n * {@link module:engine/model/position~Position#path position path} it is possible to create positions placed in non-existing places.\n * This requirement is important for operational transformation algorithms.\n *\n * Also, {@link module:engine/model/operation/operation~Operation operations}\n * kept in the {@link module:engine/model/document~Document#history document history}\n * are storing positions (and ranges) which were correct when those operations were applied, but may not be correct\n * after the document has changed.\n *\n * When changes are applied to the model, it may also happen that {@link module:engine/model/position~Position#parent position parent}\n * will change even if position path has not changed. Keep in mind, that if a position leads to non-existing element,\n * {@link module:engine/model/position~Position#parent} and some other properties and methods will throw errors.\n *\n * In most cases, position with wrong path is caused by an error in code, but it is sometimes needed, as described above.\n */\nexport default class Position {\n\t/**\n\t * Creates a position.\n\t *\n\t * @param {module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment} root Root of the position.\n\t * @param {Array.<Number>} path Position path. See {@link module:engine/model/position~Position#path}.\n\t * @param {module:engine/model/position~PositionStickiness} [stickiness='toNone'] Position stickiness.\n\t * See {@link module:engine/model/position~PositionStickiness}.\n\t */\n\tconstructor( root, path, stickiness = 'toNone' ) {\n\t\tif ( !root.is( 'element' ) && !root.is( 'documentFragment' ) ) {\n\t\t\t/**\n\t\t\t * Position root is invalid.\n\t\t\t *\n\t\t\t * Positions can only be anchored in elements or document fragments.\n\t\t\t *\n\t\t\t * @error model-position-root-invalid\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'model-position-root-invalid',\n\t\t\t\troot\n\t\t\t);\n\t\t}\n\n\t\tif ( !( path instanceof Array ) || path.length === 0 ) {\n\t\t\t/**\n\t\t\t * Position path must be an array with at least one item.\n\t\t\t *\n\t\t\t * @error model-position-path-incorrect-format\n\t\t\t * @param path\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'model-position-path-incorrect-format',\n\t\t\t\troot,\n\t\t\t\t{ path }\n\t\t\t);\n\t\t}\n\n\t\t// Normalize the root and path when element (not root) is passed.\n\t\tif ( root.is( 'rootElement' ) ) {\n\t\t\tpath = path.slice();\n\t\t} else {\n\t\t\tpath = [ ...root.getPath(), ...path ];\n\t\t\troot = root.root;\n\t\t}\n\n\t\t/**\n\t\t * Root of the position path.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment}\n\t\t * module:engine/model/position~Position#root\n\t\t */\n\t\tthis.root = root;\n\n\t\t/**\n\t\t * Position of the node in the tree. **Path contains offsets, not indexes.**\n\t\t *\n\t\t * Position can be placed before, after or in a {@link module:engine/model/node~Node node} if that node has\n\t\t * {@link module:engine/model/node~Node#offsetSize} greater than `1`. Items in position path are\n\t\t * {@link module:engine/model/node~Node#startOffset starting offsets} of position ancestors, starting from direct root children,\n\t\t * down to the position offset in it's parent.\n\t\t *\n\t\t *\t\t ROOT\n\t\t *\t\t  |- P            before: [ 0 ]         after: [ 1 ]\n\t\t *\t\t  |- UL           before: [ 1 ]         after: [ 2 ]\n\t\t *\t\t     |- LI        before: [ 1, 0 ]      after: [ 1, 1 ]\n\t\t *\t\t     |  |- foo    before: [ 1, 0, 0 ]   after: [ 1, 0, 3 ]\n\t\t *\t\t     |- LI        before: [ 1, 1 ]      after: [ 1, 2 ]\n\t\t *\t\t        |- bar    before: [ 1, 1, 0 ]   after: [ 1, 1, 3 ]\n\t\t *\n\t\t * `foo` and `bar` are representing {@link module:engine/model/text~Text text nodes}. Since text nodes has offset size\n\t\t * greater than `1` you can place position offset between their start and end:\n\t\t *\n\t\t *\t\t ROOT\n\t\t *\t\t  |- P\n\t\t *\t\t  |- UL\n\t\t *\t\t     |- LI\n\t\t *\t\t     |  |- f^o|o  ^ has path: [ 1, 0, 1 ]   | has path: [ 1, 0, 2 ]\n\t\t *\t\t     |- LI\n\t\t *\t\t        |- b^a|r  ^ has path: [ 1, 1, 1 ]   | has path: [ 1, 1, 2 ]\n\t\t *\n\t\t * @readonly\n\t\t * @member {Array.<Number>} module:engine/model/position~Position#path\n\t\t */\n\t\tthis.path = path;\n\n\t\t/**\n\t\t * Position stickiness. See {@link module:engine/model/position~PositionStickiness}.\n\t\t *\n\t\t * @member {module:engine/model/position~PositionStickiness} module:engine/model/position~Position#stickiness\n\t\t */\n\t\tthis.stickiness = stickiness;\n\t}\n\n\t/**\n\t * Offset at which this position is located in its {@link module:engine/model/position~Position#parent parent}. It is equal\n\t * to the last item in position {@link module:engine/model/position~Position#path path}.\n\t *\n\t * @type {Number}\n\t */\n\tget offset() {\n\t\treturn this.path[ this.path.length - 1 ];\n\t}\n\n\tset offset( newOffset ) {\n\t\tthis.path[ this.path.length - 1 ] = newOffset;\n\t}\n\n\t/**\n\t * Parent element of this position.\n\t *\n\t * Keep in mind that `parent` value is calculated when the property is accessed.\n\t * If {@link module:engine/model/position~Position#path position path}\n\t * leads to a non-existing element, `parent` property will throw error.\n\t *\n\t * Also it is a good idea to cache `parent` property if it is used frequently in an algorithm (i.e. in a long loop).\n\t *\n\t * @readonly\n\t * @type {module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment}\n\t */\n\tget parent() {\n\t\tlet parent = this.root;\n\n\t\tfor ( let i = 0; i < this.path.length - 1; i++ ) {\n\t\t\tparent = parent.getChild( parent.offsetToIndex( this.path[ i ] ) );\n\n\t\t\tif ( !parent ) {\n\t\t\t\t/**\n\t\t\t\t * The position's path is incorrect. This means that a position does not point to\n\t\t\t\t * a correct place in the tree and hence, some of its methods and getters cannot work correctly.\n\t\t\t\t *\n\t\t\t\t * **Note**: Unlike DOM and view positions, in the model, the\n\t\t\t\t * {@link module:engine/model/position~Position#parent position's parent} is always an element or a document fragment.\n\t\t\t\t * The last offset in the {@link module:engine/model/position~Position#path position's path} is the point in this element\n\t\t\t\t * where this position points.\n\t\t\t\t *\n\t\t\t\t * Read more about model positions and offsets in\n\t\t\t\t * the {@glink framework/guides/architecture/editing-engine#indexes-and-offsets Editing engine architecture guide}.\n\t\t\t\t *\n\t\t\t\t * @error model-position-path-incorrect\n\t\t\t\t * @param {module:engine/model/position~Position} position The incorrect position.\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError( 'model-position-path-incorrect', this, { position: this } );\n\t\t\t}\n\t\t}\n\n\t\tif ( parent.is( '$text' ) ) {\n\t\t\tthrow new CKEditorError( 'model-position-path-incorrect', this, { position: this } );\n\t\t}\n\n\t\treturn parent;\n\t}\n\n\t/**\n\t * Position {@link module:engine/model/position~Position#offset offset} converted to an index in position's parent node. It is\n\t * equal to the {@link module:engine/model/node~Node#index index} of a node after this position. If position is placed\n\t * in text node, position index is equal to the index of that text node.\n\t *\n\t * @readonly\n\t * @type {Number}\n\t */\n\tget index() {\n\t\treturn this.parent.offsetToIndex( this.offset );\n\t}\n\n\t/**\n\t * Returns {@link module:engine/model/text~Text text node} instance in which this position is placed or `null` if this\n\t * position is not in a text node.\n\t *\n\t * @readonly\n\t * @type {module:engine/model/text~Text|null}\n\t */\n\tget textNode() {\n\t\treturn getTextNodeAtPosition( this, this.parent );\n\t}\n\n\t/**\n\t * Node directly after this position or `null` if this position is in text node.\n\t *\n\t * @readonly\n\t * @type {module:engine/model/node~Node|null}\n\t */\n\tget nodeAfter() {\n\t\t// Cache the parent and reuse for performance reasons. See #6579 and #6582.\n\t\tconst parent = this.parent;\n\n\t\treturn getNodeAfterPosition( this, parent, getTextNodeAtPosition( this, parent ) );\n\t}\n\n\t/**\n\t * Node directly before this position or `null` if this position is in text node.\n\t *\n\t * @readonly\n\t * @type {module:engine/model/node~Node|null}\n\t */\n\tget nodeBefore() {\n\t\t// Cache the parent and reuse for performance reasons. See #6579 and #6582.\n\t\tconst parent = this.parent;\n\n\t\treturn getNodeBeforePosition( this, parent, getTextNodeAtPosition( this, parent ) );\n\t}\n\n\t/**\n\t * Is `true` if position is at the beginning of its {@link module:engine/model/position~Position#parent parent}, `false` otherwise.\n\t *\n\t * @readonly\n\t * @type {Boolean}\n\t */\n\tget isAtStart() {\n\t\treturn this.offset === 0;\n\t}\n\n\t/**\n\t * Is `true` if position is at the end of its {@link module:engine/model/position~Position#parent parent}, `false` otherwise.\n\t *\n\t * @readonly\n\t * @type {Boolean}\n\t */\n\tget isAtEnd() {\n\t\treturn this.offset == this.parent.maxOffset;\n\t}\n\n\t/**\n\t * Checks whether this position is before or after given position.\n\t *\n\t * This method is safe to use it on non-existing positions (for example during operational transformation).\n\t *\n\t * @param {module:engine/model/position~Position} otherPosition Position to compare with.\n\t * @returns {module:engine/model/position~PositionRelation}\n\t */\n\tcompareWith( otherPosition ) {\n\t\tif ( this.root != otherPosition.root ) {\n\t\t\treturn 'different';\n\t\t}\n\n\t\tconst result = compareArrays( this.path, otherPosition.path );\n\n\t\tswitch ( result ) {\n\t\t\tcase 'same':\n\t\t\t\treturn 'same';\n\n\t\t\tcase 'prefix':\n\t\t\t\treturn 'before';\n\n\t\t\tcase 'extension':\n\t\t\t\treturn 'after';\n\n\t\t\tdefault:\n\t\t\t\treturn this.path[ result ] < otherPosition.path[ result ] ? 'before' : 'after';\n\t\t}\n\t}\n\n\t/**\n\t * Gets the farthest position which matches the callback using\n\t * {@link module:engine/model/treewalker~TreeWalker TreeWalker}.\n\t *\n\t * For example:\n\t *\n\t * \t\tgetLastMatchingPosition( value => value.type == 'text' );\n\t * \t\t// <paragraph>[]foo</paragraph> -> <paragraph>foo[]</paragraph>\n\t *\n\t * \t\tgetLastMatchingPosition( value => value.type == 'text', { direction: 'backward' } );\n\t * \t\t// <paragraph>foo[]</paragraph> -> <paragraph>[]foo</paragraph>\n\t *\n\t * \t\tgetLastMatchingPosition( value => false );\n\t * \t\t// Do not move the position.\n\t *\n\t * @param {Function} skip Callback function. Gets {@link module:engine/model/treewalker~TreeWalkerValue} and should\n\t * return `true` if the value should be skipped or `false` if not.\n\t * @param {Object} options Object with configuration options. See {@link module:engine/model/treewalker~TreeWalker}.\n\t *\n\t * @returns {module:engine/model/position~Position} The position after the last item which matches the `skip` callback test.\n\t */\n\tgetLastMatchingPosition( skip, options = {} ) {\n\t\toptions.startPosition = this;\n\n\t\tconst treeWalker = new TreeWalker( options );\n\t\ttreeWalker.skip( skip );\n\n\t\treturn treeWalker.position;\n\t}\n\n\t/**\n\t * Returns a path to this position's parent. Parent path is equal to position {@link module:engine/model/position~Position#path path}\n\t * but without the last item.\n\t *\n\t * This method is safe to use it on non-existing positions (for example during operational transformation).\n\t *\n\t * @returns {Array.<Number>} Path to the parent.\n\t */\n\tgetParentPath() {\n\t\treturn this.path.slice( 0, -1 );\n\t}\n\n\t/**\n\t * Returns ancestors array of this position, that is this position's parent and its ancestors.\n\t *\n\t * @returns {Array.<module:engine/model/item~Item>} Array with ancestors.\n\t */\n\tgetAncestors() {\n\t\tconst parent = this.parent;\n\n\t\tif ( parent.is( 'documentFragment' ) ) {\n\t\t\treturn [ parent ];\n\t\t} else {\n\t\t\treturn parent.getAncestors( { includeSelf: true } );\n\t\t}\n\t}\n\n\t/**\n\t * Returns the parent element of the given name. Returns null if the position is not inside the desired parent.\n\t *\n\t * @param {String} parentName The name of the parent element to find.\n\t * @returns {module:engine/model/element~Element|null}\n\t */\n\tfindAncestor( parentName ) {\n\t\tconst parent = this.parent;\n\n\t\tif ( parent.is( 'element' ) ) {\n\t\t\treturn parent.findAncestor( parentName, { includeSelf: true } );\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Returns the slice of two position {@link #path paths} which is identical. The {@link #root roots}\n\t * of these two paths must be identical.\n\t *\n\t * This method is safe to use it on non-existing positions (for example during operational transformation).\n\t *\n\t * @param {module:engine/model/position~Position} position The second position.\n\t * @returns {Array.<Number>} The common path.\n\t */\n\tgetCommonPath( position ) {\n\t\tif ( this.root != position.root ) {\n\t\t\treturn [];\n\t\t}\n\n\t\t// We find on which tree-level start and end have the lowest common ancestor\n\t\tconst cmp = compareArrays( this.path, position.path );\n\t\t// If comparison returned string it means that arrays are same.\n\t\tconst diffAt = ( typeof cmp == 'string' ) ? Math.min( this.path.length, position.path.length ) : cmp;\n\n\t\treturn this.path.slice( 0, diffAt );\n\t}\n\n\t/**\n\t * Returns an {@link module:engine/model/element~Element} or {@link module:engine/model/documentfragment~DocumentFragment}\n\t * which is a common ancestor of both positions. The {@link #root roots} of these two positions must be identical.\n\t *\n\t * @param {module:engine/model/position~Position} position The second position.\n\t * @returns {module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment|null}\n\t */\n\tgetCommonAncestor( position ) {\n\t\tconst ancestorsA = this.getAncestors();\n\t\tconst ancestorsB = position.getAncestors();\n\n\t\tlet i = 0;\n\n\t\twhile ( ancestorsA[ i ] == ancestorsB[ i ] && ancestorsA[ i ] ) {\n\t\t\ti++;\n\t\t}\n\n\t\treturn i === 0 ? null : ancestorsA[ i - 1 ];\n\t}\n\n\t/**\n\t * Returns a new instance of `Position`, that has same {@link #parent parent} but it's offset\n\t * is shifted by `shift` value (can be a negative value).\n\t *\n\t * This method is safe to use it on non-existing positions (for example during operational transformation).\n\t *\n\t * @param {Number} shift Offset shift. Can be a negative value.\n\t * @returns {module:engine/model/position~Position} Shifted position.\n\t */\n\tgetShiftedBy( shift ) {\n\t\tconst shifted = this.clone();\n\n\t\tconst offset = shifted.offset + shift;\n\t\tshifted.offset = offset < 0 ? 0 : offset;\n\n\t\treturn shifted;\n\t}\n\n\t/**\n\t * Checks whether this position is after given position.\n\t *\n\t * This method is safe to use it on non-existing positions (for example during operational transformation).\n\t *\n\t * @see module:engine/model/position~Position#isBefore\n\t * @param {module:engine/model/position~Position} otherPosition Position to compare with.\n\t * @returns {Boolean} True if this position is after given position.\n\t */\n\tisAfter( otherPosition ) {\n\t\treturn this.compareWith( otherPosition ) == 'after';\n\t}\n\n\t/**\n\t * Checks whether this position is before given position.\n\t *\n\t * **Note:** watch out when using negation of the value returned by this method, because the negation will also\n\t * be `true` if positions are in different roots and you might not expect this. You should probably use\n\t * `a.isAfter( b ) || a.isEqual( b )` or `!a.isBefore( p ) && a.root == b.root` in most scenarios. If your\n\t * condition uses multiple `isAfter` and `isBefore` checks, build them so they do not use negated values, i.e.:\n\t *\n\t *\t\tif ( a.isBefore( b ) && c.isAfter( d ) ) {\n\t *\t\t\t// do A.\n\t *\t\t} else {\n\t *\t\t\t// do B.\n\t *\t\t}\n\t *\n\t * or, if you have only one if-branch:\n\t *\n\t *\t\tif ( !( a.isBefore( b ) && c.isAfter( d ) ) {\n\t *\t\t\t// do B.\n\t *\t\t}\n\t *\n\t * rather than:\n\t *\n\t *\t\tif ( !a.isBefore( b ) || && !c.isAfter( d ) ) {\n\t *\t\t\t// do B.\n\t *\t\t} else {\n\t *\t\t\t// do A.\n\t *\t\t}\n\t *\n\t * This method is safe to use it on non-existing positions (for example during operational transformation).\n\t *\n\t * @param {module:engine/model/position~Position} otherPosition Position to compare with.\n\t * @returns {Boolean} True if this position is before given position.\n\t */\n\tisBefore( otherPosition ) {\n\t\treturn this.compareWith( otherPosition ) == 'before';\n\t}\n\n\t/**\n\t * Checks whether this position is equal to given position.\n\t *\n\t * This method is safe to use it on non-existing positions (for example during operational transformation).\n\t *\n\t * @param {module:engine/model/position~Position} otherPosition Position to compare with.\n\t * @returns {Boolean} True if positions are same.\n\t */\n\tisEqual( otherPosition ) {\n\t\treturn this.compareWith( otherPosition ) == 'same';\n\t}\n\n\t/**\n\t * Checks whether this position is touching given position. Positions touch when there are no text nodes\n\t * or empty nodes in a range between them. Technically, those positions are not equal but in many cases\n\t * they are very similar or even indistinguishable.\n\t *\n\t * @param {module:engine/model/position~Position} otherPosition Position to compare with.\n\t * @returns {Boolean} True if positions touch.\n\t */\n\tisTouching( otherPosition ) {\n\t\tlet left = null;\n\t\tlet right = null;\n\t\tconst compare = this.compareWith( otherPosition );\n\n\t\tswitch ( compare ) {\n\t\t\tcase 'same':\n\t\t\t\treturn true;\n\n\t\t\tcase 'before':\n\t\t\t\tleft = Position._createAt( this );\n\t\t\t\tright = Position._createAt( otherPosition );\n\t\t\t\tbreak;\n\n\t\t\tcase 'after':\n\t\t\t\tleft = Position._createAt( otherPosition );\n\t\t\t\tright = Position._createAt( this );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\treturn false;\n\t\t}\n\n\t\t// Cached for optimization purposes.\n\t\tlet leftParent = left.parent;\n\n\t\twhile ( left.path.length + right.path.length ) {\n\t\t\tif ( left.isEqual( right ) ) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif ( left.path.length > right.path.length ) {\n\t\t\t\tif ( left.offset !== leftParent.maxOffset ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tleft.path = left.path.slice( 0, -1 );\n\t\t\t\tleftParent = leftParent.parent;\n\t\t\t\tleft.offset++;\n\t\t\t} else {\n\t\t\t\tif ( right.offset !== 0 ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tright.path = right.path.slice( 0, -1 );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Checks whether this object is of the given.\n\t *\n\t *\t\tposition.is( 'position' ); // -> true\n\t *\t\tposition.is( 'model:position' ); // -> true\n\t *\n\t *\t\tposition.is( 'view:position' ); // -> false\n\t *\t\tposition.is( 'documentSelection' ); // -> false\n\t *\n\t * {@link module:engine/model/node~Node#is Check the entire list of model objects} which implement the `is()` method.\n\t *\n\t * @param {String} type\n\t * @returns {Boolean}\n\t */\n\tis( type ) {\n\t\treturn type === 'position' || type === 'model:position';\n\t}\n\n\t/**\n\t * Checks if two positions are in the same parent.\n\t *\n\t * This method is safe to use it on non-existing positions (for example during operational transformation).\n\t *\n\t * @param {module:engine/model/position~Position} position Position to compare with.\n\t * @returns {Boolean} `true` if positions have the same parent, `false` otherwise.\n\t */\n\thasSameParentAs( position ) {\n\t\tif ( this.root !== position.root ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst thisParentPath = this.getParentPath();\n\t\tconst posParentPath = position.getParentPath();\n\n\t\treturn compareArrays( thisParentPath, posParentPath ) == 'same';\n\t}\n\n\t/**\n\t * Returns a copy of this position that is transformed by given `operation`.\n\t *\n\t * The new position's parameters are updated accordingly to the effect of the `operation`.\n\t *\n\t * For example, if `n` nodes are inserted before the position, the returned position {@link ~Position#offset} will be\n\t * increased by `n`. If the position was in a merged element, it will be accordingly moved to the new element, etc.\n\t *\n\t * This method is safe to use it on non-existing positions (for example during operational transformation).\n\t *\n\t * @param {module:engine/model/operation/operation~Operation} operation Operation to transform by.\n\t * @returns {module:engine/model/position~Position} Transformed position.\n\t */\n\tgetTransformedByOperation( operation ) {\n\t\tlet result;\n\n\t\tswitch ( operation.type ) {\n\t\t\tcase 'insert':\n\t\t\t\tresult = this._getTransformedByInsertOperation( operation );\n\t\t\t\tbreak;\n\t\t\tcase 'move':\n\t\t\tcase 'remove':\n\t\t\tcase 'reinsert':\n\t\t\t\tresult = this._getTransformedByMoveOperation( operation );\n\t\t\t\tbreak;\n\t\t\tcase 'split':\n\t\t\t\tresult = this._getTransformedBySplitOperation( operation );\n\t\t\t\tbreak;\n\t\t\tcase 'merge':\n\t\t\t\tresult = this._getTransformedByMergeOperation( operation );\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tresult = Position._createAt( this );\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * Returns a copy of this position transformed by an insert operation.\n\t *\n\t * @protected\n\t * @param {module:engine/model/operation/insertoperation~InsertOperation} operation\n\t * @returns {module:engine/model/position~Position}\n\t */\n\t_getTransformedByInsertOperation( operation ) {\n\t\treturn this._getTransformedByInsertion( operation.position, operation.howMany );\n\t}\n\n\t/**\n\t * Returns a copy of this position transformed by a move operation.\n\t *\n\t * @protected\n\t * @param {module:engine/model/operation/moveoperation~MoveOperation} operation\n\t * @returns {module:engine/model/position~Position}\n\t */\n\t_getTransformedByMoveOperation( operation ) {\n\t\treturn this._getTransformedByMove( operation.sourcePosition, operation.targetPosition, operation.howMany );\n\t}\n\n\t/**\n\t * Returns a copy of this position transformed by a split operation.\n\t *\n\t * @protected\n\t * @param {module:engine/model/operation/splitoperation~SplitOperation} operation\n\t * @returns {module:engine/model/position~Position}\n\t */\n\t_getTransformedBySplitOperation( operation ) {\n\t\tconst movedRange = operation.movedRange;\n\n\t\tconst isContained = movedRange.containsPosition( this ) ||\n\t\t\t( movedRange.start.isEqual( this ) && this.stickiness == 'toNext' );\n\n\t\tif ( isContained ) {\n\t\t\treturn this._getCombined( operation.splitPosition, operation.moveTargetPosition );\n\t\t} else {\n\t\t\tif ( operation.graveyardPosition ) {\n\t\t\t\treturn this._getTransformedByMove( operation.graveyardPosition, operation.insertionPosition, 1 );\n\t\t\t} else {\n\t\t\t\treturn this._getTransformedByInsertion( operation.insertionPosition, 1 );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Returns a copy of this position transformed by merge operation.\n\t *\n\t * @protected\n\t * @param {module:engine/model/operation/mergeoperation~MergeOperation} operation\n\t * @returns {module:engine/model/position~Position}\n\t */\n\t_getTransformedByMergeOperation( operation ) {\n\t\tconst movedRange = operation.movedRange;\n\t\tconst isContained = movedRange.containsPosition( this ) || movedRange.start.isEqual( this );\n\n\t\tlet pos;\n\n\t\tif ( isContained ) {\n\t\t\tpos = this._getCombined( operation.sourcePosition, operation.targetPosition );\n\n\t\t\tif ( operation.sourcePosition.isBefore( operation.targetPosition ) ) {\n\t\t\t\t// Above happens during OT when the merged element is moved before the merged-to element.\n\t\t\t\tpos = pos._getTransformedByDeletion( operation.deletionPosition, 1 );\n\t\t\t}\n\t\t} else if ( this.isEqual( operation.deletionPosition ) ) {\n\t\t\tpos = Position._createAt( operation.deletionPosition );\n\t\t} else {\n\t\t\tpos = this._getTransformedByMove( operation.deletionPosition, operation.graveyardPosition, 1 );\n\t\t}\n\n\t\treturn pos;\n\t}\n\n\t/**\n\t * Returns a copy of this position that is updated by removing `howMany` nodes starting from `deletePosition`.\n\t * It may happen that this position is in a removed node. If that is the case, `null` is returned instead.\n\t *\n\t * @protected\n\t * @param {module:engine/model/position~Position} deletePosition Position before the first removed node.\n\t * @param {Number} howMany How many nodes are removed.\n\t * @returns {module:engine/model/position~Position|null} Transformed position or `null`.\n\t */\n\t_getTransformedByDeletion( deletePosition, howMany ) {\n\t\tconst transformed = Position._createAt( this );\n\n\t\t// This position can't be affected if deletion was in a different root.\n\t\tif ( this.root != deletePosition.root ) {\n\t\t\treturn transformed;\n\t\t}\n\n\t\tif ( compareArrays( deletePosition.getParentPath(), this.getParentPath() ) == 'same' ) {\n\t\t\t// If nodes are removed from the node that is pointed by this position...\n\t\t\tif ( deletePosition.offset < this.offset ) {\n\t\t\t\t// And are removed from before an offset of that position...\n\t\t\t\tif ( deletePosition.offset + howMany > this.offset ) {\n\t\t\t\t\t// Position is in removed range, it's no longer in the tree.\n\t\t\t\t\treturn null;\n\t\t\t\t} else {\n\t\t\t\t\t// Decrement the offset accordingly.\n\t\t\t\t\ttransformed.offset -= howMany;\n\t\t\t\t}\n\t\t\t}\n\t\t} else if ( compareArrays( deletePosition.getParentPath(), this.getParentPath() ) == 'prefix' ) {\n\t\t\t// If nodes are removed from a node that is on a path to this position...\n\t\t\tconst i = deletePosition.path.length - 1;\n\n\t\t\tif ( deletePosition.offset <= this.path[ i ] ) {\n\t\t\t\t// And are removed from before next node of that path...\n\t\t\t\tif ( deletePosition.offset + howMany > this.path[ i ] ) {\n\t\t\t\t\t// If the next node of that path is removed return null\n\t\t\t\t\t// because the node containing this position got removed.\n\t\t\t\t\treturn null;\n\t\t\t\t} else {\n\t\t\t\t\t// Otherwise, decrement index on that path.\n\t\t\t\t\ttransformed.path[ i ] -= howMany;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn transformed;\n\t}\n\n\t/**\n\t * Returns a copy of this position that is updated by inserting `howMany` nodes at `insertPosition`.\n\t *\n\t * @protected\n\t * @param {module:engine/model/position~Position} insertPosition Position where nodes are inserted.\n\t * @param {Number} howMany How many nodes are inserted.\n\t * @returns {module:engine/model/position~Position} Transformed position.\n\t */\n\t_getTransformedByInsertion( insertPosition, howMany ) {\n\t\tconst transformed = Position._createAt( this );\n\n\t\t// This position can't be affected if insertion was in a different root.\n\t\tif ( this.root != insertPosition.root ) {\n\t\t\treturn transformed;\n\t\t}\n\n\t\tif ( compareArrays( insertPosition.getParentPath(), this.getParentPath() ) == 'same' ) {\n\t\t\t// If nodes are inserted in the node that is pointed by this position...\n\t\t\tif ( insertPosition.offset < this.offset || ( insertPosition.offset == this.offset && this.stickiness != 'toPrevious' ) ) {\n\t\t\t\t// And are inserted before an offset of that position...\n\t\t\t\t// \"Push\" this positions offset.\n\t\t\t\ttransformed.offset += howMany;\n\t\t\t}\n\t\t} else if ( compareArrays( insertPosition.getParentPath(), this.getParentPath() ) == 'prefix' ) {\n\t\t\t// If nodes are inserted in a node that is on a path to this position...\n\t\t\tconst i = insertPosition.path.length - 1;\n\n\t\t\tif ( insertPosition.offset <= this.path[ i ] ) {\n\t\t\t\t// And are inserted before next node of that path...\n\t\t\t\t// \"Push\" the index on that path.\n\t\t\t\ttransformed.path[ i ] += howMany;\n\t\t\t}\n\t\t}\n\n\t\treturn transformed;\n\t}\n\n\t/**\n\t * Returns a copy of this position that is updated by moving `howMany` nodes from `sourcePosition` to `targetPosition`.\n\t *\n\t * @protected\n\t * @param {module:engine/model/position~Position} sourcePosition Position before the first element to move.\n\t * @param {module:engine/model/position~Position} targetPosition Position where moved elements will be inserted.\n\t * @param {Number} howMany How many consecutive nodes to move, starting from `sourcePosition`.\n\t * @returns {module:engine/model/position~Position} Transformed position.\n\t */\n\t_getTransformedByMove( sourcePosition, targetPosition, howMany ) {\n\t\t// Update target position, as it could be affected by nodes removal.\n\t\ttargetPosition = targetPosition._getTransformedByDeletion( sourcePosition, howMany );\n\n\t\tif ( sourcePosition.isEqual( targetPosition ) ) {\n\t\t\t// If `targetPosition` is equal to `sourcePosition` this isn't really any move. Just return position as it is.\n\t\t\treturn Position._createAt( this );\n\t\t}\n\n\t\t// Moving a range removes nodes from their original position. We acknowledge this by proper transformation.\n\t\tconst transformed = this._getTransformedByDeletion( sourcePosition, howMany );\n\n\t\tconst isMoved = transformed === null ||\n\t\t\t( sourcePosition.isEqual( this ) && this.stickiness == 'toNext' ) ||\n\t\t\t( sourcePosition.getShiftedBy( howMany ).isEqual( this ) && this.stickiness == 'toPrevious' );\n\n\t\tif ( isMoved ) {\n\t\t\t// This position is inside moved range (or sticks to it).\n\t\t\t// In this case, we calculate a combination of this position, move source position and target position.\n\t\t\treturn this._getCombined( sourcePosition, targetPosition );\n\t\t} else {\n\t\t\t// This position is not inside a removed range.\n\t\t\t//\n\t\t\t// In next step, we simply reflect inserting `howMany` nodes, which might further affect the position.\n\t\t\treturn transformed._getTransformedByInsertion( targetPosition, howMany );\n\t\t}\n\t}\n\n\t/**\n\t * Returns a new position that is a combination of this position and given positions.\n\t *\n\t * The combined position is a copy of this position transformed by moving a range starting at `source` position\n\t * to the `target` position. It is expected that this position is inside the moved range.\n\t *\n\t * Example:\n\t *\n\t *\t\tlet original = model.createPositionFromPath( root, [ 2, 3, 1 ] );\n\t *\t\tlet source = model.createPositionFromPath( root, [ 2, 2 ] );\n\t *\t\tlet target = model.createPositionFromPath( otherRoot, [ 1, 1, 3 ] );\n\t *\t\toriginal._getCombined( source, target ); // path is [ 1, 1, 4, 1 ], root is `otherRoot`\n\t *\n\t * Explanation:\n\t *\n\t * We have a position `[ 2, 3, 1 ]` and move some nodes from `[ 2, 2 ]` to `[ 1, 1, 3 ]`. The original position\n\t * was inside moved nodes and now should point to the new place. The moved nodes will be after\n\t * positions `[ 1, 1, 3 ]`, `[ 1, 1, 4 ]`, `[ 1, 1, 5 ]`. Since our position was in the second moved node,\n\t * the transformed position will be in a sub-tree of a node at `[ 1, 1, 4 ]`. Looking at original path, we\n\t * took care of `[ 2, 3 ]` part of it. Now we have to add the rest of the original path to the transformed path.\n\t * Finally, the transformed position will point to `[ 1, 1, 4, 1 ]`.\n\t *\n\t * @protected\n\t * @param {module:engine/model/position~Position} source Beginning of the moved range.\n\t * @param {module:engine/model/position~Position} target Position where the range is moved.\n\t * @returns {module:engine/model/position~Position} Combined position.\n\t */\n\t_getCombined( source, target ) {\n\t\tconst i = source.path.length - 1;\n\n\t\t// The first part of a path to combined position is a path to the place where nodes were moved.\n\t\tconst combined = Position._createAt( target );\n\t\tcombined.stickiness = this.stickiness;\n\n\t\t// Then we have to update the rest of the path.\n\n\t\t// Fix the offset because this position might be after `from` position and we have to reflect that.\n\t\tcombined.offset = combined.offset + this.path[ i ] - source.offset;\n\n\t\t// Then, add the rest of the path.\n\t\t// If this position is at the same level as `from` position nothing will get added.\n\t\tcombined.path = [ ...combined.path, ...this.path.slice( i + 1 ) ];\n\n\t\treturn combined;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\ttoJSON() {\n\t\treturn {\n\t\t\troot: this.root.toJSON(),\n\t\t\tpath: Array.from( this.path ),\n\t\t\tstickiness: this.stickiness\n\t\t};\n\t}\n\n\t/**\n\t * Returns a new position that is equal to current position.\n\t *\n\t * @returns {module:engine/model/position~Position}\n\t */\n\tclone() {\n\t\treturn new this.constructor( this.root, this.path, this.stickiness );\n\t}\n\n\t/**\n\t * Creates position at the given location. The location can be specified as:\n\t *\n\t * * a {@link module:engine/model/position~Position position},\n\t * * parent element and offset (offset defaults to `0`),\n\t * * parent element and `'end'` (sets position at the end of that element),\n\t * * {@link module:engine/model/item~Item model item} and `'before'` or `'after'` (sets position before or after given model item).\n\t *\n\t * This method is a shortcut to other factory methods such as:\n\t *\n\t * * {@link module:engine/model/position~Position._createBefore},\n\t * * {@link module:engine/model/position~Position._createAfter}.\n\t *\n\t * @param {module:engine/model/item~Item|module:engine/model/position~Position} itemOrPosition\n\t * @param {Number|'end'|'before'|'after'} [offset] Offset or one of the flags. Used only when the\n\t * first parameter is a {@link module:engine/model/item~Item model item}.\n\t * @param {module:engine/model/position~PositionStickiness} [stickiness='toNone'] Position stickiness. Used only when the\n\t * first parameter is a {@link module:engine/model/item~Item model item}.\n\t * @protected\n\t */\n\tstatic _createAt( itemOrPosition, offset, stickiness = 'toNone' ) {\n\t\tif ( itemOrPosition instanceof Position ) {\n\t\t\treturn new Position( itemOrPosition.root, itemOrPosition.path, itemOrPosition.stickiness );\n\t\t} else {\n\t\t\tconst node = itemOrPosition;\n\n\t\t\tif ( offset == 'end' ) {\n\t\t\t\toffset = node.maxOffset;\n\t\t\t} else if ( offset == 'before' ) {\n\t\t\t\treturn this._createBefore( node, stickiness );\n\t\t\t} else if ( offset == 'after' ) {\n\t\t\t\treturn this._createAfter( node, stickiness );\n\t\t\t} else if ( offset !== 0 && !offset ) {\n\t\t\t\t/**\n\t\t\t\t * {@link module:engine/model/model~Model#createPositionAt `Model#createPositionAt()`}\n\t\t\t\t * requires the offset to be specified when the first parameter is a model item.\n\t\t\t\t *\n\t\t\t\t * @error model-createpositionat-offset-required\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError( 'model-createpositionat-offset-required', [ this, itemOrPosition ] );\n\t\t\t}\n\n\t\t\tif ( !node.is( 'element' ) && !node.is( 'documentFragment' ) ) {\n\t\t\t\t/**\n\t\t\t\t * Position parent have to be a model element or model document fragment.\n\t\t\t\t *\n\t\t\t\t * @error model-position-parent-incorrect\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError(\n\t\t\t\t\t'model-position-parent-incorrect',\n\t\t\t\t\t[ this, itemOrPosition ]\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tconst path = node.getPath();\n\n\t\t\tpath.push( offset );\n\n\t\t\treturn new this( node.root, path, stickiness );\n\t\t}\n\t}\n\n\t/**\n\t * Creates a new position, after given {@link module:engine/model/item~Item model item}.\n\t *\n\t * @param {module:engine/model/item~Item} item Item after which the position should be placed.\n\t * @param {module:engine/model/position~PositionStickiness} [stickiness='toNone'] Position stickiness.\n\t * @returns {module:engine/model/position~Position}\n\t * @protected\n\t */\n\tstatic _createAfter( item, stickiness ) {\n\t\tif ( !item.parent ) {\n\t\t\t/**\n\t\t\t * You can not make a position after a root element.\n\t\t\t *\n\t\t\t * @error model-position-after-root\n\t\t\t * @param {module:engine/model/item~Item} root\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'model-position-after-root',\n\t\t\t\t[ this, item ],\n\t\t\t\t{ root: item }\n\t\t\t);\n\t\t}\n\n\t\treturn this._createAt( item.parent, item.endOffset, stickiness );\n\t}\n\n\t/**\n\t * Creates a new position, before the given {@link module:engine/model/item~Item model item}.\n\t *\n\t * @param {module:engine/model/item~Item} item Item before which the position should be placed.\n\t * @param {module:engine/model/position~PositionStickiness} [stickiness='toNone'] Position stickiness.\n\t * @returns {module:engine/model/position~Position}\n\t * @protected\n\t */\n\tstatic _createBefore( item, stickiness ) {\n\t\tif ( !item.parent ) {\n\t\t\t/**\n\t\t\t * You can not make a position before a root element.\n\t\t\t *\n\t\t\t * @error model-position-before-root\n\t\t\t * @param {module:engine/model/item~Item} root\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'model-position-before-root',\n\t\t\t\titem,\n\t\t\t\t{ root: item }\n\t\t\t);\n\t\t}\n\n\t\treturn this._createAt( item.parent, item.startOffset, stickiness );\n\t}\n\n\t/**\n\t * Creates a `Position` instance from given plain object (i.e. parsed JSON string).\n\t *\n\t * @param {Object} json Plain object to be converted to `Position`.\n\t * @param {module:engine/model/document~Document} doc Document object that will be position owner.\n\t * @returns {module:engine/model/position~Position} `Position` instance created using given plain object.\n\t */\n\tstatic fromJSON( json, doc ) {\n\t\tif ( json.root === '$graveyard' ) {\n\t\t\tconst pos = new Position( doc.graveyard, json.path );\n\t\t\tpos.stickiness = json.stickiness;\n\n\t\t\treturn pos;\n\t\t}\n\n\t\tif ( !doc.getRoot( json.root ) ) {\n\t\t\t/**\n\t\t\t * Cannot create position for document. Root with specified name does not exist.\n\t\t\t *\n\t\t\t * @error model-position-fromjson-no-root\n\t\t\t * @param {String} rootName\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'model-position-fromjson-no-root',\n\t\t\t\tdoc,\n\t\t\t\t{ rootName: json.root }\n\t\t\t);\n\t\t}\n\n\t\treturn new Position( doc.getRoot( json.root ), json.path, json.stickiness );\n\t}\n\n\t// @if CK_DEBUG_ENGINE // toString() {\n\t// @if CK_DEBUG_ENGINE // \treturn `${ this.root } [ ${ this.path.join( ', ' ) } ]`;\n\t// @if CK_DEBUG_ENGINE // }\n\n\t// @if CK_DEBUG_ENGINE // log() {\n\t// @if CK_DEBUG_ENGINE // \tconsole.log( 'ModelPosition: ' + this );\n\t// @if CK_DEBUG_ENGINE // }\n}\n\n/**\n * A flag indicating whether this position is `'before'` or `'after'` or `'same'` as given position.\n * If positions are in different roots `'different'` flag is returned.\n *\n * @typedef {String} module:engine/model/position~PositionRelation\n */\n\n/**\n * Represents how position is \"sticking\" with neighbour nodes. Used to define how position should be transformed (moved)\n * in edge cases. Possible values: `'toNone'`, `'toNext'`, `'toPrevious'`.\n *\n * Examples:\n *\n *\t\tInsert. Position is at | and nodes are inserted at the same position, marked as ^:\n *\n *\t\t- sticks to none:           <p>f^|oo</p>  ->  <p>fbar|oo</p>\n *\t\t- sticks to next node:      <p>f^|oo</p>  ->  <p>fbar|oo</p>\n *\t\t- sticks to previous node:  <p>f|^oo</p>  ->  <p>f|baroo</p>\n *\n *\n *\t\tMove. Position is at | and range [oo] is moved to position ^:\n *\n *\t\t- sticks to none:           <p>f|[oo]</p><p>b^ar</p>  ->  <p>f|</p><p>booar</p>\n *\t\t- sticks to none:           <p>f[oo]|</p><p>b^ar</p>  ->  <p>f|</p><p>booar</p>\n *\n *\t\t- sticks to next node:      <p>f|[oo]</p><p>b^ar</p>  ->  <p>f</p><p>b|ooar</p>\n *\t\t- sticks to next node:      <p>f[oo]|</p><p>b^ar</p>  ->  <p>f|</p><p>booar</p>\n *\n *\t\t- sticks to previous node:  <p>f|[oo]</p><p>b^ar</p>  ->  <p>f|</p><p>booar</p>\n *\t\t- sticks to previous node:  <p>f[oo]|</p><p>b^ar</p>  ->  <p>f</p><p>boo|ar</p>\n *\n * @typedef {String} module:engine/model/position~PositionStickiness\n */\n\n/**\n * Returns a text node at the given position.\n *\n * This is a helper function optimized to reuse the position parent instance for performance reasons.\n *\n * Normally, you should use {@link module:engine/model/position~Position#textNode `Position#textNode`}.\n * If you start hitting performance issues with {@link module:engine/model/position~Position#parent `Position#parent`}\n * check if your algorithm does not access it multiple times (which can happen directly or indirectly via other position properties).\n *\n * See https://github.com/ckeditor/ckeditor5/issues/6579.\n *\n * See also:\n *\n * * {@link module:engine/model/position~getNodeAfterPosition}\n * * {@link module:engine/model/position~getNodeBeforePosition}\n *\n * @param {module:engine/model/position~Position} position\n * @param {module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment} positionParent The parent of the\n * given position.\n * @returns {module:engine/model/text~Text|null}\n */\nexport function getTextNodeAtPosition( position, positionParent ) {\n\tconst node = positionParent.getChild( positionParent.offsetToIndex( position.offset ) );\n\n\tif ( node && node.is( '$text' ) && node.startOffset < position.offset ) {\n\t\treturn node;\n\t}\n\n\treturn null;\n}\n\n/**\n * Returns the node after the given position.\n *\n * This is a helper function optimized to reuse the position parent instance and the calculation of the text node at the\n * specific position for performance reasons.\n *\n * Normally, you should use {@link module:engine/model/position~Position#nodeAfter `Position#nodeAfter`}.\n * If you start hitting performance issues with {@link module:engine/model/position~Position#parent `Position#parent`} and/or\n * {@link module:engine/model/position~Position#textNode `Position#textNode`}\n * check if your algorithm does not access those properties multiple times\n * (which can happen directly or indirectly via other position properties).\n *\n * See https://github.com/ckeditor/ckeditor5/issues/6579 and https://github.com/ckeditor/ckeditor5/issues/6582.\n *\n * See also:\n *\n * * {@link module:engine/model/position~getTextNodeAtPosition}\n * * {@link module:engine/model/position~getNodeBeforePosition}\n *\n * @param {module:engine/model/position~Position} position\n * @param {module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment} positionParent The parent of the\n * given position.\n * @param {module:engine/model/text~Text|null} textNode Text node at the given position.\n * @returns {module:engine/model/node~Node|null}\n */\nexport function getNodeAfterPosition( position, positionParent, textNode ) {\n\tif ( textNode !== null ) {\n\t\treturn null;\n\t}\n\n\treturn positionParent.getChild( positionParent.offsetToIndex( position.offset ) );\n}\n\n/**\n * Returns the node before the given position.\n *\n * Refer to {@link module:engine/model/position~getNodeBeforePosition} for documentation on when to use this util method.\n *\n * See also:\n *\n * * {@link module:engine/model/position~getTextNodeAtPosition}\n * * {@link module:engine/model/position~getNodeAfterPosition}\n *\n * @param {module:engine/model/position~Position} position\n * @param {module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment} positionParent The parent of the\n * given position.\n * @param {module:engine/model/text~Text|null} textNode Text node at the given position.\n * @returns {module:engine/model/node~Node|null}\n */\nexport function getNodeBeforePosition( position, positionParent, textNode ) {\n\tif ( textNode !== null ) {\n\t\treturn null;\n\t}\n\n\treturn positionParent.getChild( positionParent.offsetToIndex( position.offset ) - 1 );\n}\n","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","module.exports = require(\"regenerator-runtime\");\n","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","import superPropBase from \"@babel/runtime/helpers/esm/superPropBase\";\nexport default function _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}","import getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nexport default function _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/mix\n */\n\n/**\n * Copies enumerable properties and symbols from the objects given as 2nd+ parameters to the\n * prototype of first object (a constructor).\n *\n *\t\tclass Editor {\n *\t\t\t...\n *\t\t}\n *\n *\t\tconst SomeMixin = {\n *\t\t\ta() {\n *\t\t\t\treturn 'a';\n *\t\t\t}\n *\t\t};\n *\n *\t\tmix( Editor, SomeMixin, ... );\n *\n *\t\tnew Editor().a(); // -> 'a'\n *\n * Note: Properties which already exist in the base class will not be overriden.\n *\n * @param {Function} [baseClass] Class which prototype will be extended.\n * @param {Object} [...mixins] Objects from which to get properties.\n */\nexport default function mix( baseClass, ...mixins ) {\n\tmixins.forEach( mixin => {\n\t\tObject.getOwnPropertyNames( mixin ).concat( Object.getOwnPropertySymbols( mixin ) )\n\t\t\t.forEach( key => {\n\t\t\t\tif ( key in baseClass.prototype ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst sourceDescriptor = Object.getOwnPropertyDescriptor( mixin, key );\n\t\t\t\tsourceDescriptor.enumerable = false;\n\n\t\t\t\tObject.defineProperty( baseClass.prototype, key, sourceDescriptor );\n\t\t\t} );\n\t} );\n}\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","import arrayWithHoles from \"@babel/runtime/helpers/esm/arrayWithHoles\";\nimport iterableToArrayLimit from \"@babel/runtime/helpers/esm/iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableRest from \"@babel/runtime/helpers/esm/nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithoutHoles from \"@babel/runtime/helpers/esm/arrayWithoutHoles\";\nimport iterableToArray from \"@babel/runtime/helpers/esm/iterableToArray\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableSpread from \"@babel/runtime/helpers/esm/nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/spy\n */\n\n/**\n * Creates a spy function (ala Sinon.js) that can be used to inspect call to it.\n *\n * The following are the present features:\n *\n * * spy.called: property set to `true` if the function has been called at least once.\n *\n * @returns {Function} The spy function.\n */\nfunction spy() {\n\treturn function spy() {\n\t\tspy.called = true;\n\t};\n}\n\nexport default spy;\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/eventinfo\n */\n\nimport spy from './spy';\n\n/**\n * The event object passed to event callbacks. It is used to provide information about the event as well as a tool to\n * manipulate it.\n */\nexport default class EventInfo {\n\t/**\n\t * @param {Object} source The emitter.\n\t * @param {String} name The event name.\n\t */\n\tconstructor( source, name ) {\n\t\t/**\n\t\t * The object that fired the event.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Object}\n\t\t */\n\t\tthis.source = source;\n\n\t\t/**\n\t\t * The event name.\n\t\t *\n\t\t * @readonly\n\t\t * @member {String}\n\t\t */\n\t\tthis.name = name;\n\n\t\t/**\n\t\t * Path this event has followed. See {@link module:utils/emittermixin~EmitterMixin#delegate}.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Array.<Object>}\n\t\t */\n\t\tthis.path = [];\n\n\t\t// The following methods are defined in the constructor because they must be re-created per instance.\n\n\t\t/**\n\t\t * Stops the event emitter to call further callbacks for this event interaction.\n\t\t *\n\t\t * @method #stop\n\t\t */\n\t\tthis.stop = spy();\n\n\t\t/**\n\t\t * Removes the current callback from future interactions of this event.\n\t\t *\n\t\t * @method #off\n\t\t */\n\t\tthis.off = spy();\n\n\t\t/**\n\t\t * The value which will be returned by {@link module:utils/emittermixin~EmitterMixin#fire}.\n\t\t *\n\t\t * It's `undefined` by default and can be changed by an event listener:\n\t\t *\n\t\t *\t\tdataController.fire( 'getSelectedContent', ( evt ) => {\n\t\t *\t\t\t// This listener will make `dataController.fire( 'getSelectedContent' )`\n\t\t *\t\t\t// always return an empty DocumentFragment.\n\t\t *\t\t\tevt.return = new DocumentFragment();\n\t\t *\n\t\t *\t\t\t// Make sure no other listeners are executed.\n\t\t *\t\t\tevt.stop();\n\t\t *\t\t} );\n\t\t *\n\t\t * @member #return\n\t\t */\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/emittermixin\n */\n\nimport EventInfo from './eventinfo';\nimport uid from './uid';\nimport priorities from './priorities';\n\n// To check if component is loaded more than once.\nimport './version';\nimport CKEditorError from './ckeditorerror';\n\nconst _listeningTo = Symbol( 'listeningTo' );\nconst _emitterId = Symbol( 'emitterId' );\n\n/**\n * Mixin that injects the {@link ~Emitter events API} into its host.\n *\n * @mixin EmitterMixin\n * @implements module:utils/emittermixin~Emitter\n */\nconst EmitterMixin = {\n\t/**\n\t * @inheritDoc\n\t */\n\ton( event, callback, options = {} ) {\n\t\tthis.listenTo( this, event, callback, options );\n\t},\n\n\t/**\n\t * @inheritDoc\n\t */\n\tonce( event, callback, options ) {\n\t\tlet wasFired = false;\n\n\t\tconst onceCallback = function( event, ...args ) {\n\t\t\t// Ensure the callback is called only once even if the callback itself leads to re-firing the event\n\t\t\t// (which would call the callback again).\n\t\t\tif ( !wasFired ) {\n\t\t\t\twasFired = true;\n\n\t\t\t\t// Go off() at the first call.\n\t\t\t\tevent.off();\n\n\t\t\t\t// Go with the original callback.\n\t\t\t\tcallback.call( this, event, ...args );\n\t\t\t}\n\t\t};\n\n\t\t// Make a similar on() call, simply replacing the callback.\n\t\tthis.listenTo( this, event, onceCallback, options );\n\t},\n\n\t/**\n\t * @inheritDoc\n\t */\n\toff( event, callback ) {\n\t\tthis.stopListening( this, event, callback );\n\t},\n\n\t/**\n\t * @inheritDoc\n\t */\n\tlistenTo( emitter, event, callback, options = {} ) {\n\t\tlet emitterInfo, eventCallbacks;\n\n\t\t// _listeningTo contains a list of emitters that this object is listening to.\n\t\t// This list has the following format:\n\t\t//\n\t\t// _listeningTo: {\n\t\t//     emitterId: {\n\t\t//         emitter: emitter,\n\t\t//         callbacks: {\n\t\t//             event1: [ callback1, callback2, ... ]\n\t\t//             ....\n\t\t//         }\n\t\t//     },\n\t\t//     ...\n\t\t// }\n\n\t\tif ( !this[ _listeningTo ] ) {\n\t\t\tthis[ _listeningTo ] = {};\n\t\t}\n\n\t\tconst emitters = this[ _listeningTo ];\n\n\t\tif ( !_getEmitterId( emitter ) ) {\n\t\t\t_setEmitterId( emitter );\n\t\t}\n\n\t\tconst emitterId = _getEmitterId( emitter );\n\n\t\tif ( !( emitterInfo = emitters[ emitterId ] ) ) {\n\t\t\temitterInfo = emitters[ emitterId ] = {\n\t\t\t\temitter,\n\t\t\t\tcallbacks: {}\n\t\t\t};\n\t\t}\n\n\t\tif ( !( eventCallbacks = emitterInfo.callbacks[ event ] ) ) {\n\t\t\teventCallbacks = emitterInfo.callbacks[ event ] = [];\n\t\t}\n\n\t\teventCallbacks.push( callback );\n\n\t\t// Finally register the callback to the event.\n\t\tcreateEventNamespace( emitter, event );\n\t\tconst lists = getCallbacksListsForNamespace( emitter, event );\n\t\tconst priority = priorities.get( options.priority );\n\n\t\tconst callbackDefinition = {\n\t\t\tcallback,\n\t\t\tpriority\n\t\t};\n\n\t\t// Add the callback to all callbacks list.\n\t\tfor ( const callbacks of lists ) {\n\t\t\t// Add the callback to the list in the right priority position.\n\t\t\tlet added = false;\n\n\t\t\tfor ( let i = 0; i < callbacks.length; i++ ) {\n\t\t\t\tif ( callbacks[ i ].priority < priority ) {\n\t\t\t\t\tcallbacks.splice( i, 0, callbackDefinition );\n\t\t\t\t\tadded = true;\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Add at the end, if right place was not found.\n\t\t\tif ( !added ) {\n\t\t\t\tcallbacks.push( callbackDefinition );\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstopListening( emitter, event, callback ) {\n\t\tconst emitters = this[ _listeningTo ];\n\t\tlet emitterId = emitter && _getEmitterId( emitter );\n\t\tconst emitterInfo = emitters && emitterId && emitters[ emitterId ];\n\t\tconst eventCallbacks = emitterInfo && event && emitterInfo.callbacks[ event ];\n\n\t\t// Stop if nothing has been listened.\n\t\tif ( !emitters || ( emitter && !emitterInfo ) || ( event && !eventCallbacks ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// All params provided. off() that single callback.\n\t\tif ( callback ) {\n\t\t\tremoveCallback( emitter, event, callback );\n\n\t\t\t// We must remove callbacks as well in order to prevent memory leaks.\n\t\t\t// See https://github.com/ckeditor/ckeditor5/pull/8480\n\t\t\tconst index = eventCallbacks.indexOf( callback );\n\n\t\t\tif ( index !== -1 ) {\n\t\t\t\tif ( eventCallbacks.length === 1 ) {\n\t\t\t\t\tdelete emitterInfo.callbacks[ event ];\n\t\t\t\t} else {\n\t\t\t\t\tremoveCallback( emitter, event, callback );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// Only `emitter` and `event` provided. off() all callbacks for that event.\n\t\telse if ( eventCallbacks ) {\n\t\t\twhile ( ( callback = eventCallbacks.pop() ) ) {\n\t\t\t\tremoveCallback( emitter, event, callback );\n\t\t\t}\n\n\t\t\tdelete emitterInfo.callbacks[ event ];\n\t\t}\n\t\t// Only `emitter` provided. off() all events for that emitter.\n\t\telse if ( emitterInfo ) {\n\t\t\tfor ( event in emitterInfo.callbacks ) {\n\t\t\t\tthis.stopListening( emitter, event );\n\t\t\t}\n\t\t\tdelete emitters[ emitterId ];\n\t\t}\n\t\t// No params provided. off() all emitters.\n\t\telse {\n\t\t\tfor ( emitterId in emitters ) {\n\t\t\t\tthis.stopListening( emitters[ emitterId ].emitter );\n\t\t\t}\n\t\t\tdelete this[ _listeningTo ];\n\t\t}\n\t},\n\n\t/**\n\t * @inheritDoc\n\t */\n\tfire( eventOrInfo, ...args ) {\n\t\ttry {\n\t\t\tconst eventInfo = eventOrInfo instanceof EventInfo ? eventOrInfo : new EventInfo( this, eventOrInfo );\n\t\t\tconst event = eventInfo.name;\n\t\t\tlet callbacks = getCallbacksForEvent( this, event );\n\n\t\t\t// Record that the event passed this emitter on its path.\n\t\t\teventInfo.path.push( this );\n\n\t\t\t// Handle event listener callbacks first.\n\t\t\tif ( callbacks ) {\n\t\t\t\t// Arguments passed to each callback.\n\t\t\t\tconst callbackArgs = [ eventInfo, ...args ];\n\n\t\t\t\t// Copying callbacks array is the easiest and most secure way of preventing infinite loops, when event callbacks\n\t\t\t\t// are added while processing other callbacks. Previous solution involved adding counters (unique ids) but\n\t\t\t\t// failed if callbacks were added to the queue before currently processed callback.\n\t\t\t\t// If this proves to be too inefficient, another method is to change `.on()` so callbacks are stored if same\n\t\t\t\t// event is currently processed. Then, `.fire()` at the end, would have to add all stored events.\n\t\t\t\tcallbacks = Array.from( callbacks );\n\n\t\t\t\tfor ( let i = 0; i < callbacks.length; i++ ) {\n\t\t\t\t\tcallbacks[ i ].callback.apply( this, callbackArgs );\n\n\t\t\t\t\t// Remove the callback from future requests if off() has been called.\n\t\t\t\t\tif ( eventInfo.off.called ) {\n\t\t\t\t\t\t// Remove the called mark for the next calls.\n\t\t\t\t\t\tdelete eventInfo.off.called;\n\n\t\t\t\t\t\tremoveCallback( this, event, callbacks[ i ].callback );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Do not execute next callbacks if stop() was called.\n\t\t\t\t\tif ( eventInfo.stop.called ) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Delegate event to other emitters if needed.\n\t\t\tif ( this._delegations ) {\n\t\t\t\tconst destinations = this._delegations.get( event );\n\t\t\t\tconst passAllDestinations = this._delegations.get( '*' );\n\n\t\t\t\tif ( destinations ) {\n\t\t\t\t\tfireDelegatedEvents( destinations, eventInfo, args );\n\t\t\t\t}\n\n\t\t\t\tif ( passAllDestinations ) {\n\t\t\t\t\tfireDelegatedEvents( passAllDestinations, eventInfo, args );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn eventInfo.return;\n\t\t} catch ( err ) {\n\t\t\t// @if CK_DEBUG // throw err;\n\t\t\t/* istanbul ignore next */\n\t\t\tCKEditorError.rethrowUnexpectedError( err, this );\n\t\t}\n\t},\n\n\t/**\n\t * @inheritDoc\n\t */\n\tdelegate( ...events ) {\n\t\treturn {\n\t\t\tto: ( emitter, nameOrFunction ) => {\n\t\t\t\tif ( !this._delegations ) {\n\t\t\t\t\tthis._delegations = new Map();\n\t\t\t\t}\n\n\t\t\t\t// Originally there was a for..of loop which unfortunately caused an error in Babel that didn't allow\n\t\t\t\t// build an application. See: https://github.com/ckeditor/ckeditor5-react/issues/40.\n\t\t\t\tevents.forEach( eventName => {\n\t\t\t\t\tconst destinations = this._delegations.get( eventName );\n\n\t\t\t\t\tif ( !destinations ) {\n\t\t\t\t\t\tthis._delegations.set( eventName, new Map( [ [ emitter, nameOrFunction ] ] ) );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdestinations.set( emitter, nameOrFunction );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\t\t};\n\t},\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstopDelegating( event, emitter ) {\n\t\tif ( !this._delegations ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !event ) {\n\t\t\tthis._delegations.clear();\n\t\t} else if ( !emitter ) {\n\t\t\tthis._delegations.delete( event );\n\t\t} else {\n\t\t\tconst destinations = this._delegations.get( event );\n\n\t\t\tif ( destinations ) {\n\t\t\t\tdestinations.delete( emitter );\n\t\t\t}\n\t\t}\n\t}\n};\n\nexport default EmitterMixin;\n\n/**\n * Emitter/listener interface.\n *\n * Can be easily implemented by a class by mixing the {@link module:utils/emittermixin~EmitterMixin} mixin.\n *\n * @interface Emitter\n */\n\n/**\n * Registers a callback function to be executed when an event is fired.\n *\n * Shorthand for {@link #listenTo `this.listenTo( this, event, callback, options )`} (it makes the emitter\n * listen on itself).\n *\n * @method #on\n * @param {String} event The name of the event.\n * @param {Function} callback The function to be called on event.\n * @param {Object} [options={}] Additional options.\n * @param {module:utils/priorities~PriorityString|Number} [options.priority='normal'] The priority of this event callback. The higher\n * the priority value the sooner the callback will be fired. Events having the same priority are called in the\n * order they were added.\n */\n\n/**\n * Registers a callback function to be executed on the next time the event is fired only. This is similar to\n * calling {@link #on} followed by {@link #off} in the callback.\n *\n * @method #once\n * @param {String} event The name of the event.\n * @param {Function} callback The function to be called on event.\n * @param {Object} [options={}] Additional options.\n * @param {module:utils/priorities~PriorityString|Number} [options.priority='normal'] The priority of this event callback. The higher\n * the priority value the sooner the callback will be fired. Events having the same priority are called in the\n * order they were added.\n */\n\n/**\n * Stops executing the callback on the given event.\n * Shorthand for {@link #stopListening `this.stopListening( this, event, callback )`}.\n *\n * @method #off\n * @param {String} event The name of the event.\n * @param {Function} callback The function to stop being called.\n */\n\n/**\n * Registers a callback function to be executed when an event is fired in a specific (emitter) object.\n *\n * Events can be grouped in namespaces using `:`.\n * When namespaced event is fired, it additionally fires all callbacks for that namespace.\n *\n *\t\t// myEmitter.on( ... ) is a shorthand for myEmitter.listenTo( myEmitter, ... ).\n *\t\tmyEmitter.on( 'myGroup', genericCallback );\n *\t\tmyEmitter.on( 'myGroup:myEvent', specificCallback );\n *\n *\t\t// genericCallback is fired.\n *\t\tmyEmitter.fire( 'myGroup' );\n *\t\t// both genericCallback and specificCallback are fired.\n *\t\tmyEmitter.fire( 'myGroup:myEvent' );\n *\t\t// genericCallback is fired even though there are no callbacks for \"foo\".\n *\t\tmyEmitter.fire( 'myGroup:foo' );\n *\n * An event callback can {@link module:utils/eventinfo~EventInfo#stop stop the event} and\n * set the {@link module:utils/eventinfo~EventInfo#return return value} of the {@link #fire} method.\n *\n * @method #listenTo\n * @param {module:utils/emittermixin~Emitter} emitter The object that fires the event.\n * @param {String} event The name of the event.\n * @param {Function} callback The function to be called on event.\n * @param {Object} [options={}] Additional options.\n * @param {module:utils/priorities~PriorityString|Number} [options.priority='normal'] The priority of this event callback. The higher\n * the priority value the sooner the callback will be fired. Events having the same priority are called in the\n * order they were added.\n */\n\n/**\n * Stops listening for events. It can be used at different levels:\n *\n * * To stop listening to a specific callback.\n * * To stop listening to a specific event.\n * * To stop listening to all events fired by a specific object.\n * * To stop listening to all events fired by all objects.\n *\n * @method #stopListening\n * @param {module:utils/emittermixin~Emitter} [emitter] The object to stop listening to. If omitted, stops it for all objects.\n * @param {String} [event] (Requires the `emitter`) The name of the event to stop listening to. If omitted, stops it\n * for all events from `emitter`.\n * @param {Function} [callback] (Requires the `event`) The function to be removed from the call list for the given\n * `event`.\n */\n\n/**\n * Fires an event, executing all callbacks registered for it.\n *\n * The first parameter passed to callbacks is an {@link module:utils/eventinfo~EventInfo} object,\n * followed by the optional `args` provided in the `fire()` method call.\n *\n * @method #fire\n * @param {String|module:utils/eventinfo~EventInfo} eventOrInfo The name of the event or `EventInfo` object if event is delegated.\n * @param {...*} [args] Additional arguments to be passed to the callbacks.\n * @returns {*} By default the method returns `undefined`. However, the return value can be changed by listeners\n * through modification of the {@link module:utils/eventinfo~EventInfo#return `evt.return`}'s property (the event info\n * is the first param of every callback).\n */\n\n/**\n * Delegates selected events to another {@link module:utils/emittermixin~Emitter}. For instance:\n *\n *\t\temitterA.delegate( 'eventX' ).to( emitterB );\n *\t\temitterA.delegate( 'eventX', 'eventY' ).to( emitterC );\n *\n * then `eventX` is delegated (fired by) `emitterB` and `emitterC` along with `data`:\n *\n *\t\temitterA.fire( 'eventX', data );\n *\n * and `eventY` is delegated (fired by) `emitterC` along with `data`:\n *\n *\t\temitterA.fire( 'eventY', data );\n *\n * @method #delegate\n * @param {...String} events Event names that will be delegated to another emitter.\n * @returns {module:utils/emittermixin~EmitterMixinDelegateChain}\n */\n\n/**\n * Stops delegating events. It can be used at different levels:\n *\n * * To stop delegating all events.\n * * To stop delegating a specific event to all emitters.\n * * To stop delegating a specific event to a specific emitter.\n *\n * @method #stopDelegating\n * @param {String} [event] The name of the event to stop delegating. If omitted, stops it all delegations.\n * @param {module:utils/emittermixin~Emitter} [emitter] (requires `event`) The object to stop delegating a particular event to.\n * If omitted, stops delegation of `event` to all emitters.\n */\n\n/**\n * Checks if `listeningEmitter` listens to an emitter with given `listenedToEmitterId` and if so, returns that emitter.\n * If not, returns `null`.\n *\n * @protected\n * @param {module:utils/emittermixin~Emitter} listeningEmitter An emitter that listens.\n * @param {String} listenedToEmitterId Unique emitter id of emitter listened to.\n * @returns {module:utils/emittermixin~Emitter|null}\n */\nexport function _getEmitterListenedTo( listeningEmitter, listenedToEmitterId ) {\n\tif ( listeningEmitter[ _listeningTo ] && listeningEmitter[ _listeningTo ][ listenedToEmitterId ] ) {\n\t\treturn listeningEmitter[ _listeningTo ][ listenedToEmitterId ].emitter;\n\t}\n\n\treturn null;\n}\n\n/**\n * Sets emitter's unique id.\n *\n * **Note:** `_emitterId` can be set only once.\n *\n * @protected\n * @param {module:utils/emittermixin~Emitter} emitter An emitter for which id will be set.\n * @param {String} [id] Unique id to set. If not passed, random unique id will be set.\n */\nexport function _setEmitterId( emitter, id ) {\n\tif ( !emitter[ _emitterId ] ) {\n\t\temitter[ _emitterId ] = id || uid();\n\t}\n}\n\n/**\n * Returns emitter's unique id.\n *\n * @protected\n * @param {module:utils/emittermixin~Emitter} emitter An emitter which id will be returned.\n */\nexport function _getEmitterId( emitter ) {\n\treturn emitter[ _emitterId ];\n}\n\n// Gets the internal `_events` property of the given object.\n// `_events` property store all lists with callbacks for registered event names.\n// If there were no events registered on the object, empty `_events` object is created.\nfunction getEvents( source ) {\n\tif ( !source._events ) {\n\t\tObject.defineProperty( source, '_events', {\n\t\t\tvalue: {}\n\t\t} );\n\t}\n\n\treturn source._events;\n}\n\n// Creates event node for generic-specific events relation architecture.\nfunction makeEventNode() {\n\treturn {\n\t\tcallbacks: [],\n\t\tchildEvents: []\n\t};\n}\n\n// Creates an architecture for generic-specific events relation.\n// If needed, creates all events for given eventName, i.e. if the first registered event\n// is foo:bar:abc, it will create foo:bar:abc, foo:bar and foo event and tie them together.\n// It also copies callbacks from more generic events to more specific events when\n// specific events are created.\nfunction createEventNamespace( source, eventName ) {\n\tconst events = getEvents( source );\n\n\t// First, check if the event we want to add to the structure already exists.\n\tif ( events[ eventName ] ) {\n\t\t// If it exists, we don't have to do anything.\n\t\treturn;\n\t}\n\n\t// In other case, we have to create the structure for the event.\n\t// Note, that we might need to create intermediate events too.\n\t// I.e. if foo:bar:abc is being registered and we only have foo in the structure,\n\t// we need to also register foo:bar.\n\n\t// Currently processed event name.\n\tlet name = eventName;\n\t// Name of the event that is a child event for currently processed event.\n\tlet childEventName = null;\n\n\t// Array containing all newly created specific events.\n\tconst newEventNodes = [];\n\n\t// While loop can't check for ':' index because we have to handle generic events too.\n\t// In each loop, we truncate event name, going from the most specific name to the generic one.\n\t// I.e. foo:bar:abc -> foo:bar -> foo.\n\twhile ( name !== '' ) {\n\t\tif ( events[ name ] ) {\n\t\t\t// If the currently processed event name is already registered, we can be sure\n\t\t\t// that it already has all the structure created, so we can break the loop here\n\t\t\t// as no more events need to be registered.\n\t\t\tbreak;\n\t\t}\n\n\t\t// If this event is not yet registered, create a new object for it.\n\t\tevents[ name ] = makeEventNode();\n\t\t// Add it to the array with newly created events.\n\t\tnewEventNodes.push( events[ name ] );\n\n\t\t// Add previously processed event name as a child of this event.\n\t\tif ( childEventName ) {\n\t\t\tevents[ name ].childEvents.push( childEventName );\n\t\t}\n\n\t\tchildEventName = name;\n\t\t// If `.lastIndexOf()` returns -1, `.substr()` will return '' which will break the loop.\n\t\tname = name.substr( 0, name.lastIndexOf( ':' ) );\n\t}\n\n\tif ( name !== '' ) {\n\t\t// If name is not empty, we found an already registered event that was a parent of the\n\t\t// event we wanted to register.\n\n\t\t// Copy that event's callbacks to newly registered events.\n\t\tfor ( const node of newEventNodes ) {\n\t\t\tnode.callbacks = events[ name ].callbacks.slice();\n\t\t}\n\n\t\t// Add last newly created event to the already registered event.\n\t\tevents[ name ].childEvents.push( childEventName );\n\t}\n}\n\n// Gets an array containing callbacks list for a given event and it's more specific events.\n// I.e. if given event is foo:bar and there is also foo:bar:abc event registered, this will\n// return callback list of foo:bar and foo:bar:abc (but not foo).\nfunction getCallbacksListsForNamespace( source, eventName ) {\n\tconst eventNode = getEvents( source )[ eventName ];\n\n\tif ( !eventNode ) {\n\t\treturn [];\n\t}\n\n\tlet callbacksLists = [ eventNode.callbacks ];\n\n\tfor ( let i = 0; i < eventNode.childEvents.length; i++ ) {\n\t\tconst childCallbacksLists = getCallbacksListsForNamespace( source, eventNode.childEvents[ i ] );\n\n\t\tcallbacksLists = callbacksLists.concat( childCallbacksLists );\n\t}\n\n\treturn callbacksLists;\n}\n\n// Get the list of callbacks for a given event, but only if there any callbacks have been registered.\n// If there are no callbacks registered for given event, it checks if this is a specific event and looks\n// for callbacks for it's more generic version.\nfunction getCallbacksForEvent( source, eventName ) {\n\tlet event;\n\n\tif ( !source._events || !( event = source._events[ eventName ] ) || !event.callbacks.length ) {\n\t\t// There are no callbacks registered for specified eventName.\n\t\t// But this could be a specific-type event that is in a namespace.\n\t\tif ( eventName.indexOf( ':' ) > -1 ) {\n\t\t\t// If the eventName is specific, try to find callback lists for more generic event.\n\t\t\treturn getCallbacksForEvent( source, eventName.substr( 0, eventName.lastIndexOf( ':' ) ) );\n\t\t} else {\n\t\t\t// If this is a top-level generic event, return null;\n\t\t\treturn null;\n\t\t}\n\t}\n\n\treturn event.callbacks;\n}\n\n// Fires delegated events for given map of destinations.\n//\n// @private\n// * @param {Map.<utils.Emitter>} destinations A map containing\n// `[ {@link module:utils/emittermixin~Emitter}, \"event name\" ]` pair destinations.\n// * @param {utils.EventInfo} eventInfo The original event info object.\n// * @param {Array.<*>} fireArgs Arguments the original event was fired with.\nfunction fireDelegatedEvents( destinations, eventInfo, fireArgs ) {\n\tfor ( let [ emitter, name ] of destinations ) {\n\t\tif ( !name ) {\n\t\t\tname = eventInfo.name;\n\t\t} else if ( typeof name == 'function' ) {\n\t\t\tname = name( eventInfo.name );\n\t\t}\n\n\t\tconst delegatedInfo = new EventInfo( eventInfo.source, name );\n\n\t\tdelegatedInfo.path = [ ...eventInfo.path ];\n\n\t\temitter.fire( delegatedInfo, ...fireArgs );\n\t}\n}\n\n// Removes callback from emitter for given event.\n//\n// @param {module:utils/emittermixin~Emitter} emitter\n// @param {String} event\n// @param {Function} callback\nfunction removeCallback( emitter, event, callback ) {\n\tconst lists = getCallbacksListsForNamespace( emitter, event );\n\n\tfor ( const callbacks of lists ) {\n\t\tfor ( let i = 0; i < callbacks.length; i++ ) {\n\t\t\tif ( callbacks[ i ].callback == callback ) {\n\t\t\t\t// Remove the callback from the list (fixing the next index).\n\t\t\t\tcallbacks.splice( i, 1 );\n\t\t\t\ti--;\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * The return value of {@link ~EmitterMixin#delegate}.\n *\n * @interface module:utils/emittermixin~EmitterMixinDelegateChain\n */\n\n/**\n * Selects destination for {@link module:utils/emittermixin~EmitterMixin#delegate} events.\n *\n * @method #to\n * @param {module:utils/emittermixin~Emitter} emitter An `EmitterMixin` instance which is the destination for delegated events.\n * @param {String|Function} [nameOrFunction] A custom event name or function which converts the original name string.\n */\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/element\n */\n\nimport Node from './node';\nimport NodeList from './nodelist';\nimport Text from './text';\nimport TextProxy from './textproxy';\nimport isIterable from '@ckeditor/ckeditor5-utils/src/isiterable';\n\n// @if CK_DEBUG_ENGINE // const { stringifyMap, convertMapToStringifiedObject, convertMapToTags } = require( '../dev-utils/utils' );\n\n/**\n * Model element. Type of {@link module:engine/model/node~Node node} that has a {@link module:engine/model/element~Element#name name} and\n * {@link module:engine/model/element~Element#getChildren child nodes}.\n *\n * **Important**: see {@link module:engine/model/node~Node} to read about restrictions using `Element` and `Node` API.\n *\n * @extends module:engine/model/node~Node\n */\nexport default class Element extends Node {\n\t/**\n\t * Creates a model element.\n\t *\n\t * **Note:** Constructor of this class shouldn't be used directly in the code.\n\t * Use the {@link module:engine/model/writer~Writer#createElement} method instead.\n\t *\n\t * @protected\n\t * @param {String} name Element's name.\n\t * @param {Object} [attrs] Element's attributes. See {@link module:utils/tomap~toMap} for a list of accepted values.\n\t * @param {module:engine/model/node~Node|Iterable.<module:engine/model/node~Node>} [children]\n\t * One or more nodes to be inserted as children of created element.\n\t */\n\tconstructor( name, attrs, children ) {\n\t\tsuper( attrs );\n\n\t\t/**\n\t\t * Element name.\n\t\t *\n\t\t * @readonly\n\t\t * @member {String} module:engine/model/element~Element#name\n\t\t */\n\t\tthis.name = name;\n\n\t\t/**\n\t\t * List of children nodes.\n\t\t *\n\t\t * @private\n\t\t * @member {module:engine/model/nodelist~NodeList} module:engine/model/element~Element#_children\n\t\t */\n\t\tthis._children = new NodeList();\n\n\t\tif ( children ) {\n\t\t\tthis._insertChild( 0, children );\n\t\t}\n\t}\n\n\t/**\n\t * Number of this element's children.\n\t *\n\t * @readonly\n\t * @type {Number}\n\t */\n\tget childCount() {\n\t\treturn this._children.length;\n\t}\n\n\t/**\n\t * Sum of {@link module:engine/model/node~Node#offsetSize offset sizes} of all of this element's children.\n\t *\n\t * @readonly\n\t * @type {Number}\n\t */\n\tget maxOffset() {\n\t\treturn this._children.maxOffset;\n\t}\n\n\t/**\n\t * Is `true` if there are no nodes inside this element, `false` otherwise.\n\t *\n\t * @readonly\n\t * @type {Boolean}\n\t */\n\tget isEmpty() {\n\t\treturn this.childCount === 0;\n\t}\n\n\t/**\n\t * Checks whether this object is of the given.\n\t *\n\t *\t\telement.is( 'element' ); // -> true\n\t *\t\telement.is( 'node' ); // -> true\n\t *\t\telement.is( 'model:element' ); // -> true\n\t *\t\telement.is( 'model:node' ); // -> true\n\t *\n\t *\t\telement.is( 'view:element' ); // -> false\n\t *\t\telement.is( 'documentSelection' ); // -> false\n\t *\n\t * Assuming that the object being checked is an element, you can also check its\n\t * {@link module:engine/model/element~Element#name name}:\n\t *\n\t *\t\telement.is( 'element', 'image' ); // -> true if this is an <image> element\n\t *\t\telement.is( 'element', 'image' ); // -> same as above\n\t *\t\ttext.is( 'element', 'image' ); -> false\n\t *\n\t * {@link module:engine/model/node~Node#is Check the entire list of model objects} which implement the `is()` method.\n\t *\n\t * @param {String} type Type to check.\n\t * @param {String} [name] Element name.\n\t * @returns {Boolean}\n\t */\n\tis( type, name = null ) {\n\t\tif ( !name ) {\n\t\t\treturn type === 'element' || type === 'model:element' ||\n\t\t\t\t// From super.is(). This is highly utilised method and cannot call super. See ckeditor/ckeditor5#6529.\n\t\t\t\ttype === 'node' || type === 'model:node';\n\t\t}\n\n\t\treturn name === this.name && ( type === 'element' || type === 'model:element' );\n\t}\n\n\t/**\n\t * Gets the child at the given index.\n\t *\n\t * @param {Number} index Index of child.\n\t * @returns {module:engine/model/node~Node} Child node.\n\t */\n\tgetChild( index ) {\n\t\treturn this._children.getNode( index );\n\t}\n\n\t/**\n\t * Returns an iterator that iterates over all of this element's children.\n\t *\n\t * @returns {Iterable.<module:engine/model/node~Node>}\n\t */\n\tgetChildren() {\n\t\treturn this._children[ Symbol.iterator ]();\n\t}\n\n\t/**\n\t * Returns an index of the given child node. Returns `null` if given node is not a child of this element.\n\t *\n\t * @param {module:engine/model/node~Node} node Child node to look for.\n\t * @returns {Number} Child node's index in this element.\n\t */\n\tgetChildIndex( node ) {\n\t\treturn this._children.getNodeIndex( node );\n\t}\n\n\t/**\n\t * Returns the starting offset of given child. Starting offset is equal to the sum of\n\t * {@link module:engine/model/node~Node#offsetSize offset sizes} of all node's siblings that are before it. Returns `null` if\n\t * given node is not a child of this element.\n\t *\n\t * @param {module:engine/model/node~Node} node Child node to look for.\n\t * @returns {Number} Child node's starting offset.\n\t */\n\tgetChildStartOffset( node ) {\n\t\treturn this._children.getNodeStartOffset( node );\n\t}\n\n\t/**\n\t * Returns index of a node that occupies given offset. If given offset is too low, returns `0`. If given offset is\n\t * too high, returns {@link module:engine/model/element~Element#getChildIndex index after last child}.\n\t *\n\t *\t\tconst textNode = new Text( 'foo' );\n\t *\t\tconst pElement = new Element( 'p' );\n\t *\t\tconst divElement = new Element( [ textNode, pElement ] );\n\t *\t\tdivElement.offsetToIndex( -1 ); // Returns 0, because offset is too low.\n\t *\t\tdivElement.offsetToIndex( 0 ); // Returns 0, because offset 0 is taken by `textNode` which is at index 0.\n\t *\t\tdivElement.offsetToIndex( 1 ); // Returns 0, because `textNode` has `offsetSize` equal to 3, so it occupies offset 1 too.\n\t *\t\tdivElement.offsetToIndex( 2 ); // Returns 0.\n\t *\t\tdivElement.offsetToIndex( 3 ); // Returns 1.\n\t *\t\tdivElement.offsetToIndex( 4 ); // Returns 2. There are no nodes at offset 4, so last available index is returned.\n\t *\n\t * @param {Number} offset Offset to look for.\n\t * @returns {Number}\n\t */\n\toffsetToIndex( offset ) {\n\t\treturn this._children.offsetToIndex( offset );\n\t}\n\n\t/**\n\t * Returns a descendant node by its path relative to this element.\n\t *\n\t *\t\t// <this>a<b>c</b></this>\n\t *\t\tthis.getNodeByPath( [ 0 ] );     // -> \"a\"\n\t *\t\tthis.getNodeByPath( [ 1 ] );     // -> <b>\n\t *\t\tthis.getNodeByPath( [ 1, 0 ] );  // -> \"c\"\n\t *\n\t * @param {Array.<Number>} relativePath Path of the node to find, relative to this element.\n\t * @returns {module:engine/model/node~Node}\n\t */\n\tgetNodeByPath( relativePath ) {\n\t\tlet node = this; // eslint-disable-line consistent-this\n\n\t\tfor ( const index of relativePath ) {\n\t\t\tnode = node.getChild( node.offsetToIndex( index ) );\n\t\t}\n\n\t\treturn node;\n\t}\n\n\t/**\n\t * Returns the parent element of the given name. Returns null if the element is not inside the desired parent.\n\t *\n\t * @param {String} parentName The name of the parent element to find.\n\t * @param {Object} [options] Options object.\n\t * @param {Boolean} [options.includeSelf=false] When set to `true` this node will be also included while searching.\n\t * @returns {module:engine/model/element~Element|null}\n\t */\n\tfindAncestor( parentName, options = { includeSelf: false } ) {\n\t\tlet parent = options.includeSelf ? this : this.parent;\n\n\t\twhile ( parent ) {\n\t\t\tif ( parent.name === parentName ) {\n\t\t\t\treturn parent;\n\t\t\t}\n\n\t\t\tparent = parent.parent;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Converts `Element` instance to plain object and returns it. Takes care of converting all of this element's children.\n\t *\n\t * @returns {Object} `Element` instance converted to plain object.\n\t */\n\ttoJSON() {\n\t\tconst json = super.toJSON();\n\n\t\tjson.name = this.name;\n\n\t\tif ( this._children.length > 0 ) {\n\t\t\tjson.children = [];\n\n\t\t\tfor ( const node of this._children ) {\n\t\t\t\tjson.children.push( node.toJSON() );\n\t\t\t}\n\t\t}\n\n\t\treturn json;\n\t}\n\n\t/**\n\t * Creates a copy of this element and returns it. Created element has the same name and attributes as the original element.\n\t * If clone is deep, the original element's children are also cloned. If not, then empty element is returned.\n\t *\n\t * @protected\n\t * @param {Boolean} [deep=false] If set to `true` clones element and all its children recursively. When set to `false`,\n\t * element will be cloned without any child.\n\t */\n\t_clone( deep = false ) {\n\t\tconst children = deep ? Array.from( this._children ).map( node => node._clone( true ) ) : null;\n\n\t\treturn new Element( this.name, this.getAttributes(), children );\n\t}\n\n\t/**\n\t * {@link module:engine/model/element~Element#_insertChild Inserts} one or more nodes at the end of this element.\n\t *\n\t * @see module:engine/model/writer~Writer#append\n\t * @protected\n\t * @param {module:engine/model/item~Item|Iterable.<module:engine/model/item~Item>} nodes Nodes to be inserted.\n\t */\n\t_appendChild( nodes ) {\n\t\tthis._insertChild( this.childCount, nodes );\n\t}\n\n\t/**\n\t * Inserts one or more nodes at the given index and sets {@link module:engine/model/node~Node#parent parent} of these nodes\n\t * to this element.\n\t *\n\t * @see module:engine/model/writer~Writer#insert\n\t * @protected\n\t * @param {Number} index Index at which nodes should be inserted.\n\t * @param {module:engine/model/item~Item|Iterable.<module:engine/model/item~Item>} items Items to be inserted.\n\t */\n\t_insertChild( index, items ) {\n\t\tconst nodes = normalize( items );\n\n\t\tfor ( const node of nodes ) {\n\t\t\t// If node that is being added to this element is already inside another element, first remove it from the old parent.\n\t\t\tif ( node.parent !== null ) {\n\t\t\t\tnode._remove();\n\t\t\t}\n\n\t\t\tnode.parent = this;\n\t\t}\n\n\t\tthis._children._insertNodes( index, nodes );\n\t}\n\n\t/**\n\t * Removes one or more nodes starting at the given index and sets\n\t * {@link module:engine/model/node~Node#parent parent} of these nodes to `null`.\n\t *\n\t * @see module:engine/model/writer~Writer#remove\n\t * @protected\n\t * @param {Number} index Index of the first node to remove.\n\t * @param {Number} [howMany=1] Number of nodes to remove.\n\t * @returns {Array.<module:engine/model/node~Node>} Array containing removed nodes.\n\t */\n\t_removeChildren( index, howMany = 1 ) {\n\t\tconst nodes = this._children._removeNodes( index, howMany );\n\n\t\tfor ( const node of nodes ) {\n\t\t\tnode.parent = null;\n\t\t}\n\n\t\treturn nodes;\n\t}\n\n\t/**\n\t * Creates an `Element` instance from given plain object (i.e. parsed JSON string).\n\t * Converts `Element` children to proper nodes.\n\t *\n\t * @param {Object} json Plain object to be converted to `Element`.\n\t * @returns {module:engine/model/element~Element} `Element` instance created using given plain object.\n\t */\n\tstatic fromJSON( json ) {\n\t\tlet children = null;\n\n\t\tif ( json.children ) {\n\t\t\tchildren = [];\n\n\t\t\tfor ( const child of json.children ) {\n\t\t\t\tif ( child.name ) {\n\t\t\t\t\t// If child has name property, it is an Element.\n\t\t\t\t\tchildren.push( Element.fromJSON( child ) );\n\t\t\t\t} else {\n\t\t\t\t\t// Otherwise, it is a Text node.\n\t\t\t\t\tchildren.push( Text.fromJSON( child ) );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn new Element( json.name, json.attributes, children );\n\t}\n\n\t// @if CK_DEBUG_ENGINE // toString() {\n\t// @if CK_DEBUG_ENGINE // \treturn `<${ this.rootName || this.name }>`;\n\t// @if CK_DEBUG_ENGINE // }\n\n\t// @if CK_DEBUG_ENGINE // log() {\n\t// @if CK_DEBUG_ENGINE // \tconsole.log( 'ModelElement: ' + this );\n\t// @if CK_DEBUG_ENGINE // }\n\n\t// @if CK_DEBUG_ENGINE // logExtended() {\n\t// @if CK_DEBUG_ENGINE // \tconsole.log( `ModelElement: ${ this }, ${ this.childCount } children,\n\t// @if CK_DEBUG_ENGINE //\t\tattrs: ${ convertMapToStringifiedObject( this.getAttributes() ) }` );\n\t// @if CK_DEBUG_ENGINE // }\n\n\t// @if CK_DEBUG_ENGINE // logAll() {\n\t// @if CK_DEBUG_ENGINE // \tconsole.log( '--------------------' );\n\t// @if CK_DEBUG_ENGINE //\n\t// @if CK_DEBUG_ENGINE // \tthis.logExtended();\n\t// @if CK_DEBUG_ENGINE //\tconsole.log( 'List of children:' );\n\t// @if CK_DEBUG_ENGINE //\n\t// @if CK_DEBUG_ENGINE // \tfor ( const child of this.getChildren() ) {\n\t// @if CK_DEBUG_ENGINE // \t\tchild.log();\n\t// @if CK_DEBUG_ENGINE // \t}\n\t// @if CK_DEBUG_ENGINE // }\n\n\t// @if CK_DEBUG_ENGINE // printTree( level = 0) {\n\t// @if CK_DEBUG_ENGINE // \tlet string = '';\n\n\t// @if CK_DEBUG_ENGINE // \tstring += '\\t'.repeat( level );\n\t// @if CK_DEBUG_ENGINE // \tstring += `<${ this.rootName || this.name }${ convertMapToTags( this.getAttributes() ) }>`;\n\n\t// @if CK_DEBUG_ENGINE // \tfor ( const child of this.getChildren() ) {\n\t// @if CK_DEBUG_ENGINE // \t\tstring += '\\n';\n\n\t// @if CK_DEBUG_ENGINE // \t\tif ( child.is( '$text' ) ) {\n\t// @if CK_DEBUG_ENGINE // \t\t\tconst textAttrs = convertMapToTags( child._attrs );\n\n\t// @if CK_DEBUG_ENGINE // \t\t\tstring += '\\t'.repeat( level + 1 );\n\n\t// @if CK_DEBUG_ENGINE // \t\t\tif ( textAttrs !== '' ) {\n\t// @if CK_DEBUG_ENGINE // \t\t\t\tstring += `<$text${ textAttrs }>` + child.data + '</$text>';\n\t// @if CK_DEBUG_ENGINE // \t\t\t} else {\n\t// @if CK_DEBUG_ENGINE // \t\t\t\tstring += child.data;\n\t// @if CK_DEBUG_ENGINE // \t\t\t}\n\t// @if CK_DEBUG_ENGINE // \t\t} else {\n\t// @if CK_DEBUG_ENGINE // \t\t\tstring += child.printTree( level + 1 );\n\t// @if CK_DEBUG_ENGINE // \t\t}\n\t// @if CK_DEBUG_ENGINE // \t}\n\n\t// @if CK_DEBUG_ENGINE // \tif ( this.childCount ) {\n\t// @if CK_DEBUG_ENGINE // \t\tstring += '\\n' + '\\t'.repeat( level );\n\t// @if CK_DEBUG_ENGINE // \t}\n\n\t// @if CK_DEBUG_ENGINE // \tstring += `</${ this.rootName || this.name }>`;\n\n\t// @if CK_DEBUG_ENGINE // \treturn string;\n\t// @if CK_DEBUG_ENGINE // }\n\n\t// @if CK_DEBUG_ENGINE // logTree() {\n\t// @if CK_DEBUG_ENGINE // \tconsole.log( this.printTree() );\n\t// @if CK_DEBUG_ENGINE // }\n}\n\n// Converts strings to Text and non-iterables to arrays.\n//\n// @param {String|module:engine/model/item~Item|Iterable.<String|module:engine/model/item~Item>}\n// @returns {Iterable.<module:engine/model/node~Node>}\nfunction normalize( nodes ) {\n\t// Separate condition because string is iterable.\n\tif ( typeof nodes == 'string' ) {\n\t\treturn [ new Text( nodes ) ];\n\t}\n\n\tif ( !isIterable( nodes ) ) {\n\t\tnodes = [ nodes ];\n\t}\n\n\t// Array.from to enable .map() on non-arrays.\n\treturn Array.from( nodes )\n\t\t.map( node => {\n\t\t\tif ( typeof node == 'string' ) {\n\t\t\t\treturn new Text( node );\n\t\t\t}\n\n\t\t\tif ( node instanceof TextProxy ) {\n\t\t\t\treturn new Text( node.data, node.getAttributes() );\n\t\t\t}\n\n\t\t\treturn node;\n\t\t} );\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/text\n */\n\nimport Node from './node';\n\n// @if CK_DEBUG_ENGINE // const { convertMapToStringifiedObject } = require( '../dev-utils/utils' );\n\n/**\n * Model text node. Type of {@link module:engine/model/node~Node node} that contains {@link module:engine/model/text~Text#data text data}.\n *\n * **Important:** see {@link module:engine/model/node~Node} to read about restrictions using `Text` and `Node` API.\n *\n * **Note:** keep in mind that `Text` instances might indirectly got removed from model tree when model is changed.\n * This happens when {@link module:engine/model/writer~Writer model writer} is used to change model and the text node is merged with\n * another text node. Then, both text nodes are removed and a new text node is inserted into the model. Because of\n * this behavior, keeping references to `Text` is not recommended. Instead, consider creating\n * {@link module:engine/model/liveposition~LivePosition live position} placed before the text node.\n *\n * @extends module:engine/model/node~Node\n */\nexport default class Text extends Node {\n\t/**\n\t * Creates a text node.\n\t *\n\t * **Note:** Constructor of this class shouldn't be used directly in the code.\n\t * Use the {@link module:engine/model/writer~Writer#createText} method instead.\n\t *\n\t * @protected\n\t * @param {String} data Node's text.\n\t * @param {Object} [attrs] Node's attributes. See {@link module:utils/tomap~toMap} for a list of accepted values.\n\t */\n\tconstructor( data, attrs ) {\n\t\tsuper( attrs );\n\n\t\t/**\n\t\t * Text data contained in this text node.\n\t\t *\n\t\t * @protected\n\t\t * @type {String}\n\t\t */\n\t\tthis._data = data || '';\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tget offsetSize() {\n\t\treturn this.data.length;\n\t}\n\n\t/**\n\t * Returns a text data contained in the node.\n\t *\n\t * @readonly\n\t * @type {String}\n\t */\n\tget data() {\n\t\treturn this._data;\n\t}\n\n\t/**\n\t * Checks whether this object is of the given.\n\t *\n\t *\t\ttext.is( '$text' ); // -> true\n\t *\t\ttext.is( 'node' ); // -> true\n\t *\t\ttext.is( 'model:$text' ); // -> true\n\t *\t\ttext.is( 'model:node' ); // -> true\n\t *\n\t *\t\ttext.is( 'view:$text' ); // -> false\n\t *\t\ttext.is( 'documentSelection' ); // -> false\n\t *\n\t * {@link module:engine/model/node~Node#is Check the entire list of model objects} which implement the `is()` method.\n\t *\n\t * **Note:** Until version 20.0.0 this method wasn't accepting `'$text'` type. The legacy `'text'` type is still\n\t * accepted for backward compatibility.\n\t *\n\t * @param {String} type Type to check.\n\t * @returns {Boolean}\n\t */\n\tis( type ) {\n\t\treturn type === '$text' || type === 'model:$text' ||\n\t\t\t// This are legacy values kept for backward compatibility.\n\t\t\ttype === 'text' || type === 'model:text' ||\n\t\t\t// From super.is(). This is highly utilised method and cannot call super. See ckeditor/ckeditor5#6529.\n\t\t\ttype === 'node' || type === 'model:node';\n\t}\n\n\t/**\n\t * Converts `Text` instance to plain object and returns it.\n\t *\n\t * @returns {Object} `Text` instance converted to plain object.\n\t */\n\ttoJSON() {\n\t\tconst json = super.toJSON();\n\n\t\tjson.data = this.data;\n\n\t\treturn json;\n\t}\n\n\t/**\n\t * Creates a copy of this text node and returns it. Created text node has same text data and attributes as original text node.\n\t *\n\t * @protected\n\t * @returns {module:engine/model/text~Text} `Text` instance created using given plain object.\n\t */\n\t_clone() {\n\t\treturn new Text( this.data, this.getAttributes() );\n\t}\n\n\t/**\n\t * Creates a `Text` instance from given plain object (i.e. parsed JSON string).\n\t *\n\t * @param {Object} json Plain object to be converted to `Text`.\n\t * @returns {module:engine/model/text~Text} `Text` instance created using given plain object.\n\t */\n\tstatic fromJSON( json ) {\n\t\treturn new Text( json.data, json.attributes );\n\t}\n\n\t// @if CK_DEBUG_ENGINE // toString() {\n\t// @if CK_DEBUG_ENGINE // \treturn `#${ this.data }`;\n\t// @if CK_DEBUG_ENGINE // }\n\n\t// @if CK_DEBUG_ENGINE // logExtended() {\n\t// @if CK_DEBUG_ENGINE // \tconsole.log( `ModelText: ${ this }, attrs: ${ convertMapToStringifiedObject( this.getAttributes() ) }` );\n\t// @if CK_DEBUG_ENGINE // }\n\n\t// @if CK_DEBUG_ENGINE // log() {\n\t// @if CK_DEBUG_ENGINE // \tconsole.log( 'ModelText: ' + this );\n\t// @if CK_DEBUG_ENGINE // }\n}\n","import createNamedContext from \"./createNameContext\";\n\nconst historyContext = /*#__PURE__*/ createNamedContext(\"Router-History\");\nexport default historyContext;\n","// TODO: Replace with React.createContext once we can assume React 16+\nimport createContext from \"mini-create-react-context\";\n\nconst createNamedContext = name => {\n  const context = createContext();\n  context.displayName = name;\n\n  return context;\n};\n\nexport default createNamedContext;\n","// TODO: Replace with React.createContext once we can assume React 16+\nimport createContext from \"mini-create-react-context\";\n\nconst createNamedContext = name => {\n  const context = createContext();\n  context.displayName = name;\n\n  return context;\n};\n\nconst context = /*#__PURE__*/ createNamedContext(\"Router\");\nexport default context;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport warning from \"tiny-warning\";\n\nimport HistoryContext from \"./HistoryContext.js\";\nimport RouterContext from \"./RouterContext.js\";\n\n/**\n * The public API for putting history on context.\n */\nclass Router extends React.Component {\n  static computeRootMatch(pathname) {\n    return { path: \"/\", url: \"/\", params: {}, isExact: pathname === \"/\" };\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      location: props.history.location\n    };\n\n    // This is a bit of a hack. We have to start listening for location\n    // changes here in the constructor in case there are any <Redirect>s\n    // on the initial render. If there are, they will replace/push when\n    // they mount and since cDM fires in children before parents, we may\n    // get a new location before the <Router> is mounted.\n    this._isMounted = false;\n    this._pendingLocation = null;\n\n    if (!props.staticContext) {\n      this.unlisten = props.history.listen(location => {\n        if (this._isMounted) {\n          this.setState({ location });\n        } else {\n          this._pendingLocation = location;\n        }\n      });\n    }\n  }\n\n  componentDidMount() {\n    this._isMounted = true;\n\n    if (this._pendingLocation) {\n      this.setState({ location: this._pendingLocation });\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.unlisten) this.unlisten();\n  }\n\n  render() {\n    return (\n      <RouterContext.Provider\n        value={{\n          history: this.props.history,\n          location: this.state.location,\n          match: Router.computeRootMatch(this.state.location.pathname),\n          staticContext: this.props.staticContext\n        }}\n      >\n        <HistoryContext.Provider\n          children={this.props.children || null}\n          value={this.props.history}\n        />\n      </RouterContext.Provider>\n    );\n  }\n}\n\nif (__DEV__) {\n  Router.propTypes = {\n    children: PropTypes.node,\n    history: PropTypes.object.isRequired,\n    staticContext: PropTypes.object\n  };\n\n  Router.prototype.componentDidUpdate = function(prevProps) {\n    warning(\n      prevProps.history === this.props.history,\n      \"You cannot change <Router history>\"\n    );\n  };\n}\n\nexport default Router;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { createMemoryHistory as createHistory } from \"history\";\nimport warning from \"tiny-warning\";\n\nimport Router from \"./Router.js\";\n\n/**\n * The public API for a <Router> that stores location in memory.\n */\nclass MemoryRouter extends React.Component {\n  history = createHistory(this.props);\n\n  render() {\n    return <Router history={this.history} children={this.props.children} />;\n  }\n}\n\nif (__DEV__) {\n  MemoryRouter.propTypes = {\n    initialEntries: PropTypes.array,\n    initialIndex: PropTypes.number,\n    getUserConfirmation: PropTypes.func,\n    keyLength: PropTypes.number,\n    children: PropTypes.node\n  };\n\n  MemoryRouter.prototype.componentDidMount = function() {\n    warning(\n      !this.props.history,\n      \"<MemoryRouter> ignores the history prop. To use a custom history, \" +\n        \"use `import { Router }` instead of `import { MemoryRouter as Router }`.\"\n    );\n  };\n}\n\nexport default MemoryRouter;\n","import React from \"react\";\n\nclass Lifecycle extends React.Component {\n  componentDidMount() {\n    if (this.props.onMount) this.props.onMount.call(this, this);\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.onUpdate) this.props.onUpdate.call(this, this, prevProps);\n  }\n\n  componentWillUnmount() {\n    if (this.props.onUnmount) this.props.onUnmount.call(this, this);\n  }\n\n  render() {\n    return null;\n  }\n}\n\nexport default Lifecycle;\n","import pathToRegexp from \"path-to-regexp\";\n\nconst cache = {};\nconst cacheLimit = 10000;\nlet cacheCount = 0;\n\nfunction compilePath(path) {\n  if (cache[path]) return cache[path];\n\n  const generator = pathToRegexp.compile(path);\n\n  if (cacheCount < cacheLimit) {\n    cache[path] = generator;\n    cacheCount++;\n  }\n\n  return generator;\n}\n\n/**\n * Public API for generating a URL pathname from a path and parameters.\n */\nfunction generatePath(path = \"/\", params = {}) {\n  return path === \"/\" ? path : compilePath(path)(params, { pretty: true });\n}\n\nexport default generatePath;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { createLocation, locationsAreEqual } from \"history\";\nimport invariant from \"tiny-invariant\";\n\nimport Lifecycle from \"./Lifecycle.js\";\nimport RouterContext from \"./RouterContext.js\";\nimport generatePath from \"./generatePath.js\";\n\n/**\n * The public API for navigating programmatically with a component.\n */\nfunction Redirect({ computedMatch, to, push = false }) {\n  return (\n    <RouterContext.Consumer>\n      {context => {\n        invariant(context, \"You should not use <Redirect> outside a <Router>\");\n\n        const { history, staticContext } = context;\n\n        const method = push ? history.push : history.replace;\n        const location = createLocation(\n          computedMatch\n            ? typeof to === \"string\"\n              ? generatePath(to, computedMatch.params)\n              : {\n                  ...to,\n                  pathname: generatePath(to.pathname, computedMatch.params)\n                }\n            : to\n        );\n\n        // When rendering in a static context,\n        // set the new location immediately.\n        if (staticContext) {\n          method(location);\n          return null;\n        }\n\n        return (\n          <Lifecycle\n            onMount={() => {\n              method(location);\n            }}\n            onUpdate={(self, prevProps) => {\n              const prevLocation = createLocation(prevProps.to);\n              if (\n                !locationsAreEqual(prevLocation, {\n                  ...location,\n                  key: prevLocation.key\n                })\n              ) {\n                method(location);\n              }\n            }}\n            to={to}\n          />\n        );\n      }}\n    </RouterContext.Consumer>\n  );\n}\n\nif (__DEV__) {\n  Redirect.propTypes = {\n    push: PropTypes.bool,\n    from: PropTypes.string,\n    to: PropTypes.oneOfType([PropTypes.string, PropTypes.object]).isRequired\n  };\n}\n\nexport default Redirect;\n","import pathToRegexp from \"path-to-regexp\";\n\nconst cache = {};\nconst cacheLimit = 10000;\nlet cacheCount = 0;\n\nfunction compilePath(path, options) {\n  const cacheKey = `${options.end}${options.strict}${options.sensitive}`;\n  const pathCache = cache[cacheKey] || (cache[cacheKey] = {});\n\n  if (pathCache[path]) return pathCache[path];\n\n  const keys = [];\n  const regexp = pathToRegexp(path, keys, options);\n  const result = { regexp, keys };\n\n  if (cacheCount < cacheLimit) {\n    pathCache[path] = result;\n    cacheCount++;\n  }\n\n  return result;\n}\n\n/**\n * Public API for matching a URL pathname to a path.\n */\nfunction matchPath(pathname, options = {}) {\n  if (typeof options === \"string\" || Array.isArray(options)) {\n    options = { path: options };\n  }\n\n  const { path, exact = false, strict = false, sensitive = false } = options;\n\n  const paths = [].concat(path);\n\n  return paths.reduce((matched, path) => {\n    if (!path && path !== \"\") return null;\n    if (matched) return matched;\n\n    const { regexp, keys } = compilePath(path, {\n      end: exact,\n      strict,\n      sensitive\n    });\n    const match = regexp.exec(pathname);\n\n    if (!match) return null;\n\n    const [url, ...values] = match;\n    const isExact = pathname === url;\n\n    if (exact && !isExact) return null;\n\n    return {\n      path, // the path used to match\n      url: path === \"/\" && url === \"\" ? \"/\" : url, // the matched portion of the URL\n      isExact, // whether or not we matched exactly\n      params: keys.reduce((memo, key, index) => {\n        memo[key.name] = values[index];\n        return memo;\n      }, {})\n    };\n  }, null);\n}\n\nexport default matchPath;\n","import React from \"react\";\nimport { isValidElementType } from \"react-is\";\nimport PropTypes from \"prop-types\";\nimport invariant from \"tiny-invariant\";\nimport warning from \"tiny-warning\";\n\nimport RouterContext from \"./RouterContext.js\";\nimport matchPath from \"./matchPath.js\";\n\nfunction isEmptyChildren(children) {\n  return React.Children.count(children) === 0;\n}\n\nfunction evalChildrenDev(children, props, path) {\n  const value = children(props);\n\n  warning(\n    value !== undefined,\n    \"You returned `undefined` from the `children` function of \" +\n      `<Route${path ? ` path=\"${path}\"` : \"\"}>, but you ` +\n      \"should have returned a React element or `null`\"\n  );\n\n  return value || null;\n}\n\n/**\n * The public API for matching a single path and rendering.\n */\nclass Route extends React.Component {\n  render() {\n    return (\n      <RouterContext.Consumer>\n        {context => {\n          invariant(context, \"You should not use <Route> outside a <Router>\");\n\n          const location = this.props.location || context.location;\n          const match = this.props.computedMatch\n            ? this.props.computedMatch // <Switch> already computed the match for us\n            : this.props.path\n            ? matchPath(location.pathname, this.props)\n            : context.match;\n\n          const props = { ...context, location, match };\n\n          let { children, component, render } = this.props;\n\n          // Preact uses an empty array as children by\n          // default, so use null if that's the case.\n          if (Array.isArray(children) && children.length === 0) {\n            children = null;\n          }\n\n          return (\n            <RouterContext.Provider value={props}>\n              {props.match\n                ? children\n                  ? typeof children === \"function\"\n                    ? __DEV__\n                      ? evalChildrenDev(children, props, this.props.path)\n                      : children(props)\n                    : children\n                  : component\n                  ? React.createElement(component, props)\n                  : render\n                  ? render(props)\n                  : null\n                : typeof children === \"function\"\n                ? __DEV__\n                  ? evalChildrenDev(children, props, this.props.path)\n                  : children(props)\n                : null}\n            </RouterContext.Provider>\n          );\n        }}\n      </RouterContext.Consumer>\n    );\n  }\n}\n\nif (__DEV__) {\n  Route.propTypes = {\n    children: PropTypes.oneOfType([PropTypes.func, PropTypes.node]),\n    component: (props, propName) => {\n      if (props[propName] && !isValidElementType(props[propName])) {\n        return new Error(\n          `Invalid prop 'component' supplied to 'Route': the prop is not a valid React component`\n        );\n      }\n    },\n    exact: PropTypes.bool,\n    location: PropTypes.object,\n    path: PropTypes.oneOfType([\n      PropTypes.string,\n      PropTypes.arrayOf(PropTypes.string)\n    ]),\n    render: PropTypes.func,\n    sensitive: PropTypes.bool,\n    strict: PropTypes.bool\n  };\n\n  Route.prototype.componentDidMount = function() {\n    warning(\n      !(\n        this.props.children &&\n        !isEmptyChildren(this.props.children) &&\n        this.props.component\n      ),\n      \"You should not use <Route component> and <Route children> in the same route; <Route component> will be ignored\"\n    );\n\n    warning(\n      !(\n        this.props.children &&\n        !isEmptyChildren(this.props.children) &&\n        this.props.render\n      ),\n      \"You should not use <Route render> and <Route children> in the same route; <Route render> will be ignored\"\n    );\n\n    warning(\n      !(this.props.component && this.props.render),\n      \"You should not use <Route component> and <Route render> in the same route; <Route render> will be ignored\"\n    );\n  };\n\n  Route.prototype.componentDidUpdate = function(prevProps) {\n    warning(\n      !(this.props.location && !prevProps.location),\n      '<Route> elements should not change from uncontrolled to controlled (or vice versa). You initially used no \"location\" prop and then provided one on a subsequent render.'\n    );\n\n    warning(\n      !(!this.props.location && prevProps.location),\n      '<Route> elements should not change from controlled to uncontrolled (or vice versa). You provided a \"location\" prop initially but omitted it on a subsequent render.'\n    );\n  };\n}\n\nexport default Route;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { createLocation, createPath } from \"history\";\nimport invariant from \"tiny-invariant\";\nimport warning from \"tiny-warning\";\n\nimport Router from \"./Router.js\";\n\nfunction addLeadingSlash(path) {\n  return path.charAt(0) === \"/\" ? path : \"/\" + path;\n}\n\nfunction addBasename(basename, location) {\n  if (!basename) return location;\n\n  return {\n    ...location,\n    pathname: addLeadingSlash(basename) + location.pathname\n  };\n}\n\nfunction stripBasename(basename, location) {\n  if (!basename) return location;\n\n  const base = addLeadingSlash(basename);\n\n  if (location.pathname.indexOf(base) !== 0) return location;\n\n  return {\n    ...location,\n    pathname: location.pathname.substr(base.length)\n  };\n}\n\nfunction createURL(location) {\n  return typeof location === \"string\" ? location : createPath(location);\n}\n\nfunction staticHandler(methodName) {\n  return () => {\n    invariant(false, \"You cannot %s with <StaticRouter>\", methodName);\n  };\n}\n\nfunction noop() {}\n\n/**\n * The public top-level API for a \"static\" <Router>, so-called because it\n * can't actually change the current location. Instead, it just records\n * location changes in a context object. Useful mainly in testing and\n * server-rendering scenarios.\n */\nclass StaticRouter extends React.Component {\n  navigateTo(location, action) {\n    const { basename = \"\", context = {} } = this.props;\n    context.action = action;\n    context.location = addBasename(basename, createLocation(location));\n    context.url = createURL(context.location);\n  }\n\n  handlePush = location => this.navigateTo(location, \"PUSH\");\n  handleReplace = location => this.navigateTo(location, \"REPLACE\");\n  handleListen = () => noop;\n  handleBlock = () => noop;\n\n  render() {\n    const { basename = \"\", context = {}, location = \"/\", ...rest } = this.props;\n\n    const history = {\n      createHref: path => addLeadingSlash(basename + createURL(path)),\n      action: \"POP\",\n      location: stripBasename(basename, createLocation(location)),\n      push: this.handlePush,\n      replace: this.handleReplace,\n      go: staticHandler(\"go\"),\n      goBack: staticHandler(\"goBack\"),\n      goForward: staticHandler(\"goForward\"),\n      listen: this.handleListen,\n      block: this.handleBlock\n    };\n\n    return <Router {...rest} history={history} staticContext={context} />;\n  }\n}\n\nif (__DEV__) {\n  StaticRouter.propTypes = {\n    basename: PropTypes.string,\n    context: PropTypes.object,\n    location: PropTypes.oneOfType([PropTypes.string, PropTypes.object])\n  };\n\n  StaticRouter.prototype.componentDidMount = function() {\n    warning(\n      !this.props.history,\n      \"<StaticRouter> ignores the history prop. To use a custom history, \" +\n        \"use `import { Router }` instead of `import { StaticRouter as Router }`.\"\n    );\n  };\n}\n\nexport default StaticRouter;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport invariant from \"tiny-invariant\";\nimport warning from \"tiny-warning\";\n\nimport RouterContext from \"./RouterContext.js\";\nimport matchPath from \"./matchPath.js\";\n\n/**\n * The public API for rendering the first <Route> that matches.\n */\nclass Switch extends React.Component {\n  render() {\n    return (\n      <RouterContext.Consumer>\n        {context => {\n          invariant(context, \"You should not use <Switch> outside a <Router>\");\n\n          const location = this.props.location || context.location;\n\n          let element, match;\n\n          // We use React.Children.forEach instead of React.Children.toArray().find()\n          // here because toArray adds keys to all child elements and we do not want\n          // to trigger an unmount/remount for two <Route>s that render the same\n          // component at different URLs.\n          React.Children.forEach(this.props.children, child => {\n            if (match == null && React.isValidElement(child)) {\n              element = child;\n\n              const path = child.props.path || child.props.from;\n\n              match = path\n                ? matchPath(location.pathname, { ...child.props, path })\n                : context.match;\n            }\n          });\n\n          return match\n            ? React.cloneElement(element, { location, computedMatch: match })\n            : null;\n        }}\n      </RouterContext.Consumer>\n    );\n  }\n}\n\nif (__DEV__) {\n  Switch.propTypes = {\n    children: PropTypes.node,\n    location: PropTypes.object\n  };\n\n  Switch.prototype.componentDidUpdate = function(prevProps) {\n    warning(\n      !(this.props.location && !prevProps.location),\n      '<Switch> elements should not change from uncontrolled to controlled (or vice versa). You initially used no \"location\" prop and then provided one on a subsequent render.'\n    );\n\n    warning(\n      !(!this.props.location && prevProps.location),\n      '<Switch> elements should not change from controlled to uncontrolled (or vice versa). You provided a \"location\" prop initially but omitted it on a subsequent render.'\n    );\n  };\n}\n\nexport default Switch;\n","import React from \"react\";\nimport invariant from \"tiny-invariant\";\n\nimport Context from \"./RouterContext.js\";\nimport HistoryContext from \"./HistoryContext.js\";\nimport matchPath from \"./matchPath.js\";\n\nconst useContext = React.useContext;\n\nexport function useHistory() {\n  if (__DEV__) {\n    invariant(\n      typeof useContext === \"function\",\n      \"You must use React >= 16.8 in order to use useHistory()\"\n    );\n  }\n\n  return useContext(HistoryContext);\n}\n\nexport function useLocation() {\n  if (__DEV__) {\n    invariant(\n      typeof useContext === \"function\",\n      \"You must use React >= 16.8 in order to use useLocation()\"\n    );\n  }\n\n  return useContext(Context).location;\n}\n\nexport function useParams() {\n  if (__DEV__) {\n    invariant(\n      typeof useContext === \"function\",\n      \"You must use React >= 16.8 in order to use useParams()\"\n    );\n  }\n\n  const match = useContext(Context).match;\n  return match ? match.params : {};\n}\n\nexport function useRouteMatch(path) {\n  if (__DEV__) {\n    invariant(\n      typeof useContext === \"function\",\n      \"You must use React >= 16.8 in order to use useRouteMatch()\"\n    );\n  }\n\n  const location = useLocation();\n  const match = useContext(Context).match;\n\n  return path ? matchPath(location.pathname, path) : match;\n}\n","import objectWithoutPropertiesLoose from \"../objectWithoutPropertiesLoose/_index.mjs\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nexport default isObject;\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/observablemixin\n */\n\nimport EmitterMixin from './emittermixin';\nimport CKEditorError from './ckeditorerror';\nimport { extend, isObject } from 'lodash-es';\n\nconst observablePropertiesSymbol = Symbol( 'observableProperties' );\nconst boundObservablesSymbol = Symbol( 'boundObservables' );\nconst boundPropertiesSymbol = Symbol( 'boundProperties' );\n\n/**\n * A mixin that injects the \"observable properties\" and data binding functionality described in the\n * {@link ~Observable} interface.\n *\n * Read more about the concept of observables in the:\n * * {@glink framework/guides/architecture/core-editor-architecture#event-system-and-observables \"Event system and observables\"}\n * section of the {@glink framework/guides/architecture/core-editor-architecture \"Core editor architecture\"} guide,\n * * {@glink framework/guides/deep-dive/observables \"Observables\" deep dive} guide.\n *\n * @mixin ObservableMixin\n * @mixes module:utils/emittermixin~EmitterMixin\n * @implements module:utils/observablemixin~Observable\n */\nconst ObservableMixin = {\n\t/**\n\t * @inheritDoc\n\t */\n\tset( name, value ) {\n\t\t// If the first parameter is an Object, iterate over its properties.\n\t\tif ( isObject( name ) ) {\n\t\t\tObject.keys( name ).forEach( property => {\n\t\t\t\tthis.set( property, name[ property ] );\n\t\t\t}, this );\n\n\t\t\treturn;\n\t\t}\n\n\t\tinitObservable( this );\n\n\t\tconst properties = this[ observablePropertiesSymbol ];\n\n\t\tif ( ( name in this ) && !properties.has( name ) ) {\n\t\t\t/**\n\t\t\t * Cannot override an existing property.\n\t\t\t *\n\t\t\t * This error is thrown when trying to {@link ~Observable#set set} a property with\n\t\t\t * a name of an already existing property. For example:\n\t\t\t *\n\t\t\t *\t\tlet observable = new Model();\n\t\t\t *\t\tobservable.property = 1;\n\t\t\t *\t\tobservable.set( 'property', 2 );\t\t\t// throws\n\t\t\t *\n\t\t\t *\t\tobservable.set( 'property', 1 );\n\t\t\t *\t\tobservable.set( 'property', 2 );\t\t\t// ok, because this is an existing property.\n\t\t\t *\n\t\t\t * @error observable-set-cannot-override\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'observable-set-cannot-override', this );\n\t\t}\n\n\t\tObject.defineProperty( this, name, {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: true,\n\n\t\t\tget() {\n\t\t\t\treturn properties.get( name );\n\t\t\t},\n\n\t\t\tset( value ) {\n\t\t\t\tconst oldValue = properties.get( name );\n\n\t\t\t\t// Fire `set` event before the new value will be set to make it possible\n\t\t\t\t// to override observable property without affecting `change` event.\n\t\t\t\t// See https://github.com/ckeditor/ckeditor5-utils/issues/171.\n\t\t\t\tlet newValue = this.fire( 'set:' + name, name, value, oldValue );\n\n\t\t\t\tif ( newValue === undefined ) {\n\t\t\t\t\tnewValue = value;\n\t\t\t\t}\n\n\t\t\t\t// Allow undefined as an initial value like A.define( 'x', undefined ) (#132).\n\t\t\t\t// Note: When properties map has no such own property, then its value is undefined.\n\t\t\t\tif ( oldValue !== newValue || !properties.has( name ) ) {\n\t\t\t\t\tproperties.set( name, newValue );\n\t\t\t\t\tthis.fire( 'change:' + name, name, newValue, oldValue );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\n\t\tthis[ name ] = value;\n\t},\n\n\t/**\n\t * @inheritDoc\n\t */\n\tbind( ...bindProperties ) {\n\t\tif ( !bindProperties.length || !isStringArray( bindProperties ) ) {\n\t\t\t/**\n\t\t\t * All properties must be strings.\n\t\t\t *\n\t\t\t * @error observable-bind-wrong-properties\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'observable-bind-wrong-properties', this );\n\t\t}\n\n\t\tif ( ( new Set( bindProperties ) ).size !== bindProperties.length ) {\n\t\t\t/**\n\t\t\t * Properties must be unique.\n\t\t\t *\n\t\t\t * @error observable-bind-duplicate-properties\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'observable-bind-duplicate-properties', this );\n\t\t}\n\n\t\tinitObservable( this );\n\n\t\tconst boundProperties = this[ boundPropertiesSymbol ];\n\n\t\tbindProperties.forEach( propertyName => {\n\t\t\tif ( boundProperties.has( propertyName ) ) {\n\t\t\t\t/**\n\t\t\t\t * Cannot bind the same property more than once.\n\t\t\t\t *\n\t\t\t\t * @error observable-bind-rebind\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError( 'observable-bind-rebind', this );\n\t\t\t}\n\t\t} );\n\n\t\tconst bindings = new Map();\n\n\t\t// @typedef {Object} Binding\n\t\t// @property {Array} property Property which is bound.\n\t\t// @property {Array} to Array of observable–property components of the binding (`{ observable: ..., property: .. }`).\n\t\t// @property {Array} callback A function which processes `to` components.\n\t\tbindProperties.forEach( a => {\n\t\t\tconst binding = { property: a, to: [] };\n\n\t\t\tboundProperties.set( a, binding );\n\t\t\tbindings.set( a, binding );\n\t\t} );\n\n\t\t// @typedef {Object} BindChain\n\t\t// @property {Function} to See {@link ~ObservableMixin#_bindTo}.\n\t\t// @property {Function} toMany See {@link ~ObservableMixin#_bindToMany}.\n\t\t// @property {module:utils/observablemixin~Observable} _observable The observable which initializes the binding.\n\t\t// @property {Array} _bindProperties Array of `_observable` properties to be bound.\n\t\t// @property {Array} _to Array of `to()` observable–properties (`{ observable: toObservable, properties: ...toProperties }`).\n\t\t// @property {Map} _bindings Stores bindings to be kept in\n\t\t// {@link ~ObservableMixin#_boundProperties}/{@link ~ObservableMixin#_boundObservables}\n\t\t// initiated in this binding chain.\n\t\treturn {\n\t\t\tto: bindTo,\n\t\t\ttoMany: bindToMany,\n\n\t\t\t_observable: this,\n\t\t\t_bindProperties: bindProperties,\n\t\t\t_to: [],\n\t\t\t_bindings: bindings\n\t\t};\n\t},\n\n\t/**\n\t * @inheritDoc\n\t */\n\tunbind( ...unbindProperties ) {\n\t\t// Nothing to do here if not inited yet.\n\t\tif ( !( this[ observablePropertiesSymbol ] ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst boundProperties = this[ boundPropertiesSymbol ];\n\t\tconst boundObservables = this[ boundObservablesSymbol ];\n\n\t\tif ( unbindProperties.length ) {\n\t\t\tif ( !isStringArray( unbindProperties ) ) {\n\t\t\t\t/**\n\t\t\t\t * Properties must be strings.\n\t\t\t\t *\n\t\t\t\t * @error observable-unbind-wrong-properties\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError( 'observable-unbind-wrong-properties', this );\n\t\t\t}\n\n\t\t\tunbindProperties.forEach( propertyName => {\n\t\t\t\tconst binding = boundProperties.get( propertyName );\n\n\t\t\t\t// Nothing to do if the binding is not defined\n\t\t\t\tif ( !binding ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tlet toObservable, toProperty, toProperties, toPropertyBindings;\n\n\t\t\t\tbinding.to.forEach( to => {\n\t\t\t\t\t// TODO: ES6 destructuring.\n\t\t\t\t\ttoObservable = to[ 0 ];\n\t\t\t\t\ttoProperty = to[ 1 ];\n\t\t\t\t\ttoProperties = boundObservables.get( toObservable );\n\t\t\t\t\ttoPropertyBindings = toProperties[ toProperty ];\n\n\t\t\t\t\ttoPropertyBindings.delete( binding );\n\n\t\t\t\t\tif ( !toPropertyBindings.size ) {\n\t\t\t\t\t\tdelete toProperties[ toProperty ];\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( !Object.keys( toProperties ).length ) {\n\t\t\t\t\t\tboundObservables.delete( toObservable );\n\t\t\t\t\t\tthis.stopListening( toObservable, 'change' );\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t\tboundProperties.delete( propertyName );\n\t\t\t} );\n\t\t} else {\n\t\t\tboundObservables.forEach( ( bindings, boundObservable ) => {\n\t\t\t\tthis.stopListening( boundObservable, 'change' );\n\t\t\t} );\n\n\t\t\tboundObservables.clear();\n\t\t\tboundProperties.clear();\n\t\t}\n\t},\n\n\t/**\n\t * @inheritDoc\n\t */\n\tdecorate( methodName ) {\n\t\tconst originalMethod = this[ methodName ];\n\n\t\tif ( !originalMethod ) {\n\t\t\t/**\n\t\t\t * Cannot decorate an undefined method.\n\t\t\t *\n\t\t\t * @error observablemixin-cannot-decorate-undefined\n\t\t\t * @param {Object} object The object which method should be decorated.\n\t\t\t * @param {String} methodName Name of the method which does not exist.\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'observablemixin-cannot-decorate-undefined',\n\t\t\t\tthis,\n\t\t\t\t{ object: this, methodName }\n\t\t\t);\n\t\t}\n\n\t\tthis.on( methodName, ( evt, args ) => {\n\t\t\tevt.return = originalMethod.apply( this, args );\n\t\t} );\n\n\t\tthis[ methodName ] = function( ...args ) {\n\t\t\treturn this.fire( methodName, args );\n\t\t};\n\t}\n};\n\nextend( ObservableMixin, EmitterMixin );\n\nexport default ObservableMixin;\n\n// Init symbol properties needed for the observable mechanism to work.\n//\n// @private\n// @param {module:utils/observablemixin~ObservableMixin} observable\nfunction initObservable( observable ) {\n\t// Do nothing if already inited.\n\tif ( observable[ observablePropertiesSymbol ] ) {\n\t\treturn;\n\t}\n\n\t// The internal hash containing the observable's state.\n\t//\n\t// @private\n\t// @type {Map}\n\tObject.defineProperty( observable, observablePropertiesSymbol, {\n\t\tvalue: new Map()\n\t} );\n\n\t// Map containing bindings to external observables. It shares the binding objects\n\t// (`{ observable: A, property: 'a', to: ... }`) with {@link module:utils/observablemixin~ObservableMixin#_boundProperties} and\n\t// it is used to observe external observables to update own properties accordingly.\n\t// See {@link module:utils/observablemixin~ObservableMixin#bind}.\n\t//\n\t//\t\tA.bind( 'a', 'b', 'c' ).to( B, 'x', 'y', 'x' );\n\t//\t\tconsole.log( A._boundObservables );\n\t//\n\t//\t\t\tMap( {\n\t//\t\t\t\tB: {\n\t//\t\t\t\t\tx: Set( [\n\t//\t\t\t\t\t\t{ observable: A, property: 'a', to: [ [ B, 'x' ] ] },\n\t//\t\t\t\t\t\t{ observable: A, property: 'c', to: [ [ B, 'x' ] ] }\n\t//\t\t\t\t\t] ),\n\t//\t\t\t\t\ty: Set( [\n\t//\t\t\t\t\t\t{ observable: A, property: 'b', to: [ [ B, 'y' ] ] },\n\t//\t\t\t\t\t] )\n\t//\t\t\t\t}\n\t//\t\t\t} )\n\t//\n\t//\t\tA.bind( 'd' ).to( B, 'z' ).to( C, 'w' ).as( callback );\n\t//\t\tconsole.log( A._boundObservables );\n\t//\n\t//\t\t\tMap( {\n\t//\t\t\t\tB: {\n\t//\t\t\t\t\tx: Set( [\n\t//\t\t\t\t\t\t{ observable: A, property: 'a', to: [ [ B, 'x' ] ] },\n\t//\t\t\t\t\t\t{ observable: A, property: 'c', to: [ [ B, 'x' ] ] }\n\t//\t\t\t\t\t] ),\n\t//\t\t\t\t\ty: Set( [\n\t//\t\t\t\t\t\t{ observable: A, property: 'b', to: [ [ B, 'y' ] ] },\n\t//\t\t\t\t\t] ),\n\t//\t\t\t\t\tz: Set( [\n\t//\t\t\t\t\t\t{ observable: A, property: 'd', to: [ [ B, 'z' ], [ C, 'w' ] ], callback: callback }\n\t//\t\t\t\t\t] )\n\t//\t\t\t\t},\n\t//\t\t\t\tC: {\n\t//\t\t\t\t\tw: Set( [\n\t//\t\t\t\t\t\t{ observable: A, property: 'd', to: [ [ B, 'z' ], [ C, 'w' ] ], callback: callback }\n\t//\t\t\t\t\t] )\n\t//\t\t\t\t}\n\t//\t\t\t} )\n\t//\n\t// @private\n\t// @type {Map}\n\tObject.defineProperty( observable, boundObservablesSymbol, {\n\t\tvalue: new Map()\n\t} );\n\n\t// Object that stores which properties of this observable are bound and how. It shares\n\t// the binding objects (`{ observable: A, property: 'a', to: ... }`) with\n\t// {@link module:utils/observablemixin~ObservableMixin#_boundObservables}. This data structure is\n\t// a reverse of {@link module:utils/observablemixin~ObservableMixin#_boundObservables} and it is helpful for\n\t// {@link module:utils/observablemixin~ObservableMixin#unbind}.\n\t//\n\t// See {@link module:utils/observablemixin~ObservableMixin#bind}.\n\t//\n\t//\t\tA.bind( 'a', 'b', 'c' ).to( B, 'x', 'y', 'x' );\n\t//\t\tconsole.log( A._boundProperties );\n\t//\n\t//\t\t\tMap( {\n\t//\t\t\t\ta: { observable: A, property: 'a', to: [ [ B, 'x' ] ] },\n\t//\t\t\t\tb: { observable: A, property: 'b', to: [ [ B, 'y' ] ] },\n\t//\t\t\t\tc: { observable: A, property: 'c', to: [ [ B, 'x' ] ] }\n\t//\t\t\t} )\n\t//\n\t//\t\tA.bind( 'd' ).to( B, 'z' ).to( C, 'w' ).as( callback );\n\t//\t\tconsole.log( A._boundProperties );\n\t//\n\t//\t\t\tMap( {\n\t//\t\t\t\ta: { observable: A, property: 'a', to: [ [ B, 'x' ] ] },\n\t//\t\t\t\tb: { observable: A, property: 'b', to: [ [ B, 'y' ] ] },\n\t//\t\t\t\tc: { observable: A, property: 'c', to: [ [ B, 'x' ] ] },\n\t//\t\t\t\td: { observable: A, property: 'd', to: [ [ B, 'z' ], [ C, 'w' ] ], callback: callback }\n\t//\t\t\t} )\n\t//\n\t// @private\n\t// @type {Map}\n\tObject.defineProperty( observable, boundPropertiesSymbol, {\n\t\tvalue: new Map()\n\t} );\n}\n\n// A chaining for {@link module:utils/observablemixin~ObservableMixin#bind} providing `.to()` interface.\n//\n// @private\n// @param {...[Observable|String|Function]} args Arguments of the `.to( args )` binding.\nfunction bindTo( ...args ) {\n\tconst parsedArgs = parseBindToArgs( ...args );\n\tconst bindingsKeys = Array.from( this._bindings.keys() );\n\tconst numberOfBindings = bindingsKeys.length;\n\n\t// Eliminate A.bind( 'x' ).to( B, C )\n\tif ( !parsedArgs.callback && parsedArgs.to.length > 1 ) {\n\t\t/**\n\t\t * Binding multiple observables only possible with callback.\n\t\t *\n\t\t * @error observable-bind-to-no-callback\n\t\t */\n\t\tthrow new CKEditorError( 'observable-bind-to-no-callback', this );\n\t}\n\n\t// Eliminate A.bind( 'x', 'y' ).to( B, callback )\n\tif ( numberOfBindings > 1 && parsedArgs.callback ) {\n\t\t/**\n\t\t * Cannot bind multiple properties and use a callback in one binding.\n\t\t *\n\t\t * @error observable-bind-to-extra-callback\n\t\t */\n\t\tthrow new CKEditorError(\n\t\t\t'observable-bind-to-extra-callback',\n\t\t\tthis\n\t\t);\n\t}\n\n\tparsedArgs.to.forEach( to => {\n\t\t// Eliminate A.bind( 'x', 'y' ).to( B, 'a' )\n\t\tif ( to.properties.length && to.properties.length !== numberOfBindings ) {\n\t\t\t/**\n\t\t\t * The number of properties must match.\n\t\t\t *\n\t\t\t * @error observable-bind-to-properties-length\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'observable-bind-to-properties-length', this );\n\t\t}\n\n\t\t// When no to.properties specified, observing source properties instead i.e.\n\t\t// A.bind( 'x', 'y' ).to( B ) -> Observe B.x and B.y\n\t\tif ( !to.properties.length ) {\n\t\t\tto.properties = this._bindProperties;\n\t\t}\n\t} );\n\n\tthis._to = parsedArgs.to;\n\n\t// Fill {@link BindChain#_bindings} with callback. When the callback is set there's only one binding.\n\tif ( parsedArgs.callback ) {\n\t\tthis._bindings.get( bindingsKeys[ 0 ] ).callback = parsedArgs.callback;\n\t}\n\n\tattachBindToListeners( this._observable, this._to );\n\n\t// Update observable._boundProperties and observable._boundObservables.\n\tupdateBindToBound( this );\n\n\t// Set initial values of bound properties.\n\tthis._bindProperties.forEach( propertyName => {\n\t\tupdateBoundObservableProperty( this._observable, propertyName );\n\t} );\n}\n\n// Binds to an attribute in a set of iterable observables.\n//\n// @private\n// @param {Array.<Observable>} observables\n// @param {String} attribute\n// @param {Function} callback\nfunction bindToMany( observables, attribute, callback ) {\n\tif ( this._bindings.size > 1 ) {\n\t\t/**\n\t\t * Binding one attribute to many observables only possible with one attribute.\n\t\t *\n\t\t * @error observable-bind-to-many-not-one-binding\n\t\t */\n\t\tthrow new CKEditorError( 'observable-bind-to-many-not-one-binding', this );\n\t}\n\n\tthis.to(\n\t\t// Bind to #attribute of each observable...\n\t\t...getBindingTargets( observables, attribute ),\n\t\t// ...using given callback to parse attribute values.\n\t\tcallback\n\t);\n}\n\n// Returns an array of binding components for\n// {@link Observable#bind} from a set of iterable observables.\n//\n// @param {Array.<Observable>} observables\n// @param {String} attribute\n// @returns {Array.<String|Observable>}\nfunction getBindingTargets( observables, attribute ) {\n\tconst observableAndAttributePairs = observables.map( observable => [ observable, attribute ] );\n\n\t// Merge pairs to one-dimension array of observables and attributes.\n\treturn Array.prototype.concat.apply( [], observableAndAttributePairs );\n}\n\n// Check if all entries of the array are of `String` type.\n//\n// @private\n// @param {Array} arr An array to be checked.\n// @returns {Boolean}\nfunction isStringArray( arr ) {\n\treturn arr.every( a => typeof a == 'string' );\n}\n\n// Parses and validates {@link Observable#bind}`.to( args )` arguments and returns\n// an object with a parsed structure. For example\n//\n//\t\tA.bind( 'x' ).to( B, 'a', C, 'b', call );\n//\n// becomes\n//\n//\t\t{\n//\t\t\tto: [\n//\t\t\t\t{ observable: B, properties: [ 'a' ] },\n//\t\t\t\t{ observable: C, properties: [ 'b' ] },\n//\t\t\t],\n//\t\t\tcallback: call\n// \t\t}\n//\n// @private\n// @param {...*} args Arguments of {@link Observable#bind}`.to( args )`.\n// @returns {Object}\nfunction parseBindToArgs( ...args ) {\n\t// Eliminate A.bind( 'x' ).to()\n\tif ( !args.length ) {\n\t\t/**\n\t\t * Invalid argument syntax in `to()`.\n\t\t *\n\t\t * @error observable-bind-to-parse-error\n\t\t */\n\t\tthrow new CKEditorError( 'observable-bind-to-parse-error', null );\n\t}\n\n\tconst parsed = { to: [] };\n\tlet lastObservable;\n\n\tif ( typeof args[ args.length - 1 ] == 'function' ) {\n\t\tparsed.callback = args.pop();\n\t}\n\n\targs.forEach( a => {\n\t\tif ( typeof a == 'string' ) {\n\t\t\tlastObservable.properties.push( a );\n\t\t} else if ( typeof a == 'object' ) {\n\t\t\tlastObservable = { observable: a, properties: [] };\n\t\t\tparsed.to.push( lastObservable );\n\t\t} else {\n\t\t\tthrow new CKEditorError( 'observable-bind-to-parse-error', null );\n\t\t}\n\t} );\n\n\treturn parsed;\n}\n\n// Synchronizes {@link module:utils/observablemixin#_boundObservables} with {@link Binding}.\n//\n// @private\n// @param {Binding} binding A binding to store in {@link Observable#_boundObservables}.\n// @param {Observable} toObservable A observable, which is a new component of `binding`.\n// @param {String} toPropertyName A name of `toObservable`'s property, a new component of the `binding`.\nfunction updateBoundObservables( observable, binding, toObservable, toPropertyName ) {\n\tconst boundObservables = observable[ boundObservablesSymbol ];\n\tconst bindingsToObservable = boundObservables.get( toObservable );\n\tconst bindings = bindingsToObservable || {};\n\n\tif ( !bindings[ toPropertyName ] ) {\n\t\tbindings[ toPropertyName ] = new Set();\n\t}\n\n\t// Pass the binding to a corresponding Set in `observable._boundObservables`.\n\tbindings[ toPropertyName ].add( binding );\n\n\tif ( !bindingsToObservable ) {\n\t\tboundObservables.set( toObservable, bindings );\n\t}\n}\n\n// Synchronizes {@link Observable#_boundProperties} and {@link Observable#_boundObservables}\n// with {@link BindChain}.\n//\n// Assuming the following binding being created\n//\n// \t\tA.bind( 'a', 'b' ).to( B, 'x', 'y' );\n//\n// the following bindings were initialized by {@link Observable#bind} in {@link BindChain#_bindings}:\n//\n// \t\t{\n// \t\t\ta: { observable: A, property: 'a', to: [] },\n// \t\t\tb: { observable: A, property: 'b', to: [] },\n// \t\t}\n//\n// Iterate over all bindings in this chain and fill their `to` properties with\n// corresponding to( ... ) arguments (components of the binding), so\n//\n// \t\t{\n// \t\t\ta: { observable: A, property: 'a', to: [ B, 'x' ] },\n// \t\t\tb: { observable: A, property: 'b', to: [ B, 'y' ] },\n// \t\t}\n//\n// Then update the structure of {@link Observable#_boundObservables} with updated\n// binding, so it becomes:\n//\n// \t\tMap( {\n// \t\t\tB: {\n// \t\t\t\tx: Set( [\n// \t\t\t\t\t{ observable: A, property: 'a', to: [ [ B, 'x' ] ] }\n// \t\t\t\t] ),\n// \t\t\t\ty: Set( [\n// \t\t\t\t\t{ observable: A, property: 'b', to: [ [ B, 'y' ] ] },\n// \t\t\t\t] )\n//\t\t\t}\n// \t\t} )\n//\n// @private\n// @param {BindChain} chain The binding initialized by {@link Observable#bind}.\nfunction updateBindToBound( chain ) {\n\tlet toProperty;\n\n\tchain._bindings.forEach( ( binding, propertyName ) => {\n\t\t// Note: For a binding without a callback, this will run only once\n\t\t// like in A.bind( 'x', 'y' ).to( B, 'a', 'b' )\n\t\t// TODO: ES6 destructuring.\n\t\tchain._to.forEach( to => {\n\t\t\ttoProperty = to.properties[ binding.callback ? 0 : chain._bindProperties.indexOf( propertyName ) ];\n\n\t\t\tbinding.to.push( [ to.observable, toProperty ] );\n\t\t\tupdateBoundObservables( chain._observable, binding, to.observable, toProperty );\n\t\t} );\n\t} );\n}\n\n// Updates an property of a {@link Observable} with a value\n// determined by an entry in {@link Observable#_boundProperties}.\n//\n// @private\n// @param {Observable} observable A observable which property is to be updated.\n// @param {String} propertyName An property to be updated.\nfunction updateBoundObservableProperty( observable, propertyName ) {\n\tconst boundProperties = observable[ boundPropertiesSymbol ];\n\tconst binding = boundProperties.get( propertyName );\n\tlet propertyValue;\n\n\t// When a binding with callback is created like\n\t//\n\t// \t\tA.bind( 'a' ).to( B, 'b', C, 'c', callback );\n\t//\n\t// collect B.b and C.c, then pass them to callback to set A.a.\n\tif ( binding.callback ) {\n\t\tpropertyValue = binding.callback.apply( observable, binding.to.map( to => to[ 0 ][ to[ 1 ] ] ) );\n\t} else {\n\t\tpropertyValue = binding.to[ 0 ];\n\t\tpropertyValue = propertyValue[ 0 ][ propertyValue[ 1 ] ];\n\t}\n\n\tif ( Object.prototype.hasOwnProperty.call( observable, propertyName ) ) {\n\t\tobservable[ propertyName ] = propertyValue;\n\t} else {\n\t\tobservable.set( propertyName, propertyValue );\n\t}\n}\n\n// Starts listening to changes in {@link BindChain._to} observables to update\n// {@link BindChain._observable} {@link BindChain._bindProperties}. Also sets the\n// initial state of {@link BindChain._observable}.\n//\n// @private\n// @param {BindChain} chain The chain initialized by {@link Observable#bind}.\nfunction attachBindToListeners( observable, toBindings ) {\n\ttoBindings.forEach( to => {\n\t\tconst boundObservables = observable[ boundObservablesSymbol ];\n\t\tlet bindings;\n\n\t\t// If there's already a chain between the observables (`observable` listens to\n\t\t// `to.observable`), there's no need to create another `change` event listener.\n\t\tif ( !boundObservables.get( to.observable ) ) {\n\t\t\tobservable.listenTo( to.observable, 'change', ( evt, propertyName ) => {\n\t\t\t\tbindings = boundObservables.get( to.observable )[ propertyName ];\n\n\t\t\t\t// Note: to.observable will fire for any property change, react\n\t\t\t\t// to changes of properties which are bound only.\n\t\t\t\tif ( bindings ) {\n\t\t\t\t\tbindings.forEach( binding => {\n\t\t\t\t\t\tupdateBoundObservableProperty( observable, binding.property );\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t} );\n}\n\n/**\n * An interface which adds \"observable properties\" and data binding functionality.\n *\n * Can be easily implemented by a class by mixing the {@link module:utils/observablemixin~ObservableMixin} mixin.\n *\n * Read more about the usage of this interface in the:\n * * {@glink framework/guides/architecture/core-editor-architecture#event-system-and-observables \"Event system and observables\"}\n * section of the {@glink framework/guides/architecture/core-editor-architecture \"Core editor architecture\"} guide,\n * * {@glink framework/guides/deep-dive/observables \"Observables\" deep dive} guide.\n *\n * @interface Observable\n * @extends module:utils/emittermixin~Emitter\n */\n\n/**\n * Fired when a property changed value.\n *\n *\t\tobservable.set( 'prop', 1 );\n *\n *\t\tobservable.on( 'change:prop', ( evt, propertyName, newValue, oldValue ) => {\n *\t\t\tconsole.log( `${ propertyName } has changed from ${ oldValue } to ${ newValue }` );\n *\t\t} );\n *\n *\t\tobservable.prop = 2; // -> 'prop has changed from 1 to 2'\n *\n * @event change:{property}\n * @param {String} name The property name.\n * @param {*} value The new property value.\n * @param {*} oldValue The previous property value.\n */\n\n/**\n * Fired when a property value is going to be set but is not set yet (before the `change` event is fired).\n *\n * You can control the final value of the property by using\n * the {@link module:utils/eventinfo~EventInfo#return event's `return` property}.\n *\n *\t\tobservable.set( 'prop', 1 );\n *\n *\t\tobservable.on( 'set:prop', ( evt, propertyName, newValue, oldValue ) => {\n *\t\t\tconsole.log( `Value is going to be changed from ${ oldValue } to ${ newValue }` );\n *\t\t\tconsole.log( `Current property value is ${ observable[ propertyName ] }` );\n *\n *\t\t\t// Let's override the value.\n *\t\t\tevt.return = 3;\n *\t\t} );\n *\n *\t\tobservable.on( 'change:prop', ( evt, propertyName, newValue, oldValue ) => {\n *\t\t\tconsole.log( `Value has changed from ${ oldValue } to ${ newValue }` );\n *\t\t} );\n *\n *\t\tobservable.prop = 2; // -> 'Value is going to be changed from 1 to 2'\n *\t\t                     // -> 'Current property value is 1'\n *\t\t                     // -> 'Value has changed from 1 to 3'\n *\n * **Note:** The event is fired even when the new value is the same as the old value.\n *\n * @event set:{property}\n * @param {String} name The property name.\n * @param {*} value The new property value.\n * @param {*} oldValue The previous property value.\n */\n\n/**\n * Creates and sets the value of an observable property of this object. Such a property becomes a part\n * of the state and is observable.\n *\n * It accepts also a single object literal containing key/value pairs with properties to be set.\n *\n * This method throws the `observable-set-cannot-override` error if the observable instance already\n * has a property with the given property name. This prevents from mistakenly overriding existing\n * properties and methods, but means that `foo.set( 'bar', 1 )` may be slightly slower than `foo.bar = 1`.\n *\n * @method #set\n * @param {String|Object} name The property's name or object with `name=>value` pairs.\n * @param {*} [value] The property's value (if `name` was passed in the first parameter).\n */\n\n/**\n * Binds {@link #set observable properties} to other objects implementing the\n * {@link module:utils/observablemixin~Observable} interface.\n *\n * Read more in the {@glink framework/guides/deep-dive/observables#property-bindings dedicated guide}\n * covering the topic of property bindings with some additional examples.\n *\n * Consider two objects: a `button` and an associated `command` (both `Observable`).\n *\n * A simple property binding could be as follows:\n *\n *\t\tbutton.bind( 'isEnabled' ).to( command, 'isEnabled' );\n *\n * or even shorter:\n *\n *\t\tbutton.bind( 'isEnabled' ).to( command );\n *\n * which works in the following way:\n *\n * * `button.isEnabled` **instantly equals** `command.isEnabled`,\n * * whenever `command.isEnabled` changes, `button.isEnabled` will immediately reflect its value.\n *\n * **Note**: To release the binding, use {@link module:utils/observablemixin~Observable#unbind}.\n *\n * You can also \"rename\" the property in the binding by specifying the new name in the `to()` chain:\n *\n *\t\tbutton.bind( 'isEnabled' ).to( command, 'isWorking' );\n *\n * It is possible to bind more than one property at a time to shorten the code:\n *\n *\t\tbutton.bind( 'isEnabled', 'value' ).to( command );\n *\n * which corresponds to:\n *\n *\t\tbutton.bind( 'isEnabled' ).to( command );\n *\t\tbutton.bind( 'value' ).to( command );\n *\n * The binding can include more than one observable, combining multiple data sources in a custom callback:\n *\n *\t\tbutton.bind( 'isEnabled' ).to( command, 'isEnabled', ui, 'isVisible',\n *\t\t\t( isCommandEnabled, isUIVisible ) => isCommandEnabled && isUIVisible );\n *\n * Using a custom callback allows processing the value before passing it to the target property:\n *\n *\t\tbutton.bind( 'isEnabled' ).to( command, 'value', value => value === 'heading1' );\n *\n * It is also possible to bind to the same property in an array of observables.\n * To bind a `button` to multiple commands (also `Observables`) so that each and every one of them\n * must be enabled for the button to become enabled, use the following code:\n *\n *\t\tbutton.bind( 'isEnabled' ).toMany( [ commandA, commandB, commandC ], 'isEnabled',\n *\t\t\t( isAEnabled, isBEnabled, isCEnabled ) => isAEnabled && isBEnabled && isCEnabled );\n *\n * @method #bind\n * @param {...String} bindProperties Observable properties that will be bound to other observable(s).\n * @returns {Object} The bind chain with the `to()` and `toMany()` methods.\n */\n\n/**\n * Removes the binding created with {@link #bind}.\n *\n *\t\t// Removes the binding for the 'a' property.\n *\t\tA.unbind( 'a' );\n *\n *\t\t// Removes bindings for all properties.\n *\t\tA.unbind();\n *\n * @method #unbind\n * @param {...String} [unbindProperties] Observable properties to be unbound. All the bindings will\n * be released if no properties are provided.\n */\n\n/**\n * Turns the given methods of this object into event-based ones. This means that the new method will fire an event\n * (named after the method) and the original action will be plugged as a listener to that event.\n *\n * Read more in the {@glink framework/guides/deep-dive/observables#decorating-object-methods dedicated guide}\n * covering the topic of decorating methods with some additional examples.\n *\n * Decorating the method does not change its behavior (it only adds an event),\n * but it allows to modify it later on by listening to the method's event.\n *\n * For example, to cancel the method execution the event can be {@link module:utils/eventinfo~EventInfo#stop stopped}:\n *\n *\t\tclass Foo {\n *\t\t\tconstructor() {\n *\t\t\t\tthis.decorate( 'method' );\n *\t\t\t}\n *\n *\t\t\tmethod() {\n *\t\t\t\tconsole.log( 'called!' );\n *\t\t\t}\n *\t\t}\n *\n *\t\tconst foo = new Foo();\n *\t\tfoo.on( 'method', ( evt ) => {\n *\t\t\tevt.stop();\n *\t\t}, { priority: 'high' } );\n *\n *\t\tfoo.method(); // Nothing is logged.\n *\n *\n * **Note**: The high {@link module:utils/priorities~PriorityString priority} listener\n * has been used to execute this particular callback before the one which calls the original method\n * (which uses the \"normal\" priority).\n *\n * It is also possible to change the returned value:\n *\n *\t\tfoo.on( 'method', ( evt ) => {\n *\t\t\tevt.return = 'Foo!';\n *\t\t} );\n *\n *\t\tfoo.method(); // -> 'Foo'\n *\n * Finally, it is possible to access and modify the arguments the method is called with:\n *\n *\t\tmethod( a, b ) {\n *\t\t\tconsole.log( `${ a }, ${ b }`  );\n *\t\t}\n *\n *\t\t// ...\n *\n *\t\tfoo.on( 'method', ( evt, args ) => {\n *\t\t\targs[ 0 ] = 3;\n *\n *\t\t\tconsole.log( args[ 1 ] ); // -> 2\n *\t\t}, { priority: 'high' } );\n *\n *\t\tfoo.method( 1, 2 ); // -> '3, 2'\n *\n * @method #decorate\n * @param {String} methodName Name of the method to decorate.\n */\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nexport default isObjectLike;\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/isiterable\n */\n\n/**\n * Checks if value implements iterator interface.\n *\n * @param {*} value The value to check.\n * @returns {Boolean} True if value implements iterator interface.\n */\nexport default function isIterable( value ) {\n\treturn !!( value && value[ Symbol.iterator ] );\n}\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nexport default root;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nexport default isArray;\n","export { default } from \"../objectWithoutPropertiesLoose/_index.mjs\"","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/comparearrays\n */\n\n/**\n * Compares how given arrays relate to each other. One array can be: same as another array, prefix of another array\n * or completely different. If arrays are different, first index at which they differ is returned. Otherwise,\n * a flag specifying the relation is returned. Flags are negative numbers, so whenever a number >= 0 is returned\n * it means that arrays differ.\n *\n *\t\tcompareArrays( [ 0, 2 ], [ 0, 2 ] );\t\t// 'same'\n *\t\tcompareArrays( [ 0, 2 ], [ 0, 2, 1 ] );\t\t// 'prefix'\n *\t\tcompareArrays( [ 0, 2 ], [ 0 ] );\t\t\t// 'extension'\n *\t\tcompareArrays( [ 0, 2 ], [ 1, 2 ] );\t\t// 0\n *\t\tcompareArrays( [ 0, 2 ], [ 0, 1 ] );\t\t// 1\n *\n * @param {Array} a Array that is compared.\n * @param {Array} b Array to compare with.\n * @returns {module:utils/comparearrays~ArrayRelation} How array `a` is related to `b`.\n */\nexport default function compareArrays( a, b ) {\n\tconst minLen = Math.min( a.length, b.length );\n\n\tfor ( let i = 0; i < minLen; i++ ) {\n\t\tif ( a[ i ] != b[ i ] ) {\n\t\t\t// The arrays are different.\n\t\t\treturn i;\n\t\t}\n\t}\n\n\t// Both arrays were same at all points.\n\tif ( a.length == b.length ) {\n\t\t// If their length is also same, they are the same.\n\t\treturn 'same';\n\t} else if ( a.length < b.length ) {\n\t\t// Compared array is shorter so it is a prefix of the other array.\n\t\treturn 'prefix';\n\t} else {\n\t\t// Compared array is longer so it is an extension of the other array.\n\t\treturn 'extension';\n\t}\n}\n\n/**\n * @typedef {'extension'|'same'|'prefix'} module:utils/comparearrays~ArrayRelation\n */\n","import setPrototypeOf from \"../setPrototypeOf/_index.mjs\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","function toVal(mix) {\n\tvar k, y, str='';\n\n\tif (typeof mix === 'string' || typeof mix === 'number') {\n\t\tstr += mix;\n\t} else if (typeof mix === 'object') {\n\t\tif (Array.isArray(mix)) {\n\t\t\tfor (k=0; k < mix.length; k++) {\n\t\t\t\tif (mix[k]) {\n\t\t\t\t\tif (y = toVal(mix[k])) {\n\t\t\t\t\t\tstr && (str += ' ');\n\t\t\t\t\t\tstr += y;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tfor (k in mix) {\n\t\t\t\tif (mix[k]) {\n\t\t\t\t\tstr && (str += ' ');\n\t\t\t\t\tstr += k;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn str;\n}\n\nexport default function () {\n\tvar i=0, tmp, x, str='';\n\twhile (i < arguments.length) {\n\t\tif (tmp = arguments[i++]) {\n\t\t\tif (x = toVal(tmp)) {\n\t\t\t\tstr && (str += ' ');\n\t\t\t\tstr += x\n\t\t\t}\n\t\t}\n\t}\n\treturn str;\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/textproxy\n */\n\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n\n// @if CK_DEBUG_ENGINE // const { convertMapToStringifiedObject } = require( '../dev-utils/utils' );\n\n/**\n * `TextProxy` represents a part of {@link module:engine/model/text~Text text node}.\n *\n * Since {@link module:engine/model/position~Position positions} can be placed between characters of a text node,\n * {@link module:engine/model/range~Range ranges} may contain only parts of text nodes. When {@link module:engine/model/range~Range#getItems\n * getting items}\n * contained in such range, we need to represent a part of that text node, since returning the whole text node would be incorrect.\n * `TextProxy` solves this issue.\n *\n * `TextProxy` has an API similar to {@link module:engine/model/text~Text Text} and allows to do most of the common tasks performed\n * on model nodes.\n *\n * **Note:** Some `TextProxy` instances may represent whole text node, not just a part of it.\n * See {@link module:engine/model/textproxy~TextProxy#isPartial}.\n *\n * **Note:** `TextProxy` is not an instance of {@link module:engine/model/node~Node node}. Keep this in mind when using it as a\n * parameter of methods.\n *\n * **Note:** `TextProxy` is a readonly interface. If you want to perform changes on model data represented by a `TextProxy`\n * use {@link module:engine/model/writer~Writer model writer API}.\n *\n * **Note:** `TextProxy` instances are created on the fly, basing on the current state of model. Because of this, it is\n * highly unrecommended to store references to `TextProxy` instances. `TextProxy` instances are not refreshed when\n * model changes, so they might get invalidated. Instead, consider creating {@link module:engine/model/liveposition~LivePosition live\n * position}.\n *\n * `TextProxy` instances are created by {@link module:engine/model/treewalker~TreeWalker model tree walker}. You should not need to create\n * an instance of this class by your own.\n */\nexport default class TextProxy {\n\t/**\n\t * Creates a text proxy.\n\t *\n\t * @protected\n\t * @param {module:engine/model/text~Text} textNode Text node which part is represented by this text proxy.\n\t * @param {Number} offsetInText Offset in {@link module:engine/model/textproxy~TextProxy#textNode text node} from which the text proxy\n\t * starts.\n\t * @param {Number} length Text proxy length, that is how many text node's characters, starting from `offsetInText` it represents.\n\t * @constructor\n\t */\n\tconstructor( textNode, offsetInText, length ) {\n\t\t/**\n\t\t * Text node which part is represented by this text proxy.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/model/text~Text}\n\t\t */\n\t\tthis.textNode = textNode;\n\n\t\tif ( offsetInText < 0 || offsetInText > textNode.offsetSize ) {\n\t\t\t/**\n\t\t\t * Given `offsetInText` value is incorrect.\n\t\t\t *\n\t\t\t * @error model-textproxy-wrong-offsetintext\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'model-textproxy-wrong-offsetintext', this );\n\t\t}\n\n\t\tif ( length < 0 || offsetInText + length > textNode.offsetSize ) {\n\t\t\t/**\n\t\t\t * Given `length` value is incorrect.\n\t\t\t *\n\t\t\t * @error model-textproxy-wrong-length\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'model-textproxy-wrong-length', this );\n\t\t}\n\n\t\t/**\n\t\t * Text data represented by this text proxy.\n\t\t *\n\t\t * @readonly\n\t\t * @member {String}\n\t\t */\n\t\tthis.data = textNode.data.substring( offsetInText, offsetInText + length );\n\n\t\t/**\n\t\t * Offset in {@link module:engine/model/textproxy~TextProxy#textNode text node} from which the text proxy starts.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Number}\n\t\t */\n\t\tthis.offsetInText = offsetInText;\n\t}\n\n\t/**\n\t * Offset at which this text proxy starts in it's parent.\n\t *\n\t * @see module:engine/model/node~Node#startOffset\n\t * @readonly\n\t * @type {Number}\n\t */\n\tget startOffset() {\n\t\treturn this.textNode.startOffset !== null ? this.textNode.startOffset + this.offsetInText : null;\n\t}\n\n\t/**\n\t * Offset size of this text proxy. Equal to the number of characters represented by the text proxy.\n\t *\n\t * @see module:engine/model/node~Node#offsetSize\n\t * @readonly\n\t * @type {Number}\n\t */\n\tget offsetSize() {\n\t\treturn this.data.length;\n\t}\n\n\t/**\n\t * Offset at which this text proxy ends in it's parent.\n\t *\n\t * @see module:engine/model/node~Node#endOffset\n\t * @readonly\n\t * @type {Number}\n\t */\n\tget endOffset() {\n\t\treturn this.startOffset !== null ? this.startOffset + this.offsetSize : null;\n\t}\n\n\t/**\n\t * Flag indicating whether `TextProxy` instance covers only part of the original {@link module:engine/model/text~Text text node}\n\t * (`true`) or the whole text node (`false`).\n\t *\n\t * This is `false` when text proxy starts at the very beginning of {@link module:engine/model/textproxy~TextProxy#textNode textNode}\n\t * ({@link module:engine/model/textproxy~TextProxy#offsetInText offsetInText} equals `0`) and text proxy sizes is equal to\n\t * text node size.\n\t *\n\t * @readonly\n\t * @type {Boolean}\n\t */\n\tget isPartial() {\n\t\treturn this.offsetSize !== this.textNode.offsetSize;\n\t}\n\n\t/**\n\t * Parent of this text proxy, which is same as parent of text node represented by this text proxy.\n\t *\n\t * @readonly\n\t * @type {module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment|null}\n\t */\n\tget parent() {\n\t\treturn this.textNode.parent;\n\t}\n\n\t/**\n\t * Root of this text proxy, which is same as root of text node represented by this text proxy.\n\t *\n\t * @readonly\n\t * @type {module:engine/model/node~Node|module:engine/model/documentfragment~DocumentFragment}\n\t */\n\tget root() {\n\t\treturn this.textNode.root;\n\t}\n\n\t/**\n\t * Checks whether this object is of the given.\n\t *\n\t *\t\ttextProxy.is( '$textProxy' ); // -> true\n\t *\t\ttextProxy.is( 'model:$textProxy' ); // -> true\n\t *\n\t *\t\ttextProxy.is( 'view:$textProxy' ); // -> false\n\t *\t\ttextProxy.is( 'range' ); // -> false\n\t *\n\t * {@link module:engine/model/node~Node#is Check the entire list of model objects} which implement the `is()` method.\n\t *\n\t * **Note:** Until version 20.0.0 this method wasn't accepting `'$textProxy'` type. The legacy `'textProxt'` type is still\n\t * accepted for backward compatibility.\n\t *\n\t * @param {String} type Type to check.\n\t * @returns {Boolean}\n\t */\n\tis( type ) {\n\t\treturn type === '$textProxy' || type === 'model:$textProxy' ||\n\t\t\t// This are legacy values kept for backward compatibility.\n\t\t\ttype === 'textProxy' || type === 'model:textProxy';\n\t}\n\n\t/**\n\t * Gets path to this text proxy.\n\t *\n\t * @see module:engine/model/node~Node#getPath\n\t * @returns {Array.<Number>}\n\t */\n\tgetPath() {\n\t\tconst path = this.textNode.getPath();\n\n\t\tif ( path.length > 0 ) {\n\t\t\tpath[ path.length - 1 ] += this.offsetInText;\n\t\t}\n\n\t\treturn path;\n\t}\n\n\t/**\n\t * Returns ancestors array of this text proxy.\n\t *\n\t * @param {Object} options Options object.\n\t * @param {Boolean} [options.includeSelf=false] When set to `true` this text proxy will be also included in parent's array.\n\t * @param {Boolean} [options.parentFirst=false] When set to `true`, array will be sorted from text proxy parent to root element,\n\t * otherwise root element will be the first item in the array.\n\t * @returns {Array} Array with ancestors.\n\t */\n\tgetAncestors( options = { includeSelf: false, parentFirst: false } ) {\n\t\tconst ancestors = [];\n\t\tlet parent = options.includeSelf ? this : this.parent;\n\n\t\twhile ( parent ) {\n\t\t\tancestors[ options.parentFirst ? 'push' : 'unshift' ]( parent );\n\t\t\tparent = parent.parent;\n\t\t}\n\n\t\treturn ancestors;\n\t}\n\n\t/**\n\t * Checks if this text proxy has an attribute for given key.\n\t *\n\t * @param {String} key Key of attribute to check.\n\t * @returns {Boolean} `true` if attribute with given key is set on text proxy, `false` otherwise.\n\t */\n\thasAttribute( key ) {\n\t\treturn this.textNode.hasAttribute( key );\n\t}\n\n\t/**\n\t * Gets an attribute value for given key or `undefined` if that attribute is not set on text proxy.\n\t *\n\t * @param {String} key Key of attribute to look for.\n\t * @returns {*} Attribute value or `undefined`.\n\t */\n\tgetAttribute( key ) {\n\t\treturn this.textNode.getAttribute( key );\n\t}\n\n\t/**\n\t * Returns iterator that iterates over this node's attributes. Attributes are returned as arrays containing two\n\t * items. First one is attribute key and second is attribute value.\n\t *\n\t * This format is accepted by native `Map` object and also can be passed in `Node` constructor.\n\t *\n\t * @returns {Iterable.<*>}\n\t */\n\tgetAttributes() {\n\t\treturn this.textNode.getAttributes();\n\t}\n\n\t/**\n\t * Returns iterator that iterates over this node's attribute keys.\n\t *\n\t * @returns {Iterable.<String>}\n\t */\n\tgetAttributeKeys() {\n\t\treturn this.textNode.getAttributeKeys();\n\t}\n\n\t// @if CK_DEBUG_ENGINE // toString() {\n\t// @if CK_DEBUG_ENGINE // \treturn `#${ this.data }`;\n\t// @if CK_DEBUG_ENGINE // }\n\n\t// @if CK_DEBUG_ENGINE // log() {\n\t// @if CK_DEBUG_ENGINE // \tconsole.log( 'ModelTextProxy: ' + this );\n\t// @if CK_DEBUG_ENGINE // }\n\n\t// @if CK_DEBUG_ENGINE // logExtended() {\n\t// @if CK_DEBUG_ENGINE // \tconsole.log( `ModelTextProxy: ${ this }, ` +\n\t// @if CK_DEBUG_ENGINE // \t\t`attrs: ${ convertMapToStringifiedObject( this.getAttributes() ) }` );\n\t// @if CK_DEBUG_ENGINE // }\n}\n","import Symbol from './_Symbol.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nexport default getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nexport default objectToString;\n","import Symbol from './_Symbol.js';\nimport getRawTag from './_getRawTag.js';\nimport objectToString from './_objectToString.js';\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nexport default baseGetTag;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nexport default Symbol;\n","import root from './_root.js';\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nexport default coreJsData;\n","import coreJsData from './_coreJsData.js';\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nexport default isMasked;\n","import isFunction from './isFunction.js';\nimport isMasked from './_isMasked.js';\nimport isObject from './isObject.js';\nimport toSource from './_toSource.js';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nexport default baseIsNative;\n","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nexport default getValue;\n","import baseIsNative from './_baseIsNative.js';\nimport getValue from './_getValue.js';\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nexport default getNative;\n","var isProduction = process.env.NODE_ENV === 'production';\nvar prefix = 'Invariant failed';\nfunction invariant(condition, message) {\n    if (condition) {\n        return;\n    }\n    if (isProduction) {\n        throw new Error(prefix);\n    }\n    throw new Error(prefix + \": \" + (message || ''));\n}\n\nexport default invariant;\n","import assignValue from './_assignValue.js';\nimport baseAssignValue from './_baseAssignValue.js';\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  var isNew = !object;\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    if (newValue === undefined) {\n      newValue = source[key];\n    }\n    if (isNew) {\n      baseAssignValue(object, key, newValue);\n    } else {\n      assignValue(object, key, newValue);\n    }\n  }\n  return object;\n}\n\nexport default copyObject;\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/uid\n */\n\n// A hash table of hex numbers to avoid using toString() in uid() which is costly.\n// [ '00', '01', '02', ..., 'fe', 'ff' ]\nconst HEX_NUMBERS = new Array( 256 ).fill()\n\t.map( ( val, index ) => ( '0' + ( index ).toString( 16 ) ).slice( -2 ) );\n\n/**\n * Returns a unique id. The id starts with an \"e\" character and a randomly generated string of\n * 32 alphanumeric characters.\n *\n * **Note**: The characters the unique id is built from correspond to the hex number notation\n * (from \"0\" to \"9\", from \"a\" to \"f\"). In other words, each id corresponds to an \"e\" followed\n * by 16 8-bit numbers next to each other.\n *\n * @returns {String} An unique id string.\n */\nexport default function uid() {\n\t// Let's create some positive random 32bit integers first.\n\t//\n\t// 1. Math.random() is a float between 0 and 1.\n\t// 2. 0x100000000 is 2^32 = 4294967296.\n\t// 3. >>> 0 enforces integer (in JS all numbers are floating point).\n\t//\n\t// For instance:\n\t//\t\tMath.random() * 0x100000000 = 3366450031.853859\n\t// but\n\t//\t\tMath.random() * 0x100000000 >>> 0 = 3366450031.\n\tconst r1 = Math.random() * 0x100000000 >>> 0;\n\tconst r2 = Math.random() * 0x100000000 >>> 0;\n\tconst r3 = Math.random() * 0x100000000 >>> 0;\n\tconst r4 = Math.random() * 0x100000000 >>> 0;\n\n\t// Make sure that id does not start with number.\n\treturn 'e' +\n\t\tHEX_NUMBERS[ r1 >> 0 & 0xFF ] +\n\t\tHEX_NUMBERS[ r1 >> 8 & 0xFF ] +\n\t\tHEX_NUMBERS[ r1 >> 16 & 0xFF ] +\n\t\tHEX_NUMBERS[ r1 >> 24 & 0xFF ] +\n\t\tHEX_NUMBERS[ r2 >> 0 & 0xFF ] +\n\t\tHEX_NUMBERS[ r2 >> 8 & 0xFF ] +\n\t\tHEX_NUMBERS[ r2 >> 16 & 0xFF ] +\n\t\tHEX_NUMBERS[ r2 >> 24 & 0xFF ] +\n\t\tHEX_NUMBERS[ r3 >> 0 & 0xFF ] +\n\t\tHEX_NUMBERS[ r3 >> 8 & 0xFF ] +\n\t\tHEX_NUMBERS[ r3 >> 16 & 0xFF ] +\n\t\tHEX_NUMBERS[ r3 >> 24 & 0xFF ] +\n\t\tHEX_NUMBERS[ r4 >> 0 & 0xFF ] +\n\t\tHEX_NUMBERS[ r4 >> 8 & 0xFF ] +\n\t\tHEX_NUMBERS[ r4 >> 16 & 0xFF ] +\n\t\tHEX_NUMBERS[ r4 >> 24 & 0xFF ];\n}\n","/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default nativeKeysIn;\n","import isObject from './isObject.js';\nimport isPrototype from './_isPrototype.js';\nimport nativeKeysIn from './_nativeKeysIn.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default baseKeysIn;\n","import arrayLikeKeys from './_arrayLikeKeys.js';\nimport baseKeysIn from './_baseKeysIn.js';\nimport isArrayLike from './isArrayLike.js';\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\nexport default keysIn;\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/treewalker\n */\n\nimport Text from './text';\nimport TextProxy from './textproxy';\nimport Element from './element';\nimport {\n\tdefault as Position,\n\tgetTextNodeAtPosition,\n\tgetNodeAfterPosition,\n\tgetNodeBeforePosition\n} from './position';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n\n/**\n * Position iterator class. It allows to iterate forward and backward over the document.\n */\nexport default class TreeWalker {\n\t/**\n\t * Creates a range iterator. All parameters are optional, but you have to specify either `boundaries` or `startPosition`.\n\t *\n\t * @constructor\n\t * @param {Object} [options={}] Object with configuration.\n\t * @param {'forward'|'backward'} [options.direction='forward'] Walking direction.\n\t * @param {module:engine/model/range~Range} [options.boundaries=null] Range to define boundaries of the iterator.\n\t * @param {module:engine/model/position~Position} [options.startPosition] Starting position.\n\t * @param {Boolean} [options.singleCharacters=false] Flag indicating whether all consecutive characters with the same attributes\n\t * should be returned one by one as multiple {@link module:engine/model/textproxy~TextProxy} (`true`) objects or as one\n\t * {@link module:engine/model/textproxy~TextProxy} (`false`).\n\t * @param {Boolean} [options.shallow=false] Flag indicating whether iterator should enter elements or not. If the\n\t * iterator is shallow child nodes of any iterated node will not be returned along with `elementEnd` tag.\n\t * @param {Boolean} [options.ignoreElementEnd=false] Flag indicating whether iterator should ignore `elementEnd`\n\t * tags. If the option is true walker will not return a parent node of start position. If this option is `true`\n\t * each {@link module:engine/model/element~Element} will be returned once, while if the option is `false` they might be returned\n\t * twice: for `'elementStart'` and `'elementEnd'`.\n\t */\n\tconstructor( options = {} ) {\n\t\tif ( !options.boundaries && !options.startPosition ) {\n\t\t\t/**\n\t\t\t * Neither boundaries nor starting position of a `TreeWalker` have been defined.\n\t\t\t *\n\t\t\t * @error model-tree-walker-no-start-position\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'model-tree-walker-no-start-position',\n\t\t\t\tnull\n\t\t\t);\n\t\t}\n\n\t\tconst direction = options.direction || 'forward';\n\n\t\tif ( direction != 'forward' && direction != 'backward' ) {\n\t\t\t/**\n\t\t\t * Only `backward` and `forward` direction allowed.\n\t\t\t *\n\t\t\t * @error model-tree-walker-unknown-direction\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'model-tree-walker-unknown-direction', options, { direction } );\n\t\t}\n\n\t\t/**\n\t\t * Walking direction. Defaults `'forward'`.\n\t\t *\n\t\t * @readonly\n\t\t * @member {'backward'|'forward'} module:engine/model/treewalker~TreeWalker#direction\n\t\t */\n\t\tthis.direction = direction;\n\n\t\t/**\n\t\t * Iterator boundaries.\n\t\t *\n\t\t * When the iterator is walking `'forward'` on the end of boundary or is walking `'backward'`\n\t\t * on the start of boundary, then `{ done: true }` is returned.\n\t\t *\n\t\t * If boundaries are not defined they are set before first and after last child of the root node.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/model/range~Range} module:engine/model/treewalker~TreeWalker#boundaries\n\t\t */\n\t\tthis.boundaries = options.boundaries || null;\n\n\t\t/**\n\t\t * Iterator position. This is always static position, even if the initial position was a\n\t\t * {@link module:engine/model/liveposition~LivePosition live position}. If start position is not defined then position depends\n\t\t * on {@link #direction}. If direction is `'forward'` position starts form the beginning, when direction\n\t\t * is `'backward'` position starts from the end.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/model/position~Position} module:engine/model/treewalker~TreeWalker#position\n\t\t */\n\t\tif ( options.startPosition ) {\n\t\t\tthis.position = options.startPosition.clone();\n\t\t} else {\n\t\t\tthis.position = Position._createAt( this.boundaries[ this.direction == 'backward' ? 'end' : 'start' ] );\n\t\t}\n\n\t\t// Reset position stickiness in case it was set to other value, as the stickiness is kept after cloning.\n\t\tthis.position.stickiness = 'toNone';\n\n\t\t/**\n\t\t * Flag indicating whether all consecutive characters with the same attributes should be\n\t\t * returned as one {@link module:engine/model/textproxy~TextProxy} (`true`) or one by one (`false`).\n\t\t *\n\t\t * @readonly\n\t\t * @member {Boolean} module:engine/model/treewalker~TreeWalker#singleCharacters\n\t\t */\n\t\tthis.singleCharacters = !!options.singleCharacters;\n\n\t\t/**\n\t\t * Flag indicating whether iterator should enter elements or not. If the iterator is shallow child nodes of any\n\t\t * iterated node will not be returned along with `elementEnd` tag.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Boolean} module:engine/model/treewalker~TreeWalker#shallow\n\t\t */\n\t\tthis.shallow = !!options.shallow;\n\n\t\t/**\n\t\t * Flag indicating whether iterator should ignore `elementEnd` tags. If the option is true walker will not\n\t\t * return a parent node of the start position. If this option is `true` each {@link module:engine/model/element~Element} will\n\t\t * be returned once, while if the option is `false` they might be returned twice:\n\t\t * for `'elementStart'` and `'elementEnd'`.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Boolean} module:engine/model/treewalker~TreeWalker#ignoreElementEnd\n\t\t */\n\t\tthis.ignoreElementEnd = !!options.ignoreElementEnd;\n\n\t\t/**\n\t\t * Start boundary cached for optimization purposes.\n\t\t *\n\t\t * @private\n\t\t * @member {module:engine/model/element~Element} module:engine/model/treewalker~TreeWalker#_boundaryStartParent\n\t\t */\n\t\tthis._boundaryStartParent = this.boundaries ? this.boundaries.start.parent : null;\n\n\t\t/**\n\t\t * End boundary cached for optimization purposes.\n\t\t *\n\t\t * @private\n\t\t * @member {module:engine/model/element~Element} module:engine/model/treewalker~TreeWalker#_boundaryEndParent\n\t\t */\n\t\tthis._boundaryEndParent = this.boundaries ? this.boundaries.end.parent : null;\n\n\t\t/**\n\t\t * Parent of the most recently visited node. Cached for optimization purposes.\n\t\t *\n\t\t * @private\n\t\t * @member {module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment}\n\t\t * module:engine/model/treewalker~TreeWalker#_visitedParent\n\t\t */\n\t\tthis._visitedParent = this.position.parent;\n\t}\n\n\t/**\n\t * Iterable interface.\n\t *\n\t * @returns {Iterable.<module:engine/model/treewalker~TreeWalkerValue>}\n\t */\n\t[ Symbol.iterator ]() {\n\t\treturn this;\n\t}\n\n\t/**\n\t * Moves {@link #position} in the {@link #direction} skipping values as long as the callback function returns `true`.\n\t *\n\t * For example:\n\t *\n\t * \t\twalker.skip( value => value.type == 'text' ); // <paragraph>[]foo</paragraph> -> <paragraph>foo[]</paragraph>\n\t * \t\twalker.skip( () => true ); // Move the position to the end: <paragraph>[]foo</paragraph> -> <paragraph>foo</paragraph>[]\n\t * \t\twalker.skip( () => false ); // Do not move the position.\n\t *\n\t * @param {Function} skip Callback function. Gets {@link module:engine/model/treewalker~TreeWalkerValue} and should\n\t * return `true` if the value should be skipped or `false` if not.\n\t */\n\tskip( skip ) {\n\t\tlet done, value, prevPosition, prevVisitedParent;\n\n\t\tdo {\n\t\t\tprevPosition = this.position;\n\t\t\tprevVisitedParent = this._visitedParent;\n\n\t\t\t( { done, value } = this.next() );\n\t\t} while ( !done && skip( value ) );\n\n\t\tif ( !done ) {\n\t\t\tthis.position = prevPosition;\n\t\t\tthis._visitedParent = prevVisitedParent;\n\t\t}\n\t}\n\n\t/**\n\t * Gets the next tree walker's value.\n\t *\n\t * @returns {module:engine/model/treewalker~TreeWalkerValue} Next tree walker's value.\n\t */\n\tnext() {\n\t\tif ( this.direction == 'forward' ) {\n\t\t\treturn this._next();\n\t\t} else {\n\t\t\treturn this._previous();\n\t\t}\n\t}\n\n\t/**\n\t * Makes a step forward in model. Moves the {@link #position} to the next position and returns the encountered value.\n\t *\n\t * @private\n\t * @returns {Object}\n\t * @returns {Boolean} return.done True if iterator is done.\n\t * @returns {module:engine/model/treewalker~TreeWalkerValue} return.value Information about taken step.\n\t */\n\t_next() {\n\t\tconst previousPosition = this.position;\n\t\tconst position = this.position.clone();\n\t\tconst parent = this._visitedParent;\n\n\t\t// We are at the end of the root.\n\t\tif ( parent.parent === null && position.offset === parent.maxOffset ) {\n\t\t\treturn { done: true };\n\t\t}\n\n\t\t// We reached the walker boundary.\n\t\tif ( parent === this._boundaryEndParent && position.offset == this.boundaries.end.offset ) {\n\t\t\treturn { done: true };\n\t\t}\n\n\t\t// Get node just after the current position.\n\t\t// Use a highly optimized version instead of checking the text node first and then getting the node after. See #6582.\n\t\tconst positionParent = position.parent;\n\t\tconst textNodeAtPosition = getTextNodeAtPosition( position, positionParent );\n\t\tconst node = textNodeAtPosition ? textNodeAtPosition : getNodeAfterPosition( position, positionParent, textNodeAtPosition );\n\n\t\tif ( node instanceof Element ) {\n\t\t\tif ( !this.shallow ) {\n\t\t\t\t// Manual operations on path internals for optimization purposes. Here and in the rest of the method.\n\t\t\t\tposition.path.push( 0 );\n\t\t\t\tthis._visitedParent = node;\n\t\t\t} else {\n\t\t\t\tposition.offset++;\n\t\t\t}\n\n\t\t\tthis.position = position;\n\n\t\t\treturn formatReturnValue( 'elementStart', node, previousPosition, position, 1 );\n\t\t} else if ( node instanceof Text ) {\n\t\t\tlet charactersCount;\n\n\t\t\tif ( this.singleCharacters ) {\n\t\t\t\tcharactersCount = 1;\n\t\t\t} else {\n\t\t\t\tlet offset = node.endOffset;\n\n\t\t\t\tif ( this._boundaryEndParent == parent && this.boundaries.end.offset < offset ) {\n\t\t\t\t\toffset = this.boundaries.end.offset;\n\t\t\t\t}\n\n\t\t\t\tcharactersCount = offset - position.offset;\n\t\t\t}\n\n\t\t\tconst offsetInTextNode = position.offset - node.startOffset;\n\t\t\tconst item = new TextProxy( node, offsetInTextNode, charactersCount );\n\n\t\t\tposition.offset += charactersCount;\n\t\t\tthis.position = position;\n\n\t\t\treturn formatReturnValue( 'text', item, previousPosition, position, charactersCount );\n\t\t} else {\n\t\t\t// `node` is not set, we reached the end of current `parent`.\n\t\t\tposition.path.pop();\n\t\t\tposition.offset++;\n\t\t\tthis.position = position;\n\t\t\tthis._visitedParent = parent.parent;\n\n\t\t\tif ( this.ignoreElementEnd ) {\n\t\t\t\treturn this._next();\n\t\t\t} else {\n\t\t\t\treturn formatReturnValue( 'elementEnd', parent, previousPosition, position );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Makes a step backward in model. Moves the {@link #position} to the previous position and returns the encountered value.\n\t *\n\t * @private\n\t * @returns {Object}\n\t * @returns {Boolean} return.done True if iterator is done.\n\t * @returns {module:engine/model/treewalker~TreeWalkerValue} return.value Information about taken step.\n\t */\n\t_previous() {\n\t\tconst previousPosition = this.position;\n\t\tconst position = this.position.clone();\n\t\tconst parent = this._visitedParent;\n\n\t\t// We are at the beginning of the root.\n\t\tif ( parent.parent === null && position.offset === 0 ) {\n\t\t\treturn { done: true };\n\t\t}\n\n\t\t// We reached the walker boundary.\n\t\tif ( parent == this._boundaryStartParent && position.offset == this.boundaries.start.offset ) {\n\t\t\treturn { done: true };\n\t\t}\n\n\t\t// Get node just before the current position.\n\t\t// Use a highly optimized version instead of checking the text node first and then getting the node before. See #6582.\n\t\tconst positionParent = position.parent;\n\t\tconst textNodeAtPosition = getTextNodeAtPosition( position, positionParent );\n\t\tconst node = textNodeAtPosition ? textNodeAtPosition : getNodeBeforePosition( position, positionParent, textNodeAtPosition );\n\n\t\tif ( node instanceof Element ) {\n\t\t\tposition.offset--;\n\n\t\t\tif ( !this.shallow ) {\n\t\t\t\tposition.path.push( node.maxOffset );\n\t\t\t\tthis.position = position;\n\t\t\t\tthis._visitedParent = node;\n\n\t\t\t\tif ( this.ignoreElementEnd ) {\n\t\t\t\t\treturn this._previous();\n\t\t\t\t} else {\n\t\t\t\t\treturn formatReturnValue( 'elementEnd', node, previousPosition, position );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.position = position;\n\n\t\t\t\treturn formatReturnValue( 'elementStart', node, previousPosition, position, 1 );\n\t\t\t}\n\t\t} else if ( node instanceof Text ) {\n\t\t\tlet charactersCount;\n\n\t\t\tif ( this.singleCharacters ) {\n\t\t\t\tcharactersCount = 1;\n\t\t\t} else {\n\t\t\t\tlet offset = node.startOffset;\n\n\t\t\t\tif ( this._boundaryStartParent == parent && this.boundaries.start.offset > offset ) {\n\t\t\t\t\toffset = this.boundaries.start.offset;\n\t\t\t\t}\n\n\t\t\t\tcharactersCount = position.offset - offset;\n\t\t\t}\n\n\t\t\tconst offsetInTextNode = position.offset - node.startOffset;\n\t\t\tconst item = new TextProxy( node, offsetInTextNode - charactersCount, charactersCount );\n\n\t\t\tposition.offset -= charactersCount;\n\t\t\tthis.position = position;\n\n\t\t\treturn formatReturnValue( 'text', item, previousPosition, position, charactersCount );\n\t\t} else {\n\t\t\t// `node` is not set, we reached the beginning of current `parent`.\n\t\t\tposition.path.pop();\n\t\t\tthis.position = position;\n\t\t\tthis._visitedParent = parent.parent;\n\n\t\t\treturn formatReturnValue( 'elementStart', parent, previousPosition, position, 1 );\n\t\t}\n\t}\n}\n\nfunction formatReturnValue( type, item, previousPosition, nextPosition, length ) {\n\treturn {\n\t\tdone: false,\n\t\tvalue: {\n\t\t\ttype,\n\t\t\titem,\n\t\t\tpreviousPosition,\n\t\t\tnextPosition,\n\t\t\tlength\n\t\t}\n\t};\n}\n\n/**\n * Type of the step made by {@link module:engine/model/treewalker~TreeWalker}.\n * Possible values: `'elementStart'` if walker is at the beginning of a node, `'elementEnd'` if walker is at the end of node,\n * `'character'` if walker traversed over a character, or `'text'` if walker traversed over multiple characters (available in\n * character merging mode, see {@link module:engine/model/treewalker~TreeWalker#constructor}).\n *\n * @typedef {'elementStart'|'elementEnd'|'character'|'text'} module:engine/model/treewalker~TreeWalkerValueType\n */\n\n/**\n * Object returned by {@link module:engine/model/treewalker~TreeWalker} when traversing tree model.\n *\n * @typedef {Object} module:engine/model/treewalker~TreeWalkerValue\n * @property {module:engine/model/treewalker~TreeWalkerValueType} type\n * @property {module:engine/model/item~Item} item Item between old and new positions of {@link module:engine/model/treewalker~TreeWalker}.\n * @property {module:engine/model/position~Position} previousPosition Previous position of the iterator.\n * * Forward iteration: For `'elementEnd'` it is the last position inside the element. For all other types it is the\n * position before the item.\n * * Backward iteration: For `'elementStart'` it is the first position inside the element. For all other types it is\n * the position after item.\n * @property {module:engine/model/position~Position} nextPosition Next position of the iterator.\n * * Forward iteration: For `'elementStart'` it is the first position inside the element. For all other types it is\n * the position after the item.\n * * Backward iteration: For `'elementEnd'` it is last position inside element. For all other types it is the position\n * before the item.\n * @property {Number} [length] Length of the item. For `'elementStart'` and `'character'` it is 1. For `'text'` it is\n * the length of the text. For `'elementEnd'` it is `undefined`.\n */\n\n/**\n * Tree walking directions.\n *\n * @typedef {'forward'|'backward'} module:engine/model/treewalker~TreeWalkerDirection\n */\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import { formatMuiErrorMessage as _formatMuiErrorMessage } from \"@material-ui/utils\";\n\n/* eslint-disable no-use-before-define */\n\n/**\n * Returns a number whose value is limited to the given range.\n *\n * @param {number} value The value to be clamped\n * @param {number} min The lower boundary of the output range\n * @param {number} max The upper boundary of the output range\n * @returns {number} A number in the range [min, max]\n */\nfunction clamp(value) {\n  var min = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var max = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (value < min || value > max) {\n      console.error(\"Material-UI: The value provided \".concat(value, \" is out of range [\").concat(min, \", \").concat(max, \"].\"));\n    }\n  }\n\n  return Math.min(Math.max(min, value), max);\n}\n/**\n * Converts a color from CSS hex format to CSS rgb format.\n *\n * @param {string} color - Hex color, i.e. #nnn or #nnnnnn\n * @returns {string} A CSS rgb color string\n */\n\n\nexport function hexToRgb(color) {\n  color = color.substr(1);\n  var re = new RegExp(\".{1,\".concat(color.length >= 6 ? 2 : 1, \"}\"), 'g');\n  var colors = color.match(re);\n\n  if (colors && colors[0].length === 1) {\n    colors = colors.map(function (n) {\n      return n + n;\n    });\n  }\n\n  return colors ? \"rgb\".concat(colors.length === 4 ? 'a' : '', \"(\").concat(colors.map(function (n, index) {\n    return index < 3 ? parseInt(n, 16) : Math.round(parseInt(n, 16) / 255 * 1000) / 1000;\n  }).join(', '), \")\") : '';\n}\n\nfunction intToHex(int) {\n  var hex = int.toString(16);\n  return hex.length === 1 ? \"0\".concat(hex) : hex;\n}\n/**\n * Converts a color from CSS rgb format to CSS hex format.\n *\n * @param {string} color - RGB color, i.e. rgb(n, n, n)\n * @returns {string} A CSS rgb color string, i.e. #nnnnnn\n */\n\n\nexport function rgbToHex(color) {\n  // Idempotent\n  if (color.indexOf('#') === 0) {\n    return color;\n  }\n\n  var _decomposeColor = decomposeColor(color),\n      values = _decomposeColor.values;\n\n  return \"#\".concat(values.map(function (n) {\n    return intToHex(n);\n  }).join(''));\n}\n/**\n * Converts a color from hsl format to rgb format.\n *\n * @param {string} color - HSL color values\n * @returns {string} rgb color values\n */\n\nexport function hslToRgb(color) {\n  color = decomposeColor(color);\n  var _color = color,\n      values = _color.values;\n  var h = values[0];\n  var s = values[1] / 100;\n  var l = values[2] / 100;\n  var a = s * Math.min(l, 1 - l);\n\n  var f = function f(n) {\n    var k = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : (n + h / 30) % 12;\n    return l - a * Math.max(Math.min(k - 3, 9 - k, 1), -1);\n  };\n\n  var type = 'rgb';\n  var rgb = [Math.round(f(0) * 255), Math.round(f(8) * 255), Math.round(f(4) * 255)];\n\n  if (color.type === 'hsla') {\n    type += 'a';\n    rgb.push(values[3]);\n  }\n\n  return recomposeColor({\n    type: type,\n    values: rgb\n  });\n}\n/**\n * Returns an object with the type and values of a color.\n *\n * Note: Does not support rgb % values.\n *\n * @param {string} color - CSS color, i.e. one of: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla()\n * @returns {object} - A MUI color object: {type: string, values: number[]}\n */\n\nexport function decomposeColor(color) {\n  // Idempotent\n  if (color.type) {\n    return color;\n  }\n\n  if (color.charAt(0) === '#') {\n    return decomposeColor(hexToRgb(color));\n  }\n\n  var marker = color.indexOf('(');\n  var type = color.substring(0, marker);\n\n  if (['rgb', 'rgba', 'hsl', 'hsla'].indexOf(type) === -1) {\n    throw new Error(process.env.NODE_ENV !== \"production\" ? \"Material-UI: Unsupported `\".concat(color, \"` color.\\nWe support the following formats: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla().\") : _formatMuiErrorMessage(3, color));\n  }\n\n  var values = color.substring(marker + 1, color.length - 1).split(',');\n  values = values.map(function (value) {\n    return parseFloat(value);\n  });\n  return {\n    type: type,\n    values: values\n  };\n}\n/**\n * Converts a color object with type and values to a string.\n *\n * @param {object} color - Decomposed color\n * @param {string} color.type - One of: 'rgb', 'rgba', 'hsl', 'hsla'\n * @param {array} color.values - [n,n,n] or [n,n,n,n]\n * @returns {string} A CSS color string\n */\n\nexport function recomposeColor(color) {\n  var type = color.type;\n  var values = color.values;\n\n  if (type.indexOf('rgb') !== -1) {\n    // Only convert the first 3 values to int (i.e. not alpha)\n    values = values.map(function (n, i) {\n      return i < 3 ? parseInt(n, 10) : n;\n    });\n  } else if (type.indexOf('hsl') !== -1) {\n    values[1] = \"\".concat(values[1], \"%\");\n    values[2] = \"\".concat(values[2], \"%\");\n  }\n\n  return \"\".concat(type, \"(\").concat(values.join(', '), \")\");\n}\n/**\n * Calculates the contrast ratio between two colors.\n *\n * Formula: https://www.w3.org/TR/WCAG20-TECHS/G17.html#G17-tests\n *\n * @param {string} foreground - CSS color, i.e. one of: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla()\n * @param {string} background - CSS color, i.e. one of: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla()\n * @returns {number} A contrast ratio value in the range 0 - 21.\n */\n\nexport function getContrastRatio(foreground, background) {\n  var lumA = getLuminance(foreground);\n  var lumB = getLuminance(background);\n  return (Math.max(lumA, lumB) + 0.05) / (Math.min(lumA, lumB) + 0.05);\n}\n/**\n * The relative brightness of any point in a color space,\n * normalized to 0 for darkest black and 1 for lightest white.\n *\n * Formula: https://www.w3.org/TR/WCAG20-TECHS/G17.html#G17-tests\n *\n * @param {string} color - CSS color, i.e. one of: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla()\n * @returns {number} The relative brightness of the color in the range 0 - 1\n */\n\nexport function getLuminance(color) {\n  color = decomposeColor(color);\n  var rgb = color.type === 'hsl' ? decomposeColor(hslToRgb(color)).values : color.values;\n  rgb = rgb.map(function (val) {\n    val /= 255; // normalized\n\n    return val <= 0.03928 ? val / 12.92 : Math.pow((val + 0.055) / 1.055, 2.4);\n  }); // Truncate at 3 digits\n\n  return Number((0.2126 * rgb[0] + 0.7152 * rgb[1] + 0.0722 * rgb[2]).toFixed(3));\n}\n/**\n * Darken or lighten a color, depending on its luminance.\n * Light colors are darkened, dark colors are lightened.\n *\n * @param {string} color - CSS color, i.e. one of: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla()\n * @param {number} coefficient=0.15 - multiplier in the range 0 - 1\n * @returns {string} A CSS color string. Hex input values are returned as rgb\n */\n\nexport function emphasize(color) {\n  var coefficient = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0.15;\n  return getLuminance(color) > 0.5 ? darken(color, coefficient) : lighten(color, coefficient);\n}\n/**\n * Set the absolute transparency of a color.\n * Any existing alpha values are overwritten.\n *\n * @param {string} color - CSS color, i.e. one of: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla()\n * @param {number} value - value to set the alpha channel to in the range 0 -1\n * @returns {string} A CSS color string. Hex input values are returned as rgb\n */\n\nexport function fade(color, value) {\n  color = decomposeColor(color);\n  value = clamp(value);\n\n  if (color.type === 'rgb' || color.type === 'hsl') {\n    color.type += 'a';\n  }\n\n  color.values[3] = value;\n  return recomposeColor(color);\n}\n/**\n * Darkens a color.\n *\n * @param {string} color - CSS color, i.e. one of: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla()\n * @param {number} coefficient - multiplier in the range 0 - 1\n * @returns {string} A CSS color string. Hex input values are returned as rgb\n */\n\nexport function darken(color, coefficient) {\n  color = decomposeColor(color);\n  coefficient = clamp(coefficient);\n\n  if (color.type.indexOf('hsl') !== -1) {\n    color.values[2] *= 1 - coefficient;\n  } else if (color.type.indexOf('rgb') !== -1) {\n    for (var i = 0; i < 3; i += 1) {\n      color.values[i] *= 1 - coefficient;\n    }\n  }\n\n  return recomposeColor(color);\n}\n/**\n * Lightens a color.\n *\n * @param {string} color - CSS color, i.e. one of: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla()\n * @param {number} coefficient - multiplier in the range 0 - 1\n * @returns {string} A CSS color string. Hex input values are returned as rgb\n */\n\nexport function lighten(color, coefficient) {\n  color = decomposeColor(color);\n  coefficient = clamp(coefficient);\n\n  if (color.type.indexOf('hsl') !== -1) {\n    color.values[2] += (100 - color.values[2]) * coefficient;\n  } else if (color.type.indexOf('rgb') !== -1) {\n    for (var i = 0; i < 3; i += 1) {\n      color.values[i] += (255 - color.values[i]) * coefficient;\n    }\n  }\n\n  return recomposeColor(color);\n}","function isAbsolute(pathname) {\n  return pathname.charAt(0) === '/';\n}\n\n// About 1.5x faster than the two-arg version of Array#splice()\nfunction spliceOne(list, index) {\n  for (var i = index, k = i + 1, n = list.length; k < n; i += 1, k += 1) {\n    list[i] = list[k];\n  }\n\n  list.pop();\n}\n\n// This implementation is based heavily on node's url.parse\nfunction resolvePathname(to, from) {\n  if (from === undefined) from = '';\n\n  var toParts = (to && to.split('/')) || [];\n  var fromParts = (from && from.split('/')) || [];\n\n  var isToAbs = to && isAbsolute(to);\n  var isFromAbs = from && isAbsolute(from);\n  var mustEndAbs = isToAbs || isFromAbs;\n\n  if (to && isAbsolute(to)) {\n    // to is absolute\n    fromParts = toParts;\n  } else if (toParts.length) {\n    // to is relative, drop the filename\n    fromParts.pop();\n    fromParts = fromParts.concat(toParts);\n  }\n\n  if (!fromParts.length) return '/';\n\n  var hasTrailingSlash;\n  if (fromParts.length) {\n    var last = fromParts[fromParts.length - 1];\n    hasTrailingSlash = last === '.' || last === '..' || last === '';\n  } else {\n    hasTrailingSlash = false;\n  }\n\n  var up = 0;\n  for (var i = fromParts.length; i >= 0; i--) {\n    var part = fromParts[i];\n\n    if (part === '.') {\n      spliceOne(fromParts, i);\n    } else if (part === '..') {\n      spliceOne(fromParts, i);\n      up++;\n    } else if (up) {\n      spliceOne(fromParts, i);\n      up--;\n    }\n  }\n\n  if (!mustEndAbs) for (; up--; up) fromParts.unshift('..');\n\n  if (\n    mustEndAbs &&\n    fromParts[0] !== '' &&\n    (!fromParts[0] || !isAbsolute(fromParts[0]))\n  )\n    fromParts.unshift('');\n\n  var result = fromParts.join('/');\n\n  if (hasTrailingSlash && result.substr(-1) !== '/') result += '/';\n\n  return result;\n}\n\nexport default resolvePathname;\n","function valueOf(obj) {\n  return obj.valueOf ? obj.valueOf() : Object.prototype.valueOf.call(obj);\n}\n\nfunction valueEqual(a, b) {\n  // Test for strict equality first.\n  if (a === b) return true;\n\n  // Otherwise, if either of them == null they are not equal.\n  if (a == null || b == null) return false;\n\n  if (Array.isArray(a)) {\n    return (\n      Array.isArray(b) &&\n      a.length === b.length &&\n      a.every(function(item, index) {\n        return valueEqual(item, b[index]);\n      })\n    );\n  }\n\n  if (typeof a === 'object' || typeof b === 'object') {\n    var aValue = valueOf(a);\n    var bValue = valueOf(b);\n\n    if (aValue !== a || bValue !== b) return valueEqual(aValue, bValue);\n\n    return Object.keys(Object.assign({}, a, b)).every(function(key) {\n      return valueEqual(a[key], b[key]);\n    });\n  }\n\n  return false;\n}\n\nexport default valueEqual;\n","import _extends from '@babel/runtime/helpers/esm/extends';\nimport resolvePathname from 'resolve-pathname';\nimport valueEqual from 'value-equal';\nimport warning from 'tiny-warning';\nimport invariant from 'tiny-invariant';\n\nfunction addLeadingSlash(path) {\n  return path.charAt(0) === '/' ? path : '/' + path;\n}\nfunction stripLeadingSlash(path) {\n  return path.charAt(0) === '/' ? path.substr(1) : path;\n}\nfunction hasBasename(path, prefix) {\n  return path.toLowerCase().indexOf(prefix.toLowerCase()) === 0 && '/?#'.indexOf(path.charAt(prefix.length)) !== -1;\n}\nfunction stripBasename(path, prefix) {\n  return hasBasename(path, prefix) ? path.substr(prefix.length) : path;\n}\nfunction stripTrailingSlash(path) {\n  return path.charAt(path.length - 1) === '/' ? path.slice(0, -1) : path;\n}\nfunction parsePath(path) {\n  var pathname = path || '/';\n  var search = '';\n  var hash = '';\n  var hashIndex = pathname.indexOf('#');\n\n  if (hashIndex !== -1) {\n    hash = pathname.substr(hashIndex);\n    pathname = pathname.substr(0, hashIndex);\n  }\n\n  var searchIndex = pathname.indexOf('?');\n\n  if (searchIndex !== -1) {\n    search = pathname.substr(searchIndex);\n    pathname = pathname.substr(0, searchIndex);\n  }\n\n  return {\n    pathname: pathname,\n    search: search === '?' ? '' : search,\n    hash: hash === '#' ? '' : hash\n  };\n}\nfunction createPath(location) {\n  var pathname = location.pathname,\n      search = location.search,\n      hash = location.hash;\n  var path = pathname || '/';\n  if (search && search !== '?') path += search.charAt(0) === '?' ? search : \"?\" + search;\n  if (hash && hash !== '#') path += hash.charAt(0) === '#' ? hash : \"#\" + hash;\n  return path;\n}\n\nfunction createLocation(path, state, key, currentLocation) {\n  var location;\n\n  if (typeof path === 'string') {\n    // Two-arg form: push(path, state)\n    location = parsePath(path);\n    location.state = state;\n  } else {\n    // One-arg form: push(location)\n    location = _extends({}, path);\n    if (location.pathname === undefined) location.pathname = '';\n\n    if (location.search) {\n      if (location.search.charAt(0) !== '?') location.search = '?' + location.search;\n    } else {\n      location.search = '';\n    }\n\n    if (location.hash) {\n      if (location.hash.charAt(0) !== '#') location.hash = '#' + location.hash;\n    } else {\n      location.hash = '';\n    }\n\n    if (state !== undefined && location.state === undefined) location.state = state;\n  }\n\n  try {\n    location.pathname = decodeURI(location.pathname);\n  } catch (e) {\n    if (e instanceof URIError) {\n      throw new URIError('Pathname \"' + location.pathname + '\" could not be decoded. ' + 'This is likely caused by an invalid percent-encoding.');\n    } else {\n      throw e;\n    }\n  }\n\n  if (key) location.key = key;\n\n  if (currentLocation) {\n    // Resolve incomplete/relative pathname relative to current location.\n    if (!location.pathname) {\n      location.pathname = currentLocation.pathname;\n    } else if (location.pathname.charAt(0) !== '/') {\n      location.pathname = resolvePathname(location.pathname, currentLocation.pathname);\n    }\n  } else {\n    // When there is no prior location and pathname is empty, set it to /\n    if (!location.pathname) {\n      location.pathname = '/';\n    }\n  }\n\n  return location;\n}\nfunction locationsAreEqual(a, b) {\n  return a.pathname === b.pathname && a.search === b.search && a.hash === b.hash && a.key === b.key && valueEqual(a.state, b.state);\n}\n\nfunction createTransitionManager() {\n  var prompt = null;\n\n  function setPrompt(nextPrompt) {\n    process.env.NODE_ENV !== \"production\" ? warning(prompt == null, 'A history supports only one prompt at a time') : void 0;\n    prompt = nextPrompt;\n    return function () {\n      if (prompt === nextPrompt) prompt = null;\n    };\n  }\n\n  function confirmTransitionTo(location, action, getUserConfirmation, callback) {\n    // TODO: If another transition starts while we're still confirming\n    // the previous one, we may end up in a weird state. Figure out the\n    // best way to handle this.\n    if (prompt != null) {\n      var result = typeof prompt === 'function' ? prompt(location, action) : prompt;\n\n      if (typeof result === 'string') {\n        if (typeof getUserConfirmation === 'function') {\n          getUserConfirmation(result, callback);\n        } else {\n          process.env.NODE_ENV !== \"production\" ? warning(false, 'A history needs a getUserConfirmation function in order to use a prompt message') : void 0;\n          callback(true);\n        }\n      } else {\n        // Return false from a transition hook to cancel the transition.\n        callback(result !== false);\n      }\n    } else {\n      callback(true);\n    }\n  }\n\n  var listeners = [];\n\n  function appendListener(fn) {\n    var isActive = true;\n\n    function listener() {\n      if (isActive) fn.apply(void 0, arguments);\n    }\n\n    listeners.push(listener);\n    return function () {\n      isActive = false;\n      listeners = listeners.filter(function (item) {\n        return item !== listener;\n      });\n    };\n  }\n\n  function notifyListeners() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    listeners.forEach(function (listener) {\n      return listener.apply(void 0, args);\n    });\n  }\n\n  return {\n    setPrompt: setPrompt,\n    confirmTransitionTo: confirmTransitionTo,\n    appendListener: appendListener,\n    notifyListeners: notifyListeners\n  };\n}\n\nvar canUseDOM = !!(typeof window !== 'undefined' && window.document && window.document.createElement);\nfunction getConfirmation(message, callback) {\n  callback(window.confirm(message)); // eslint-disable-line no-alert\n}\n/**\n * Returns true if the HTML5 history API is supported. Taken from Modernizr.\n *\n * https://github.com/Modernizr/Modernizr/blob/master/LICENSE\n * https://github.com/Modernizr/Modernizr/blob/master/feature-detects/history.js\n * changed to avoid false negatives for Windows Phones: https://github.com/reactjs/react-router/issues/586\n */\n\nfunction supportsHistory() {\n  var ua = window.navigator.userAgent;\n  if ((ua.indexOf('Android 2.') !== -1 || ua.indexOf('Android 4.0') !== -1) && ua.indexOf('Mobile Safari') !== -1 && ua.indexOf('Chrome') === -1 && ua.indexOf('Windows Phone') === -1) return false;\n  return window.history && 'pushState' in window.history;\n}\n/**\n * Returns true if browser fires popstate on hash change.\n * IE10 and IE11 do not.\n */\n\nfunction supportsPopStateOnHashChange() {\n  return window.navigator.userAgent.indexOf('Trident') === -1;\n}\n/**\n * Returns false if using go(n) with hash history causes a full page reload.\n */\n\nfunction supportsGoWithoutReloadUsingHash() {\n  return window.navigator.userAgent.indexOf('Firefox') === -1;\n}\n/**\n * Returns true if a given popstate event is an extraneous WebKit event.\n * Accounts for the fact that Chrome on iOS fires real popstate events\n * containing undefined state when pressing the back button.\n */\n\nfunction isExtraneousPopstateEvent(event) {\n  return event.state === undefined && navigator.userAgent.indexOf('CriOS') === -1;\n}\n\nvar PopStateEvent = 'popstate';\nvar HashChangeEvent = 'hashchange';\n\nfunction getHistoryState() {\n  try {\n    return window.history.state || {};\n  } catch (e) {\n    // IE 11 sometimes throws when accessing window.history.state\n    // See https://github.com/ReactTraining/history/pull/289\n    return {};\n  }\n}\n/**\n * Creates a history object that uses the HTML5 history API including\n * pushState, replaceState, and the popstate event.\n */\n\n\nfunction createBrowserHistory(props) {\n  if (props === void 0) {\n    props = {};\n  }\n\n  !canUseDOM ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Browser history needs a DOM') : invariant(false) : void 0;\n  var globalHistory = window.history;\n  var canUseHistory = supportsHistory();\n  var needsHashChangeListener = !supportsPopStateOnHashChange();\n  var _props = props,\n      _props$forceRefresh = _props.forceRefresh,\n      forceRefresh = _props$forceRefresh === void 0 ? false : _props$forceRefresh,\n      _props$getUserConfirm = _props.getUserConfirmation,\n      getUserConfirmation = _props$getUserConfirm === void 0 ? getConfirmation : _props$getUserConfirm,\n      _props$keyLength = _props.keyLength,\n      keyLength = _props$keyLength === void 0 ? 6 : _props$keyLength;\n  var basename = props.basename ? stripTrailingSlash(addLeadingSlash(props.basename)) : '';\n\n  function getDOMLocation(historyState) {\n    var _ref = historyState || {},\n        key = _ref.key,\n        state = _ref.state;\n\n    var _window$location = window.location,\n        pathname = _window$location.pathname,\n        search = _window$location.search,\n        hash = _window$location.hash;\n    var path = pathname + search + hash;\n    process.env.NODE_ENV !== \"production\" ? warning(!basename || hasBasename(path, basename), 'You are attempting to use a basename on a page whose URL path does not begin ' + 'with the basename. Expected path \"' + path + '\" to begin with \"' + basename + '\".') : void 0;\n    if (basename) path = stripBasename(path, basename);\n    return createLocation(path, state, key);\n  }\n\n  function createKey() {\n    return Math.random().toString(36).substr(2, keyLength);\n  }\n\n  var transitionManager = createTransitionManager();\n\n  function setState(nextState) {\n    _extends(history, nextState);\n\n    history.length = globalHistory.length;\n    transitionManager.notifyListeners(history.location, history.action);\n  }\n\n  function handlePopState(event) {\n    // Ignore extraneous popstate events in WebKit.\n    if (isExtraneousPopstateEvent(event)) return;\n    handlePop(getDOMLocation(event.state));\n  }\n\n  function handleHashChange() {\n    handlePop(getDOMLocation(getHistoryState()));\n  }\n\n  var forceNextPop = false;\n\n  function handlePop(location) {\n    if (forceNextPop) {\n      forceNextPop = false;\n      setState();\n    } else {\n      var action = 'POP';\n      transitionManager.confirmTransitionTo(location, action, getUserConfirmation, function (ok) {\n        if (ok) {\n          setState({\n            action: action,\n            location: location\n          });\n        } else {\n          revertPop(location);\n        }\n      });\n    }\n  }\n\n  function revertPop(fromLocation) {\n    var toLocation = history.location; // TODO: We could probably make this more reliable by\n    // keeping a list of keys we've seen in sessionStorage.\n    // Instead, we just default to 0 for keys we don't know.\n\n    var toIndex = allKeys.indexOf(toLocation.key);\n    if (toIndex === -1) toIndex = 0;\n    var fromIndex = allKeys.indexOf(fromLocation.key);\n    if (fromIndex === -1) fromIndex = 0;\n    var delta = toIndex - fromIndex;\n\n    if (delta) {\n      forceNextPop = true;\n      go(delta);\n    }\n  }\n\n  var initialLocation = getDOMLocation(getHistoryState());\n  var allKeys = [initialLocation.key]; // Public interface\n\n  function createHref(location) {\n    return basename + createPath(location);\n  }\n\n  function push(path, state) {\n    process.env.NODE_ENV !== \"production\" ? warning(!(typeof path === 'object' && path.state !== undefined && state !== undefined), 'You should avoid providing a 2nd state argument to push when the 1st ' + 'argument is a location-like object that already has state; it is ignored') : void 0;\n    var action = 'PUSH';\n    var location = createLocation(path, state, createKey(), history.location);\n    transitionManager.confirmTransitionTo(location, action, getUserConfirmation, function (ok) {\n      if (!ok) return;\n      var href = createHref(location);\n      var key = location.key,\n          state = location.state;\n\n      if (canUseHistory) {\n        globalHistory.pushState({\n          key: key,\n          state: state\n        }, null, href);\n\n        if (forceRefresh) {\n          window.location.href = href;\n        } else {\n          var prevIndex = allKeys.indexOf(history.location.key);\n          var nextKeys = allKeys.slice(0, prevIndex + 1);\n          nextKeys.push(location.key);\n          allKeys = nextKeys;\n          setState({\n            action: action,\n            location: location\n          });\n        }\n      } else {\n        process.env.NODE_ENV !== \"production\" ? warning(state === undefined, 'Browser history cannot push state in browsers that do not support HTML5 history') : void 0;\n        window.location.href = href;\n      }\n    });\n  }\n\n  function replace(path, state) {\n    process.env.NODE_ENV !== \"production\" ? warning(!(typeof path === 'object' && path.state !== undefined && state !== undefined), 'You should avoid providing a 2nd state argument to replace when the 1st ' + 'argument is a location-like object that already has state; it is ignored') : void 0;\n    var action = 'REPLACE';\n    var location = createLocation(path, state, createKey(), history.location);\n    transitionManager.confirmTransitionTo(location, action, getUserConfirmation, function (ok) {\n      if (!ok) return;\n      var href = createHref(location);\n      var key = location.key,\n          state = location.state;\n\n      if (canUseHistory) {\n        globalHistory.replaceState({\n          key: key,\n          state: state\n        }, null, href);\n\n        if (forceRefresh) {\n          window.location.replace(href);\n        } else {\n          var prevIndex = allKeys.indexOf(history.location.key);\n          if (prevIndex !== -1) allKeys[prevIndex] = location.key;\n          setState({\n            action: action,\n            location: location\n          });\n        }\n      } else {\n        process.env.NODE_ENV !== \"production\" ? warning(state === undefined, 'Browser history cannot replace state in browsers that do not support HTML5 history') : void 0;\n        window.location.replace(href);\n      }\n    });\n  }\n\n  function go(n) {\n    globalHistory.go(n);\n  }\n\n  function goBack() {\n    go(-1);\n  }\n\n  function goForward() {\n    go(1);\n  }\n\n  var listenerCount = 0;\n\n  function checkDOMListeners(delta) {\n    listenerCount += delta;\n\n    if (listenerCount === 1 && delta === 1) {\n      window.addEventListener(PopStateEvent, handlePopState);\n      if (needsHashChangeListener) window.addEventListener(HashChangeEvent, handleHashChange);\n    } else if (listenerCount === 0) {\n      window.removeEventListener(PopStateEvent, handlePopState);\n      if (needsHashChangeListener) window.removeEventListener(HashChangeEvent, handleHashChange);\n    }\n  }\n\n  var isBlocked = false;\n\n  function block(prompt) {\n    if (prompt === void 0) {\n      prompt = false;\n    }\n\n    var unblock = transitionManager.setPrompt(prompt);\n\n    if (!isBlocked) {\n      checkDOMListeners(1);\n      isBlocked = true;\n    }\n\n    return function () {\n      if (isBlocked) {\n        isBlocked = false;\n        checkDOMListeners(-1);\n      }\n\n      return unblock();\n    };\n  }\n\n  function listen(listener) {\n    var unlisten = transitionManager.appendListener(listener);\n    checkDOMListeners(1);\n    return function () {\n      checkDOMListeners(-1);\n      unlisten();\n    };\n  }\n\n  var history = {\n    length: globalHistory.length,\n    action: 'POP',\n    location: initialLocation,\n    createHref: createHref,\n    push: push,\n    replace: replace,\n    go: go,\n    goBack: goBack,\n    goForward: goForward,\n    block: block,\n    listen: listen\n  };\n  return history;\n}\n\nvar HashChangeEvent$1 = 'hashchange';\nvar HashPathCoders = {\n  hashbang: {\n    encodePath: function encodePath(path) {\n      return path.charAt(0) === '!' ? path : '!/' + stripLeadingSlash(path);\n    },\n    decodePath: function decodePath(path) {\n      return path.charAt(0) === '!' ? path.substr(1) : path;\n    }\n  },\n  noslash: {\n    encodePath: stripLeadingSlash,\n    decodePath: addLeadingSlash\n  },\n  slash: {\n    encodePath: addLeadingSlash,\n    decodePath: addLeadingSlash\n  }\n};\n\nfunction stripHash(url) {\n  var hashIndex = url.indexOf('#');\n  return hashIndex === -1 ? url : url.slice(0, hashIndex);\n}\n\nfunction getHashPath() {\n  // We can't use window.location.hash here because it's not\n  // consistent across browsers - Firefox will pre-decode it!\n  var href = window.location.href;\n  var hashIndex = href.indexOf('#');\n  return hashIndex === -1 ? '' : href.substring(hashIndex + 1);\n}\n\nfunction pushHashPath(path) {\n  window.location.hash = path;\n}\n\nfunction replaceHashPath(path) {\n  window.location.replace(stripHash(window.location.href) + '#' + path);\n}\n\nfunction createHashHistory(props) {\n  if (props === void 0) {\n    props = {};\n  }\n\n  !canUseDOM ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Hash history needs a DOM') : invariant(false) : void 0;\n  var globalHistory = window.history;\n  var canGoWithoutReload = supportsGoWithoutReloadUsingHash();\n  var _props = props,\n      _props$getUserConfirm = _props.getUserConfirmation,\n      getUserConfirmation = _props$getUserConfirm === void 0 ? getConfirmation : _props$getUserConfirm,\n      _props$hashType = _props.hashType,\n      hashType = _props$hashType === void 0 ? 'slash' : _props$hashType;\n  var basename = props.basename ? stripTrailingSlash(addLeadingSlash(props.basename)) : '';\n  var _HashPathCoders$hashT = HashPathCoders[hashType],\n      encodePath = _HashPathCoders$hashT.encodePath,\n      decodePath = _HashPathCoders$hashT.decodePath;\n\n  function getDOMLocation() {\n    var path = decodePath(getHashPath());\n    process.env.NODE_ENV !== \"production\" ? warning(!basename || hasBasename(path, basename), 'You are attempting to use a basename on a page whose URL path does not begin ' + 'with the basename. Expected path \"' + path + '\" to begin with \"' + basename + '\".') : void 0;\n    if (basename) path = stripBasename(path, basename);\n    return createLocation(path);\n  }\n\n  var transitionManager = createTransitionManager();\n\n  function setState(nextState) {\n    _extends(history, nextState);\n\n    history.length = globalHistory.length;\n    transitionManager.notifyListeners(history.location, history.action);\n  }\n\n  var forceNextPop = false;\n  var ignorePath = null;\n\n  function locationsAreEqual$$1(a, b) {\n    return a.pathname === b.pathname && a.search === b.search && a.hash === b.hash;\n  }\n\n  function handleHashChange() {\n    var path = getHashPath();\n    var encodedPath = encodePath(path);\n\n    if (path !== encodedPath) {\n      // Ensure we always have a properly-encoded hash.\n      replaceHashPath(encodedPath);\n    } else {\n      var location = getDOMLocation();\n      var prevLocation = history.location;\n      if (!forceNextPop && locationsAreEqual$$1(prevLocation, location)) return; // A hashchange doesn't always == location change.\n\n      if (ignorePath === createPath(location)) return; // Ignore this change; we already setState in push/replace.\n\n      ignorePath = null;\n      handlePop(location);\n    }\n  }\n\n  function handlePop(location) {\n    if (forceNextPop) {\n      forceNextPop = false;\n      setState();\n    } else {\n      var action = 'POP';\n      transitionManager.confirmTransitionTo(location, action, getUserConfirmation, function (ok) {\n        if (ok) {\n          setState({\n            action: action,\n            location: location\n          });\n        } else {\n          revertPop(location);\n        }\n      });\n    }\n  }\n\n  function revertPop(fromLocation) {\n    var toLocation = history.location; // TODO: We could probably make this more reliable by\n    // keeping a list of paths we've seen in sessionStorage.\n    // Instead, we just default to 0 for paths we don't know.\n\n    var toIndex = allPaths.lastIndexOf(createPath(toLocation));\n    if (toIndex === -1) toIndex = 0;\n    var fromIndex = allPaths.lastIndexOf(createPath(fromLocation));\n    if (fromIndex === -1) fromIndex = 0;\n    var delta = toIndex - fromIndex;\n\n    if (delta) {\n      forceNextPop = true;\n      go(delta);\n    }\n  } // Ensure the hash is encoded properly before doing anything else.\n\n\n  var path = getHashPath();\n  var encodedPath = encodePath(path);\n  if (path !== encodedPath) replaceHashPath(encodedPath);\n  var initialLocation = getDOMLocation();\n  var allPaths = [createPath(initialLocation)]; // Public interface\n\n  function createHref(location) {\n    var baseTag = document.querySelector('base');\n    var href = '';\n\n    if (baseTag && baseTag.getAttribute('href')) {\n      href = stripHash(window.location.href);\n    }\n\n    return href + '#' + encodePath(basename + createPath(location));\n  }\n\n  function push(path, state) {\n    process.env.NODE_ENV !== \"production\" ? warning(state === undefined, 'Hash history cannot push state; it is ignored') : void 0;\n    var action = 'PUSH';\n    var location = createLocation(path, undefined, undefined, history.location);\n    transitionManager.confirmTransitionTo(location, action, getUserConfirmation, function (ok) {\n      if (!ok) return;\n      var path = createPath(location);\n      var encodedPath = encodePath(basename + path);\n      var hashChanged = getHashPath() !== encodedPath;\n\n      if (hashChanged) {\n        // We cannot tell if a hashchange was caused by a PUSH, so we'd\n        // rather setState here and ignore the hashchange. The caveat here\n        // is that other hash histories in the page will consider it a POP.\n        ignorePath = path;\n        pushHashPath(encodedPath);\n        var prevIndex = allPaths.lastIndexOf(createPath(history.location));\n        var nextPaths = allPaths.slice(0, prevIndex + 1);\n        nextPaths.push(path);\n        allPaths = nextPaths;\n        setState({\n          action: action,\n          location: location\n        });\n      } else {\n        process.env.NODE_ENV !== \"production\" ? warning(false, 'Hash history cannot PUSH the same path; a new entry will not be added to the history stack') : void 0;\n        setState();\n      }\n    });\n  }\n\n  function replace(path, state) {\n    process.env.NODE_ENV !== \"production\" ? warning(state === undefined, 'Hash history cannot replace state; it is ignored') : void 0;\n    var action = 'REPLACE';\n    var location = createLocation(path, undefined, undefined, history.location);\n    transitionManager.confirmTransitionTo(location, action, getUserConfirmation, function (ok) {\n      if (!ok) return;\n      var path = createPath(location);\n      var encodedPath = encodePath(basename + path);\n      var hashChanged = getHashPath() !== encodedPath;\n\n      if (hashChanged) {\n        // We cannot tell if a hashchange was caused by a REPLACE, so we'd\n        // rather setState here and ignore the hashchange. The caveat here\n        // is that other hash histories in the page will consider it a POP.\n        ignorePath = path;\n        replaceHashPath(encodedPath);\n      }\n\n      var prevIndex = allPaths.indexOf(createPath(history.location));\n      if (prevIndex !== -1) allPaths[prevIndex] = path;\n      setState({\n        action: action,\n        location: location\n      });\n    });\n  }\n\n  function go(n) {\n    process.env.NODE_ENV !== \"production\" ? warning(canGoWithoutReload, 'Hash history go(n) causes a full page reload in this browser') : void 0;\n    globalHistory.go(n);\n  }\n\n  function goBack() {\n    go(-1);\n  }\n\n  function goForward() {\n    go(1);\n  }\n\n  var listenerCount = 0;\n\n  function checkDOMListeners(delta) {\n    listenerCount += delta;\n\n    if (listenerCount === 1 && delta === 1) {\n      window.addEventListener(HashChangeEvent$1, handleHashChange);\n    } else if (listenerCount === 0) {\n      window.removeEventListener(HashChangeEvent$1, handleHashChange);\n    }\n  }\n\n  var isBlocked = false;\n\n  function block(prompt) {\n    if (prompt === void 0) {\n      prompt = false;\n    }\n\n    var unblock = transitionManager.setPrompt(prompt);\n\n    if (!isBlocked) {\n      checkDOMListeners(1);\n      isBlocked = true;\n    }\n\n    return function () {\n      if (isBlocked) {\n        isBlocked = false;\n        checkDOMListeners(-1);\n      }\n\n      return unblock();\n    };\n  }\n\n  function listen(listener) {\n    var unlisten = transitionManager.appendListener(listener);\n    checkDOMListeners(1);\n    return function () {\n      checkDOMListeners(-1);\n      unlisten();\n    };\n  }\n\n  var history = {\n    length: globalHistory.length,\n    action: 'POP',\n    location: initialLocation,\n    createHref: createHref,\n    push: push,\n    replace: replace,\n    go: go,\n    goBack: goBack,\n    goForward: goForward,\n    block: block,\n    listen: listen\n  };\n  return history;\n}\n\nfunction clamp(n, lowerBound, upperBound) {\n  return Math.min(Math.max(n, lowerBound), upperBound);\n}\n/**\n * Creates a history object that stores locations in memory.\n */\n\n\nfunction createMemoryHistory(props) {\n  if (props === void 0) {\n    props = {};\n  }\n\n  var _props = props,\n      getUserConfirmation = _props.getUserConfirmation,\n      _props$initialEntries = _props.initialEntries,\n      initialEntries = _props$initialEntries === void 0 ? ['/'] : _props$initialEntries,\n      _props$initialIndex = _props.initialIndex,\n      initialIndex = _props$initialIndex === void 0 ? 0 : _props$initialIndex,\n      _props$keyLength = _props.keyLength,\n      keyLength = _props$keyLength === void 0 ? 6 : _props$keyLength;\n  var transitionManager = createTransitionManager();\n\n  function setState(nextState) {\n    _extends(history, nextState);\n\n    history.length = history.entries.length;\n    transitionManager.notifyListeners(history.location, history.action);\n  }\n\n  function createKey() {\n    return Math.random().toString(36).substr(2, keyLength);\n  }\n\n  var index = clamp(initialIndex, 0, initialEntries.length - 1);\n  var entries = initialEntries.map(function (entry) {\n    return typeof entry === 'string' ? createLocation(entry, undefined, createKey()) : createLocation(entry, undefined, entry.key || createKey());\n  }); // Public interface\n\n  var createHref = createPath;\n\n  function push(path, state) {\n    process.env.NODE_ENV !== \"production\" ? warning(!(typeof path === 'object' && path.state !== undefined && state !== undefined), 'You should avoid providing a 2nd state argument to push when the 1st ' + 'argument is a location-like object that already has state; it is ignored') : void 0;\n    var action = 'PUSH';\n    var location = createLocation(path, state, createKey(), history.location);\n    transitionManager.confirmTransitionTo(location, action, getUserConfirmation, function (ok) {\n      if (!ok) return;\n      var prevIndex = history.index;\n      var nextIndex = prevIndex + 1;\n      var nextEntries = history.entries.slice(0);\n\n      if (nextEntries.length > nextIndex) {\n        nextEntries.splice(nextIndex, nextEntries.length - nextIndex, location);\n      } else {\n        nextEntries.push(location);\n      }\n\n      setState({\n        action: action,\n        location: location,\n        index: nextIndex,\n        entries: nextEntries\n      });\n    });\n  }\n\n  function replace(path, state) {\n    process.env.NODE_ENV !== \"production\" ? warning(!(typeof path === 'object' && path.state !== undefined && state !== undefined), 'You should avoid providing a 2nd state argument to replace when the 1st ' + 'argument is a location-like object that already has state; it is ignored') : void 0;\n    var action = 'REPLACE';\n    var location = createLocation(path, state, createKey(), history.location);\n    transitionManager.confirmTransitionTo(location, action, getUserConfirmation, function (ok) {\n      if (!ok) return;\n      history.entries[history.index] = location;\n      setState({\n        action: action,\n        location: location\n      });\n    });\n  }\n\n  function go(n) {\n    var nextIndex = clamp(history.index + n, 0, history.entries.length - 1);\n    var action = 'POP';\n    var location = history.entries[nextIndex];\n    transitionManager.confirmTransitionTo(location, action, getUserConfirmation, function (ok) {\n      if (ok) {\n        setState({\n          action: action,\n          location: location,\n          index: nextIndex\n        });\n      } else {\n        // Mimic the behavior of DOM histories by\n        // causing a render after a cancelled POP.\n        setState();\n      }\n    });\n  }\n\n  function goBack() {\n    go(-1);\n  }\n\n  function goForward() {\n    go(1);\n  }\n\n  function canGo(n) {\n    var nextIndex = history.index + n;\n    return nextIndex >= 0 && nextIndex < history.entries.length;\n  }\n\n  function block(prompt) {\n    if (prompt === void 0) {\n      prompt = false;\n    }\n\n    return transitionManager.setPrompt(prompt);\n  }\n\n  function listen(listener) {\n    return transitionManager.appendListener(listener);\n  }\n\n  var history = {\n    length: entries.length,\n    action: 'POP',\n    location: entries[index],\n    index: index,\n    entries: entries,\n    createHref: createHref,\n    push: push,\n    replace: replace,\n    go: go,\n    goBack: goBack,\n    goForward: goForward,\n    canGo: canGo,\n    block: block,\n    listen: listen\n  };\n  return history;\n}\n\nexport { createBrowserHistory, createHashHistory, createMemoryHistory, createLocation, locationsAreEqual, parsePath, createPath };\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/tomap\n */\n\nimport objectToMap from './objecttomap';\nimport isIterable from './isiterable';\n\n/**\n * Transforms object or iterable to map. Iterable needs to be in the format acceptable by the `Map` constructor.\n *\n *\t\tmap = toMap( { 'foo': 1, 'bar': 2 } );\n *\t\tmap = toMap( [ [ 'foo', 1 ], [ 'bar', 2 ] ] );\n *\t\tmap = toMap( anotherMap );\n *\n * @param {Object|Iterable} data Object or iterable to transform.\n * @returns {Map} Map created from data.\n */\nexport default function toMap( data ) {\n\tif ( isIterable( data ) ) {\n\t\treturn new Map( data );\n\t} else {\n\t\treturn objectToMap( data );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/objecttomap\n */\n\n/**\n * Transforms object to map.\n *\n *\t\tconst map = objectToMap( { 'foo': 1, 'bar': 2 } );\n *\t\tmap.get( 'foo' ); // 1\n *\n * **Note**: For mixed data (`Object` or `Iterable`) there's a dedicated {@link module:utils/tomap~toMap} function.\n *\n * @param {Object} obj Object to transform.\n * @returns {Map} Map created from object.\n */\nexport default function objectToMap( obj ) {\n\tconst map = new Map();\n\n\tfor ( const key in obj ) {\n\t\tmap.set( key, obj[ key ] );\n\t}\n\n\treturn map;\n}\n","import React from 'react';\nexport var ReactReduxContext = /*#__PURE__*/React.createContext(null);\n\nif (process.env.NODE_ENV !== 'production') {\n  ReactReduxContext.displayName = 'ReactRedux';\n}\n\nexport default ReactReduxContext;","// Default to a dummy \"batch\" implementation that just runs the callback\nfunction defaultNoopBatch(callback) {\n  callback();\n}\n\nvar batch = defaultNoopBatch; // Allow injecting another batching function later\n\nexport var setBatch = function setBatch(newBatch) {\n  return batch = newBatch;\n}; // Supply a getter just to skip dealing with ESM bindings\n\nexport var getBatch = function getBatch() {\n  return batch;\n};","import { getBatch } from './batch'; // encapsulates the subscription logic for connecting a component to the redux store, as\n// well as nesting subscriptions of descendant components, so that we can ensure the\n// ancestor components re-render before descendants\n\nvar nullListeners = {\n  notify: function notify() {}\n};\n\nfunction createListenerCollection() {\n  var batch = getBatch();\n  var first = null;\n  var last = null;\n  return {\n    clear: function clear() {\n      first = null;\n      last = null;\n    },\n    notify: function notify() {\n      batch(function () {\n        var listener = first;\n\n        while (listener) {\n          listener.callback();\n          listener = listener.next;\n        }\n      });\n    },\n    get: function get() {\n      var listeners = [];\n      var listener = first;\n\n      while (listener) {\n        listeners.push(listener);\n        listener = listener.next;\n      }\n\n      return listeners;\n    },\n    subscribe: function subscribe(callback) {\n      var isSubscribed = true;\n      var listener = last = {\n        callback: callback,\n        next: null,\n        prev: last\n      };\n\n      if (listener.prev) {\n        listener.prev.next = listener;\n      } else {\n        first = listener;\n      }\n\n      return function unsubscribe() {\n        if (!isSubscribed || first === null) return;\n        isSubscribed = false;\n\n        if (listener.next) {\n          listener.next.prev = listener.prev;\n        } else {\n          last = listener.prev;\n        }\n\n        if (listener.prev) {\n          listener.prev.next = listener.next;\n        } else {\n          first = listener.next;\n        }\n      };\n    }\n  };\n}\n\nvar Subscription = /*#__PURE__*/function () {\n  function Subscription(store, parentSub) {\n    this.store = store;\n    this.parentSub = parentSub;\n    this.unsubscribe = null;\n    this.listeners = nullListeners;\n    this.handleChangeWrapper = this.handleChangeWrapper.bind(this);\n  }\n\n  var _proto = Subscription.prototype;\n\n  _proto.addNestedSub = function addNestedSub(listener) {\n    this.trySubscribe();\n    return this.listeners.subscribe(listener);\n  };\n\n  _proto.notifyNestedSubs = function notifyNestedSubs() {\n    this.listeners.notify();\n  };\n\n  _proto.handleChangeWrapper = function handleChangeWrapper() {\n    if (this.onStateChange) {\n      this.onStateChange();\n    }\n  };\n\n  _proto.isSubscribed = function isSubscribed() {\n    return Boolean(this.unsubscribe);\n  };\n\n  _proto.trySubscribe = function trySubscribe() {\n    if (!this.unsubscribe) {\n      this.unsubscribe = this.parentSub ? this.parentSub.addNestedSub(this.handleChangeWrapper) : this.store.subscribe(this.handleChangeWrapper);\n      this.listeners = createListenerCollection();\n    }\n  };\n\n  _proto.tryUnsubscribe = function tryUnsubscribe() {\n    if (this.unsubscribe) {\n      this.unsubscribe();\n      this.unsubscribe = null;\n      this.listeners.clear();\n      this.listeners = nullListeners;\n    }\n  };\n\n  return Subscription;\n}();\n\nexport { Subscription as default };","import React, { useMemo, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { ReactReduxContext } from './Context';\nimport Subscription from '../utils/Subscription';\n\nfunction Provider(_ref) {\n  var store = _ref.store,\n      context = _ref.context,\n      children = _ref.children;\n  var contextValue = useMemo(function () {\n    var subscription = new Subscription(store);\n    subscription.onStateChange = subscription.notifyNestedSubs;\n    return {\n      store: store,\n      subscription: subscription\n    };\n  }, [store]);\n  var previousState = useMemo(function () {\n    return store.getState();\n  }, [store]);\n  useEffect(function () {\n    var subscription = contextValue.subscription;\n    subscription.trySubscribe();\n\n    if (previousState !== store.getState()) {\n      subscription.notifyNestedSubs();\n    }\n\n    return function () {\n      subscription.tryUnsubscribe();\n      subscription.onStateChange = null;\n    };\n  }, [contextValue, previousState]);\n  var Context = context || ReactReduxContext;\n  return /*#__PURE__*/React.createElement(Context.Provider, {\n    value: contextValue\n  }, children);\n}\n\nif (process.env.NODE_ENV !== 'production') {\n  Provider.propTypes = {\n    store: PropTypes.shape({\n      subscribe: PropTypes.func.isRequired,\n      dispatch: PropTypes.func.isRequired,\n      getState: PropTypes.func.isRequired\n    }),\n    context: PropTypes.object,\n    children: PropTypes.any\n  };\n}\n\nexport default Provider;","import { useEffect, useLayoutEffect } from 'react'; // React currently throws a warning when using useLayoutEffect on the server.\n// To get around it, we can conditionally useEffect on the server (no-op) and\n// useLayoutEffect in the browser. We need useLayoutEffect to ensure the store\n// subscription callback always has the selector from the latest render commit\n// available, otherwise a store update may happen between render and the effect,\n// which may cause missed updates; we also must ensure the store subscription\n// is created synchronously, otherwise a store update may occur before the\n// subscription is created and an inconsistent state may be observed\n\nexport var useIsomorphicLayoutEffect = typeof window !== 'undefined' && typeof window.document !== 'undefined' && typeof window.document.createElement !== 'undefined' ? useLayoutEffect : useEffect;","import { useContext } from 'react';\nimport { ReactReduxContext } from '../components/Context';\n/**\n * A hook to access the value of the `ReactReduxContext`. This is a low-level\n * hook that you should usually not need to call directly.\n *\n * @returns {any} the value of the `ReactReduxContext`\n *\n * @example\n *\n * import React from 'react'\n * import { useReduxContext } from 'react-redux'\n *\n * export const CounterComponent = ({ value }) => {\n *   const { store } = useReduxContext()\n *   return <div>{store.getState()}</div>\n * }\n */\n\nexport function useReduxContext() {\n  var contextValue = useContext(ReactReduxContext);\n\n  if (process.env.NODE_ENV !== 'production' && !contextValue) {\n    throw new Error('could not find react-redux context value; please ensure the component is wrapped in a <Provider>');\n  }\n\n  return contextValue;\n}","import { useContext } from 'react';\nimport { ReactReduxContext } from '../components/Context';\nimport { useReduxContext as useDefaultReduxContext } from './useReduxContext';\n/**\n * Hook factory, which creates a `useStore` hook bound to a given context.\n *\n * @param {React.Context} [context=ReactReduxContext] Context passed to your `<Provider>`.\n * @returns {Function} A `useStore` hook bound to the specified context.\n */\n\nexport function createStoreHook(context) {\n  if (context === void 0) {\n    context = ReactReduxContext;\n  }\n\n  var useReduxContext = context === ReactReduxContext ? useDefaultReduxContext : function () {\n    return useContext(context);\n  };\n  return function useStore() {\n    var _useReduxContext = useReduxContext(),\n        store = _useReduxContext.store;\n\n    return store;\n  };\n}\n/**\n * A hook to access the redux store.\n *\n * @returns {any} the redux store\n *\n * @example\n *\n * import React from 'react'\n * import { useStore } from 'react-redux'\n *\n * export const ExampleComponent = () => {\n *   const store = useStore()\n *   return <div>{store.getState()}</div>\n * }\n */\n\nexport var useStore = /*#__PURE__*/createStoreHook();","import { ReactReduxContext } from '../components/Context';\nimport { useStore as useDefaultStore, createStoreHook } from './useStore';\n/**\n * Hook factory, which creates a `useDispatch` hook bound to a given context.\n *\n * @param {React.Context} [context=ReactReduxContext] Context passed to your `<Provider>`.\n * @returns {Function} A `useDispatch` hook bound to the specified context.\n */\n\nexport function createDispatchHook(context) {\n  if (context === void 0) {\n    context = ReactReduxContext;\n  }\n\n  var useStore = context === ReactReduxContext ? useDefaultStore : createStoreHook(context);\n  return function useDispatch() {\n    var store = useStore();\n    return store.dispatch;\n  };\n}\n/**\n * A hook to access the redux `dispatch` function.\n *\n * @returns {any|function} redux store's `dispatch` function\n *\n * @example\n *\n * import React, { useCallback } from 'react'\n * import { useDispatch } from 'react-redux'\n *\n * export const CounterComponent = ({ value }) => {\n *   const dispatch = useDispatch()\n *   const increaseCounter = useCallback(() => dispatch({ type: 'increase-counter' }), [])\n *   return (\n *     <div>\n *       <span>{value}</span>\n *       <button onClick={increaseCounter}>Increase counter</button>\n *     </div>\n *   )\n * }\n */\n\nexport var useDispatch = /*#__PURE__*/createDispatchHook();","import { useReducer, useRef, useMemo, useContext, useDebugValue } from 'react';\nimport { useReduxContext as useDefaultReduxContext } from './useReduxContext';\nimport Subscription from '../utils/Subscription';\nimport { useIsomorphicLayoutEffect } from '../utils/useIsomorphicLayoutEffect';\nimport { ReactReduxContext } from '../components/Context';\n\nvar refEquality = function refEquality(a, b) {\n  return a === b;\n};\n\nfunction useSelectorWithStoreAndSubscription(selector, equalityFn, store, contextSub) {\n  var _useReducer = useReducer(function (s) {\n    return s + 1;\n  }, 0),\n      forceRender = _useReducer[1];\n\n  var subscription = useMemo(function () {\n    return new Subscription(store, contextSub);\n  }, [store, contextSub]);\n  var latestSubscriptionCallbackError = useRef();\n  var latestSelector = useRef();\n  var latestStoreState = useRef();\n  var latestSelectedState = useRef();\n  var storeState = store.getState();\n  var selectedState;\n\n  try {\n    if (selector !== latestSelector.current || storeState !== latestStoreState.current || latestSubscriptionCallbackError.current) {\n      selectedState = selector(storeState);\n    } else {\n      selectedState = latestSelectedState.current;\n    }\n  } catch (err) {\n    if (latestSubscriptionCallbackError.current) {\n      err.message += \"\\nThe error may be correlated with this previous error:\\n\" + latestSubscriptionCallbackError.current.stack + \"\\n\\n\";\n    }\n\n    throw err;\n  }\n\n  useIsomorphicLayoutEffect(function () {\n    latestSelector.current = selector;\n    latestStoreState.current = storeState;\n    latestSelectedState.current = selectedState;\n    latestSubscriptionCallbackError.current = undefined;\n  });\n  useIsomorphicLayoutEffect(function () {\n    function checkForUpdates() {\n      try {\n        var newSelectedState = latestSelector.current(store.getState());\n\n        if (equalityFn(newSelectedState, latestSelectedState.current)) {\n          return;\n        }\n\n        latestSelectedState.current = newSelectedState;\n      } catch (err) {\n        // we ignore all errors here, since when the component\n        // is re-rendered, the selectors are called again, and\n        // will throw again, if neither props nor store state\n        // changed\n        latestSubscriptionCallbackError.current = err;\n      }\n\n      forceRender();\n    }\n\n    subscription.onStateChange = checkForUpdates;\n    subscription.trySubscribe();\n    checkForUpdates();\n    return function () {\n      return subscription.tryUnsubscribe();\n    };\n  }, [store, subscription]);\n  return selectedState;\n}\n/**\n * Hook factory, which creates a `useSelector` hook bound to a given context.\n *\n * @param {React.Context} [context=ReactReduxContext] Context passed to your `<Provider>`.\n * @returns {Function} A `useSelector` hook bound to the specified context.\n */\n\n\nexport function createSelectorHook(context) {\n  if (context === void 0) {\n    context = ReactReduxContext;\n  }\n\n  var useReduxContext = context === ReactReduxContext ? useDefaultReduxContext : function () {\n    return useContext(context);\n  };\n  return function useSelector(selector, equalityFn) {\n    if (equalityFn === void 0) {\n      equalityFn = refEquality;\n    }\n\n    if (process.env.NODE_ENV !== 'production' && !selector) {\n      throw new Error(\"You must pass a selector to useSelector\");\n    }\n\n    var _useReduxContext = useReduxContext(),\n        store = _useReduxContext.store,\n        contextSub = _useReduxContext.subscription;\n\n    var selectedState = useSelectorWithStoreAndSubscription(selector, equalityFn, store, contextSub);\n    useDebugValue(selectedState);\n    return selectedState;\n  };\n}\n/**\n * A hook to access the redux store's state. This hook takes a selector function\n * as an argument. The selector is called with the store state.\n *\n * This hook takes an optional equality comparison function as the second parameter\n * that allows you to customize the way the selected state is compared to determine\n * whether the component needs to be re-rendered.\n *\n * @param {Function} selector the selector function\n * @param {Function=} equalityFn the function that will be used to determine equality\n *\n * @returns {any} the selected state\n *\n * @example\n *\n * import React from 'react'\n * import { useSelector } from 'react-redux'\n *\n * export const CounterComponent = () => {\n *   const counter = useSelector(state => state.counter)\n *   return <div>{counter}</div>\n * }\n */\n\nexport var useSelector = /*#__PURE__*/createSelectorHook();","import Provider from './components/Provider';\nimport connectAdvanced from './components/connectAdvanced';\nimport { ReactReduxContext } from './components/Context';\nimport connect from './connect/connect';\nimport { useDispatch, createDispatchHook } from './hooks/useDispatch';\nimport { useSelector, createSelectorHook } from './hooks/useSelector';\nimport { useStore, createStoreHook } from './hooks/useStore';\nimport { setBatch } from './utils/batch';\nimport { unstable_batchedUpdates as batch } from './utils/reactBatchedUpdates';\nimport shallowEqual from './utils/shallowEqual';\nsetBatch(batch);\nexport { Provider, connectAdvanced, ReactReduxContext, connect, batch, useDispatch, createDispatchHook, useSelector, createSelectorHook, useStore, createStoreHook, shallowEqual };","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nexport default eq;\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/node\n */\n\nimport toMap from '@ckeditor/ckeditor5-utils/src/tomap';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport compareArrays from '@ckeditor/ckeditor5-utils/src/comparearrays';\n// To check if component is loaded more than once.\nimport '@ckeditor/ckeditor5-utils/src/version';\n\n/**\n * Model node. Most basic structure of model tree.\n *\n * This is an abstract class that is a base for other classes representing different nodes in model.\n *\n * **Note:** If a node is detached from the model tree, you can manipulate it using it's API.\n * However, it is **very important** that nodes already attached to model tree should be only changed through\n * {@link module:engine/model/writer~Writer Writer API}.\n *\n * Changes done by `Node` methods, like {@link module:engine/model/element~Element#_insertChild _insertChild} or\n * {@link module:engine/model/node~Node#_setAttribute _setAttribute}\n * do not generate {@link module:engine/model/operation/operation~Operation operations}\n * which are essential for correct editor work if you modify nodes in {@link module:engine/model/document~Document document} root.\n *\n * The flow of working on `Node` (and classes that inherits from it) is as such:\n * 1. You can create a `Node` instance, modify it using it's API.\n * 2. Add `Node` to the model using `Batch` API.\n * 3. Change `Node` that was already added to the model using `Batch` API.\n *\n * Similarly, you cannot use `Batch` API on a node that has not been added to the model tree, with the exception\n * of {@link module:engine/model/writer~Writer#insert inserting} that node to the model tree.\n *\n * Be aware that using {@link module:engine/model/writer~Writer#remove remove from Batch API} does not allow to use `Node` API because\n * the information about `Node` is still kept in model document.\n *\n * In case of {@link module:engine/model/element~Element element node}, adding and removing children also counts as changing a node and\n * follows same rules.\n */\nexport default class Node {\n\t/**\n\t * Creates a model node.\n\t *\n\t * This is an abstract class, so this constructor should not be used directly.\n\t *\n\t * @abstract\n\t * @param {Object} [attrs] Node's attributes. See {@link module:utils/tomap~toMap} for a list of accepted values.\n\t */\n\tconstructor( attrs ) {\n\t\t/**\n\t\t * Parent of this node. It could be {@link module:engine/model/element~Element}\n\t\t * or {@link module:engine/model/documentfragment~DocumentFragment}.\n\t\t * Equals to `null` if the node has no parent.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment|null}\n\t\t */\n\t\tthis.parent = null;\n\n\t\t/**\n\t\t * Attributes set on this node.\n\t\t *\n\t\t * @private\n\t\t * @member {Map} module:engine/model/node~Node#_attrs\n\t\t */\n\t\tthis._attrs = toMap( attrs );\n\t}\n\n\t/**\n\t * Index of this node in it's parent or `null` if the node has no parent.\n\t *\n\t * Accessing this property throws an error if this node's parent element does not contain it.\n\t * This means that model tree got broken.\n\t *\n\t * @readonly\n\t * @type {Number|null}\n\t */\n\tget index() {\n\t\tlet pos;\n\n\t\tif ( !this.parent ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif ( ( pos = this.parent.getChildIndex( this ) ) === null ) {\n\t\t\tthrow new CKEditorError( 'model-node-not-found-in-parent', this );\n\t\t}\n\n\t\treturn pos;\n\t}\n\n\t/**\n\t * Offset at which this node starts in it's parent. It is equal to the sum of {@link #offsetSize offsetSize}\n\t * of all it's previous siblings. Equals to `null` if node has no parent.\n\t *\n\t * Accessing this property throws an error if this node's parent element does not contain it.\n\t * This means that model tree got broken.\n\t *\n\t * @readonly\n\t * @type {Number|null}\n\t */\n\tget startOffset() {\n\t\tlet pos;\n\n\t\tif ( !this.parent ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif ( ( pos = this.parent.getChildStartOffset( this ) ) === null ) {\n\t\t\tthrow new CKEditorError( 'model-node-not-found-in-parent', this );\n\t\t}\n\n\t\treturn pos;\n\t}\n\n\t/**\n\t * Offset size of this node. Represents how much \"offset space\" is occupied by the node in it's parent.\n\t * It is important for {@link module:engine/model/position~Position position}. When node has `offsetSize` greater than `1`, position\n\t * can be placed between that node start and end. `offsetSize` greater than `1` is for nodes that represents more\n\t * than one entity, i.e. {@link module:engine/model/text~Text text node}.\n\t *\n\t * @readonly\n\t * @type {Number}\n\t */\n\tget offsetSize() {\n\t\treturn 1;\n\t}\n\n\t/**\n\t * Offset at which this node ends in it's parent. It is equal to the sum of this node's\n\t * {@link module:engine/model/node~Node#startOffset start offset} and {@link #offsetSize offset size}.\n\t * Equals to `null` if the node has no parent.\n\t *\n\t * @readonly\n\t * @type {Number|null}\n\t */\n\tget endOffset() {\n\t\tif ( !this.parent ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this.startOffset + this.offsetSize;\n\t}\n\n\t/**\n\t * Node's next sibling or `null` if the node is a last child of it's parent or if the node has no parent.\n\t *\n\t * @readonly\n\t * @type {module:engine/model/node~Node|null}\n\t */\n\tget nextSibling() {\n\t\tconst index = this.index;\n\n\t\treturn ( index !== null && this.parent.getChild( index + 1 ) ) || null;\n\t}\n\n\t/**\n\t * Node's previous sibling or `null` if the node is a first child of it's parent or if the node has no parent.\n\t *\n\t * @readonly\n\t * @type {module:engine/model/node~Node|null}\n\t */\n\tget previousSibling() {\n\t\tconst index = this.index;\n\n\t\treturn ( index !== null && this.parent.getChild( index - 1 ) ) || null;\n\t}\n\n\t/**\n\t * The top-most ancestor of the node. If node has no parent it is the root itself. If the node is a part\n\t * of {@link module:engine/model/documentfragment~DocumentFragment}, it's `root` is equal to that `DocumentFragment`.\n\t *\n\t * @readonly\n\t * @type {module:engine/model/node~Node|module:engine/model/documentfragment~DocumentFragment}\n\t */\n\tget root() {\n\t\tlet root = this; // eslint-disable-line consistent-this\n\n\t\twhile ( root.parent ) {\n\t\t\troot = root.parent;\n\t\t}\n\n\t\treturn root;\n\t}\n\n\t/**\n\t * Returns true if the node is in a tree rooted in the document (is a descendant of one of its roots).\n\t *\n\t * @returns {Boolean}\n\t */\n\tisAttached() {\n\t\treturn this.root.is( 'rootElement' );\n\t}\n\n\t/**\n\t * Gets path to the node. The path is an array containing starting offsets of consecutive ancestors of this node,\n\t * beginning from {@link module:engine/model/node~Node#root root}, down to this node's starting offset. The path can be used to\n\t * create {@link module:engine/model/position~Position Position} instance.\n\t *\n\t *\t\tconst abc = new Text( 'abc' );\n\t *\t\tconst foo = new Text( 'foo' );\n\t *\t\tconst h1 = new Element( 'h1', null, new Text( 'header' ) );\n\t *\t\tconst p = new Element( 'p', null, [ abc, foo ] );\n\t *\t\tconst div = new Element( 'div', null, [ h1, p ] );\n\t *\t\tfoo.getPath(); // Returns [ 1, 3 ]. `foo` is in `p` which is in `div`. `p` starts at offset 1, while `foo` at 3.\n\t *\t\th1.getPath(); // Returns [ 0 ].\n\t *\t\tdiv.getPath(); // Returns [].\n\t *\n\t * @returns {Array.<Number>} The path.\n\t */\n\tgetPath() {\n\t\tconst path = [];\n\t\tlet node = this; // eslint-disable-line consistent-this\n\n\t\twhile ( node.parent ) {\n\t\t\tpath.unshift( node.startOffset );\n\t\t\tnode = node.parent;\n\t\t}\n\n\t\treturn path;\n\t}\n\n\t/**\n\t * Returns ancestors array of this node.\n\t *\n\t * @param {Object} options Options object.\n\t * @param {Boolean} [options.includeSelf=false] When set to `true` this node will be also included in parent's array.\n\t * @param {Boolean} [options.parentFirst=false] When set to `true`, array will be sorted from node's parent to root element,\n\t * otherwise root element will be the first item in the array.\n\t * @returns {Array} Array with ancestors.\n\t */\n\tgetAncestors( options = { includeSelf: false, parentFirst: false } ) {\n\t\tconst ancestors = [];\n\t\tlet parent = options.includeSelf ? this : this.parent;\n\n\t\twhile ( parent ) {\n\t\t\tancestors[ options.parentFirst ? 'push' : 'unshift' ]( parent );\n\t\t\tparent = parent.parent;\n\t\t}\n\n\t\treturn ancestors;\n\t}\n\n\t/**\n\t * Returns a {@link module:engine/model/element~Element} or {@link module:engine/model/documentfragment~DocumentFragment}\n\t * which is a common ancestor of both nodes.\n\t *\n\t * @param {module:engine/model/node~Node} node The second node.\n\t * @param {Object} options Options object.\n\t * @param {Boolean} [options.includeSelf=false] When set to `true` both nodes will be considered \"ancestors\" too.\n\t * Which means that if e.g. node A is inside B, then their common ancestor will be B.\n\t * @returns {module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment|null}\n\t */\n\tgetCommonAncestor( node, options = {} ) {\n\t\tconst ancestorsA = this.getAncestors( options );\n\t\tconst ancestorsB = node.getAncestors( options );\n\n\t\tlet i = 0;\n\n\t\twhile ( ancestorsA[ i ] == ancestorsB[ i ] && ancestorsA[ i ] ) {\n\t\t\ti++;\n\t\t}\n\n\t\treturn i === 0 ? null : ancestorsA[ i - 1 ];\n\t}\n\n\t/**\n\t * Returns whether this node is before given node. `false` is returned if nodes are in different trees (for example,\n\t * in different {@link module:engine/model/documentfragment~DocumentFragment}s).\n\t *\n\t * @param {module:engine/model/node~Node} node Node to compare with.\n\t * @returns {Boolean}\n\t */\n\tisBefore( node ) {\n\t\t// Given node is not before this node if they are same.\n\t\tif ( this == node ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Return `false` if it is impossible to compare nodes.\n\t\tif ( this.root !== node.root ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst thisPath = this.getPath();\n\t\tconst nodePath = node.getPath();\n\n\t\tconst result = compareArrays( thisPath, nodePath );\n\n\t\tswitch ( result ) {\n\t\t\tcase 'prefix':\n\t\t\t\treturn true;\n\n\t\t\tcase 'extension':\n\t\t\t\treturn false;\n\n\t\t\tdefault:\n\t\t\t\treturn thisPath[ result ] < nodePath[ result ];\n\t\t}\n\t}\n\n\t/**\n\t * Returns whether this node is after given node. `false` is returned if nodes are in different trees (for example,\n\t * in different {@link module:engine/model/documentfragment~DocumentFragment}s).\n\t *\n\t * @param {module:engine/model/node~Node} node Node to compare with.\n\t * @returns {Boolean}\n\t */\n\tisAfter( node ) {\n\t\t// Given node is not before this node if they are same.\n\t\tif ( this == node ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Return `false` if it is impossible to compare nodes.\n\t\tif ( this.root !== node.root ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// In other cases, just check if the `node` is before, and return the opposite.\n\t\treturn !this.isBefore( node );\n\t}\n\n\t/**\n\t * Checks if the node has an attribute with given key.\n\t *\n\t * @param {String} key Key of attribute to check.\n\t * @returns {Boolean} `true` if attribute with given key is set on node, `false` otherwise.\n\t */\n\thasAttribute( key ) {\n\t\treturn this._attrs.has( key );\n\t}\n\n\t/**\n\t * Gets an attribute value for given key or `undefined` if that attribute is not set on node.\n\t *\n\t * @param {String} key Key of attribute to look for.\n\t * @returns {*} Attribute value or `undefined`.\n\t */\n\tgetAttribute( key ) {\n\t\treturn this._attrs.get( key );\n\t}\n\n\t/**\n\t * Returns iterator that iterates over this node's attributes.\n\t *\n\t * Attributes are returned as arrays containing two items. First one is attribute key and second is attribute value.\n\t * This format is accepted by native `Map` object and also can be passed in `Node` constructor.\n\t *\n\t * @returns {Iterable.<*>}\n\t */\n\tgetAttributes() {\n\t\treturn this._attrs.entries();\n\t}\n\n\t/**\n\t * Returns iterator that iterates over this node's attribute keys.\n\t *\n\t * @returns {Iterable.<String>}\n\t */\n\tgetAttributeKeys() {\n\t\treturn this._attrs.keys();\n\t}\n\n\t/**\n\t * Converts `Node` to plain object and returns it.\n\t *\n\t * @returns {Object} `Node` converted to plain object.\n\t */\n\ttoJSON() {\n\t\tconst json = {};\n\n\t\t// Serializes attributes to the object.\n\t\t// attributes = { a: 'foo', b: 1, c: true }.\n\t\tif ( this._attrs.size ) {\n\t\t\tjson.attributes = Array.from( this._attrs ).reduce( ( result, attr ) => {\n\t\t\t\tresult[ attr[ 0 ] ] = attr[ 1 ];\n\n\t\t\t\treturn result;\n\t\t\t}, {} );\n\t\t}\n\n\t\treturn json;\n\t}\n\n\t/**\n\t * Checks whether this object is of the given type.\n\t *\n\t * This method is useful when processing model objects that are of unknown type. For example, a function\n\t * may return a {@link module:engine/model/documentfragment~DocumentFragment} or a {@link module:engine/model/node~Node}\n\t * that can be either a text node or an element. This method can be used to check what kind of object is returned.\n\t *\n\t *\t\tsomeObject.is( 'element' ); // -> true if this is an element\n\t *\t\tsomeObject.is( 'node' ); // -> true if this is a node (a text node or an element)\n\t *\t\tsomeObject.is( 'documentFragment' ); // -> true if this is a document fragment\n\t *\n\t * Since this method is also available on a range of view objects, you can prefix the type of the object with\n\t * `model:` or `view:` to check, for example, if this is the model's or view's element:\n\t *\n\t *\t\tmodelElement.is( 'model:element' ); // -> true\n\t *\t\tmodelElement.is( 'view:element' ); // -> false\n\t *\n\t * By using this method it is also possible to check a name of an element:\n\t *\n\t *\t\timageElement.is( 'element', 'image' ); // -> true\n\t *\t\timageElement.is( 'element', 'image' ); // -> same as above\n\t *\t\timageElement.is( 'model:element', 'image' ); // -> same as above, but more precise\n\t *\n\t * The list of model objects which implement the `is()` method:\n\t *\n\t * * {@link module:engine/model/node~Node#is `Node#is()`}\n\t * * {@link module:engine/model/text~Text#is `Text#is()`}\n\t * * {@link module:engine/model/element~Element#is `Element#is()`}\n\t * * {@link module:engine/model/rootelement~RootElement#is `RootElement#is()`}\n\t * * {@link module:engine/model/position~Position#is `Position#is()`}\n\t * * {@link module:engine/model/liveposition~LivePosition#is `LivePosition#is()`}\n\t * * {@link module:engine/model/range~Range#is `Range#is()`}\n\t * * {@link module:engine/model/liverange~LiveRange#is `LiveRange#is()`}\n\t * * {@link module:engine/model/documentfragment~DocumentFragment#is `DocumentFragment#is()`}\n\t * * {@link module:engine/model/selection~Selection#is `Selection#is()`}\n\t * * {@link module:engine/model/documentselection~DocumentSelection#is `DocumentSelection#is()`}\n\t * * {@link module:engine/model/markercollection~Marker#is `Marker#is()`}\n\t * * {@link module:engine/model/textproxy~TextProxy#is `TextProxy#is()`}\n\t *\n\t * @method #is\n\t * @param {String} type Type to check.\n\t * @returns {Boolean}\n\t */\n\tis( type ) {\n\t\treturn type === 'node' || type === 'model:node';\n\t}\n\n\t/**\n\t * Creates a copy of this node, that is a node with exactly same attributes, and returns it.\n\t *\n\t * @protected\n\t * @returns {module:engine/model/node~Node} Node with same attributes as this node.\n\t */\n\t_clone() {\n\t\treturn new Node( this._attrs );\n\t}\n\n\t/**\n\t * Removes this node from it's parent.\n\t *\n\t * @see module:engine/model/writer~Writer#remove\n\t * @protected\n\t */\n\t_remove() {\n\t\tthis.parent._removeChildren( this.index );\n\t}\n\n\t/**\n\t * Sets attribute on the node. If attribute with the same key already is set, it's value is overwritten.\n\t *\n\t * @see module:engine/model/writer~Writer#setAttribute\n\t * @protected\n\t * @param {String} key Key of attribute to set.\n\t * @param {*} value Attribute value.\n\t */\n\t_setAttribute( key, value ) {\n\t\tthis._attrs.set( key, value );\n\t}\n\n\t/**\n\t * Removes all attributes from the node and sets given attributes.\n\t *\n\t * @see module:engine/model/writer~Writer#setAttributes\n\t * @protected\n\t * @param {Object} [attrs] Attributes to set. See {@link module:utils/tomap~toMap} for a list of accepted values.\n\t */\n\t_setAttributesTo( attrs ) {\n\t\tthis._attrs = toMap( attrs );\n\t}\n\n\t/**\n\t * Removes an attribute with given key from the node.\n\t *\n\t * @see module:engine/model/writer~Writer#removeAttribute\n\t * @protected\n\t * @param {String} key Key of attribute to remove.\n\t * @returns {Boolean} `true` if the attribute was set on the element, `false` otherwise.\n\t */\n\t_removeAttribute( key ) {\n\t\treturn this._attrs.delete( key );\n\t}\n\n\t/**\n\t * Removes all attributes from the node.\n\t *\n\t * @see module:engine/model/writer~Writer#clearAttributes\n\t * @protected\n\t */\n\t_clearAttributes() {\n\t\tthis._attrs.clear();\n\t}\n}\n\n/**\n * The node's parent does not contain this node.\n *\n * @error model-node-not-found-in-parent\n */\n","var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexport var isBrowser = (typeof window === \"undefined\" ? \"undefined\" : _typeof(window)) === \"object\" && (typeof document === \"undefined\" ? \"undefined\" : _typeof(document)) === 'object' && document.nodeType === 9;\n\nexport default isBrowser;\n","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","import _extends from '@babel/runtime/helpers/esm/extends';\nimport isInBrowser from 'is-in-browser';\nimport warning from 'tiny-warning';\nimport _createClass from '@babel/runtime/helpers/esm/createClass';\nimport _inheritsLoose from '@babel/runtime/helpers/esm/inheritsLoose';\nimport _assertThisInitialized from '@babel/runtime/helpers/esm/assertThisInitialized';\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\n\nvar plainObjectConstrurctor = {}.constructor;\nfunction cloneStyle(style) {\n  if (style == null || typeof style !== 'object') return style;\n  if (Array.isArray(style)) return style.map(cloneStyle);\n  if (style.constructor !== plainObjectConstrurctor) return style;\n  var newStyle = {};\n\n  for (var name in style) {\n    newStyle[name] = cloneStyle(style[name]);\n  }\n\n  return newStyle;\n}\n\n/**\n * Create a rule instance.\n */\n\nfunction createRule(name, decl, options) {\n  if (name === void 0) {\n    name = 'unnamed';\n  }\n\n  var jss = options.jss;\n  var declCopy = cloneStyle(decl);\n  var rule = jss.plugins.onCreateRule(name, declCopy, options);\n  if (rule) return rule; // It is an at-rule and it has no instance.\n\n  if (name[0] === '@') {\n    process.env.NODE_ENV !== \"production\" ? warning(false, \"[JSS] Unknown rule \" + name) : void 0;\n  }\n\n  return null;\n}\n\nvar join = function join(value, by) {\n  var result = '';\n\n  for (var i = 0; i < value.length; i++) {\n    // Remove !important from the value, it will be readded later.\n    if (value[i] === '!important') break;\n    if (result) result += by;\n    result += value[i];\n  }\n\n  return result;\n};\n\n/**\n * Converts array values to string.\n *\n * `margin: [['5px', '10px']]` > `margin: 5px 10px;`\n * `border: ['1px', '2px']` > `border: 1px, 2px;`\n * `margin: [['5px', '10px'], '!important']` > `margin: 5px 10px !important;`\n * `color: ['red', !important]` > `color: red !important;`\n */\nvar toCssValue = function toCssValue(value, ignoreImportant) {\n  if (ignoreImportant === void 0) {\n    ignoreImportant = false;\n  }\n\n  if (!Array.isArray(value)) return value;\n  var cssValue = ''; // Support space separated values via `[['5px', '10px']]`.\n\n  if (Array.isArray(value[0])) {\n    for (var i = 0; i < value.length; i++) {\n      if (value[i] === '!important') break;\n      if (cssValue) cssValue += ', ';\n      cssValue += join(value[i], ' ');\n    }\n  } else cssValue = join(value, ', '); // Add !important, because it was ignored.\n\n\n  if (!ignoreImportant && value[value.length - 1] === '!important') {\n    cssValue += ' !important';\n  }\n\n  return cssValue;\n};\n\n/**\n * Indent a string.\n * http://jsperf.com/array-join-vs-for\n */\nfunction indentStr(str, indent) {\n  var result = '';\n\n  for (var index = 0; index < indent; index++) {\n    result += '  ';\n  }\n\n  return result + str;\n}\n/**\n * Converts a Rule to CSS string.\n */\n\n\nfunction toCss(selector, style, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var result = '';\n  if (!style) return result;\n  var _options = options,\n      _options$indent = _options.indent,\n      indent = _options$indent === void 0 ? 0 : _options$indent;\n  var fallbacks = style.fallbacks;\n  if (selector) indent++; // Apply fallbacks first.\n\n  if (fallbacks) {\n    // Array syntax {fallbacks: [{prop: value}]}\n    if (Array.isArray(fallbacks)) {\n      for (var index = 0; index < fallbacks.length; index++) {\n        var fallback = fallbacks[index];\n\n        for (var prop in fallback) {\n          var value = fallback[prop];\n\n          if (value != null) {\n            if (result) result += '\\n';\n            result += \"\" + indentStr(prop + \": \" + toCssValue(value) + \";\", indent);\n          }\n        }\n      }\n    } else {\n      // Object syntax {fallbacks: {prop: value}}\n      for (var _prop in fallbacks) {\n        var _value = fallbacks[_prop];\n\n        if (_value != null) {\n          if (result) result += '\\n';\n          result += \"\" + indentStr(_prop + \": \" + toCssValue(_value) + \";\", indent);\n        }\n      }\n    }\n  }\n\n  for (var _prop2 in style) {\n    var _value2 = style[_prop2];\n\n    if (_value2 != null && _prop2 !== 'fallbacks') {\n      if (result) result += '\\n';\n      result += \"\" + indentStr(_prop2 + \": \" + toCssValue(_value2) + \";\", indent);\n    }\n  } // Allow empty style in this case, because properties will be added dynamically.\n\n\n  if (!result && !options.allowEmpty) return result; // When rule is being stringified before selector was defined.\n\n  if (!selector) return result;\n  indent--;\n  if (result) result = \"\\n\" + result + \"\\n\";\n  return indentStr(selector + \" {\" + result, indent) + indentStr('}', indent);\n}\n\nvar escapeRegex = /([[\\].#*$><+~=|^:(),\"'`\\s])/g;\nvar nativeEscape = typeof CSS !== 'undefined' && CSS.escape;\nvar escape = (function (str) {\n  return nativeEscape ? nativeEscape(str) : str.replace(escapeRegex, '\\\\$1');\n});\n\nvar BaseStyleRule =\n/*#__PURE__*/\nfunction () {\n  function BaseStyleRule(key, style, options) {\n    this.type = 'style';\n    this.key = void 0;\n    this.isProcessed = false;\n    this.style = void 0;\n    this.renderer = void 0;\n    this.renderable = void 0;\n    this.options = void 0;\n    var sheet = options.sheet,\n        Renderer = options.Renderer;\n    this.key = key;\n    this.options = options;\n    this.style = style;\n    if (sheet) this.renderer = sheet.renderer;else if (Renderer) this.renderer = new Renderer();\n  }\n  /**\n   * Get or set a style property.\n   */\n\n\n  var _proto = BaseStyleRule.prototype;\n\n  _proto.prop = function prop(name, value, options) {\n    // It's a getter.\n    if (value === undefined) return this.style[name]; // Don't do anything if the value has not changed.\n\n    var force = options ? options.force : false;\n    if (!force && this.style[name] === value) return this;\n    var newValue = value;\n\n    if (!options || options.process !== false) {\n      newValue = this.options.jss.plugins.onChangeValue(value, name, this);\n    }\n\n    var isEmpty = newValue == null || newValue === false;\n    var isDefined = name in this.style; // Value is empty and wasn't defined before.\n\n    if (isEmpty && !isDefined && !force) return this; // We are going to remove this value.\n\n    var remove = isEmpty && isDefined;\n    if (remove) delete this.style[name];else this.style[name] = newValue; // Renderable is defined if StyleSheet option `link` is true.\n\n    if (this.renderable && this.renderer) {\n      if (remove) this.renderer.removeProperty(this.renderable, name);else this.renderer.setProperty(this.renderable, name, newValue);\n      return this;\n    }\n\n    var sheet = this.options.sheet;\n\n    if (sheet && sheet.attached) {\n      process.env.NODE_ENV !== \"production\" ? warning(false, '[JSS] Rule is not linked. Missing sheet option \"link: true\".') : void 0;\n    }\n\n    return this;\n  };\n\n  return BaseStyleRule;\n}();\nvar StyleRule =\n/*#__PURE__*/\nfunction (_BaseStyleRule) {\n  _inheritsLoose(StyleRule, _BaseStyleRule);\n\n  function StyleRule(key, style, options) {\n    var _this;\n\n    _this = _BaseStyleRule.call(this, key, style, options) || this;\n    _this.selectorText = void 0;\n    _this.id = void 0;\n    _this.renderable = void 0;\n    var selector = options.selector,\n        scoped = options.scoped,\n        sheet = options.sheet,\n        generateId = options.generateId;\n\n    if (selector) {\n      _this.selectorText = selector;\n    } else if (scoped !== false) {\n      _this.id = generateId(_assertThisInitialized(_assertThisInitialized(_this)), sheet);\n      _this.selectorText = \".\" + escape(_this.id);\n    }\n\n    return _this;\n  }\n  /**\n   * Set selector string.\n   * Attention: use this with caution. Most browsers didn't implement\n   * selectorText setter, so this may result in rerendering of entire Style Sheet.\n   */\n\n\n  var _proto2 = StyleRule.prototype;\n\n  /**\n   * Apply rule to an element inline.\n   */\n  _proto2.applyTo = function applyTo(renderable) {\n    var renderer = this.renderer;\n\n    if (renderer) {\n      var json = this.toJSON();\n\n      for (var prop in json) {\n        renderer.setProperty(renderable, prop, json[prop]);\n      }\n    }\n\n    return this;\n  }\n  /**\n   * Returns JSON representation of the rule.\n   * Fallbacks are not supported.\n   * Useful for inline styles.\n   */\n  ;\n\n  _proto2.toJSON = function toJSON() {\n    var json = {};\n\n    for (var prop in this.style) {\n      var value = this.style[prop];\n      if (typeof value !== 'object') json[prop] = value;else if (Array.isArray(value)) json[prop] = toCssValue(value);\n    }\n\n    return json;\n  }\n  /**\n   * Generates a CSS string.\n   */\n  ;\n\n  _proto2.toString = function toString(options) {\n    var sheet = this.options.sheet;\n    var link = sheet ? sheet.options.link : false;\n    var opts = link ? _extends({}, options, {\n      allowEmpty: true\n    }) : options;\n    return toCss(this.selectorText, this.style, opts);\n  };\n\n  _createClass(StyleRule, [{\n    key: \"selector\",\n    set: function set(selector) {\n      if (selector === this.selectorText) return;\n      this.selectorText = selector;\n      var renderer = this.renderer,\n          renderable = this.renderable;\n      if (!renderable || !renderer) return;\n      var hasChanged = renderer.setSelector(renderable, selector); // If selector setter is not implemented, rerender the rule.\n\n      if (!hasChanged) {\n        renderer.replaceRule(renderable, this);\n      }\n    }\n    /**\n     * Get selector string.\n     */\n    ,\n    get: function get() {\n      return this.selectorText;\n    }\n  }]);\n\n  return StyleRule;\n}(BaseStyleRule);\nvar pluginStyleRule = {\n  onCreateRule: function onCreateRule(name, style, options) {\n    if (name[0] === '@' || options.parent && options.parent.type === 'keyframes') {\n      return null;\n    }\n\n    return new StyleRule(name, style, options);\n  }\n};\n\nvar defaultToStringOptions = {\n  indent: 1,\n  children: true\n};\nvar atRegExp = /@([\\w-]+)/;\n/**\n * Conditional rule for @media, @supports\n */\n\nvar ConditionalRule =\n/*#__PURE__*/\nfunction () {\n  function ConditionalRule(key, styles, options) {\n    this.type = 'conditional';\n    this.at = void 0;\n    this.key = void 0;\n    this.query = void 0;\n    this.rules = void 0;\n    this.options = void 0;\n    this.isProcessed = false;\n    this.renderable = void 0;\n    this.key = key;\n    var atMatch = key.match(atRegExp);\n    this.at = atMatch ? atMatch[1] : 'unknown'; // Key might contain a unique suffix in case the `name` passed by user was duplicate.\n\n    this.query = options.name || \"@\" + this.at;\n    this.options = options;\n    this.rules = new RuleList(_extends({}, options, {\n      parent: this\n    }));\n\n    for (var name in styles) {\n      this.rules.add(name, styles[name]);\n    }\n\n    this.rules.process();\n  }\n  /**\n   * Get a rule.\n   */\n\n\n  var _proto = ConditionalRule.prototype;\n\n  _proto.getRule = function getRule(name) {\n    return this.rules.get(name);\n  }\n  /**\n   * Get index of a rule.\n   */\n  ;\n\n  _proto.indexOf = function indexOf(rule) {\n    return this.rules.indexOf(rule);\n  }\n  /**\n   * Create and register rule, run plugins.\n   */\n  ;\n\n  _proto.addRule = function addRule(name, style, options) {\n    var rule = this.rules.add(name, style, options);\n    if (!rule) return null;\n    this.options.jss.plugins.onProcessRule(rule);\n    return rule;\n  }\n  /**\n   * Generates a CSS string.\n   */\n  ;\n\n  _proto.toString = function toString(options) {\n    if (options === void 0) {\n      options = defaultToStringOptions;\n    }\n\n    if (options.indent == null) options.indent = defaultToStringOptions.indent;\n    if (options.children == null) options.children = defaultToStringOptions.children;\n\n    if (options.children === false) {\n      return this.query + \" {}\";\n    }\n\n    var children = this.rules.toString(options);\n    return children ? this.query + \" {\\n\" + children + \"\\n}\" : '';\n  };\n\n  return ConditionalRule;\n}();\nvar keyRegExp = /@media|@supports\\s+/;\nvar pluginConditionalRule = {\n  onCreateRule: function onCreateRule(key, styles, options) {\n    return keyRegExp.test(key) ? new ConditionalRule(key, styles, options) : null;\n  }\n};\n\nvar defaultToStringOptions$1 = {\n  indent: 1,\n  children: true\n};\nvar nameRegExp = /@keyframes\\s+([\\w-]+)/;\n/**\n * Rule for @keyframes\n */\n\nvar KeyframesRule =\n/*#__PURE__*/\nfunction () {\n  function KeyframesRule(key, frames, options) {\n    this.type = 'keyframes';\n    this.at = '@keyframes';\n    this.key = void 0;\n    this.name = void 0;\n    this.id = void 0;\n    this.rules = void 0;\n    this.options = void 0;\n    this.isProcessed = false;\n    this.renderable = void 0;\n    var nameMatch = key.match(nameRegExp);\n\n    if (nameMatch && nameMatch[1]) {\n      this.name = nameMatch[1];\n    } else {\n      this.name = 'noname';\n      process.env.NODE_ENV !== \"production\" ? warning(false, \"[JSS] Bad keyframes name \" + key) : void 0;\n    }\n\n    this.key = this.type + \"-\" + this.name;\n    this.options = options;\n    var scoped = options.scoped,\n        sheet = options.sheet,\n        generateId = options.generateId;\n    this.id = scoped === false ? this.name : escape(generateId(this, sheet));\n    this.rules = new RuleList(_extends({}, options, {\n      parent: this\n    }));\n\n    for (var name in frames) {\n      this.rules.add(name, frames[name], _extends({}, options, {\n        parent: this\n      }));\n    }\n\n    this.rules.process();\n  }\n  /**\n   * Generates a CSS string.\n   */\n\n\n  var _proto = KeyframesRule.prototype;\n\n  _proto.toString = function toString(options) {\n    if (options === void 0) {\n      options = defaultToStringOptions$1;\n    }\n\n    if (options.indent == null) options.indent = defaultToStringOptions$1.indent;\n    if (options.children == null) options.children = defaultToStringOptions$1.children;\n\n    if (options.children === false) {\n      return this.at + \" \" + this.id + \" {}\";\n    }\n\n    var children = this.rules.toString(options);\n    if (children) children = \"\\n\" + children + \"\\n\";\n    return this.at + \" \" + this.id + \" {\" + children + \"}\";\n  };\n\n  return KeyframesRule;\n}();\nvar keyRegExp$1 = /@keyframes\\s+/;\nvar refRegExp = /\\$([\\w-]+)/g;\n\nvar findReferencedKeyframe = function findReferencedKeyframe(val, keyframes) {\n  if (typeof val === 'string') {\n    return val.replace(refRegExp, function (match, name) {\n      if (name in keyframes) {\n        return keyframes[name];\n      }\n\n      process.env.NODE_ENV !== \"production\" ? warning(false, \"[JSS] Referenced keyframes rule \\\"\" + name + \"\\\" is not defined.\") : void 0;\n      return match;\n    });\n  }\n\n  return val;\n};\n/**\n * Replace the reference for a animation name.\n */\n\n\nvar replaceRef = function replaceRef(style, prop, keyframes) {\n  var value = style[prop];\n  var refKeyframe = findReferencedKeyframe(value, keyframes);\n\n  if (refKeyframe !== value) {\n    style[prop] = refKeyframe;\n  }\n};\n\nvar plugin = {\n  onCreateRule: function onCreateRule(key, frames, options) {\n    return typeof key === 'string' && keyRegExp$1.test(key) ? new KeyframesRule(key, frames, options) : null;\n  },\n  // Animation name ref replacer.\n  onProcessStyle: function onProcessStyle(style, rule, sheet) {\n    if (rule.type !== 'style' || !sheet) return style;\n    if ('animation-name' in style) replaceRef(style, 'animation-name', sheet.keyframes);\n    if ('animation' in style) replaceRef(style, 'animation', sheet.keyframes);\n    return style;\n  },\n  onChangeValue: function onChangeValue(val, prop, rule) {\n    var sheet = rule.options.sheet;\n\n    if (!sheet) {\n      return val;\n    }\n\n    switch (prop) {\n      case 'animation':\n        return findReferencedKeyframe(val, sheet.keyframes);\n\n      case 'animation-name':\n        return findReferencedKeyframe(val, sheet.keyframes);\n\n      default:\n        return val;\n    }\n  }\n};\n\nvar KeyframeRule =\n/*#__PURE__*/\nfunction (_BaseStyleRule) {\n  _inheritsLoose(KeyframeRule, _BaseStyleRule);\n\n  function KeyframeRule() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _BaseStyleRule.call.apply(_BaseStyleRule, [this].concat(args)) || this;\n    _this.renderable = void 0;\n    return _this;\n  }\n\n  var _proto = KeyframeRule.prototype;\n\n  /**\n   * Generates a CSS string.\n   */\n  _proto.toString = function toString(options) {\n    var sheet = this.options.sheet;\n    var link = sheet ? sheet.options.link : false;\n    var opts = link ? _extends({}, options, {\n      allowEmpty: true\n    }) : options;\n    return toCss(this.key, this.style, opts);\n  };\n\n  return KeyframeRule;\n}(BaseStyleRule);\nvar pluginKeyframeRule = {\n  onCreateRule: function onCreateRule(key, style, options) {\n    if (options.parent && options.parent.type === 'keyframes') {\n      return new KeyframeRule(key, style, options);\n    }\n\n    return null;\n  }\n};\n\nvar FontFaceRule =\n/*#__PURE__*/\nfunction () {\n  function FontFaceRule(key, style, options) {\n    this.type = 'font-face';\n    this.at = '@font-face';\n    this.key = void 0;\n    this.style = void 0;\n    this.options = void 0;\n    this.isProcessed = false;\n    this.renderable = void 0;\n    this.key = key;\n    this.style = style;\n    this.options = options;\n  }\n  /**\n   * Generates a CSS string.\n   */\n\n\n  var _proto = FontFaceRule.prototype;\n\n  _proto.toString = function toString(options) {\n    if (Array.isArray(this.style)) {\n      var str = '';\n\n      for (var index = 0; index < this.style.length; index++) {\n        str += toCss(this.at, this.style[index]);\n        if (this.style[index + 1]) str += '\\n';\n      }\n\n      return str;\n    }\n\n    return toCss(this.at, this.style, options);\n  };\n\n  return FontFaceRule;\n}();\nvar keyRegExp$2 = /@font-face/;\nvar pluginFontFaceRule = {\n  onCreateRule: function onCreateRule(key, style, options) {\n    return keyRegExp$2.test(key) ? new FontFaceRule(key, style, options) : null;\n  }\n};\n\nvar ViewportRule =\n/*#__PURE__*/\nfunction () {\n  function ViewportRule(key, style, options) {\n    this.type = 'viewport';\n    this.at = '@viewport';\n    this.key = void 0;\n    this.style = void 0;\n    this.options = void 0;\n    this.isProcessed = false;\n    this.renderable = void 0;\n    this.key = key;\n    this.style = style;\n    this.options = options;\n  }\n  /**\n   * Generates a CSS string.\n   */\n\n\n  var _proto = ViewportRule.prototype;\n\n  _proto.toString = function toString(options) {\n    return toCss(this.key, this.style, options);\n  };\n\n  return ViewportRule;\n}();\nvar pluginViewportRule = {\n  onCreateRule: function onCreateRule(key, style, options) {\n    return key === '@viewport' || key === '@-ms-viewport' ? new ViewportRule(key, style, options) : null;\n  }\n};\n\nvar SimpleRule =\n/*#__PURE__*/\nfunction () {\n  function SimpleRule(key, value, options) {\n    this.type = 'simple';\n    this.key = void 0;\n    this.value = void 0;\n    this.options = void 0;\n    this.isProcessed = false;\n    this.renderable = void 0;\n    this.key = key;\n    this.value = value;\n    this.options = options;\n  }\n  /**\n   * Generates a CSS string.\n   */\n  // eslint-disable-next-line no-unused-vars\n\n\n  var _proto = SimpleRule.prototype;\n\n  _proto.toString = function toString(options) {\n    if (Array.isArray(this.value)) {\n      var str = '';\n\n      for (var index = 0; index < this.value.length; index++) {\n        str += this.key + \" \" + this.value[index] + \";\";\n        if (this.value[index + 1]) str += '\\n';\n      }\n\n      return str;\n    }\n\n    return this.key + \" \" + this.value + \";\";\n  };\n\n  return SimpleRule;\n}();\nvar keysMap = {\n  '@charset': true,\n  '@import': true,\n  '@namespace': true\n};\nvar pluginSimpleRule = {\n  onCreateRule: function onCreateRule(key, value, options) {\n    return key in keysMap ? new SimpleRule(key, value, options) : null;\n  }\n};\n\nvar plugins = [pluginStyleRule, pluginConditionalRule, plugin, pluginKeyframeRule, pluginFontFaceRule, pluginViewportRule, pluginSimpleRule];\n\nvar defaultUpdateOptions = {\n  process: true\n};\nvar forceUpdateOptions = {\n  force: true,\n  process: true\n  /**\n   * Contains rules objects and allows adding/removing etc.\n   * Is used for e.g. by `StyleSheet` or `ConditionalRule`.\n   */\n\n};\n\nvar RuleList =\n/*#__PURE__*/\nfunction () {\n  // Rules registry for access by .get() method.\n  // It contains the same rule registered by name and by selector.\n  // Original styles object.\n  // Used to ensure correct rules order.\n  function RuleList(options) {\n    this.map = {};\n    this.raw = {};\n    this.index = [];\n    this.counter = 0;\n    this.options = void 0;\n    this.classes = void 0;\n    this.keyframes = void 0;\n    this.options = options;\n    this.classes = options.classes;\n    this.keyframes = options.keyframes;\n  }\n  /**\n   * Create and register rule.\n   *\n   * Will not render after Style Sheet was rendered the first time.\n   */\n\n\n  var _proto = RuleList.prototype;\n\n  _proto.add = function add(name, decl, ruleOptions) {\n    var _this$options = this.options,\n        parent = _this$options.parent,\n        sheet = _this$options.sheet,\n        jss = _this$options.jss,\n        Renderer = _this$options.Renderer,\n        generateId = _this$options.generateId,\n        scoped = _this$options.scoped;\n\n    var options = _extends({\n      classes: this.classes,\n      parent: parent,\n      sheet: sheet,\n      jss: jss,\n      Renderer: Renderer,\n      generateId: generateId,\n      scoped: scoped,\n      name: name,\n      keyframes: this.keyframes,\n      selector: undefined\n    }, ruleOptions); // When user uses .createStyleSheet(), duplicate names are not possible, but\n    // `sheet.addRule()` opens the door for any duplicate rule name. When this happens\n    // we need to make the key unique within this RuleList instance scope.\n\n\n    var key = name;\n\n    if (name in this.raw) {\n      key = name + \"-d\" + this.counter++;\n    } // We need to save the original decl before creating the rule\n    // because cache plugin needs to use it as a key to return a cached rule.\n\n\n    this.raw[key] = decl;\n\n    if (key in this.classes) {\n      // E.g. rules inside of @media container\n      options.selector = \".\" + escape(this.classes[key]);\n    }\n\n    var rule = createRule(key, decl, options);\n    if (!rule) return null;\n    this.register(rule);\n    var index = options.index === undefined ? this.index.length : options.index;\n    this.index.splice(index, 0, rule);\n    return rule;\n  }\n  /**\n   * Get a rule.\n   */\n  ;\n\n  _proto.get = function get(name) {\n    return this.map[name];\n  }\n  /**\n   * Delete a rule.\n   */\n  ;\n\n  _proto.remove = function remove(rule) {\n    this.unregister(rule);\n    delete this.raw[rule.key];\n    this.index.splice(this.index.indexOf(rule), 1);\n  }\n  /**\n   * Get index of a rule.\n   */\n  ;\n\n  _proto.indexOf = function indexOf(rule) {\n    return this.index.indexOf(rule);\n  }\n  /**\n   * Run `onProcessRule()` plugins on every rule.\n   */\n  ;\n\n  _proto.process = function process() {\n    var plugins = this.options.jss.plugins; // We need to clone array because if we modify the index somewhere else during a loop\n    // we end up with very hard-to-track-down side effects.\n\n    this.index.slice(0).forEach(plugins.onProcessRule, plugins);\n  }\n  /**\n   * Register a rule in `.map`, `.classes` and `.keyframes` maps.\n   */\n  ;\n\n  _proto.register = function register(rule) {\n    this.map[rule.key] = rule;\n\n    if (rule instanceof StyleRule) {\n      this.map[rule.selector] = rule;\n      if (rule.id) this.classes[rule.key] = rule.id;\n    } else if (rule instanceof KeyframesRule && this.keyframes) {\n      this.keyframes[rule.name] = rule.id;\n    }\n  }\n  /**\n   * Unregister a rule.\n   */\n  ;\n\n  _proto.unregister = function unregister(rule) {\n    delete this.map[rule.key];\n\n    if (rule instanceof StyleRule) {\n      delete this.map[rule.selector];\n      delete this.classes[rule.key];\n    } else if (rule instanceof KeyframesRule) {\n      delete this.keyframes[rule.name];\n    }\n  }\n  /**\n   * Update the function values with a new data.\n   */\n  ;\n\n  _proto.update = function update() {\n    var name;\n    var data;\n    var options;\n\n    if (typeof (arguments.length <= 0 ? undefined : arguments[0]) === 'string') {\n      name = arguments.length <= 0 ? undefined : arguments[0]; // $FlowFixMe[invalid-tuple-index]\n\n      data = arguments.length <= 1 ? undefined : arguments[1]; // $FlowFixMe[invalid-tuple-index]\n\n      options = arguments.length <= 2 ? undefined : arguments[2];\n    } else {\n      data = arguments.length <= 0 ? undefined : arguments[0]; // $FlowFixMe[invalid-tuple-index]\n\n      options = arguments.length <= 1 ? undefined : arguments[1];\n      name = null;\n    }\n\n    if (name) {\n      this.updateOne(this.map[name], data, options);\n    } else {\n      for (var index = 0; index < this.index.length; index++) {\n        this.updateOne(this.index[index], data, options);\n      }\n    }\n  }\n  /**\n   * Execute plugins, update rule props.\n   */\n  ;\n\n  _proto.updateOne = function updateOne(rule, data, options) {\n    if (options === void 0) {\n      options = defaultUpdateOptions;\n    }\n\n    var _this$options2 = this.options,\n        plugins = _this$options2.jss.plugins,\n        sheet = _this$options2.sheet; // It is a rules container like for e.g. ConditionalRule.\n\n    if (rule.rules instanceof RuleList) {\n      rule.rules.update(data, options);\n      return;\n    }\n\n    var styleRule = rule;\n    var style = styleRule.style;\n    plugins.onUpdate(data, rule, sheet, options); // We rely on a new `style` ref in case it was mutated during onUpdate hook.\n\n    if (options.process && style && style !== styleRule.style) {\n      // We need to run the plugins in case new `style` relies on syntax plugins.\n      plugins.onProcessStyle(styleRule.style, styleRule, sheet); // Update and add props.\n\n      for (var prop in styleRule.style) {\n        var nextValue = styleRule.style[prop];\n        var prevValue = style[prop]; // We need to use `force: true` because `rule.style` has been updated during onUpdate hook, so `rule.prop()` will not update the CSSOM rule.\n        // We do this comparison to avoid unneeded `rule.prop()` calls, since we have the old `style` object here.\n\n        if (nextValue !== prevValue) {\n          styleRule.prop(prop, nextValue, forceUpdateOptions);\n        }\n      } // Remove props.\n\n\n      for (var _prop in style) {\n        var _nextValue = styleRule.style[_prop];\n        var _prevValue = style[_prop]; // We need to use `force: true` because `rule.style` has been updated during onUpdate hook, so `rule.prop()` will not update the CSSOM rule.\n        // We do this comparison to avoid unneeded `rule.prop()` calls, since we have the old `style` object here.\n\n        if (_nextValue == null && _nextValue !== _prevValue) {\n          styleRule.prop(_prop, null, forceUpdateOptions);\n        }\n      }\n    }\n  }\n  /**\n   * Convert rules to a CSS string.\n   */\n  ;\n\n  _proto.toString = function toString(options) {\n    var str = '';\n    var sheet = this.options.sheet;\n    var link = sheet ? sheet.options.link : false;\n\n    for (var index = 0; index < this.index.length; index++) {\n      var rule = this.index[index];\n      var css = rule.toString(options); // No need to render an empty rule.\n\n      if (!css && !link) continue;\n      if (str) str += '\\n';\n      str += css;\n    }\n\n    return str;\n  };\n\n  return RuleList;\n}();\n\nvar StyleSheet =\n/*#__PURE__*/\nfunction () {\n  function StyleSheet(styles, options) {\n    this.options = void 0;\n    this.deployed = void 0;\n    this.attached = void 0;\n    this.rules = void 0;\n    this.renderer = void 0;\n    this.classes = void 0;\n    this.keyframes = void 0;\n    this.queue = void 0;\n    this.attached = false;\n    this.deployed = false;\n    this.classes = {};\n    this.keyframes = {};\n    this.options = _extends({}, options, {\n      sheet: this,\n      parent: this,\n      classes: this.classes,\n      keyframes: this.keyframes\n    });\n\n    if (options.Renderer) {\n      this.renderer = new options.Renderer(this);\n    }\n\n    this.rules = new RuleList(this.options);\n\n    for (var name in styles) {\n      this.rules.add(name, styles[name]);\n    }\n\n    this.rules.process();\n  }\n  /**\n   * Attach renderable to the render tree.\n   */\n\n\n  var _proto = StyleSheet.prototype;\n\n  _proto.attach = function attach() {\n    if (this.attached) return this;\n    if (this.renderer) this.renderer.attach();\n    this.attached = true; // Order is important, because we can't use insertRule API if style element is not attached.\n\n    if (!this.deployed) this.deploy();\n    return this;\n  }\n  /**\n   * Remove renderable from render tree.\n   */\n  ;\n\n  _proto.detach = function detach() {\n    if (!this.attached) return this;\n    if (this.renderer) this.renderer.detach();\n    this.attached = false;\n    return this;\n  }\n  /**\n   * Add a rule to the current stylesheet.\n   * Will insert a rule also after the stylesheet has been rendered first time.\n   */\n  ;\n\n  _proto.addRule = function addRule(name, decl, options) {\n    var queue = this.queue; // Plugins can create rules.\n    // In order to preserve the right order, we need to queue all `.addRule` calls,\n    // which happen after the first `rules.add()` call.\n\n    if (this.attached && !queue) this.queue = [];\n    var rule = this.rules.add(name, decl, options);\n    if (!rule) return null;\n    this.options.jss.plugins.onProcessRule(rule);\n\n    if (this.attached) {\n      if (!this.deployed) return rule; // Don't insert rule directly if there is no stringified version yet.\n      // It will be inserted all together when .attach is called.\n\n      if (queue) queue.push(rule);else {\n        this.insertRule(rule);\n\n        if (this.queue) {\n          this.queue.forEach(this.insertRule, this);\n          this.queue = undefined;\n        }\n      }\n      return rule;\n    } // We can't add rules to a detached style node.\n    // We will redeploy the sheet once user will attach it.\n\n\n    this.deployed = false;\n    return rule;\n  }\n  /**\n   * Insert rule into the StyleSheet\n   */\n  ;\n\n  _proto.insertRule = function insertRule(rule) {\n    if (this.renderer) {\n      this.renderer.insertRule(rule);\n    }\n  }\n  /**\n   * Create and add rules.\n   * Will render also after Style Sheet was rendered the first time.\n   */\n  ;\n\n  _proto.addRules = function addRules(styles, options) {\n    var added = [];\n\n    for (var name in styles) {\n      var rule = this.addRule(name, styles[name], options);\n      if (rule) added.push(rule);\n    }\n\n    return added;\n  }\n  /**\n   * Get a rule by name.\n   */\n  ;\n\n  _proto.getRule = function getRule(name) {\n    return this.rules.get(name);\n  }\n  /**\n   * Delete a rule by name.\n   * Returns `true`: if rule has been deleted from the DOM.\n   */\n  ;\n\n  _proto.deleteRule = function deleteRule(name) {\n    var rule = typeof name === 'object' ? name : this.rules.get(name);\n\n    if (!rule || // Style sheet was created without link: true and attached, in this case we\n    // won't be able to remove the CSS rule from the DOM.\n    this.attached && !rule.renderable) {\n      return false;\n    }\n\n    this.rules.remove(rule);\n\n    if (this.attached && rule.renderable && this.renderer) {\n      return this.renderer.deleteRule(rule.renderable);\n    }\n\n    return true;\n  }\n  /**\n   * Get index of a rule.\n   */\n  ;\n\n  _proto.indexOf = function indexOf(rule) {\n    return this.rules.indexOf(rule);\n  }\n  /**\n   * Deploy pure CSS string to a renderable.\n   */\n  ;\n\n  _proto.deploy = function deploy() {\n    if (this.renderer) this.renderer.deploy();\n    this.deployed = true;\n    return this;\n  }\n  /**\n   * Update the function values with a new data.\n   */\n  ;\n\n  _proto.update = function update() {\n    var _this$rules;\n\n    (_this$rules = this.rules).update.apply(_this$rules, arguments);\n\n    return this;\n  }\n  /**\n   * Updates a single rule.\n   */\n  ;\n\n  _proto.updateOne = function updateOne(rule, data, options) {\n    this.rules.updateOne(rule, data, options);\n    return this;\n  }\n  /**\n   * Convert rules to a CSS string.\n   */\n  ;\n\n  _proto.toString = function toString(options) {\n    return this.rules.toString(options);\n  };\n\n  return StyleSheet;\n}();\n\nvar PluginsRegistry =\n/*#__PURE__*/\nfunction () {\n  function PluginsRegistry() {\n    this.plugins = {\n      internal: [],\n      external: []\n    };\n    this.registry = void 0;\n  }\n\n  var _proto = PluginsRegistry.prototype;\n\n  /**\n   * Call `onCreateRule` hooks and return an object if returned by a hook.\n   */\n  _proto.onCreateRule = function onCreateRule(name, decl, options) {\n    for (var i = 0; i < this.registry.onCreateRule.length; i++) {\n      var rule = this.registry.onCreateRule[i](name, decl, options);\n      if (rule) return rule;\n    }\n\n    return null;\n  }\n  /**\n   * Call `onProcessRule` hooks.\n   */\n  ;\n\n  _proto.onProcessRule = function onProcessRule(rule) {\n    if (rule.isProcessed) return;\n    var sheet = rule.options.sheet;\n\n    for (var i = 0; i < this.registry.onProcessRule.length; i++) {\n      this.registry.onProcessRule[i](rule, sheet);\n    }\n\n    if (rule.style) this.onProcessStyle(rule.style, rule, sheet);\n    rule.isProcessed = true;\n  }\n  /**\n   * Call `onProcessStyle` hooks.\n   */\n  ;\n\n  _proto.onProcessStyle = function onProcessStyle(style, rule, sheet) {\n    for (var i = 0; i < this.registry.onProcessStyle.length; i++) {\n      // $FlowFixMe[prop-missing]\n      rule.style = this.registry.onProcessStyle[i](rule.style, rule, sheet);\n    }\n  }\n  /**\n   * Call `onProcessSheet` hooks.\n   */\n  ;\n\n  _proto.onProcessSheet = function onProcessSheet(sheet) {\n    for (var i = 0; i < this.registry.onProcessSheet.length; i++) {\n      this.registry.onProcessSheet[i](sheet);\n    }\n  }\n  /**\n   * Call `onUpdate` hooks.\n   */\n  ;\n\n  _proto.onUpdate = function onUpdate(data, rule, sheet, options) {\n    for (var i = 0; i < this.registry.onUpdate.length; i++) {\n      this.registry.onUpdate[i](data, rule, sheet, options);\n    }\n  }\n  /**\n   * Call `onChangeValue` hooks.\n   */\n  ;\n\n  _proto.onChangeValue = function onChangeValue(value, prop, rule) {\n    var processedValue = value;\n\n    for (var i = 0; i < this.registry.onChangeValue.length; i++) {\n      processedValue = this.registry.onChangeValue[i](processedValue, prop, rule);\n    }\n\n    return processedValue;\n  }\n  /**\n   * Register a plugin.\n   */\n  ;\n\n  _proto.use = function use(newPlugin, options) {\n    if (options === void 0) {\n      options = {\n        queue: 'external'\n      };\n    }\n\n    var plugins = this.plugins[options.queue]; // Avoids applying same plugin twice, at least based on ref.\n\n    if (plugins.indexOf(newPlugin) !== -1) {\n      return;\n    }\n\n    plugins.push(newPlugin);\n    this.registry = [].concat(this.plugins.external, this.plugins.internal).reduce(function (registry, plugin) {\n      for (var name in plugin) {\n        if (name in registry) {\n          registry[name].push(plugin[name]);\n        } else {\n          process.env.NODE_ENV !== \"production\" ? warning(false, \"[JSS] Unknown hook \\\"\" + name + \"\\\".\") : void 0;\n        }\n      }\n\n      return registry;\n    }, {\n      onCreateRule: [],\n      onProcessRule: [],\n      onProcessStyle: [],\n      onProcessSheet: [],\n      onChangeValue: [],\n      onUpdate: []\n    });\n  };\n\n  return PluginsRegistry;\n}();\n\n/**\n * Sheets registry to access them all at one place.\n */\nvar SheetsRegistry =\n/*#__PURE__*/\nfunction () {\n  function SheetsRegistry() {\n    this.registry = [];\n  }\n\n  var _proto = SheetsRegistry.prototype;\n\n  /**\n   * Register a Style Sheet.\n   */\n  _proto.add = function add(sheet) {\n    var registry = this.registry;\n    var index = sheet.options.index;\n    if (registry.indexOf(sheet) !== -1) return;\n\n    if (registry.length === 0 || index >= this.index) {\n      registry.push(sheet);\n      return;\n    } // Find a position.\n\n\n    for (var i = 0; i < registry.length; i++) {\n      if (registry[i].options.index > index) {\n        registry.splice(i, 0, sheet);\n        return;\n      }\n    }\n  }\n  /**\n   * Reset the registry.\n   */\n  ;\n\n  _proto.reset = function reset() {\n    this.registry = [];\n  }\n  /**\n   * Remove a Style Sheet.\n   */\n  ;\n\n  _proto.remove = function remove(sheet) {\n    var index = this.registry.indexOf(sheet);\n    this.registry.splice(index, 1);\n  }\n  /**\n   * Convert all attached sheets to a CSS string.\n   */\n  ;\n\n  _proto.toString = function toString(_temp) {\n    var _ref = _temp === void 0 ? {} : _temp,\n        attached = _ref.attached,\n        options = _objectWithoutPropertiesLoose(_ref, [\"attached\"]);\n\n    var css = '';\n\n    for (var i = 0; i < this.registry.length; i++) {\n      var sheet = this.registry[i];\n\n      if (attached != null && sheet.attached !== attached) {\n        continue;\n      }\n\n      if (css) css += '\\n';\n      css += sheet.toString(options);\n    }\n\n    return css;\n  };\n\n  _createClass(SheetsRegistry, [{\n    key: \"index\",\n\n    /**\n     * Current highest index number.\n     */\n    get: function get() {\n      return this.registry.length === 0 ? 0 : this.registry[this.registry.length - 1].options.index;\n    }\n  }]);\n\n  return SheetsRegistry;\n}();\n\n/**\n * This is a global sheets registry. Only DomRenderer will add sheets to it.\n * On the server one should use an own SheetsRegistry instance and add the\n * sheets to it, because you need to make sure to create a new registry for\n * each request in order to not leak sheets across requests.\n */\n\nvar registry = new SheetsRegistry();\n\n/* eslint-disable */\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar globalThis = typeof window != 'undefined' && window.Math == Math ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();\n\nvar ns = '2f1acc6c3a606b082e5eef5e54414ffb';\nif (globalThis[ns] == null) globalThis[ns] = 0; // Bundle may contain multiple JSS versions at the same time. In order to identify\n// the current version with just one short number and use it for classes generation\n// we use a counter. Also it is more accurate, because user can manually reevaluate\n// the module.\n\nvar moduleId = globalThis[ns]++;\n\nvar maxRules = 1e10;\n\n/**\n * Returns a function which generates unique class names based on counters.\n * When new generator function is created, rule counter is reseted.\n * We need to reset the rule counter for SSR for each request.\n */\nvar createGenerateId = function createGenerateId(options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var ruleCounter = 0;\n  return function (rule, sheet) {\n    ruleCounter += 1;\n\n    if (ruleCounter > maxRules) {\n      process.env.NODE_ENV !== \"production\" ? warning(false, \"[JSS] You might have a memory leak. Rule counter is at \" + ruleCounter + \".\") : void 0;\n    }\n\n    var jssId = '';\n    var prefix = '';\n\n    if (sheet) {\n      if (sheet.options.classNamePrefix) {\n        prefix = sheet.options.classNamePrefix;\n      }\n\n      if (sheet.options.jss.id != null) {\n        jssId = String(sheet.options.jss.id);\n      }\n    }\n\n    if (options.minify) {\n      // Using \"c\" because a number can't be the first char in a class name.\n      return \"\" + (prefix || 'c') + moduleId + jssId + ruleCounter;\n    }\n\n    return prefix + rule.key + \"-\" + moduleId + (jssId ? \"-\" + jssId : '') + \"-\" + ruleCounter;\n  };\n};\n\n/**\n * Cache the value from the first time a function is called.\n */\nvar memoize = function memoize(fn) {\n  var value;\n  return function () {\n    if (!value) value = fn();\n    return value;\n  };\n};\n\n/**\n * Get a style property value.\n */\nvar getPropertyValue = function getPropertyValue(cssRule, prop) {\n  try {\n    // Support CSSTOM.\n    if (cssRule.attributeStyleMap) {\n      return cssRule.attributeStyleMap.get(prop);\n    }\n\n    return cssRule.style.getPropertyValue(prop);\n  } catch (err) {\n    // IE may throw if property is unknown.\n    return '';\n  }\n};\n\n/**\n * Set a style property.\n */\nvar setProperty = function setProperty(cssRule, prop, value) {\n  try {\n    var cssValue = value;\n\n    if (Array.isArray(value)) {\n      cssValue = toCssValue(value, true);\n\n      if (value[value.length - 1] === '!important') {\n        cssRule.style.setProperty(prop, cssValue, 'important');\n        return true;\n      }\n    } // Support CSSTOM.\n\n\n    if (cssRule.attributeStyleMap) {\n      cssRule.attributeStyleMap.set(prop, cssValue);\n    } else {\n      cssRule.style.setProperty(prop, cssValue);\n    }\n  } catch (err) {\n    // IE may throw if property is unknown.\n    return false;\n  }\n\n  return true;\n};\n\n/**\n * Remove a style property.\n */\nvar removeProperty = function removeProperty(cssRule, prop) {\n  try {\n    // Support CSSTOM.\n    if (cssRule.attributeStyleMap) {\n      cssRule.attributeStyleMap.delete(prop);\n    } else {\n      cssRule.style.removeProperty(prop);\n    }\n  } catch (err) {\n    process.env.NODE_ENV !== \"production\" ? warning(false, \"[JSS] DOMException \\\"\" + err.message + \"\\\" was thrown. Tried to remove property \\\"\" + prop + \"\\\".\") : void 0;\n  }\n};\n\n/**\n * Set the selector.\n */\nvar setSelector = function setSelector(cssRule, selectorText) {\n  cssRule.selectorText = selectorText; // Return false if setter was not successful.\n  // Currently works in chrome only.\n\n  return cssRule.selectorText === selectorText;\n};\n/**\n * Gets the `head` element upon the first call and caches it.\n * We assume it can't be null.\n */\n\n\nvar getHead = memoize(function () {\n  return document.querySelector('head');\n});\n/**\n * Find attached sheet with an index higher than the passed one.\n */\n\nfunction findHigherSheet(registry, options) {\n  for (var i = 0; i < registry.length; i++) {\n    var sheet = registry[i];\n\n    if (sheet.attached && sheet.options.index > options.index && sheet.options.insertionPoint === options.insertionPoint) {\n      return sheet;\n    }\n  }\n\n  return null;\n}\n/**\n * Find attached sheet with the highest index.\n */\n\n\nfunction findHighestSheet(registry, options) {\n  for (var i = registry.length - 1; i >= 0; i--) {\n    var sheet = registry[i];\n\n    if (sheet.attached && sheet.options.insertionPoint === options.insertionPoint) {\n      return sheet;\n    }\n  }\n\n  return null;\n}\n/**\n * Find a comment with \"jss\" inside.\n */\n\n\nfunction findCommentNode(text) {\n  var head = getHead();\n\n  for (var i = 0; i < head.childNodes.length; i++) {\n    var node = head.childNodes[i];\n\n    if (node.nodeType === 8 && node.nodeValue.trim() === text) {\n      return node;\n    }\n  }\n\n  return null;\n}\n\n/**\n * Find a node before which we can insert the sheet.\n */\nfunction findPrevNode(options) {\n  var registry$1 = registry.registry;\n\n  if (registry$1.length > 0) {\n    // Try to insert before the next higher sheet.\n    var sheet = findHigherSheet(registry$1, options);\n\n    if (sheet && sheet.renderer) {\n      return {\n        parent: sheet.renderer.element.parentNode,\n        node: sheet.renderer.element\n      };\n    } // Otherwise insert after the last attached.\n\n\n    sheet = findHighestSheet(registry$1, options);\n\n    if (sheet && sheet.renderer) {\n      return {\n        parent: sheet.renderer.element.parentNode,\n        node: sheet.renderer.element.nextSibling\n      };\n    }\n  } // Try to find a comment placeholder if registry is empty.\n\n\n  var insertionPoint = options.insertionPoint;\n\n  if (insertionPoint && typeof insertionPoint === 'string') {\n    var comment = findCommentNode(insertionPoint);\n\n    if (comment) {\n      return {\n        parent: comment.parentNode,\n        node: comment.nextSibling\n      };\n    } // If user specifies an insertion point and it can't be found in the document -\n    // bad specificity issues may appear.\n\n\n    process.env.NODE_ENV !== \"production\" ? warning(false, \"[JSS] Insertion point \\\"\" + insertionPoint + \"\\\" not found.\") : void 0;\n  }\n\n  return false;\n}\n/**\n * Insert style element into the DOM.\n */\n\n\nfunction insertStyle(style, options) {\n  var insertionPoint = options.insertionPoint;\n  var nextNode = findPrevNode(options);\n\n  if (nextNode !== false && nextNode.parent) {\n    nextNode.parent.insertBefore(style, nextNode.node);\n    return;\n  } // Works with iframes and any node types.\n\n\n  if (insertionPoint && typeof insertionPoint.nodeType === 'number') {\n    // https://stackoverflow.com/questions/41328728/force-casting-in-flow\n    var insertionPointElement = insertionPoint;\n    var parentNode = insertionPointElement.parentNode;\n    if (parentNode) parentNode.insertBefore(style, insertionPointElement.nextSibling);else process.env.NODE_ENV !== \"production\" ? warning(false, '[JSS] Insertion point is not in the DOM.') : void 0;\n    return;\n  }\n\n  getHead().appendChild(style);\n}\n/**\n * Read jss nonce setting from the page if the user has set it.\n */\n\n\nvar getNonce = memoize(function () {\n  var node = document.querySelector('meta[property=\"csp-nonce\"]');\n  return node ? node.getAttribute('content') : null;\n});\n\nvar _insertRule = function insertRule(container, rule, index) {\n  try {\n    if ('insertRule' in container) {\n      var c = container;\n      c.insertRule(rule, index);\n    } // Keyframes rule.\n    else if ('appendRule' in container) {\n        var _c = container;\n\n        _c.appendRule(rule);\n      }\n  } catch (err) {\n    process.env.NODE_ENV !== \"production\" ? warning(false, \"[JSS] \" + err.message) : void 0;\n    return false;\n  }\n\n  return container.cssRules[index];\n};\n\nvar getValidRuleInsertionIndex = function getValidRuleInsertionIndex(container, index) {\n  var maxIndex = container.cssRules.length; // In case previous insertion fails, passed index might be wrong\n\n  if (index === undefined || index > maxIndex) {\n    // eslint-disable-next-line no-param-reassign\n    return maxIndex;\n  }\n\n  return index;\n};\n\nvar createStyle = function createStyle() {\n  var el = document.createElement('style'); // Without it, IE will have a broken source order specificity if we\n  // insert rules after we insert the style tag.\n  // It seems to kick-off the source order specificity algorithm.\n\n  el.textContent = '\\n';\n  return el;\n};\n\nvar DomRenderer =\n/*#__PURE__*/\nfunction () {\n  // HTMLStyleElement needs fixing https://github.com/facebook/flow/issues/2696\n  // Will be empty if link: true option is not set, because\n  // it is only for use together with insertRule API.\n  function DomRenderer(sheet) {\n    this.getPropertyValue = getPropertyValue;\n    this.setProperty = setProperty;\n    this.removeProperty = removeProperty;\n    this.setSelector = setSelector;\n    this.element = void 0;\n    this.sheet = void 0;\n    this.hasInsertedRules = false;\n    this.cssRules = [];\n    // There is no sheet when the renderer is used from a standalone StyleRule.\n    if (sheet) registry.add(sheet);\n    this.sheet = sheet;\n\n    var _ref = this.sheet ? this.sheet.options : {},\n        media = _ref.media,\n        meta = _ref.meta,\n        element = _ref.element;\n\n    this.element = element || createStyle();\n    this.element.setAttribute('data-jss', '');\n    if (media) this.element.setAttribute('media', media);\n    if (meta) this.element.setAttribute('data-meta', meta);\n    var nonce = getNonce();\n    if (nonce) this.element.setAttribute('nonce', nonce);\n  }\n  /**\n   * Insert style element into render tree.\n   */\n\n\n  var _proto = DomRenderer.prototype;\n\n  _proto.attach = function attach() {\n    // In the case the element node is external and it is already in the DOM.\n    if (this.element.parentNode || !this.sheet) return;\n    insertStyle(this.element, this.sheet.options); // When rules are inserted using `insertRule` API, after `sheet.detach().attach()`\n    // most browsers create a new CSSStyleSheet, except of all IEs.\n\n    var deployed = Boolean(this.sheet && this.sheet.deployed);\n\n    if (this.hasInsertedRules && deployed) {\n      this.hasInsertedRules = false;\n      this.deploy();\n    }\n  }\n  /**\n   * Remove style element from render tree.\n   */\n  ;\n\n  _proto.detach = function detach() {\n    if (!this.sheet) return;\n    var parentNode = this.element.parentNode;\n    if (parentNode) parentNode.removeChild(this.element); // In the most browsers, rules inserted using insertRule() API will be lost when style element is removed.\n    // Though IE will keep them and we need a consistent behavior.\n\n    if (this.sheet.options.link) {\n      this.cssRules = [];\n      this.element.textContent = '\\n';\n    }\n  }\n  /**\n   * Inject CSS string into element.\n   */\n  ;\n\n  _proto.deploy = function deploy() {\n    var sheet = this.sheet;\n    if (!sheet) return;\n\n    if (sheet.options.link) {\n      this.insertRules(sheet.rules);\n      return;\n    }\n\n    this.element.textContent = \"\\n\" + sheet.toString() + \"\\n\";\n  }\n  /**\n   * Insert RuleList into an element.\n   */\n  ;\n\n  _proto.insertRules = function insertRules(rules, nativeParent) {\n    for (var i = 0; i < rules.index.length; i++) {\n      this.insertRule(rules.index[i], i, nativeParent);\n    }\n  }\n  /**\n   * Insert a rule into element.\n   */\n  ;\n\n  _proto.insertRule = function insertRule(rule, index, nativeParent) {\n    if (nativeParent === void 0) {\n      nativeParent = this.element.sheet;\n    }\n\n    if (rule.rules) {\n      var parent = rule;\n      var latestNativeParent = nativeParent;\n\n      if (rule.type === 'conditional' || rule.type === 'keyframes') {\n        var _insertionIndex = getValidRuleInsertionIndex(nativeParent, index); // We need to render the container without children first.\n\n\n        latestNativeParent = _insertRule(nativeParent, parent.toString({\n          children: false\n        }), _insertionIndex);\n\n        if (latestNativeParent === false) {\n          return false;\n        }\n\n        this.refCssRule(rule, _insertionIndex, latestNativeParent);\n      }\n\n      this.insertRules(parent.rules, latestNativeParent);\n      return latestNativeParent;\n    }\n\n    var ruleStr = rule.toString();\n    if (!ruleStr) return false;\n    var insertionIndex = getValidRuleInsertionIndex(nativeParent, index);\n\n    var nativeRule = _insertRule(nativeParent, ruleStr, insertionIndex);\n\n    if (nativeRule === false) {\n      return false;\n    }\n\n    this.hasInsertedRules = true;\n    this.refCssRule(rule, insertionIndex, nativeRule);\n    return nativeRule;\n  };\n\n  _proto.refCssRule = function refCssRule(rule, index, cssRule) {\n    rule.renderable = cssRule; // We only want to reference the top level rules, deleteRule API doesn't support removing nested rules\n    // like rules inside media queries or keyframes\n\n    if (rule.options.parent instanceof StyleSheet) {\n      this.cssRules[index] = cssRule;\n    }\n  }\n  /**\n   * Delete a rule.\n   */\n  ;\n\n  _proto.deleteRule = function deleteRule(cssRule) {\n    var sheet = this.element.sheet;\n    var index = this.indexOf(cssRule);\n    if (index === -1) return false;\n    sheet.deleteRule(index);\n    this.cssRules.splice(index, 1);\n    return true;\n  }\n  /**\n   * Get index of a CSS Rule.\n   */\n  ;\n\n  _proto.indexOf = function indexOf(cssRule) {\n    return this.cssRules.indexOf(cssRule);\n  }\n  /**\n   * Generate a new CSS rule and replace the existing one.\n   *\n   * Only used for some old browsers because they can't set a selector.\n   */\n  ;\n\n  _proto.replaceRule = function replaceRule(cssRule, rule) {\n    var index = this.indexOf(cssRule);\n    if (index === -1) return false;\n    this.element.sheet.deleteRule(index);\n    this.cssRules.splice(index, 1);\n    return this.insertRule(rule, index);\n  }\n  /**\n   * Get all rules elements.\n   */\n  ;\n\n  _proto.getRules = function getRules() {\n    return this.element.sheet.cssRules;\n  };\n\n  return DomRenderer;\n}();\n\nvar instanceCounter = 0;\n\nvar Jss =\n/*#__PURE__*/\nfunction () {\n  function Jss(options) {\n    this.id = instanceCounter++;\n    this.version = \"10.5.1\";\n    this.plugins = new PluginsRegistry();\n    this.options = {\n      id: {\n        minify: false\n      },\n      createGenerateId: createGenerateId,\n      Renderer: isInBrowser ? DomRenderer : null,\n      plugins: []\n    };\n    this.generateId = createGenerateId({\n      minify: false\n    });\n\n    for (var i = 0; i < plugins.length; i++) {\n      this.plugins.use(plugins[i], {\n        queue: 'internal'\n      });\n    }\n\n    this.setup(options);\n  }\n  /**\n   * Prepares various options, applies plugins.\n   * Should not be used twice on the same instance, because there is no plugins\n   * deduplication logic.\n   */\n\n\n  var _proto = Jss.prototype;\n\n  _proto.setup = function setup(options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    if (options.createGenerateId) {\n      this.options.createGenerateId = options.createGenerateId;\n    }\n\n    if (options.id) {\n      this.options.id = _extends({}, this.options.id, options.id);\n    }\n\n    if (options.createGenerateId || options.id) {\n      this.generateId = this.options.createGenerateId(this.options.id);\n    }\n\n    if (options.insertionPoint != null) this.options.insertionPoint = options.insertionPoint;\n\n    if ('Renderer' in options) {\n      this.options.Renderer = options.Renderer;\n    } // eslint-disable-next-line prefer-spread\n\n\n    if (options.plugins) this.use.apply(this, options.plugins);\n    return this;\n  }\n  /**\n   * Create a Style Sheet.\n   */\n  ;\n\n  _proto.createStyleSheet = function createStyleSheet(styles, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    var _options = options,\n        index = _options.index;\n\n    if (typeof index !== 'number') {\n      index = registry.index === 0 ? 0 : registry.index + 1;\n    }\n\n    var sheet = new StyleSheet(styles, _extends({}, options, {\n      jss: this,\n      generateId: options.generateId || this.generateId,\n      insertionPoint: this.options.insertionPoint,\n      Renderer: this.options.Renderer,\n      index: index\n    }));\n    this.plugins.onProcessSheet(sheet);\n    return sheet;\n  }\n  /**\n   * Detach the Style Sheet and remove it from the registry.\n   */\n  ;\n\n  _proto.removeStyleSheet = function removeStyleSheet(sheet) {\n    sheet.detach();\n    registry.remove(sheet);\n    return this;\n  }\n  /**\n   * Create a rule without a Style Sheet.\n   * [Deprecated] will be removed in the next major version.\n   */\n  ;\n\n  _proto.createRule = function createRule$1(name, style, options) {\n    if (style === void 0) {\n      style = {};\n    }\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    // Enable rule without name for inline styles.\n    if (typeof name === 'object') {\n      // $FlowFixMe[incompatible-call]\n      return this.createRule(undefined, name, style);\n    } // $FlowFixMe[incompatible-type]\n\n\n    var ruleOptions = _extends({}, options, {\n      name: name,\n      jss: this,\n      Renderer: this.options.Renderer\n    });\n\n    if (!ruleOptions.generateId) ruleOptions.generateId = this.generateId;\n    if (!ruleOptions.classes) ruleOptions.classes = {};\n    if (!ruleOptions.keyframes) ruleOptions.keyframes = {};\n\n    var rule = createRule(name, style, ruleOptions);\n\n    if (rule) this.plugins.onProcessRule(rule);\n    return rule;\n  }\n  /**\n   * Register plugin. Passed function will be invoked with a rule instance.\n   */\n  ;\n\n  _proto.use = function use() {\n    var _this = this;\n\n    for (var _len = arguments.length, plugins = new Array(_len), _key = 0; _key < _len; _key++) {\n      plugins[_key] = arguments[_key];\n    }\n\n    plugins.forEach(function (plugin) {\n      _this.plugins.use(plugin);\n    });\n    return this;\n  };\n\n  return Jss;\n}();\n\n/**\n * Extracts a styles object with only props that contain function values.\n */\nfunction getDynamicStyles(styles) {\n  var to = null;\n\n  for (var key in styles) {\n    var value = styles[key];\n    var type = typeof value;\n\n    if (type === 'function') {\n      if (!to) to = {};\n      to[key] = value;\n    } else if (type === 'object' && value !== null && !Array.isArray(value)) {\n      var extracted = getDynamicStyles(value);\n\n      if (extracted) {\n        if (!to) to = {};\n        to[key] = extracted;\n      }\n    }\n  }\n\n  return to;\n}\n\n/**\n * SheetsManager is like a WeakMap which is designed to count StyleSheet\n * instances and attach/detach automatically.\n */\nvar SheetsManager =\n/*#__PURE__*/\nfunction () {\n  function SheetsManager() {\n    this.length = 0;\n    this.sheets = new WeakMap();\n  }\n\n  var _proto = SheetsManager.prototype;\n\n  _proto.get = function get(key) {\n    var entry = this.sheets.get(key);\n    return entry && entry.sheet;\n  };\n\n  _proto.add = function add(key, sheet) {\n    if (this.sheets.has(key)) return;\n    this.length++;\n    this.sheets.set(key, {\n      sheet: sheet,\n      refs: 0\n    });\n  };\n\n  _proto.manage = function manage(key) {\n    var entry = this.sheets.get(key);\n\n    if (entry) {\n      if (entry.refs === 0) {\n        entry.sheet.attach();\n      }\n\n      entry.refs++;\n      return entry.sheet;\n    }\n\n    warning(false, \"[JSS] SheetsManager: can't find sheet to manage\");\n    return undefined;\n  };\n\n  _proto.unmanage = function unmanage(key) {\n    var entry = this.sheets.get(key);\n\n    if (entry) {\n      if (entry.refs > 0) {\n        entry.refs--;\n        if (entry.refs === 0) entry.sheet.detach();\n      }\n    } else {\n      warning(false, \"SheetsManager: can't find sheet to unmanage\");\n    }\n  };\n\n  _createClass(SheetsManager, [{\n    key: \"size\",\n    get: function get() {\n      return this.length;\n    }\n  }]);\n\n  return SheetsManager;\n}();\n\n/**\n * A better abstraction over CSS.\n *\n * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present\n * @website https://github.com/cssinjs/jss\n * @license MIT\n */\n\n/**\n * Export a constant indicating if this browser has CSSTOM support.\n * https://developers.google.com/web/updates/2018/03/cssom\n */\nvar hasCSSTOMSupport = typeof CSS === 'object' && CSS != null && 'number' in CSS;\n/**\n * Creates a new instance of Jss.\n */\n\nvar create = function create(options) {\n  return new Jss(options);\n};\n/**\n * A global Jss instance.\n */\n\nvar jss = create();\n\nexport default jss;\nexport { RuleList, SheetsManager, SheetsRegistry, create, createGenerateId, createRule, getDynamicStyles, hasCSSTOMSupport, registry as sheets, toCssValue };\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { getDisplayName } from '@material-ui/utils';\nexport default function mergeClasses() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var baseClasses = options.baseClasses,\n      newClasses = options.newClasses,\n      Component = options.Component;\n\n  if (!newClasses) {\n    return baseClasses;\n  }\n\n  var nextClasses = _extends({}, baseClasses);\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (typeof newClasses === 'string') {\n      console.error([\"Material-UI: The value `\".concat(newClasses, \"` \") + \"provided to the classes prop of \".concat(getDisplayName(Component), \" is incorrect.\"), 'You might want to use the className prop instead.'].join('\\n'));\n      return baseClasses;\n    }\n  }\n\n  Object.keys(newClasses).forEach(function (key) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (!baseClasses[key] && newClasses[key]) {\n        console.error([\"Material-UI: The key `\".concat(key, \"` \") + \"provided to the classes prop is not implemented in \".concat(getDisplayName(Component), \".\"), \"You can only override one of the following: \".concat(Object.keys(baseClasses).join(','), \".\")].join('\\n'));\n      }\n\n      if (newClasses[key] && typeof newClasses[key] !== 'string') {\n        console.error([\"Material-UI: The key `\".concat(key, \"` \") + \"provided to the classes prop is not valid for \".concat(getDisplayName(Component), \".\"), \"You need to provide a non empty string instead of: \".concat(newClasses[key], \".\")].join('\\n'));\n      }\n    }\n\n    if (newClasses[key]) {\n      nextClasses[key] = \"\".concat(baseClasses[key], \" \").concat(newClasses[key]);\n    }\n  });\n  return nextClasses;\n}","// Used https://github.com/thinkloop/multi-key-cache as inspiration\nvar multiKeyStore = {\n  set: function set(cache, key1, key2, value) {\n    var subCache = cache.get(key1);\n\n    if (!subCache) {\n      subCache = new Map();\n      cache.set(key1, subCache);\n    }\n\n    subCache.set(key2, value);\n  },\n  get: function get(cache, key1, key2) {\n    var subCache = cache.get(key1);\n    return subCache ? subCache.get(key2) : undefined;\n  },\n  delete: function _delete(cache, key1, key2) {\n    var subCache = cache.get(key1);\n    subCache.delete(key2);\n  }\n};\nexport default multiKeyStore;","import React from 'react';\nvar ThemeContext = React.createContext(null);\n\nif (process.env.NODE_ENV !== 'production') {\n  ThemeContext.displayName = 'ThemeContext';\n}\n\nexport default ThemeContext;","import React from 'react';\nimport ThemeContext from './ThemeContext';\nexport default function useTheme() {\n  var theme = React.useContext(ThemeContext);\n\n  if (process.env.NODE_ENV !== 'production') {\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    React.useDebugValue(theme);\n  }\n\n  return theme;\n}","var hasSymbol = typeof Symbol === 'function' && Symbol.for;\nexport default hasSymbol ? Symbol.for('mui.nested') : '__THEME_NESTED__';","import nested from '../ThemeProvider/nested';\n/**\n * This is the list of the style rule name we use as drop in replacement for the built-in\n * pseudo classes (:checked, :disabled, :focused, etc.).\n *\n * Why do they exist in the first place?\n * These classes are used at a specificity of 2.\n * It allows them to override previously definied styles as well as\n * being untouched by simple user overrides.\n */\n\nvar pseudoClasses = ['checked', 'disabled', 'error', 'focused', 'focusVisible', 'required', 'expanded', 'selected']; // Returns a function which generates unique class names based on counters.\n// When new generator function is created, rule counter is reset.\n// We need to reset the rule counter for SSR for each request.\n//\n// It's inspired by\n// https://github.com/cssinjs/jss/blob/4e6a05dd3f7b6572fdd3ab216861d9e446c20331/src/utils/createGenerateClassName.js\n\nexport default function createGenerateClassName() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var _options$disableGloba = options.disableGlobal,\n      disableGlobal = _options$disableGloba === void 0 ? false : _options$disableGloba,\n      _options$productionPr = options.productionPrefix,\n      productionPrefix = _options$productionPr === void 0 ? 'jss' : _options$productionPr,\n      _options$seed = options.seed,\n      seed = _options$seed === void 0 ? '' : _options$seed;\n  var seedPrefix = seed === '' ? '' : \"\".concat(seed, \"-\");\n  var ruleCounter = 0;\n\n  var getNextCounterId = function getNextCounterId() {\n    ruleCounter += 1;\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (ruleCounter >= 1e10) {\n        console.warn(['Material-UI: You might have a memory leak.', 'The ruleCounter is not supposed to grow that much.'].join(''));\n      }\n    }\n\n    return ruleCounter;\n  };\n\n  return function (rule, styleSheet) {\n    var name = styleSheet.options.name; // Is a global static MUI style?\n\n    if (name && name.indexOf('Mui') === 0 && !styleSheet.options.link && !disableGlobal) {\n      // We can use a shorthand class name, we never use the keys to style the components.\n      if (pseudoClasses.indexOf(rule.key) !== -1) {\n        return \"Mui-\".concat(rule.key);\n      }\n\n      var prefix = \"\".concat(seedPrefix).concat(name, \"-\").concat(rule.key);\n\n      if (!styleSheet.options.theme[nested] || seed !== '') {\n        return prefix;\n      }\n\n      return \"\".concat(prefix, \"-\").concat(getNextCounterId());\n    }\n\n    if (process.env.NODE_ENV === 'production') {\n      return \"\".concat(seedPrefix).concat(productionPrefix).concat(getNextCounterId());\n    }\n\n    var suffix = \"\".concat(rule.key, \"-\").concat(getNextCounterId()); // Help with debuggability.\n\n    if (styleSheet.options.classNamePrefix) {\n      return \"\".concat(seedPrefix).concat(styleSheet.options.classNamePrefix, \"-\").concat(suffix);\n    }\n\n    return \"\".concat(seedPrefix).concat(suffix);\n  };\n}","import warning from 'tiny-warning';\nimport { createRule } from 'jss';\n\nvar now = Date.now();\nvar fnValuesNs = \"fnValues\" + now;\nvar fnRuleNs = \"fnStyle\" + ++now;\n\nvar functionPlugin = function functionPlugin() {\n  return {\n    onCreateRule: function onCreateRule(name, decl, options) {\n      if (typeof decl !== 'function') return null;\n      var rule = createRule(name, {}, options);\n      rule[fnRuleNs] = decl;\n      return rule;\n    },\n    onProcessStyle: function onProcessStyle(style, rule) {\n      // We need to extract function values from the declaration, so that we can keep core unaware of them.\n      // We need to do that only once.\n      // We don't need to extract functions on each style update, since this can happen only once.\n      // We don't support function values inside of function rules.\n      if (fnValuesNs in rule || fnRuleNs in rule) return style;\n      var fnValues = {};\n\n      for (var prop in style) {\n        var value = style[prop];\n        if (typeof value !== 'function') continue;\n        delete style[prop];\n        fnValues[prop] = value;\n      } // $FlowFixMe[prop-missing]\n\n\n      rule[fnValuesNs] = fnValues;\n      return style;\n    },\n    onUpdate: function onUpdate(data, rule, sheet, options) {\n      var styleRule = rule; // $FlowFixMe[prop-missing]\n\n      var fnRule = styleRule[fnRuleNs]; // If we have a style function, the entire rule is dynamic and style object\n      // will be returned from that function.\n\n      if (fnRule) {\n        // Empty object will remove all currently defined props\n        // in case function rule returns a falsy value.\n        styleRule.style = fnRule(data) || {};\n\n        if (process.env.NODE_ENV === 'development') {\n          for (var prop in styleRule.style) {\n            if (typeof styleRule.style[prop] === 'function') {\n              process.env.NODE_ENV !== \"production\" ? warning(false, '[JSS] Function values inside function rules are not supported.') : void 0;\n              break;\n            }\n          }\n        }\n      } // $FlowFixMe[prop-missing]\n\n\n      var fnValues = styleRule[fnValuesNs]; // If we have a fn values map, it is a rule with function values.\n\n      if (fnValues) {\n        for (var _prop in fnValues) {\n          styleRule.prop(_prop, fnValues[_prop](data), options);\n        }\n      }\n    }\n  };\n};\n\nexport default functionPlugin;\n","import _extends from '@babel/runtime/helpers/esm/extends';\nimport { RuleList } from 'jss';\n\nvar at = '@global';\nvar atPrefix = '@global ';\n\nvar GlobalContainerRule =\n/*#__PURE__*/\nfunction () {\n  function GlobalContainerRule(key, styles, options) {\n    this.type = 'global';\n    this.at = at;\n    this.rules = void 0;\n    this.options = void 0;\n    this.key = void 0;\n    this.isProcessed = false;\n    this.key = key;\n    this.options = options;\n    this.rules = new RuleList(_extends({}, options, {\n      parent: this\n    }));\n\n    for (var selector in styles) {\n      this.rules.add(selector, styles[selector]);\n    }\n\n    this.rules.process();\n  }\n  /**\n   * Get a rule.\n   */\n\n\n  var _proto = GlobalContainerRule.prototype;\n\n  _proto.getRule = function getRule(name) {\n    return this.rules.get(name);\n  }\n  /**\n   * Create and register rule, run plugins.\n   */\n  ;\n\n  _proto.addRule = function addRule(name, style, options) {\n    var rule = this.rules.add(name, style, options);\n    if (rule) this.options.jss.plugins.onProcessRule(rule);\n    return rule;\n  }\n  /**\n   * Get index of a rule.\n   */\n  ;\n\n  _proto.indexOf = function indexOf(rule) {\n    return this.rules.indexOf(rule);\n  }\n  /**\n   * Generates a CSS string.\n   */\n  ;\n\n  _proto.toString = function toString() {\n    return this.rules.toString();\n  };\n\n  return GlobalContainerRule;\n}();\n\nvar GlobalPrefixedRule =\n/*#__PURE__*/\nfunction () {\n  function GlobalPrefixedRule(key, style, options) {\n    this.type = 'global';\n    this.at = at;\n    this.options = void 0;\n    this.rule = void 0;\n    this.isProcessed = false;\n    this.key = void 0;\n    this.key = key;\n    this.options = options;\n    var selector = key.substr(atPrefix.length);\n    this.rule = options.jss.createRule(selector, style, _extends({}, options, {\n      parent: this\n    }));\n  }\n\n  var _proto2 = GlobalPrefixedRule.prototype;\n\n  _proto2.toString = function toString(options) {\n    return this.rule ? this.rule.toString(options) : '';\n  };\n\n  return GlobalPrefixedRule;\n}();\n\nvar separatorRegExp = /\\s*,\\s*/g;\n\nfunction addScope(selector, scope) {\n  var parts = selector.split(separatorRegExp);\n  var scoped = '';\n\n  for (var i = 0; i < parts.length; i++) {\n    scoped += scope + \" \" + parts[i].trim();\n    if (parts[i + 1]) scoped += ', ';\n  }\n\n  return scoped;\n}\n\nfunction handleNestedGlobalContainerRule(rule, sheet) {\n  var options = rule.options,\n      style = rule.style;\n  var rules = style ? style[at] : null;\n  if (!rules) return;\n\n  for (var name in rules) {\n    sheet.addRule(name, rules[name], _extends({}, options, {\n      selector: addScope(name, rule.selector)\n    }));\n  }\n\n  delete style[at];\n}\n\nfunction handlePrefixedGlobalRule(rule, sheet) {\n  var options = rule.options,\n      style = rule.style;\n\n  for (var prop in style) {\n    if (prop[0] !== '@' || prop.substr(0, at.length) !== at) continue;\n    var selector = addScope(prop.substr(at.length), rule.selector);\n    sheet.addRule(selector, style[prop], _extends({}, options, {\n      selector: selector\n    }));\n    delete style[prop];\n  }\n}\n/**\n * Convert nested rules to separate, remove them from original styles.\n *\n * @param {Rule} rule\n * @api public\n */\n\n\nfunction jssGlobal() {\n  function onCreateRule(name, styles, options) {\n    if (!name) return null;\n\n    if (name === at) {\n      return new GlobalContainerRule(name, styles, options);\n    }\n\n    if (name[0] === '@' && name.substr(0, atPrefix.length) === atPrefix) {\n      return new GlobalPrefixedRule(name, styles, options);\n    }\n\n    var parent = options.parent;\n\n    if (parent) {\n      if (parent.type === 'global' || parent.options.parent && parent.options.parent.type === 'global') {\n        options.scoped = false;\n      }\n    }\n\n    if (options.scoped === false) {\n      options.selector = name;\n    }\n\n    return null;\n  }\n\n  function onProcessRule(rule, sheet) {\n    if (rule.type !== 'style' || !sheet) return;\n    handleNestedGlobalContainerRule(rule, sheet);\n    handlePrefixedGlobalRule(rule, sheet);\n  }\n\n  return {\n    onCreateRule: onCreateRule,\n    onProcessRule: onProcessRule\n  };\n}\n\nexport default jssGlobal;\n","import _extends from '@babel/runtime/helpers/esm/extends';\nimport warning from 'tiny-warning';\n\nvar separatorRegExp = /\\s*,\\s*/g;\nvar parentRegExp = /&/g;\nvar refRegExp = /\\$([\\w-]+)/g;\n/**\n * Convert nested rules to separate, remove them from original styles.\n *\n * @param {Rule} rule\n * @api public\n */\n\nfunction jssNested() {\n  // Get a function to be used for $ref replacement.\n  function getReplaceRef(container, sheet) {\n    return function (match, key) {\n      var rule = container.getRule(key) || sheet && sheet.getRule(key);\n\n      if (rule) {\n        rule = rule;\n        return rule.selector;\n      }\n\n      process.env.NODE_ENV !== \"production\" ? warning(false, \"[JSS] Could not find the referenced rule \\\"\" + key + \"\\\" in \\\"\" + (container.options.meta || container.toString()) + \"\\\".\") : void 0;\n      return key;\n    };\n  }\n\n  function replaceParentRefs(nestedProp, parentProp) {\n    var parentSelectors = parentProp.split(separatorRegExp);\n    var nestedSelectors = nestedProp.split(separatorRegExp);\n    var result = '';\n\n    for (var i = 0; i < parentSelectors.length; i++) {\n      var parent = parentSelectors[i];\n\n      for (var j = 0; j < nestedSelectors.length; j++) {\n        var nested = nestedSelectors[j];\n        if (result) result += ', '; // Replace all & by the parent or prefix & with the parent.\n\n        result += nested.indexOf('&') !== -1 ? nested.replace(parentRegExp, parent) : parent + \" \" + nested;\n      }\n    }\n\n    return result;\n  }\n\n  function getOptions(rule, container, prevOptions) {\n    // Options has been already created, now we only increase index.\n    if (prevOptions) return _extends({}, prevOptions, {\n      index: prevOptions.index + 1 // $FlowFixMe[prop-missing]\n\n    });\n    var nestingLevel = rule.options.nestingLevel;\n    nestingLevel = nestingLevel === undefined ? 1 : nestingLevel + 1;\n\n    var options = _extends({}, rule.options, {\n      nestingLevel: nestingLevel,\n      index: container.indexOf(rule) + 1 // We don't need the parent name to be set options for chlid.\n\n    });\n\n    delete options.name;\n    return options;\n  }\n\n  function onProcessStyle(style, rule, sheet) {\n    if (rule.type !== 'style') return style;\n    var styleRule = rule;\n    var container = styleRule.options.parent;\n    var options;\n    var replaceRef;\n\n    for (var prop in style) {\n      var isNested = prop.indexOf('&') !== -1;\n      var isNestedConditional = prop[0] === '@';\n      if (!isNested && !isNestedConditional) continue;\n      options = getOptions(styleRule, container, options);\n\n      if (isNested) {\n        var selector = replaceParentRefs(prop, styleRule.selector); // Lazily create the ref replacer function just once for\n        // all nested rules within the sheet.\n\n        if (!replaceRef) replaceRef = getReplaceRef(container, sheet); // Replace all $refs.\n\n        selector = selector.replace(refRegExp, replaceRef);\n        container.addRule(selector, style[prop], _extends({}, options, {\n          selector: selector\n        }));\n      } else if (isNestedConditional) {\n        // Place conditional right after the parent rule to ensure right ordering.\n        container.addRule(prop, {}, options) // Flow expects more options but they aren't required\n        // And flow doesn't know this will always be a StyleRule which has the addRule method\n        // $FlowFixMe[incompatible-use]\n        // $FlowFixMe[prop-missing]\n        .addRule(styleRule.key, style[prop], {\n          selector: styleRule.selector\n        });\n      }\n\n      delete style[prop];\n    }\n\n    return style;\n  }\n\n  return {\n    onProcessStyle: onProcessStyle\n  };\n}\n\nexport default jssNested;\n","/* eslint-disable no-var, prefer-template */\nvar uppercasePattern = /[A-Z]/g\nvar msPattern = /^ms-/\nvar cache = {}\n\nfunction toHyphenLower(match) {\n  return '-' + match.toLowerCase()\n}\n\nfunction hyphenateStyleName(name) {\n  if (cache.hasOwnProperty(name)) {\n    return cache[name]\n  }\n\n  var hName = name.replace(uppercasePattern, toHyphenLower)\n  return (cache[name] = msPattern.test(hName) ? '-' + hName : hName)\n}\n\nexport default hyphenateStyleName\n","import hyphenate from 'hyphenate-style-name';\n\n/**\n * Convert camel cased property names to dash separated.\n *\n * @param {Object} style\n * @return {Object}\n */\n\nfunction convertCase(style) {\n  var converted = {};\n\n  for (var prop in style) {\n    var key = prop.indexOf('--') === 0 ? prop : hyphenate(prop);\n    converted[key] = style[prop];\n  }\n\n  if (style.fallbacks) {\n    if (Array.isArray(style.fallbacks)) converted.fallbacks = style.fallbacks.map(convertCase);else converted.fallbacks = convertCase(style.fallbacks);\n  }\n\n  return converted;\n}\n/**\n * Allow camel cased property names by converting them back to dasherized.\n *\n * @param {Rule} rule\n */\n\n\nfunction camelCase() {\n  function onProcessStyle(style) {\n    if (Array.isArray(style)) {\n      // Handle rules like @font-face, which can have multiple styles in an array\n      for (var index = 0; index < style.length; index++) {\n        style[index] = convertCase(style[index]);\n      }\n\n      return style;\n    }\n\n    return convertCase(style);\n  }\n\n  function onChangeValue(value, prop, rule) {\n    if (prop.indexOf('--') === 0) {\n      return value;\n    }\n\n    var hyphenatedProp = hyphenate(prop); // There was no camel case in place\n\n    if (prop === hyphenatedProp) return value;\n    rule.prop(hyphenatedProp, value); // Core will ignore that property value we set the proper one above.\n\n    return null;\n  }\n\n  return {\n    onProcessStyle: onProcessStyle,\n    onChangeValue: onChangeValue\n  };\n}\n\nexport default camelCase;\n","import { hasCSSTOMSupport } from 'jss';\n\nvar px = hasCSSTOMSupport && CSS ? CSS.px : 'px';\nvar ms = hasCSSTOMSupport && CSS ? CSS.ms : 'ms';\nvar percent = hasCSSTOMSupport && CSS ? CSS.percent : '%';\n/**\n * Generated jss-plugin-default-unit CSS property units\n *\n * @type object\n */\n\nvar defaultUnits = {\n  // Animation properties\n  'animation-delay': ms,\n  'animation-duration': ms,\n  // Background properties\n  'background-position': px,\n  'background-position-x': px,\n  'background-position-y': px,\n  'background-size': px,\n  // Border Properties\n  border: px,\n  'border-bottom': px,\n  'border-bottom-left-radius': px,\n  'border-bottom-right-radius': px,\n  'border-bottom-width': px,\n  'border-left': px,\n  'border-left-width': px,\n  'border-radius': px,\n  'border-right': px,\n  'border-right-width': px,\n  'border-top': px,\n  'border-top-left-radius': px,\n  'border-top-right-radius': px,\n  'border-top-width': px,\n  'border-width': px,\n  'border-block': px,\n  'border-block-end': px,\n  'border-block-end-width': px,\n  'border-block-start': px,\n  'border-block-start-width': px,\n  'border-block-width': px,\n  'border-inline': px,\n  'border-inline-end': px,\n  'border-inline-end-width': px,\n  'border-inline-start': px,\n  'border-inline-start-width': px,\n  'border-inline-width': px,\n  'border-start-start-radius': px,\n  'border-start-end-radius': px,\n  'border-end-start-radius': px,\n  'border-end-end-radius': px,\n  // Margin properties\n  margin: px,\n  'margin-bottom': px,\n  'margin-left': px,\n  'margin-right': px,\n  'margin-top': px,\n  'margin-block': px,\n  'margin-block-end': px,\n  'margin-block-start': px,\n  'margin-inline': px,\n  'margin-inline-end': px,\n  'margin-inline-start': px,\n  // Padding properties\n  padding: px,\n  'padding-bottom': px,\n  'padding-left': px,\n  'padding-right': px,\n  'padding-top': px,\n  'padding-block': px,\n  'padding-block-end': px,\n  'padding-block-start': px,\n  'padding-inline': px,\n  'padding-inline-end': px,\n  'padding-inline-start': px,\n  // Mask properties\n  'mask-position-x': px,\n  'mask-position-y': px,\n  'mask-size': px,\n  // Width and height properties\n  height: px,\n  width: px,\n  'min-height': px,\n  'max-height': px,\n  'min-width': px,\n  'max-width': px,\n  // Position properties\n  bottom: px,\n  left: px,\n  top: px,\n  right: px,\n  inset: px,\n  'inset-block': px,\n  'inset-block-end': px,\n  'inset-block-start': px,\n  'inset-inline': px,\n  'inset-inline-end': px,\n  'inset-inline-start': px,\n  // Shadow properties\n  'box-shadow': px,\n  'text-shadow': px,\n  // Column properties\n  'column-gap': px,\n  'column-rule': px,\n  'column-rule-width': px,\n  'column-width': px,\n  // Font and text properties\n  'font-size': px,\n  'font-size-delta': px,\n  'letter-spacing': px,\n  'text-decoration-thickness': px,\n  'text-indent': px,\n  'text-stroke': px,\n  'text-stroke-width': px,\n  'word-spacing': px,\n  // Motion properties\n  motion: px,\n  'motion-offset': px,\n  // Outline properties\n  outline: px,\n  'outline-offset': px,\n  'outline-width': px,\n  // Perspective properties\n  perspective: px,\n  'perspective-origin-x': percent,\n  'perspective-origin-y': percent,\n  // Transform properties\n  'transform-origin': percent,\n  'transform-origin-x': percent,\n  'transform-origin-y': percent,\n  'transform-origin-z': percent,\n  // Transition properties\n  'transition-delay': ms,\n  'transition-duration': ms,\n  // Alignment properties\n  'vertical-align': px,\n  'flex-basis': px,\n  // Some random properties\n  'shape-margin': px,\n  size: px,\n  gap: px,\n  // Grid properties\n  grid: px,\n  'grid-gap': px,\n  'row-gap': px,\n  'grid-row-gap': px,\n  'grid-column-gap': px,\n  'grid-template-rows': px,\n  'grid-template-columns': px,\n  'grid-auto-rows': px,\n  'grid-auto-columns': px,\n  // Not existing properties.\n  // Used to avoid issues with jss-plugin-expand integration.\n  'box-shadow-x': px,\n  'box-shadow-y': px,\n  'box-shadow-blur': px,\n  'box-shadow-spread': px,\n  'font-line-height': px,\n  'text-shadow-x': px,\n  'text-shadow-y': px,\n  'text-shadow-blur': px\n};\n\n/**\n * Clones the object and adds a camel cased property version.\n */\nfunction addCamelCasedVersion(obj) {\n  var regExp = /(-[a-z])/g;\n\n  var replace = function replace(str) {\n    return str[1].toUpperCase();\n  };\n\n  var newObj = {};\n\n  for (var _key in obj) {\n    newObj[_key] = obj[_key];\n    newObj[_key.replace(regExp, replace)] = obj[_key];\n  }\n\n  return newObj;\n}\n\nvar units = addCamelCasedVersion(defaultUnits);\n/**\n * Recursive deep style passing function\n */\n\nfunction iterate(prop, value, options) {\n  if (value == null) return value;\n\n  if (Array.isArray(value)) {\n    for (var i = 0; i < value.length; i++) {\n      value[i] = iterate(prop, value[i], options);\n    }\n  } else if (typeof value === 'object') {\n    if (prop === 'fallbacks') {\n      for (var innerProp in value) {\n        value[innerProp] = iterate(innerProp, value[innerProp], options);\n      }\n    } else {\n      for (var _innerProp in value) {\n        value[_innerProp] = iterate(prop + \"-\" + _innerProp, value[_innerProp], options);\n      }\n    }\n  } else if (typeof value === 'number' && !Number.isNaN(value)) {\n    var unit = options[prop] || units[prop]; // Add the unit if available, except for the special case of 0px.\n\n    if (unit && !(value === 0 && unit === px)) {\n      return typeof unit === 'function' ? unit(value).toString() : \"\" + value + unit;\n    }\n\n    return value.toString();\n  }\n\n  return value;\n}\n/**\n * Add unit to numeric values.\n */\n\n\nfunction defaultUnit(options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var camelCasedOptions = addCamelCasedVersion(options);\n\n  function onProcessStyle(style, rule) {\n    if (rule.type !== 'style') return style;\n\n    for (var prop in style) {\n      style[prop] = iterate(prop, style[prop], camelCasedOptions);\n    }\n\n    return style;\n  }\n\n  function onChangeValue(value, prop) {\n    return iterate(prop, value, camelCasedOptions);\n  }\n\n  return {\n    onProcessStyle: onProcessStyle,\n    onChangeValue: onChangeValue\n  };\n}\n\nexport default defaultUnit;\n","import isInBrowser from 'is-in-browser';\nimport _toConsumableArray from '@babel/runtime/helpers/esm/toConsumableArray';\n\n// Export javascript style and css style vendor prefixes.\nvar js = '';\nvar css = '';\nvar vendor = '';\nvar browser = '';\nvar isTouch = isInBrowser && 'ontouchstart' in document.documentElement; // We should not do anything if required serverside.\n\nif (isInBrowser) {\n  // Order matters. We need to check Webkit the last one because\n  // other vendors use to add Webkit prefixes to some properties\n  var jsCssMap = {\n    Moz: '-moz-',\n    ms: '-ms-',\n    O: '-o-',\n    Webkit: '-webkit-'\n  };\n\n  var _document$createEleme = document.createElement('p'),\n      style = _document$createEleme.style;\n\n  var testProp = 'Transform';\n\n  for (var key in jsCssMap) {\n    if (key + testProp in style) {\n      js = key;\n      css = jsCssMap[key];\n      break;\n    }\n  } // Correctly detect the Edge browser.\n\n\n  if (js === 'Webkit' && 'msHyphens' in style) {\n    js = 'ms';\n    css = jsCssMap.ms;\n    browser = 'edge';\n  } // Correctly detect the Safari browser.\n\n\n  if (js === 'Webkit' && '-apple-trailing-word' in style) {\n    vendor = 'apple';\n  }\n}\n/**\n * Vendor prefix string for the current browser.\n *\n * @type {{js: String, css: String, vendor: String, browser: String}}\n * @api public\n */\n\n\nvar prefix = {\n  js: js,\n  css: css,\n  vendor: vendor,\n  browser: browser,\n  isTouch: isTouch\n};\n\n/**\n * Test if a keyframe at-rule should be prefixed or not\n *\n * @param {String} vendor prefix string for the current browser.\n * @return {String}\n * @api public\n */\n\nfunction supportedKeyframes(key) {\n  // Keyframes is already prefixed. e.g. key = '@-webkit-keyframes a'\n  if (key[1] === '-') return key; // No need to prefix IE/Edge. Older browsers will ignore unsupported rules.\n  // https://caniuse.com/#search=keyframes\n\n  if (prefix.js === 'ms') return key;\n  return \"@\" + prefix.css + \"keyframes\" + key.substr(10);\n}\n\n// https://caniuse.com/#search=appearance\n\nvar appearence = {\n  noPrefill: ['appearance'],\n  supportedProperty: function supportedProperty(prop) {\n    if (prop !== 'appearance') return false;\n    if (prefix.js === 'ms') return \"-webkit-\" + prop;\n    return prefix.css + prop;\n  }\n};\n\n// https://caniuse.com/#search=color-adjust\n\nvar colorAdjust = {\n  noPrefill: ['color-adjust'],\n  supportedProperty: function supportedProperty(prop) {\n    if (prop !== 'color-adjust') return false;\n    if (prefix.js === 'Webkit') return prefix.css + \"print-\" + prop;\n    return prop;\n  }\n};\n\nvar regExp = /[-\\s]+(.)?/g;\n/**\n * Replaces the letter with the capital letter\n *\n * @param {String} match\n * @param {String} c\n * @return {String}\n * @api private\n */\n\nfunction toUpper(match, c) {\n  return c ? c.toUpperCase() : '';\n}\n/**\n * Convert dash separated strings to camel-cased.\n *\n * @param {String} str\n * @return {String}\n * @api private\n */\n\n\nfunction camelize(str) {\n  return str.replace(regExp, toUpper);\n}\n\n/**\n * Convert dash separated strings to pascal cased.\n *\n * @param {String} str\n * @return {String}\n * @api private\n */\n\nfunction pascalize(str) {\n  return camelize(\"-\" + str);\n}\n\n// but we can use a longhand property instead.\n// https://caniuse.com/#search=mask\n\nvar mask = {\n  noPrefill: ['mask'],\n  supportedProperty: function supportedProperty(prop, style) {\n    if (!/^mask/.test(prop)) return false;\n\n    if (prefix.js === 'Webkit') {\n      var longhand = 'mask-image';\n\n      if (camelize(longhand) in style) {\n        return prop;\n      }\n\n      if (prefix.js + pascalize(longhand) in style) {\n        return prefix.css + prop;\n      }\n    }\n\n    return prop;\n  }\n};\n\n// https://caniuse.com/#search=text-orientation\n\nvar textOrientation = {\n  noPrefill: ['text-orientation'],\n  supportedProperty: function supportedProperty(prop) {\n    if (prop !== 'text-orientation') return false;\n\n    if (prefix.vendor === 'apple' && !prefix.isTouch) {\n      return prefix.css + prop;\n    }\n\n    return prop;\n  }\n};\n\n// https://caniuse.com/#search=transform\n\nvar transform = {\n  noPrefill: ['transform'],\n  supportedProperty: function supportedProperty(prop, style, options) {\n    if (prop !== 'transform') return false;\n\n    if (options.transform) {\n      return prop;\n    }\n\n    return prefix.css + prop;\n  }\n};\n\n// https://caniuse.com/#search=transition\n\nvar transition = {\n  noPrefill: ['transition'],\n  supportedProperty: function supportedProperty(prop, style, options) {\n    if (prop !== 'transition') return false;\n\n    if (options.transition) {\n      return prop;\n    }\n\n    return prefix.css + prop;\n  }\n};\n\n// https://caniuse.com/#search=writing-mode\n\nvar writingMode = {\n  noPrefill: ['writing-mode'],\n  supportedProperty: function supportedProperty(prop) {\n    if (prop !== 'writing-mode') return false;\n\n    if (prefix.js === 'Webkit' || prefix.js === 'ms' && prefix.browser !== 'edge') {\n      return prefix.css + prop;\n    }\n\n    return prop;\n  }\n};\n\n// https://caniuse.com/#search=user-select\n\nvar userSelect = {\n  noPrefill: ['user-select'],\n  supportedProperty: function supportedProperty(prop) {\n    if (prop !== 'user-select') return false;\n\n    if (prefix.js === 'Moz' || prefix.js === 'ms' || prefix.vendor === 'apple') {\n      return prefix.css + prop;\n    }\n\n    return prop;\n  }\n};\n\n// https://caniuse.com/#search=multicolumn\n// https://github.com/postcss/autoprefixer/issues/491\n// https://github.com/postcss/autoprefixer/issues/177\n\nvar breakPropsOld = {\n  supportedProperty: function supportedProperty(prop, style) {\n    if (!/^break-/.test(prop)) return false;\n\n    if (prefix.js === 'Webkit') {\n      var jsProp = \"WebkitColumn\" + pascalize(prop);\n      return jsProp in style ? prefix.css + \"column-\" + prop : false;\n    }\n\n    if (prefix.js === 'Moz') {\n      var _jsProp = \"page\" + pascalize(prop);\n\n      return _jsProp in style ? \"page-\" + prop : false;\n    }\n\n    return false;\n  }\n};\n\n// See https://github.com/postcss/autoprefixer/issues/324.\n\nvar inlineLogicalOld = {\n  supportedProperty: function supportedProperty(prop, style) {\n    if (!/^(border|margin|padding)-inline/.test(prop)) return false;\n    if (prefix.js === 'Moz') return prop;\n    var newProp = prop.replace('-inline', '');\n    return prefix.js + pascalize(newProp) in style ? prefix.css + newProp : false;\n  }\n};\n\n// Camelization is required because we can't test using.\n// CSS syntax for e.g. in FF.\n\nvar unprefixed = {\n  supportedProperty: function supportedProperty(prop, style) {\n    return camelize(prop) in style ? prop : false;\n  }\n};\n\nvar prefixed = {\n  supportedProperty: function supportedProperty(prop, style) {\n    var pascalized = pascalize(prop); // Return custom CSS variable without prefixing.\n\n    if (prop[0] === '-') return prop; // Return already prefixed value without prefixing.\n\n    if (prop[0] === '-' && prop[1] === '-') return prop;\n    if (prefix.js + pascalized in style) return prefix.css + prop; // Try webkit fallback.\n\n    if (prefix.js !== 'Webkit' && \"Webkit\" + pascalized in style) return \"-webkit-\" + prop;\n    return false;\n  }\n};\n\n// https://caniuse.com/#search=scroll-snap\n\nvar scrollSnap = {\n  supportedProperty: function supportedProperty(prop) {\n    if (prop.substring(0, 11) !== 'scroll-snap') return false;\n\n    if (prefix.js === 'ms') {\n      return \"\" + prefix.css + prop;\n    }\n\n    return prop;\n  }\n};\n\n// https://caniuse.com/#search=overscroll-behavior\n\nvar overscrollBehavior = {\n  supportedProperty: function supportedProperty(prop) {\n    if (prop !== 'overscroll-behavior') return false;\n\n    if (prefix.js === 'ms') {\n      return prefix.css + \"scroll-chaining\";\n    }\n\n    return prop;\n  }\n};\n\nvar propMap = {\n  'flex-grow': 'flex-positive',\n  'flex-shrink': 'flex-negative',\n  'flex-basis': 'flex-preferred-size',\n  'justify-content': 'flex-pack',\n  order: 'flex-order',\n  'align-items': 'flex-align',\n  'align-content': 'flex-line-pack' // 'align-self' is handled by 'align-self' plugin.\n\n}; // Support old flex spec from 2012.\n\nvar flex2012 = {\n  supportedProperty: function supportedProperty(prop, style) {\n    var newProp = propMap[prop];\n    if (!newProp) return false;\n    return prefix.js + pascalize(newProp) in style ? prefix.css + newProp : false;\n  }\n};\n\nvar propMap$1 = {\n  flex: 'box-flex',\n  'flex-grow': 'box-flex',\n  'flex-direction': ['box-orient', 'box-direction'],\n  order: 'box-ordinal-group',\n  'align-items': 'box-align',\n  'flex-flow': ['box-orient', 'box-direction'],\n  'justify-content': 'box-pack'\n};\nvar propKeys = Object.keys(propMap$1);\n\nvar prefixCss = function prefixCss(p) {\n  return prefix.css + p;\n}; // Support old flex spec from 2009.\n\n\nvar flex2009 = {\n  supportedProperty: function supportedProperty(prop, style, _ref) {\n    var multiple = _ref.multiple;\n\n    if (propKeys.indexOf(prop) > -1) {\n      var newProp = propMap$1[prop];\n\n      if (!Array.isArray(newProp)) {\n        return prefix.js + pascalize(newProp) in style ? prefix.css + newProp : false;\n      }\n\n      if (!multiple) return false;\n\n      for (var i = 0; i < newProp.length; i++) {\n        if (!(prefix.js + pascalize(newProp[0]) in style)) {\n          return false;\n        }\n      }\n\n      return newProp.map(prefixCss);\n    }\n\n    return false;\n  }\n};\n\n// plugins = [\n//   ...plugins,\n//    breakPropsOld,\n//    inlineLogicalOld,\n//    unprefixed,\n//    prefixed,\n//    scrollSnap,\n//    flex2012,\n//    flex2009\n// ]\n// Plugins without 'noPrefill' value, going last.\n// 'flex-*' plugins should be at the bottom.\n// 'flex2009' going after 'flex2012'.\n// 'prefixed' going after 'unprefixed'\n\nvar plugins = [appearence, colorAdjust, mask, textOrientation, transform, transition, writingMode, userSelect, breakPropsOld, inlineLogicalOld, unprefixed, prefixed, scrollSnap, overscrollBehavior, flex2012, flex2009];\nvar propertyDetectors = plugins.filter(function (p) {\n  return p.supportedProperty;\n}).map(function (p) {\n  return p.supportedProperty;\n});\nvar noPrefill = plugins.filter(function (p) {\n  return p.noPrefill;\n}).reduce(function (a, p) {\n  a.push.apply(a, _toConsumableArray(p.noPrefill));\n  return a;\n}, []);\n\nvar el;\nvar cache = {};\n\nif (isInBrowser) {\n  el = document.createElement('p'); // We test every property on vendor prefix requirement.\n  // Once tested, result is cached. It gives us up to 70% perf boost.\n  // http://jsperf.com/element-style-object-access-vs-plain-object\n  //\n  // Prefill cache with known css properties to reduce amount of\n  // properties we need to feature test at runtime.\n  // http://davidwalsh.name/vendor-prefix\n\n  var computed = window.getComputedStyle(document.documentElement, '');\n\n  for (var key$1 in computed) {\n    // eslint-disable-next-line no-restricted-globals\n    if (!isNaN(key$1)) cache[computed[key$1]] = computed[key$1];\n  } // Properties that cannot be correctly detected using the\n  // cache prefill method.\n\n\n  noPrefill.forEach(function (x) {\n    return delete cache[x];\n  });\n}\n/**\n * Test if a property is supported, returns supported property with vendor\n * prefix if required. Returns `false` if not supported.\n *\n * @param {String} prop dash separated\n * @param {Object} [options]\n * @return {String|Boolean}\n * @api public\n */\n\n\nfunction supportedProperty(prop, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  // For server-side rendering.\n  if (!el) return prop; // Remove cache for benchmark tests or return property from the cache.\n\n  if (process.env.NODE_ENV !== 'benchmark' && cache[prop] != null) {\n    return cache[prop];\n  } // Check if 'transition' or 'transform' natively supported in browser.\n\n\n  if (prop === 'transition' || prop === 'transform') {\n    options[prop] = prop in el.style;\n  } // Find a plugin for current prefix property.\n\n\n  for (var i = 0; i < propertyDetectors.length; i++) {\n    cache[prop] = propertyDetectors[i](prop, el.style, options); // Break loop, if value found.\n\n    if (cache[prop]) break;\n  } // Reset styles for current property.\n  // Firefox can even throw an error for invalid properties, e.g., \"0\".\n\n\n  try {\n    el.style[prop] = '';\n  } catch (err) {\n    return false;\n  }\n\n  return cache[prop];\n}\n\nvar cache$1 = {};\nvar transitionProperties = {\n  transition: 1,\n  'transition-property': 1,\n  '-webkit-transition': 1,\n  '-webkit-transition-property': 1\n};\nvar transPropsRegExp = /(^\\s*[\\w-]+)|, (\\s*[\\w-]+)(?![^()]*\\))/g;\nvar el$1;\n/**\n * Returns prefixed value transition/transform if needed.\n *\n * @param {String} match\n * @param {String} p1\n * @param {String} p2\n * @return {String}\n * @api private\n */\n\nfunction prefixTransitionCallback(match, p1, p2) {\n  if (p1 === 'var') return 'var';\n  if (p1 === 'all') return 'all';\n  if (p2 === 'all') return ', all';\n  var prefixedValue = p1 ? supportedProperty(p1) : \", \" + supportedProperty(p2);\n  if (!prefixedValue) return p1 || p2;\n  return prefixedValue;\n}\n\nif (isInBrowser) el$1 = document.createElement('p');\n/**\n * Returns prefixed value if needed. Returns `false` if value is not supported.\n *\n * @param {String} property\n * @param {String} value\n * @return {String|Boolean}\n * @api public\n */\n\nfunction supportedValue(property, value) {\n  // For server-side rendering.\n  var prefixedValue = value;\n  if (!el$1 || property === 'content') return value; // It is a string or a number as a string like '1'.\n  // We want only prefixable values here.\n  // eslint-disable-next-line no-restricted-globals\n\n  if (typeof prefixedValue !== 'string' || !isNaN(parseInt(prefixedValue, 10))) {\n    return prefixedValue;\n  } // Create cache key for current value.\n\n\n  var cacheKey = property + prefixedValue; // Remove cache for benchmark tests or return value from cache.\n\n  if (process.env.NODE_ENV !== 'benchmark' && cache$1[cacheKey] != null) {\n    return cache$1[cacheKey];\n  } // IE can even throw an error in some cases, for e.g. style.content = 'bar'.\n\n\n  try {\n    // Test value as it is.\n    el$1.style[property] = prefixedValue;\n  } catch (err) {\n    // Return false if value not supported.\n    cache$1[cacheKey] = false;\n    return false;\n  } // If 'transition' or 'transition-property' property.\n\n\n  if (transitionProperties[property]) {\n    prefixedValue = prefixedValue.replace(transPropsRegExp, prefixTransitionCallback);\n  } else if (el$1.style[property] === '') {\n    // Value with a vendor prefix.\n    prefixedValue = prefix.css + prefixedValue; // Hardcode test to convert \"flex\" to \"-ms-flexbox\" for IE10.\n\n    if (prefixedValue === '-ms-flex') el$1.style[property] = '-ms-flexbox'; // Test prefixed value.\n\n    el$1.style[property] = prefixedValue; // Return false if value not supported.\n\n    if (el$1.style[property] === '') {\n      cache$1[cacheKey] = false;\n      return false;\n    }\n  } // Reset styles for current property.\n\n\n  el$1.style[property] = ''; // Write current value to cache.\n\n  cache$1[cacheKey] = prefixedValue;\n  return cache$1[cacheKey];\n}\n\nexport { prefix, supportedKeyframes, supportedProperty, supportedValue };\n","import { supportedKeyframes, supportedValue, supportedProperty } from 'css-vendor';\nimport { toCssValue } from 'jss';\n\n/**\n * Add vendor prefix to a property name when needed.\n *\n * @api public\n */\n\nfunction jssVendorPrefixer() {\n  function onProcessRule(rule) {\n    if (rule.type === 'keyframes') {\n      var atRule = rule;\n      atRule.at = supportedKeyframes(atRule.at);\n    }\n  }\n\n  function prefixStyle(style) {\n    for (var prop in style) {\n      var value = style[prop];\n\n      if (prop === 'fallbacks' && Array.isArray(value)) {\n        style[prop] = value.map(prefixStyle);\n        continue;\n      }\n\n      var changeProp = false;\n      var supportedProp = supportedProperty(prop);\n      if (supportedProp && supportedProp !== prop) changeProp = true;\n      var changeValue = false;\n      var supportedValue$1 = supportedValue(supportedProp, toCssValue(value));\n      if (supportedValue$1 && supportedValue$1 !== value) changeValue = true;\n\n      if (changeProp || changeValue) {\n        if (changeProp) delete style[prop];\n        style[supportedProp || prop] = supportedValue$1 || value;\n      }\n    }\n\n    return style;\n  }\n\n  function onProcessStyle(style, rule) {\n    if (rule.type !== 'style') return style;\n    return prefixStyle(style);\n  }\n\n  function onChangeValue(value, prop) {\n    return supportedValue(prop, toCssValue(value)) || value;\n  }\n\n  return {\n    onProcessRule: onProcessRule,\n    onProcessStyle: onProcessStyle,\n    onChangeValue: onChangeValue\n  };\n}\n\nexport default jssVendorPrefixer;\n","/**\n * Sort props by length.\n */\nfunction jssPropsSort() {\n  var sort = function sort(prop0, prop1) {\n    if (prop0.length === prop1.length) {\n      return prop0 > prop1 ? 1 : -1;\n    }\n\n    return prop0.length - prop1.length;\n  };\n\n  return {\n    onProcessStyle: function onProcessStyle(style, rule) {\n      if (rule.type !== 'style') return style;\n      var newStyle = {};\n      var props = Object.keys(style).sort(sort);\n\n      for (var i = 0; i < props.length; i++) {\n        newStyle[props[i]] = style[props[i]];\n      }\n\n      return newStyle;\n    }\n  };\n}\n\nexport default jssPropsSort;\n","import functions from 'jss-plugin-rule-value-function';\nimport global from 'jss-plugin-global';\nimport nested from 'jss-plugin-nested';\nimport camelCase from 'jss-plugin-camel-case';\nimport defaultUnit from 'jss-plugin-default-unit';\nimport vendorPrefixer from 'jss-plugin-vendor-prefixer';\nimport propsSort from 'jss-plugin-props-sort'; // Subset of jss-preset-default with only the plugins the Material-UI components are using.\n\nexport default function jssPreset() {\n  return {\n    plugins: [functions(), global(), nested(), camelCase(), defaultUnit(), // Disable the vendor prefixer server-side, it does nothing.\n    // This way, we can get a performance boost.\n    // In the documentation, we are using `autoprefixer` to solve this problem.\n    typeof window === 'undefined' ? null : vendorPrefixer(), propsSort()]\n  };\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { exactProp } from '@material-ui/utils';\nimport createGenerateClassName from '../createGenerateClassName';\nimport { create } from 'jss';\nimport jssPreset from '../jssPreset'; // Default JSS instance.\n\nvar jss = create(jssPreset()); // Use a singleton or the provided one by the context.\n//\n// The counter-based approach doesn't tolerate any mistake.\n// It's much safer to use the same counter everywhere.\n\nvar generateClassName = createGenerateClassName(); // Exported for test purposes\n\nexport var sheetsManager = new Map();\nvar defaultOptions = {\n  disableGeneration: false,\n  generateClassName: generateClassName,\n  jss: jss,\n  sheetsCache: null,\n  sheetsManager: sheetsManager,\n  sheetsRegistry: null\n};\nexport var StylesContext = React.createContext(defaultOptions);\n\nif (process.env.NODE_ENV !== 'production') {\n  StylesContext.displayName = 'StylesContext';\n}\n\nvar injectFirstNode;\nexport default function StylesProvider(props) {\n  var children = props.children,\n      _props$injectFirst = props.injectFirst,\n      injectFirst = _props$injectFirst === void 0 ? false : _props$injectFirst,\n      _props$disableGenerat = props.disableGeneration,\n      disableGeneration = _props$disableGenerat === void 0 ? false : _props$disableGenerat,\n      localOptions = _objectWithoutProperties(props, [\"children\", \"injectFirst\", \"disableGeneration\"]);\n\n  var outerOptions = React.useContext(StylesContext);\n\n  var context = _extends({}, outerOptions, {\n    disableGeneration: disableGeneration\n  }, localOptions);\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (typeof window === 'undefined' && !context.sheetsManager) {\n      console.error('Material-UI: You need to use the ServerStyleSheets API when rendering on the server.');\n    }\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (context.jss.options.insertionPoint && injectFirst) {\n      console.error('Material-UI: You cannot use a custom insertionPoint and <StylesContext injectFirst> at the same time.');\n    }\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (injectFirst && localOptions.jss) {\n      console.error('Material-UI: You cannot use the jss and injectFirst props at the same time.');\n    }\n  }\n\n  if (!context.jss.options.insertionPoint && injectFirst && typeof window !== 'undefined') {\n    if (!injectFirstNode) {\n      var head = document.head;\n      injectFirstNode = document.createComment('mui-inject-first');\n      head.insertBefore(injectFirstNode, head.firstChild);\n    }\n\n    context.jss = create({\n      plugins: jssPreset().plugins,\n      insertionPoint: injectFirstNode\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(StylesContext.Provider, {\n    value: context\n  }, children);\n}\nprocess.env.NODE_ENV !== \"production\" ? StylesProvider.propTypes = {\n  /**\n   * Your component tree.\n   */\n  children: PropTypes.node.isRequired,\n\n  /**\n   * You can disable the generation of the styles with this option.\n   * It can be useful when traversing the React tree outside of the HTML\n   * rendering step on the server.\n   * Let's say you are using react-apollo to extract all\n   * the queries made by the interface server-side - you can significantly speed up the traversal with this prop.\n   */\n  disableGeneration: PropTypes.bool,\n\n  /**\n   * JSS's class name generator.\n   */\n  generateClassName: PropTypes.func,\n\n  /**\n   * By default, the styles are injected last in the <head> element of the page.\n   * As a result, they gain more specificity than any other style sheet.\n   * If you want to override Material-UI's styles, set this prop.\n   */\n  injectFirst: PropTypes.bool,\n\n  /**\n   * JSS's instance.\n   */\n  jss: PropTypes.object,\n\n  /**\n   * @ignore\n   */\n  serverGenerateClassName: PropTypes.func,\n\n  /**\n   * @ignore\n   *\n   * Beta feature.\n   *\n   * Cache for the sheets.\n   */\n  sheetsCache: PropTypes.object,\n\n  /**\n   * @ignore\n   *\n   * The sheetsManager is used to deduplicate style sheet injection in the page.\n   * It's deduplicating using the (theme, styles) couple.\n   * On the server, you should provide a new instance for each request.\n   */\n  sheetsManager: PropTypes.object,\n\n  /**\n   * @ignore\n   *\n   * Collect the sheets.\n   */\n  sheetsRegistry: PropTypes.object\n} : void 0;\n\nif (process.env.NODE_ENV !== 'production') {\n  process.env.NODE_ENV !== \"production\" ? StylesProvider.propTypes = exactProp(StylesProvider.propTypes) : void 0;\n}","/* eslint-disable import/prefer-default-export */\n// Global index counter to preserve source order.\n// We create the style sheet during the creation of the component,\n// children are handled after the parents, so the order of style elements would be parent->child.\n// It is a problem though when a parent passes a className\n// which needs to override any child's styles.\n// StyleSheet of the child has a higher specificity, because of the source order.\n// So our solution is to render sheets them in the reverse order child->sheet, so\n// that parent has a higher specificity.\nvar indexCounter = -1e9;\nexport function increment() {\n  indexCounter += 1;\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (indexCounter >= 0) {\n      console.warn(['Material-UI: You might have a memory leak.', 'The indexCounter is not supposed to grow that much.'].join('\\n'));\n    }\n  }\n\n  return indexCounter;\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nexport function isPlainObject(item) {\n  return item && _typeof(item) === 'object' && item.constructor === Object;\n}\nexport default function deepmerge(target, source) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {\n    clone: true\n  };\n  var output = options.clone ? _extends({}, target) : target;\n\n  if (isPlainObject(target) && isPlainObject(source)) {\n    Object.keys(source).forEach(function (key) {\n      // Avoid prototype pollution\n      if (key === '__proto__') {\n        return;\n      }\n\n      if (isPlainObject(source[key]) && key in target) {\n        output[key] = deepmerge(target[key], source[key], options);\n      } else {\n        output[key] = source[key];\n      }\n    });\n  }\n\n  return output;\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport { deepmerge } from '@material-ui/utils';\nimport noopTheme from './noopTheme';\nexport default function getStylesCreator(stylesOrCreator) {\n  var themingEnabled = typeof stylesOrCreator === 'function';\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (_typeof(stylesOrCreator) !== 'object' && !themingEnabled) {\n      console.error(['Material-UI: The `styles` argument provided is invalid.', 'You need to provide a function generating the styles or a styles object.'].join('\\n'));\n    }\n  }\n\n  return {\n    create: function create(theme, name) {\n      var styles;\n\n      try {\n        styles = themingEnabled ? stylesOrCreator(theme) : stylesOrCreator;\n      } catch (err) {\n        if (process.env.NODE_ENV !== 'production') {\n          if (themingEnabled === true && theme === noopTheme) {\n            // TODO: prepend error message/name instead\n            console.error(['Material-UI: The `styles` argument provided is invalid.', 'You are providing a function without a theme in the context.', 'One of the parent elements needs to use a ThemeProvider.'].join('\\n'));\n          }\n        }\n\n        throw err;\n      }\n\n      if (!name || !theme.overrides || !theme.overrides[name]) {\n        return styles;\n      }\n\n      var overrides = theme.overrides[name];\n\n      var stylesWithOverrides = _extends({}, styles);\n\n      Object.keys(overrides).forEach(function (key) {\n        if (process.env.NODE_ENV !== 'production') {\n          if (!stylesWithOverrides[key]) {\n            console.warn(['Material-UI: You are trying to override a style that does not exist.', \"Fix the `\".concat(key, \"` key of `theme.overrides.\").concat(name, \"`.\")].join('\\n'));\n          }\n        }\n\n        stylesWithOverrides[key] = deepmerge(stylesWithOverrides[key], overrides[key]);\n      });\n      return stylesWithOverrides;\n    },\n    options: {}\n  };\n}","// We use the same empty object to ref count the styles that don't need a theme object.\nvar noopTheme = {};\nexport default noopTheme;","import _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport React from 'react';\nimport { getDynamicStyles } from 'jss';\nimport mergeClasses from '../mergeClasses';\nimport multiKeyStore from './multiKeyStore';\nimport useTheme from '../useTheme';\nimport { StylesContext } from '../StylesProvider';\nimport { increment } from './indexCounter';\nimport getStylesCreator from '../getStylesCreator';\nimport noopTheme from '../getStylesCreator/noopTheme';\n\nfunction getClasses(_ref, classes, Component) {\n  var state = _ref.state,\n      stylesOptions = _ref.stylesOptions;\n\n  if (stylesOptions.disableGeneration) {\n    return classes || {};\n  }\n\n  if (!state.cacheClasses) {\n    state.cacheClasses = {\n      // Cache for the finalized classes value.\n      value: null,\n      // Cache for the last used classes prop pointer.\n      lastProp: null,\n      // Cache for the last used rendered classes pointer.\n      lastJSS: {}\n    };\n  } // Tracks if either the rendered classes or classes prop has changed,\n  // requiring the generation of a new finalized classes object.\n\n\n  var generate = false;\n\n  if (state.classes !== state.cacheClasses.lastJSS) {\n    state.cacheClasses.lastJSS = state.classes;\n    generate = true;\n  }\n\n  if (classes !== state.cacheClasses.lastProp) {\n    state.cacheClasses.lastProp = classes;\n    generate = true;\n  }\n\n  if (generate) {\n    state.cacheClasses.value = mergeClasses({\n      baseClasses: state.cacheClasses.lastJSS,\n      newClasses: classes,\n      Component: Component\n    });\n  }\n\n  return state.cacheClasses.value;\n}\n\nfunction attach(_ref2, props) {\n  var state = _ref2.state,\n      theme = _ref2.theme,\n      stylesOptions = _ref2.stylesOptions,\n      stylesCreator = _ref2.stylesCreator,\n      name = _ref2.name;\n\n  if (stylesOptions.disableGeneration) {\n    return;\n  }\n\n  var sheetManager = multiKeyStore.get(stylesOptions.sheetsManager, stylesCreator, theme);\n\n  if (!sheetManager) {\n    sheetManager = {\n      refs: 0,\n      staticSheet: null,\n      dynamicStyles: null\n    };\n    multiKeyStore.set(stylesOptions.sheetsManager, stylesCreator, theme, sheetManager);\n  }\n\n  var options = _extends({}, stylesCreator.options, stylesOptions, {\n    theme: theme,\n    flip: typeof stylesOptions.flip === 'boolean' ? stylesOptions.flip : theme.direction === 'rtl'\n  });\n\n  options.generateId = options.serverGenerateClassName || options.generateClassName;\n  var sheetsRegistry = stylesOptions.sheetsRegistry;\n\n  if (sheetManager.refs === 0) {\n    var staticSheet;\n\n    if (stylesOptions.sheetsCache) {\n      staticSheet = multiKeyStore.get(stylesOptions.sheetsCache, stylesCreator, theme);\n    }\n\n    var styles = stylesCreator.create(theme, name);\n\n    if (!staticSheet) {\n      staticSheet = stylesOptions.jss.createStyleSheet(styles, _extends({\n        link: false\n      }, options));\n      staticSheet.attach();\n\n      if (stylesOptions.sheetsCache) {\n        multiKeyStore.set(stylesOptions.sheetsCache, stylesCreator, theme, staticSheet);\n      }\n    }\n\n    if (sheetsRegistry) {\n      sheetsRegistry.add(staticSheet);\n    }\n\n    sheetManager.staticSheet = staticSheet;\n    sheetManager.dynamicStyles = getDynamicStyles(styles);\n  }\n\n  if (sheetManager.dynamicStyles) {\n    var dynamicSheet = stylesOptions.jss.createStyleSheet(sheetManager.dynamicStyles, _extends({\n      link: true\n    }, options));\n    dynamicSheet.update(props);\n    dynamicSheet.attach();\n    state.dynamicSheet = dynamicSheet;\n    state.classes = mergeClasses({\n      baseClasses: sheetManager.staticSheet.classes,\n      newClasses: dynamicSheet.classes\n    });\n\n    if (sheetsRegistry) {\n      sheetsRegistry.add(dynamicSheet);\n    }\n  } else {\n    state.classes = sheetManager.staticSheet.classes;\n  }\n\n  sheetManager.refs += 1;\n}\n\nfunction update(_ref3, props) {\n  var state = _ref3.state;\n\n  if (state.dynamicSheet) {\n    state.dynamicSheet.update(props);\n  }\n}\n\nfunction detach(_ref4) {\n  var state = _ref4.state,\n      theme = _ref4.theme,\n      stylesOptions = _ref4.stylesOptions,\n      stylesCreator = _ref4.stylesCreator;\n\n  if (stylesOptions.disableGeneration) {\n    return;\n  }\n\n  var sheetManager = multiKeyStore.get(stylesOptions.sheetsManager, stylesCreator, theme);\n  sheetManager.refs -= 1;\n  var sheetsRegistry = stylesOptions.sheetsRegistry;\n\n  if (sheetManager.refs === 0) {\n    multiKeyStore.delete(stylesOptions.sheetsManager, stylesCreator, theme);\n    stylesOptions.jss.removeStyleSheet(sheetManager.staticSheet);\n\n    if (sheetsRegistry) {\n      sheetsRegistry.remove(sheetManager.staticSheet);\n    }\n  }\n\n  if (state.dynamicSheet) {\n    stylesOptions.jss.removeStyleSheet(state.dynamicSheet);\n\n    if (sheetsRegistry) {\n      sheetsRegistry.remove(state.dynamicSheet);\n    }\n  }\n}\n\nfunction useSynchronousEffect(func, values) {\n  var key = React.useRef([]);\n  var output; // Store \"generation\" key. Just returns a new object every time\n\n  var currentKey = React.useMemo(function () {\n    return {};\n  }, values); // eslint-disable-line react-hooks/exhaustive-deps\n  // \"the first render\", or \"memo dropped the value\"\n\n  if (key.current !== currentKey) {\n    key.current = currentKey;\n    output = func();\n  }\n\n  React.useEffect(function () {\n    return function () {\n      if (output) {\n        output();\n      }\n    };\n  }, [currentKey] // eslint-disable-line react-hooks/exhaustive-deps\n  );\n}\n\nexport default function makeStyles(stylesOrCreator) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var name = options.name,\n      classNamePrefixOption = options.classNamePrefix,\n      Component = options.Component,\n      _options$defaultTheme = options.defaultTheme,\n      defaultTheme = _options$defaultTheme === void 0 ? noopTheme : _options$defaultTheme,\n      stylesOptions2 = _objectWithoutProperties(options, [\"name\", \"classNamePrefix\", \"Component\", \"defaultTheme\"]);\n\n  var stylesCreator = getStylesCreator(stylesOrCreator);\n  var classNamePrefix = name || classNamePrefixOption || 'makeStyles';\n  stylesCreator.options = {\n    index: increment(),\n    name: name,\n    meta: classNamePrefix,\n    classNamePrefix: classNamePrefix\n  };\n\n  var useStyles = function useStyles() {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var theme = useTheme() || defaultTheme;\n\n    var stylesOptions = _extends({}, React.useContext(StylesContext), stylesOptions2);\n\n    var instance = React.useRef();\n    var shouldUpdate = React.useRef();\n    useSynchronousEffect(function () {\n      var current = {\n        name: name,\n        state: {},\n        stylesCreator: stylesCreator,\n        stylesOptions: stylesOptions,\n        theme: theme\n      };\n      attach(current, props);\n      shouldUpdate.current = false;\n      instance.current = current;\n      return function () {\n        detach(current);\n      };\n    }, [theme, stylesCreator]);\n    React.useEffect(function () {\n      if (shouldUpdate.current) {\n        update(instance.current, props);\n      }\n\n      shouldUpdate.current = true;\n    });\n    var classes = getClasses(instance.current, props.classes, Component);\n\n    if (process.env.NODE_ENV !== 'production') {\n      // eslint-disable-next-line react-hooks/rules-of-hooks\n      React.useDebugValue(classes);\n    }\n\n    return classes;\n  };\n\n  return useStyles;\n}","/* eslint-disable no-restricted-syntax */\nexport default function getThemeProps(params) {\n  var theme = params.theme,\n      name = params.name,\n      props = params.props;\n\n  if (!theme || !theme.props || !theme.props[name]) {\n    return props;\n  } // Resolve default props, code borrow from React source.\n  // https://github.com/facebook/react/blob/15a8f031838a553e41c0b66eb1bcf1da8448104d/packages/react/src/ReactElement.js#L221\n\n\n  var defaultProps = theme.props[name];\n  var propName;\n\n  for (propName in defaultProps) {\n    if (props[propName] === undefined) {\n      props[propName] = defaultProps[propName];\n    }\n  }\n\n  return props;\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport hoistNonReactStatics from 'hoist-non-react-statics';\nimport { chainPropTypes, getDisplayName } from '@material-ui/utils';\nimport makeStyles from '../makeStyles';\nimport getThemeProps from '../getThemeProps';\nimport useTheme from '../useTheme'; // Link a style sheet with a component.\n// It does not modify the component passed to it;\n// instead, it returns a new component, with a `classes` property.\n\nvar withStyles = function withStyles(stylesOrCreator) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return function (Component) {\n    var defaultTheme = options.defaultTheme,\n        _options$withTheme = options.withTheme,\n        withTheme = _options$withTheme === void 0 ? false : _options$withTheme,\n        name = options.name,\n        stylesOptions = _objectWithoutProperties(options, [\"defaultTheme\", \"withTheme\", \"name\"]);\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (Component === undefined) {\n        throw new Error(['You are calling withStyles(styles)(Component) with an undefined component.', 'You may have forgotten to import it.'].join('\\n'));\n      }\n    }\n\n    var classNamePrefix = name;\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (!name) {\n        // Provide a better DX outside production.\n        var displayName = getDisplayName(Component);\n\n        if (displayName !== undefined) {\n          classNamePrefix = displayName;\n        }\n      }\n    }\n\n    var useStyles = makeStyles(stylesOrCreator, _extends({\n      defaultTheme: defaultTheme,\n      Component: Component,\n      name: name || Component.displayName,\n      classNamePrefix: classNamePrefix\n    }, stylesOptions));\n    var WithStyles = /*#__PURE__*/React.forwardRef(function WithStyles(props, ref) {\n      var classesProp = props.classes,\n          innerRef = props.innerRef,\n          other = _objectWithoutProperties(props, [\"classes\", \"innerRef\"]); // The wrapper receives only user supplied props, which could be a subset of\n      // the actual props Component might receive due to merging with defaultProps.\n      // So copying it here would give us the same result in the wrapper as well.\n\n\n      var classes = useStyles(_extends({}, Component.defaultProps, props));\n      var theme;\n      var more = other;\n\n      if (typeof name === 'string' || withTheme) {\n        // name and withTheme are invariant in the outer scope\n        // eslint-disable-next-line react-hooks/rules-of-hooks\n        theme = useTheme() || defaultTheme;\n\n        if (name) {\n          more = getThemeProps({\n            theme: theme,\n            name: name,\n            props: other\n          });\n        } // Provide the theme to the wrapped component.\n        // So we don't have to use the `withTheme()` Higher-order Component.\n\n\n        if (withTheme && !more.theme) {\n          more.theme = theme;\n        }\n      }\n\n      return /*#__PURE__*/React.createElement(Component, _extends({\n        ref: innerRef || ref,\n        classes: classes\n      }, more));\n    });\n    process.env.NODE_ENV !== \"production\" ? WithStyles.propTypes = {\n      /**\n       * Override or extend the styles applied to the component.\n       */\n      classes: PropTypes.object,\n\n      /**\n       * Use that prop to pass a ref to the decorated component.\n       * @deprecated\n       */\n      innerRef: chainPropTypes(PropTypes.oneOfType([PropTypes.func, PropTypes.object]), function (props) {\n        if (props.innerRef == null) {\n          return null;\n        }\n\n        return null; // return new Error(\n        //   'Material-UI: The `innerRef` prop is deprecated and will be removed in v5. ' +\n        //     'Refs are now automatically forwarded to the inner component.',\n        // );\n      })\n    } : void 0;\n\n    if (process.env.NODE_ENV !== 'production') {\n      WithStyles.displayName = \"WithStyles(\".concat(getDisplayName(Component), \")\");\n    }\n\n    hoistNonReactStatics(WithStyles, Component);\n\n    if (process.env.NODE_ENV !== 'production') {\n      // Exposed for test purposes.\n      WithStyles.Naked = Component;\n      WithStyles.options = options;\n      WithStyles.useStyles = useStyles;\n    }\n\n    return WithStyles;\n  };\n};\n\nexport default withStyles;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\n// Sorted ASC by size. That's important.\n// It can't be configured as it's used statically for propTypes.\nexport var keys = ['xs', 'sm', 'md', 'lg', 'xl']; // Keep in mind that @media is inclusive by the CSS specification.\n\nexport default function createBreakpoints(breakpoints) {\n  var _breakpoints$values = breakpoints.values,\n      values = _breakpoints$values === void 0 ? {\n    xs: 0,\n    sm: 600,\n    md: 960,\n    lg: 1280,\n    xl: 1920\n  } : _breakpoints$values,\n      _breakpoints$unit = breakpoints.unit,\n      unit = _breakpoints$unit === void 0 ? 'px' : _breakpoints$unit,\n      _breakpoints$step = breakpoints.step,\n      step = _breakpoints$step === void 0 ? 5 : _breakpoints$step,\n      other = _objectWithoutProperties(breakpoints, [\"values\", \"unit\", \"step\"]);\n\n  function up(key) {\n    var value = typeof values[key] === 'number' ? values[key] : key;\n    return \"@media (min-width:\".concat(value).concat(unit, \")\");\n  }\n\n  function down(key) {\n    var endIndex = keys.indexOf(key) + 1;\n    var upperbound = values[keys[endIndex]];\n\n    if (endIndex === keys.length) {\n      // xl down applies to all sizes\n      return up('xs');\n    }\n\n    var value = typeof upperbound === 'number' && endIndex > 0 ? upperbound : key;\n    return \"@media (max-width:\".concat(value - step / 100).concat(unit, \")\");\n  }\n\n  function between(start, end) {\n    var endIndex = keys.indexOf(end);\n\n    if (endIndex === keys.length - 1) {\n      return up(start);\n    }\n\n    return \"@media (min-width:\".concat(typeof values[start] === 'number' ? values[start] : start).concat(unit, \") and \") + \"(max-width:\".concat((endIndex !== -1 && typeof values[keys[endIndex + 1]] === 'number' ? values[keys[endIndex + 1]] : end) - step / 100).concat(unit, \")\");\n  }\n\n  function only(key) {\n    return between(key, key);\n  }\n\n  function width(key) {\n    return values[key];\n  }\n\n  return _extends({\n    keys: keys,\n    values: values,\n    up: up,\n    down: down,\n    between: between,\n    only: only,\n    width: width\n  }, other);\n}","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nexport default function createMixins(breakpoints, spacing, mixins) {\n  var _toolbar;\n\n  return _extends({\n    gutters: function gutters() {\n      var styles = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      // To deprecate in v4.1\n      //       warning(\n      //         false,\n      //         [\n      //           'Material-UI: Theme.mixins.gutters() is deprecated.',\n      //           'You can use the source of the mixin directly:',\n      //           `\n      // paddingLeft: theme.spacing(2),\n      // paddingRight: theme.spacing(2),\n      // [theme.breakpoints.up('sm')]: {\n      //   paddingLeft: theme.spacing(3),\n      //   paddingRight: theme.spacing(3),\n      // },\n      // `,\n      //         ].join('\\n'),\n      //       );\n      return _extends({\n        paddingLeft: spacing(2),\n        paddingRight: spacing(2)\n      }, styles, _defineProperty({}, breakpoints.up('sm'), _extends({\n        paddingLeft: spacing(3),\n        paddingRight: spacing(3)\n      }, styles[breakpoints.up('sm')])));\n    },\n    toolbar: (_toolbar = {\n      minHeight: 56\n    }, _defineProperty(_toolbar, \"\".concat(breakpoints.up('xs'), \" and (orientation: landscape)\"), {\n      minHeight: 48\n    }), _defineProperty(_toolbar, breakpoints.up('sm'), {\n      minHeight: 64\n    }), _toolbar)\n  }, mixins);\n}","var common = {\n  black: '#000',\n  white: '#fff'\n};\nexport default common;","var grey = {\n  50: '#fafafa',\n  100: '#f5f5f5',\n  200: '#eeeeee',\n  300: '#e0e0e0',\n  400: '#bdbdbd',\n  500: '#9e9e9e',\n  600: '#757575',\n  700: '#616161',\n  800: '#424242',\n  900: '#212121',\n  A100: '#d5d5d5',\n  A200: '#aaaaaa',\n  A400: '#303030',\n  A700: '#616161'\n};\nexport default grey;","var indigo = {\n  50: '#e8eaf6',\n  100: '#c5cae9',\n  200: '#9fa8da',\n  300: '#7986cb',\n  400: '#5c6bc0',\n  500: '#3f51b5',\n  600: '#3949ab',\n  700: '#303f9f',\n  800: '#283593',\n  900: '#1a237e',\n  A100: '#8c9eff',\n  A200: '#536dfe',\n  A400: '#3d5afe',\n  A700: '#304ffe'\n};\nexport default indigo;","var pink = {\n  50: '#fce4ec',\n  100: '#f8bbd0',\n  200: '#f48fb1',\n  300: '#f06292',\n  400: '#ec407a',\n  500: '#e91e63',\n  600: '#d81b60',\n  700: '#c2185b',\n  800: '#ad1457',\n  900: '#880e4f',\n  A100: '#ff80ab',\n  A200: '#ff4081',\n  A400: '#f50057',\n  A700: '#c51162'\n};\nexport default pink;","var red = {\n  50: '#ffebee',\n  100: '#ffcdd2',\n  200: '#ef9a9a',\n  300: '#e57373',\n  400: '#ef5350',\n  500: '#f44336',\n  600: '#e53935',\n  700: '#d32f2f',\n  800: '#c62828',\n  900: '#b71c1c',\n  A100: '#ff8a80',\n  A200: '#ff5252',\n  A400: '#ff1744',\n  A700: '#d50000'\n};\nexport default red;","var orange = {\n  50: '#fff3e0',\n  100: '#ffe0b2',\n  200: '#ffcc80',\n  300: '#ffb74d',\n  400: '#ffa726',\n  500: '#ff9800',\n  600: '#fb8c00',\n  700: '#f57c00',\n  800: '#ef6c00',\n  900: '#e65100',\n  A100: '#ffd180',\n  A200: '#ffab40',\n  A400: '#ff9100',\n  A700: '#ff6d00'\n};\nexport default orange;","var blue = {\n  50: '#e3f2fd',\n  100: '#bbdefb',\n  200: '#90caf9',\n  300: '#64b5f6',\n  400: '#42a5f5',\n  500: '#2196f3',\n  600: '#1e88e5',\n  700: '#1976d2',\n  800: '#1565c0',\n  900: '#0d47a1',\n  A100: '#82b1ff',\n  A200: '#448aff',\n  A400: '#2979ff',\n  A700: '#2962ff'\n};\nexport default blue;","var green = {\n  50: '#e8f5e9',\n  100: '#c8e6c9',\n  200: '#a5d6a7',\n  300: '#81c784',\n  400: '#66bb6a',\n  500: '#4caf50',\n  600: '#43a047',\n  700: '#388e3c',\n  800: '#2e7d32',\n  900: '#1b5e20',\n  A100: '#b9f6ca',\n  A200: '#69f0ae',\n  A400: '#00e676',\n  A700: '#00c853'\n};\nexport default green;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport { formatMuiErrorMessage as _formatMuiErrorMessage } from \"@material-ui/utils\";\nimport { deepmerge } from '@material-ui/utils';\nimport common from '../colors/common';\nimport grey from '../colors/grey';\nimport indigo from '../colors/indigo';\nimport pink from '../colors/pink';\nimport red from '../colors/red';\nimport orange from '../colors/orange';\nimport blue from '../colors/blue';\nimport green from '../colors/green';\nimport { darken, getContrastRatio, lighten } from './colorManipulator';\nexport var light = {\n  // The colors used to style the text.\n  text: {\n    // The most important text.\n    primary: 'rgba(0, 0, 0, 0.87)',\n    // Secondary text.\n    secondary: 'rgba(0, 0, 0, 0.54)',\n    // Disabled text have even lower visual prominence.\n    disabled: 'rgba(0, 0, 0, 0.38)',\n    // Text hints.\n    hint: 'rgba(0, 0, 0, 0.38)'\n  },\n  // The color used to divide different elements.\n  divider: 'rgba(0, 0, 0, 0.12)',\n  // The background colors used to style the surfaces.\n  // Consistency between these values is important.\n  background: {\n    paper: common.white,\n    default: grey[50]\n  },\n  // The colors used to style the action elements.\n  action: {\n    // The color of an active action like an icon button.\n    active: 'rgba(0, 0, 0, 0.54)',\n    // The color of an hovered action.\n    hover: 'rgba(0, 0, 0, 0.04)',\n    hoverOpacity: 0.04,\n    // The color of a selected action.\n    selected: 'rgba(0, 0, 0, 0.08)',\n    selectedOpacity: 0.08,\n    // The color of a disabled action.\n    disabled: 'rgba(0, 0, 0, 0.26)',\n    // The background color of a disabled action.\n    disabledBackground: 'rgba(0, 0, 0, 0.12)',\n    disabledOpacity: 0.38,\n    focus: 'rgba(0, 0, 0, 0.12)',\n    focusOpacity: 0.12,\n    activatedOpacity: 0.12\n  }\n};\nexport var dark = {\n  text: {\n    primary: common.white,\n    secondary: 'rgba(255, 255, 255, 0.7)',\n    disabled: 'rgba(255, 255, 255, 0.5)',\n    hint: 'rgba(255, 255, 255, 0.5)',\n    icon: 'rgba(255, 255, 255, 0.5)'\n  },\n  divider: 'rgba(255, 255, 255, 0.12)',\n  background: {\n    paper: grey[800],\n    default: '#303030'\n  },\n  action: {\n    active: common.white,\n    hover: 'rgba(255, 255, 255, 0.08)',\n    hoverOpacity: 0.08,\n    selected: 'rgba(255, 255, 255, 0.16)',\n    selectedOpacity: 0.16,\n    disabled: 'rgba(255, 255, 255, 0.3)',\n    disabledBackground: 'rgba(255, 255, 255, 0.12)',\n    disabledOpacity: 0.38,\n    focus: 'rgba(255, 255, 255, 0.12)',\n    focusOpacity: 0.12,\n    activatedOpacity: 0.24\n  }\n};\n\nfunction addLightOrDark(intent, direction, shade, tonalOffset) {\n  var tonalOffsetLight = tonalOffset.light || tonalOffset;\n  var tonalOffsetDark = tonalOffset.dark || tonalOffset * 1.5;\n\n  if (!intent[direction]) {\n    if (intent.hasOwnProperty(shade)) {\n      intent[direction] = intent[shade];\n    } else if (direction === 'light') {\n      intent.light = lighten(intent.main, tonalOffsetLight);\n    } else if (direction === 'dark') {\n      intent.dark = darken(intent.main, tonalOffsetDark);\n    }\n  }\n}\n\nexport default function createPalette(palette) {\n  var _palette$primary = palette.primary,\n      primary = _palette$primary === void 0 ? {\n    light: indigo[300],\n    main: indigo[500],\n    dark: indigo[700]\n  } : _palette$primary,\n      _palette$secondary = palette.secondary,\n      secondary = _palette$secondary === void 0 ? {\n    light: pink.A200,\n    main: pink.A400,\n    dark: pink.A700\n  } : _palette$secondary,\n      _palette$error = palette.error,\n      error = _palette$error === void 0 ? {\n    light: red[300],\n    main: red[500],\n    dark: red[700]\n  } : _palette$error,\n      _palette$warning = palette.warning,\n      warning = _palette$warning === void 0 ? {\n    light: orange[300],\n    main: orange[500],\n    dark: orange[700]\n  } : _palette$warning,\n      _palette$info = palette.info,\n      info = _palette$info === void 0 ? {\n    light: blue[300],\n    main: blue[500],\n    dark: blue[700]\n  } : _palette$info,\n      _palette$success = palette.success,\n      success = _palette$success === void 0 ? {\n    light: green[300],\n    main: green[500],\n    dark: green[700]\n  } : _palette$success,\n      _palette$type = palette.type,\n      type = _palette$type === void 0 ? 'light' : _palette$type,\n      _palette$contrastThre = palette.contrastThreshold,\n      contrastThreshold = _palette$contrastThre === void 0 ? 3 : _palette$contrastThre,\n      _palette$tonalOffset = palette.tonalOffset,\n      tonalOffset = _palette$tonalOffset === void 0 ? 0.2 : _palette$tonalOffset,\n      other = _objectWithoutProperties(palette, [\"primary\", \"secondary\", \"error\", \"warning\", \"info\", \"success\", \"type\", \"contrastThreshold\", \"tonalOffset\"]); // Use the same logic as\n  // Bootstrap: https://github.com/twbs/bootstrap/blob/1d6e3710dd447de1a200f29e8fa521f8a0908f70/scss/_functions.scss#L59\n  // and material-components-web https://github.com/material-components/material-components-web/blob/ac46b8863c4dab9fc22c4c662dc6bd1b65dd652f/packages/mdc-theme/_functions.scss#L54\n\n\n  function getContrastText(background) {\n    var contrastText = getContrastRatio(background, dark.text.primary) >= contrastThreshold ? dark.text.primary : light.text.primary;\n\n    if (process.env.NODE_ENV !== 'production') {\n      var contrast = getContrastRatio(background, contrastText);\n\n      if (contrast < 3) {\n        console.error([\"Material-UI: The contrast ratio of \".concat(contrast, \":1 for \").concat(contrastText, \" on \").concat(background), 'falls below the WCAG recommended absolute minimum contrast ratio of 3:1.', 'https://www.w3.org/TR/2008/REC-WCAG20-20081211/#visual-audio-contrast-contrast'].join('\\n'));\n      }\n    }\n\n    return contrastText;\n  }\n\n  var augmentColor = function augmentColor(color) {\n    var mainShade = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 500;\n    var lightShade = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 300;\n    var darkShade = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 700;\n    color = _extends({}, color);\n\n    if (!color.main && color[mainShade]) {\n      color.main = color[mainShade];\n    }\n\n    if (!color.main) {\n      throw new Error(process.env.NODE_ENV !== \"production\" ? \"Material-UI: The color provided to augmentColor(color) is invalid.\\nThe color object needs to have a `main` property or a `\".concat(mainShade, \"` property.\") : _formatMuiErrorMessage(4, mainShade));\n    }\n\n    if (typeof color.main !== 'string') {\n      throw new Error(process.env.NODE_ENV !== \"production\" ? \"Material-UI: The color provided to augmentColor(color) is invalid.\\n`color.main` should be a string, but `\".concat(JSON.stringify(color.main), \"` was provided instead.\\n\\nDid you intend to use one of the following approaches?\\n\\nimport {\\xA0green } from \\\"@material-ui/core/colors\\\";\\n\\nconst theme1 = createMuiTheme({ palette: {\\n  primary: green,\\n} });\\n\\nconst theme2 = createMuiTheme({ palette: {\\n  primary: { main: green[500] },\\n} });\") : _formatMuiErrorMessage(5, JSON.stringify(color.main)));\n    }\n\n    addLightOrDark(color, 'light', lightShade, tonalOffset);\n    addLightOrDark(color, 'dark', darkShade, tonalOffset);\n\n    if (!color.contrastText) {\n      color.contrastText = getContrastText(color.main);\n    }\n\n    return color;\n  };\n\n  var types = {\n    dark: dark,\n    light: light\n  };\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (!types[type]) {\n      console.error(\"Material-UI: The palette type `\".concat(type, \"` is not supported.\"));\n    }\n  }\n\n  var paletteOutput = deepmerge(_extends({\n    // A collection of common colors.\n    common: common,\n    // The palette type, can be light or dark.\n    type: type,\n    // The colors used to represent primary interface elements for a user.\n    primary: augmentColor(primary),\n    // The colors used to represent secondary interface elements for a user.\n    secondary: augmentColor(secondary, 'A400', 'A200', 'A700'),\n    // The colors used to represent interface elements that the user should be made aware of.\n    error: augmentColor(error),\n    // The colors used to represent potentially dangerous actions or important messages.\n    warning: augmentColor(warning),\n    // The colors used to present information to the user that is neutral and not necessarily important.\n    info: augmentColor(info),\n    // The colors used to indicate the successful completion of an action that user triggered.\n    success: augmentColor(success),\n    // The grey colors.\n    grey: grey,\n    // Used by `getContrastText()` to maximize the contrast between\n    // the background and the text.\n    contrastThreshold: contrastThreshold,\n    // Takes a background color and returns the text color that maximizes the contrast.\n    getContrastText: getContrastText,\n    // Generate a rich color object.\n    augmentColor: augmentColor,\n    // Used by the functions below to shift a color's luminance by approximately\n    // two indexes within its tonal palette.\n    // E.g., shift from Red 500 to Red 300 or Red 700.\n    tonalOffset: tonalOffset\n  }, types[type]), other);\n  return paletteOutput;\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport { deepmerge } from '@material-ui/utils';\n\nfunction round(value) {\n  return Math.round(value * 1e5) / 1e5;\n}\n\nvar caseAllCaps = {\n  textTransform: 'uppercase'\n};\nvar defaultFontFamily = '\"Roboto\", \"Helvetica\", \"Arial\", sans-serif';\n/**\n * @see @link{https://material.io/design/typography/the-type-system.html}\n * @see @link{https://material.io/design/typography/understanding-typography.html}\n */\n\nexport default function createTypography(palette, typography) {\n  var _ref = typeof typography === 'function' ? typography(palette) : typography,\n      _ref$fontFamily = _ref.fontFamily,\n      fontFamily = _ref$fontFamily === void 0 ? defaultFontFamily : _ref$fontFamily,\n      _ref$fontSize = _ref.fontSize,\n      fontSize = _ref$fontSize === void 0 ? 14 : _ref$fontSize,\n      _ref$fontWeightLight = _ref.fontWeightLight,\n      fontWeightLight = _ref$fontWeightLight === void 0 ? 300 : _ref$fontWeightLight,\n      _ref$fontWeightRegula = _ref.fontWeightRegular,\n      fontWeightRegular = _ref$fontWeightRegula === void 0 ? 400 : _ref$fontWeightRegula,\n      _ref$fontWeightMedium = _ref.fontWeightMedium,\n      fontWeightMedium = _ref$fontWeightMedium === void 0 ? 500 : _ref$fontWeightMedium,\n      _ref$fontWeightBold = _ref.fontWeightBold,\n      fontWeightBold = _ref$fontWeightBold === void 0 ? 700 : _ref$fontWeightBold,\n      _ref$htmlFontSize = _ref.htmlFontSize,\n      htmlFontSize = _ref$htmlFontSize === void 0 ? 16 : _ref$htmlFontSize,\n      allVariants = _ref.allVariants,\n      pxToRem2 = _ref.pxToRem,\n      other = _objectWithoutProperties(_ref, [\"fontFamily\", \"fontSize\", \"fontWeightLight\", \"fontWeightRegular\", \"fontWeightMedium\", \"fontWeightBold\", \"htmlFontSize\", \"allVariants\", \"pxToRem\"]);\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (typeof fontSize !== 'number') {\n      console.error('Material-UI: `fontSize` is required to be a number.');\n    }\n\n    if (typeof htmlFontSize !== 'number') {\n      console.error('Material-UI: `htmlFontSize` is required to be a number.');\n    }\n  }\n\n  var coef = fontSize / 14;\n\n  var pxToRem = pxToRem2 || function (size) {\n    return \"\".concat(size / htmlFontSize * coef, \"rem\");\n  };\n\n  var buildVariant = function buildVariant(fontWeight, size, lineHeight, letterSpacing, casing) {\n    return _extends({\n      fontFamily: fontFamily,\n      fontWeight: fontWeight,\n      fontSize: pxToRem(size),\n      // Unitless following https://meyerweb.com/eric/thoughts/2006/02/08/unitless-line-heights/\n      lineHeight: lineHeight\n    }, fontFamily === defaultFontFamily ? {\n      letterSpacing: \"\".concat(round(letterSpacing / size), \"em\")\n    } : {}, casing, allVariants);\n  };\n\n  var variants = {\n    h1: buildVariant(fontWeightLight, 96, 1.167, -1.5),\n    h2: buildVariant(fontWeightLight, 60, 1.2, -0.5),\n    h3: buildVariant(fontWeightRegular, 48, 1.167, 0),\n    h4: buildVariant(fontWeightRegular, 34, 1.235, 0.25),\n    h5: buildVariant(fontWeightRegular, 24, 1.334, 0),\n    h6: buildVariant(fontWeightMedium, 20, 1.6, 0.15),\n    subtitle1: buildVariant(fontWeightRegular, 16, 1.75, 0.15),\n    subtitle2: buildVariant(fontWeightMedium, 14, 1.57, 0.1),\n    body1: buildVariant(fontWeightRegular, 16, 1.5, 0.15),\n    body2: buildVariant(fontWeightRegular, 14, 1.43, 0.15),\n    button: buildVariant(fontWeightMedium, 14, 1.75, 0.4, caseAllCaps),\n    caption: buildVariant(fontWeightRegular, 12, 1.66, 0.4),\n    overline: buildVariant(fontWeightRegular, 12, 2.66, 1, caseAllCaps)\n  };\n  return deepmerge(_extends({\n    htmlFontSize: htmlFontSize,\n    pxToRem: pxToRem,\n    round: round,\n    // TODO v5: remove\n    fontFamily: fontFamily,\n    fontSize: fontSize,\n    fontWeightLight: fontWeightLight,\n    fontWeightRegular: fontWeightRegular,\n    fontWeightMedium: fontWeightMedium,\n    fontWeightBold: fontWeightBold\n  }, variants), other, {\n    clone: false // No need to clone deep\n\n  });\n}","var shadowKeyUmbraOpacity = 0.2;\nvar shadowKeyPenumbraOpacity = 0.14;\nvar shadowAmbientShadowOpacity = 0.12;\n\nfunction createShadow() {\n  return [\"\".concat(arguments.length <= 0 ? undefined : arguments[0], \"px \").concat(arguments.length <= 1 ? undefined : arguments[1], \"px \").concat(arguments.length <= 2 ? undefined : arguments[2], \"px \").concat(arguments.length <= 3 ? undefined : arguments[3], \"px rgba(0,0,0,\").concat(shadowKeyUmbraOpacity, \")\"), \"\".concat(arguments.length <= 4 ? undefined : arguments[4], \"px \").concat(arguments.length <= 5 ? undefined : arguments[5], \"px \").concat(arguments.length <= 6 ? undefined : arguments[6], \"px \").concat(arguments.length <= 7 ? undefined : arguments[7], \"px rgba(0,0,0,\").concat(shadowKeyPenumbraOpacity, \")\"), \"\".concat(arguments.length <= 8 ? undefined : arguments[8], \"px \").concat(arguments.length <= 9 ? undefined : arguments[9], \"px \").concat(arguments.length <= 10 ? undefined : arguments[10], \"px \").concat(arguments.length <= 11 ? undefined : arguments[11], \"px rgba(0,0,0,\").concat(shadowAmbientShadowOpacity, \")\")].join(',');\n} // Values from https://github.com/material-components/material-components-web/blob/be8747f94574669cb5e7add1a7c54fa41a89cec7/packages/mdc-elevation/_variables.scss\n\n\nvar shadows = ['none', createShadow(0, 2, 1, -1, 0, 1, 1, 0, 0, 1, 3, 0), createShadow(0, 3, 1, -2, 0, 2, 2, 0, 0, 1, 5, 0), createShadow(0, 3, 3, -2, 0, 3, 4, 0, 0, 1, 8, 0), createShadow(0, 2, 4, -1, 0, 4, 5, 0, 0, 1, 10, 0), createShadow(0, 3, 5, -1, 0, 5, 8, 0, 0, 1, 14, 0), createShadow(0, 3, 5, -1, 0, 6, 10, 0, 0, 1, 18, 0), createShadow(0, 4, 5, -2, 0, 7, 10, 1, 0, 2, 16, 1), createShadow(0, 5, 5, -3, 0, 8, 10, 1, 0, 3, 14, 2), createShadow(0, 5, 6, -3, 0, 9, 12, 1, 0, 3, 16, 2), createShadow(0, 6, 6, -3, 0, 10, 14, 1, 0, 4, 18, 3), createShadow(0, 6, 7, -4, 0, 11, 15, 1, 0, 4, 20, 3), createShadow(0, 7, 8, -4, 0, 12, 17, 2, 0, 5, 22, 4), createShadow(0, 7, 8, -4, 0, 13, 19, 2, 0, 5, 24, 4), createShadow(0, 7, 9, -4, 0, 14, 21, 2, 0, 5, 26, 4), createShadow(0, 8, 9, -5, 0, 15, 22, 2, 0, 6, 28, 5), createShadow(0, 8, 10, -5, 0, 16, 24, 2, 0, 6, 30, 5), createShadow(0, 8, 11, -5, 0, 17, 26, 2, 0, 6, 32, 5), createShadow(0, 9, 11, -5, 0, 18, 28, 2, 0, 7, 34, 6), createShadow(0, 9, 12, -6, 0, 19, 29, 2, 0, 7, 36, 6), createShadow(0, 10, 13, -6, 0, 20, 31, 3, 0, 8, 38, 7), createShadow(0, 10, 13, -6, 0, 21, 33, 3, 0, 8, 40, 7), createShadow(0, 10, 14, -6, 0, 22, 35, 3, 0, 8, 42, 7), createShadow(0, 11, 14, -7, 0, 23, 36, 3, 0, 9, 44, 8), createShadow(0, 11, 15, -7, 0, 24, 38, 3, 0, 9, 46, 8)];\nexport default shadows;","var shape = {\n  borderRadius: 4\n};\nexport default shape;","import arrayWithHoles from \"../arrayWithHoles/_index.mjs\";\nimport iterableToArrayLimit from \"../iterableToArrayLimit/_index.mjs\";\nimport unsupportedIterableToArray from \"../unsupportedIterableToArray/_index.mjs\";\nimport nonIterableRest from \"../nonIterableRest/_index.mjs\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","import { deepmerge } from '@material-ui/utils';\n\nfunction merge(acc, item) {\n  if (!item) {\n    return acc;\n  }\n\n  return deepmerge(acc, item, {\n    clone: false // No need to clone deep, it's way faster.\n\n  });\n}\n\nexport default merge;","import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport PropTypes from 'prop-types';\nimport merge from './merge'; // The breakpoint **start** at this value.\n// For instance with the first breakpoint xs: [xs, sm[.\n\nvar values = {\n  xs: 0,\n  sm: 600,\n  md: 960,\n  lg: 1280,\n  xl: 1920\n};\nvar defaultBreakpoints = {\n  // Sorted ASC by size. That's important.\n  // It can't be configured as it's used statically for propTypes.\n  keys: ['xs', 'sm', 'md', 'lg', 'xl'],\n  up: function up(key) {\n    return \"@media (min-width:\".concat(values[key], \"px)\");\n  }\n};\nexport function handleBreakpoints(props, propValue, styleFromPropValue) {\n  if (process.env.NODE_ENV !== 'production') {\n    if (!props.theme) {\n      console.error('Material-UI: You are calling a style function without a theme value.');\n    }\n  }\n\n  if (Array.isArray(propValue)) {\n    var themeBreakpoints = props.theme.breakpoints || defaultBreakpoints;\n    return propValue.reduce(function (acc, item, index) {\n      acc[themeBreakpoints.up(themeBreakpoints.keys[index])] = styleFromPropValue(propValue[index]);\n      return acc;\n    }, {});\n  }\n\n  if (_typeof(propValue) === 'object') {\n    var _themeBreakpoints = props.theme.breakpoints || defaultBreakpoints;\n\n    return Object.keys(propValue).reduce(function (acc, breakpoint) {\n      acc[_themeBreakpoints.up(breakpoint)] = styleFromPropValue(propValue[breakpoint]);\n      return acc;\n    }, {});\n  }\n\n  var output = styleFromPropValue(propValue);\n  return output;\n}\n\nfunction breakpoints(styleFunction) {\n  var newStyleFunction = function newStyleFunction(props) {\n    var base = styleFunction(props);\n    var themeBreakpoints = props.theme.breakpoints || defaultBreakpoints;\n    var extended = themeBreakpoints.keys.reduce(function (acc, key) {\n      if (props[key]) {\n        acc = acc || {};\n        acc[themeBreakpoints.up(key)] = styleFunction(_extends({\n          theme: props.theme\n        }, props[key]));\n      }\n\n      return acc;\n    }, null);\n    return merge(base, extended);\n  };\n\n  newStyleFunction.propTypes = process.env.NODE_ENV !== 'production' ? _extends({}, styleFunction.propTypes, {\n    xs: PropTypes.object,\n    sm: PropTypes.object,\n    md: PropTypes.object,\n    lg: PropTypes.object,\n    xl: PropTypes.object\n  }) : {};\n  newStyleFunction.filterProps = ['xs', 'sm', 'md', 'lg', 'xl'].concat(_toConsumableArray(styleFunction.filterProps));\n  return newStyleFunction;\n}\n\nexport default breakpoints;","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport responsivePropType from './responsivePropType';\nimport { handleBreakpoints } from './breakpoints';\nimport merge from './merge';\nimport memoize from './memoize';\nvar properties = {\n  m: 'margin',\n  p: 'padding'\n};\nvar directions = {\n  t: 'Top',\n  r: 'Right',\n  b: 'Bottom',\n  l: 'Left',\n  x: ['Left', 'Right'],\n  y: ['Top', 'Bottom']\n};\nvar aliases = {\n  marginX: 'mx',\n  marginY: 'my',\n  paddingX: 'px',\n  paddingY: 'py'\n}; // memoize() impact:\n// From 300,000 ops/sec\n// To 350,000 ops/sec\n\nvar getCssProperties = memoize(function (prop) {\n  // It's not a shorthand notation.\n  if (prop.length > 2) {\n    if (aliases[prop]) {\n      prop = aliases[prop];\n    } else {\n      return [prop];\n    }\n  }\n\n  var _prop$split = prop.split(''),\n      _prop$split2 = _slicedToArray(_prop$split, 2),\n      a = _prop$split2[0],\n      b = _prop$split2[1];\n\n  var property = properties[a];\n  var direction = directions[b] || '';\n  return Array.isArray(direction) ? direction.map(function (dir) {\n    return property + dir;\n  }) : [property + direction];\n});\nvar spacingKeys = ['m', 'mt', 'mr', 'mb', 'ml', 'mx', 'my', 'p', 'pt', 'pr', 'pb', 'pl', 'px', 'py', 'margin', 'marginTop', 'marginRight', 'marginBottom', 'marginLeft', 'marginX', 'marginY', 'padding', 'paddingTop', 'paddingRight', 'paddingBottom', 'paddingLeft', 'paddingX', 'paddingY'];\nexport function createUnarySpacing(theme) {\n  var themeSpacing = theme.spacing || 8;\n\n  if (typeof themeSpacing === 'number') {\n    return function (abs) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (typeof abs !== 'number') {\n          console.error(\"Material-UI: Expected spacing argument to be a number, got \".concat(abs, \".\"));\n        }\n      }\n\n      return themeSpacing * abs;\n    };\n  }\n\n  if (Array.isArray(themeSpacing)) {\n    return function (abs) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (abs > themeSpacing.length - 1) {\n          console.error([\"Material-UI: The value provided (\".concat(abs, \") overflows.\"), \"The supported values are: \".concat(JSON.stringify(themeSpacing), \".\"), \"\".concat(abs, \" > \").concat(themeSpacing.length - 1, \", you need to add the missing values.\")].join('\\n'));\n        }\n      }\n\n      return themeSpacing[abs];\n    };\n  }\n\n  if (typeof themeSpacing === 'function') {\n    return themeSpacing;\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    console.error([\"Material-UI: The `theme.spacing` value (\".concat(themeSpacing, \") is invalid.\"), 'It should be a number, an array or a function.'].join('\\n'));\n  }\n\n  return function () {\n    return undefined;\n  };\n}\n\nfunction getValue(transformer, propValue) {\n  if (typeof propValue === 'string' || propValue == null) {\n    return propValue;\n  }\n\n  var abs = Math.abs(propValue);\n  var transformed = transformer(abs);\n\n  if (propValue >= 0) {\n    return transformed;\n  }\n\n  if (typeof transformed === 'number') {\n    return -transformed;\n  }\n\n  return \"-\".concat(transformed);\n}\n\nfunction getStyleFromPropValue(cssProperties, transformer) {\n  return function (propValue) {\n    return cssProperties.reduce(function (acc, cssProperty) {\n      acc[cssProperty] = getValue(transformer, propValue);\n      return acc;\n    }, {});\n  };\n}\n\nfunction spacing(props) {\n  var theme = props.theme;\n  var transformer = createUnarySpacing(theme);\n  return Object.keys(props).map(function (prop) {\n    // Using a hash computation over an array iteration could be faster, but with only 28 items,\n    // it's doesn't worth the bundle size.\n    if (spacingKeys.indexOf(prop) === -1) {\n      return null;\n    }\n\n    var cssProperties = getCssProperties(prop);\n    var styleFromPropValue = getStyleFromPropValue(cssProperties, transformer);\n    var propValue = props[prop];\n    return handleBreakpoints(props, propValue, styleFromPropValue);\n  }).reduce(merge, {});\n}\n\nspacing.propTypes = process.env.NODE_ENV !== 'production' ? spacingKeys.reduce(function (obj, key) {\n  obj[key] = responsivePropType;\n  return obj;\n}, {}) : {};\nspacing.filterProps = spacingKeys;\nexport default spacing;","export default function memoize(fn) {\n  var cache = {};\n  return function (arg) {\n    if (cache[arg] === undefined) {\n      cache[arg] = fn(arg);\n    }\n\n    return cache[arg];\n  };\n}","import { createUnarySpacing } from '@material-ui/system';\nvar warnOnce;\nexport default function createSpacing() {\n  var spacingInput = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 8;\n\n  // Already transformed.\n  if (spacingInput.mui) {\n    return spacingInput;\n  } // Material Design layouts are visually balanced. Most measurements align to an 8dp grid applied, which aligns both spacing and the overall layout.\n  // Smaller components, such as icons and type, can align to a 4dp grid.\n  // https://material.io/design/layout/understanding-layout.html#usage\n\n\n  var transform = createUnarySpacing({\n    spacing: spacingInput\n  });\n\n  var spacing = function spacing() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (!(args.length <= 4)) {\n        console.error(\"Material-UI: Too many arguments provided, expected between 0 and 4, got \".concat(args.length));\n      }\n    }\n\n    if (args.length === 0) {\n      return transform(1);\n    }\n\n    if (args.length === 1) {\n      return transform(args[0]);\n    }\n\n    return args.map(function (argument) {\n      if (typeof argument === 'string') {\n        return argument;\n      }\n\n      var output = transform(argument);\n      return typeof output === 'number' ? \"\".concat(output, \"px\") : output;\n    }).join(' ');\n  }; // Backward compatibility, to remove in v5.\n\n\n  Object.defineProperty(spacing, 'unit', {\n    get: function get() {\n      if (process.env.NODE_ENV !== 'production') {\n        if (!warnOnce || process.env.NODE_ENV === 'test') {\n          console.error(['Material-UI: theme.spacing.unit usage has been deprecated.', 'It will be removed in v5.', 'You can replace `theme.spacing.unit * y` with `theme.spacing(y)`.', '', 'You can use the `https://github.com/mui-org/material-ui/tree/master/packages/material-ui-codemod/README.md#theme-spacing-api` migration helper to make the process smoother.'].join('\\n'));\n        }\n\n        warnOnce = true;\n      }\n\n      return spacingInput;\n    }\n  });\n  spacing.mui = true;\n  return spacing;\n}","import _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\n// Follow https://material.google.com/motion/duration-easing.html#duration-easing-natural-easing-curves\n// to learn the context in which each easing should be used.\nexport var easing = {\n  // This is the most common easing curve.\n  easeInOut: 'cubic-bezier(0.4, 0, 0.2, 1)',\n  // Objects enter the screen at full velocity from off-screen and\n  // slowly decelerate to a resting point.\n  easeOut: 'cubic-bezier(0.0, 0, 0.2, 1)',\n  // Objects leave the screen at full velocity. They do not decelerate when off-screen.\n  easeIn: 'cubic-bezier(0.4, 0, 1, 1)',\n  // The sharp curve is used by objects that may return to the screen at any time.\n  sharp: 'cubic-bezier(0.4, 0, 0.6, 1)'\n}; // Follow https://material.io/guidelines/motion/duration-easing.html#duration-easing-common-durations\n// to learn when use what timing\n\nexport var duration = {\n  shortest: 150,\n  shorter: 200,\n  short: 250,\n  // most basic recommended timing\n  standard: 300,\n  // this is to be used in complex animations\n  complex: 375,\n  // recommended when something is entering screen\n  enteringScreen: 225,\n  // recommended when something is leaving screen\n  leavingScreen: 195\n};\n\nfunction formatMs(milliseconds) {\n  return \"\".concat(Math.round(milliseconds), \"ms\");\n}\n/**\n * @param {string|Array} props\n * @param {object} param\n * @param {string} param.prop\n * @param {number} param.duration\n * @param {string} param.easing\n * @param {number} param.delay\n */\n\n\nexport default {\n  easing: easing,\n  duration: duration,\n  create: function create() {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : ['all'];\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    var _options$duration = options.duration,\n        durationOption = _options$duration === void 0 ? duration.standard : _options$duration,\n        _options$easing = options.easing,\n        easingOption = _options$easing === void 0 ? easing.easeInOut : _options$easing,\n        _options$delay = options.delay,\n        delay = _options$delay === void 0 ? 0 : _options$delay,\n        other = _objectWithoutProperties(options, [\"duration\", \"easing\", \"delay\"]);\n\n    if (process.env.NODE_ENV !== 'production') {\n      var isString = function isString(value) {\n        return typeof value === 'string';\n      };\n\n      var isNumber = function isNumber(value) {\n        return !isNaN(parseFloat(value));\n      };\n\n      if (!isString(props) && !Array.isArray(props)) {\n        console.error('Material-UI: Argument \"props\" must be a string or Array.');\n      }\n\n      if (!isNumber(durationOption) && !isString(durationOption)) {\n        console.error(\"Material-UI: Argument \\\"duration\\\" must be a number or a string but found \".concat(durationOption, \".\"));\n      }\n\n      if (!isString(easingOption)) {\n        console.error('Material-UI: Argument \"easing\" must be a string.');\n      }\n\n      if (!isNumber(delay) && !isString(delay)) {\n        console.error('Material-UI: Argument \"delay\" must be a number or a string.');\n      }\n\n      if (Object.keys(other).length !== 0) {\n        console.error(\"Material-UI: Unrecognized argument(s) [\".concat(Object.keys(other).join(','), \"].\"));\n      }\n    }\n\n    return (Array.isArray(props) ? props : [props]).map(function (animatedProp) {\n      return \"\".concat(animatedProp, \" \").concat(typeof durationOption === 'string' ? durationOption : formatMs(durationOption), \" \").concat(easingOption, \" \").concat(typeof delay === 'string' ? delay : formatMs(delay));\n    }).join(',');\n  },\n  getAutoHeightDuration: function getAutoHeightDuration(height) {\n    if (!height) {\n      return 0;\n    }\n\n    var constant = height / 36; // https://www.wolframalpha.com/input/?i=(4+%2B+15+*+(x+%2F+36+)+**+0.25+%2B+(x+%2F+36)+%2F+5)+*+10\n\n    return Math.round((4 + 15 * Math.pow(constant, 0.25) + constant / 5) * 10);\n  }\n};","// We need to centralize the zIndex definitions as they work\n// like global values in the browser.\nvar zIndex = {\n  mobileStepper: 1000,\n  speedDial: 1050,\n  appBar: 1100,\n  drawer: 1200,\n  modal: 1300,\n  snackbar: 1400,\n  tooltip: 1500\n};\nexport default zIndex;","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport { deepmerge } from '@material-ui/utils';\nimport createBreakpoints from './createBreakpoints';\nimport createMixins from './createMixins';\nimport createPalette from './createPalette';\nimport createTypography from './createTypography';\nimport shadows from './shadows';\nimport shape from './shape';\nimport createSpacing from './createSpacing';\nimport transitions from './transitions';\nimport zIndex from './zIndex';\n\nfunction createMuiTheme() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  var _options$breakpoints = options.breakpoints,\n      breakpointsInput = _options$breakpoints === void 0 ? {} : _options$breakpoints,\n      _options$mixins = options.mixins,\n      mixinsInput = _options$mixins === void 0 ? {} : _options$mixins,\n      _options$palette = options.palette,\n      paletteInput = _options$palette === void 0 ? {} : _options$palette,\n      spacingInput = options.spacing,\n      _options$typography = options.typography,\n      typographyInput = _options$typography === void 0 ? {} : _options$typography,\n      other = _objectWithoutProperties(options, [\"breakpoints\", \"mixins\", \"palette\", \"spacing\", \"typography\"]);\n\n  var palette = createPalette(paletteInput);\n  var breakpoints = createBreakpoints(breakpointsInput);\n  var spacing = createSpacing(spacingInput);\n  var muiTheme = deepmerge({\n    breakpoints: breakpoints,\n    direction: 'ltr',\n    mixins: createMixins(breakpoints, spacing, mixinsInput),\n    overrides: {},\n    // Inject custom styles\n    palette: palette,\n    props: {},\n    // Provide default props\n    shadows: shadows,\n    typography: createTypography(palette, typographyInput),\n    spacing: spacing,\n    shape: shape,\n    transitions: transitions,\n    zIndex: zIndex\n  }, other);\n\n  for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    args[_key - 1] = arguments[_key];\n  }\n\n  muiTheme = args.reduce(function (acc, argument) {\n    return deepmerge(acc, argument);\n  }, muiTheme);\n\n  if (process.env.NODE_ENV !== 'production') {\n    var pseudoClasses = ['checked', 'disabled', 'error', 'focused', 'focusVisible', 'required', 'expanded', 'selected'];\n\n    var traverse = function traverse(node, parentKey) {\n      var depth = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n      var key; // eslint-disable-next-line guard-for-in, no-restricted-syntax\n\n      for (key in node) {\n        var child = node[key];\n\n        if (depth === 1) {\n          if (key.indexOf('Mui') === 0 && child) {\n            traverse(child, key, depth + 1);\n          }\n        } else if (pseudoClasses.indexOf(key) !== -1 && Object.keys(child).length > 0) {\n          if (process.env.NODE_ENV !== 'production') {\n            console.error([\"Material-UI: The `\".concat(parentKey, \"` component increases \") + \"the CSS specificity of the `\".concat(key, \"` internal state.\"), 'You can not override it like this: ', JSON.stringify(node, null, 2), '', 'Instead, you need to use the $ruleName syntax:', JSON.stringify({\n              root: _defineProperty({}, \"&$\".concat(key), child)\n            }, null, 2), '', 'https://material-ui.com/r/pseudo-classes-guide'].join('\\n'));\n          } // Remove the style to prevent global conflicts.\n\n\n          node[key] = {};\n        }\n      }\n    };\n\n    traverse(muiTheme.overrides);\n  }\n\n  return muiTheme;\n}\n\nexport default createMuiTheme;","import createMuiTheme from './createMuiTheme';\nvar defaultTheme = createMuiTheme();\nexport default defaultTheme;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { withStyles as withStylesWithoutDefault } from '@material-ui/styles';\nimport defaultTheme from './defaultTheme';\n\nfunction withStyles(stylesOrCreator, options) {\n  return withStylesWithoutDefault(stylesOrCreator, _extends({\n    defaultTheme: defaultTheme\n  }, options));\n}\n\nexport default withStyles;","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/nodelist\n */\n\nimport Node from './node';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n\n/**\n * Provides an interface to operate on a list of {@link module:engine/model/node~Node nodes}. `NodeList` is used internally\n * in classes like {@link module:engine/model/element~Element Element}\n * or {@link module:engine/model/documentfragment~DocumentFragment DocumentFragment}.\n */\nexport default class NodeList {\n\t/**\n\t * Creates an empty node list.\n\t *\n\t * @protected\n\t * @param {Iterable.<module:engine/model/node~Node>} nodes Nodes contained in this node list.\n\t */\n\tconstructor( nodes ) {\n\t\t/**\n\t\t * Nodes contained in this node list.\n\t\t *\n\t\t * @private\n\t\t * @member {Array.<module:engine/model/node~Node>}\n\t\t */\n\t\tthis._nodes = [];\n\n\t\tif ( nodes ) {\n\t\t\tthis._insertNodes( 0, nodes );\n\t\t}\n\t}\n\n\t/**\n\t * Iterable interface.\n\t *\n\t * Iterates over all nodes contained inside this node list.\n\t *\n\t * @returns {Iterable.<module:engine/model/node~Node>}\n\t */\n\t[ Symbol.iterator ]() {\n\t\treturn this._nodes[ Symbol.iterator ]();\n\t}\n\n\t/**\n\t * Number of nodes contained inside this node list.\n\t *\n\t * @readonly\n\t * @type {Number}\n\t */\n\tget length() {\n\t\treturn this._nodes.length;\n\t}\n\n\t/**\n\t * Sum of {@link module:engine/model/node~Node#offsetSize offset sizes} of all nodes contained inside this node list.\n\t *\n\t * @readonly\n\t * @type {Number}\n\t */\n\tget maxOffset() {\n\t\treturn this._nodes.reduce( ( sum, node ) => sum + node.offsetSize, 0 );\n\t}\n\n\t/**\n\t * Gets the node at the given index. Returns `null` if incorrect index was passed.\n\t *\n\t * @param {Number} index Index of node.\n\t * @returns {module:engine/model/node~Node|null} Node at given index.\n\t */\n\tgetNode( index ) {\n\t\treturn this._nodes[ index ] || null;\n\t}\n\n\t/**\n\t * Returns an index of the given node. Returns `null` if given node is not inside this node list.\n\t *\n\t * @param {module:engine/model/node~Node} node Child node to look for.\n\t * @returns {Number|null} Child node's index.\n\t */\n\tgetNodeIndex( node ) {\n\t\tconst index = this._nodes.indexOf( node );\n\n\t\treturn index == -1 ? null : index;\n\t}\n\n\t/**\n\t * Returns the starting offset of given node. Starting offset is equal to the sum of\n\t * {@link module:engine/model/node~Node#offsetSize offset sizes} of all nodes that are before this node in this node list.\n\t *\n\t * @param {module:engine/model/node~Node} node Node to look for.\n\t * @returns {Number|null} Node's starting offset.\n\t */\n\tgetNodeStartOffset( node ) {\n\t\tconst index = this.getNodeIndex( node );\n\n\t\treturn index === null ? null : this._nodes.slice( 0, index ).reduce( ( sum, node ) => sum + node.offsetSize, 0 );\n\t}\n\n\t/**\n\t * Converts index to offset in node list.\n\t *\n\t * Returns starting offset of a node that is at given index. Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError}\n\t * `model-nodelist-index-out-of-bounds` if given index is less than `0` or more than {@link #length}.\n\t *\n\t * @param {Number} index Node's index.\n\t * @returns {Number} Node's starting offset.\n\t */\n\tindexToOffset( index ) {\n\t\tif ( index == this._nodes.length ) {\n\t\t\treturn this.maxOffset;\n\t\t}\n\n\t\tconst node = this._nodes[ index ];\n\n\t\tif ( !node ) {\n\t\t\t/**\n\t\t\t * Given index cannot be found in the node list.\n\t\t\t *\n\t\t\t * @error model-nodelist-index-out-of-bounds\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'model-nodelist-index-out-of-bounds', this );\n\t\t}\n\n\t\treturn this.getNodeStartOffset( node );\n\t}\n\n\t/**\n\t * Converts offset in node list to index.\n\t *\n\t * Returns index of a node that occupies given offset. Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError}\n\t * `model-nodelist-offset-out-of-bounds` if given offset is less than `0` or more than {@link #maxOffset}.\n\t *\n\t * @param {Number} offset Offset to look for.\n\t * @returns {Number} Index of a node that occupies given offset.\n\t */\n\toffsetToIndex( offset ) {\n\t\tlet totalOffset = 0;\n\n\t\tfor ( const node of this._nodes ) {\n\t\t\tif ( offset >= totalOffset && offset < totalOffset + node.offsetSize ) {\n\t\t\t\treturn this.getNodeIndex( node );\n\t\t\t}\n\n\t\t\ttotalOffset += node.offsetSize;\n\t\t}\n\n\t\tif ( totalOffset != offset ) {\n\t\t\t/**\n\t\t\t * Given offset cannot be found in the node list.\n\t\t\t *\n\t\t\t * @error model-nodelist-offset-out-of-bounds\n\t\t\t * @param {Number} offset\n\t\t\t * @param {module:engine/model/nodelist~NodeList} nodeList Stringified node list.\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'model-nodelist-offset-out-of-bounds',\n\t\t\t\tthis,\n\t\t\t\t{\n\t\t\t\t\toffset,\n\t\t\t\t\tnodeList: this\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\treturn this.length;\n\t}\n\n\t/**\n\t * Inserts given nodes at given index.\n\t *\n\t * @protected\n\t * @param {Number} index Index at which nodes should be inserted.\n\t * @param {Iterable.<module:engine/model/node~Node>} nodes Nodes to be inserted.\n\t */\n\t_insertNodes( index, nodes ) {\n\t\t// Validation.\n\t\tfor ( const node of nodes ) {\n\t\t\tif ( !( node instanceof Node ) ) {\n\t\t\t\t/**\n\t\t\t\t * Trying to insert an object which is not a Node instance.\n\t\t\t\t *\n\t\t\t\t * @error model-nodelist-insertnodes-not-node\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError( 'model-nodelist-insertnodes-not-node', this );\n\t\t\t}\n\t\t}\n\n\t\tthis._nodes.splice( index, 0, ...nodes );\n\t}\n\n\t/**\n\t * Removes one or more nodes starting at the given index.\n\t *\n\t * @protected\n\t * @param {Number} indexStart Index of the first node to remove.\n\t * @param {Number} [howMany=1] Number of nodes to remove.\n\t * @returns {Array.<module:engine/model/node~Node>} Array containing removed nodes.\n\t */\n\t_removeNodes( indexStart, howMany = 1 ) {\n\t\treturn this._nodes.splice( indexStart, howMany );\n\t}\n\n\t/**\n\t * Converts `NodeList` instance to an array containing nodes that were inserted in the node list. Nodes\n\t * are also converted to their plain object representation.\n\t *\n\t * @returns {Array.<module:engine/model/node~Node>} `NodeList` instance converted to `Array`.\n\t */\n\ttoJSON() {\n\t\treturn this._nodes.map( node => node.toJSON() );\n\t}\n}\n","var isProduction = process.env.NODE_ENV === 'production';\nfunction warning(condition, message) {\n  if (!isProduction) {\n    if (condition) {\n      return;\n    }\n\n    var text = \"Warning: \" + message;\n\n    if (typeof console !== 'undefined') {\n      console.warn(text);\n    }\n\n    try {\n      throw Error(text);\n    } catch (x) {}\n  }\n}\n\nexport default warning;\n","import root from './_root.js';\nimport stubFalse from './stubFalse.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nexport default isBuffer;\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nexport default nodeUtil;\n","import defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nexport default toSource;\n","'use strict';\n\nfunction checkDCE() {\n  /* global __REACT_DEVTOOLS_GLOBAL_HOOK__ */\n  if (\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ === 'undefined' ||\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE !== 'function'\n  ) {\n    return;\n  }\n  if (process.env.NODE_ENV !== 'production') {\n    // This branch is unreachable because this function is only called\n    // in production, but the condition is true only in development.\n    // Therefore if the branch is still here, dead code elimination wasn't\n    // properly applied.\n    // Don't change the message. React DevTools relies on it. Also make sure\n    // this message doesn't occur elsewhere in this function, or it will cause\n    // a false positive.\n    throw new Error('^_^');\n  }\n  try {\n    // Verify that the code above has been dead code eliminated (DCE'd).\n    __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE);\n  } catch (err) {\n    // DevTools shouldn't crash React, no matter what.\n    // We should still report in case we break this code.\n    console.error(err);\n  }\n}\n\nif (process.env.NODE_ENV === 'production') {\n  // DCE check should happen before ReactDOM bundle executes so that\n  // DevTools can report bad minification during injection.\n  checkDCE();\n  module.exports = require('./cjs/react-dom.production.min.js');\n} else {\n  module.exports = require('./cjs/react-dom.development.js');\n}\n","import isFunction from './isFunction.js';\nimport isLength from './isLength.js';\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nexport default isArrayLike;\n","import { formatMuiErrorMessage as _formatMuiErrorMessage } from \"@material-ui/utils\";\n// It should to be noted that this function isn't equivalent to `text-transform: capitalize`.\n//\n// A strict capitalization should uppercase the first letter of each word a the sentence.\n// We only handle the first word.\nexport default function capitalize(string) {\n  if (typeof string !== 'string') {\n    throw new Error(process.env.NODE_ENV !== \"production\" ? \"Material-UI: capitalize(string) expects a string argument.\" : _formatMuiErrorMessage(7));\n  }\n\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}","'use strict';\n\nvar reactIs = require('react-is');\n\n/**\n * Copyright 2015, Yahoo! Inc.\n * Copyrights licensed under the New BSD License. See the accompanying LICENSE file for terms.\n */\nvar REACT_STATICS = {\n  childContextTypes: true,\n  contextType: true,\n  contextTypes: true,\n  defaultProps: true,\n  displayName: true,\n  getDefaultProps: true,\n  getDerivedStateFromError: true,\n  getDerivedStateFromProps: true,\n  mixins: true,\n  propTypes: true,\n  type: true\n};\nvar KNOWN_STATICS = {\n  name: true,\n  length: true,\n  prototype: true,\n  caller: true,\n  callee: true,\n  arguments: true,\n  arity: true\n};\nvar FORWARD_REF_STATICS = {\n  '$$typeof': true,\n  render: true,\n  defaultProps: true,\n  displayName: true,\n  propTypes: true\n};\nvar MEMO_STATICS = {\n  '$$typeof': true,\n  compare: true,\n  defaultProps: true,\n  displayName: true,\n  propTypes: true,\n  type: true\n};\nvar TYPE_STATICS = {};\nTYPE_STATICS[reactIs.ForwardRef] = FORWARD_REF_STATICS;\nTYPE_STATICS[reactIs.Memo] = MEMO_STATICS;\n\nfunction getStatics(component) {\n  // React v16.11 and below\n  if (reactIs.isMemo(component)) {\n    return MEMO_STATICS;\n  } // React v16.12 and above\n\n\n  return TYPE_STATICS[component['$$typeof']] || REACT_STATICS;\n}\n\nvar defineProperty = Object.defineProperty;\nvar getOwnPropertyNames = Object.getOwnPropertyNames;\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nvar getPrototypeOf = Object.getPrototypeOf;\nvar objectPrototype = Object.prototype;\nfunction hoistNonReactStatics(targetComponent, sourceComponent, blacklist) {\n  if (typeof sourceComponent !== 'string') {\n    // don't hoist over string (html) components\n    if (objectPrototype) {\n      var inheritedComponent = getPrototypeOf(sourceComponent);\n\n      if (inheritedComponent && inheritedComponent !== objectPrototype) {\n        hoistNonReactStatics(targetComponent, inheritedComponent, blacklist);\n      }\n    }\n\n    var keys = getOwnPropertyNames(sourceComponent);\n\n    if (getOwnPropertySymbols) {\n      keys = keys.concat(getOwnPropertySymbols(sourceComponent));\n    }\n\n    var targetStatics = getStatics(targetComponent);\n    var sourceStatics = getStatics(sourceComponent);\n\n    for (var i = 0; i < keys.length; ++i) {\n      var key = keys[i];\n\n      if (!KNOWN_STATICS[key] && !(blacklist && blacklist[key]) && !(sourceStatics && sourceStatics[key]) && !(targetStatics && targetStatics[key])) {\n        var descriptor = getOwnPropertyDescriptor(sourceComponent, key);\n\n        try {\n          // Avoid failures from read-only properties\n          defineProperty(targetComponent, key, descriptor);\n        } catch (e) {}\n      }\n    }\n  }\n\n  return targetComponent;\n}\n\nmodule.exports = hoistNonReactStatics;\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/liverange\n */\n\nimport Range from './range';\nimport EmitterMixin from '@ckeditor/ckeditor5-utils/src/emittermixin';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\n\n/**\n * `LiveRange` is a type of {@link module:engine/model/range~Range Range}\n * that updates itself as {@link module:engine/model/document~Document document}\n * is changed through operations. It may be used as a bookmark.\n *\n * **Note:** Be very careful when dealing with `LiveRange`. Each `LiveRange` instance bind events that might\n * have to be unbound. Use {@link module:engine/model/liverange~LiveRange#detach detach} whenever you don't need `LiveRange` anymore.\n */\nexport default class LiveRange extends Range {\n\t/**\n\t * Creates a live range.\n\t *\n\t * @see module:engine/model/range~Range\n\t */\n\tconstructor( start, end ) {\n\t\tsuper( start, end );\n\n\t\tbindWithDocument.call( this );\n\t}\n\n\t/**\n\t * Unbinds all events previously bound by `LiveRange`. Use it whenever you don't need `LiveRange` instance\n\t * anymore (i.e. when leaving scope in which it was declared or before re-assigning variable that was\n\t * referring to it).\n\t */\n\tdetach() {\n\t\tthis.stopListening();\n\t}\n\n\t/**\n\t * Checks whether this object is of the given.\n\t *\n\t *\t\tliveRange.is( 'range' ); // -> true\n\t *\t\tliveRange.is( 'model:range' ); // -> true\n\t *\t\tliveRange.is( 'liveRange' ); // -> true\n\t *\t\tliveRange.is( 'model:liveRange' ); // -> true\n\t *\n\t *\t\tliveRange.is( 'view:range' ); // -> false\n\t *\t\tliveRange.is( 'documentSelection' ); // -> false\n\t *\n\t * {@link module:engine/model/node~Node#is Check the entire list of model objects} which implement the `is()` method.\n\t *\n\t * @param {String} type\n\t * @returns {Boolean}\n\t */\n\tis( type ) {\n\t\treturn type === 'liveRange' || type === 'model:liveRange' ||\n\t\t\t// From super.is(). This is highly utilised method and cannot call super. See ckeditor/ckeditor5#6529.\n\t\t\ttype == 'range' || type === 'model:range';\n\t}\n\n\t/**\n\t * Creates a {@link module:engine/model/range~Range range instance} that is equal to this live range.\n\t *\n\t * @returns {module:engine/model/range~Range}\n\t */\n\ttoRange() {\n\t\treturn new Range( this.start, this.end );\n\t}\n\n\t/**\n\t * Creates a `LiveRange` instance that is equal to the given range.\n\t *\n\t * @param {module:engine/model/range~Range} range\n\t * @returns {module:engine/model/liverange~LiveRange}\n\t */\n\tstatic fromRange( range ) {\n\t\treturn new LiveRange( range.start, range.end );\n\t}\n\n\t/**\n\t * @see module:engine/model/range~Range._createIn\n\t * @static\n\t * @protected\n\t * @method module:engine/model/liverange~LiveRange._createIn\n\t * @param {module:engine/model/element~Element} element\n\t * @returns {module:engine/model/liverange~LiveRange}\n\t */\n\n\t/**\n\t * @see module:engine/model/range~Range._createOn\n\t * @static\n\t * @protected\n\t * @method module:engine/model/liverange~LiveRange._createOn\n\t * @param {module:engine/model/element~Element} element\n\t * @returns {module:engine/model/liverange~LiveRange}\n\t */\n\n\t/**\n\t * @see module:engine/model/range~Range._createFromPositionAndShift\n\t * @static\n\t * @protected\n\t * @method module:engine/model/liverange~LiveRange._createFromPositionAndShift\n\t * @param {module:engine/model/position~Position} position\n\t * @param {Number} shift\n\t * @returns {module:engine/model/liverange~LiveRange}\n\t */\n\n\t/**\n\t * Fired when `LiveRange` instance boundaries have changed due to changes in the\n\t * {@link module:engine/model/document~Document document}.\n\t *\n\t * @event change:range\n\t * @param {module:engine/model/range~Range} oldRange Range with start and end position equal to start and end position of this live\n\t * range before it got changed.\n\t * @param {Object} data Object with additional information about the change.\n\t * @param {module:engine/model/position~Position|null} data.deletionPosition Source position for remove and merge changes.\n\t * Available if the range was moved to the graveyard root, `null` otherwise.\n\t */\n\n\t/**\n\t * Fired when `LiveRange` instance boundaries have not changed after a change in {@link module:engine/model/document~Document document}\n\t * but the change took place inside the range, effectively changing its content.\n\t *\n\t * @event change:content\n\t * @param {module:engine/model/range~Range} range Range with start and end position equal to start and end position of\n\t * change range.\n\t * @param {Object} data Object with additional information about the change.\n\t * @param {null} data.deletionPosition Due to the nature of this event, this property is always set to `null`. It is passed\n\t * for compatibility with the {@link module:engine/model/liverange~LiveRange#event:change:range} event.\n\t */\n}\n\n// Binds this `LiveRange` to the {@link module:engine/model/document~Document document}\n// that owns this range's {@link module:engine/model/range~Range#root root}.\n//\n// @private\nfunction bindWithDocument() {\n\tthis.listenTo(\n\t\tthis.root.document.model,\n\t\t'applyOperation',\n\t\t( event, args ) => {\n\t\t\tconst operation = args[ 0 ];\n\n\t\t\tif ( !operation.isDocumentOperation ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttransform.call( this, operation );\n\t\t},\n\t\t{ priority: 'low' }\n\t);\n}\n\n// Updates this range accordingly to the updates applied to the model. Bases on change events.\n//\n// @private\n// @param {module:engine/model/operation/operation~Operation} operation Executed operation.\nfunction transform( operation ) {\n\t// Transform the range by the operation. Join the result ranges if needed.\n\tconst ranges = this.getTransformedByOperation( operation );\n\tconst result = Range._createFromRanges( ranges );\n\n\tconst boundariesChanged = !result.isEqual( this );\n\tconst contentChanged = doesOperationChangeRangeContent( this, operation );\n\n\tlet deletionPosition = null;\n\n\tif ( boundariesChanged ) {\n\t\t// If range boundaries have changed, fire `change:range` event.\n\t\t//\n\t\tif ( result.root.rootName == '$graveyard' ) {\n\t\t\t// If the range was moved to the graveyard root, set `deletionPosition`.\n\t\t\tif ( operation.type == 'remove' ) {\n\t\t\t\tdeletionPosition = operation.sourcePosition;\n\t\t\t} else {\n\t\t\t\t// Merge operation.\n\t\t\t\tdeletionPosition = operation.deletionPosition;\n\t\t\t}\n\t\t}\n\n\t\tconst oldRange = this.toRange();\n\n\t\tthis.start = result.start;\n\t\tthis.end = result.end;\n\n\t\tthis.fire( 'change:range', oldRange, { deletionPosition } );\n\t} else if ( contentChanged ) {\n\t\t// If range boundaries have not changed, but there was change inside the range, fire `change:content` event.\n\t\tthis.fire( 'change:content', this.toRange(), { deletionPosition } );\n\t}\n}\n\n// Checks whether given operation changes something inside the range (even if it does not change boundaries).\n//\n// @private\n// @param {module:engine/model/range~Range} range Range to check.\n// @param {module:engine/model/operation/operation~Operation} operation Executed operation.\n// @returns {Boolean}\nfunction doesOperationChangeRangeContent( range, operation ) {\n\tswitch ( operation.type ) {\n\t\tcase 'insert':\n\t\t\treturn range.containsPosition( operation.position );\n\t\tcase 'move':\n\t\tcase 'remove':\n\t\tcase 'reinsert':\n\t\tcase 'merge':\n\t\t\treturn range.containsPosition( operation.sourcePosition ) ||\n\t\t\t\trange.start.isEqual( operation.sourcePosition ) ||\n\t\t\t\trange.containsPosition( operation.targetPosition );\n\t\tcase 'split':\n\t\t\treturn range.containsPosition( operation.splitPosition ) || range.containsPosition( operation.insertionPosition );\n\t}\n\n\treturn false;\n}\n\nmix( LiveRange, EmitterMixin );\n","import e,{createContext as r,useContext as n,useMemo as t,useDebugValue as o,useRef as u,useEffect as a,useState as c,Fragment as l,createElement as i,useCallback as f}from\"react\";import{__RouterContext as s}from\"react-router\";import{matchPath as p,Redirect as d,Route as v}from\"react-router-dom\";var m=\"production\"===process.env.NODE_ENV,h=\"Invariant failed\";function b(e,r){if(!e)throw m?new Error(h):new Error(h+\": \"+(r||\"\"))}var y=r(null),E=r(null),g=r(null),P=r(null),O=function(e,r){void 0===e&&(e=[]),void 0===r&&(r=!1);var u=n(g),a=t(function(){return r?e.slice():(u||[]).concat(e)},[e,r]);return o(a.map(function(e){return e.name}).join(\" | \")),a};function w(e){var r=u(e);return a(function(){r.current=e}),o(r.current),r.current}function R(e){var r=u(!0),n=c(e),t=n[0],l=n[1];return a(function(){return function(){r.current=!1}},[]),o(t),[t,function(e){r.current&&l(e)}]}function x(e){var r=u(e),n=R(0)[1];return[r,function(e){r.current=\"function\"==typeof e?e(r.current):e,n(function(e){return e+1})}]}var j=function(r){var t=r.children,o=r.guards,u=r.ignoreGlobal,a=r.loading,c=r.error,l=n(s);b(!!l,\"You should not use <GuardProvider> outside a <Router>\");var i=w(l),f=O(o,u),p=n(P),d=n(y);return e.createElement(g.Provider,{value:f},e.createElement(P.Provider,{value:a||p},e.createElement(y.Provider,{value:c||d},e.createElement(E.Provider,{value:i},t))))};j.defaultProps={guards:[],ignoreGlobal:!1};var G=function(){return(G=Object.assign||function(e){for(var r,n=1,t=arguments.length;n<t;n++)for(var o in r=arguments[n])Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);return e}).apply(this,arguments)};function I(e,r,n,t){return new(n||(n=Promise))(function(o,u){function a(e){try{l(t.next(e))}catch(e){u(e)}}function c(e){try{l(t.throw(e))}catch(e){u(e)}}function l(e){e.done?o(e.value):new n(function(r){r(e.value)}).then(a,c)}l((t=t.apply(e,r||[])).next())})}function N(e,r){var n,t,o,u,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return u={next:c(0),throw:c(1),return:c(2)},\"function\"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function c(u){return function(c){return function(u){if(n)throw new TypeError(\"Generator is already executing.\");for(;a;)try{if(n=1,t&&(o=2&u[0]?t.return:u[0]?t.throw||((o=t.return)&&o.call(t),0):t.next)&&!(o=o.call(t,u[1])).done)return o;switch(t=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,t=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===u[0]||2===u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=r.call(e,a)}catch(e){u=[6,e],t=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}function S(r){var n=r.children,t=r.context,o=r.value;if(o){var u=t.Provider;return e.createElement(u,{value:o},n)}return e.createElement(l,null,n)}function T(r,n){return r?\"string\"!=typeof r&&\"boolean\"!=typeof r&&\"number\"!=typeof r?i(r,n||{}):e.createElement(l,null,r):null}var C=Object.freeze({CONTINUE:\"CONTINUE\",PROPS:\"PROPS\",REDIRECT:\"REDIRECT\"}),D=function(r){var o=r.children,u=r.component,c=r.meta,l=r.render,i=n(s),m=w(i),h=t(function(){return i.location.pathname!==m.location.pathname},[m,i]),b=n(E),O=n(g),j=n(P),S=n(y),D=t(function(){return!!(O&&O.length>0)},[O]),k=x(0),U=k[0],Y=k[1],z=x(!D),V=z[0],_=z[1],q=R(null),A=q[0],B=q[1],F=R(null),H=F[0],J=F[1],K=R({}),L=K[0],M=K[1],Q=f(function(){return U.current},[U]),W=f(function(e){var r=function(r){return function(n){return e({type:r,payload:n})}};return Object.assign(function(){return e({type:C.CONTINUE})},{props:r(C.PROPS),redirect:r(C.REDIRECT)})},[]),X=function(){return I(null,void 0,void 0,function(){var e,r,n,t,o,u,a,l;return N(this,function(f){switch(f.label){case 0:e=U.current,r={},n=null,t=null,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,I(null,void 0,void 0,function(){var e,r,n,t,o,u;return N(this,function(a){switch(a.label){case 0:if(e=0,r={},n=null,!O)return[3,3];a.label=1;case 1:return!n&&e<O.length?[4,(l=O[e],new Promise(function(e,r){return I(null,void 0,void 0,function(){var n,t;return N(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),n=G({},i,{meta:c||{}}),[4,l(n,b,W(e))];case 1:return o.sent(),[3,3];case 2:return t=o.sent(),r(t),[3,3];case 3:return[2]}})})}))]:[3,3];case 2:return t=a.sent(),o=t.type,(u=t.payload)&&(o===C.REDIRECT?n=u:o===C.PROPS&&(r=Object.assign(r,u))),e+=1,[3,1];case 3:return[2,{props:r,redirect:n}]}var l})})];case 2:return o=f.sent(),u=o.props,a=o.redirect,r=u,t=a,[3,4];case 3:return l=f.sent(),n=l.message||\"Not found.\",[3,4];case 4:return e===Q()&&(M(r),B(n),J(t),_(!0)),[2]}})})};if(a(function(){X()},[]),a(function(){h&&(Y(function(e){return e+1}),B(null),J(null),_(!D),D&&X())},[h]),h)return D?T(j,i):null;if(!V.current)return T(j,i);if(A)return T(S,G({},i,{error:A}));if(H){var Z=\"string\"==typeof H?H:H.pathname,$=i.match,ee=$.path,re=$.isExact;if(Z&&!p(Z,{path:ee,exact:re}))return e.createElement(d,{to:H})}return e.createElement(s.Provider,{value:G({},i,L)},e.createElement(v,{component:u,render:l},o))},k=function(r){var t=r.children,o=r.component,u=r.error,a=r.guards,c=r.ignoreGlobal,l=r.loading,i=r.meta,f=r.render,s=r.path,p=function(e,r){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(n[t]=e[t]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(t=Object.getOwnPropertySymbols(e);o<t.length;o++)r.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(n[t[o]]=e[t[o]])}return n}(r,[\"children\",\"component\",\"error\",\"guards\",\"ignoreGlobal\",\"loading\",\"meta\",\"render\",\"path\"]);b(!!n(g),\"You should not use <GuardedRoute> outside a <GuardProvider>\");var d=O(a,c);return e.createElement(v,G({path:s},p,{render:function(){return e.createElement(g.Provider,{value:d},e.createElement(S,{context:P,value:l},e.createElement(S,{context:y,value:u},e.createElement(D,{name:s,component:o,meta:i,render:f},t))))}}))};k.defaultProps={guards:[],ignoreGlobal:!1};export{j as GuardProvider,k as GuardedRoute};\n","import $$observable from 'symbol-observable';\n\n/**\n * These are private action types reserved by Redux.\n * For any unknown actions, you must return the current state.\n * If the current state is undefined, you must return the initial state.\n * Do not reference these action types directly in your code.\n */\nvar randomString = function randomString() {\n  return Math.random().toString(36).substring(7).split('').join('.');\n};\n\nvar ActionTypes = {\n  INIT: \"@@redux/INIT\" + randomString(),\n  REPLACE: \"@@redux/REPLACE\" + randomString(),\n  PROBE_UNKNOWN_ACTION: function PROBE_UNKNOWN_ACTION() {\n    return \"@@redux/PROBE_UNKNOWN_ACTION\" + randomString();\n  }\n};\n\n/**\n * @param {any} obj The object to inspect.\n * @returns {boolean} True if the argument appears to be a plain object.\n */\nfunction isPlainObject(obj) {\n  if (typeof obj !== 'object' || obj === null) return false;\n  var proto = obj;\n\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  return Object.getPrototypeOf(obj) === proto;\n}\n\n/**\n * Creates a Redux store that holds the state tree.\n * The only way to change the data in the store is to call `dispatch()` on it.\n *\n * There should only be a single store in your app. To specify how different\n * parts of the state tree respond to actions, you may combine several reducers\n * into a single reducer function by using `combineReducers`.\n *\n * @param {Function} reducer A function that returns the next state tree, given\n * the current state tree and the action to handle.\n *\n * @param {any} [preloadedState] The initial state. You may optionally specify it\n * to hydrate the state from the server in universal apps, or to restore a\n * previously serialized user session.\n * If you use `combineReducers` to produce the root reducer function, this must be\n * an object with the same shape as `combineReducers` keys.\n *\n * @param {Function} [enhancer] The store enhancer. You may optionally specify it\n * to enhance the store with third-party capabilities such as middleware,\n * time travel, persistence, etc. The only store enhancer that ships with Redux\n * is `applyMiddleware()`.\n *\n * @returns {Store} A Redux store that lets you read the state, dispatch actions\n * and subscribe to changes.\n */\n\nfunction createStore(reducer, preloadedState, enhancer) {\n  var _ref2;\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'function' || typeof enhancer === 'function' && typeof arguments[3] === 'function') {\n    throw new Error('It looks like you are passing several store enhancers to ' + 'createStore(). This is not supported. Instead, compose them ' + 'together to a single function.');\n  }\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'undefined') {\n    enhancer = preloadedState;\n    preloadedState = undefined;\n  }\n\n  if (typeof enhancer !== 'undefined') {\n    if (typeof enhancer !== 'function') {\n      throw new Error('Expected the enhancer to be a function.');\n    }\n\n    return enhancer(createStore)(reducer, preloadedState);\n  }\n\n  if (typeof reducer !== 'function') {\n    throw new Error('Expected the reducer to be a function.');\n  }\n\n  var currentReducer = reducer;\n  var currentState = preloadedState;\n  var currentListeners = [];\n  var nextListeners = currentListeners;\n  var isDispatching = false;\n  /**\n   * This makes a shallow copy of currentListeners so we can use\n   * nextListeners as a temporary list while dispatching.\n   *\n   * This prevents any bugs around consumers calling\n   * subscribe/unsubscribe in the middle of a dispatch.\n   */\n\n  function ensureCanMutateNextListeners() {\n    if (nextListeners === currentListeners) {\n      nextListeners = currentListeners.slice();\n    }\n  }\n  /**\n   * Reads the state tree managed by the store.\n   *\n   * @returns {any} The current state tree of your application.\n   */\n\n\n  function getState() {\n    if (isDispatching) {\n      throw new Error('You may not call store.getState() while the reducer is executing. ' + 'The reducer has already received the state as an argument. ' + 'Pass it down from the top reducer instead of reading it from the store.');\n    }\n\n    return currentState;\n  }\n  /**\n   * Adds a change listener. It will be called any time an action is dispatched,\n   * and some part of the state tree may potentially have changed. You may then\n   * call `getState()` to read the current state tree inside the callback.\n   *\n   * You may call `dispatch()` from a change listener, with the following\n   * caveats:\n   *\n   * 1. The subscriptions are snapshotted just before every `dispatch()` call.\n   * If you subscribe or unsubscribe while the listeners are being invoked, this\n   * will not have any effect on the `dispatch()` that is currently in progress.\n   * However, the next `dispatch()` call, whether nested or not, will use a more\n   * recent snapshot of the subscription list.\n   *\n   * 2. The listener should not expect to see all state changes, as the state\n   * might have been updated multiple times during a nested `dispatch()` before\n   * the listener is called. It is, however, guaranteed that all subscribers\n   * registered before the `dispatch()` started will be called with the latest\n   * state by the time it exits.\n   *\n   * @param {Function} listener A callback to be invoked on every dispatch.\n   * @returns {Function} A function to remove this change listener.\n   */\n\n\n  function subscribe(listener) {\n    if (typeof listener !== 'function') {\n      throw new Error('Expected the listener to be a function.');\n    }\n\n    if (isDispatching) {\n      throw new Error('You may not call store.subscribe() while the reducer is executing. ' + 'If you would like to be notified after the store has been updated, subscribe from a ' + 'component and invoke store.getState() in the callback to access the latest state. ' + 'See https://redux.js.org/api-reference/store#subscribelistener for more details.');\n    }\n\n    var isSubscribed = true;\n    ensureCanMutateNextListeners();\n    nextListeners.push(listener);\n    return function unsubscribe() {\n      if (!isSubscribed) {\n        return;\n      }\n\n      if (isDispatching) {\n        throw new Error('You may not unsubscribe from a store listener while the reducer is executing. ' + 'See https://redux.js.org/api-reference/store#subscribelistener for more details.');\n      }\n\n      isSubscribed = false;\n      ensureCanMutateNextListeners();\n      var index = nextListeners.indexOf(listener);\n      nextListeners.splice(index, 1);\n      currentListeners = null;\n    };\n  }\n  /**\n   * Dispatches an action. It is the only way to trigger a state change.\n   *\n   * The `reducer` function, used to create the store, will be called with the\n   * current state tree and the given `action`. Its return value will\n   * be considered the **next** state of the tree, and the change listeners\n   * will be notified.\n   *\n   * The base implementation only supports plain object actions. If you want to\n   * dispatch a Promise, an Observable, a thunk, or something else, you need to\n   * wrap your store creating function into the corresponding middleware. For\n   * example, see the documentation for the `redux-thunk` package. Even the\n   * middleware will eventually dispatch plain object actions using this method.\n   *\n   * @param {Object} action A plain object representing “what changed”. It is\n   * a good idea to keep actions serializable so you can record and replay user\n   * sessions, or use the time travelling `redux-devtools`. An action must have\n   * a `type` property which may not be `undefined`. It is a good idea to use\n   * string constants for action types.\n   *\n   * @returns {Object} For convenience, the same action object you dispatched.\n   *\n   * Note that, if you use a custom middleware, it may wrap `dispatch()` to\n   * return something else (for example, a Promise you can await).\n   */\n\n\n  function dispatch(action) {\n    if (!isPlainObject(action)) {\n      throw new Error('Actions must be plain objects. ' + 'Use custom middleware for async actions.');\n    }\n\n    if (typeof action.type === 'undefined') {\n      throw new Error('Actions may not have an undefined \"type\" property. ' + 'Have you misspelled a constant?');\n    }\n\n    if (isDispatching) {\n      throw new Error('Reducers may not dispatch actions.');\n    }\n\n    try {\n      isDispatching = true;\n      currentState = currentReducer(currentState, action);\n    } finally {\n      isDispatching = false;\n    }\n\n    var listeners = currentListeners = nextListeners;\n\n    for (var i = 0; i < listeners.length; i++) {\n      var listener = listeners[i];\n      listener();\n    }\n\n    return action;\n  }\n  /**\n   * Replaces the reducer currently used by the store to calculate the state.\n   *\n   * You might need this if your app implements code splitting and you want to\n   * load some of the reducers dynamically. You might also need this if you\n   * implement a hot reloading mechanism for Redux.\n   *\n   * @param {Function} nextReducer The reducer for the store to use instead.\n   * @returns {void}\n   */\n\n\n  function replaceReducer(nextReducer) {\n    if (typeof nextReducer !== 'function') {\n      throw new Error('Expected the nextReducer to be a function.');\n    }\n\n    currentReducer = nextReducer; // This action has a similiar effect to ActionTypes.INIT.\n    // Any reducers that existed in both the new and old rootReducer\n    // will receive the previous state. This effectively populates\n    // the new state tree with any relevant data from the old one.\n\n    dispatch({\n      type: ActionTypes.REPLACE\n    });\n  }\n  /**\n   * Interoperability point for observable/reactive libraries.\n   * @returns {observable} A minimal observable of state changes.\n   * For more information, see the observable proposal:\n   * https://github.com/tc39/proposal-observable\n   */\n\n\n  function observable() {\n    var _ref;\n\n    var outerSubscribe = subscribe;\n    return _ref = {\n      /**\n       * The minimal observable subscription method.\n       * @param {Object} observer Any object that can be used as an observer.\n       * The observer object should have a `next` method.\n       * @returns {subscription} An object with an `unsubscribe` method that can\n       * be used to unsubscribe the observable from the store, and prevent further\n       * emission of values from the observable.\n       */\n      subscribe: function subscribe(observer) {\n        if (typeof observer !== 'object' || observer === null) {\n          throw new TypeError('Expected the observer to be an object.');\n        }\n\n        function observeState() {\n          if (observer.next) {\n            observer.next(getState());\n          }\n        }\n\n        observeState();\n        var unsubscribe = outerSubscribe(observeState);\n        return {\n          unsubscribe: unsubscribe\n        };\n      }\n    }, _ref[$$observable] = function () {\n      return this;\n    }, _ref;\n  } // When a store is created, an \"INIT\" action is dispatched so that every\n  // reducer returns their initial state. This effectively populates\n  // the initial state tree.\n\n\n  dispatch({\n    type: ActionTypes.INIT\n  });\n  return _ref2 = {\n    dispatch: dispatch,\n    subscribe: subscribe,\n    getState: getState,\n    replaceReducer: replaceReducer\n  }, _ref2[$$observable] = observable, _ref2;\n}\n\n/**\n * Prints a warning in the console if it exists.\n *\n * @param {String} message The warning message.\n * @returns {void}\n */\nfunction warning(message) {\n  /* eslint-disable no-console */\n  if (typeof console !== 'undefined' && typeof console.error === 'function') {\n    console.error(message);\n  }\n  /* eslint-enable no-console */\n\n\n  try {\n    // This error was thrown as a convenience so that if you enable\n    // \"break on all exceptions\" in your console,\n    // it would pause the execution at this line.\n    throw new Error(message);\n  } catch (e) {} // eslint-disable-line no-empty\n\n}\n\nfunction getUndefinedStateErrorMessage(key, action) {\n  var actionType = action && action.type;\n  var actionDescription = actionType && \"action \\\"\" + String(actionType) + \"\\\"\" || 'an action';\n  return \"Given \" + actionDescription + \", reducer \\\"\" + key + \"\\\" returned undefined. \" + \"To ignore an action, you must explicitly return the previous state. \" + \"If you want this reducer to hold no value, you can return null instead of undefined.\";\n}\n\nfunction getUnexpectedStateShapeWarningMessage(inputState, reducers, action, unexpectedKeyCache) {\n  var reducerKeys = Object.keys(reducers);\n  var argumentName = action && action.type === ActionTypes.INIT ? 'preloadedState argument passed to createStore' : 'previous state received by the reducer';\n\n  if (reducerKeys.length === 0) {\n    return 'Store does not have a valid reducer. Make sure the argument passed ' + 'to combineReducers is an object whose values are reducers.';\n  }\n\n  if (!isPlainObject(inputState)) {\n    return \"The \" + argumentName + \" has unexpected type of \\\"\" + {}.toString.call(inputState).match(/\\s([a-z|A-Z]+)/)[1] + \"\\\". Expected argument to be an object with the following \" + (\"keys: \\\"\" + reducerKeys.join('\", \"') + \"\\\"\");\n  }\n\n  var unexpectedKeys = Object.keys(inputState).filter(function (key) {\n    return !reducers.hasOwnProperty(key) && !unexpectedKeyCache[key];\n  });\n  unexpectedKeys.forEach(function (key) {\n    unexpectedKeyCache[key] = true;\n  });\n  if (action && action.type === ActionTypes.REPLACE) return;\n\n  if (unexpectedKeys.length > 0) {\n    return \"Unexpected \" + (unexpectedKeys.length > 1 ? 'keys' : 'key') + \" \" + (\"\\\"\" + unexpectedKeys.join('\", \"') + \"\\\" found in \" + argumentName + \". \") + \"Expected to find one of the known reducer keys instead: \" + (\"\\\"\" + reducerKeys.join('\", \"') + \"\\\". Unexpected keys will be ignored.\");\n  }\n}\n\nfunction assertReducerShape(reducers) {\n  Object.keys(reducers).forEach(function (key) {\n    var reducer = reducers[key];\n    var initialState = reducer(undefined, {\n      type: ActionTypes.INIT\n    });\n\n    if (typeof initialState === 'undefined') {\n      throw new Error(\"Reducer \\\"\" + key + \"\\\" returned undefined during initialization. \" + \"If the state passed to the reducer is undefined, you must \" + \"explicitly return the initial state. The initial state may \" + \"not be undefined. If you don't want to set a value for this reducer, \" + \"you can use null instead of undefined.\");\n    }\n\n    if (typeof reducer(undefined, {\n      type: ActionTypes.PROBE_UNKNOWN_ACTION()\n    }) === 'undefined') {\n      throw new Error(\"Reducer \\\"\" + key + \"\\\" returned undefined when probed with a random type. \" + (\"Don't try to handle \" + ActionTypes.INIT + \" or other actions in \\\"redux/*\\\" \") + \"namespace. They are considered private. Instead, you must return the \" + \"current state for any unknown actions, unless it is undefined, \" + \"in which case you must return the initial state, regardless of the \" + \"action type. The initial state may not be undefined, but can be null.\");\n    }\n  });\n}\n/**\n * Turns an object whose values are different reducer functions, into a single\n * reducer function. It will call every child reducer, and gather their results\n * into a single state object, whose keys correspond to the keys of the passed\n * reducer functions.\n *\n * @param {Object} reducers An object whose values correspond to different\n * reducer functions that need to be combined into one. One handy way to obtain\n * it is to use ES6 `import * as reducers` syntax. The reducers may never return\n * undefined for any action. Instead, they should return their initial state\n * if the state passed to them was undefined, and the current state for any\n * unrecognized action.\n *\n * @returns {Function} A reducer function that invokes every reducer inside the\n * passed object, and builds a state object with the same shape.\n */\n\n\nfunction combineReducers(reducers) {\n  var reducerKeys = Object.keys(reducers);\n  var finalReducers = {};\n\n  for (var i = 0; i < reducerKeys.length; i++) {\n    var key = reducerKeys[i];\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof reducers[key] === 'undefined') {\n        warning(\"No reducer provided for key \\\"\" + key + \"\\\"\");\n      }\n    }\n\n    if (typeof reducers[key] === 'function') {\n      finalReducers[key] = reducers[key];\n    }\n  }\n\n  var finalReducerKeys = Object.keys(finalReducers); // This is used to make sure we don't warn about the same\n  // keys multiple times.\n\n  var unexpectedKeyCache;\n\n  if (process.env.NODE_ENV !== 'production') {\n    unexpectedKeyCache = {};\n  }\n\n  var shapeAssertionError;\n\n  try {\n    assertReducerShape(finalReducers);\n  } catch (e) {\n    shapeAssertionError = e;\n  }\n\n  return function combination(state, action) {\n    if (state === void 0) {\n      state = {};\n    }\n\n    if (shapeAssertionError) {\n      throw shapeAssertionError;\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      var warningMessage = getUnexpectedStateShapeWarningMessage(state, finalReducers, action, unexpectedKeyCache);\n\n      if (warningMessage) {\n        warning(warningMessage);\n      }\n    }\n\n    var hasChanged = false;\n    var nextState = {};\n\n    for (var _i = 0; _i < finalReducerKeys.length; _i++) {\n      var _key = finalReducerKeys[_i];\n      var reducer = finalReducers[_key];\n      var previousStateForKey = state[_key];\n      var nextStateForKey = reducer(previousStateForKey, action);\n\n      if (typeof nextStateForKey === 'undefined') {\n        var errorMessage = getUndefinedStateErrorMessage(_key, action);\n        throw new Error(errorMessage);\n      }\n\n      nextState[_key] = nextStateForKey;\n      hasChanged = hasChanged || nextStateForKey !== previousStateForKey;\n    }\n\n    hasChanged = hasChanged || finalReducerKeys.length !== Object.keys(state).length;\n    return hasChanged ? nextState : state;\n  };\n}\n\nfunction bindActionCreator(actionCreator, dispatch) {\n  return function () {\n    return dispatch(actionCreator.apply(this, arguments));\n  };\n}\n/**\n * Turns an object whose values are action creators, into an object with the\n * same keys, but with every function wrapped into a `dispatch` call so they\n * may be invoked directly. This is just a convenience method, as you can call\n * `store.dispatch(MyActionCreators.doSomething())` yourself just fine.\n *\n * For convenience, you can also pass an action creator as the first argument,\n * and get a dispatch wrapped function in return.\n *\n * @param {Function|Object} actionCreators An object whose values are action\n * creator functions. One handy way to obtain it is to use ES6 `import * as`\n * syntax. You may also pass a single function.\n *\n * @param {Function} dispatch The `dispatch` function available on your Redux\n * store.\n *\n * @returns {Function|Object} The object mimicking the original object, but with\n * every action creator wrapped into the `dispatch` call. If you passed a\n * function as `actionCreators`, the return value will also be a single\n * function.\n */\n\n\nfunction bindActionCreators(actionCreators, dispatch) {\n  if (typeof actionCreators === 'function') {\n    return bindActionCreator(actionCreators, dispatch);\n  }\n\n  if (typeof actionCreators !== 'object' || actionCreators === null) {\n    throw new Error(\"bindActionCreators expected an object or a function, instead received \" + (actionCreators === null ? 'null' : typeof actionCreators) + \". \" + \"Did you write \\\"import ActionCreators from\\\" instead of \\\"import * as ActionCreators from\\\"?\");\n  }\n\n  var boundActionCreators = {};\n\n  for (var key in actionCreators) {\n    var actionCreator = actionCreators[key];\n\n    if (typeof actionCreator === 'function') {\n      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch);\n    }\n  }\n\n  return boundActionCreators;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    keys.push.apply(keys, Object.getOwnPropertySymbols(object));\n  }\n\n  if (enumerableOnly) keys = keys.filter(function (sym) {\n    return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n  });\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(source, true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(source).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\n/**\n * Composes single-argument functions from right to left. The rightmost\n * function can take multiple arguments as it provides the signature for\n * the resulting composite function.\n *\n * @param {...Function} funcs The functions to compose.\n * @returns {Function} A function obtained by composing the argument functions\n * from right to left. For example, compose(f, g, h) is identical to doing\n * (...args) => f(g(h(...args))).\n */\nfunction compose() {\n  for (var _len = arguments.length, funcs = new Array(_len), _key = 0; _key < _len; _key++) {\n    funcs[_key] = arguments[_key];\n  }\n\n  if (funcs.length === 0) {\n    return function (arg) {\n      return arg;\n    };\n  }\n\n  if (funcs.length === 1) {\n    return funcs[0];\n  }\n\n  return funcs.reduce(function (a, b) {\n    return function () {\n      return a(b.apply(void 0, arguments));\n    };\n  });\n}\n\n/**\n * Creates a store enhancer that applies middleware to the dispatch method\n * of the Redux store. This is handy for a variety of tasks, such as expressing\n * asynchronous actions in a concise manner, or logging every action payload.\n *\n * See `redux-thunk` package as an example of the Redux middleware.\n *\n * Because middleware is potentially asynchronous, this should be the first\n * store enhancer in the composition chain.\n *\n * Note that each middleware will be given the `dispatch` and `getState` functions\n * as named arguments.\n *\n * @param {...Function} middlewares The middleware chain to be applied.\n * @returns {Function} A store enhancer applying the middleware.\n */\n\nfunction applyMiddleware() {\n  for (var _len = arguments.length, middlewares = new Array(_len), _key = 0; _key < _len; _key++) {\n    middlewares[_key] = arguments[_key];\n  }\n\n  return function (createStore) {\n    return function () {\n      var store = createStore.apply(void 0, arguments);\n\n      var _dispatch = function dispatch() {\n        throw new Error('Dispatching while constructing your middleware is not allowed. ' + 'Other middleware would not be applied to this dispatch.');\n      };\n\n      var middlewareAPI = {\n        getState: store.getState,\n        dispatch: function dispatch() {\n          return _dispatch.apply(void 0, arguments);\n        }\n      };\n      var chain = middlewares.map(function (middleware) {\n        return middleware(middlewareAPI);\n      });\n      _dispatch = compose.apply(void 0, chain)(store.dispatch);\n      return _objectSpread2({}, store, {\n        dispatch: _dispatch\n      });\n    };\n  };\n}\n\n/*\n * This is a dummy function to check if the function name has been altered by minification.\n * If the function has been minified and NODE_ENV !== 'production', warn the user.\n */\n\nfunction isCrushed() {}\n\nif (process.env.NODE_ENV !== 'production' && typeof isCrushed.name === 'string' && isCrushed.name !== 'isCrushed') {\n  warning('You are currently using minified code outside of NODE_ENV === \"production\". ' + 'This means that you are running a slower development build of Redux. ' + 'You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify ' + 'or setting mode to production in webpack (https://webpack.js.org/concepts/mode/) ' + 'to ensure you have the correct code for your production build.');\n}\n\nexport { ActionTypes as __DO_NOT_USE__ActionTypes, applyMiddleware, bindActionCreators, combineReducers, compose, createStore };\n","import React from \"react\";\nimport { Router } from \"react-router\";\nimport { createBrowserHistory as createHistory } from \"history\";\nimport PropTypes from \"prop-types\";\nimport warning from \"tiny-warning\";\n\n/**\n * The public API for a <Router> that uses HTML5 history.\n */\nclass BrowserRouter extends React.Component {\n  history = createHistory(this.props);\n\n  render() {\n    return <Router history={this.history} children={this.props.children} />;\n  }\n}\n\nif (__DEV__) {\n  BrowserRouter.propTypes = {\n    basename: PropTypes.string,\n    children: PropTypes.node,\n    forceRefresh: PropTypes.bool,\n    getUserConfirmation: PropTypes.func,\n    keyLength: PropTypes.number\n  };\n\n  BrowserRouter.prototype.componentDidMount = function() {\n    warning(\n      !this.props.history,\n      \"<BrowserRouter> ignores the history prop. To use a custom history, \" +\n        \"use `import { Router }` instead of `import { BrowserRouter as Router }`.\"\n    );\n  };\n}\n\nexport default BrowserRouter;\n","import React from \"react\";\nimport { Router } from \"react-router\";\nimport { createHashHistory as createHistory } from \"history\";\nimport PropTypes from \"prop-types\";\nimport warning from \"tiny-warning\";\n\n/**\n * The public API for a <Router> that uses window.location.hash.\n */\nclass HashRouter extends React.Component {\n  history = createHistory(this.props);\n\n  render() {\n    return <Router history={this.history} children={this.props.children} />;\n  }\n}\n\nif (__DEV__) {\n  HashRouter.propTypes = {\n    basename: PropTypes.string,\n    children: PropTypes.node,\n    getUserConfirmation: PropTypes.func,\n    hashType: PropTypes.oneOf([\"hashbang\", \"noslash\", \"slash\"])\n  };\n\n  HashRouter.prototype.componentDidMount = function() {\n    warning(\n      !this.props.history,\n      \"<HashRouter> ignores the history prop. To use a custom history, \" +\n        \"use `import { Router }` instead of `import { HashRouter as Router }`.\"\n    );\n  };\n}\n\nexport default HashRouter;\n","import { createLocation } from \"history\";\n\nexport const resolveToLocation = (to, currentLocation) =>\n  typeof to === \"function\" ? to(currentLocation) : to;\n\nexport const normalizeToLocation = (to, currentLocation) => {\n  return typeof to === \"string\"\n    ? createLocation(to, null, null, currentLocation)\n    : to;\n};\n","import React from \"react\";\nimport { __RouterContext as RouterContext } from \"react-router\";\nimport PropTypes from \"prop-types\";\nimport invariant from \"tiny-invariant\";\nimport {\n  resolveToLocation,\n  normalizeToLocation\n} from \"./utils/locationUtils.js\";\n\n// React 15 compat\nconst forwardRefShim = C => C;\nlet { forwardRef } = React;\nif (typeof forwardRef === \"undefined\") {\n  forwardRef = forwardRefShim;\n}\n\nfunction isModifiedEvent(event) {\n  return !!(event.metaKey || event.altKey || event.ctrlKey || event.shiftKey);\n}\n\nconst LinkAnchor = forwardRef(\n  (\n    {\n      innerRef, // TODO: deprecate\n      navigate,\n      onClick,\n      ...rest\n    },\n    forwardedRef\n  ) => {\n    const { target } = rest;\n\n    let props = {\n      ...rest,\n      onClick: event => {\n        try {\n          if (onClick) onClick(event);\n        } catch (ex) {\n          event.preventDefault();\n          throw ex;\n        }\n\n        if (\n          !event.defaultPrevented && // onClick prevented default\n          event.button === 0 && // ignore everything but left clicks\n          (!target || target === \"_self\") && // let browser handle \"target=_blank\" etc.\n          !isModifiedEvent(event) // ignore clicks with modifier keys\n        ) {\n          event.preventDefault();\n          navigate();\n        }\n      }\n    };\n\n    // React 15 compat\n    if (forwardRefShim !== forwardRef) {\n      props.ref = forwardedRef || innerRef;\n    } else {\n      props.ref = innerRef;\n    }\n\n    /* eslint-disable-next-line jsx-a11y/anchor-has-content */\n    return <a {...props} />;\n  }\n);\n\nif (__DEV__) {\n  LinkAnchor.displayName = \"LinkAnchor\";\n}\n\n/**\n * The public API for rendering a history-aware <a>.\n */\nconst Link = forwardRef(\n  (\n    {\n      component = LinkAnchor,\n      replace,\n      to,\n      innerRef, // TODO: deprecate\n      ...rest\n    },\n    forwardedRef\n  ) => {\n    return (\n      <RouterContext.Consumer>\n        {context => {\n          invariant(context, \"You should not use <Link> outside a <Router>\");\n\n          const { history } = context;\n\n          const location = normalizeToLocation(\n            resolveToLocation(to, context.location),\n            context.location\n          );\n\n          const href = location ? history.createHref(location) : \"\";\n          const props = {\n            ...rest,\n            href,\n            navigate() {\n              const location = resolveToLocation(to, context.location);\n              const method = replace ? history.replace : history.push;\n\n              method(location);\n            }\n          };\n\n          // React 15 compat\n          if (forwardRefShim !== forwardRef) {\n            props.ref = forwardedRef || innerRef;\n          } else {\n            props.innerRef = innerRef;\n          }\n\n          return React.createElement(component, props);\n        }}\n      </RouterContext.Consumer>\n    );\n  }\n);\n\nif (__DEV__) {\n  const toType = PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.object,\n    PropTypes.func\n  ]);\n  const refType = PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.func,\n    PropTypes.shape({ current: PropTypes.any })\n  ]);\n\n  Link.displayName = \"Link\";\n\n  Link.propTypes = {\n    innerRef: refType,\n    onClick: PropTypes.func,\n    replace: PropTypes.bool,\n    target: PropTypes.string,\n    to: toType.isRequired\n  };\n}\n\nexport default Link;\n","import React from \"react\";\nimport { __RouterContext as RouterContext, matchPath } from \"react-router\";\nimport PropTypes from \"prop-types\";\nimport invariant from \"tiny-invariant\";\nimport Link from \"./Link.js\";\nimport {\n  resolveToLocation,\n  normalizeToLocation\n} from \"./utils/locationUtils.js\";\n\n// React 15 compat\nconst forwardRefShim = C => C;\nlet { forwardRef } = React;\nif (typeof forwardRef === \"undefined\") {\n  forwardRef = forwardRefShim;\n}\n\nfunction joinClassnames(...classnames) {\n  return classnames.filter(i => i).join(\" \");\n}\n\n/**\n * A <Link> wrapper that knows if it's \"active\" or not.\n */\nconst NavLink = forwardRef(\n  (\n    {\n      \"aria-current\": ariaCurrent = \"page\",\n      activeClassName = \"active\",\n      activeStyle,\n      className: classNameProp,\n      exact,\n      isActive: isActiveProp,\n      location: locationProp,\n      sensitive,\n      strict,\n      style: styleProp,\n      to,\n      innerRef, // TODO: deprecate\n      ...rest\n    },\n    forwardedRef\n  ) => {\n    return (\n      <RouterContext.Consumer>\n        {context => {\n          invariant(context, \"You should not use <NavLink> outside a <Router>\");\n\n          const currentLocation = locationProp || context.location;\n          const toLocation = normalizeToLocation(\n            resolveToLocation(to, currentLocation),\n            currentLocation\n          );\n          const { pathname: path } = toLocation;\n          // Regex taken from: https://github.com/pillarjs/path-to-regexp/blob/master/index.js#L202\n          const escapedPath =\n            path && path.replace(/([.+*?=^!:${}()[\\]|/\\\\])/g, \"\\\\$1\");\n\n          const match = escapedPath\n            ? matchPath(currentLocation.pathname, {\n                path: escapedPath,\n                exact,\n                sensitive,\n                strict\n              })\n            : null;\n          const isActive = !!(isActiveProp\n            ? isActiveProp(match, currentLocation)\n            : match);\n\n          const className = isActive\n            ? joinClassnames(classNameProp, activeClassName)\n            : classNameProp;\n          const style = isActive ? { ...styleProp, ...activeStyle } : styleProp;\n\n          const props = {\n            \"aria-current\": (isActive && ariaCurrent) || null,\n            className,\n            style,\n            to: toLocation,\n            ...rest\n          };\n\n          // React 15 compat\n          if (forwardRefShim !== forwardRef) {\n            props.ref = forwardedRef || innerRef;\n          } else {\n            props.innerRef = innerRef;\n          }\n\n          return <Link {...props} />;\n        }}\n      </RouterContext.Consumer>\n    );\n  }\n);\n\nif (__DEV__) {\n  NavLink.displayName = \"NavLink\";\n\n  const ariaCurrentType = PropTypes.oneOf([\n    \"page\",\n    \"step\",\n    \"location\",\n    \"date\",\n    \"time\",\n    \"true\"\n  ]);\n\n  NavLink.propTypes = {\n    ...Link.propTypes,\n    \"aria-current\": ariaCurrentType,\n    activeClassName: PropTypes.string,\n    activeStyle: PropTypes.object,\n    className: PropTypes.string,\n    exact: PropTypes.bool,\n    isActive: PropTypes.func,\n    location: PropTypes.object,\n    sensitive: PropTypes.bool,\n    strict: PropTypes.bool,\n    style: PropTypes.object\n  };\n}\n\nexport default NavLink;\n","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import baseGetTag from './_baseGetTag.js';\nimport isObject from './isObject.js';\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nexport default isFunction;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nexport default isPrototype;\n","import defineProperty from './_defineProperty.js';\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\nexport default baseAssignValue;\n","import baseAssignValue from './_baseAssignValue.js';\nimport eq from './eq.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nexport default assignValue;\n","/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nexport default baseUnary;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\nexport default isIndex;\n","import arrayWithoutHoles from \"../arrayWithoutHoles/_index.mjs\";\nimport iterableToArray from \"../iterableToArray/_index.mjs\";\nimport unsupportedIterableToArray from \"../unsupportedIterableToArray/_index.mjs\";\nimport nonIterableSpread from \"../nonIterableSpread/_index.mjs\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"../arrayLikeToArray/_index.mjs\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import baseGetTag from './_baseGetTag.js';\nimport isLength from './isLength.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nexport default baseIsTypedArray;\n","import baseIsTypedArray from './_baseIsTypedArray.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nexport default isTypedArray;\n","import getNative from './_getNative.js';\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nexport default defineProperty;\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/priorities\n */\n\n/**\n * String representing a priority value.\n *\n * @typedef {'highest'|'high'|'normal'|'low'|'lowest'} module:utils/priorities~PriorityString\n */\n\n/**\n * Provides group of constants to use instead of hardcoding numeric priority values.\n *\n * @namespace\n */\nconst priorities = {\n\t/**\n\t * Converts a string with priority name to it's numeric value. If `Number` is given, it just returns it.\n\t *\n\t * @static\n\t * @param {module:utils/priorities~PriorityString|Number} priority Priority to convert.\n\t * @returns {Number} Converted priority.\n\t */\n\tget( priority ) {\n\t\tif ( typeof priority != 'number' ) {\n\t\t\treturn this[ priority ] || this.normal;\n\t\t} else {\n\t\t\treturn priority;\n\t\t}\n\t},\n\n\thighest: 100000,\n\thigh: 1000,\n\tnormal: 0,\n\tlow: -1000,\n\tlowest: -100000\n};\n\nexport default priorities;\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/version\n */\n\n/* globals window, global */\n\nimport CKEditorError from './ckeditorerror';\n\nconst version = '25.0.0';\n\n/* istanbul ignore next */\nconst windowOrGlobal = typeof window === 'object' ? window : global;\n\n/* istanbul ignore next */\nif ( windowOrGlobal.CKEDITOR_VERSION ) {\n\t/**\n\t * This error is thrown when due to a mistake in how CKEditor 5 was installed or initialized, some\n\t * of its modules were duplicated (evaluated and executed twice). Module duplication leads to inevitable runtime\n\t * errors.\n\t *\n\t * There are many situations in which some modules can be loaded twice. In the worst case scenario,\n\t * you may need to check your project for each of these issues and fix them all.\n\t *\n\t * # Trying to add a plugin to an existing build\n\t *\n\t * If you import an existing CKEditor 5 build and a plugin like this:\n\t *\n\t *\t\timport ClassicEditor from '@ckeditor/ckeditor5-build-classic';\n\t *\t\timport Highlight from '@ckeditor/ckeditor5-highlight/src/highlight';\n\t *\n\t * Then your project loads some CKEditor 5 packages twice. How does it happen?\n\t *\n\t * The build package contains a file which is already compiled with webpack. This means\n\t * that it contains all the necessary code from e.g. `@ckeditor/ckeditor5-engine` and `@ckeditor/ckeditor5-utils`.\n\t *\n\t * However, the `Highlight` plugin imports some of the modules from these packages, too. If you ask webpack to\n\t * build such a project, you will end up with the modules being included (and run) twice &mdash; first, because they are\n\t * included inside the build package, and second, because they are required by the `Highlight` plugin.\n\t *\n\t * Therefore, **you must never add plugins to an existing build** unless your plugin has no dependencies.\n\t *\n\t * Adding plugins to a build is done by taking the source version of this build (so, before it was built with webpack)\n\t * and adding plugins there. In this situation, webpack will know that it only needs to load each plugin once.\n\t *\n\t * Read more in the {@glink builds/guides/integration/installing-plugins \"Installing plugins\"} guide.\n\t *\n\t * # Confused an editor build with an editor implementation\n\t *\n\t * This scenario is very similar to the previous one, but has a different origin.\n\t *\n\t * Let's assume that you wanted to use CKEditor 5 from source, as explained in the\n\t * {@glink builds/guides/integration/advanced-setup#scenario-2-building-from-source \"Building from source\"} section\n\t * or in the {@glink framework/guides/quick-start \"Quick start\"} guide of CKEditor 5 Framework.\n\t *\n\t * The correct way to do so is to import an editor and plugins and run them together like this:\n\t *\n\t *\t\timport ClassicEditor from '@ckeditor/ckeditor5-editor-classic/src/classiceditor';\n\t *\t\timport Essentials from '@ckeditor/ckeditor5-essentials/src/essentials';\n\t *\t\timport Paragraph from '@ckeditor/ckeditor5-paragraph/src/paragraph';\n\t *\t\timport Bold from '@ckeditor/ckeditor5-basic-styles/src/bold';\n\t *\t\timport Italic from '@ckeditor/ckeditor5-basic-styles/src/italic';\n\t *\n\t *\t\tClassicEditor\n\t *\t\t\t.create( document.querySelector( '#editor' ), {\n\t *\t\t\t\tplugins: [ Essentials, Paragraph, Bold, Italic ],\n\t *\t\t\t\ttoolbar: [ 'bold', 'italic' ]\n\t *\t\t\t} )\n\t *\t\t\t.then( editor => {\n\t *\t\t\t\tconsole.log( 'Editor was initialized', editor );\n\t *\t\t\t} )\n\t *\t\t\t.catch( error => {\n\t *\t\t\t\tconsole.error( error.stack );\n\t *\t\t\t} );\n\t *\n\t * However, you might have mistakenly imported a build instead of the source `ClassicEditor`. In this case\n\t * your imports will look like this:\n\t *\n\t *\t\timport ClassicEditor from '@ckeditor/ckeditor5-build-classic';\n\t *\t\timport Essentials from '@ckeditor/ckeditor5-essentials/src/essentials';\n\t *\t\timport Paragraph from '@ckeditor/ckeditor5-paragraph/src/paragraph';\n\t *\t\timport Bold from '@ckeditor/ckeditor5-basic-styles/src/bold';\n\t *\t\timport Italic from '@ckeditor/ckeditor5-basic-styles/src/italic';\n\t *\n\t * This creates the same situation as in the previous section because you use a build together with source plugins.\n\t *\n\t * Remember: `@ckeditor/ckeditor5-build-*` packages contain editor builds and `@ckeditor/ckeditor5-editor-*` contain source editors.\n\t *\n\t * # Loading two or more builds on one page\n\t *\n\t * If you use CKEditor 5 builds, you might have loaded two (or more) `ckeditor.js` files on one web page.\n\t * Check your web page for duplicated `<script>` elements or make sure your page builder/bundler includes CKEditor only once.\n\t *\n\t * If you want to use two different types of editors at once, see the\n\t * {@glink builds/guides/integration/advanced-setup#scenario-3-using-two-different-editors \"Using two different editors\"}\n\t * section.\n\t *\n\t * # Using outdated packages\n\t *\n\t * Building CKEditor 5 from source requires using multiple npm packages. These packages have their dependencies\n\t * to other packages. If you use the latest version of, for example, `@ckeditor/ckeditor5-editor-classic` with\n\t * an outdated version of `@ckeditor/ckeditor5-image`, npm or yarn will need to install two different versions of\n\t * `@ckeditor/ckeditor5-core` because `@ckeditor/ckeditor5-editor-classic` and `@ckeditor/ckeditor5-image` may require\n\t * different versions of the core package.\n\t *\n\t * The solution to this issue is to update all packages to their latest version. We recommend\n\t * using tools like [`npm-check-updates`](https://www.npmjs.com/package/npm-check-updates) which simplify this process.\n\t *\n\t * # Conflicting version of dependencies\n\t *\n\t * This is a special case of the previous scenario. If you use CKEditor 5 with some third-party plugins,\n\t * it may happen that even if you use the latest versions of the official packages and the latest version of\n\t * these third-party packages, there will be a conflict between some of their dependencies.\n\t *\n\t * Such a problem can be resolved by either downgrading CKEditor 5 packages (which we do not recommend) or\n\t * asking the author of the third-party package to upgrade its depdendencies (or forking their project and doing this yourself).\n\t *\n\t * **Note:** All official CKEditor 5 packages (excluding integrations and `ckeditor5-dev-*` packages) are released in the\n\t * same major version. This is &mdash; in the `x.y.z`, the `x` is the same for all packages. This is the simplest way to check\n\t * whether you use packages coming from the same CKEditor 5 version. You can read more about versioning in the\n\t * {@glink framework/guides/support/versioning-policy Versioning policy} guide.\n\t *\n\t * # Packages were duplicated in `node_modules`\n\t *\n\t * In some situations, especially when calling `npm install` multiple times, it may happen\n\t * that npm will not correctly \"deduplicate\" packages.\n\t *\n\t * Normally, npm deduplicates all packages so, for example, `@ckeditor/ckeditor5-core` is installed only once in `node_modules/`.\n\t * However, it is known to fail to do so from time to time.\n\t *\n\t * We recommend checking if any of the steps listed below help:\n\t *\n\t * * `rm -rf node_modules && npm install` to make sure you have a clean `node_modules/` directory. This step\n\t * is known to help in most cases.\n\t * * If you use `yarn.lock` or `package-lock.json`, remove it before `npm install`.\n\t * * Check whether all CKEditor 5 packages are up to date and reinstall them\n\t * if you changed anything (`rm -rf node_modules && npm install`).\n\t *\n\t * If all packages are correct and compatible with each other, the steps above are known to help. If not, you may\n\t * try to check with `npm ls` how many times packages like `@ckeditor/ckeditor5-core`, `@ckeditor/ckeditor5-engine` and\n\t *`@ckeditor/ckeditor5-utils` are installed. If more than once, verify which package causes that.\n\t *\n\t * @error ckeditor-duplicated-modules\n\t */\n\tthrow new CKEditorError(\n\t\t'ckeditor-duplicated-modules',\n\t\tnull\n\t);\n} else {\n\twindowOrGlobal.CKEDITOR_VERSION = version;\n}\n","export { default } from \"../assertThisInitialized/_index.mjs\"","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nexport default baseIsArguments;\n","import baseIsArguments from './_baseIsArguments.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nexport default isArguments;\n","var domToReact = require('./lib/dom-to-react');\nvar attributesToProps = require('./lib/attributes-to-props');\nvar htmlToDOM = require('html-dom-parser');\n\nvar domParserOptions = { lowerCaseAttributeNames: false };\n\n/**\n * Converts HTML string to React elements.\n *\n * @param  {String}   html                    - HTML string.\n * @param  {Object}   [options]               - Parser options.\n * @param  {Object}   [options.htmlparser2]   - htmlparser2 options.\n * @param  {Object}   [options.library]       - Library for React, Preact, etc.\n * @param  {Function} [options.replace]       - Replace method.\n * @return {JSX.Element|JSX.Element[]|String} - React element(s), empty array, or string.\n */\nfunction HTMLReactParser(html, options) {\n  if (typeof html !== 'string') {\n    throw new TypeError('First argument must be a string');\n  }\n  if (html === '') {\n    return [];\n  }\n  options = options || {};\n  return domToReact(\n    htmlToDOM(html, options.htmlparser2 || domParserOptions),\n    options\n  );\n}\n\nHTMLReactParser.domToReact = domToReact;\nHTMLReactParser.htmlToDOM = htmlToDOM;\nHTMLReactParser.attributesToProps = attributesToProps;\n\n// support CommonJS and ES Modules\nmodule.exports = HTMLReactParser;\nmodule.exports.default = HTMLReactParser;\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","module.exports = function(originalModule) {\n\tif (!originalModule.webpackPolyfill) {\n\t\tvar module = Object.create(originalModule);\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"exports\", {\n\t\t\tenumerable: true\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-is.production.min.js');\n} else {\n  module.exports = require('./cjs/react-is.development.js');\n}\n","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import arrayLikeToArray from \"../arrayLikeToArray/_index.mjs\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nexport default freeGlobal;\n","import root from './_root.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined;\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var length = buffer.length,\n      result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);\n\n  buffer.copy(result);\n  return result;\n}\n\nexport default cloneBuffer;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nexport default isLength;\n","import setPrototypeOf from \"@babel/runtime/helpers/esm/setPrototypeOf\";\nimport isNativeReflectConstruct from \"@babel/runtime/helpers/esm/isNativeReflectConstruct\";\nexport default function _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    _construct = Reflect.construct;\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}","/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nexport default identity;\n","/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\nexport default apply;\n","import apply from './_apply.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * A specialized version of `baseRest` which transforms the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @param {Function} transform The rest array transform.\n * @returns {Function} Returns the new function.\n */\nfunction overRest(func, start, transform) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = transform(array);\n    return apply(func, this, otherArgs);\n  };\n}\n\nexport default overRest;\n","/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\nexport default constant;\n","import constant from './constant.js';\nimport defineProperty from './_defineProperty.js';\nimport identity from './identity.js';\n\n/**\n * The base implementation of `setToString` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar baseSetToString = !defineProperty ? identity : function(func, string) {\n  return defineProperty(func, 'toString', {\n    'configurable': true,\n    'enumerable': false,\n    'value': constant(string),\n    'writable': true\n  });\n};\n\nexport default baseSetToString;\n","/** Used to detect hot functions by number of calls within a span of milliseconds. */\nvar HOT_COUNT = 800,\n    HOT_SPAN = 16;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeNow = Date.now;\n\n/**\n * Creates a function that'll short out and invoke `identity` instead\n * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n * milliseconds.\n *\n * @private\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new shortable function.\n */\nfunction shortOut(func) {\n  var count = 0,\n      lastCalled = 0;\n\n  return function() {\n    var stamp = nativeNow(),\n        remaining = HOT_SPAN - (stamp - lastCalled);\n\n    lastCalled = stamp;\n    if (remaining > 0) {\n      if (++count >= HOT_COUNT) {\n        return arguments[0];\n      }\n    } else {\n      count = 0;\n    }\n    return func.apply(undefined, arguments);\n  };\n}\n\nexport default shortOut;\n","import baseSetToString from './_baseSetToString.js';\nimport shortOut from './_shortOut.js';\n\n/**\n * Sets the `toString` method of `func` to return `string`.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar setToString = shortOut(baseSetToString);\n\nexport default setToString;\n","import identity from './identity.js';\nimport overRest from './_overRest.js';\nimport setToString from './_setToString.js';\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  return setToString(overRest(func, start, identity), func + '');\n}\n\nexport default baseRest;\n","import eq from './eq.js';\nimport isArrayLike from './isArrayLike.js';\nimport isIndex from './_isIndex.js';\nimport isObject from './isObject.js';\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\nexport default isIterateeCall;\n","import baseRest from './_baseRest.js';\nimport isIterateeCall from './_isIterateeCall.js';\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return baseRest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = (assigner.length > 3 && typeof customizer == 'function')\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\nexport default createAssigner;\n","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nexport default baseTimes;\n","import baseTimes from './_baseTimes.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isIndex from './_isIndex.js';\nimport isTypedArray from './isTypedArray.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default arrayLikeKeys;\n","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","import React, { Component } from 'react';\nimport _inheritsLoose from '@babel/runtime/helpers/esm/inheritsLoose';\nimport PropTypes from 'prop-types';\nimport warning from 'tiny-warning';\n\nvar MAX_SIGNED_31_BIT_INT = 1073741823;\nvar commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : {};\n\nfunction getUniqueId() {\n  var key = '__global_unique_id__';\n  return commonjsGlobal[key] = (commonjsGlobal[key] || 0) + 1;\n}\n\nfunction objectIs(x, y) {\n  if (x === y) {\n    return x !== 0 || 1 / x === 1 / y;\n  } else {\n    return x !== x && y !== y;\n  }\n}\n\nfunction createEventEmitter(value) {\n  var handlers = [];\n  return {\n    on: function on(handler) {\n      handlers.push(handler);\n    },\n    off: function off(handler) {\n      handlers = handlers.filter(function (h) {\n        return h !== handler;\n      });\n    },\n    get: function get() {\n      return value;\n    },\n    set: function set(newValue, changedBits) {\n      value = newValue;\n      handlers.forEach(function (handler) {\n        return handler(value, changedBits);\n      });\n    }\n  };\n}\n\nfunction onlyChild(children) {\n  return Array.isArray(children) ? children[0] : children;\n}\n\nfunction createReactContext(defaultValue, calculateChangedBits) {\n  var _Provider$childContex, _Consumer$contextType;\n\n  var contextProp = '__create-react-context-' + getUniqueId() + '__';\n\n  var Provider = /*#__PURE__*/function (_Component) {\n    _inheritsLoose(Provider, _Component);\n\n    function Provider() {\n      var _this;\n\n      _this = _Component.apply(this, arguments) || this;\n      _this.emitter = createEventEmitter(_this.props.value);\n      return _this;\n    }\n\n    var _proto = Provider.prototype;\n\n    _proto.getChildContext = function getChildContext() {\n      var _ref;\n\n      return _ref = {}, _ref[contextProp] = this.emitter, _ref;\n    };\n\n    _proto.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {\n      if (this.props.value !== nextProps.value) {\n        var oldValue = this.props.value;\n        var newValue = nextProps.value;\n        var changedBits;\n\n        if (objectIs(oldValue, newValue)) {\n          changedBits = 0;\n        } else {\n          changedBits = typeof calculateChangedBits === 'function' ? calculateChangedBits(oldValue, newValue) : MAX_SIGNED_31_BIT_INT;\n\n          if (process.env.NODE_ENV !== 'production') {\n            warning((changedBits & MAX_SIGNED_31_BIT_INT) === changedBits, 'calculateChangedBits: Expected the return value to be a ' + '31-bit integer. Instead received: ' + changedBits);\n          }\n\n          changedBits |= 0;\n\n          if (changedBits !== 0) {\n            this.emitter.set(nextProps.value, changedBits);\n          }\n        }\n      }\n    };\n\n    _proto.render = function render() {\n      return this.props.children;\n    };\n\n    return Provider;\n  }(Component);\n\n  Provider.childContextTypes = (_Provider$childContex = {}, _Provider$childContex[contextProp] = PropTypes.object.isRequired, _Provider$childContex);\n\n  var Consumer = /*#__PURE__*/function (_Component2) {\n    _inheritsLoose(Consumer, _Component2);\n\n    function Consumer() {\n      var _this2;\n\n      _this2 = _Component2.apply(this, arguments) || this;\n      _this2.state = {\n        value: _this2.getValue()\n      };\n\n      _this2.onUpdate = function (newValue, changedBits) {\n        var observedBits = _this2.observedBits | 0;\n\n        if ((observedBits & changedBits) !== 0) {\n          _this2.setState({\n            value: _this2.getValue()\n          });\n        }\n      };\n\n      return _this2;\n    }\n\n    var _proto2 = Consumer.prototype;\n\n    _proto2.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {\n      var observedBits = nextProps.observedBits;\n      this.observedBits = observedBits === undefined || observedBits === null ? MAX_SIGNED_31_BIT_INT : observedBits;\n    };\n\n    _proto2.componentDidMount = function componentDidMount() {\n      if (this.context[contextProp]) {\n        this.context[contextProp].on(this.onUpdate);\n      }\n\n      var observedBits = this.props.observedBits;\n      this.observedBits = observedBits === undefined || observedBits === null ? MAX_SIGNED_31_BIT_INT : observedBits;\n    };\n\n    _proto2.componentWillUnmount = function componentWillUnmount() {\n      if (this.context[contextProp]) {\n        this.context[contextProp].off(this.onUpdate);\n      }\n    };\n\n    _proto2.getValue = function getValue() {\n      if (this.context[contextProp]) {\n        return this.context[contextProp].get();\n      } else {\n        return defaultValue;\n      }\n    };\n\n    _proto2.render = function render() {\n      return onlyChild(this.props.children)(this.state.value);\n    };\n\n    return Consumer;\n  }(Component);\n\n  Consumer.contextTypes = (_Consumer$contextType = {}, _Consumer$contextType[contextProp] = PropTypes.object, _Consumer$contextType);\n  return {\n    Provider: Provider,\n    Consumer: Consumer\n  };\n}\n\nvar index = React.createContext || createReactContext;\n\nexport default index;\n","var isarray = require('isarray')\n\n/**\n * Expose `pathToRegexp`.\n */\nmodule.exports = pathToRegexp\nmodule.exports.parse = parse\nmodule.exports.compile = compile\nmodule.exports.tokensToFunction = tokensToFunction\nmodule.exports.tokensToRegExp = tokensToRegExp\n\n/**\n * The main path matching regexp utility.\n *\n * @type {RegExp}\n */\nvar PATH_REGEXP = new RegExp([\n  // Match escaped characters that would otherwise appear in future matches.\n  // This allows the user to escape special characters that won't transform.\n  '(\\\\\\\\.)',\n  // Match Express-style parameters and un-named parameters with a prefix\n  // and optional suffixes. Matches appear as:\n  //\n  // \"/:test(\\\\d+)?\" => [\"/\", \"test\", \"\\d+\", undefined, \"?\", undefined]\n  // \"/route(\\\\d+)\"  => [undefined, undefined, undefined, \"\\d+\", undefined, undefined]\n  // \"/*\"            => [\"/\", undefined, undefined, undefined, undefined, \"*\"]\n  '([\\\\/.])?(?:(?:\\\\:(\\\\w+)(?:\\\\(((?:\\\\\\\\.|[^\\\\\\\\()])+)\\\\))?|\\\\(((?:\\\\\\\\.|[^\\\\\\\\()])+)\\\\))([+*?])?|(\\\\*))'\n].join('|'), 'g')\n\n/**\n * Parse a string for the raw tokens.\n *\n * @param  {string}  str\n * @param  {Object=} options\n * @return {!Array}\n */\nfunction parse (str, options) {\n  var tokens = []\n  var key = 0\n  var index = 0\n  var path = ''\n  var defaultDelimiter = options && options.delimiter || '/'\n  var res\n\n  while ((res = PATH_REGEXP.exec(str)) != null) {\n    var m = res[0]\n    var escaped = res[1]\n    var offset = res.index\n    path += str.slice(index, offset)\n    index = offset + m.length\n\n    // Ignore already escaped sequences.\n    if (escaped) {\n      path += escaped[1]\n      continue\n    }\n\n    var next = str[index]\n    var prefix = res[2]\n    var name = res[3]\n    var capture = res[4]\n    var group = res[5]\n    var modifier = res[6]\n    var asterisk = res[7]\n\n    // Push the current path onto the tokens.\n    if (path) {\n      tokens.push(path)\n      path = ''\n    }\n\n    var partial = prefix != null && next != null && next !== prefix\n    var repeat = modifier === '+' || modifier === '*'\n    var optional = modifier === '?' || modifier === '*'\n    var delimiter = res[2] || defaultDelimiter\n    var pattern = capture || group\n\n    tokens.push({\n      name: name || key++,\n      prefix: prefix || '',\n      delimiter: delimiter,\n      optional: optional,\n      repeat: repeat,\n      partial: partial,\n      asterisk: !!asterisk,\n      pattern: pattern ? escapeGroup(pattern) : (asterisk ? '.*' : '[^' + escapeString(delimiter) + ']+?')\n    })\n  }\n\n  // Match any characters still remaining.\n  if (index < str.length) {\n    path += str.substr(index)\n  }\n\n  // If the path exists, push it onto the end.\n  if (path) {\n    tokens.push(path)\n  }\n\n  return tokens\n}\n\n/**\n * Compile a string to a template function for the path.\n *\n * @param  {string}             str\n * @param  {Object=}            options\n * @return {!function(Object=, Object=)}\n */\nfunction compile (str, options) {\n  return tokensToFunction(parse(str, options), options)\n}\n\n/**\n * Prettier encoding of URI path segments.\n *\n * @param  {string}\n * @return {string}\n */\nfunction encodeURIComponentPretty (str) {\n  return encodeURI(str).replace(/[\\/?#]/g, function (c) {\n    return '%' + c.charCodeAt(0).toString(16).toUpperCase()\n  })\n}\n\n/**\n * Encode the asterisk parameter. Similar to `pretty`, but allows slashes.\n *\n * @param  {string}\n * @return {string}\n */\nfunction encodeAsterisk (str) {\n  return encodeURI(str).replace(/[?#]/g, function (c) {\n    return '%' + c.charCodeAt(0).toString(16).toUpperCase()\n  })\n}\n\n/**\n * Expose a method for transforming tokens into the path function.\n */\nfunction tokensToFunction (tokens, options) {\n  // Compile all the tokens into regexps.\n  var matches = new Array(tokens.length)\n\n  // Compile all the patterns before compilation.\n  for (var i = 0; i < tokens.length; i++) {\n    if (typeof tokens[i] === 'object') {\n      matches[i] = new RegExp('^(?:' + tokens[i].pattern + ')$', flags(options))\n    }\n  }\n\n  return function (obj, opts) {\n    var path = ''\n    var data = obj || {}\n    var options = opts || {}\n    var encode = options.pretty ? encodeURIComponentPretty : encodeURIComponent\n\n    for (var i = 0; i < tokens.length; i++) {\n      var token = tokens[i]\n\n      if (typeof token === 'string') {\n        path += token\n\n        continue\n      }\n\n      var value = data[token.name]\n      var segment\n\n      if (value == null) {\n        if (token.optional) {\n          // Prepend partial segment prefixes.\n          if (token.partial) {\n            path += token.prefix\n          }\n\n          continue\n        } else {\n          throw new TypeError('Expected \"' + token.name + '\" to be defined')\n        }\n      }\n\n      if (isarray(value)) {\n        if (!token.repeat) {\n          throw new TypeError('Expected \"' + token.name + '\" to not repeat, but received `' + JSON.stringify(value) + '`')\n        }\n\n        if (value.length === 0) {\n          if (token.optional) {\n            continue\n          } else {\n            throw new TypeError('Expected \"' + token.name + '\" to not be empty')\n          }\n        }\n\n        for (var j = 0; j < value.length; j++) {\n          segment = encode(value[j])\n\n          if (!matches[i].test(segment)) {\n            throw new TypeError('Expected all \"' + token.name + '\" to match \"' + token.pattern + '\", but received `' + JSON.stringify(segment) + '`')\n          }\n\n          path += (j === 0 ? token.prefix : token.delimiter) + segment\n        }\n\n        continue\n      }\n\n      segment = token.asterisk ? encodeAsterisk(value) : encode(value)\n\n      if (!matches[i].test(segment)) {\n        throw new TypeError('Expected \"' + token.name + '\" to match \"' + token.pattern + '\", but received \"' + segment + '\"')\n      }\n\n      path += token.prefix + segment\n    }\n\n    return path\n  }\n}\n\n/**\n * Escape a regular expression string.\n *\n * @param  {string} str\n * @return {string}\n */\nfunction escapeString (str) {\n  return str.replace(/([.+*?=^!:${}()[\\]|\\/\\\\])/g, '\\\\$1')\n}\n\n/**\n * Escape the capturing group by escaping special characters and meaning.\n *\n * @param  {string} group\n * @return {string}\n */\nfunction escapeGroup (group) {\n  return group.replace(/([=!:$\\/()])/g, '\\\\$1')\n}\n\n/**\n * Attach the keys as a property of the regexp.\n *\n * @param  {!RegExp} re\n * @param  {Array}   keys\n * @return {!RegExp}\n */\nfunction attachKeys (re, keys) {\n  re.keys = keys\n  return re\n}\n\n/**\n * Get the flags for a regexp from the options.\n *\n * @param  {Object} options\n * @return {string}\n */\nfunction flags (options) {\n  return options && options.sensitive ? '' : 'i'\n}\n\n/**\n * Pull out keys from a regexp.\n *\n * @param  {!RegExp} path\n * @param  {!Array}  keys\n * @return {!RegExp}\n */\nfunction regexpToRegexp (path, keys) {\n  // Use a negative lookahead to match only capturing groups.\n  var groups = path.source.match(/\\((?!\\?)/g)\n\n  if (groups) {\n    for (var i = 0; i < groups.length; i++) {\n      keys.push({\n        name: i,\n        prefix: null,\n        delimiter: null,\n        optional: false,\n        repeat: false,\n        partial: false,\n        asterisk: false,\n        pattern: null\n      })\n    }\n  }\n\n  return attachKeys(path, keys)\n}\n\n/**\n * Transform an array into a regexp.\n *\n * @param  {!Array}  path\n * @param  {Array}   keys\n * @param  {!Object} options\n * @return {!RegExp}\n */\nfunction arrayToRegexp (path, keys, options) {\n  var parts = []\n\n  for (var i = 0; i < path.length; i++) {\n    parts.push(pathToRegexp(path[i], keys, options).source)\n  }\n\n  var regexp = new RegExp('(?:' + parts.join('|') + ')', flags(options))\n\n  return attachKeys(regexp, keys)\n}\n\n/**\n * Create a path regexp from string input.\n *\n * @param  {string}  path\n * @param  {!Array}  keys\n * @param  {!Object} options\n * @return {!RegExp}\n */\nfunction stringToRegexp (path, keys, options) {\n  return tokensToRegExp(parse(path, options), keys, options)\n}\n\n/**\n * Expose a function for taking tokens and returning a RegExp.\n *\n * @param  {!Array}          tokens\n * @param  {(Array|Object)=} keys\n * @param  {Object=}         options\n * @return {!RegExp}\n */\nfunction tokensToRegExp (tokens, keys, options) {\n  if (!isarray(keys)) {\n    options = /** @type {!Object} */ (keys || options)\n    keys = []\n  }\n\n  options = options || {}\n\n  var strict = options.strict\n  var end = options.end !== false\n  var route = ''\n\n  // Iterate over the tokens and create our regexp string.\n  for (var i = 0; i < tokens.length; i++) {\n    var token = tokens[i]\n\n    if (typeof token === 'string') {\n      route += escapeString(token)\n    } else {\n      var prefix = escapeString(token.prefix)\n      var capture = '(?:' + token.pattern + ')'\n\n      keys.push(token)\n\n      if (token.repeat) {\n        capture += '(?:' + prefix + capture + ')*'\n      }\n\n      if (token.optional) {\n        if (!token.partial) {\n          capture = '(?:' + prefix + '(' + capture + '))?'\n        } else {\n          capture = prefix + '(' + capture + ')?'\n        }\n      } else {\n        capture = prefix + '(' + capture + ')'\n      }\n\n      route += capture\n    }\n  }\n\n  var delimiter = escapeString(options.delimiter || '/')\n  var endsWithDelimiter = route.slice(-delimiter.length) === delimiter\n\n  // In non-strict mode we allow a slash at the end of match. If the path to\n  // match already ends with a slash, we remove it for consistency. The slash\n  // is valid at the end of a path match, not in the middle. This is important\n  // in non-ending mode, where \"/test/\" shouldn't match \"/test//route\".\n  if (!strict) {\n    route = (endsWithDelimiter ? route.slice(0, -delimiter.length) : route) + '(?:' + delimiter + '(?=$))?'\n  }\n\n  if (end) {\n    route += '$'\n  } else {\n    // In non-ending mode, we need the capturing groups to match as much as\n    // possible by using a positive lookahead to the end or next path segment.\n    route += strict && endsWithDelimiter ? '' : '(?=' + delimiter + '|$)'\n  }\n\n  return attachKeys(new RegExp('^' + route, flags(options)), keys)\n}\n\n/**\n * Normalize the given path string, returning a regular expression.\n *\n * An empty array can be passed in for the keys, which will hold the\n * placeholder key descriptions. For example, using `/user/:id`, `keys` will\n * contain `[{ name: 'id', delimiter: '/', optional: false, repeat: false }]`.\n *\n * @param  {(string|RegExp|Array)} path\n * @param  {(Array|Object)=}       keys\n * @param  {Object=}               options\n * @return {!RegExp}\n */\nfunction pathToRegexp (path, keys, options) {\n  if (!isarray(keys)) {\n    options = /** @type {!Object} */ (keys || options)\n    keys = []\n  }\n\n  options = options || {}\n\n  if (path instanceof RegExp) {\n    return regexpToRegexp(path, /** @type {!Array} */ (keys))\n  }\n\n  if (isarray(path)) {\n    return arrayToRegexp(/** @type {!Array} */ (path), /** @type {!Array} */ (keys), options)\n  }\n\n  return stringToRegexp(/** @type {string} */ (path), /** @type {!Array} */ (keys), options)\n}\n","/* global window */\nimport ponyfill from './ponyfill.js';\n\nvar root;\n\nif (typeof self !== 'undefined') {\n  root = self;\n} else if (typeof window !== 'undefined') {\n  root = window;\n} else if (typeof global !== 'undefined') {\n  root = global;\n} else if (typeof module !== 'undefined') {\n  root = module;\n} else {\n  root = Function('return this')();\n}\n\nvar result = ponyfill(root);\nexport default result;\n","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","var reactProperty = require('react-property');\nvar utilities = require('./utilities');\n\nvar setStyleProp = utilities.setStyleProp;\n\nvar htmlProperties = reactProperty.html;\nvar svgProperties = reactProperty.svg;\nvar isCustomAttribute = reactProperty.isCustomAttribute;\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\n/**\n * Converts HTML/SVG DOM attributes to React props.\n *\n * @param  {object} [attributes={}] - HTML/SVG DOM attributes.\n * @return {object}                 - React props.\n */\nfunction attributesToProps(attributes) {\n  attributes = attributes || {};\n\n  var attributeName;\n  var attributeNameLowerCased;\n  var attributeValue;\n  var property;\n  var props = {};\n\n  for (attributeName in attributes) {\n    attributeValue = attributes[attributeName];\n\n    // ARIA (aria-*) or custom data (data-*) attribute\n    if (isCustomAttribute(attributeName)) {\n      props[attributeName] = attributeValue;\n      continue;\n    }\n\n    // convert HTML attribute to React prop\n    attributeNameLowerCased = attributeName.toLowerCase();\n    if (hasOwnProperty.call(htmlProperties, attributeNameLowerCased)) {\n      property = htmlProperties[attributeNameLowerCased];\n      props[property.propertyName] =\n        property.hasBooleanValue ||\n        (property.hasOverloadedBooleanValue && !attributeValue)\n          ? true\n          : attributeValue;\n      continue;\n    }\n\n    // convert SVG attribute to React prop\n    if (hasOwnProperty.call(svgProperties, attributeName)) {\n      property = svgProperties[attributeName];\n      props[property.propertyName] = attributeValue;\n      continue;\n    }\n\n    // preserve custom attribute if React >=16\n    if (utilities.PRESERVE_CUSTOM_ATTRIBUTES) {\n      props[attributeName] = attributeValue;\n    }\n  }\n\n  // transform inline style to object\n  setStyleProp(attributes.style, props);\n\n  return props;\n}\n\nmodule.exports = attributesToProps;\n","var React = require('react');\nvar styleToJS = require('style-to-js').default;\n\n/**\n * Swap key with value in an object.\n *\n * @param  {Object}   obj        - The object.\n * @param  {Function} [override] - The override method.\n * @return {Object}              - The inverted object.\n */\nfunction invertObject(obj, override) {\n  if (!obj || typeof obj !== 'object') {\n    throw new TypeError('First argument must be an object');\n  }\n\n  var key;\n  var value;\n  var isOverridePresent = typeof override === 'function';\n  var overrides = {};\n  var result = {};\n\n  for (key in obj) {\n    value = obj[key];\n\n    if (isOverridePresent) {\n      overrides = override(key, value);\n      if (overrides && overrides.length === 2) {\n        result[overrides[0]] = overrides[1];\n        continue;\n      }\n    }\n\n    if (typeof value === 'string') {\n      result[value] = key;\n    }\n  }\n\n  return result;\n}\n\n/**\n * Check if a given tag is a custom component.\n *\n * @see {@link https://github.com/facebook/react/blob/v16.6.3/packages/react-dom/src/shared/isCustomComponent.js}\n *\n * @param {string} tagName - The name of the html tag.\n * @param {Object} props   - The props being passed to the element.\n * @return {boolean}\n */\nfunction isCustomComponent(tagName, props) {\n  if (tagName.indexOf('-') === -1) {\n    return props && typeof props.is === 'string';\n  }\n\n  switch (tagName) {\n    // These are reserved SVG and MathML elements.\n    // We don't mind this whitelist too much because we expect it to never grow.\n    // The alternative is to track the namespace in a few places which is convoluted.\n    // https://w3c.github.io/webcomponents/spec/custom/#custom-elements-core-concepts\n    case 'annotation-xml':\n    case 'color-profile':\n    case 'font-face':\n    case 'font-face-src':\n    case 'font-face-uri':\n    case 'font-face-format':\n    case 'font-face-name':\n    case 'missing-glyph':\n      return false;\n    default:\n      return true;\n  }\n}\n\nvar styleToJSOptions = { reactCompat: true };\n\n/**\n * Sets style prop.\n *\n * @param {null|undefined|string} style\n * @param {object} props\n */\nfunction setStyleProp(style, props) {\n  if (style === null || style === undefined) {\n    return;\n  }\n  props.style = styleToJS(style, styleToJSOptions);\n}\n\n/**\n * @constant {boolean}\n * @see {@link https://reactjs.org/blog/2017/09/08/dom-attributes-in-react-16.html}\n */\nvar PRESERVE_CUSTOM_ATTRIBUTES = React.version.split('.')[0] >= 16;\n\nmodule.exports = {\n  PRESERVE_CUSTOM_ATTRIBUTES: PRESERVE_CUSTOM_ATTRIBUTES,\n  invertObject: invertObject,\n  isCustomComponent: isCustomComponent,\n  setStyleProp: setStyleProp\n};\n","var constants = require('./constants');\nvar domhandler = require('domhandler/lib/node');\n\nvar CASE_SENSITIVE_TAG_NAMES = constants.CASE_SENSITIVE_TAG_NAMES;\n\nvar Comment = domhandler.Comment;\nvar Element = domhandler.Element;\nvar ProcessingInstruction = domhandler.ProcessingInstruction;\nvar Text = domhandler.Text;\n\nvar caseSensitiveTagNamesMap = {};\nvar tagName;\n\nfor (var i = 0, len = CASE_SENSITIVE_TAG_NAMES.length; i < len; i++) {\n  tagName = CASE_SENSITIVE_TAG_NAMES[i];\n  caseSensitiveTagNamesMap[tagName.toLowerCase()] = tagName;\n}\n\n/**\n * Gets case-sensitive tag name.\n *\n * @param  {string}           tagName - Tag name in lowercase.\n * @return {string|undefined}         - Case-sensitive tag name.\n */\nfunction getCaseSensitiveTagName(tagName) {\n  return caseSensitiveTagNamesMap[tagName];\n}\n\n/**\n * Formats DOM attributes to a hash map.\n *\n * @param  {NamedNodeMap} attributes - List of attributes.\n * @return {object}                  - Map of attribute name to value.\n */\nfunction formatAttributes(attributes) {\n  var result = {};\n  var attribute;\n  // `NamedNodeMap` is array-like\n  for (var i = 0, len = attributes.length; i < len; i++) {\n    attribute = attributes[i];\n    result[attribute.name] = attribute.value;\n  }\n  return result;\n}\n\n/**\n * Corrects the tag name if it is case-sensitive (SVG).\n * Otherwise, returns the lowercase tag name (HTML).\n *\n * @param  {string} tagName - Lowercase tag name.\n * @return {string}         - Formatted tag name.\n */\nfunction formatTagName(tagName) {\n  tagName = tagName.toLowerCase();\n  var caseSensitiveTagName = getCaseSensitiveTagName(tagName);\n  if (caseSensitiveTagName) {\n    return caseSensitiveTagName;\n  }\n  return tagName;\n}\n\n/**\n * Transforms DOM nodes to `domhandler` nodes.\n *\n * @param  {NodeList}     nodes         - DOM nodes.\n * @param  {Element|null} [parent=null] - Parent node.\n * @param  {string}       [directive]   - Directive.\n * @return {Array<Comment|Element|ProcessingInstruction|Text>}\n */\nfunction formatDOM(nodes, parent, directive) {\n  parent = parent || null;\n  var result = [];\n\n  for (var index = 0, len = nodes.length; index < len; index++) {\n    var node = nodes[index];\n    var current;\n\n    // set the node data given the type\n    switch (node.nodeType) {\n      case 1:\n        // script, style, or tag\n        current = new Element(\n          formatTagName(node.nodeName),\n          formatAttributes(node.attributes)\n        );\n        current.children = formatDOM(node.childNodes, current);\n        break;\n\n      case 3:\n        current = new Text(node.nodeValue);\n        break;\n\n      case 8:\n        current = new Comment(node.nodeValue);\n        break;\n\n      default:\n        continue;\n    }\n\n    // set previous node next\n    var prev = result[index - 1] || null;\n    if (prev) {\n      prev.next = current;\n    }\n\n    // set properties for current node\n    current.parent = parent;\n    current.prev = prev;\n    current.next = null;\n\n    result.push(current);\n  }\n\n  if (directive) {\n    current = new ProcessingInstruction(\n      directive.substring(0, directive.indexOf(' ')).toLowerCase(),\n      directive\n    );\n    current.next = result[0] || null;\n    current.parent = parent;\n    result.unshift(current);\n\n    if (result[1]) {\n      result[1].prev = result[0];\n    }\n  }\n\n  return result;\n}\n\n/**\n * Detects if browser is Internet Explorer.\n *\n * @return {boolean} - Whether IE is detected.\n */\nfunction isIE() {\n  return /(MSIE |Trident\\/|Edge\\/)/.test(navigator.userAgent);\n}\n\nmodule.exports = {\n  formatAttributes: formatAttributes,\n  formatDOM: formatDOM,\n  isIE: isIE\n};\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","export default function symbolObservablePonyfill(root) {\n\tvar result;\n\tvar Symbol = root.Symbol;\n\n\tif (typeof Symbol === 'function') {\n\t\tif (Symbol.observable) {\n\t\t\tresult = Symbol.observable;\n\t\t} else {\n\t\t\tresult = Symbol('observable');\n\t\t\tSymbol.observable = result;\n\t\t}\n\t} else {\n\t\tresult = '@@observable';\n\t}\n\n\treturn result;\n};\n","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"CKEditor\"] = factory(require(\"react\"));\n\telse\n\t\troot[\"CKEditor\"] = factory(root[\"React\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__3__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 12);\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nexport default root;\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nexport default nodeUtil;\n","module.exports = __WEBPACK_EXTERNAL_MODULE__3__;","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nexport default freeGlobal;\n","import root from './_root.js';\nimport stubFalse from './stubFalse.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nexport default isBuffer;\n","module.exports = function(originalModule) {\n\tif (!originalModule.webpackPolyfill) {\n\t\tvar module = Object.create(originalModule);\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"exports\", {\n\t\t\tenumerable: true\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nexport default stubFalse;\n","import root from './_root.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined;\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var length = buffer.length,\n      result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);\n\n  buffer.copy(result);\n  return result;\n}\n\nexport default cloneBuffer;\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nexport default isObject;\n","import root from './_root.js';\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nexport default now;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nexport default Symbol;\n","import Symbol from './_Symbol.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nexport default getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nexport default objectToString;\n","import Symbol from './_Symbol.js';\nimport getRawTag from './_getRawTag.js';\nimport objectToString from './_objectToString.js';\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nexport default baseGetTag;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nexport default isObjectLike;\n","import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nexport default isSymbol;\n","import isObject from './isObject.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nexport default toNumber;\n","import isObject from './isObject.js';\nimport now from './now.js';\nimport toNumber from './toNumber.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nexport default debounce;\n","import debounce from './debounce.js';\nimport isObject from './isObject.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\nexport default throttle;\n","/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nexport default listCacheClear;\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nexport default eq;\n","import eq from './eq.js';\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nexport default assocIndexOf;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nexport default listCacheDelete;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nexport default listCacheGet;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\nexport default listCacheHas;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nexport default listCacheSet;\n","import listCacheClear from './_listCacheClear.js';\nimport listCacheDelete from './_listCacheDelete.js';\nimport listCacheGet from './_listCacheGet.js';\nimport listCacheHas from './_listCacheHas.js';\nimport listCacheSet from './_listCacheSet.js';\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nexport default ListCache;\n","import coreJsData from './_coreJsData.js';\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nexport default isMasked;\n","import ListCache from './_ListCache.js';\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\nexport default stackClear;\n","/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\nexport default stackDelete;\n","/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\nexport default stackGet;\n","/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\nexport default stackHas;\n","import baseGetTag from './_baseGetTag.js';\nimport isObject from './isObject.js';\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nexport default isFunction;\n","import root from './_root.js';\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nexport default coreJsData;\n","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nexport default toSource;\n","import isFunction from './isFunction.js';\nimport isMasked from './_isMasked.js';\nimport isObject from './isObject.js';\nimport toSource from './_toSource.js';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nexport default baseIsNative;\n","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nexport default getValue;\n","import baseIsNative from './_baseIsNative.js';\nimport getValue from './_getValue.js';\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nexport default getNative;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nexport default Map;\n","import getNative from './_getNative.js';\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nexport default nativeCreate;\n","import nativeCreate from './_nativeCreate.js';\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\nexport default hashClear;\n","/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nexport default hashDelete;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\nexport default hashGet;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\nexport default hashHas;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\nexport default hashSet;\n","import hashClear from './_hashClear.js';\nimport hashDelete from './_hashDelete.js';\nimport hashGet from './_hashGet.js';\nimport hashHas from './_hashHas.js';\nimport hashSet from './_hashSet.js';\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\nexport default Hash;\n","import Hash from './_Hash.js';\nimport ListCache from './_ListCache.js';\nimport Map from './_Map.js';\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\nexport default mapCacheClear;\n","/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nexport default isKeyable;\n","import isKeyable from './_isKeyable.js';\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nexport default getMapData;\n","import getMapData from './_getMapData.js';\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nexport default mapCacheDelete;\n","import getMapData from './_getMapData.js';\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\nexport default mapCacheGet;\n","import getMapData from './_getMapData.js';\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\nexport default mapCacheHas;\n","import getMapData from './_getMapData.js';\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nexport default mapCacheSet;\n","import mapCacheClear from './_mapCacheClear.js';\nimport mapCacheDelete from './_mapCacheDelete.js';\nimport mapCacheGet from './_mapCacheGet.js';\nimport mapCacheHas from './_mapCacheHas.js';\nimport mapCacheSet from './_mapCacheSet.js';\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\nexport default MapCache;\n","import ListCache from './_ListCache.js';\nimport Map from './_Map.js';\nimport MapCache from './_MapCache.js';\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\nexport default stackSet;\n","import ListCache from './_ListCache.js';\nimport stackClear from './_stackClear.js';\nimport stackDelete from './_stackDelete.js';\nimport stackGet from './_stackGet.js';\nimport stackHas from './_stackHas.js';\nimport stackSet from './_stackSet.js';\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\nexport default Stack;\n","/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\nexport default arrayEach;\n","import getNative from './_getNative.js';\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nexport default defineProperty;\n","import defineProperty from './_defineProperty.js';\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\nexport default baseAssignValue;\n","import baseAssignValue from './_baseAssignValue.js';\nimport eq from './eq.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nexport default assignValue;\n","import assignValue from './_assignValue.js';\nimport baseAssignValue from './_baseAssignValue.js';\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  var isNew = !object;\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    if (newValue === undefined) {\n      newValue = source[key];\n    }\n    if (isNew) {\n      baseAssignValue(object, key, newValue);\n    } else {\n      assignValue(object, key, newValue);\n    }\n  }\n  return object;\n}\n\nexport default copyObject;\n","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nexport default baseTimes;\n","import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nexport default baseIsArguments;\n","import baseIsArguments from './_baseIsArguments.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nexport default isArguments;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nexport default isArray;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\nexport default isIndex;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nexport default isLength;\n","import baseGetTag from './_baseGetTag.js';\nimport isLength from './isLength.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nexport default baseIsTypedArray;\n","/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nexport default baseUnary;\n","import baseIsTypedArray from './_baseIsTypedArray.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nexport default isTypedArray;\n","import baseTimes from './_baseTimes.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isIndex from './_isIndex.js';\nimport isTypedArray from './isTypedArray.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default arrayLikeKeys;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nexport default isPrototype;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nexport default overArg;\n","import overArg from './_overArg.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nexport default nativeKeys;\n","import isPrototype from './_isPrototype.js';\nimport nativeKeys from './_nativeKeys.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default baseKeys;\n","import isFunction from './isFunction.js';\nimport isLength from './isLength.js';\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nexport default isArrayLike;\n","import arrayLikeKeys from './_arrayLikeKeys.js';\nimport baseKeys from './_baseKeys.js';\nimport isArrayLike from './isArrayLike.js';\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nexport default keys;\n","import copyObject from './_copyObject.js';\nimport keys from './keys.js';\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\nexport default baseAssign;\n","/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default nativeKeysIn;\n","import isObject from './isObject.js';\nimport isPrototype from './_isPrototype.js';\nimport nativeKeysIn from './_nativeKeysIn.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default baseKeysIn;\n","import arrayLikeKeys from './_arrayLikeKeys.js';\nimport baseKeysIn from './_baseKeysIn.js';\nimport isArrayLike from './isArrayLike.js';\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\nexport default keysIn;\n","import copyObject from './_copyObject.js';\nimport keysIn from './keysIn.js';\n\n/**\n * The base implementation of `_.assignIn` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssignIn(object, source) {\n  return object && copyObject(source, keysIn(source), object);\n}\n\nexport default baseAssignIn;\n","/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\nexport default copyArray;\n","/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nexport default arrayFilter;\n","/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\nexport default stubArray;\n","import arrayFilter from './_arrayFilter.js';\nimport stubArray from './stubArray.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\nexport default getSymbols;\n","import copyObject from './_copyObject.js';\nimport getSymbols from './_getSymbols.js';\n\n/**\n * Copies own symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\nexport default copySymbols;\n","/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nexport default arrayPush;\n","import overArg from './_overArg.js';\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nexport default getPrototype;\n","import arrayPush from './_arrayPush.js';\nimport getPrototype from './_getPrototype.js';\nimport getSymbols from './_getSymbols.js';\nimport stubArray from './stubArray.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own and inherited enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbolsIn = !nativeGetSymbols ? stubArray : function(object) {\n  var result = [];\n  while (object) {\n    arrayPush(result, getSymbols(object));\n    object = getPrototype(object);\n  }\n  return result;\n};\n\nexport default getSymbolsIn;\n","import copyObject from './_copyObject.js';\nimport getSymbolsIn from './_getSymbolsIn.js';\n\n/**\n * Copies own and inherited symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbolsIn(source, object) {\n  return copyObject(source, getSymbolsIn(source), object);\n}\n\nexport default copySymbolsIn;\n","import arrayPush from './_arrayPush.js';\nimport isArray from './isArray.js';\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\nexport default baseGetAllKeys;\n","import baseGetAllKeys from './_baseGetAllKeys.js';\nimport getSymbols from './_getSymbols.js';\nimport keys from './keys.js';\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\nexport default getAllKeys;\n","import baseGetAllKeys from './_baseGetAllKeys.js';\nimport getSymbolsIn from './_getSymbolsIn.js';\nimport keysIn from './keysIn.js';\n\n/**\n * Creates an array of own and inherited enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeysIn(object) {\n  return baseGetAllKeys(object, keysIn, getSymbolsIn);\n}\n\nexport default getAllKeysIn;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView');\n\nexport default DataView;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Promise = getNative(root, 'Promise');\n\nexport default Promise;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Set = getNative(root, 'Set');\n\nexport default Set;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar WeakMap = getNative(root, 'WeakMap');\n\nexport default WeakMap;\n","import DataView from './_DataView.js';\nimport Map from './_Map.js';\nimport Promise from './_Promise.js';\nimport Set from './_Set.js';\nimport WeakMap from './_WeakMap.js';\nimport baseGetTag from './_baseGetTag.js';\nimport toSource from './_toSource.js';\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    setTag = '[object Set]',\n    weakMapTag = '[object WeakMap]';\n\nvar dataViewTag = '[object DataView]';\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\nexport default getTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = new array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\nexport default initCloneArray;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Uint8Array = root.Uint8Array;\n\nexport default Uint8Array;\n","import Uint8Array from './_Uint8Array.js';\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\nexport default cloneArrayBuffer;\n","import cloneArrayBuffer from './_cloneArrayBuffer.js';\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\nexport default cloneDataView;\n","/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\nexport default cloneRegExp;\n","import Symbol from './_Symbol.js';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\nexport default cloneSymbol;\n","import cloneArrayBuffer from './_cloneArrayBuffer.js';\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\nexport default cloneTypedArray;\n","import cloneArrayBuffer from './_cloneArrayBuffer.js';\nimport cloneDataView from './_cloneDataView.js';\nimport cloneRegExp from './_cloneRegExp.js';\nimport cloneSymbol from './_cloneSymbol.js';\nimport cloneTypedArray from './_cloneTypedArray.js';\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Map`, `Number`, `RegExp`, `Set`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return new Ctor;\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return new Ctor;\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\nexport default initCloneByTag;\n","import isObject from './isObject.js';\n\n/** Built-in value references. */\nvar objectCreate = Object.create;\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} proto The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nvar baseCreate = (function() {\n  function object() {}\n  return function(proto) {\n    if (!isObject(proto)) {\n      return {};\n    }\n    if (objectCreate) {\n      return objectCreate(proto);\n    }\n    object.prototype = proto;\n    var result = new object;\n    object.prototype = undefined;\n    return result;\n  };\n}());\n\nexport default baseCreate;\n","import baseCreate from './_baseCreate.js';\nimport getPrototype from './_getPrototype.js';\nimport isPrototype from './_isPrototype.js';\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\nexport default initCloneObject;\n","import getTag from './_getTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]';\n\n/**\n * The base implementation of `_.isMap` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n */\nfunction baseIsMap(value) {\n  return isObjectLike(value) && getTag(value) == mapTag;\n}\n\nexport default baseIsMap;\n","import baseIsMap from './_baseIsMap.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsMap = nodeUtil && nodeUtil.isMap;\n\n/**\n * Checks if `value` is classified as a `Map` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n * @example\n *\n * _.isMap(new Map);\n * // => true\n *\n * _.isMap(new WeakMap);\n * // => false\n */\nvar isMap = nodeIsMap ? baseUnary(nodeIsMap) : baseIsMap;\n\nexport default isMap;\n","import getTag from './_getTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar setTag = '[object Set]';\n\n/**\n * The base implementation of `_.isSet` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n */\nfunction baseIsSet(value) {\n  return isObjectLike(value) && getTag(value) == setTag;\n}\n\nexport default baseIsSet;\n","import baseIsSet from './_baseIsSet.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsSet = nodeUtil && nodeUtil.isSet;\n\n/**\n * Checks if `value` is classified as a `Set` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n * @example\n *\n * _.isSet(new Set);\n * // => true\n *\n * _.isSet(new WeakSet);\n * // => false\n */\nvar isSet = nodeIsSet ? baseUnary(nodeIsSet) : baseIsSet;\n\nexport default isSet;\n","import Stack from './_Stack.js';\nimport arrayEach from './_arrayEach.js';\nimport assignValue from './_assignValue.js';\nimport baseAssign from './_baseAssign.js';\nimport baseAssignIn from './_baseAssignIn.js';\nimport cloneBuffer from './_cloneBuffer.js';\nimport copyArray from './_copyArray.js';\nimport copySymbols from './_copySymbols.js';\nimport copySymbolsIn from './_copySymbolsIn.js';\nimport getAllKeys from './_getAllKeys.js';\nimport getAllKeysIn from './_getAllKeysIn.js';\nimport getTag from './_getTag.js';\nimport initCloneArray from './_initCloneArray.js';\nimport initCloneByTag from './_initCloneByTag.js';\nimport initCloneObject from './_initCloneObject.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isMap from './isMap.js';\nimport isObject from './isObject.js';\nimport isSet from './isSet.js';\nimport keys from './keys.js';\nimport keysIn from './keysIn.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_FLAT_FLAG = 2,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Deep clone\n *  2 - Flatten inherited properties\n *  4 - Clone symbols\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, bitmask, customizer, key, object, stack) {\n  var result,\n      isDeep = bitmask & CLONE_DEEP_FLAG,\n      isFlat = bitmask & CLONE_FLAT_FLAG,\n      isFull = bitmask & CLONE_SYMBOLS_FLAG;\n\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      result = (isFlat || isFunc) ? {} : initCloneObject(value);\n      if (!isDeep) {\n        return isFlat\n          ? copySymbolsIn(value, baseAssignIn(result, value))\n          : copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (isSet(value)) {\n    value.forEach(function(subValue) {\n      result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));\n    });\n  } else if (isMap(value)) {\n    value.forEach(function(subValue, key) {\n      result.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));\n    });\n  }\n\n  var keysFunc = isFull\n    ? (isFlat ? getAllKeysIn : getAllKeys)\n    : (isFlat ? keysIn : keys);\n\n  var props = isArr ? undefined : keysFunc(value);\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));\n  });\n  return result;\n}\n\nexport default baseClone;\n","import baseClone from './_baseClone.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * This method is like `_.cloneWith` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @param {Function} [customizer] The function to customize cloning.\n * @returns {*} Returns the deep cloned value.\n * @see _.cloneWith\n * @example\n *\n * function customizer(value) {\n *   if (_.isElement(value)) {\n *     return value.cloneNode(true);\n *   }\n * }\n *\n * var el = _.cloneDeepWith(document.body, customizer);\n *\n * console.log(el === document.body);\n * // => false\n * console.log(el.nodeName);\n * // => 'BODY'\n * console.log(el.childNodes.length);\n * // => 20\n */\nfunction cloneDeepWith(value, customizer) {\n  customizer = typeof customizer == 'function' ? customizer : undefined;\n  return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG, customizer);\n}\n\nexport default cloneDeepWith;\n","import baseGetTag from './_baseGetTag.js';\nimport getPrototype from './_getPrototype.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n    funcToString.call(Ctor) == objectCtorString;\n}\n\nexport default isPlainObject;\n","import isObjectLike from './isObjectLike.js';\nimport isPlainObject from './isPlainObject.js';\n\n/**\n * Checks if `value` is likely a DOM element.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a DOM element, else `false`.\n * @example\n *\n * _.isElement(document.body);\n * // => true\n *\n * _.isElement('<body>');\n * // => false\n */\nfunction isElement(value) {\n  return isObjectLike(value) && value.nodeType === 1 && !isPlainObject(value);\n}\n\nexport default isElement;\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module watchdog/utils/getsubnodes\n */\n\n/* globals EventTarget, Event */\n\nexport default function getSubNodes( head, excludedProperties = new Set() ) {\n\tconst nodes = [ head ];\n\n\t// @if CK_DEBUG_WATCHDOG // const prevNodeMap = new Map();\n\n\t// Nodes are stored to prevent infinite looping.\n\tconst subNodes = new Set();\n\n\twhile ( nodes.length > 0 ) {\n\t\tconst node = nodes.shift();\n\n\t\tif ( subNodes.has( node ) || shouldNodeBeSkipped( node ) || excludedProperties.has( node ) ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tsubNodes.add( node );\n\n\t\t// Handle arrays, maps, sets, custom collections that implements `[ Symbol.iterator ]()`, etc.\n\t\tif ( node[ Symbol.iterator ] ) {\n\t\t\t// The custom editor iterators might cause some problems if the editor is crashed.\n\t\t\ttry {\n\t\t\t\tfor ( const n of node ) {\n\t\t\t\t\tnodes.push( n );\n\n\t\t\t\t\t// @if CK_DEBUG_WATCHDOG // if ( !prevNodeMap.has( n ) ) {\n\t\t\t\t\t// @if CK_DEBUG_WATCHDOG // \tprevNodeMap.set( n, node );\n\t\t\t\t\t// @if CK_DEBUG_WATCHDOG // }\n\t\t\t\t}\n\t\t\t} catch ( err ) {\n\t\t\t\t// Do not log errors for broken structures\n\t\t\t\t// since we are in the error handling process already.\n\t\t\t\t// eslint-disable-line no-empty\n\t\t\t}\n\t\t} else {\n\t\t\tfor ( const key in node ) {\n\t\t\t\t// We share a reference via the protobuf library within the editors,\n\t\t\t\t// hence the shared value should be skipped. Although, it's not a perfect\n\t\t\t\t// solution since new places like that might occur in the future.\n\t\t\t\tif ( key === 'defaultValue' ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tnodes.push( node[ key ] );\n\n\t\t\t\t// @if CK_DEBUG_WATCHDOG // if ( !prevNodeMap.has( node[ key ] ) ) {\n\t\t\t\t// @if CK_DEBUG_WATCHDOG // \tprevNodeMap.set( node[ key ], node );\n\t\t\t\t// @if CK_DEBUG_WATCHDOG // }\n\t\t\t}\n\t\t}\n\t}\n\n\t// @if CK_DEBUG_WATCHDOG // return { subNodes, prevNodeMap };\n\n\treturn subNodes;\n}\n\nfunction shouldNodeBeSkipped( node ) {\n\tconst type = Object.prototype.toString.call( node );\n\tconst typeOfNode = typeof node;\n\n\treturn (\n\t\ttypeOfNode === 'number' ||\n\t\ttypeOfNode === 'boolean' ||\n\t\ttypeOfNode === 'string' ||\n\t\ttypeOfNode === 'symbol' ||\n\t\ttypeOfNode === 'function' ||\n\t\ttype === '[object Date]' ||\n\t\ttype === '[object RegExp]' ||\n\t\ttype === '[object Module]' ||\n\n\t\tnode === undefined ||\n\t\tnode === null ||\n\n\t\t// Skip native DOM objects, e.g. Window, nodes, events, etc.\n\t\tnode instanceof EventTarget ||\n\t\tnode instanceof Event\n\t);\n}\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module watchdog/utils/areconnectedthroughproperties\n */\n\n/* globals console */\n\nimport getSubNodes from './getsubnodes';\n\n/**\n * Traverses both structures to find out whether there is a reference that is shared between both structures.\n *\n * @param {Object|Array} target1\n * @param {Object|Array} target2\n */\nexport default function areConnectedThroughProperties( target1, target2, excludedNodes = new Set() ) {\n\tif ( target1 === target2 && isObject( target1 ) ) {\n\t\treturn true;\n\t}\n\n\t// @if CK_DEBUG_WATCHDOG // return checkConnectionBetweenProps( target1, target2, excludedNodes );\n\n\tconst subNodes1 = getSubNodes( target1, excludedNodes );\n\tconst subNodes2 = getSubNodes( target2, excludedNodes );\n\n\tfor ( const node of subNodes1 ) {\n\t\tif ( subNodes2.has( node ) ) {\n\t\t\treturn true;\n\t\t}\n\t}\n\n\treturn false;\n}\n\n/* istanbul ignore next */\n// eslint-disable-next-line\nfunction checkConnectionBetweenProps( target1, target2, excludedNodes ) {\n\tconst { subNodes: subNodes1, prevNodeMap: prevNodeMap1 } = getSubNodes( target1, excludedNodes.subNodes );\n\tconst { subNodes: subNodes2, prevNodeMap: prevNodeMap2 } = getSubNodes( target2, excludedNodes.subNodes );\n\n\tfor ( const sharedNode of subNodes1 ) {\n\t\tif ( subNodes2.has( sharedNode ) ) {\n\t\t\tconst connection = [];\n\n\t\t\tconnection.push( sharedNode );\n\n\t\t\tlet node = prevNodeMap1.get( sharedNode );\n\n\t\t\twhile ( node && node !== target1 ) {\n\t\t\t\tconnection.push( node );\n\t\t\t\tnode = prevNodeMap1.get( node );\n\t\t\t}\n\n\t\t\tnode = prevNodeMap2.get( sharedNode );\n\n\t\t\twhile ( node && node !== target2 ) {\n\t\t\t\tconnection.unshift( node );\n\t\t\t\tnode = prevNodeMap2.get( node );\n\t\t\t}\n\n\t\t\tconsole.log( '--------' );\n\t\t\tconsole.log( { target1 } );\n\t\t\tconsole.log( { sharedNode } );\n\t\t\tconsole.log( { target2 } );\n\t\t\tconsole.log( { connection } );\n\n\t\t\treturn true;\n\t\t}\n\t}\n\n\treturn false;\n}\n\nfunction isObject( structure ) {\n\treturn typeof structure === 'object' && structure !== null;\n}\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module watchdog/watchdog\n */\n\n/* globals window */\n\n/**\n * An abstract watchdog class that handles most of the error handling process and the state of the underlying component.\n *\n * See the {@glink features/watchdog Watchdog feature guide} to learn the rationale behind it and how to use it.\n *\n * @private\n * @abstract\n */\nexport default class Watchdog {\n\t/**\n\t * @param {module:watchdog/watchdog~WatchdogConfig} config The watchdog plugin configuration.\n\t */\n\tconstructor( config ) {\n\t\t/**\n\t\t * An array of crashes saved as an object with the following properties:\n\t\t *\n\t\t * * `message`: `String`,\n\t\t * * `stack`: `String`,\n\t\t * * `date`: `Number`,\n\t\t * * `filename`: `String | undefined`,\n\t\t * * `lineno`: `Number | undefined`,\n\t\t * * `colno`: `Number | undefined`,\n\t\t *\n\t\t * @public\n\t\t * @readonly\n\t\t * @type {Array.<Object>}\n\t\t */\n\t\tthis.crashes = [];\n\n\t\t/**\n\t\t * Specifies the state of the item watched by the watchdog. The state can be one of the following values:\n\t\t *\n\t\t * * `initializing` &ndash; Before the first initialization, and after crashes, before the item is ready.\n\t\t * * `ready` &ndash; A state when the user can interact with the item.\n\t\t * * `crashed` &ndash; A state when an error occurs. It quickly changes to `initializing` or `crashedPermanently`\n\t\t * depending on how many and how frequent errors have been caught recently.\n\t\t * * `crashedPermanently` &ndash; A state when the watchdog stops reacting to errors and keeps the item it is watching crashed,\n\t\t * * `destroyed` &ndash; A state when the item is manually destroyed by the user after calling `watchdog.destroy()`.\n\t\t *\n\t\t * @public\n\t\t * @type {'initializing'|'ready'|'crashed'|'crashedPermanently'|'destroyed'}\n\t\t */\n\t\tthis.state = 'initializing';\n\n\t\t/**\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @see module:watchdog/watchdog~WatchdogConfig\n\t\t */\n\t\tthis._crashNumberLimit = typeof config.crashNumberLimit === 'number' ? config.crashNumberLimit : 3;\n\n\t\t/**\n\t\t * Returns the result of the `Date.now()` call. It can be overridden in tests to mock time as some popular\n\t\t * approaches like `sinon.useFakeTimers()` do not work well with error handling.\n\t\t *\n\t\t * @protected\n\t\t */\n\t\tthis._now = Date.now;\n\n\t\t/**\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @see module:watchdog/watchdog~WatchdogConfig\n\t\t */\n\t\tthis._minimumNonErrorTimePeriod = typeof config.minimumNonErrorTimePeriod === 'number' ? config.minimumNonErrorTimePeriod : 5000;\n\n\t\t/**\n\t\t * Checks if the event error comes from the underlying item and restarts the item.\n\t\t *\n\t\t * @private\n\t\t * @type {Function}\n\t\t */\n\t\tthis._boundErrorHandler = evt => {\n\t\t\t// `evt.error` is exposed by EventError while `evt.reason` is available in PromiseRejectionEvent.\n\t\t\tconst error = evt.error || evt.reason;\n\n\t\t\t// Note that `evt.reason` might be everything that is in the promise rejection.\n\t\t\t// Similarly everything that is thrown lands in `evt.error`.\n\t\t\tif ( error instanceof Error ) {\n\t\t\t\tthis._handleError( error, evt );\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * The creation method.\n\t\t *\n\t\t * @protected\n\t\t * @member {Function} #_creator\n\t\t * @see #setCreator\n\t\t */\n\n\t\t/**\n\t\t * The destruction method.\n\t\t *\n\t\t * @protected\n\t\t * @member {Function} #_destructor\n\t\t * @see #setDestructor\n\t\t */\n\n\t\t/**\n\t\t * The watched item.\n\t\t *\n\t\t * @abstract\n\t\t * @protected\n\t\t * @member {Object|undefined} #_item\n\t\t */\n\n\t\t/**\n\t\t * The method responsible for restarting the watched item.\n\t\t *\n\t\t * @abstract\n\t\t * @protected\n\t\t * @method #_restart\n\t\t */\n\n\t\t/**\n\t\t * Traverses the error context and the watched item to find out whether the error should\n\t\t * be handled by the given item.\n\t\t *\n\t\t * @abstract\n\t\t * @protected\n\t\t * @method #_isErrorComingFromThisItem\n\t\t * @param {module:utils/ckeditorerror~CKEditorError} error\n\t\t */\n\n\t\t/**\n\t\t * A dictionary of event emitter listeners.\n\t\t *\n\t\t * @private\n\t\t * @type {Object.<String,Array.<Function>>}\n\t\t */\n\t\tthis._listeners = {};\n\n\t\tif ( !this._restart ) {\n\t\t\tthrow new Error(\n\t\t\t\t'The Watchdog class was split into the abstract `Watchdog` class and the `EditorWatchdog` class. ' +\n\t\t\t\t'Please, use `EditorWatchdog` if you have used the `Watchdog` class previously.'\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * Sets the function that is responsible for creating watched items.\n\t *\n\t * @param {Function} creator A callback responsible for creating an item. Returns a promise\n\t * that is resolved when the item is created.\n\t */\n\tsetCreator( creator ) {\n\t\tthis._creator = creator;\n\t}\n\n\t/**\n\t * Sets the function that is responsible for destroying watched items.\n\t *\n\t * @param {Function} destructor A callback that takes the item and returns the promise\n\t * to the destroying process.\n\t */\n\tsetDestructor( destructor ) {\n\t\tthis._destructor = destructor;\n\t}\n\n\t/**\n\t * Destroys the watchdog and releases the resources.\n\t */\n\tdestroy() {\n\t\tthis._stopErrorHandling();\n\n\t\tthis._listeners = {};\n\t}\n\n\t/**\n\t * Starts listening to a specific event name by registering a callback that will be executed\n\t * whenever an event with a given name fires.\n\t *\n\t * Note that this method differs from the CKEditor 5's default `EventEmitterMixin` implementation.\n\t *\n\t * @param {String} eventName The event name.\n\t * @param {Function} callback A callback which will be added to event listeners.\n\t */\n\ton( eventName, callback ) {\n\t\tif ( !this._listeners[ eventName ] ) {\n\t\t\tthis._listeners[ eventName ] = [];\n\t\t}\n\n\t\tthis._listeners[ eventName ].push( callback );\n\t}\n\n\t/**\n\t * Stops listening to the specified event name by removing the callback from event listeners.\n\t *\n\t * Note that this method differs from the CKEditor 5's default `EventEmitterMixin` implementation.\n\t *\n\t * @param {String} eventName The event name.\n\t * @param {Function} callback A callback which will be removed from event listeners.\n\t */\n\toff( eventName, callback ) {\n\t\tthis._listeners[ eventName ] = this._listeners[ eventName ]\n\t\t\t.filter( cb => cb !== callback );\n\t}\n\n\t/**\n\t * Fires an event with a given event name and arguments.\n\t *\n\t * Note that this method differs from the CKEditor 5's default `EventEmitterMixin` implementation.\n\t *\n\t * @protected\n\t * @param {String} eventName The event name.\n\t * @param  {...*} args Event arguments.\n\t */\n\t_fire( eventName, ...args ) {\n\t\tconst callbacks = this._listeners[ eventName ] || [];\n\n\t\tfor ( const callback of callbacks ) {\n\t\t\tcallback.apply( this, [ null, ...args ] );\n\t\t}\n\t}\n\n\t/**\n\t * Starts error handling by attaching global error handlers.\n\t *\n\t * @protected\n\t */\n\t_startErrorHandling() {\n\t\twindow.addEventListener( 'error', this._boundErrorHandler );\n\t\twindow.addEventListener( 'unhandledrejection', this._boundErrorHandler );\n\t}\n\n\t/**\n\t * Stops error handling by detaching global error handlers.\n\t *\n\t * @protected\n\t */\n\t_stopErrorHandling() {\n\t\twindow.removeEventListener( 'error', this._boundErrorHandler );\n\t\twindow.removeEventListener( 'unhandledrejection', this._boundErrorHandler );\n\t}\n\n\t/**\n\t * Checks if an error comes from the watched item and restarts it.\n\t * It reacts to {@link module:utils/ckeditorerror~CKEditorError `CKEditorError` errors} only.\n\t *\n\t * @private\n\t * @fires error\n\t * @param {Error} error Error.\n\t * @param {ErrorEvent|PromiseRejectionEvent} evt An error event.\n\t */\n\t_handleError( error, evt ) {\n\t\t// @if CK_DEBUG // if ( error.is && error.is( 'CKEditorError' ) && error.context === undefined ) {\n\t\t// @if CK_DEBUG // console.warn( 'The error is missing its context and Watchdog cannot restart the proper item.' );\n\t\t// @if CK_DEBUG // }\n\n\t\tif ( this._shouldReactToError( error ) ) {\n\t\t\tthis.crashes.push( {\n\t\t\t\tmessage: error.message,\n\t\t\t\tstack: error.stack,\n\n\t\t\t\t// `evt.filename`, `evt.lineno` and `evt.colno` are available only in ErrorEvent events\n\t\t\t\tfilename: evt.filename,\n\t\t\t\tlineno: evt.lineno,\n\t\t\t\tcolno: evt.colno,\n\t\t\t\tdate: this._now()\n\t\t\t} );\n\n\t\t\tconst causesRestart = this._shouldRestart();\n\n\t\t\tthis.state = 'crashed';\n\t\t\tthis._fire( 'stateChange' );\n\t\t\tthis._fire( 'error', { error, causesRestart } );\n\n\t\t\tif ( causesRestart ) {\n\t\t\t\tthis._restart();\n\t\t\t} else {\n\t\t\t\tthis.state = 'crashedPermanently';\n\t\t\t\tthis._fire( 'stateChange' );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Checks whether an error should be handled by the watchdog.\n\t *\n\t * @private\n\t * @param {Error} error An error that was caught by the error handling process.\n\t */\n\t_shouldReactToError( error ) {\n\t\treturn (\n\t\t\terror.is &&\n\t\t\terror.is( 'CKEditorError' ) &&\n\t\t\terror.context !== undefined &&\n\n\t\t\t// In some cases the watched item should not be restarted - e.g. during the item initialization.\n\t\t\t// That's why the `null` was introduced as a correct error context which does cause restarting.\n\t\t\terror.context !== null &&\n\n\t\t\t// Do not react to errors if the watchdog is in states other than `ready`.\n\t\t\tthis.state === 'ready' &&\n\n\t\t\tthis._isErrorComingFromThisItem( error )\n\t\t);\n\t}\n\n\t/**\n\t * Checks if the watchdog should restart the underlying item.\n\t *\n\t * @private\n\t */\n\t_shouldRestart() {\n\t\tif ( this.crashes.length <= this._crashNumberLimit ) {\n\t\t\treturn true;\n\t\t}\n\n\t\tconst lastErrorTime = this.crashes[ this.crashes.length - 1 ].date;\n\t\tconst firstMeaningfulErrorTime = this.crashes[ this.crashes.length - 1 - this._crashNumberLimit ].date;\n\n\t\tconst averageNonErrorTimePeriod = ( lastErrorTime - firstMeaningfulErrorTime ) / this._crashNumberLimit;\n\n\t\treturn averageNonErrorTimePeriod > this._minimumNonErrorTimePeriod;\n\t}\n\n\t/**\n\t * Fired when a new {@link module:utils/ckeditorerror~CKEditorError `CKEditorError`} error connected to the watchdog instance occurs\n\t * and the watchdog will react to it.\n\t *\n\t * \twatchdog.on( 'error', ( evt, { error, causesRestart } ) => {\n\t * \t\tconsole.log( 'An error occurred.' );\n\t * \t} );\n\t *\n\t * @event error\n\t */\n}\n\n/**\n * The watchdog plugin configuration.\n *\n * @typedef {Object} WatchdogConfig\n *\n * @property {Number} [crashNumberLimit=3] A threshold specifying the number of watched item crashes\n * when the watchdog stops restarting the item in case of errors.\n * After this limit is reached and the time between the last errors is shorter than `minimumNonErrorTimePeriod`,\n * the watchdog changes its state to `crashedPermanently` and it stops restarting the item. This prevents an infinite restart loop.\n *\n * @property {Number} [minimumNonErrorTimePeriod=5000] An average number of milliseconds between the last watched item errors\n * (defaults to 5000). When the period of time between errors is lower than that and the `crashNumberLimit` is also reached,\n * the watchdog changes its state to `crashedPermanently` and it stops restarting the item. This prevents an infinite restart loop.\n *\n * @property {Number} [saveInterval=5000] A minimum number of milliseconds between saving the editor data internally (defaults to 5000).\n * Note that for large documents this might impact the editor performance.\n */\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module watchdog/editorwatchdog\n */\n\n/* globals console */\n\nimport { throttle, cloneDeepWith, isElement } from 'lodash-es';\nimport areConnectedThroughProperties from './utils/areconnectedthroughproperties';\nimport Watchdog from './watchdog';\n\n/**\n * A watchdog for CKEditor 5 editors.\n *\n * See the {@glink features/watchdog Watchdog feature guide} to learn the rationale behind it and\n * how to use it.\n *\n * @extends {module:watchdog/watchdog~Watchdog}\n */\nexport default class EditorWatchdog extends Watchdog {\n\t/**\n\t * @param {*} Editor The editor class.\n\t * @param {module:watchdog/watchdog~WatchdogConfig} [watchdogConfig] The watchdog plugin configuration.\n\t */\n\tconstructor( Editor, watchdogConfig = {} ) {\n\t\tsuper( watchdogConfig );\n\n\t\t/**\n\t\t * The current editor instance.\n\t\t *\n\t\t * @private\n\t\t * @type {module:core/editor/editor~Editor}\n\t\t */\n\t\tthis._editor = null;\n\n\t\t/**\n\t\t * Throttled save method. The `save()` method is called the specified `saveInterval` after `throttledSave()` is called,\n\t\t * unless a new action happens in the meantime.\n\t\t *\n\t\t * @private\n\t\t * @type {Function}\n\t\t */\n\t\tthis._throttledSave = throttle(\n\t\t\tthis._save.bind( this ),\n\t\t\ttypeof watchdogConfig.saveInterval === 'number' ? watchdogConfig.saveInterval : 5000\n\t\t);\n\n\t\t/**\n\t\t * The latest saved editor data represented as a root name -> root data object.\n\t\t *\n\t\t * @private\n\t\t * @member {Object.<String,String>} #_data\n\t\t */\n\n\t\t/**\n\t\t * The last document version.\n\t\t *\n\t\t * @private\n\t\t * @member {Number} #_lastDocumentVersion\n\t\t */\n\n\t\t/**\n\t\t * The editor source element or data.\n\t\t *\n\t\t * @private\n\t\t * @member {HTMLElement|String|Object.<String|String>} #_elementOrData\n\t\t */\n\n\t\t/**\n\t\t * The editor configuration.\n\t\t *\n\t\t * @private\n\t\t * @member {Object|undefined} #_config\n\t\t */\n\n\t\t// Set default creator and destructor functions:\n\t\tthis._creator = ( ( elementOrData, config ) => Editor.create( elementOrData, config ) );\n\t\tthis._destructor = editor => editor.destroy();\n\t}\n\n\t/**\n\t * The current editor instance.\n\t *\n\t * @readonly\n\t * @type {module:core/editor/editor~Editor}\n\t */\n\tget editor() {\n\t\treturn this._editor;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tget _item() {\n\t\treturn this._editor;\n\t}\n\n\t/**\n\t * Sets the function that is responsible for the editor creation.\n\t * It expects a function that should return a promise.\n\t *\n\t *\t\twatchdog.setCreator( ( element, config ) => ClassicEditor.create( element, config ) );\n\t *\n\t * @method #setCreator\n\t * @param {Function} creator\n\t */\n\n\t/**\n\t * Sets the function that is responsible for the editor destruction.\n\t * Overrides the default destruction function, which destroys only the editor instance.\n\t * It expects a function that should return a promise or `undefined`.\n\t *\n\t *\t\twatchdog.setDestructor( editor => {\n\t *\t\t\t// Do something before the editor is destroyed.\n\t *\n\t *\t\t\treturn editor\n\t *\t\t\t\t.destroy()\n\t *\t\t\t\t.then( () => {\n\t *\t\t\t\t\t// Do something after the editor is destroyed.\n\t *\t\t\t\t} );\n\t *\t\t} );\n\t *\n\t * @method #setDestructor\n\t * @param {Function} destructor\n\t */\n\n\t/**\n\t * Restarts the editor instance. This method is called whenever an editor error occurs. It fires the `restart` event and changes\n\t * the state to `initializing`.\n\t *\n\t * @protected\n\t * @fires restart\n\t * @returns {Promise}\n\t */\n\t_restart() {\n\t\treturn Promise.resolve()\n\t\t\t.then( () => {\n\t\t\t\tthis.state = 'initializing';\n\t\t\t\tthis._fire( 'stateChange' );\n\n\t\t\t\treturn this._destroy();\n\t\t\t} )\n\t\t\t.catch( err => {\n\t\t\t\tconsole.error( 'An error happened during the editor destroying.', err );\n\t\t\t} )\n\t\t\t.then( () => {\n\t\t\t\tif ( typeof this._elementOrData === 'string' ) {\n\t\t\t\t\treturn this.create( this._data, this._config, this._config.context );\n\t\t\t\t} else {\n\t\t\t\t\tconst updatedConfig = Object.assign( {}, this._config, {\n\t\t\t\t\t\tinitialData: this._data\n\t\t\t\t\t} );\n\n\t\t\t\t\treturn this.create( this._elementOrData, updatedConfig, updatedConfig.context );\n\t\t\t\t}\n\t\t\t} )\n\t\t\t.then( () => {\n\t\t\t\tthis._fire( 'restart' );\n\t\t\t} );\n\t}\n\n\t/**\n\t * Creates the editor instance and keeps it running, using the defined creator and destructor.\n\t *\n\t * @param {HTMLElement|String|Object.<String|String>} [elementOrData] The editor source element or the editor data.\n\t * @param {module:core/editor/editorconfig~EditorConfig} [config] The editor configuration.\n\t * @param {Object} [context] A context for the editor.\n\t *\n\t * @returns {Promise}\n\t */\n\tcreate( elementOrData = this._elementOrData, config = this._config, context ) {\n\t\treturn Promise.resolve()\n\t\t\t.then( () => {\n\t\t\t\tsuper._startErrorHandling();\n\n\t\t\t\tthis._elementOrData = elementOrData;\n\n\t\t\t\t// Clone configuration because it might be shared within multiple watchdog instances. Otherwise,\n\t\t\t\t// when an error occurs in one of these editors, the watchdog will restart all of them.\n\t\t\t\tthis._config = this._cloneEditorConfiguration( config ) || {};\n\n\t\t\t\tthis._config.context = context;\n\n\t\t\t\treturn this._creator( elementOrData, this._config );\n\t\t\t} )\n\t\t\t.then( editor => {\n\t\t\t\tthis._editor = editor;\n\n\t\t\t\teditor.model.document.on( 'change:data', this._throttledSave );\n\n\t\t\t\tthis._lastDocumentVersion = editor.model.document.version;\n\t\t\t\tthis._data = this._getData();\n\n\t\t\t\tthis.state = 'ready';\n\t\t\t\tthis._fire( 'stateChange' );\n\t\t\t} );\n\t}\n\n\t/**\n\t * Destroys the watchdog and the current editor instance. It fires the callback\n\t * registered in {@link #setDestructor `setDestructor()`} and uses it to destroy the editor instance.\n\t * It also sets the state to `destroyed`.\n\t *\n\t * @returns {Promise}\n\t */\n\tdestroy() {\n\t\treturn Promise.resolve()\n\t\t\t.then( () => {\n\t\t\t\tthis.state = 'destroyed';\n\t\t\t\tthis._fire( 'stateChange' );\n\n\t\t\t\tsuper.destroy();\n\n\t\t\t\treturn this._destroy();\n\t\t\t} );\n\t}\n\n\t/**\n\t * @private\n\t * @returns {Promise}\n\t */\n\t_destroy() {\n\t\treturn Promise.resolve()\n\t\t\t.then( () => {\n\t\t\t\tthis._stopErrorHandling();\n\n\t\t\t\t// Save data if there is a remaining editor data change.\n\t\t\t\tthis._throttledSave.flush();\n\n\t\t\t\tconst editor = this._editor;\n\n\t\t\t\tthis._editor = null;\n\n\t\t\t\treturn this._destructor( editor );\n\t\t\t} );\n\t}\n\n\t/**\n\t * Saves the editor data, so it can be restored after the crash even if the data cannot be fetched at\n\t * the moment of the crash.\n\t *\n\t * @private\n\t */\n\t_save() {\n\t\tconst version = this._editor.model.document.version;\n\n\t\t// Operation may not result in a model change, so the document's version can be the same.\n\t\tif ( version === this._lastDocumentVersion ) {\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tthis._data = this._getData();\n\t\t\tthis._lastDocumentVersion = version;\n\t\t} catch ( err ) {\n\t\t\tconsole.error(\n\t\t\t\terr,\n\t\t\t\t'An error happened during restoring editor data. ' +\n\t\t\t\t'Editor will be restored from the previously saved data.'\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * @protected\n\t * @param {Set} props\n\t */\n\t_setExcludedProperties( props ) {\n\t\tthis._excludedProps = props;\n\t}\n\n\t/**\n\t * Returns the editor data.\n\t *\n\t * @private\n\t * @returns {Object<String,String>}\n\t */\n\t_getData() {\n\t\tconst data = {};\n\n\t\tfor ( const rootName of this._editor.model.document.getRootNames() ) {\n\t\t\tdata[ rootName ] = this._editor.data.get( { rootName } );\n\t\t}\n\n\t\treturn data;\n\t}\n\n\t/**\n\t * Traverses the error context and the current editor to find out whether these structures are connected\n\t * to each other via properties.\n\t *\n\t * @protected\n\t * @param {module:utils/ckeditorerror~CKEditorError} error\n\t */\n\t_isErrorComingFromThisItem( error ) {\n\t\treturn areConnectedThroughProperties( this._editor, error.context, this._excludedProps );\n\t}\n\n\t/**\n\t * Clones the editor configuration.\n\t *\n\t * @private\n\t * @param {Object} config\n\t */\n\t_cloneEditorConfiguration( config ) {\n\t\treturn cloneDeepWith( config, ( value, key ) => {\n\t\t\t// Leave DOM references.\n\t\t\tif ( isElement( value ) ) {\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t\tif ( key === 'context' ) {\n\t\t\t\treturn value;\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * Fired after the watchdog restarts the error in case of a crash.\n\t *\n\t * @event restart\n\t */\n}\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/uid\n */\n\n// A hash table of hex numbers to avoid using toString() in uid() which is costly.\n// [ '00', '01', '02', ..., 'fe', 'ff' ]\nconst HEX_NUMBERS = new Array( 256 ).fill()\n\t.map( ( val, index ) => ( '0' + ( index ).toString( 16 ) ).slice( -2 ) );\n\n/**\n * Returns a unique id. The id starts with an \"e\" character and a randomly generated string of\n * 32 alphanumeric characters.\n *\n * **Note**: The characters the unique id is built from correspond to the hex number notation\n * (from \"0\" to \"9\", from \"a\" to \"f\"). In other words, each id corresponds to an \"e\" followed\n * by 16 8-bit numbers next to each other.\n *\n * @returns {String} An unique id string.\n */\nexport default function uid() {\n\t// Let's create some positive random 32bit integers first.\n\t//\n\t// 1. Math.random() is a float between 0 and 1.\n\t// 2. 0x100000000 is 2^32 = 4294967296.\n\t// 3. >>> 0 enforces integer (in JS all numbers are floating point).\n\t//\n\t// For instance:\n\t//\t\tMath.random() * 0x100000000 = 3366450031.853859\n\t// but\n\t//\t\tMath.random() * 0x100000000 >>> 0 = 3366450031.\n\tconst r1 = Math.random() * 0x100000000 >>> 0;\n\tconst r2 = Math.random() * 0x100000000 >>> 0;\n\tconst r3 = Math.random() * 0x100000000 >>> 0;\n\tconst r4 = Math.random() * 0x100000000 >>> 0;\n\n\t// Make sure that id does not start with number.\n\treturn 'e' +\n\t\tHEX_NUMBERS[ r1 >> 0 & 0xFF ] +\n\t\tHEX_NUMBERS[ r1 >> 8 & 0xFF ] +\n\t\tHEX_NUMBERS[ r1 >> 16 & 0xFF ] +\n\t\tHEX_NUMBERS[ r1 >> 24 & 0xFF ] +\n\t\tHEX_NUMBERS[ r2 >> 0 & 0xFF ] +\n\t\tHEX_NUMBERS[ r2 >> 8 & 0xFF ] +\n\t\tHEX_NUMBERS[ r2 >> 16 & 0xFF ] +\n\t\tHEX_NUMBERS[ r2 >> 24 & 0xFF ] +\n\t\tHEX_NUMBERS[ r3 >> 0 & 0xFF ] +\n\t\tHEX_NUMBERS[ r3 >> 8 & 0xFF ] +\n\t\tHEX_NUMBERS[ r3 >> 16 & 0xFF ] +\n\t\tHEX_NUMBERS[ r3 >> 24 & 0xFF ] +\n\t\tHEX_NUMBERS[ r4 >> 0 & 0xFF ] +\n\t\tHEX_NUMBERS[ r4 >> 8 & 0xFF ] +\n\t\tHEX_NUMBERS[ r4 >> 16 & 0xFF ] +\n\t\tHEX_NUMBERS[ r4 >> 24 & 0xFF ];\n}\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module watchdog/contextwatchdog\n */\n\n/* globals console */\n\nimport Watchdog from './watchdog';\nimport EditorWatchdog from './editorwatchdog';\nimport areConnectedThroughProperties from './utils/areconnectedthroughproperties';\nimport getSubNodes from './utils/getsubnodes';\n\n/**\n * A watchdog for the {@link module:core/context~Context} class.\n *\n * See the {@glink features/watchdog Watchdog feature guide} to learn the rationale behind it and\n * how to use it.\n *\n * @extends {module:watchdog/watchdog~Watchdog}\n */\nexport default class ContextWatchdog extends Watchdog {\n\t/**\n\t * The context watchdog class constructor.\n\t *\n\t * \tconst watchdog = new ContextWatchdog( Context );\n\t *\n\t * \tawait watchdog.create( contextConfiguration );\n\t *\n\t * \tawait watchdog.add( item );\n\t *\n\t * See the {@glink features/watchdog Watchdog feature guide} to learn more how to use this feature.\n\t *\n\t * @param {Function} Context The {@link module:core/context~Context} class.\n\t * @param {module:watchdog/watchdog~WatchdogConfig} [watchdogConfig] The watchdog configuration.\n\t */\n\tconstructor( Context, watchdogConfig = {} ) {\n\t\tsuper( watchdogConfig );\n\n\t\t/**\n\t\t * A map of internal watchdogs for added items.\n\t\t *\n\t\t * @protected\n\t\t * @type {Map.<string,module:watchdog/watchdog~EditorWatchdog>}\n\t\t */\n\t\tthis._watchdogs = new Map();\n\n\t\t/**\n\t\t * The watchdog configuration.\n\t\t *\n\t\t * @private\n\t\t * @type {module:watchdog/watchdog~WatchdogConfig}\n\t\t */\n\t\tthis._watchdogConfig = watchdogConfig;\n\n\t\t/**\n\t\t * The current context instance.\n\t\t *\n\t\t * @private\n\t\t * @type {module:core/context~Context|null}\n\t\t */\n\t\tthis._context = null;\n\n\t\t/**\n\t\t * Context properties (nodes/references) that are gathered during the initial context creation\n\t\t * and are used to distinguish the origin of an error.\n\t\t *\n\t\t * @private\n\t\t * @type {Set.<*>}\n\t\t */\n\t\tthis._contextProps = new Set();\n\n\t\t/**\n\t\t * An action queue, which is used to handle async functions queuing.\n\t\t *\n\t\t * @private\n\t\t * @type {ActionQueue}\n\t\t */\n\t\tthis._actionQueue = new ActionQueue();\n\n\t\t/**\n\t\t * The configuration for the {@link module:core/context~Context}.\n\t\t *\n\t\t * @private\n\t\t * @member {Object} #_contextConfig\n\t\t */\n\n\t\t/**\n\t\t * The context configuration.\n\t\t *\n\t\t * @private\n\t\t * @member {Object|undefined} #_config\n\t\t */\n\n\t\t// Default creator and destructor.\n\t\tthis._creator = contextConfig => Context.create( contextConfig );\n\t\tthis._destructor = context => context.destroy();\n\n\t\tthis._actionQueue.onEmpty( () => {\n\t\t\tif ( this.state === 'initializing' ) {\n\t\t\t\tthis.state = 'ready';\n\t\t\t\tthis._fire( 'stateChange' );\n\t\t\t}\n\t\t} );\n\n\t\t/**\n\t\t * Sets the function that is responsible for the context creation.\n\t\t * It expects a function that should return a promise (or `undefined`).\n\t\t *\n\t\t *\t\twatchdog.setCreator( config => Context.create( config ) );\n\t\t *\n\t\t * @method #setCreator\n\t\t * @param {Function} creator\n\t\t */\n\n\t\t/**\n\t\t * Sets the function that is responsible for the context destruction.\n\t\t * Overrides the default destruction function, which destroys only the context instance.\n\t\t * It expects a function that should return a promise (or `undefined`).\n\t\t *\n\t\t *\t\twatchdog.setDestructor( context => {\n\t\t *\t\t\t// Do something before the context is destroyed.\n\t\t *\n\t\t *\t\t\treturn context\n\t\t *\t\t\t\t.destroy()\n\t\t *\t\t\t\t.then( () => {\n\t\t *\t\t\t\t\t// Do something after the context is destroyed.\n\t\t *\t\t\t\t} );\n\t\t *\t\t} );\n\t\t *\n\t\t * @method #setDestructor\n\t\t * @param {Function} destructor\n\t\t */\n\t}\n\n\t/**\n\t * The context instance. Keep in mind that this property might be changed when the context watchdog restarts,\n\t * so do not keep this instance internally. Always operate on the `ContextWatchdog#context` property.\n\t *\n\t * @type {module:core/context~Context|null}\n\t */\n\tget context() {\n\t\treturn this._context;\n\t}\n\n\t/**\n\t * Initializes the context watchdog. Once it is created, the watchdog takes care about\n\t * recreating the context and the provided items, and starts the error handling mechanism.\n\t *\n\t * \tawait watchdog.create( {\n\t * \t\tplugins: []\n\t * \t} );\n\t *\n\t * @param {Object} [contextConfig] The context configuration. See {@link module:core/context~Context}.\n\t * @returns {Promise}\n\t */\n\tcreate( contextConfig = {} ) {\n\t\treturn this._actionQueue.enqueue( () => {\n\t\t\tthis._contextConfig = contextConfig;\n\n\t\t\treturn this._create();\n\t\t} );\n\t}\n\n\t/**\n\t * Returns an item instance with the given `itemId`.\n\t *\n\t * \tconst editor1 = watchdog.getItem( 'editor1' );\n\t *\n\t * @param {String} itemId The item ID.\n\t * @returns {*} The item instance or `undefined` if an item with a given ID has not been found.\n\t */\n\tgetItem( itemId ) {\n\t\tconst watchdog = this._getWatchdog( itemId );\n\n\t\treturn watchdog._item;\n\t}\n\n\t/**\n\t * Gets the state of the given item. See {@link #state} for a list of available states.\n\t *\n\t * \tconst editor1State = watchdog.getItemState( 'editor1' );\n\t *\n\t * @param {String} itemId Item ID.\n\t * @returns {'initializing'|'ready'|'crashed'|'crashedPermanently'|'destroyed'} The state of the item.\n\t */\n\tgetItemState( itemId ) {\n\t\tconst watchdog = this._getWatchdog( itemId );\n\n\t\treturn watchdog.state;\n\t}\n\n\t/**\n\t * Adds items to the watchdog. Once created, instances of these items will be available using the {@link #getItem} method.\n\t *\n\t * Items can be passed together as an array of objects:\n\t *\n\t * \tawait watchdog.add( [ {\n\t *\t\tid: 'editor1',\n\t *\t\ttype: 'editor',\n\t *\t\tsourceElementOrData: document.querySelector( '#editor' ),\n\t *\t\tconfig: {\n\t *\t\t\tplugins: [ Essentials, Paragraph, Bold, Italic ],\n\t *\t\t\ttoolbar: [ 'bold', 'italic', 'alignment' ]\n\t *\t\t},\n\t *\t\tcreator: ( element, config ) => ClassicEditor.create( element, config )\n\t *\t} ] );\n\t *\n\t * Or one by one as objects:\n\t *\n\t * \tawait watchdog.add( {\n\t *\t\tid: 'editor1',\n\t *\t\ttype: 'editor',\n\t *\t\tsourceElementOrData: document.querySelector( '#editor' ),\n\t *\t\tconfig: {\n\t *\t\t\tplugins: [ Essentials, Paragraph, Bold, Italic ],\n\t *\t\t\ttoolbar: [ 'bold', 'italic', 'alignment' ]\n\t *\t\t},\n\t *\t\tcreator: ( element, config ) => ClassicEditor.create( element, config )\n\t *\t] );\n\t *\n\t * Then an instance can be retrieved using the {@link #getItem} method:\n\t *\n\t * \tconst editor1 = watchdog.getItem( 'editor1' );\n\t *\n\t * Note that this method can be called multiple times, but for performance reasons it is better\n\t * to pass all items together.\n\t *\n\t * @param {module:watchdog/contextwatchdog~WatchdogItemConfiguration|Array.<module:watchdog/contextwatchdog~WatchdogItemConfiguration>}\n\t * itemConfigurationOrItemConfigurations An item configuration object or an array of item configurations.\n\t * @returns {Promise}\n\t */\n\tadd( itemConfigurationOrItemConfigurations ) {\n\t\tconst itemConfigurations = Array.isArray( itemConfigurationOrItemConfigurations ) ?\n\t\t\titemConfigurationOrItemConfigurations :\n\t\t\t[ itemConfigurationOrItemConfigurations ];\n\n\t\treturn this._actionQueue.enqueue( () => {\n\t\t\tif ( this.state === 'destroyed' ) {\n\t\t\t\tthrow new Error( 'Cannot add items to destroyed watchdog.' );\n\t\t\t}\n\n\t\t\tif ( !this._context ) {\n\t\t\t\tthrow new Error( 'Context was not created yet. You should call the `ContextWatchdog#create()` method first.' );\n\t\t\t}\n\n\t\t\t// Create new watchdogs.\n\t\t\treturn Promise.all( itemConfigurations.map( item => {\n\t\t\t\tlet watchdog;\n\n\t\t\t\tif ( this._watchdogs.has( item.id ) ) {\n\t\t\t\t\tthrow new Error( `Item with the given id is already added: '${ item.id }'.` );\n\t\t\t\t}\n\n\t\t\t\tif ( item.type === 'editor' ) {\n\t\t\t\t\twatchdog = new EditorWatchdog( this._watchdogConfig );\n\t\t\t\t\twatchdog.setCreator( item.creator );\n\t\t\t\t\twatchdog._setExcludedProperties( this._contextProps );\n\n\t\t\t\t\tif ( item.destructor ) {\n\t\t\t\t\t\twatchdog.setDestructor( item.destructor );\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._watchdogs.set( item.id, watchdog );\n\n\t\t\t\t\t// Enqueue the internal watchdog errors within the main queue.\n\t\t\t\t\t// And propagate the internal `error` events as `itemError` event.\n\t\t\t\t\twatchdog.on( 'error', ( evt, { error, causesRestart } ) => {\n\t\t\t\t\t\tthis._fire( 'itemError', { itemId: item.id, error } );\n\n\t\t\t\t\t\t// Do not enqueue the item restart action if the item will not restart.\n\t\t\t\t\t\tif ( !causesRestart ) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis._actionQueue.enqueue( () => new Promise( res => {\n\t\t\t\t\t\t\twatchdog.on( 'restart', rethrowRestartEventOnce.bind( this ) );\n\n\t\t\t\t\t\t\tfunction rethrowRestartEventOnce() {\n\t\t\t\t\t\t\t\twatchdog.off( 'restart', rethrowRestartEventOnce );\n\n\t\t\t\t\t\t\t\tthis._fire( 'itemRestart', { itemId: item.id } );\n\n\t\t\t\t\t\t\t\tres();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} ) );\n\t\t\t\t\t} );\n\n\t\t\t\t\treturn watchdog.create( item.sourceElementOrData, item.config, this._context );\n\t\t\t\t} else {\n\t\t\t\t\tthrow new Error( `Not supported item type: '${ item.type }'.` );\n\t\t\t\t}\n\t\t\t} ) );\n\t\t} );\n\t}\n\n\t/**\n\t * Removes and destroys item(s) with given ID(s).\n\t *\n\t * \tawait watchdog.remove( 'editor1' );\n\t *\n\t * Or\n\t *\n\t * \tawait watchdog.remove( [ 'editor1', 'editor2' ] );\n\t *\n\t * @param {Array.<String>|String} itemIdOrItemIds Item ID or an array of item IDs.\n\t * @returns {Promise}\n\t */\n\tremove( itemIdOrItemIds ) {\n\t\tconst itemIds = Array.isArray( itemIdOrItemIds ) ?\n\t\t\titemIdOrItemIds :\n\t\t\t[ itemIdOrItemIds ];\n\n\t\treturn this._actionQueue.enqueue( () => {\n\t\t\treturn Promise.all( itemIds.map( itemId => {\n\t\t\t\tconst watchdog = this._getWatchdog( itemId );\n\n\t\t\t\tthis._watchdogs.delete( itemId );\n\n\t\t\t\treturn watchdog.destroy();\n\t\t\t} ) );\n\t\t} );\n\t}\n\n\t/**\n\t * Destroys the context watchdog and all added items.\n\t * Once the context watchdog is destroyed, new items cannot be added.\n\t *\n\t * \tawait watchdog.destroy();\n\t *\n\t * @returns {Promise}\n\t */\n\tdestroy() {\n\t\treturn this._actionQueue.enqueue( () => {\n\t\t\tthis.state = 'destroyed';\n\t\t\tthis._fire( 'stateChange' );\n\n\t\t\tsuper.destroy();\n\n\t\t\treturn this._destroy();\n\t\t} );\n\t}\n\n\t/**\n\t * Restarts the context watchdog.\n\t *\n\t * @protected\n\t * @returns {Promise}\n\t */\n\t_restart() {\n\t\treturn this._actionQueue.enqueue( () => {\n\t\t\tthis.state = 'initializing';\n\t\t\tthis._fire( 'stateChange' );\n\n\t\t\treturn this._destroy()\n\t\t\t\t.catch( err => {\n\t\t\t\t\tconsole.error( 'An error happened during destroying the context or items.', err );\n\t\t\t\t} )\n\t\t\t\t.then( () => this._create() )\n\t\t\t\t.then( () => this._fire( 'restart' ) );\n\t\t} );\n\t}\n\n\t/**\n\t * @private\n\t * @returns {Promise}\n\t */\n\t_create() {\n\t\treturn Promise.resolve()\n\t\t\t.then( () => {\n\t\t\t\tthis._startErrorHandling();\n\n\t\t\t\treturn this._creator( this._contextConfig );\n\t\t\t} )\n\t\t\t.then( context => {\n\t\t\t\tthis._context = context;\n\t\t\t\tthis._contextProps = getSubNodes( this._context );\n\n\t\t\t\treturn Promise.all(\n\t\t\t\t\tArray.from( this._watchdogs.values() )\n\t\t\t\t\t\t.map( watchdog => {\n\t\t\t\t\t\t\twatchdog._setExcludedProperties( this._contextProps );\n\n\t\t\t\t\t\t\treturn watchdog.create( undefined, undefined, this._context );\n\t\t\t\t\t\t} )\n\t\t\t\t);\n\t\t\t} );\n\t}\n\n\t/**\n\t * Destroys the context instance and all added items.\n\t *\n\t * @private\n\t * @returns {Promise}\n\t */\n\t_destroy() {\n\t\treturn Promise.resolve()\n\t\t\t.then( () => {\n\t\t\t\tthis._stopErrorHandling();\n\n\t\t\t\tconst context = this._context;\n\n\t\t\t\tthis._context = null;\n\t\t\t\tthis._contextProps = new Set();\n\n\t\t\t\treturn Promise.all(\n\t\t\t\t\tArray.from( this._watchdogs.values() )\n\t\t\t\t\t\t.map( watchdog => watchdog.destroy() )\n\t\t\t\t)\n\t\t\t\t\t// Context destructor destroys each editor.\n\t\t\t\t\t.then( () => this._destructor( context ) );\n\t\t\t} );\n\t}\n\n\t/**\n\t * Returns the watchdog for a given item ID.\n\t *\n\t * @protected\n\t * @param {String} itemId Item ID.\n\t * @returns {module:watchdog/watchdog~Watchdog} Watchdog\n\t */\n\t_getWatchdog( itemId ) {\n\t\tconst watchdog = this._watchdogs.get( itemId );\n\n\t\tif ( !watchdog ) {\n\t\t\tthrow new Error( `Item with the given id was not registered: ${ itemId }.` );\n\t\t}\n\n\t\treturn watchdog;\n\t}\n\n\t/**\n\t * Checks whether an error comes from the context instance and not from the item instances.\n\t *\n\t * @protected\n\t * @param {Error} error\n\t * @returns {Boolean}\n\t */\n\t_isErrorComingFromThisItem( error ) {\n\t\tfor ( const watchdog of this._watchdogs.values() ) {\n\t\t\tif ( watchdog._isErrorComingFromThisItem( error ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn areConnectedThroughProperties( this._context, error.context );\n\t}\n\n\t/**\n\t * Fired after the watchdog restarts the context and the added items because of a crash.\n\t *\n\t * \twatchdog.on( 'restart', () => {\n\t * \t\tconsole.log( 'The context has been restarted.' );\n\t * \t} );\n\t *\n\t * @event restart\n\t */\n\n\t/**\n\t * Fired when a new error occurred in one of the added items.\n\t *\n\t * \twatchdog.on( 'itemError', ( evt, { error, itemId, causesRestart } ) => {\n\t *\t\tconsole.log( `An error occurred in an item with the '${ itemId }' ID.` );\n\t * \t} );\n\t *\n\t * @event itemError\n\t */\n\n\t/**\n\t * Fired after an item has been restarted.\n\t *\n\t * \twatchdog.on( 'itemRestart', ( evt, { itemId } ) => {\n\t *\t\tconsole.log( 'An item with with the '${ itemId }' ID has been restarted.' );\n\t * \t} );\n\t *\n\t * @event itemRestart\n\t */\n}\n\n// An action queue that allows queuing async functions.\nclass ActionQueue {\n\tconstructor() {\n\t\t// @type {Promise}\n\t\tthis._promiseQueue = Promise.resolve();\n\n\t\t// @type {Array.<Function>}\n\t\tthis._onEmptyCallbacks = [];\n\t}\n\n\t// Used to register callbacks that will be run when the queue becomes empty.\n\t//\n\t// @param {Function} onEmptyCallback A callback that will be run whenever the queue becomes empty.\n\tonEmpty( onEmptyCallback ) {\n\t\tthis._onEmptyCallbacks.push( onEmptyCallback );\n\t}\n\n\t// It adds asynchronous actions (functions) to the queue and runs them one by one.\n\t//\n\t// @param {Function} action A function that should be enqueued.\n\t// @returns {Promise}\n\tenqueue( action ) {\n\t\tlet nonErrorQueue;\n\n\t\tconst queueWithAction = this._promiseQueue\n\t\t\t.then( action )\n\t\t\t.then( () => {\n\t\t\t\tif ( this._promiseQueue === nonErrorQueue ) {\n\t\t\t\t\tthis._onEmptyCallbacks.forEach( cb => cb() );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t// Catch all errors in the main queue to stack promises even if an error occurred in the past.\n\t\tnonErrorQueue = this._promiseQueue = queueWithAction.catch( () => { } );\n\n\t\treturn queueWithAction;\n\t}\n}\n\n/**\n * The watchdog item configuration interface.\n *\n * @typedef {module:watchdog/contextwatchdog~EditorWatchdogConfiguration} module:watchdog/contextwatchdog~WatchdogItemConfiguration\n */\n\n/**\n * The editor watchdog configuration interface specifies how editors should be created and destroyed.\n *\n * @typedef {Object} module:watchdog/contextwatchdog~EditorWatchdogConfiguration\n *\n * @property {String} id A unique item identificator.\n *\n * @property {'editor'} type The type of the item to create. At the moment, only `'editor'` is supported.\n *\n * @property {Function} creator A function that initializes the item (the editor). The function takes editor initialization arguments\n * and should return a promise. For example: `( el, config ) => ClassicEditor.create( el, config )`.\n *\n * @property {Function} [destructor] A function that destroys the item instance (the editor). The function\n * takes an item and should return a promise. For example: `editor => editor.destroy()`\n *\n * @property {String|HTMLElement} sourceElementOrData The source element or data that will be passed\n * as the first argument to the `Editor.create()` method.\n *\n * @property {Object} config An editor configuration.\n */\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport ContextWatchdog from '@ckeditor/ckeditor5-watchdog/src/contextwatchdog';\n\nexport const ContextWatchdogContext = React.createContext( 'contextWatchdog' );\n\nexport default class CKEditorContext extends React.Component {\n\tconstructor( props, context ) {\n\t\tsuper( props, context );\n\n\t\tthis.contextWatchdog = null;\n\n\t\tif ( this.props.isLayoutReady ) {\n\t\t\tthis._initializeContextWatchdog( this.props.config );\n\t\t}\n\t}\n\n\tshouldComponentUpdate( nextProps ) {\n\t\t// If the configuration changes then the ContextWatchdog needs to be destroyed and recreated\n\t\t// On top of the new configuration.\n\t\tif ( nextProps.id !== this.props.id ) {\n\t\t\tif ( this.contextWatchdog ) {\n\t\t\t\tthis.contextWatchdog.destroy();\n\t\t\t}\n\n\t\t\tthis._initializeContextWatchdog( nextProps.config );\n\t\t}\n\n\t\tif ( nextProps.isLayoutReady && !this.contextWatchdog ) {\n\t\t\tthis._initializeContextWatchdog( nextProps.config );\n\n\t\t\treturn true;\n\t\t}\n\n\t\t// Rerender the component only when children has changed.\n\t\treturn this.props.children !== nextProps.children;\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<ContextWatchdogContext.Provider value={ this.contextWatchdog } >\n\t\t\t\t{ this.props.children }\n\t\t\t</ContextWatchdogContext.Provider>\n\t\t);\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis._destroyContext();\n\t}\n\n\t_initializeContextWatchdog( config ) {\n\t\tthis.contextWatchdog = new ContextWatchdog( this.props.context );\n\n\t\tthis.contextWatchdog.create( config )\n\t\t\t.catch( error => {\n\t\t\t\tthis.props.onError( error, {\n\t\t\t\t\tphase: 'initialization',\n\t\t\t\t\twillContextRestart: false\n\t\t\t\t} );\n\t\t\t} );\n\n\t\tthis.contextWatchdog.on( 'error', ( _, errorEvent ) => {\n\t\t\tthis.props.onError( errorEvent.error, {\n\t\t\t\tphase: 'runtime',\n\t\t\t\twillContextRestart: errorEvent.causesRestart\n\t\t\t} );\n\t\t} );\n\n\t\tthis.contextWatchdog.on( 'stateChange', () => {\n\t\t\tif ( this.contextWatchdog.state === 'ready' && this.props.onReady ) {\n\t\t\t\tthis.props.onReady( this.contextWatchdog.context );\n\t\t\t}\n\t\t} );\n\t}\n\n\t_destroyContext() {\n\t\tif ( this.contextWatchdog ) {\n\t\t\tthis.contextWatchdog.destroy();\n\t\t\tthis.contextWatchdog = null;\n\t\t}\n\t}\n}\n\nCKEditorContext.defaultProps = {\n\tisLayoutReady: true,\n\tonError: ( error, details ) => console.error( error, details )\n};\n\n// Properties definition.\nCKEditorContext.propTypes = {\n\tid: PropTypes.string,\n\tisLayoutReady: PropTypes.bool,\n\tcontext: PropTypes.func,\n\tconfig: PropTypes.object,\n\tonReady: PropTypes.func,\n\tonError: PropTypes.func\n};\n\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport EditorWatchdog from '@ckeditor/ckeditor5-watchdog/src/editorwatchdog';\nimport uid from '@ckeditor/ckeditor5-utils/src/uid';\nimport { ContextWatchdogContext } from './ckeditorcontext.jsx';\nimport ContextWatchdog from '@ckeditor/ckeditor5-watchdog/src/contextwatchdog';\n\nexport default class CKEditor extends React.Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\t// After mounting the editor, the variable will contain a reference to the created editor.\n\t\t// @see: https://ckeditor.com/docs/ckeditor5/latest/api/module_core_editor_editor-Editor.html\n\t\tthis.domContainer = React.createRef();\n\n\t\t/**\n\t\t * An instance of EditorWatchdog or an instance of EditorWatchdog-like adapter for ContextWatchdog.\n\t\t *\n\t\t * @type {EditorWatchdog|EditorWatchdogAdapter}\n\t\t */\n\t\tthis.watchdog = null;\n\t}\n\n\t/**\n\t * An editor instance.\n\t */\n\tget editor() {\n\t\tif ( !this.watchdog ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this.watchdog.editor;\n\t}\n\n\t// The CKEditor component should not be updated by React itself.\n\t// However, if the component identifier changes, the whole structure should be created once again.\n\tshouldComponentUpdate( nextProps ) {\n\t\tif ( !this.editor ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Only when the editor component changes the whole structure should be restarted.\n\t\tif ( nextProps.id !== this.props.id ) {\n\t\t\tthis._destroyEditor();\n\n\t\t\treturn true;\n\t\t}\n\n\t\tif ( this._shouldUpdateEditor( nextProps ) ) {\n\t\t\tthis.editor.setData( nextProps.data );\n\t\t}\n\n\t\tif ( 'disabled' in nextProps ) {\n\t\t\tthis.editor.isReadOnly = nextProps.disabled;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t// Initialize the editor when the component is mounted.\n\tcomponentDidMount() {\n\t\tthis._initializeEditor();\n\t}\n\n\t// Initialize the editor when the component is updated as it should be destroyed before the update.\n\tcomponentDidUpdate() {\n\t\tthis._initializeEditor();\n\t}\n\n\t// Destroy the editor before unmouting the component.\n\tcomponentWillUnmount() {\n\t\tthis._destroyEditor();\n\t}\n\n\t// Render a <div> element which will be replaced by CKEditor.\n\trender() {\n\t\treturn (\n\t\t\t<div ref={ this.domContainer }></div>\n\t\t);\n\t}\n\n\t/**\n\t * Initializes the editor by creating a proper watchdog and initializing it with the editor's configuration.\n\t */\n\t_initializeEditor() {\n\t\tif ( this.context instanceof ContextWatchdog ) {\n\t\t\tthis.watchdog = new EditorWatchdogAdapter( this.context );\n\t\t} else {\n\t\t\tthis.watchdog = new EditorWatchdog( this.editor );\n\t\t}\n\n\t\tthis.watchdog.setCreator( ( el, config ) => this._createEditor( el, config ) );\n\n\t\tthis.watchdog.on( 'error', ( _, { error, causesRestart } ) => {\n\t\t\tthis.props.onError( error, { phase: 'runtime', willEditorRestart: causesRestart } );\n\t\t} );\n\n\t\tthis.watchdog.create( this.domContainer.current, this._getConfig() )\n\t\t\t.catch( error => this.props.onError( error, { phase: 'initialization', willEditorRestart: false } ) );\n\t}\n\n\t/**\n\t * Creates an editor from the element and configuration.\n\t *\n\t * @param {HTMLElement} element The source element.\n\t * @param {Object} config CKEditor 5 editor configuration.\n\t * @returns {Promise}\n\t */\n\t_createEditor( element, config ) {\n\t\treturn this.props.editor.create( element, config )\n\t\t\t.then( editor => {\n\t\t\t\tif ( 'disabled' in this.props ) {\n\t\t\t\t\teditor.isReadOnly = this.props.disabled;\n\t\t\t\t}\n\n\t\t\t\tconst modelDocument = editor.model.document;\n\t\t\t\tconst viewDocument = editor.editing.view.document;\n\n\t\t\t\tmodelDocument.on( 'change:data', event => {\n\t\t\t\t\t/* istanbul ignore else */\n\t\t\t\t\tif ( this.props.onChange ) {\n\t\t\t\t\t\tthis.props.onChange( event, editor );\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t\tviewDocument.on( 'focus', event => {\n\t\t\t\t\t/* istanbul ignore else */\n\t\t\t\t\tif ( this.props.onFocus ) {\n\t\t\t\t\t\tthis.props.onFocus( event, editor );\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t\tviewDocument.on( 'blur', event => {\n\t\t\t\t\t/* istanbul ignore else */\n\t\t\t\t\tif ( this.props.onBlur ) {\n\t\t\t\t\t\tthis.props.onBlur( event, editor );\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t\t// The `onReady` callback should be fired once the `editor` property\n\t\t\t\t// can be reached from the `<CKEditor>` component.\n\t\t\t\t// Ideally this part should be moved to the watchdog item creator listeners.\n\t\t\t\tsetTimeout( () => {\n\t\t\t\t\tif ( this.props.onReady ) {\n\t\t\t\t\t\tthis.props.onReady( this.editor );\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t\treturn editor;\n\t\t\t} );\n\t}\n\n\t/**\n\t * Destroys the editor by destroying the watchdog.\n\t */\n\t_destroyEditor() {\n\t\tthis.watchdog.destroy();\n\t\tthis.watchdog = null;\n\t}\n\n\t/**\n\t * Returns true when the editor should be updated.\n\t *\n\t * @param {*} nextProps React's properties.\n\t * @returns {Boolean}\n\t */\n\t_shouldUpdateEditor( nextProps ) {\n\t\t// Check whether `nextProps.data` is equal to `this.props.data` is required if somebody defined the `#data`\n\t\t// property as a static string and updated a state of component when the editor's content has been changed.\n\t\t// If we avoid checking those properties, the editor's content will back to the initial value because\n\t\t// the state has been changed and React will call this method.\n\t\tif ( this.props.data === nextProps.data ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// We should not change data if the editor's content is equal to the `#data` property.\n\t\tif ( this.editor.getData() === nextProps.data ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t_getConfig() {\n\t\tif ( this.props.data && this.props.config.initialData ) {\n\t\t\tconsole.warn(\n\t\t\t\t'Editor data should be provided either using `config.initialData` or `data` properties. ' +\n\t\t\t\t'The config property is over the data value and the first one will be used when specified both.'\n\t\t\t);\n\t\t}\n\n\t\t// Merge two possible ways of providing data into the `config.initialData` field.\n\t\treturn {\n\t\t\t...this.props.config,\n\t\t\tinitialData: this.props.config.initialData || this.props.data || ''\n\t\t};\n\t}\n}\n\n/**\n * An adapter aligning the context watchdog API to the editor watchdog API for easier usage.\n */\nclass EditorWatchdogAdapter {\n\t/**\n\t * @param {ContextWatchdog} contextWatchdog The context watchdog instance that will be wrapped into wditor watchdog API.\n\t */\n\tconstructor( contextWatchdog ) {\n\t\tthis._contextWatchdog = contextWatchdog;\n\n\t\t/**\n\t\t * A unique id for the adapter to distinguish editor items when using the context watchdog API.\n\t\t *\n\t\t * @type {String}\n\t\t */\n\t\tthis._id = uid();\n\t}\n\n\t/**\n\t *  @param {Function} creator A watchdog's editor creator function.\n\t */\n\tsetCreator( creator ) {\n\t\tthis._creator = creator;\n\t}\n\n\t/**\n\t * Adds an editor configuration to the context watchdog registry. Creates an instance of it.\n\t *\n\t * @param {HTMLElement | string} sourceElementOrData A source element or data for the new editor.\n\t * @param {Object} config CKEditor 5 editor config.\n\t * @returns {Promise}\n\t */\n\tcreate( sourceElementOrData, config ) {\n\t\treturn this._contextWatchdog.add( {\n\t\t\tsourceElementOrData,\n\t\t\tconfig,\n\t\t\tcreator: this._creator,\n\t\t\tid: this._id,\n\t\t\ttype: 'editor'\n\t\t} );\n\t}\n\n\t/**\n\t * Creates a listener that is attached to context watchdog's item and run when the context watchdog fires.\n\t * Currently works only for the `error` event.\n\t *\n\t * @param {String} _\n\t * @param {Function} callback\n\t */\n\ton( _, callback ) {\n\t\t// Assume that the event name was error.\n\t\tthis._contextWatchdog.on( 'itemError', ( _, { itemId, causesRestart, error } ) => {\n\t\t\tif ( itemId === this._id ) {\n\t\t\t\tcallback( null, { error, causesRestart } );\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * Removes the editor from registered editors and destroys it.\n\t */\n\tdestroy() {\n\t\tthis._contextWatchdog.remove( this._id );\n\t}\n\n\t/**\n\t * An editor instance.\n\t */\n\tget editor() {\n\t\t// TODO - try/catch should not be necessary as `getItem` could return `null` instead of throwing errors.\n\t\ttry {\n\t\t\treturn this._contextWatchdog.getItem( this._id );\n\t\t} catch ( err ) {\n\t\t\treturn null;\n\t\t}\n\t}\n}\n\nCKEditor.contextType = ContextWatchdogContext;\n\n// Properties definition.\nCKEditor.propTypes = {\n\teditor: PropTypes.func.isRequired,\n\tdata: PropTypes.string,\n\tconfig: PropTypes.object,\n\tonChange: PropTypes.func,\n\tonReady: PropTypes.func,\n\tonFocus: PropTypes.func,\n\tonBlur: PropTypes.func,\n\tonError: PropTypes.func,\n\tdisabled: PropTypes.bool,\n\tonInit: ( props, propName ) => {\n\t\tif ( props[ propName ] ) {\n\t\t\treturn new Error(\n\t\t\t\t'The \"onInit\" property is not supported anymore by the CKEditor component. Use the \"onReady\" property instead.'\n\t\t\t);\n\t\t}\n\t}\n};\n\n// Default values for non-required properties.\nCKEditor.defaultProps = {\n\tconfig: {},\n\tonError: ( error, details ) => console.error( error, details )\n};\n","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nexport default stubFalse;\n","import HTMLReactParser from './index.js';\n\nexport var domToReact = HTMLReactParser.domToReact;\nexport var htmlToDOM = HTMLReactParser.htmlToDOM;\nexport var attributesToProps = HTMLReactParser.attributesToProps;\n\nexport default HTMLReactParser;\n","function createThunkMiddleware(extraArgument) {\n  return function (_ref) {\n    var dispatch = _ref.dispatch,\n        getState = _ref.getState;\n    return function (next) {\n      return function (action) {\n        if (typeof action === 'function') {\n          return action(dispatch, getState, extraArgument);\n        }\n\n        return next(action);\n      };\n    };\n  };\n}\n\nvar thunk = createThunkMiddleware();\nthunk.withExtraArgument = createThunkMiddleware;\n\nexport default thunk;","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nexport default overArg;\n","import overArg from './_overArg.js';\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nexport default getPrototype;\n","import baseGetTag from './_baseGetTag.js';\nimport getPrototype from './_getPrototype.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n    funcToString.call(Ctor) == objectCtorString;\n}\n\nexport default isPlainObject;\n","/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nexport default listCacheClear;\n","import eq from './eq.js';\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nexport default assocIndexOf;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nexport default listCacheDelete;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nexport default listCacheGet;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\nexport default listCacheHas;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nexport default listCacheSet;\n","import listCacheClear from './_listCacheClear.js';\nimport listCacheDelete from './_listCacheDelete.js';\nimport listCacheGet from './_listCacheGet.js';\nimport listCacheHas from './_listCacheHas.js';\nimport listCacheSet from './_listCacheSet.js';\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nexport default ListCache;\n","import ListCache from './_ListCache.js';\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\nexport default stackClear;\n","/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\nexport default stackDelete;\n","/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\nexport default stackGet;\n","/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\nexport default stackHas;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nexport default Map;\n","import getNative from './_getNative.js';\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nexport default nativeCreate;\n","import nativeCreate from './_nativeCreate.js';\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\nexport default hashClear;\n","/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nexport default hashDelete;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\nexport default hashGet;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\nexport default hashHas;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\nexport default hashSet;\n","import hashClear from './_hashClear.js';\nimport hashDelete from './_hashDelete.js';\nimport hashGet from './_hashGet.js';\nimport hashHas from './_hashHas.js';\nimport hashSet from './_hashSet.js';\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\nexport default Hash;\n","import Hash from './_Hash.js';\nimport ListCache from './_ListCache.js';\nimport Map from './_Map.js';\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\nexport default mapCacheClear;\n","/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nexport default isKeyable;\n","import isKeyable from './_isKeyable.js';\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nexport default getMapData;\n","import getMapData from './_getMapData.js';\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nexport default mapCacheDelete;\n","import getMapData from './_getMapData.js';\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\nexport default mapCacheGet;\n","import getMapData from './_getMapData.js';\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\nexport default mapCacheHas;\n","import getMapData from './_getMapData.js';\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nexport default mapCacheSet;\n","import mapCacheClear from './_mapCacheClear.js';\nimport mapCacheDelete from './_mapCacheDelete.js';\nimport mapCacheGet from './_mapCacheGet.js';\nimport mapCacheHas from './_mapCacheHas.js';\nimport mapCacheSet from './_mapCacheSet.js';\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\nexport default MapCache;\n","import ListCache from './_ListCache.js';\nimport Map from './_Map.js';\nimport MapCache from './_MapCache.js';\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\nexport default stackSet;\n","import ListCache from './_ListCache.js';\nimport stackClear from './_stackClear.js';\nimport stackDelete from './_stackDelete.js';\nimport stackGet from './_stackGet.js';\nimport stackHas from './_stackHas.js';\nimport stackSet from './_stackSet.js';\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\nexport default Stack;\n","/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\nexport default arrayEach;\n","import overArg from './_overArg.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nexport default nativeKeys;\n","import isPrototype from './_isPrototype.js';\nimport nativeKeys from './_nativeKeys.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default baseKeys;\n","import arrayLikeKeys from './_arrayLikeKeys.js';\nimport baseKeys from './_baseKeys.js';\nimport isArrayLike from './isArrayLike.js';\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nexport default keys;\n","import copyObject from './_copyObject.js';\nimport keys from './keys.js';\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\nexport default baseAssign;\n","import copyObject from './_copyObject.js';\nimport keysIn from './keysIn.js';\n\n/**\n * The base implementation of `_.assignIn` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssignIn(object, source) {\n  return object && copyObject(source, keysIn(source), object);\n}\n\nexport default baseAssignIn;\n","/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\nexport default copyArray;\n","/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nexport default arrayFilter;\n","/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\nexport default stubArray;\n","import arrayFilter from './_arrayFilter.js';\nimport stubArray from './stubArray.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\nexport default getSymbols;\n","import copyObject from './_copyObject.js';\nimport getSymbols from './_getSymbols.js';\n\n/**\n * Copies own symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\nexport default copySymbols;\n","/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nexport default arrayPush;\n","import arrayPush from './_arrayPush.js';\nimport getPrototype from './_getPrototype.js';\nimport getSymbols from './_getSymbols.js';\nimport stubArray from './stubArray.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own and inherited enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbolsIn = !nativeGetSymbols ? stubArray : function(object) {\n  var result = [];\n  while (object) {\n    arrayPush(result, getSymbols(object));\n    object = getPrototype(object);\n  }\n  return result;\n};\n\nexport default getSymbolsIn;\n","import copyObject from './_copyObject.js';\nimport getSymbolsIn from './_getSymbolsIn.js';\n\n/**\n * Copies own and inherited symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbolsIn(source, object) {\n  return copyObject(source, getSymbolsIn(source), object);\n}\n\nexport default copySymbolsIn;\n","import arrayPush from './_arrayPush.js';\nimport isArray from './isArray.js';\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\nexport default baseGetAllKeys;\n","import baseGetAllKeys from './_baseGetAllKeys.js';\nimport getSymbols from './_getSymbols.js';\nimport keys from './keys.js';\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\nexport default getAllKeys;\n","import baseGetAllKeys from './_baseGetAllKeys.js';\nimport getSymbolsIn from './_getSymbolsIn.js';\nimport keysIn from './keysIn.js';\n\n/**\n * Creates an array of own and inherited enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeysIn(object) {\n  return baseGetAllKeys(object, keysIn, getSymbolsIn);\n}\n\nexport default getAllKeysIn;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView');\n\nexport default DataView;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Promise = getNative(root, 'Promise');\n\nexport default Promise;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Set = getNative(root, 'Set');\n\nexport default Set;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar WeakMap = getNative(root, 'WeakMap');\n\nexport default WeakMap;\n","import DataView from './_DataView.js';\nimport Map from './_Map.js';\nimport Promise from './_Promise.js';\nimport Set from './_Set.js';\nimport WeakMap from './_WeakMap.js';\nimport baseGetTag from './_baseGetTag.js';\nimport toSource from './_toSource.js';\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    setTag = '[object Set]',\n    weakMapTag = '[object WeakMap]';\n\nvar dataViewTag = '[object DataView]';\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\nexport default getTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = new array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\nexport default initCloneArray;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Uint8Array = root.Uint8Array;\n\nexport default Uint8Array;\n","import Uint8Array from './_Uint8Array.js';\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\nexport default cloneArrayBuffer;\n","import cloneArrayBuffer from './_cloneArrayBuffer.js';\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\nexport default cloneDataView;\n","/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\nexport default cloneRegExp;\n","import Symbol from './_Symbol.js';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\nexport default cloneSymbol;\n","import cloneArrayBuffer from './_cloneArrayBuffer.js';\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\nexport default cloneTypedArray;\n","import cloneArrayBuffer from './_cloneArrayBuffer.js';\nimport cloneDataView from './_cloneDataView.js';\nimport cloneRegExp from './_cloneRegExp.js';\nimport cloneSymbol from './_cloneSymbol.js';\nimport cloneTypedArray from './_cloneTypedArray.js';\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Map`, `Number`, `RegExp`, `Set`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return new Ctor;\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return new Ctor;\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\nexport default initCloneByTag;\n","import isObject from './isObject.js';\n\n/** Built-in value references. */\nvar objectCreate = Object.create;\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} proto The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nvar baseCreate = (function() {\n  function object() {}\n  return function(proto) {\n    if (!isObject(proto)) {\n      return {};\n    }\n    if (objectCreate) {\n      return objectCreate(proto);\n    }\n    object.prototype = proto;\n    var result = new object;\n    object.prototype = undefined;\n    return result;\n  };\n}());\n\nexport default baseCreate;\n","import baseCreate from './_baseCreate.js';\nimport getPrototype from './_getPrototype.js';\nimport isPrototype from './_isPrototype.js';\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\nexport default initCloneObject;\n","import getTag from './_getTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]';\n\n/**\n * The base implementation of `_.isMap` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n */\nfunction baseIsMap(value) {\n  return isObjectLike(value) && getTag(value) == mapTag;\n}\n\nexport default baseIsMap;\n","import baseIsMap from './_baseIsMap.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsMap = nodeUtil && nodeUtil.isMap;\n\n/**\n * Checks if `value` is classified as a `Map` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n * @example\n *\n * _.isMap(new Map);\n * // => true\n *\n * _.isMap(new WeakMap);\n * // => false\n */\nvar isMap = nodeIsMap ? baseUnary(nodeIsMap) : baseIsMap;\n\nexport default isMap;\n","import getTag from './_getTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar setTag = '[object Set]';\n\n/**\n * The base implementation of `_.isSet` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n */\nfunction baseIsSet(value) {\n  return isObjectLike(value) && getTag(value) == setTag;\n}\n\nexport default baseIsSet;\n","import baseIsSet from './_baseIsSet.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsSet = nodeUtil && nodeUtil.isSet;\n\n/**\n * Checks if `value` is classified as a `Set` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n * @example\n *\n * _.isSet(new Set);\n * // => true\n *\n * _.isSet(new WeakSet);\n * // => false\n */\nvar isSet = nodeIsSet ? baseUnary(nodeIsSet) : baseIsSet;\n\nexport default isSet;\n","import Stack from './_Stack.js';\nimport arrayEach from './_arrayEach.js';\nimport assignValue from './_assignValue.js';\nimport baseAssign from './_baseAssign.js';\nimport baseAssignIn from './_baseAssignIn.js';\nimport cloneBuffer from './_cloneBuffer.js';\nimport copyArray from './_copyArray.js';\nimport copySymbols from './_copySymbols.js';\nimport copySymbolsIn from './_copySymbolsIn.js';\nimport getAllKeys from './_getAllKeys.js';\nimport getAllKeysIn from './_getAllKeysIn.js';\nimport getTag from './_getTag.js';\nimport initCloneArray from './_initCloneArray.js';\nimport initCloneByTag from './_initCloneByTag.js';\nimport initCloneObject from './_initCloneObject.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isMap from './isMap.js';\nimport isObject from './isObject.js';\nimport isSet from './isSet.js';\nimport keys from './keys.js';\nimport keysIn from './keysIn.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_FLAT_FLAG = 2,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Deep clone\n *  2 - Flatten inherited properties\n *  4 - Clone symbols\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, bitmask, customizer, key, object, stack) {\n  var result,\n      isDeep = bitmask & CLONE_DEEP_FLAG,\n      isFlat = bitmask & CLONE_FLAT_FLAG,\n      isFull = bitmask & CLONE_SYMBOLS_FLAG;\n\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      result = (isFlat || isFunc) ? {} : initCloneObject(value);\n      if (!isDeep) {\n        return isFlat\n          ? copySymbolsIn(value, baseAssignIn(result, value))\n          : copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (isSet(value)) {\n    value.forEach(function(subValue) {\n      result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));\n    });\n  } else if (isMap(value)) {\n    value.forEach(function(subValue, key) {\n      result.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));\n    });\n  }\n\n  var keysFunc = isFull\n    ? (isFlat ? getAllKeysIn : getAllKeys)\n    : (isFlat ? keysIn : keys);\n\n  var props = isArr ? undefined : keysFunc(value);\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));\n  });\n  return result;\n}\n\nexport default baseClone;\n","import baseClone from './_baseClone.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * This method is like `_.cloneWith` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @param {Function} [customizer] The function to customize cloning.\n * @returns {*} Returns the deep cloned value.\n * @see _.cloneWith\n * @example\n *\n * function customizer(value) {\n *   if (_.isElement(value)) {\n *     return value.cloneNode(true);\n *   }\n * }\n *\n * var el = _.cloneDeepWith(document.body, customizer);\n *\n * console.log(el === document.body);\n * // => false\n * console.log(el.nodeName);\n * // => 'BODY'\n * console.log(el.childNodes.length);\n * // => 20\n */\nfunction cloneDeepWith(value, customizer) {\n  customizer = typeof customizer == 'function' ? customizer : undefined;\n  return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG, customizer);\n}\n\nexport default cloneDeepWith;\n","import isObjectLike from './isObjectLike.js';\nimport isPlainObject from './isPlainObject.js';\n\n/**\n * Checks if `value` is likely a DOM element.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a DOM element, else `false`.\n * @example\n *\n * _.isElement(document.body);\n * // => true\n *\n * _.isElement('<body>');\n * // => false\n */\nfunction isElement(value) {\n  return isObjectLike(value) && value.nodeType === 1 && !isPlainObject(value);\n}\n\nexport default isElement;\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/config\n */\n\nimport { isPlainObject, isElement, cloneDeepWith } from 'lodash-es';\n\n/**\n * Handles a configuration dictionary.\n */\nexport default class Config {\n\t/**\n\t * Creates an instance of the {@link ~Config} class.\n\t *\n\t * @param {Object} [configurations] The initial configurations to be set. Usually, provided by the user.\n\t * @param {Object} [defaultConfigurations] The default configurations. Usually, provided by the system.\n\t */\n\tconstructor( configurations, defaultConfigurations ) {\n\t\t/**\n\t\t * Store for the whole configuration.\n\t\t *\n\t\t * @private\n\t\t * @member {Object}\n\t\t */\n\t\tthis._config = {};\n\n\t\t// Set default configuration.\n\t\tif ( defaultConfigurations ) {\n\t\t\t// Clone the configuration to make sure that the properties will not be shared\n\t\t\t// between editors and make the watchdog feature work correctly.\n\t\t\tthis.define( cloneConfig( defaultConfigurations ) );\n\t\t}\n\n\t\t// Set initial configuration.\n\t\tif ( configurations ) {\n\t\t\tthis._setObjectToTarget( this._config, configurations );\n\t\t}\n\t}\n\n\t/**\n\t * Set configuration values.\n\t *\n\t * It accepts both a name/value pair or an object, which properties and values will be used to set\n\t * configurations.\n\t *\n\t * It also accepts setting a \"deep configuration\" by using dots in the name. For example, `'resize.width'` sets\n\t * the value for the `width` configuration in the `resize` subset.\n\t *\n\t *\t\tconfig.set( 'width', 500 );\n\t *\t\tconfig.set( 'toolbar.collapsed', true );\n\t *\n\t *\t\t// Equivalent to:\n\t *\t\tconfig.set( {\n\t *\t\t\twidth: 500\n\t *\t\t\ttoolbar: {\n\t *\t\t\t\tcollapsed: true\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t * Passing an object as the value will amend the configuration, not replace it.\n\t *\n\t *\t\tconfig.set( 'toolbar', {\n\t *\t\t\tcollapsed: true,\n\t *\t\t} );\n\t *\n\t *\t\tconfig.set( 'toolbar', {\n\t *\t\t\tcolor: 'red',\n\t *\t\t} );\n\t *\n\t *\t\tconfig.get( 'toolbar.collapsed' ); // true\n\t *\t\tconfig.get( 'toolbar.color' ); // 'red'\n\t *\n\t * @param {String|Object} name The configuration name or an object from which take properties as\n\t * configuration entries. Configuration names are case-sensitive.\n\t * @param {*} value The configuration value. Used if a name is passed.\n\t */\n\tset( name, value ) {\n\t\tthis._setToTarget( this._config, name, value );\n\t}\n\n\t/**\n\t * Does exactly the same as {@link #set} with one exception – passed configuration extends\n\t * existing one, but does not overwrite already defined values.\n\t *\n\t * This method is supposed to be called by plugin developers to setup plugin's configurations. It would be\n\t * rarely used for other needs.\n\t *\n\t * @param {String|Object} name The configuration name or an object from which take properties as\n\t * configuration entries. Configuration names are case-sensitive.\n\t * @param {*} value The configuration value. Used if a name is passed.\n\t */\n\tdefine( name, value ) {\n\t\tconst isDefine = true;\n\n\t\tthis._setToTarget( this._config, name, value, isDefine );\n\t}\n\n\t/**\n\t * Gets the value for a configuration entry.\n\t *\n\t *\t\tconfig.get( 'name' );\n\t *\n\t * Deep configurations can be retrieved by separating each part with a dot.\n\t *\n\t *\t\tconfig.get( 'toolbar.collapsed' );\n\t *\n\t * @param {String} name The configuration name. Configuration names are case-sensitive.\n\t * @returns {*} The configuration value or `undefined` if the configuration entry was not found.\n\t */\n\tget( name ) {\n\t\treturn this._getFromSource( this._config, name );\n\t}\n\n\t/**\n\t * Iterates over all top level configuration names.\n\t *\n\t * @returns {Iterable.<String>}\n\t */\n\t* names() {\n\t\tfor ( const name of Object.keys( this._config ) ) {\n\t\t\tyield name;\n\t\t}\n\t}\n\n\t/**\n\t * Saves passed configuration to the specified target (nested object).\n\t *\n\t * @private\n\t * @param {Object} target Nested config object.\n\t * @param {String|Object} name The configuration name or an object from which take properties as\n\t * configuration entries. Configuration names are case-sensitive.\n\t * @param {*} value The configuration value. Used if a name is passed.\n\t * @param {Boolean} [isDefine=false] Define if passed configuration should overwrite existing one.\n\t */\n\t_setToTarget( target, name, value, isDefine = false ) {\n\t\t// In case of an object, iterate through it and call `_setToTarget` again for each property.\n\t\tif ( isPlainObject( name ) ) {\n\t\t\tthis._setObjectToTarget( target, name, isDefine );\n\n\t\t\treturn;\n\t\t}\n\n\t\t// The configuration name should be split into parts if it has dots. E.g. `resize.width` -> [`resize`, `width`].\n\t\tconst parts = name.split( '.' );\n\n\t\t// Take the name of the configuration out of the parts. E.g. `resize.width` -> `width`.\n\t\tname = parts.pop();\n\n\t\t// Iterate over parts to check if currently stored configuration has proper structure.\n\t\tfor ( const part of parts ) {\n\t\t\t// If there is no object for specified part then create one.\n\t\t\tif ( !isPlainObject( target[ part ] ) ) {\n\t\t\t\ttarget[ part ] = {};\n\t\t\t}\n\n\t\t\t// Nested object becomes a target.\n\t\t\ttarget = target[ part ];\n\t\t}\n\n\t\t// In case of value is an object.\n\t\tif ( isPlainObject( value ) ) {\n\t\t\t// We take care of proper config structure.\n\t\t\tif ( !isPlainObject( target[ name ] ) ) {\n\t\t\t\ttarget[ name ] = {};\n\t\t\t}\n\n\t\t\ttarget = target[ name ];\n\n\t\t\t// And iterate through this object calling `_setToTarget` again for each property.\n\t\t\tthis._setObjectToTarget( target, value, isDefine );\n\n\t\t\treturn;\n\t\t}\n\n\t\t// Do nothing if we are defining configuration for non empty name.\n\t\tif ( isDefine && typeof target[ name ] != 'undefined' ) {\n\t\t\treturn;\n\t\t}\n\n\t\ttarget[ name ] = value;\n\t}\n\n\t/**\n\t * Get specified configuration from specified source (nested object).\n\t *\n\t * @private\n\t * @param {Object} source level of nested object.\n\t * @param {String} name The configuration name. Configuration names are case-sensitive.\n\t * @returns {*} The configuration value or `undefined` if the configuration entry was not found.\n\t */\n\t_getFromSource( source, name ) {\n\t\t// The configuration name should be split into parts if it has dots. E.g. `resize.width` -> [`resize`, `width`].\n\t\tconst parts = name.split( '.' );\n\n\t\t// Take the name of the configuration out of the parts. E.g. `resize.width` -> `width`.\n\t\tname = parts.pop();\n\n\t\t// Iterate over parts to check if currently stored configuration has proper structure.\n\t\tfor ( const part of parts ) {\n\t\t\tif ( !isPlainObject( source[ part ] ) ) {\n\t\t\t\tsource = null;\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t// Nested object becomes a source.\n\t\t\tsource = source[ part ];\n\t\t}\n\n\t\t// Always returns undefined for non existing configuration.\n\t\treturn source ? cloneConfig( source[ name ] ) : undefined;\n\t}\n\n\t/**\n\t * Iterates through passed object and calls {@link #_setToTarget} method with object key and value for each property.\n\t *\n\t * @private\n\t * @param {Object} target Nested config object.\n\t * @param {Object} configuration Configuration data set\n\t * @param {Boolean} [isDefine] Defines if passed configuration is default configuration or not.\n\t */\n\t_setObjectToTarget( target, configuration, isDefine ) {\n\t\tObject.keys( configuration ).forEach( key => {\n\t\t\tthis._setToTarget( target, key, configuration[ key ], isDefine );\n\t\t} );\n\t}\n}\n\n// Clones configuration object or value.\n// @param {*} source Source configuration\n// @returns {*} Cloned configuration value.\nfunction cloneConfig( source ) {\n\treturn cloneDeepWith( source, leaveDOMReferences );\n}\n\n// A customized function for cloneDeepWith.\n// It will leave references to DOM Elements instead of cloning them.\n//\n// @param {*} value\n// @returns {Element|undefined}\nfunction leaveDOMReferences( value ) {\n\treturn isElement( value ) ? value : undefined;\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/collection\n */\n\nimport EmitterMixin from './emittermixin';\nimport CKEditorError from './ckeditorerror';\nimport uid from './uid';\nimport isIterable from './isiterable';\nimport mix from './mix';\n\n/**\n * Collections are ordered sets of objects. Items in the collection can be retrieved by their indexes\n * in the collection (like in an array) or by their ids.\n *\n * If an object without an `id` property is being added to the collection, the `id` property will be generated\n * automatically. Note that the automatically generated id is unique only within this single collection instance.\n *\n * By default an item in the collection is identified by its `id` property. The name of the identifier can be\n * configured through the constructor of the collection.\n *\n * @mixes module:utils/emittermixin~EmitterMixin\n */\nexport default class Collection {\n\t/**\n\t * Creates a new Collection instance.\n\t *\n\t * You can provide an iterable of initial items the collection will be created with:\n\t *\n\t *\t\tconst collection = new Collection( [ { id: 'John' }, { id: 'Mike' } ] );\n\t *\n\t *\t\tconsole.log( collection.get( 0 ) ); // -> { id: 'John' }\n\t *\t\tconsole.log( collection.get( 1 ) ); // -> { id: 'Mike' }\n\t *\t\tconsole.log( collection.get( 'Mike' ) ); // -> { id: 'Mike' }\n\t *\n\t * Or you can first create a collection and then add new items using the {@link #add} method:\n\t *\n\t *\t\tconst collection = new Collection();\n\t *\n\t *\t\tcollection.add( { id: 'John' } );\n\t *\t\tconsole.log( collection.get( 0 ) ); // -> { id: 'John' }\n\t *\n\t * Whatever option you choose, you can always pass a configuration object as the last argument\n\t * of the constructor:\n\t *\n\t *\t\tconst emptyCollection = new Collection( { idProperty: 'name' } );\n\t *\t\temptyCollection.add( { name: 'John' } );\n\t *\t\tconsole.log( collection.get( 'John' ) ); // -> { name: 'John' }\n\t *\n\t *\t\tconst nonEmptyCollection = new Collection( [ { name: 'John' } ], { idProperty: 'name' } );\n\t *\t\tnonEmptyCollection.add( { name: 'George' } );\n\t *\t\tconsole.log( collection.get( 'George' ) ); // -> { name: 'George' }\n\t *\t\tconsole.log( collection.get( 'John' ) ); // -> { name: 'John' }\n\t *\n\t * @param {Iterable.<Object>|Object} initialItemsOrOptions The initial items of the collection or\n\t * the options object.\n\t * @param {Object} [options={}] The options object, when the first argument is an array of initial items.\n\t * @param {String} [options.idProperty='id'] The name of the property which is used to identify an item.\n\t * Items that do not have such a property will be assigned one when added to the collection.\n\t */\n\tconstructor( initialItemsOrOptions = {}, options = {} ) {\n\t\tconst hasInitialItems = isIterable( initialItemsOrOptions );\n\n\t\tif ( !hasInitialItems ) {\n\t\t\toptions = initialItemsOrOptions;\n\t\t}\n\n\t\t/**\n\t\t * The internal list of items in the collection.\n\t\t *\n\t\t * @private\n\t\t * @member {Object[]}\n\t\t */\n\t\tthis._items = [];\n\n\t\t/**\n\t\t * The internal map of items in the collection.\n\t\t *\n\t\t * @private\n\t\t * @member {Map}\n\t\t */\n\t\tthis._itemMap = new Map();\n\n\t\t/**\n\t\t * The name of the property which is considered to identify an item.\n\t\t *\n\t\t * @private\n\t\t * @member {String}\n\t\t */\n\t\tthis._idProperty = options.idProperty || 'id';\n\n\t\t/**\n\t\t * A helper mapping external items of a bound collection ({@link #bindTo})\n\t\t * and actual items of this collection. It provides information\n\t\t * necessary to properly remove items bound to another collection.\n\t\t *\n\t\t * See {@link #_bindToInternalToExternalMap}.\n\t\t *\n\t\t * @protected\n\t\t * @member {WeakMap}\n\t\t */\n\t\tthis._bindToExternalToInternalMap = new WeakMap();\n\n\t\t/**\n\t\t * A helper mapping items of this collection to external items of a bound collection\n\t\t * ({@link #bindTo}). It provides information necessary to manage the bindings, e.g.\n\t\t * to avoid loops in two–way bindings.\n\t\t *\n\t\t * See {@link #_bindToExternalToInternalMap}.\n\t\t *\n\t\t * @protected\n\t\t * @member {WeakMap}\n\t\t */\n\t\tthis._bindToInternalToExternalMap = new WeakMap();\n\n\t\t/**\n\t\t * Stores indexes of skipped items from bound external collection.\n\t\t *\n\t\t * @private\n\t\t * @member {Array}\n\t\t */\n\t\tthis._skippedIndexesFromExternal = [];\n\n\t\t// Set the initial content of the collection (if provided in the constructor).\n\t\tif ( hasInitialItems ) {\n\t\t\tfor ( const item of initialItemsOrOptions ) {\n\t\t\t\tthis._items.push( item );\n\t\t\t\tthis._itemMap.set( this._getItemIdBeforeAdding( item ), item );\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * A collection instance this collection is bound to as a result\n\t\t * of calling {@link #bindTo} method.\n\t\t *\n\t\t * @protected\n\t\t * @member {module:utils/collection~Collection} #_bindToCollection\n\t\t */\n\t}\n\n\t/**\n\t * The number of items available in the collection.\n\t *\n\t * @member {Number} #length\n\t */\n\tget length() {\n\t\treturn this._items.length;\n\t}\n\n\t/**\n\t * Returns the first item from the collection or null when collection is empty.\n\t *\n\t * @returns {Object|null} The first item or `null` if collection is empty.\n\t */\n\tget first() {\n\t\treturn this._items[ 0 ] || null;\n\t}\n\n\t/**\n\t * Returns the last item from the collection or null when collection is empty.\n\t *\n\t * @returns {Object|null} The last item or `null` if collection is empty.\n\t */\n\tget last() {\n\t\treturn this._items[ this.length - 1 ] || null;\n\t}\n\n\t/**\n\t * Adds an item into the collection.\n\t *\n\t * If the item does not have an id, then it will be automatically generated and set on the item.\n\t *\n\t * @chainable\n\t * @param {Object} item\n\t * @param {Number} [index] The position of the item in the collection. The item\n\t * is pushed to the collection when `index` not specified.\n\t * @fires add\n\t * @fires change\n\t */\n\tadd( item, index ) {\n\t\treturn this.addMany( [ item ], index );\n\t}\n\n\t/**\n\t * Adds multiple items into the collection.\n\t *\n\t * Any item not containing an id will get an automatically generated one.\n\t *\n\t * @chainable\n\t * @param {Iterable.<Object>} item\n\t * @param {Number} [index] The position of the insertion. Items will be appended if no `index` is specified.\n\t * @fires add\n\t * @fires change\n\t */\n\taddMany( items, index ) {\n\t\tif ( index === undefined ) {\n\t\t\tindex = this._items.length;\n\t\t} else if ( index > this._items.length || index < 0 ) {\n\t\t\t/**\n\t\t\t * The `index` passed to {@link module:utils/collection~Collection#addMany `Collection#addMany()`}\n\t\t\t * is invalid. It must be a number between 0 and the collection's length.\n\t\t\t *\n\t\t\t * @error collection-add-item-invalid-index\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'collection-add-item-invalid-index', this );\n\t\t}\n\n\t\tfor ( let offset = 0; offset < items.length; offset++ ) {\n\t\t\tconst item = items[ offset ];\n\t\t\tconst itemId = this._getItemIdBeforeAdding( item );\n\t\t\tconst currentItemIndex = index + offset;\n\n\t\t\tthis._items.splice( currentItemIndex, 0, item );\n\t\t\tthis._itemMap.set( itemId, item );\n\n\t\t\tthis.fire( 'add', item, currentItemIndex );\n\t\t}\n\n\t\tthis.fire( 'change', {\n\t\t\tadded: items,\n\t\t\tremoved: [],\n\t\t\tindex\n\t\t} );\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Gets an item by its ID or index.\n\t *\n\t * @param {String|Number} idOrIndex The item ID or index in the collection.\n\t * @returns {Object|null} The requested item or `null` if such item does not exist.\n\t */\n\tget( idOrIndex ) {\n\t\tlet item;\n\n\t\tif ( typeof idOrIndex == 'string' ) {\n\t\t\titem = this._itemMap.get( idOrIndex );\n\t\t} else if ( typeof idOrIndex == 'number' ) {\n\t\t\titem = this._items[ idOrIndex ];\n\t\t} else {\n\t\t\t/**\n\t\t\t * An index or ID must be given.\n\t\t\t *\n\t\t\t * @error collection-get-invalid-arg\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'collection-get-invalid-arg', this );\n\t\t}\n\n\t\treturn item || null;\n\t}\n\n\t/**\n\t * Returns a Boolean indicating whether the collection contains an item.\n\t *\n\t * @param {Object|String} itemOrId The item or its ID in the collection.\n\t * @returns {Boolean} `true` if the collection contains the item, `false` otherwise.\n\t */\n\thas( itemOrId ) {\n\t\tif ( typeof itemOrId == 'string' ) {\n\t\t\treturn this._itemMap.has( itemOrId );\n\t\t} else { // Object\n\t\t\tconst idProperty = this._idProperty;\n\t\t\tconst id = itemOrId[ idProperty ];\n\n\t\t\treturn this._itemMap.has( id );\n\t\t}\n\t}\n\n\t/**\n\t * Gets an index of an item in the collection.\n\t * When an item is not defined in the collection, the index will equal -1.\n\t *\n\t * @param {Object|String} itemOrId The item or its ID in the collection.\n\t * @returns {Number} The index of a given item.\n\t */\n\tgetIndex( itemOrId ) {\n\t\tlet item;\n\n\t\tif ( typeof itemOrId == 'string' ) {\n\t\t\titem = this._itemMap.get( itemOrId );\n\t\t} else {\n\t\t\titem = itemOrId;\n\t\t}\n\n\t\treturn this._items.indexOf( item );\n\t}\n\n\t/**\n\t * Removes an item from the collection.\n\t *\n\t * @param {Object|Number|String} subject The item to remove, its ID or index in the collection.\n\t * @returns {Object} The removed item.\n\t * @fires remove\n\t * @fires change\n\t */\n\tremove( subject ) {\n\t\tconst [ item, index ] = this._remove( subject );\n\n\t\tthis.fire( 'change', {\n\t\t\tadded: [],\n\t\t\tremoved: [ item ],\n\t\t\tindex\n\t\t} );\n\n\t\treturn item;\n\t}\n\n\t/**\n\t * Executes the callback for each item in the collection and composes an array or values returned by this callback.\n\t *\n\t * @param {Function} callback\n\t * @param {Object} callback.item\n\t * @param {Number} callback.index\n\t * @param {Object} ctx Context in which the `callback` will be called.\n\t * @returns {Array} The result of mapping.\n\t */\n\tmap( callback, ctx ) {\n\t\treturn this._items.map( callback, ctx );\n\t}\n\n\t/**\n\t * Finds the first item in the collection for which the `callback` returns a true value.\n\t *\n\t * @param {Function} callback\n\t * @param {Object} callback.item\n\t * @param {Number} callback.index\n\t * @param {Object} ctx Context in which the `callback` will be called.\n\t * @returns {Object} The item for which `callback` returned a true value.\n\t */\n\tfind( callback, ctx ) {\n\t\treturn this._items.find( callback, ctx );\n\t}\n\n\t/**\n\t * Returns an array with items for which the `callback` returned a true value.\n\t *\n\t * @param {Function} callback\n\t * @param {Object} callback.item\n\t * @param {Number} callback.index\n\t * @param {Object} ctx Context in which the `callback` will be called.\n\t * @returns {Object[]} The array with matching items.\n\t */\n\tfilter( callback, ctx ) {\n\t\treturn this._items.filter( callback, ctx );\n\t}\n\n\t/**\n\t * Removes all items from the collection and destroys the binding created using\n\t * {@link #bindTo}.\n\t *\n\t * @fires remove\n\t * @fires change\n\t */\n\tclear() {\n\t\tif ( this._bindToCollection ) {\n\t\t\tthis.stopListening( this._bindToCollection );\n\t\t\tthis._bindToCollection = null;\n\t\t}\n\n\t\tconst removedItems = Array.from( this._items );\n\n\t\twhile ( this.length ) {\n\t\t\tthis._remove( 0 );\n\t\t}\n\n\t\tthis.fire( 'change', {\n\t\t\tadded: [],\n\t\t\tremoved: removedItems,\n\t\t\tindex: 0\n\t\t} );\n\t}\n\n\t/**\n\t * Binds and synchronizes the collection with another one.\n\t *\n\t * The binding can be a simple factory:\n\t *\n\t *\t\tclass FactoryClass {\n\t *\t\t\tconstructor( data ) {\n\t *\t\t\t\tthis.label = data.label;\n\t *\t\t\t}\n\t *\t\t}\n\t *\n\t *\t\tconst source = new Collection( { idProperty: 'label' } );\n\t *\t\tconst target = new Collection();\n\t *\n\t *\t\ttarget.bindTo( source ).as( FactoryClass );\n\t *\n\t *\t\tsource.add( { label: 'foo' } );\n\t *\t\tsource.add( { label: 'bar' } );\n\t *\n\t *\t\tconsole.log( target.length ); // 2\n\t *\t\tconsole.log( target.get( 1 ).label ); // 'bar'\n\t *\n\t *\t\tsource.remove( 0 );\n\t *\t\tconsole.log( target.length ); // 1\n\t *\t\tconsole.log( target.get( 0 ).label ); // 'bar'\n\t *\n\t * or the factory driven by a custom callback:\n\t *\n\t *\t\tclass FooClass {\n\t *\t\t\tconstructor( data ) {\n\t *\t\t\t\tthis.label = data.label;\n\t *\t\t\t}\n\t *\t\t}\n\t *\n\t *\t\tclass BarClass {\n\t *\t\t\tconstructor( data ) {\n\t *\t\t\t\tthis.label = data.label;\n\t *\t\t\t}\n\t *\t\t}\n\t *\n\t *\t\tconst source = new Collection( { idProperty: 'label' } );\n\t *\t\tconst target = new Collection();\n\t *\n\t *\t\ttarget.bindTo( source ).using( ( item ) => {\n\t *\t\t\tif ( item.label == 'foo' ) {\n\t *\t\t\t\treturn new FooClass( item );\n\t *\t\t\t} else {\n\t *\t\t\t\treturn new BarClass( item );\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t *\t\tsource.add( { label: 'foo' } );\n\t *\t\tsource.add( { label: 'bar' } );\n\t *\n\t *\t\tconsole.log( target.length ); // 2\n\t *\t\tconsole.log( target.get( 0 ) instanceof FooClass ); // true\n\t *\t\tconsole.log( target.get( 1 ) instanceof BarClass ); // true\n\t *\n\t * or the factory out of property name:\n\t *\n\t *\t\tconst source = new Collection( { idProperty: 'label' } );\n\t *\t\tconst target = new Collection();\n\t *\n\t *\t\ttarget.bindTo( source ).using( 'label' );\n\t *\n\t *\t\tsource.add( { label: { value: 'foo' } } );\n\t *\t\tsource.add( { label: { value: 'bar' } } );\n\t *\n\t *\t\tconsole.log( target.length ); // 2\n\t *\t\tconsole.log( target.get( 0 ).value ); // 'foo'\n\t *\t\tconsole.log( target.get( 1 ).value ); // 'bar'\n\t *\n\t * It's possible to skip specified items by returning falsy value:\n\t *\n\t *\t\tconst source = new Collection();\n\t *\t\tconst target = new Collection();\n\t *\n\t *\t\ttarget.bindTo( source ).using( item => {\n\t *\t\t\tif ( item.hidden ) {\n\t *\t\t\t\treturn null;\n\t *\t\t\t}\n\t *\n\t *\t\t\treturn item;\n\t *\t\t} );\n\t *\n\t *\t\tsource.add( { hidden: true } );\n\t *\t\tsource.add( { hidden: false } );\n\t *\n\t *\t\tconsole.log( source.length ); // 2\n\t *\t\tconsole.log( target.length ); // 1\n\t *\n\t * **Note**: {@link #clear} can be used to break the binding.\n\t *\n\t * @param {module:utils/collection~Collection} externalCollection A collection to be bound.\n\t * @returns {Object}\n\t * @returns {module:utils/collection~CollectionBindToChain} The binding chain object.\n\t */\n\tbindTo( externalCollection ) {\n\t\tif ( this._bindToCollection ) {\n\t\t\t/**\n\t\t\t * The collection cannot be bound more than once.\n\t\t\t *\n\t\t\t * @error collection-bind-to-rebind\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'collection-bind-to-rebind', this );\n\t\t}\n\n\t\tthis._bindToCollection = externalCollection;\n\n\t\treturn {\n\t\t\tas: Class => {\n\t\t\t\tthis._setUpBindToBinding( item => new Class( item ) );\n\t\t\t},\n\n\t\t\tusing: callbackOrProperty => {\n\t\t\t\tif ( typeof callbackOrProperty == 'function' ) {\n\t\t\t\t\tthis._setUpBindToBinding( item => callbackOrProperty( item ) );\n\t\t\t\t} else {\n\t\t\t\t\tthis._setUpBindToBinding( item => item[ callbackOrProperty ] );\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\n\t/**\n\t * Finalizes and activates a binding initiated by {#bindTo}.\n\t *\n\t * @protected\n\t * @param {Function} factory A function which produces collection items.\n\t */\n\t_setUpBindToBinding( factory ) {\n\t\tconst externalCollection = this._bindToCollection;\n\n\t\t// Adds the item to the collection once a change has been done to the external collection.\n\t\t//\n\t\t// @private\n\t\tconst addItem = ( evt, externalItem, index ) => {\n\t\t\tconst isExternalBoundToThis = externalCollection._bindToCollection == this;\n\t\t\tconst externalItemBound = externalCollection._bindToInternalToExternalMap.get( externalItem );\n\n\t\t\t// If an external collection is bound to this collection, which makes it a 2–way binding,\n\t\t\t// and the particular external collection item is already bound, don't add it here.\n\t\t\t// The external item has been created **out of this collection's item** and (re)adding it will\n\t\t\t// cause a loop.\n\t\t\tif ( isExternalBoundToThis && externalItemBound ) {\n\t\t\t\tthis._bindToExternalToInternalMap.set( externalItem, externalItemBound );\n\t\t\t\tthis._bindToInternalToExternalMap.set( externalItemBound, externalItem );\n\t\t\t} else {\n\t\t\t\tconst item = factory( externalItem );\n\n\t\t\t\t// When there is no item we need to remember skipped index first and then we can skip this item.\n\t\t\t\tif ( !item ) {\n\t\t\t\t\tthis._skippedIndexesFromExternal.push( index );\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Lets try to put item at the same index as index in external collection\n\t\t\t\t// but when there are a skipped items in one or both collections we need to recalculate this index.\n\t\t\t\tlet finalIndex = index;\n\n\t\t\t\t// When we try to insert item after some skipped items from external collection we need\n\t\t\t\t// to include this skipped items and decrease index.\n\t\t\t\t//\n\t\t\t\t// For the following example:\n\t\t\t\t// external -> [ 'A', 'B - skipped for internal', 'C - skipped for internal' ]\n\t\t\t\t// internal -> [ A ]\n\t\t\t\t//\n\t\t\t\t// Another item is been added at the end of external collection:\n\t\t\t\t// external.add( 'D' )\n\t\t\t\t// external -> [ 'A', 'B - skipped for internal', 'C - skipped for internal', 'D' ]\n\t\t\t\t//\n\t\t\t\t// We can't just add 'D' to internal at the same index as index in external because\n\t\t\t\t// this will produce empty indexes what is invalid:\n\t\t\t\t// internal -> [ 'A', empty, empty, 'D' ]\n\t\t\t\t//\n\t\t\t\t// So we need to include skipped items and decrease index\n\t\t\t\t// internal -> [ 'A', 'D' ]\n\t\t\t\tfor ( const skipped of this._skippedIndexesFromExternal ) {\n\t\t\t\t\tif ( index > skipped ) {\n\t\t\t\t\t\tfinalIndex--;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// We need to take into consideration that external collection could skip some items from\n\t\t\t\t// internal collection.\n\t\t\t\t//\n\t\t\t\t// For the following example:\n\t\t\t\t// internal -> [ 'A', 'B - skipped for external', 'C - skipped for external' ]\n\t\t\t\t// external -> [ A ]\n\t\t\t\t//\n\t\t\t\t// Another item is been added at the end of external collection:\n\t\t\t\t// external.add( 'D' )\n\t\t\t\t// external -> [ 'A', 'D' ]\n\t\t\t\t//\n\t\t\t\t// We need to include skipped items and place new item after them:\n\t\t\t\t// internal -> [ 'A', 'B - skipped for external', 'C - skipped for external', 'D' ]\n\t\t\t\tfor ( const skipped of externalCollection._skippedIndexesFromExternal ) {\n\t\t\t\t\tif ( finalIndex >= skipped ) {\n\t\t\t\t\t\tfinalIndex++;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis._bindToExternalToInternalMap.set( externalItem, item );\n\t\t\t\tthis._bindToInternalToExternalMap.set( item, externalItem );\n\t\t\t\tthis.add( item, finalIndex );\n\n\t\t\t\t// After adding new element to internal collection we need update indexes\n\t\t\t\t// of skipped items in external collection.\n\t\t\t\tfor ( let i = 0; i < externalCollection._skippedIndexesFromExternal.length; i++ ) {\n\t\t\t\t\tif ( finalIndex <= externalCollection._skippedIndexesFromExternal[ i ] ) {\n\t\t\t\t\t\texternalCollection._skippedIndexesFromExternal[ i ]++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t// Load the initial content of the collection.\n\t\tfor ( const externalItem of externalCollection ) {\n\t\t\taddItem( null, externalItem, externalCollection.getIndex( externalItem ) );\n\t\t}\n\n\t\t// Synchronize the with collection as new items are added.\n\t\tthis.listenTo( externalCollection, 'add', addItem );\n\n\t\t// Synchronize the with collection as new items are removed.\n\t\tthis.listenTo( externalCollection, 'remove', ( evt, externalItem, index ) => {\n\t\t\tconst item = this._bindToExternalToInternalMap.get( externalItem );\n\n\t\t\tif ( item ) {\n\t\t\t\tthis.remove( item );\n\t\t\t}\n\n\t\t\t// After removing element from external collection we need update/remove indexes\n\t\t\t// of skipped items in internal collection.\n\t\t\tthis._skippedIndexesFromExternal = this._skippedIndexesFromExternal.reduce( ( result, skipped ) => {\n\t\t\t\tif ( index < skipped ) {\n\t\t\t\t\tresult.push( skipped - 1 );\n\t\t\t\t}\n\n\t\t\t\tif ( index > skipped ) {\n\t\t\t\t\tresult.push( skipped );\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\t\t\t}, [] );\n\t\t} );\n\t}\n\n\t/**\n\t * Returns an unique id property for a given `item`.\n\t *\n\t * The method will generate new id and assign it to the `item` if it doesn't have any.\n\t *\n\t * @private\n\t * @param {Object} item Item to be added.\n\t * @returns {String}\n\t */\n\t_getItemIdBeforeAdding( item ) {\n\t\tconst idProperty = this._idProperty;\n\t\tlet itemId;\n\n\t\tif ( ( idProperty in item ) ) {\n\t\t\titemId = item[ idProperty ];\n\n\t\t\tif ( typeof itemId != 'string' ) {\n\t\t\t\t/**\n\t\t\t\t * This item's ID should be a string.\n\t\t\t\t *\n\t\t\t\t * @error collection-add-invalid-id\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError( 'collection-add-invalid-id', this );\n\t\t\t}\n\n\t\t\tif ( this.get( itemId ) ) {\n\t\t\t\t/**\n\t\t\t\t * This item already exists in the collection.\n\t\t\t\t *\n\t\t\t\t * @error collection-add-item-already-exists\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError( 'collection-add-item-already-exists', this );\n\t\t\t}\n\t\t} else {\n\t\t\titem[ idProperty ] = itemId = uid();\n\t\t}\n\n\t\treturn itemId;\n\t}\n\n\t/**\n\t * Core {@link #remove} method implementation shared in other functions.\n\t *\n\t * In contrast this method **does not** fire the {@link #event:change} event.\n\t *\n\t * @private\n\t * @param {Object} subject The item to remove, its id or index in the collection.\n\t * @returns {Array} Returns an array with the removed item and its index.\n\t * @fires remove\n\t */\n\t_remove( subject ) {\n\t\tlet index, id, item;\n\t\tlet itemDoesNotExist = false;\n\t\tconst idProperty = this._idProperty;\n\n\t\tif ( typeof subject == 'string' ) {\n\t\t\tid = subject;\n\t\t\titem = this._itemMap.get( id );\n\t\t\titemDoesNotExist = !item;\n\n\t\t\tif ( item ) {\n\t\t\t\tindex = this._items.indexOf( item );\n\t\t\t}\n\t\t} else if ( typeof subject == 'number' ) {\n\t\t\tindex = subject;\n\t\t\titem = this._items[ index ];\n\t\t\titemDoesNotExist = !item;\n\n\t\t\tif ( item ) {\n\t\t\t\tid = item[ idProperty ];\n\t\t\t}\n\t\t} else {\n\t\t\titem = subject;\n\t\t\tid = item[ idProperty ];\n\t\t\tindex = this._items.indexOf( item );\n\t\t\titemDoesNotExist = ( index == -1 || !this._itemMap.get( id ) );\n\t\t}\n\n\t\tif ( itemDoesNotExist ) {\n\t\t\t/**\n\t\t\t * Item not found.\n\t\t\t *\n\t\t\t * @error collection-remove-404\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'collection-remove-404', this );\n\t\t}\n\n\t\tthis._items.splice( index, 1 );\n\t\tthis._itemMap.delete( id );\n\n\t\tconst externalItem = this._bindToInternalToExternalMap.get( item );\n\t\tthis._bindToInternalToExternalMap.delete( item );\n\t\tthis._bindToExternalToInternalMap.delete( externalItem );\n\n\t\tthis.fire( 'remove', item, index );\n\n\t\treturn [ item, index ];\n\t}\n\n\t/**\n\t * Iterable interface.\n\t *\n\t * @returns {Iterable.<*>}\n\t */\n\t[ Symbol.iterator ]() {\n\t\treturn this._items[ Symbol.iterator ]();\n\t}\n\n\t/**\n\t * Fired when an item is added to the collection.\n\t *\n\t * @event add\n\t * @param {Object} item The added item.\n\t */\n\n\t/**\n\t * Fired when the collection was changed due to adding or removing items.\n\t *\n\t * @event change\n\t * @param {Iterable.<Object>} added A list of added items.\n\t * @param {Iterable.<Object>} removed A list of removed items.\n\t * @param {Number} index An index where the addition or removal occurred.\n\t */\n\n\t/**\n\t * Fired when an item is removed from the collection.\n\t *\n\t * @event remove\n\t * @param {Object} item The removed item.\n\t * @param {Number} index Index from which item was removed.\n\t */\n}\n\nmix( Collection, EmitterMixin );\n\n/**\n * An object returned by the {@link module:utils/collection~Collection#bindTo `bindTo()`} method\n * providing functions that specify the type of the binding.\n *\n * See the {@link module:utils/collection~Collection#bindTo `bindTo()`} documentation for examples.\n *\n * @interface module:utils/collection~CollectionBindToChain\n */\n\n/**\n * Creates a callback or a property binding.\n *\n * @method #using\n * @param {Function|String} callbackOrProperty  When the function is passed, it should return\n * the collection items. When the string is provided, the property value is used to create the bound collection items.\n */\n\n/**\n * Creates the class factory binding in which items of the source collection are passed to\n * the constructor of the specified class.\n *\n * @method #as\n * @param {Function} Class The class constructor used to create instances in the factory.\n */\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module core/plugincollection\n */\n\nimport CKEditorError, { logError } from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n\nimport EmitterMixin from '@ckeditor/ckeditor5-utils/src/emittermixin';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\n\n/**\n * Manages a list of CKEditor plugins, including loading, resolving dependencies and initialization.\n *\n * @mixes module:utils/emittermixin~EmitterMixin\n */\nexport default class PluginCollection {\n\t/**\n\t * Creates an instance of the plugin collection class.\n\t * Allows loading and initializing plugins and their dependencies.\n\t * Allows providing a list of already loaded plugins. These plugins will not be destroyed along with this collection.\n\t *\n\t * @param {module:core/editor/editor~Editor|module:core/context~Context} context\n\t * @param {Array.<Function>} [availablePlugins] Plugins (constructors) which the collection will be able to use\n\t * when {@link module:core/plugincollection~PluginCollection#init} is used with the plugin names (strings, instead of constructors).\n\t * Usually, the editor will pass its built-in plugins to the collection so they can later be\n\t * used in `config.plugins` or `config.removePlugins` by names.\n\t * @param {Iterable.<Array>} contextPlugins A list of already initialized plugins represented by a\n\t * `[ PluginConstructor, pluginInstance ]` pair.\n\t */\n\tconstructor( context, availablePlugins = [], contextPlugins = [] ) {\n\t\t/**\n\t\t * @protected\n\t\t * @type {module:core/editor/editor~Editor|module:core/context~Context}\n\t\t */\n\t\tthis._context = context;\n\n\t\t/**\n\t\t * @protected\n\t\t * @type {Map}\n\t\t */\n\t\tthis._plugins = new Map();\n\n\t\t/**\n\t\t * A map of plugin constructors that can be retrieved by their names.\n\t\t *\n\t\t * @protected\n\t\t * @type {Map.<String|Function,Function>}\n\t\t */\n\t\tthis._availablePlugins = new Map();\n\n\t\tfor ( const PluginConstructor of availablePlugins ) {\n\t\t\tif ( PluginConstructor.pluginName ) {\n\t\t\t\tthis._availablePlugins.set( PluginConstructor.pluginName, PluginConstructor );\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Map of {@link module:core/contextplugin~ContextPlugin context plugins} which can be retrieved by their constructors or instances.\n\t\t *\n\t\t * @protected\n\t\t * @type {Map<Function,Function>}\n\t\t */\n\t\tthis._contextPlugins = new Map();\n\n\t\tfor ( const [ PluginConstructor, pluginInstance ] of contextPlugins ) {\n\t\t\tthis._contextPlugins.set( PluginConstructor, pluginInstance );\n\t\t\tthis._contextPlugins.set( pluginInstance, PluginConstructor );\n\n\t\t\t// To make it possible to require a plugin by its name.\n\t\t\tif ( PluginConstructor.pluginName ) {\n\t\t\t\tthis._availablePlugins.set( PluginConstructor.pluginName, PluginConstructor );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Iterable interface.\n\t *\n\t * Returns `[ PluginConstructor, pluginInstance ]` pairs.\n\t *\n\t * @returns {Iterable.<Array>}\n\t */\n\t* [ Symbol.iterator ]() {\n\t\tfor ( const entry of this._plugins ) {\n\t\t\tif ( typeof entry[ 0 ] == 'function' ) {\n\t\t\t\tyield entry;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Gets the plugin instance by its constructor or name.\n\t *\n\t *\t\t// Check if 'Clipboard' plugin was loaded.\n\t *\t\tif ( editor.plugins.has( 'Clipboard' ) ) {\n\t *\t\t\t// Get clipboard plugin instance\n\t *\t\t\tconst clipboard = editor.plugins.get( 'Clipboard' );\n\t *\n\t *\t\t\tthis.listenTo( clipboard, 'inputTransformation', ( evt, data ) => {\n\t *\t\t\t\t// Do something on clipboard input.\n\t *\t\t\t} );\n\t *\t\t}\n\t *\n\t * **Note**: This method will throw an error if a plugin is not loaded. Use `{@link #has editor.plugins.has()}`\n\t * to check if a plugin is available.\n\t *\n\t * @param {Function|String} key The plugin constructor or {@link module:core/plugin~PluginInterface.pluginName name}.\n\t * @returns {module:core/plugin~PluginInterface}\n\t */\n\tget( key ) {\n\t\tconst plugin = this._plugins.get( key );\n\n\t\tif ( !plugin ) {\n\t\t\tlet pluginName = key;\n\n\t\t\tif ( typeof key == 'function' ) {\n\t\t\t\tpluginName = key.pluginName || key.name;\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * The plugin is not loaded and could not be obtained.\n\t\t\t *\n\t\t\t * Plugin classes (constructors) need to be provided to the editor and must be loaded before they can be obtained from\n\t\t\t * the plugin collection.\n\t\t\t * This is usually done in CKEditor 5 builds by setting the {@link module:core/editor/editor~Editor.builtinPlugins}\n\t\t\t * property.\n\t\t\t *\n\t\t\t * **Note**: You can use `{@link module:core/plugincollection~PluginCollection#has editor.plugins.has()}`\n\t\t\t * to check if a plugin was loaded.\n\t\t\t *\n\t\t\t * @error plugincollection-plugin-not-loaded\n\t\t\t * @param {String} plugin The name of the plugin which is not loaded.\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'plugincollection-plugin-not-loaded', this._context, { plugin: pluginName } );\n\t\t}\n\n\t\treturn plugin;\n\t}\n\n\t/**\n\t * Checks if a plugin is loaded.\n\t *\n\t *\t\t// Check if the 'Clipboard' plugin was loaded.\n\t *\t\tif ( editor.plugins.has( 'Clipboard' ) ) {\n\t *\t\t\t// Now use the clipboard plugin instance:\n\t *\t\t\tconst clipboard = editor.plugins.get( 'Clipboard' );\n\t *\n\t *\t\t\t// ...\n\t *\t\t}\n\t *\n\t * @param {Function|String} key The plugin constructor or {@link module:core/plugin~PluginInterface.pluginName name}.\n\t * @returns {Boolean}\n\t */\n\thas( key ) {\n\t\treturn this._plugins.has( key );\n\t}\n\n\t/**\n\t * Initializes a set of plugins and adds them to the collection.\n\t *\n\t * @param {Array.<Function|String>} plugins An array of {@link module:core/plugin~PluginInterface plugin constructors}\n\t * or {@link module:core/plugin~PluginInterface.pluginName plugin names}. The second option (names) works only if\n\t * `availablePlugins` were passed to the {@link #constructor}.\n\t * @param {Array.<String|Function>} [removePlugins] Names of the plugins or plugin constructors\n\t * that should not be loaded (despite being specified in the `plugins` array).\n\t * @returns {Promise.<module:core/plugin~LoadedPlugins>} A promise which gets resolved once all plugins are loaded\n\t * and available in the collection.\n\t */\n\tinit( plugins, removePlugins = [] ) {\n\t\tconst that = this;\n\t\tconst context = this._context;\n\t\tconst loading = new Set();\n\t\tconst loaded = [];\n\n\t\tconst pluginConstructors = mapToAvailableConstructors( plugins );\n\t\tconst removePluginConstructors = mapToAvailableConstructors( removePlugins );\n\t\tconst missingPlugins = getMissingPluginNames( plugins );\n\n\t\tif ( missingPlugins ) {\n\t\t\t/**\n\t\t\t * Some plugins are not available and could not be loaded.\n\t\t\t *\n\t\t\t * Plugin classes (constructors) need to be provided to the editor before they can be loaded by name.\n\t\t\t * This is usually done in CKEditor 5 builds by setting the {@link module:core/editor/editor~Editor.builtinPlugins}\n\t\t\t * property.\n\t\t\t *\n\t\t\t * **If you see this warning when using one of the {@glink builds/index CKEditor 5 Builds}**, it means\n\t\t\t * that you try to enable a plugin which was not included in that build. This may be due to a typo\n\t\t\t * in the plugin name or simply because that plugin is not a part of this build. In the latter scenario,\n\t\t\t * read more about {@glink builds/guides/development/custom-builds custom builds}.\n\t\t\t *\n\t\t\t * **If you see this warning when using one of the editor creators directly** (not a build), then it means\n\t\t\t * that you tried loading plugins by name. However, unlike CKEditor 4, CKEditor 5 does not implement a \"plugin loader\".\n\t\t\t * This means that CKEditor 5 does not know where to load the plugin modules from. Therefore, you need to\n\t\t\t * provide each plugin through a reference (as a constructor function). Check out the examples in\n\t\t\t * {@glink builds/guides/integration/advanced-setup#scenario-2-building-from-source \"Building from source\"}.\n\t\t\t *\n\t\t\t * @error plugincollection-plugin-not-found\n\t\t\t * @param {Array.<String>} plugins The name of the plugins which could not be loaded.\n\t\t\t */\n\t\t\tconst errorId = 'plugincollection-plugin-not-found';\n\n\t\t\t// Log the error, so it's more visible on the console. Hopefully, for a better DX.\n\t\t\tlogError( errorId, { plugins: missingPlugins } );\n\n\t\t\treturn Promise.reject( new CKEditorError( errorId, context, { plugins: missingPlugins } ) );\n\t\t}\n\n\t\treturn Promise.all( pluginConstructors.map( loadPlugin ) )\n\t\t\t.then( () => initPlugins( loaded, 'init' ) )\n\t\t\t.then( () => initPlugins( loaded, 'afterInit' ) )\n\t\t\t.then( () => loaded );\n\n\t\tfunction loadPlugin( PluginConstructor ) {\n\t\t\tif ( removePluginConstructors.includes( PluginConstructor ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// The plugin is already loaded or being loaded - do nothing.\n\t\t\tif ( that._plugins.has( PluginConstructor ) || loading.has( PluginConstructor ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\treturn instantiatePlugin( PluginConstructor )\n\t\t\t\t.catch( err => {\n\t\t\t\t\t/**\n\t\t\t\t\t * It was not possible to load the plugin.\n\t\t\t\t\t *\n\t\t\t\t\t * This is a generic error logged to the console when a JavaScript error is thrown during the initialization\n\t\t\t\t\t * of one of the plugins.\n\t\t\t\t\t *\n\t\t\t\t\t * If you correctly handled the promise returned by the editor's `create()` method (as shown below),\n\t\t\t\t\t * you will find the original error logged to the console, too:\n\t\t\t\t\t *\n\t\t\t\t\t *\t\tClassicEditor.create( document.getElementById( 'editor' ) )\n\t\t\t\t\t *\t\t\t.then( editor => {\n\t\t\t\t\t *\t\t\t\t// ...\n\t\t\t\t\t * \t\t\t} )\n\t\t\t\t\t *\t\t\t.catch( error => {\n\t\t\t\t\t *\t\t\t\tconsole.error( error );\n\t\t\t\t\t *\t\t\t} );\n\t\t\t\t\t *\n\t\t\t\t\t * @error plugincollection-load\n\t\t\t\t\t * @param {String} plugin The name of the plugin that could not be loaded.\n\t\t\t\t\t */\n\t\t\t\t\tlogError( 'plugincollection-load', { plugin: PluginConstructor } );\n\n\t\t\t\t\tthrow err;\n\t\t\t\t} );\n\t\t}\n\n\t\tfunction initPlugins( loadedPlugins, method ) {\n\t\t\treturn loadedPlugins.reduce( ( promise, plugin ) => {\n\t\t\t\tif ( !plugin[ method ] ) {\n\t\t\t\t\treturn promise;\n\t\t\t\t}\n\n\t\t\t\tif ( that._contextPlugins.has( plugin ) ) {\n\t\t\t\t\treturn promise;\n\t\t\t\t}\n\n\t\t\t\treturn promise.then( plugin[ method ].bind( plugin ) );\n\t\t\t}, Promise.resolve() );\n\t\t}\n\n\t\tfunction instantiatePlugin( PluginConstructor ) {\n\t\t\treturn new Promise( resolve => {\n\t\t\t\tloading.add( PluginConstructor );\n\n\t\t\t\tif ( PluginConstructor.requires ) {\n\t\t\t\t\tPluginConstructor.requires.forEach( RequiredPluginConstructorOrName => {\n\t\t\t\t\t\tconst RequiredPluginConstructor = getPluginConstructor( RequiredPluginConstructorOrName );\n\n\t\t\t\t\t\tif ( PluginConstructor.isContextPlugin && !RequiredPluginConstructor.isContextPlugin ) {\n\t\t\t\t\t\t\t/**\n\t\t\t\t\t\t\t * If a plugin is a context plugin, all plugins it requires should also be context plugins\n\t\t\t\t\t\t\t * instead of plugins. In other words, if one plugin can be used in the context,\n\t\t\t\t\t\t\t * all its requirements should also be ready to be used in the context. Note that the context\n\t\t\t\t\t\t\t * provides only a part of the API provided by the editor. If one plugin needs a full\n\t\t\t\t\t\t\t * editor API, all plugins which require it are considered as plugins that need a full\n\t\t\t\t\t\t\t * editor API.\n\t\t\t\t\t\t\t *\n\t\t\t\t\t\t\t * @error plugincollection-context-required\n\t\t\t\t\t\t\t * @param {String} plugin The name of the required plugin.\n\t\t\t\t\t\t\t * @param {String} requiredBy The name of the parent plugin.\n\t\t\t\t\t\t\t */\n\t\t\t\t\t\t\tthrow new CKEditorError(\n\t\t\t\t\t\t\t\t'plugincollection-context-required',\n\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t{ plugin: RequiredPluginConstructor.name, requiredBy: PluginConstructor.name }\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( removePlugins.includes( RequiredPluginConstructor ) ) {\n\t\t\t\t\t\t\t/**\n\t\t\t\t\t\t\t * Cannot load a plugin because one of its dependencies is listed in the `removePlugins` option.\n\t\t\t\t\t\t\t *\n\t\t\t\t\t\t\t * @error plugincollection-required\n\t\t\t\t\t\t\t * @param {String} plugin The name of the required plugin.\n\t\t\t\t\t\t\t * @param {String} requiredBy The name of the parent plugin.\n\t\t\t\t\t\t\t */\n\t\t\t\t\t\t\tthrow new CKEditorError(\n\t\t\t\t\t\t\t\t'plugincollection-required',\n\t\t\t\t\t\t\t\tcontext,\n\t\t\t\t\t\t\t\t{ plugin: RequiredPluginConstructor.name, requiredBy: PluginConstructor.name }\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tloadPlugin( RequiredPluginConstructor );\n\t\t\t\t\t} );\n\t\t\t\t}\n\n\t\t\t\tconst plugin = that._contextPlugins.get( PluginConstructor ) || new PluginConstructor( context );\n\t\t\t\tthat._add( PluginConstructor, plugin );\n\t\t\t\tloaded.push( plugin );\n\n\t\t\t\tresolve();\n\t\t\t} );\n\t\t}\n\n\t\tfunction getPluginConstructor( PluginConstructorOrName ) {\n\t\t\tif ( typeof PluginConstructorOrName == 'function' ) {\n\t\t\t\treturn PluginConstructorOrName;\n\t\t\t}\n\n\t\t\treturn that._availablePlugins.get( PluginConstructorOrName );\n\t\t}\n\n\t\tfunction getMissingPluginNames( plugins ) {\n\t\t\tconst missingPlugins = [];\n\n\t\t\tfor ( const pluginNameOrConstructor of plugins ) {\n\t\t\t\tif ( !getPluginConstructor( pluginNameOrConstructor ) ) {\n\t\t\t\t\tmissingPlugins.push( pluginNameOrConstructor );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn missingPlugins.length ? missingPlugins : null;\n\t\t}\n\n\t\tfunction mapToAvailableConstructors( plugins ) {\n\t\t\treturn plugins\n\t\t\t\t.map( pluginNameOrConstructor => getPluginConstructor( pluginNameOrConstructor ) )\n\t\t\t\t.filter( PluginConstructor => !!PluginConstructor );\n\t\t}\n\t}\n\n\t/**\n\t * Destroys all loaded plugins.\n\t *\n\t * @returns {Promise}\n\t */\n\tdestroy() {\n\t\tconst promises = [];\n\n\t\tfor ( const [ , pluginInstance ] of this ) {\n\t\t\tif ( typeof pluginInstance.destroy == 'function' && !this._contextPlugins.has( pluginInstance ) ) {\n\t\t\t\tpromises.push( pluginInstance.destroy() );\n\t\t\t}\n\t\t}\n\n\t\treturn Promise.all( promises );\n\t}\n\n\t/**\n\t * Adds the plugin to the collection. Exposed mainly for testing purposes.\n\t *\n\t * @protected\n\t * @param {Function} PluginConstructor The plugin constructor.\n\t * @param {module:core/plugin~PluginInterface} plugin The instance of the plugin.\n\t */\n\t_add( PluginConstructor, plugin ) {\n\t\tthis._plugins.set( PluginConstructor, plugin );\n\n\t\tconst pluginName = PluginConstructor.pluginName;\n\n\t\tif ( !pluginName ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( this._plugins.has( pluginName ) ) {\n\t\t\t/**\n\t\t\t * Two plugins with the same {@link module:core/plugin~PluginInterface.pluginName} were loaded.\n\t\t\t * This will lead to runtime conflicts between these plugins.\n\t\t\t *\n\t\t\t * In practice, this warning usually means that new plugins were added to an existing CKEditor 5 build.\n\t\t\t * Plugins should always be added to a source version of the editor (`@ckeditor/ckeditor5-editor-*`),\n\t\t\t * not to an editor imported from one of the `@ckeditor/ckeditor5-build-*` packages.\n\t\t\t *\n\t\t\t * Check your import paths and the list of plugins passed to\n\t\t\t * {@link module:core/editor/editor~Editor.create `Editor.create()`}\n\t\t\t * or specified in {@link module:core/editor/editor~Editor.builtinPlugins `Editor.builtinPlugins`}.\n\t\t\t *\n\t\t\t * The second option is that your `node_modules/` directory contains duplicated versions of the same\n\t\t\t * CKEditor 5 packages. Normally, on clean installations, npm deduplicates packages in `node_modules/`, so\n\t\t\t * it may be enough to call `rm -rf node_modules && npm i`. However, if you installed conflicting versions\n\t\t\t * of some packages, their dependencies may need to be installed in more than one version which may lead to this\n\t\t\t * warning.\n\t\t\t *\n\t\t\t * Technically speaking, this error occurs because after adding a plugin to an existing editor build\n\t\t\t * the dependencies of this plugin are being duplicated.\n\t\t\t * They are already built into that editor build and now get added for the second time as dependencies\n\t\t\t * of the plugin you are installing.\n\t\t\t *\n\t\t\t * Read more about {@glink builds/guides/integration/installing-plugins installing plugins}.\n\t\t\t *\n\t\t\t * @error plugincollection-plugin-name-conflict\n\t\t\t * @param {String} pluginName The duplicated plugin name.\n\t\t\t * @param {Function} plugin1 The first plugin constructor.\n\t\t\t * @param {Function} plugin2 The second plugin constructor.\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'plugincollection-plugin-name-conflict',\n\t\t\t\tnull,\n\t\t\t\t{ pluginName, plugin1: this._plugins.get( pluginName ).constructor, plugin2: PluginConstructor }\n\t\t\t);\n\t\t}\n\n\t\tthis._plugins.set( pluginName, plugin );\n\t}\n}\n\nmix( PluginCollection, EmitterMixin );\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/toarray\n */\n\n/**\n * Transforms any value to an array. If the provided value is already an array, it is returned unchanged.\n *\n * @param {*} data The value to transform to an array.\n * @returns {Array} An array created from data.\n */\nexport default function toArray( data ) {\n\treturn Array.isArray( data ) ? data : [ data ];\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/* globals window */\n\n/**\n * @module utils/translation-service\n */\n\nimport CKEditorError from './ckeditorerror';\n\n/* istanbul ignore else */\nif ( !window.CKEDITOR_TRANSLATIONS ) {\n\twindow.CKEDITOR_TRANSLATIONS = {};\n}\n\n/**\n * Adds translations to existing ones or overrides the existing translations. These translations will later\n * be available for the {@link module:utils/locale~Locale#t `t()`} function.\n *\n * The `translations` is an object which consists of `messageId: translation` pairs. Note that the message ID can be\n * either constructed from the message string or from the message ID if it was passed\n * (this happens rarely and mostly for short messages or messages with placeholders).\n * Since the editor displays only the message string, the message ID can be found either in the source code or in the\n * built translations for another language.\n *\n *\t\tadd( 'pl', {\n *\t\t\t'Cancel': 'Anuluj',\n *\t\t\t'IMAGE': 'obraz', // Note that the `IMAGE` comes from the message ID, while the string can be `image`.\n *\t\t} );\n *\n * If the message is supposed to support various plural forms, make sure to provide an array with the singular form and all plural forms:\n *\n *\t\tadd( 'pl', {\n *\t \t\t'Add space': [ 'Dodaj spację', 'Dodaj %0 spacje', 'Dodaj %0 spacji' ]\n * \t\t} );\n *\n * You should also specify the third argument (the `getPluralForm()` function) that will be used to determine the plural form if no\n * language file was loaded for that language. All language files coming from CKEditor 5 sources will have this option set, so\n * these plural form rules will be reused by other translations added to the registered languages. The `getPluralForm()` function\n * can return either a Boolean or a number.\n *\n * \t\tadd( 'en', {\n *\t \t\t// ... Translations.\n * \t\t}, n => n !== 1 );\n * \t\tadd( 'pl', {\n *\t \t\t// ... Translations.\n * \t\t}, n => n == 1 ? 0 : n % 10 >= 2 && n % 10 <= 4 && ( n % 100 < 10 || n % 100 >= 20 ) ? 1 : 2 );\n *\n * All translations extend the global `window.CKEDITOR_TRANSLATIONS` object. An example of this object can be found below:\n *\n * \t\t{\n * \t\t\tpl: {\n *\t\t\t\tdictionary: {\n *\t\t\t\t\t'Cancel': 'Anuluj',\n *\t\t\t\t\t'Add space': [ 'Dodaj spację', 'Dodaj %0 spacje', 'Dodaj %0 spacji' ]\n *\t\t\t\t},\n *\t\t\t\t// A function that returns the plural form index.\n *\t\t\t\tgetPluralForm: n => n !==1\n *\t\t\t}\n *\t\t\t// Other languages.\n *\t\t}\n *\n * If you cannot import this function from this module (e.g. because you use a CKEditor 5 build), you can\n * still add translations by extending the global `window.CKEDITOR_TRANSLATIONS` object by using a function like\n * the one below:\n *\n *\t\tfunction addTranslations( language, translations, getPluralForm ) {\n *\t\t\tif ( !window.CKEDITOR_TRANSLATIONS ) {\n *\t\t\t\twindow.CKEDITOR_TRANSLATIONS = {};\n *\t\t\t}\n\n *\t\t\tif ( !window.CKEDITOR_TRANSLATIONS[ language ] ) {\n *\t\t\t\twindow.CKEDITOR_TRANSLATIONS[ language ] = {};\n *\t\t\t}\n *\n *\t\t\tconst languageTranslations = window.CKEDITOR_TRANSLATIONS[ language ];\n *\n * \t\t\tlanguageTranslations.dictionary = languageTranslations.dictionary || {};\n * \t\t\tlanguageTranslations.getPluralForm = getPluralForm || languageTranslations.getPluralForm;\n *\n *\t\t\t// Extend the dictionary for the given language.\n *\t\t\tObject.assign( languageTranslations.dictionary, translations );\n *\t\t}\n *\n * @param {String} language Target language.\n * @param {Object.<String,*>} translations An object with translations which will be added to the dictionary.\n * For each message ID the value should be either a translation or an array of translations if the message\n * should support plural forms.\n * @param {Function} getPluralForm A function that returns the plural form index (a number).\n */\nexport function add( language, translations, getPluralForm ) {\n\tif ( !window.CKEDITOR_TRANSLATIONS[ language ] ) {\n\t\twindow.CKEDITOR_TRANSLATIONS[ language ] = {};\n\t}\n\n\tconst languageTranslations = window.CKEDITOR_TRANSLATIONS[ language ];\n\n\tlanguageTranslations.dictionary = languageTranslations.dictionary || {};\n\tlanguageTranslations.getPluralForm = getPluralForm || languageTranslations.getPluralForm;\n\n\tObject.assign( languageTranslations.dictionary, translations );\n}\n\n/**\n * **Note:** This method is internal, use {@link module:utils/locale~Locale#t the `t()` function} instead to translate\n * the editor UI parts.\n *\n * This function is responsible for translating messages to the specified language. It uses translations added perviously\n * by {@link module:utils/translation-service~add} (a translations dictionary and the `getPluralForm()` function\n * to provide accurate translations of plural forms).\n *\n * When no translation is defined in the dictionary or the dictionary does not exist, this function returns\n * the original message string or the message plural depending on the number of elements.\n *\n *\t\ttranslate( 'pl', { string: 'Cancel' } ); // 'Cancel'\n *\n * The third optional argument is the number of elements, based on which the single form or one of the plural forms\n * should be picked when the message is supposed to support various plural forms.\n *\n * \t\ttranslate( 'en', { string: 'Add a space', plural: 'Add %0 spaces' }, 1 ); // 'Add a space'\n * \t\ttranslate( 'en', { string: 'Add a space', plural: 'Add %0 spaces' }, 3 ); // 'Add %0 spaces'\n *\n * The message should provide an ID using the `id` property when the message strings are not unique and their\n * translations should be different.\n *\n *\t\ttranslate( 'en', { string: 'image', id: 'ADD_IMAGE' } );\n *\t\ttranslate( 'en', { string: 'image', id: 'AN_IMAGE' } );\n *\n * @protected\n * @param {String} language Target language.\n * @param {module:utils/translation-service~Message|String} message A message that will be translated.\n * @param {Number} [quantity] The number of elements for which a plural form should be picked from the target language dictionary.\n * @returns {String} Translated sentence.\n */\nexport function _translate( language, message, quantity = 1 ) {\n\tif ( typeof quantity !== 'number' ) {\n\t\t/**\n\t\t * An incorrect value was passed to the translation function. This was probably caused\n\t\t * by an incorrect message interpolation of a plural form. Note that for messages supporting plural forms\n\t\t * the second argument of the `t()` function should always be a number or an array with a number as the first element.\n\t\t *\n\t\t * @error translation-service-quantity-not-a-number\n\t\t */\n\t\tthrow new CKEditorError( 'translation-service-quantity-not-a-number', null, { quantity } );\n\t}\n\n\tconst numberOfLanguages = getNumberOfLanguages();\n\n\tif ( numberOfLanguages === 1 ) {\n\t\t// Override the language to the only supported one.\n\t\t// This can't be done in the `Locale` class, because the translations comes after the `Locale` class initialization.\n\t\tlanguage = Object.keys( window.CKEDITOR_TRANSLATIONS )[ 0 ];\n\t}\n\n\tconst messageId = message.id || message.string;\n\n\tif ( numberOfLanguages === 0 || !hasTranslation( language, messageId ) ) {\n\t\tif ( quantity !== 1 ) {\n\t\t\t// Return the default plural form that was passed in the `message.plural` parameter.\n\t\t\treturn message.plural;\n\t\t}\n\n\t\treturn message.string;\n\t}\n\n\tconst dictionary = window.CKEDITOR_TRANSLATIONS[ language ].dictionary;\n\tconst getPluralForm = window.CKEDITOR_TRANSLATIONS[ language ].getPluralForm || ( n => n === 1 ? 0 : 1 );\n\n\tif ( typeof dictionary[ messageId ] === 'string' ) {\n\t\treturn dictionary[ messageId ];\n\t}\n\n\tconst pluralFormIndex = Number( getPluralForm( quantity ) );\n\n\t// Note: The `translate` function is not responsible for replacing `%0, %1, ...` with values.\n\treturn dictionary[ messageId ][ pluralFormIndex ];\n}\n\n/**\n * Clears dictionaries for test purposes.\n *\n * @protected\n */\nexport function _clear() {\n\twindow.CKEDITOR_TRANSLATIONS = {};\n}\n\n// Checks whether the dictionary exists and translation in that dictionary exists.\nfunction hasTranslation( language, messageId ) {\n\treturn (\n\t\t!!window.CKEDITOR_TRANSLATIONS[ language ] &&\n\t\t!!window.CKEDITOR_TRANSLATIONS[ language ].dictionary[ messageId ]\n\t);\n}\n\nfunction getNumberOfLanguages() {\n\treturn Object.keys( window.CKEDITOR_TRANSLATIONS ).length;\n}\n\n/**\n * The internationalization message interface. A message that implements this interface can be passed to the `t()` function\n * to be translated to the target UI language.\n *\n * @typedef {Object} module:utils/translation-service~Message\n *\n * @property {String} string The message string to translate. Acts as a default translation if the translation for a given language\n * is not defined. When the message is supposed to support plural forms, the string should be the English singular form of the message.\n * @property {String} [id] The message ID. If passed, the message ID is taken from this property instead of the `message.string`.\n * This property is useful when various messages share the same message string, for example, the `editor` string in `in the editor`\n * and `my editor` sentences.\n * @property {String} [plural] The plural form of the message. This property should be skipped when a message is not supposed\n * to support plural forms. Otherwise it should always be set to a string with the English plural form of the message.\n */\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/locale\n */\n\n/* globals console */\n\nimport toArray from './toarray';\nimport { _translate } from './translation-service';\n\nconst RTL_LANGUAGE_CODES = [ 'ar', 'fa', 'he', 'ku', 'ug' ];\n\n/**\n * Represents the localization services.\n */\nexport default class Locale {\n\t/**\n\t * Creates a new instance of the locale class. Learn more about\n\t * {@glink features/ui-language configuring the language of the editor}.\n\t *\n\t * @param {Object} [options] Locale configuration.\n\t * @param {String} [options.uiLanguage='en'] The editor UI language code in the\n\t * [ISO 639-1](https://en.wikipedia.org/wiki/ISO_639-1) format. See {@link #uiLanguage}.\n\t * @param {String} [options.contentLanguage] The editor content language code in the\n\t * [ISO 639-1](https://en.wikipedia.org/wiki/ISO_639-1) format. If not specified, the same as `options.language`.\n\t * See {@link #contentLanguage}.\n\t */\n\tconstructor( options = {} ) {\n\t\t/**\n\t\t * The editor UI language code in the [ISO 639-1](https://en.wikipedia.org/wiki/ISO_639-1) format.\n\t\t *\n\t\t * If the {@link #contentLanguage content language} was not specified in the `Locale` constructor,\n\t\t * it also defines the language of the content.\n\t\t *\n\t\t * @readonly\n\t\t * @member {String}\n\t\t */\n\t\tthis.uiLanguage = options.uiLanguage || 'en';\n\n\t\t/**\n\t\t * The editor content language code in the [ISO 639-1](https://en.wikipedia.org/wiki/ISO_639-1) format.\n\t\t *\n\t\t * Usually the same as the {@link #uiLanguage editor language}, it can be customized by passing an optional\n\t\t * argument to the `Locale` constructor.\n\t\t *\n\t\t * @readonly\n\t\t * @member {String}\n\t\t */\n\t\tthis.contentLanguage = options.contentLanguage || this.uiLanguage;\n\n\t\t/**\n\t\t * Text direction of the {@link #uiLanguage editor UI language}. Either `'ltr'` or `'rtl'`.\n\t\t *\n\t\t * @readonly\n\t\t * @member {String}\n\t\t */\n\t\tthis.uiLanguageDirection = getLanguageDirection( this.uiLanguage );\n\n\t\t/**\n\t\t * Text direction of the {@link #contentLanguage editor content language}.\n\t\t *\n\t\t * If the content language was passed directly to the `Locale` constructor, this property represents the\n\t\t * direction of that language.\n\t\t *\n\t\t * If the {@link #contentLanguage editor content language} was derived from the {@link #uiLanguage editor language},\n\t\t * the content language direction is the same as the {@link #uiLanguageDirection UI language direction}.\n\t\t *\n\t\t * The value is either `'ltr'` or `'rtl'`.\n\t\t *\n\t\t * @readonly\n\t\t * @member {String}\n\t\t */\n\t\tthis.contentLanguageDirection = getLanguageDirection( this.contentLanguage );\n\n\t\t/**\n\t\t * Translates the given message to the {@link #uiLanguage}. This method is also available in\n\t\t * {@link module:core/editor/editor~Editor#t `Editor`} and {@link module:ui/view~View#t `View`}.\n\t\t *\n\t\t * This method's context is statically bound to the `Locale` instance and **should always be called as a function**:\n\t\t *\n\t\t *\t\tconst t = locale.t;\n\t\t *\t\tt( 'Label' );\n\t\t *\n\t\t * The message can be either a string or an object implementing the {@link module:utils/translation-service~Message} interface.\n\t\t *\n\t\t * The message may contain placeholders (`%<index>`) for value(s) that are passed as a `values` parameter.\n\t\t * For an array of values, the `%<index>` will be changed to an element of that array at the given index.\n\t\t * For a single value passed as the second argument, only the `%0` placeholders will be changed to the provided value.\n\t\t *\n\t\t *\t\tt( 'Created file \"%0\" in %1ms.', [ fileName, timeTaken ] );\n\t\t * \t\tt( 'Created file \"%0\", fileName );\n\t\t *\n\t\t * The message supports plural forms. To specify the plural form, use the `plural` property. Singular or plural form\n\t\t * will be chosen depending on the first value from the passed `values`. The value of the `plural` property is used\n\t\t * as a default plural translation when the translation for the target language is missing.\n\t\t *\n\t\t *\t\tt( { string: 'Add a space', plural: 'Add %0 spaces' }, 1 ); // 'Add a space' for the English language.\n\t\t *\t\tt( { string: 'Add a space', plural: 'Add %0 spaces' }, 5 ); // 'Add 5 spaces' for the English language.\n\t\t *\t\tt( { string: '%1 a space', plural: '%1 %0 spaces' }, [ 2, 'Add' ] ); // 'Add 2 spaces' for the English language.\n\t\t *\n\t\t * \t\tt( { string: 'Add a space', plural: 'Add %0 spaces' }, 1 ); // 'Dodaj spację' for the Polish language.\n\t\t *\t\tt( { string: 'Add a space', plural: 'Add %0 spaces' }, 5 ); // 'Dodaj 5 spacji' for the Polish language.\n\t\t *\t\tt( { string: '%1 a space', plural: '%1 %0 spaces' }, [ 2, 'Add' ] ); // 'Dodaj 2 spacje' for the Polish language.\n\t\t *\n\t\t *  * The message should provide an ID using the `id` property when the message strings are not unique and their\n\t\t * translations should be different.\n\t\t *\n\t\t *\t\ttranslate( 'en', { string: 'image', id: 'ADD_IMAGE' } );\n\t\t *\t\ttranslate( 'en', { string: 'image', id: 'AN_IMAGE' } );\n\t\t *\n\t\t * @method #t\n\t\t * @param {String|module:utils/translation-service~Message} message A message that will be localized (translated).\n\t\t * @param {String|Number|Array.<String|Number>} [values] A value or an array of values that will fill message placeholders.\n\t\t * For messages supporting plural forms the first value will determine the plural form.\n\t\t * @returns {String}\n\t\t */\n\t\tthis.t = ( message, values ) => this._t( message, values );\n\t}\n\n\t/**\n\t * The editor UI language code in the [ISO 639-1](https://en.wikipedia.org/wiki/ISO_639-1) format.\n\t *\n\t * **Note**: This property was deprecated. Please use {@link #uiLanguage} and {@link #contentLanguage}\n\t * properties instead.\n\t *\n\t * @deprecated\n\t * @member {String}\n\t */\n\tget language() {\n\t\t/**\n\t\t * The {@link module:utils/locale~Locale#language `Locale#language`} property was deprecated and will\n\t\t * be removed in the near future. Please use the {@link #uiLanguage} and {@link #contentLanguage} properties instead.\n\t\t *\n\t\t * @error locale-deprecated-language-property\n\t\t */\n\t\tconsole.warn(\n\t\t\t'locale-deprecated-language-property: ' +\n\t\t\t'The Locale#language property has been deprecated and will be removed in the near future. ' +\n\t\t\t'Please use #uiLanguage and #contentLanguage properties instead.' );\n\n\t\treturn this.uiLanguage;\n\t}\n\n\t/**\n\t * An unbound version of the {@link #t} method.\n\t *\n\t * @private\n\t * @param {String|module:utils/translation-service~Message} message\n\t * @param {Number|String|Array.<Number|String>} [values]\n\t * @returns {String}\n\t */\n\t_t( message, values = [] ) {\n\t\tvalues = toArray( values );\n\n\t\tif ( typeof message === 'string' ) {\n\t\t\tmessage = { string: message };\n\t\t}\n\n\t\tconst hasPluralForm = !!message.plural;\n\t\tconst quantity = hasPluralForm ? values[ 0 ] : 1;\n\n\t\tconst translatedString = _translate( this.uiLanguage, message, quantity );\n\n\t\treturn interpolateString( translatedString, values );\n\t}\n}\n\n// Fills the `%0, %1, ...` string placeholders with values.\nfunction interpolateString( string, values ) {\n\treturn string.replace( /%(\\d+)/g, ( match, index ) => {\n\t\treturn ( index < values.length ) ? values[ index ] : match;\n\t} );\n}\n\n// Helps determine whether a language is LTR or RTL.\n//\n// @param {String} language The ISO 639-1 language code.\n// @returns {String} 'ltr' or 'rtl\nfunction getLanguageDirection( languageCode ) {\n\treturn RTL_LANGUAGE_CODES.includes( languageCode ) ? 'rtl' : 'ltr';\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module core/context\n */\n\nimport Config from '@ckeditor/ckeditor5-utils/src/config';\nimport Collection from '@ckeditor/ckeditor5-utils/src/collection';\nimport PluginCollection from './plugincollection';\nimport Locale from '@ckeditor/ckeditor5-utils/src/locale';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n\n/**\n * Provides a common, higher-level environment for solutions that use multiple {@link module:core/editor/editor~Editor editors}\n * or plugins that work outside the editor. Use it instead of {@link module:core/editor/editor~Editor.create `Editor.create()`}\n * in advanced application integrations.\n *\n * All configuration options passed to a context will be used as default options for editor instances initialized in that context.\n *\n * {@link module:core/contextplugin~ContextPlugin Context plugins} passed to a context instance will be shared among all\n * editor instances initialized in this context. These will be the same plugin instances for all the editors.\n *\n * **Note:** The context can only be initialized with {@link module:core/contextplugin~ContextPlugin context plugins}\n * (e.g. [comments](https://ckeditor.com/collaboration/comments/)). Regular {@link module:core/plugin~Plugin plugins} require an\n * editor instance to work and cannot be added to a context.\n *\n * **Note:** You can add a context plugin to an editor instance, though.\n *\n * If you are using multiple editor instances on one page and use any context plugins, create a context to share the configuration and\n * plugins among these editors. Some plugins will use the information about all existing editors to better integrate between them.\n *\n * If you are using plugins that do not require an editor to work (e.g. [comments](https://ckeditor.com/collaboration/comments/)),\n * enable and configure them using the context.\n *\n * If you are using only a single editor on each page, use {@link module:core/editor/editor~Editor.create `Editor.create()`} instead.\n * In such case, a context instance will be created by the editor instance in a transparent way.\n *\n * See {@link module:core/context~Context.create `Context.create()`} for usage examples.\n */\nexport default class Context {\n\t/**\n\t * Creates a context instance with a given configuration.\n\t *\n\t * Usually not to be used directly. See the static {@link module:core/context~Context.create `create()`} method.\n\t *\n\t * @param {Object} [config={}] The context configuration.\n\t */\n\tconstructor( config ) {\n\t\t/**\n\t\t * Stores all the configurations specific to this context instance.\n\t\t *\n\t\t * @readonly\n\t\t * @type {module:utils/config~Config}\n\t\t */\n\t\tthis.config = new Config( config, this.constructor.defaultConfig );\n\n\t\tconst availablePlugins = this.constructor.builtinPlugins;\n\n\t\tthis.config.define( 'plugins', availablePlugins );\n\n\t\t/**\n\t\t * The plugins loaded and in use by this context instance.\n\t\t *\n\t\t * @readonly\n\t\t * @type {module:core/plugincollection~PluginCollection}\n\t\t */\n\t\tthis.plugins = new PluginCollection( this, availablePlugins );\n\n\t\tconst languageConfig = this.config.get( 'language' ) || {};\n\n\t\t/**\n\t\t * @readonly\n\t\t * @type {module:utils/locale~Locale}\n\t\t */\n\t\tthis.locale = new Locale( {\n\t\t\tuiLanguage: typeof languageConfig === 'string' ? languageConfig : languageConfig.ui,\n\t\t\tcontentLanguage: this.config.get( 'language.content' )\n\t\t} );\n\n\t\t/**\n\t\t * Shorthand for {@link module:utils/locale~Locale#t}.\n\t\t *\n\t\t * @see module:utils/locale~Locale#t\n\t\t * @method #t\n\t\t */\n\t\tthis.t = this.locale.t;\n\n\t\t/**\n\t\t * A list of editors that this context instance is injected to.\n\t\t *\n\t\t * @readonly\n\t\t * @type {module:utils/collection~Collection}\n\t\t */\n\t\tthis.editors = new Collection();\n\n\t\t/**\n\t\t * Reference to the editor which created the context.\n\t\t * Null when the context was created outside of the editor.\n\t\t *\n\t\t * It is used to destroy the context when removing the editor that has created the context.\n\t\t *\n\t\t * @private\n\t\t * @type {module:core/editor/editor~Editor|null}\n\t\t */\n\t\tthis._contextOwner = null;\n\t}\n\n\t/**\n\t * Loads and initializes plugins specified in the configuration.\n\t *\n\t * @returns {Promise.<module:core/plugin~LoadedPlugins>} A promise which resolves\n\t * once the initialization is completed, providing an array of loaded plugins.\n\t */\n\tinitPlugins() {\n\t\tconst plugins = this.config.get( 'plugins' ) || [];\n\n\t\tfor ( const Plugin of plugins ) {\n\t\t\tif ( typeof Plugin != 'function' ) {\n\t\t\t\t/**\n\t\t\t\t * Only a constructor function is allowed as a {@link module:core/contextplugin~ContextPlugin context plugin}.\n\t\t\t\t *\n\t\t\t\t * @error context-initplugins-constructor-only\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError(\n\t\t\t\t\t'context-initplugins-constructor-only',\n\t\t\t\t\tnull,\n\t\t\t\t\t{ Plugin }\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif ( Plugin.isContextPlugin !== true ) {\n\t\t\t\t/**\n\t\t\t\t * Only a plugin marked as a {@link module:core/contextplugin~ContextPlugin.isContextPlugin context plugin}\n\t\t\t\t * is allowed to be used with a context.\n\t\t\t\t *\n\t\t\t\t * @error context-initplugins-invalid-plugin\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError(\n\t\t\t\t\t'context-initplugins-invalid-plugin',\n\t\t\t\t\tnull,\n\t\t\t\t\t{ Plugin }\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\treturn this.plugins.init( plugins );\n\t}\n\n\t/**\n\t * Destroys the context instance and all editors used with the context,\n\t * releasing all resources used by the context.\n\t *\n\t * @returns {Promise} A promise that resolves once the context instance is fully destroyed.\n\t */\n\tdestroy() {\n\t\treturn Promise.all( Array.from( this.editors, editor => editor.destroy() ) )\n\t\t\t.then( () => this.plugins.destroy() );\n\t}\n\n\t/**\n\t * Adds a reference to the editor which is used with this context.\n\t *\n\t * When the given editor has created the context, the reference to this editor will be stored\n\t * as a {@link ~Context#_contextOwner}.\n\t *\n\t * This method should only be used by the editor.\n\t *\n\t * @protected\n\t * @param {module:core/editor/editor~Editor} editor\n\t * @param {Boolean} isContextOwner Stores the given editor as a context owner.\n\t */\n\t_addEditor( editor, isContextOwner ) {\n\t\tif ( this._contextOwner ) {\n\t\t\t/**\n\t\t\t * Cannot add multiple editors to the context which is created by the editor.\n\t\t\t *\n\t\t\t * @error context-addeditor-private-context\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'context-addeditor-private-context' );\n\t\t}\n\n\t\tthis.editors.add( editor );\n\n\t\tif ( isContextOwner ) {\n\t\t\tthis._contextOwner = editor;\n\t\t}\n\t}\n\n\t/**\n\t * Removes a reference to the editor which was used with this context.\n\t * When the context was created by the given editor, the context will be destroyed.\n\t *\n\t * This method should only be used by the editor.\n\t *\n\t * @protected\n\t * @param {module:core/editor/editor~Editor} editor\n\t * @return {Promise} A promise that resolves once the editor is removed from the context or when the context was destroyed.\n\t */\n\t_removeEditor( editor ) {\n\t\tif ( this.editors.has( editor ) ) {\n\t\t\tthis.editors.remove( editor );\n\t\t}\n\n\t\tif ( this._contextOwner === editor ) {\n\t\t\treturn this.destroy();\n\t\t}\n\n\t\treturn Promise.resolve();\n\t}\n\n\t/**\n\t * Returns the context configuration which will be copied to the editors created using this context.\n\t *\n\t * The configuration returned by this method has the plugins configuration removed &mdash; plugins are shared with all editors\n\t * through another mechanism.\n\t *\n\t * This method should only be used by the editor.\n\t *\n\t * @protected\n\t * @returns {Object} Configuration as a plain object.\n\t */\n\t_getEditorConfig() {\n\t\tconst result = {};\n\n\t\tfor ( const name of this.config.names() ) {\n\t\t\tif ( ![ 'plugins', 'removePlugins', 'extraPlugins' ].includes( name ) ) {\n\t\t\t\tresult[ name ] = this.config.get( name );\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * Creates and initializes a new context instance.\n\t *\n\t *\t\tconst commonConfig = { ... }; // Configuration for all the plugins and editors.\n\t *\t\tconst editorPlugins = [ ... ]; // Regular plugins here.\n\t *\n\t *\t\tContext\n\t *\t\t\t.create( {\n\t *\t\t\t\t// Only context plugins here.\n\t *\t\t\t\tplugins: [ ... ],\n\t *\n\t *\t\t\t\t// Configure the language for all the editors (it cannot be overwritten).\n\t *\t\t\t\tlanguage: { ... },\n\t *\n\t *\t\t\t\t// Configuration for context plugins.\n\t *\t\t\t\tcomments: { ... },\n\t *\t\t\t\t...\n\t *\n\t *\t\t\t\t// Default configuration for editor plugins.\n\t *\t\t\t\ttoolbar: { ... },\n\t *\t\t\t\timage: { ... },\n\t *\t\t\t\t...\n\t *\t\t\t} )\n\t *\t\t\t.then( context => {\n\t *\t\t\t\tconst promises = [];\n\t *\n\t *\t\t\t\tpromises.push( ClassicEditor.create(\n\t *\t\t\t\t\tdocument.getElementById( 'editor1' ),\n\t *\t\t\t\t\t{\n\t *\t\t\t\t\t\teditorPlugins,\n\t *\t\t\t\t\t\tcontext\n\t *\t\t\t\t\t}\n\t *\t\t\t\t) );\n\t *\n\t *\t\t\t\tpromises.push( ClassicEditor.create(\n\t *\t\t\t\t\tdocument.getElementById( 'editor2' ),\n\t *\t\t\t\t\t{\n\t *\t\t\t\t\t\teditorPlugins,\n\t *\t\t\t\t\t\tcontext,\n\t *\t\t\t\t\t\ttoolbar: { ... } // You can overwrite the configuration of the context.\n\t *\t\t\t\t\t}\n\t *\t\t\t\t) );\n\t *\n\t *\t\t\t\treturn Promise.all( promises );\n\t *\t\t\t} );\n\t *\n\t * @param {Object} [config] The context configuration.\n\t * @returns {Promise} A promise resolved once the context is ready. The promise resolves with the created context instance.\n\t */\n\tstatic create( config ) {\n\t\treturn new Promise( resolve => {\n\t\t\tconst context = new this( config );\n\n\t\t\tresolve( context.initPlugins().then( () => context ) );\n\t\t} );\n\t}\n}\n\n/**\n * An array of plugins built into the `Context` class.\n *\n * It is used in CKEditor 5 builds featuring `Context` to provide a list of context plugins which are later automatically initialized\n * during the context initialization.\n *\n * They will be automatically initialized by `Context` unless `config.plugins` is passed.\n *\n *\t\t// Build some context plugins into the Context class first.\n *\t\tContext.builtinPlugins = [ FooPlugin, BarPlugin ];\n *\n *\t\t// Normally, you need to define config.plugins, but since Context.builtinPlugins was\n *\t\t// defined, now you can call create() without any configuration.\n *\t\tContext\n *\t\t\t.create()\n *\t\t\t.then( context => {\n *\t\t\t\tcontext.plugins.get( FooPlugin ); // -> An instance of the Foo plugin.\n *\t\t\t\tcontext.plugins.get( BarPlugin ); // -> An instance of the Bar plugin.\n *\t\t\t} );\n *\n * See also {@link module:core/context~Context.defaultConfig `Context.defaultConfig`}\n * and {@link module:core/editor/editor~Editor.builtinPlugins `Editor.builtinPlugins`}.\n *\n * @static\n * @member {Array.<Function>} module:core/context~Context.builtinPlugins\n */\n\n/**\n * The default configuration which is built into the `Context` class.\n *\n * It is used in CKEditor 5 builds featuring `Context` to provide the default configuration options which are later used during the\n * context initialization.\n *\n *\t\tContext.defaultConfig = {\n *\t\t\tfoo: 1,\n *\t\t\tbar: 2\n *\t\t};\n *\n *\t\tContext\n *\t\t\t.create()\n *\t\t\t.then( context => {\n *\t\t\t\tcontext.config.get( 'foo' ); // -> 1\n *\t\t\t\tcontext.config.get( 'bar' ); // -> 2\n *\t\t\t} );\n *\n *\t\t// The default options can be overridden by the configuration passed to create().\n *\t\tContext\n *\t\t\t.create( { bar: 3 } )\n *\t\t\t.then( context => {\n *\t\t\t\tcontext.config.get( 'foo' ); // -> 1\n *\t\t\t\tcontext.config.get( 'bar' ); // -> 3\n *\t\t\t} );\n *\n * See also {@link module:core/context~Context.builtinPlugins `Context.builtinPlugins`}\n * and {@link module:core/editor/editor~Editor.defaultConfig `Editor.defaultConfig`}.\n *\n * @static\n * @member {Object} module:core/context~Context.defaultConfig\n */\n","import baseClone from './_baseClone.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * Creates a shallow clone of `value`.\n *\n * **Note:** This method is loosely based on the\n * [structured clone algorithm](https://mdn.io/Structured_clone_algorithm)\n * and supports cloning arrays, array buffers, booleans, date objects, maps,\n * numbers, `Object` objects, regexes, sets, strings, symbols, and typed\n * arrays. The own enumerable properties of `arguments` objects are cloned\n * as plain objects. An empty object is returned for uncloneable values such\n * as error objects, functions, DOM nodes, and WeakMaps.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to clone.\n * @returns {*} Returns the cloned value.\n * @see _.cloneDeep\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var shallow = _.clone(objects);\n * console.log(shallow[0] === objects[0]);\n * // => true\n */\nfunction clone(value) {\n  return baseClone(value, CLONE_SYMBOLS_FLAG);\n}\n\nexport default clone;\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/node\n */\n\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport EmitterMixin from '@ckeditor/ckeditor5-utils/src/emittermixin';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\nimport compareArrays from '@ckeditor/ckeditor5-utils/src/comparearrays';\nimport { clone } from 'lodash-es';\n\n// To check if component is loaded more than once.\nimport '@ckeditor/ckeditor5-utils/src/version';\n\n/**\n * Abstract view node class.\n *\n * This is an abstract class. Its constructor should not be used directly.\n * Use the {@link module:engine/view/downcastwriter~DowncastWriter} or {@link module:engine/view/upcastwriter~UpcastWriter}\n * to create new instances of view nodes.\n *\n * @abstract\n */\nexport default class Node {\n\t/**\n\t * Creates a tree view node.\n\t *\n\t * @protected\n\t * @param {module:engine/view/document~Document} document The document instance to which this node belongs.\n\t */\n\tconstructor( document ) {\n\t\t/**\n\t\t * The document instance to which this node belongs.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/document~Document}\n\t\t */\n\t\tthis.document = document;\n\n\t\t/**\n\t\t * Parent element. Null by default. Set by {@link module:engine/view/element~Element#_insertChild}.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/element~Element|module:engine/view/documentfragment~DocumentFragment|null}\n\t\t */\n\t\tthis.parent = null;\n\t}\n\n\t/**\n\t * Index of the node in the parent element or null if the node has no parent.\n\t *\n\t * Accessing this property throws an error if this node's parent element does not contain it.\n\t * This means that view tree got broken.\n\t *\n\t * @readonly\n\t * @type {Number|null}\n\t */\n\tget index() {\n\t\tlet pos;\n\n\t\tif ( !this.parent ) {\n\t\t\treturn null;\n\t\t}\n\n\t\t// No parent or child doesn't exist in parent's children.\n\t\tif ( ( pos = this.parent.getChildIndex( this ) ) == -1 ) {\n\t\t\t/**\n\t\t\t * The node's parent does not contain this node. It means that the document tree is corrupted.\n\t\t\t *\n\t\t\t * @error view-node-not-found-in-parent\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'view-node-not-found-in-parent', this );\n\t\t}\n\n\t\treturn pos;\n\t}\n\n\t/**\n\t * Node's next sibling, or `null` if it is the last child.\n\t *\n\t * @readonly\n\t * @type {module:engine/view/node~Node|null}\n\t */\n\tget nextSibling() {\n\t\tconst index = this.index;\n\n\t\treturn ( index !== null && this.parent.getChild( index + 1 ) ) || null;\n\t}\n\n\t/**\n\t * Node's previous sibling, or `null` if it is the first child.\n\t *\n\t * @readonly\n\t * @type {module:engine/view/node~Node|null}\n\t */\n\tget previousSibling() {\n\t\tconst index = this.index;\n\n\t\treturn ( index !== null && this.parent.getChild( index - 1 ) ) || null;\n\t}\n\n\t/**\n\t * Top-most ancestor of the node. If the node has no parent it is the root itself.\n\t *\n\t * @readonly\n\t * @type {module:engine/view/node~Node|module:engine/view/documentfragment~DocumentFragment}\n\t */\n\tget root() {\n\t\tlet root = this; // eslint-disable-line consistent-this\n\n\t\twhile ( root.parent ) {\n\t\t\troot = root.parent;\n\t\t}\n\n\t\treturn root;\n\t}\n\n\t/**\n\t * Returns true if the node is in a tree rooted in the document (is a descendant of one of its roots).\n\t *\n\t * @returns {Boolean}\n\t */\n\tisAttached() {\n\t\treturn this.root.is( 'rootElement' );\n\t}\n\n\t/**\n\t * Gets a path to the node. The path is an array containing indices of consecutive ancestors of this node,\n\t * beginning from {@link module:engine/view/node~Node#root root}, down to this node's index.\n\t *\n\t *\t\tconst abc = downcastWriter.createText( 'abc' );\n\t *\t\tconst foo = downcastWriter.createText( 'foo' );\n\t *\t\tconst h1 = downcastWriter.createElement( 'h1', null, downcastWriter.createText( 'header' ) );\n\t *\t\tconst p = downcastWriter.createElement( 'p', null, [ abc, foo ] );\n\t *\t\tconst div = downcastWriter.createElement( 'div', null, [ h1, p ] );\n\t *\t\tfoo.getPath(); // Returns [ 1, 3 ]. `foo` is in `p` which is in `div`. `p` starts at offset 1, while `foo` at 3.\n\t *\t\th1.getPath(); // Returns [ 0 ].\n\t *\t\tdiv.getPath(); // Returns [].\n\t *\n\t * @returns {Array.<Number>} The path.\n\t */\n\tgetPath() {\n\t\tconst path = [];\n\t\tlet node = this; // eslint-disable-line consistent-this\n\n\t\twhile ( node.parent ) {\n\t\t\tpath.unshift( node.index );\n\t\t\tnode = node.parent;\n\t\t}\n\n\t\treturn path;\n\t}\n\n\t/**\n\t * Returns ancestors array of this node.\n\t *\n\t * @param {Object} options Options object.\n\t * @param {Boolean} [options.includeSelf=false] When set to `true` this node will be also included in parent's array.\n\t * @param {Boolean} [options.parentFirst=false] When set to `true`, array will be sorted from node's parent to root element,\n\t * otherwise root element will be the first item in the array.\n\t * @returns {Array} Array with ancestors.\n\t */\n\tgetAncestors( options = { includeSelf: false, parentFirst: false } ) {\n\t\tconst ancestors = [];\n\t\tlet parent = options.includeSelf ? this : this.parent;\n\n\t\twhile ( parent ) {\n\t\t\tancestors[ options.parentFirst ? 'push' : 'unshift' ]( parent );\n\t\t\tparent = parent.parent;\n\t\t}\n\n\t\treturn ancestors;\n\t}\n\n\t/**\n\t * Returns a {@link module:engine/view/element~Element} or {@link module:engine/view/documentfragment~DocumentFragment}\n\t * which is a common ancestor of both nodes.\n\t *\n\t * @param {module:engine/view/node~Node} node The second node.\n\t * @param {Object} options Options object.\n\t * @param {Boolean} [options.includeSelf=false] When set to `true` both nodes will be considered \"ancestors\" too.\n\t * Which means that if e.g. node A is inside B, then their common ancestor will be B.\n\t * @returns {module:engine/view/element~Element|module:engine/view/documentfragment~DocumentFragment|null}\n\t */\n\tgetCommonAncestor( node, options = {} ) {\n\t\tconst ancestorsA = this.getAncestors( options );\n\t\tconst ancestorsB = node.getAncestors( options );\n\n\t\tlet i = 0;\n\n\t\twhile ( ancestorsA[ i ] == ancestorsB[ i ] && ancestorsA[ i ] ) {\n\t\t\ti++;\n\t\t}\n\n\t\treturn i === 0 ? null : ancestorsA[ i - 1 ];\n\t}\n\n\t/**\n\t * Returns whether this node is before given node. `false` is returned if nodes are in different trees (for example,\n\t * in different {@link module:engine/view/documentfragment~DocumentFragment}s).\n\t *\n\t * @param {module:engine/view/node~Node} node Node to compare with.\n\t * @returns {Boolean}\n\t */\n\tisBefore( node ) {\n\t\t// Given node is not before this node if they are same.\n\t\tif ( this == node ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Return `false` if it is impossible to compare nodes.\n\t\tif ( this.root !== node.root ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst thisPath = this.getPath();\n\t\tconst nodePath = node.getPath();\n\n\t\tconst result = compareArrays( thisPath, nodePath );\n\n\t\tswitch ( result ) {\n\t\t\tcase 'prefix':\n\t\t\t\treturn true;\n\n\t\t\tcase 'extension':\n\t\t\t\treturn false;\n\n\t\t\tdefault:\n\t\t\t\treturn thisPath[ result ] < nodePath[ result ];\n\t\t}\n\t}\n\n\t/**\n\t * Returns whether this node is after given node. `false` is returned if nodes are in different trees (for example,\n\t * in different {@link module:engine/view/documentfragment~DocumentFragment}s).\n\t *\n\t * @param {module:engine/view/node~Node} node Node to compare with.\n\t * @returns {Boolean}\n\t */\n\tisAfter( node ) {\n\t\t// Given node is not before this node if they are same.\n\t\tif ( this == node ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Return `false` if it is impossible to compare nodes.\n\t\tif ( this.root !== node.root ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// In other cases, just check if the `node` is before, and return the opposite.\n\t\treturn !this.isBefore( node );\n\t}\n\n\t/**\n\t * Removes node from parent.\n\t *\n\t * @protected\n\t */\n\t_remove() {\n\t\tthis.parent._removeChildren( this.index );\n\t}\n\n\t/**\n\t * @protected\n\t * @param {module:engine/view/document~ChangeType} type Type of the change.\n\t * @param {module:engine/view/node~Node} node Changed node.\n\t * @fires change\n\t */\n\t_fireChange( type, node ) {\n\t\tthis.fire( 'change:' + type, node );\n\n\t\tif ( this.parent ) {\n\t\t\tthis.parent._fireChange( type, node );\n\t\t}\n\t}\n\n\t/**\n\t * Custom toJSON method to solve child-parent circular dependencies.\n\t *\n\t * @returns {Object} Clone of this object with the parent property removed.\n\t */\n\ttoJSON() {\n\t\tconst json = clone( this );\n\n\t\t// Due to circular references we need to remove parent reference.\n\t\tdelete json.parent;\n\n\t\treturn json;\n\t}\n\n\t/**\n\t * Checks whether this object is of the given type.\n\t *\n\t * This method is useful when processing view objects that are of unknown type. For example, a function\n\t * may return a {@link module:engine/view/documentfragment~DocumentFragment} or a {@link module:engine/view/node~Node}\n\t * that can be either a text node or an element. This method can be used to check what kind of object is returned.\n\t *\n\t *\t\tsomeObject.is( 'element' ); // -> true if this is an element\n\t *\t\tsomeObject.is( 'node' ); // -> true if this is a node (a text node or an element)\n\t *\t\tsomeObject.is( 'documentFragment' ); // -> true if this is a document fragment\n\t *\n\t * Since this method is also available on a range of model objects, you can prefix the type of the object with\n\t * `model:` or `view:` to check, for example, if this is the model's or view's element:\n\t *\n\t *\t\tviewElement.is( 'view:element' ); // -> true\n\t *\t\tviewElement.is( 'model:element' ); // -> false\n\t *\n\t * By using this method it is also possible to check a name of an element:\n\t *\n\t *\t\timgElement.is( 'element', 'img' ); // -> true\n\t *\t\timgElement.is( 'view:element', 'img' ); // -> same as above, but more precise\n\t *\n\t * The list of view objects which implement the `is()` method:\n\t *\n\t * * {@link module:engine/view/attributeelement~AttributeElement#is `AttributeElement#is()`}\n\t * * {@link module:engine/view/containerelement~ContainerElement#is `ContainerElement#is()`}\n\t * * {@link module:engine/view/documentfragment~DocumentFragment#is `DocumentFragment#is()`}\n\t * * {@link module:engine/view/documentselection~DocumentSelection#is `DocumentSelection#is()`}\n\t * * {@link module:engine/view/editableelement~EditableElement#is `EditableElement#is()`}\n\t * * {@link module:engine/view/element~Element#is `Element#is()`}\n\t * * {@link module:engine/view/emptyelement~EmptyElement#is `EmptyElement#is()`}\n\t * * {@link module:engine/view/node~Node#is `Node#is()`}\n\t * * {@link module:engine/view/position~Position#is `Position#is()`}\n\t * * {@link module:engine/view/range~Range#is `Range#is()`}\n\t * * {@link module:engine/view/rooteditableelement~RootEditableElement#is `RootEditableElement#is()`}\n\t * * {@link module:engine/view/selection~Selection#is `Selection#is()`}\n\t * * {@link module:engine/view/text~Text#is `Text#is()`}\n\t * * {@link module:engine/view/textproxy~TextProxy#is `TextProxy#is()`}\n\t * * {@link module:engine/view/uielement~UIElement#is `UIElement#is()`}\n\t *\n\t * @method #is\n\t * @param {String} type Type to check.\n\t * @returns {Boolean}\n\t */\n\tis( type ) {\n\t\treturn type === 'node' || type === 'view:node';\n\t}\n\n\t/**\n\t * Clones this node.\n\t *\n\t * @protected\n\t * @method #_clone\n\t * @returns {module:engine/view/node~Node} Clone of this node.\n\t */\n\n\t/**\n\t * Checks if provided node is similar to this node.\n\t *\n\t * @method #isSimilar\n\t * @returns {Boolean} True if nodes are similar.\n\t */\n}\n\n/**\n * Fired when list of {@link module:engine/view/element~Element elements} children changes.\n *\n * Change event is bubbled – it is fired on all ancestors.\n *\n * @event change:children\n * @param {module:engine/view/node~Node} changedNode\n */\n\n/**\n * Fired when list of {@link module:engine/view/element~Element elements} attributes changes.\n *\n * Change event is bubbled – it is fired on all ancestors.\n *\n * @event change:attributes\n * @param {module:engine/view/node~Node} changedNode\n */\n\n/**\n * Fired when {@link module:engine/view/text~Text text nodes} data changes.\n *\n * Change event is bubbled – it is fired on all ancestors.\n *\n * @event change:text\n * @param {module:engine/view/node~Node} changedNode\n */\n\n/**\n * @event change\n */\n\nmix( Node, EmitterMixin );\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/text\n */\n\nimport Node from './node';\n\n/**\n * Tree view text node.\n *\n * The constructor of this class should not be used directly. To create a new text node instance\n * use the {@link module:engine/view/downcastwriter~DowncastWriter#createText `DowncastWriter#createText()`}\n * method when working on data downcasted from the model or the\n * {@link module:engine/view/upcastwriter~UpcastWriter#createText `UpcastWriter#createText()`}\n * method when working on non-semantic views.\n *\n * @extends module:engine/view/node~Node\n */\nexport default class Text extends Node {\n\t/**\n\t * Creates a tree view text node.\n\t *\n\t * @protected\n\t * @param {module:engine/view/document~Document} document The document instance to which this text node belongs.\n\t * @param {String} data The text's data.\n\t */\n\tconstructor( document, data ) {\n\t\tsuper( document );\n\n\t\t/**\n\t\t * The text content.\n\t\t *\n\t\t * Setting the data fires the {@link module:engine/view/node~Node#event:change:text change event}.\n\t\t *\n\t\t * @protected\n\t\t * @member {String} module:engine/view/text~Text#_textData\n\t\t */\n\t\tthis._textData = data;\n\t}\n\n\t/**\n\t * Checks whether this object is of the given type.\n\t *\n\t *\t\ttext.is( '$text' ); // -> true\n\t *\t\ttext.is( 'node' ); // -> true\n\t *\t\ttext.is( 'view:$text' ); // -> true\n\t *\t\ttext.is( 'view:node' ); // -> true\n\t *\n\t *\t\ttext.is( 'model:$text' ); // -> false\n\t *\t\ttext.is( 'element' ); // -> false\n\t *\t\ttext.is( 'range' ); // -> false\n\t *\n\t * {@link module:engine/view/node~Node#is Check the entire list of view objects} which implement the `is()` method.\n\t *\n\t * **Note:** Until version 20.0.0 this method wasn't accepting `'$text'` type. The legacy `'text'` type is still\n\t * accepted for backward compatibility.\n\t *\n\t * @param {String} type Type to check.\n\t * @returns {Boolean}\n\t */\n\tis( type ) {\n\t\treturn type === '$text' || type === 'view:$text' ||\n\t\t\t// This are legacy values kept for backward compatibility.\n\t\t\ttype === 'text' || type === 'view:text' ||\n\t\t\t// From super.is(). This is highly utilised method and cannot call super. See ckeditor/ckeditor5#6529.\n\t\t\ttype === 'node' || type === 'view:node';\n\t}\n\n\t/**\n\t * The text content.\n\t *\n\t * @readonly\n\t * @type {String}\n\t */\n\tget data() {\n\t\treturn this._textData;\n\t}\n\n\t/**\n\t * The `_data` property is controlled by a getter and a setter.\n\t *\n\t * The getter is required when using the addition assignment operator on protected property:\n\t *\n\t *\t\tconst foo = downcastWriter.createText( 'foo' );\n\t *\t\tconst bar = downcastWriter.createText( 'bar' );\n\t *\n\t *\t\tfoo._data += bar.data;   // executes: `foo._data = foo._data + bar.data`\n\t *\t\tconsole.log( foo.data ); // prints: 'foobar'\n\t *\n\t * If the protected getter didn't exist, `foo._data` will return `undefined` and result of the merge will be invalid.\n\t *\n\t * The setter sets data and fires the {@link module:engine/view/node~Node#event:change:text change event}.\n\t *\n\t * @protected\n\t * @type {String}\n\t */\n\tget _data() {\n\t\treturn this.data;\n\t}\n\n\tset _data( data ) {\n\t\tthis._fireChange( 'text', this );\n\n\t\tthis._textData = data;\n\t}\n\n\t/**\n\t * Checks if this text node is similar to other text node.\n\t * Both nodes should have the same data to be considered as similar.\n\t *\n\t * @param {module:engine/view/text~Text} otherNode Node to check if it is same as this node.\n\t * @returns {Boolean}\n\t */\n\tisSimilar( otherNode ) {\n\t\tif ( !( otherNode instanceof Text ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn this === otherNode || this.data === otherNode.data;\n\t}\n\n\t/**\n\t * Clones this node.\n\t *\n\t * @protected\n\t * @returns {module:engine/view/text~Text} Text node that is a clone of this node.\n\t */\n\t_clone() {\n\t\treturn new Text( this.document, this.data );\n\t}\n\n\t// @if CK_DEBUG_ENGINE // toString() {\n\t// @if CK_DEBUG_ENGINE // \treturn `#${ this.data }`;\n\t// @if CK_DEBUG_ENGINE // }\n\n\t// @if CK_DEBUG_ENGINE // log() {\n\t// @if CK_DEBUG_ENGINE // \tconsole.log( 'ViewText: ' + this );\n\t// @if CK_DEBUG_ENGINE // }\n\n\t// @if CK_DEBUG_ENGINE // logExtended() {\n\t// @if CK_DEBUG_ENGINE // \tconsole.log( 'ViewText: ' + this );\n\t// @if CK_DEBUG_ENGINE // }\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/textproxy\n */\n\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n\n/**\n * TextProxy is a wrapper for substring of {@link module:engine/view/text~Text}. Instance of this class is created by\n * {@link module:engine/view/treewalker~TreeWalker} when only a part of {@link module:engine/view/text~Text} needs to be returned.\n *\n * `TextProxy` has an API similar to {@link module:engine/view/text~Text Text} and allows to do most of the common tasks performed\n * on view nodes.\n *\n * **Note:** Some `TextProxy` instances may represent whole text node, not just a part of it.\n * See {@link module:engine/view/textproxy~TextProxy#isPartial}.\n *\n * **Note:** `TextProxy` is a readonly interface.\n *\n * **Note:** `TextProxy` instances are created on the fly basing on the current state of parent {@link module:engine/view/text~Text}.\n * Because of this it is highly unrecommended to store references to `TextProxy instances because they might get\n * invalidated due to operations on Document. Also TextProxy is not a {@link module:engine/view/node~Node} so it can not be\n * inserted as a child of {@link module:engine/view/element~Element}.\n *\n * `TextProxy` instances are created by {@link module:engine/view/treewalker~TreeWalker view tree walker}. You should not need to create\n * an instance of this class by your own.\n */\nexport default class TextProxy {\n\t/**\n\t * Creates a text proxy.\n\t *\n\t * @protected\n\t * @param {module:engine/view/text~Text} textNode Text node which part is represented by this text proxy.\n\t * @param {Number} offsetInText Offset in {@link module:engine/view/textproxy~TextProxy#textNode text node}\n\t * from which the text proxy starts.\n\t * @param {Number} length Text proxy length, that is how many text node's characters, starting from `offsetInText` it represents.\n\t * @constructor\n\t */\n\tconstructor( textNode, offsetInText, length ) {\n\t\t/**\n\t\t * Reference to the {@link module:engine/view/text~Text} element which TextProxy is a substring.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/text~Text} module:engine/view/textproxy~TextProxy#textNode\n\t\t */\n\t\tthis.textNode = textNode;\n\n\t\tif ( offsetInText < 0 || offsetInText > textNode.data.length ) {\n\t\t\t/**\n\t\t\t * Given offsetInText value is incorrect.\n\t\t\t *\n\t\t\t * @error view-textproxy-wrong-offsetintext\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'view-textproxy-wrong-offsetintext', this );\n\t\t}\n\n\t\tif ( length < 0 || offsetInText + length > textNode.data.length ) {\n\t\t\t/**\n\t\t\t * Given length value is incorrect.\n\t\t\t *\n\t\t\t * @error view-textproxy-wrong-length\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'view-textproxy-wrong-length', this );\n\t\t}\n\n\t\t/**\n\t\t * Text data represented by this text proxy.\n\t\t *\n\t\t * @readonly\n\t\t * @member {String} module:engine/view/textproxy~TextProxy#data\n\t\t */\n\t\tthis.data = textNode.data.substring( offsetInText, offsetInText + length );\n\n\t\t/**\n\t\t * Offset in the `textNode` where this `TextProxy` instance starts.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Number} module:engine/view/textproxy~TextProxy#offsetInText\n\t\t */\n\t\tthis.offsetInText = offsetInText;\n\t}\n\n\t/**\n\t * Offset size of this node.\n\t *\n\t * @readonly\n\t * @type {Number}\n\t */\n\tget offsetSize() {\n\t\treturn this.data.length;\n\t}\n\n\t/**\n\t * Flag indicating whether `TextProxy` instance covers only part of the original {@link module:engine/view/text~Text text node}\n\t * (`true`) or the whole text node (`false`).\n\t *\n\t * This is `false` when text proxy starts at the very beginning of {@link module:engine/view/textproxy~TextProxy#textNode textNode}\n\t * ({@link module:engine/view/textproxy~TextProxy#offsetInText offsetInText} equals `0`) and text proxy sizes is equal to\n\t * text node size.\n\t *\n\t * @readonly\n\t * @type {Boolean}\n\t */\n\tget isPartial() {\n\t\treturn this.data.length !== this.textNode.data.length;\n\t}\n\n\t/**\n\t * Parent of this text proxy, which is same as parent of text node represented by this text proxy.\n\t *\n\t * @readonly\n\t * @type {module:engine/view/element~Element|module:engine/view/documentfragment~DocumentFragment|null}\n\t */\n\tget parent() {\n\t\treturn this.textNode.parent;\n\t}\n\n\t/**\n\t * Root of this text proxy, which is same as root of text node represented by this text proxy.\n\t *\n\t * @readonly\n\t * @type {module:engine/view/node~Node|module:engine/view/documentfragment~DocumentFragment}\n\t */\n\tget root() {\n\t\treturn this.textNode.root;\n\t}\n\n\t/**\n\t * {@link module:engine/view/document~Document View document} that owns this text proxy, or `null` if the text proxy is inside\n\t * {@link module:engine/view/documentfragment~DocumentFragment document fragment}.\n\t *\n\t * @readonly\n\t * @type {module:engine/view/document~Document|null}\n\t */\n\tget document() {\n\t\treturn this.textNode.document;\n\t}\n\n\t/**\n\t * Checks whether this object is of the given type.\n\t *\n\t *\t\ttextProxy.is( '$textProxy' ); // -> true\n\t *\t\ttextProxy.is( 'view:$textProxy' ); // -> true\n\t *\n\t *\t\ttextProxy.is( 'model:$textProxy' ); // -> false\n\t *\t\ttextProxy.is( 'element' ); // -> false\n\t *\t\ttextProxy.is( 'range' ); // -> false\n\t *\n\t * {@link module:engine/view/node~Node#is Check the entire list of view objects} which implement the `is()` method.\n\t *\n\t * **Note:** Until version 20.0.0 this method wasn't accepting `'$textProxy'` type. The legacy `'textProxy'` type is still\n\t * accepted for backward compatibility.\n\t *\n\t * @param {String} type Type to check.\n\t * @returns {Boolean}\n\t */\n\tis( type ) {\n\t\treturn type === '$textProxy' || type === 'view:$textProxy' ||\n\t\t\t// This are legacy values kept for backward compatibility.\n\t\t\ttype === 'textProxy' || type === 'view:textProxy';\n\t}\n\n\t/**\n\t * Returns ancestors array of this text proxy.\n\t *\n\t * @param {Object} options Options object.\n\t * @param {Boolean} [options.includeSelf=false] When set to `true` {#textNode} will be also included in parent's array.\n\t * @param {Boolean} [options.parentFirst=false] When set to `true`, array will be sorted from text proxy parent to\n\t * root element, otherwise root element will be the first item in the array.\n\t * @returns {Array} Array with ancestors.\n\t */\n\tgetAncestors( options = { includeSelf: false, parentFirst: false } ) {\n\t\tconst ancestors = [];\n\t\tlet parent = options.includeSelf ? this.textNode : this.parent;\n\n\t\twhile ( parent !== null ) {\n\t\t\tancestors[ options.parentFirst ? 'push' : 'unshift' ]( parent );\n\t\t\tparent = parent.parent;\n\t\t}\n\n\t\treturn ancestors;\n\t}\n\n\t// @if CK_DEBUG_ENGINE // toString() {\n\t// @if CK_DEBUG_ENGINE // \treturn `#${ this.data }`;\n\t// @if CK_DEBUG_ENGINE // }\n\n\t// @if CK_DEBUG_ENGINE // log() {\n\t// @if CK_DEBUG_ENGINE // \tconsole.log( 'ViewTextProxy: ' + this );\n\t// @if CK_DEBUG_ENGINE // }\n\n\t// @if CK_DEBUG_ENGINE // logExtended() {\n\t// @if CK_DEBUG_ENGINE // \tconsole.log( 'ViewTextProxy: ' + this );\n\t// @if CK_DEBUG_ENGINE // }\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/matcher\n */\n\n/**\n * View matcher class.\n * Instance of this class can be used to find {@link module:engine/view/element~Element elements} that match given pattern.\n */\nexport default class Matcher {\n\t/**\n\t * Creates new instance of Matcher.\n\t *\n\t * @param {String|RegExp|Object} [pattern] Match patterns. See {@link module:engine/view/matcher~Matcher#add add method} for\n\t * more information.\n\t */\n\tconstructor( ...pattern ) {\n\t\t/**\n\t\t * @private\n\t\t * @type {Array<String|RegExp|Object>}\n\t\t */\n\t\tthis._patterns = [];\n\n\t\tthis.add( ...pattern );\n\t}\n\n\t/**\n\t * Adds pattern or patterns to matcher instance.\n\t *\n\t *\t\t// String.\n\t *\t\tmatcher.add( 'div' );\n\t *\n\t *\t\t// Regular expression.\n\t *\t\tmatcher.add( /^\\w/ );\n\t *\n\t *\t\t// Single class.\n\t *\t\tmatcher.add( {\n\t *\t\t\tclasses: 'foobar'\n\t *\t\t} );\n\t *\n\t * See {@link module:engine/view/matcher~MatcherPattern} for more examples.\n\t *\n\t * Multiple patterns can be added in one call:\n\t *\n\t * \t\tmatcher.add( 'div', { classes: 'foobar' } );\n\t *\n\t * @param {Object|String|RegExp|Function} pattern Object describing pattern details. If string or regular expression\n\t * is provided it will be used to match element's name. Pattern can be also provided in a form\n\t * of a function - then this function will be called with each {@link module:engine/view/element~Element element} as a parameter.\n\t * Function's return value will be stored under `match` key of the object returned from\n\t * {@link module:engine/view/matcher~Matcher#match match} or {@link module:engine/view/matcher~Matcher#matchAll matchAll} methods.\n\t * @param {String|RegExp} [pattern.name] Name or regular expression to match element's name.\n\t * @param {Object} [pattern.attributes] Object with key-value pairs representing attributes to match. Each object key\n\t * represents attribute name. Value under that key can be either:\n\t * * `true` - then attribute is just required (can be empty),\n\t * * a string - then attribute has to be equal, or\n\t * * a regular expression - then attribute has to match the expression.\n\t * @param {String|RegExp|Array} [pattern.classes] Class name or array of class names to match. Each name can be\n\t * provided in a form of string or regular expression.\n\t * @param {Object} [pattern.styles] Object with key-value pairs representing styles to match. Each object key\n\t * represents style name. Value under that key can be either a string or a regular expression and it will be used\n\t * to match style value.\n\t */\n\tadd( ...pattern ) {\n\t\tfor ( let item of pattern ) {\n\t\t\t// String or RegExp pattern is used as element's name.\n\t\t\tif ( typeof item == 'string' || item instanceof RegExp ) {\n\t\t\t\titem = { name: item };\n\t\t\t}\n\n\t\t\t// Single class name/RegExp can be provided.\n\t\t\tif ( item.classes && ( typeof item.classes == 'string' || item.classes instanceof RegExp ) ) {\n\t\t\t\titem.classes = [ item.classes ];\n\t\t\t}\n\n\t\t\tthis._patterns.push( item );\n\t\t}\n\t}\n\n\t/**\n\t * Matches elements for currently stored patterns. Returns match information about first found\n\t * {@link module:engine/view/element~Element element}, otherwise returns `null`.\n\t *\n\t * Example of returned object:\n\t *\n\t *\t\t{\n\t *\t\t\telement: <instance of found element>,\n\t *\t\t\tpattern: <pattern used to match found element>,\n\t *\t\t\tmatch: {\n\t *\t\t\t\tname: true,\n\t *\t\t\t\tattributes: [ 'title', 'href' ],\n\t *\t\t\t\tclasses: [ 'foo' ],\n\t *\t\t\t\tstyles: [ 'color', 'position' ]\n\t *\t\t\t}\n\t *\t\t}\n\t *\n\t * @see module:engine/view/matcher~Matcher#add\n\t * @see module:engine/view/matcher~Matcher#matchAll\n\t * @param {...module:engine/view/element~Element} element View element to match against stored patterns.\n\t * @returns {Object|null} result\n\t * @returns {module:engine/view/element~Element} result.element Matched view element.\n\t * @returns {Object|String|RegExp|Function} result.pattern Pattern that was used to find matched element.\n\t * @returns {Object} result.match Object representing matched element parts.\n\t * @returns {Boolean} [result.match.name] True if name of the element was matched.\n\t * @returns {Array} [result.match.attributes] Array with matched attribute names.\n\t * @returns {Array} [result.match.classes] Array with matched class names.\n\t * @returns {Array} [result.match.styles] Array with matched style names.\n\t */\n\tmatch( ...element ) {\n\t\tfor ( const singleElement of element ) {\n\t\t\tfor ( const pattern of this._patterns ) {\n\t\t\t\tconst match = isElementMatching( singleElement, pattern );\n\n\t\t\t\tif ( match ) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\telement: singleElement,\n\t\t\t\t\t\tpattern,\n\t\t\t\t\t\tmatch\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Matches elements for currently stored patterns. Returns array of match information with all found\n\t * {@link module:engine/view/element~Element elements}. If no element is found - returns `null`.\n\t *\n\t * @see module:engine/view/matcher~Matcher#add\n\t * @see module:engine/view/matcher~Matcher#match\n\t * @param {...module:engine/view/element~Element} element View element to match against stored patterns.\n\t * @returns {Array.<Object>|null} Array with match information about found elements or `null`. For more information\n\t * see {@link module:engine/view/matcher~Matcher#match match method} description.\n\t */\n\tmatchAll( ...element ) {\n\t\tconst results = [];\n\n\t\tfor ( const singleElement of element ) {\n\t\t\tfor ( const pattern of this._patterns ) {\n\t\t\t\tconst match = isElementMatching( singleElement, pattern );\n\n\t\t\t\tif ( match ) {\n\t\t\t\t\tresults.push( {\n\t\t\t\t\t\telement: singleElement,\n\t\t\t\t\t\tpattern,\n\t\t\t\t\t\tmatch\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn results.length > 0 ? results : null;\n\t}\n\n\t/**\n\t * Returns the name of the element to match if there is exactly one pattern added to the matcher instance\n\t * and it matches element name defined by `string` (not `RegExp`). Otherwise, returns `null`.\n\t *\n\t * @returns {String|null} Element name trying to match.\n\t */\n\tgetElementName() {\n\t\tif ( this._patterns.length !== 1 ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst pattern = this._patterns[ 0 ];\n\t\tconst name = pattern.name;\n\n\t\treturn ( typeof pattern != 'function' && name && !( name instanceof RegExp ) ) ? name : null;\n\t}\n}\n\n// Returns match information if {@link module:engine/view/element~Element element} is matching provided pattern.\n// If element cannot be matched to provided pattern - returns `null`.\n//\n// @param {module:engine/view/element~Element} element\n// @param {Object|String|RegExp|Function} pattern\n// @returns {Object|null} Returns object with match information or null if element is not matching.\nfunction isElementMatching( element, pattern ) {\n\t// If pattern is provided as function - return result of that function;\n\tif ( typeof pattern == 'function' ) {\n\t\treturn pattern( element );\n\t}\n\n\tconst match = {};\n\t// Check element's name.\n\tif ( pattern.name ) {\n\t\tmatch.name = matchName( pattern.name, element.name );\n\n\t\tif ( !match.name ) {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\t// Check element's attributes.\n\tif ( pattern.attributes ) {\n\t\tmatch.attributes = matchAttributes( pattern.attributes, element );\n\n\t\tif ( !match.attributes ) {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\t// Check element's classes.\n\tif ( pattern.classes ) {\n\t\tmatch.classes = matchClasses( pattern.classes, element );\n\n\t\tif ( !match.classes ) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t// Check element's styles.\n\tif ( pattern.styles ) {\n\t\tmatch.styles = matchStyles( pattern.styles, element );\n\n\t\tif ( !match.styles ) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn match;\n}\n\n// Checks if name can be matched by provided pattern.\n//\n// @param {String|RegExp} pattern\n// @param {String} name\n// @returns {Boolean} Returns `true` if name can be matched, `false` otherwise.\nfunction matchName( pattern, name ) {\n\t// If pattern is provided as RegExp - test against this regexp.\n\tif ( pattern instanceof RegExp ) {\n\t\treturn pattern.test( name );\n\t}\n\n\treturn pattern === name;\n}\n\n// Checks if attributes of provided element can be matched against provided patterns.\n//\n// @param {Object} patterns Object with information about attributes to match. Each key of the object will be\n// used as attribute name. Value of each key can be a string or regular expression to match against attribute value.\n// @param {module:engine/view/element~Element} element Element which attributes will be tested.\n// @returns {Array|null} Returns array with matched attribute names or `null` if no attributes were matched.\nfunction matchAttributes( patterns, element ) {\n\tconst match = [];\n\n\tfor ( const name in patterns ) {\n\t\tconst pattern = patterns[ name ];\n\n\t\tif ( element.hasAttribute( name ) ) {\n\t\t\tconst attribute = element.getAttribute( name );\n\n\t\t\tif ( pattern === true ) {\n\t\t\t\tmatch.push( name );\n\t\t\t} else if ( pattern instanceof RegExp ) {\n\t\t\t\tif ( pattern.test( attribute ) ) {\n\t\t\t\t\tmatch.push( name );\n\t\t\t\t} else {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t} else if ( attribute === pattern ) {\n\t\t\t\tmatch.push( name );\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\treturn match;\n}\n\n// Checks if classes of provided element can be matched against provided patterns.\n//\n// @param {Array.<String|RegExp>} patterns Array of strings or regular expressions to match against element's classes.\n// @param {module:engine/view/element~Element} element Element which classes will be tested.\n// @returns {Array|null} Returns array with matched class names or `null` if no classes were matched.\nfunction matchClasses( patterns, element ) {\n\tconst match = [];\n\n\tfor ( const pattern of patterns ) {\n\t\tif ( pattern instanceof RegExp ) {\n\t\t\tconst classes = element.getClassNames();\n\n\t\t\tfor ( const name of classes ) {\n\t\t\t\tif ( pattern.test( name ) ) {\n\t\t\t\t\tmatch.push( name );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( match.length === 0 ) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t} else if ( element.hasClass( pattern ) ) {\n\t\t\tmatch.push( pattern );\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\treturn match;\n}\n\n// Checks if styles of provided element can be matched against provided patterns.\n//\n// @param {Object} patterns Object with information about styles to match. Each key of the object will be\n// used as style name. Value of each key can be a string or regular expression to match against style value.\n// @param {module:engine/view/element~Element} element Element which styles will be tested.\n// @returns {Array|null} Returns array with matched style names or `null` if no styles were matched.\nfunction matchStyles( patterns, element ) {\n\tconst match = [];\n\n\tfor ( const name in patterns ) {\n\t\tconst pattern = patterns[ name ];\n\n\t\tif ( element.hasStyle( name ) ) {\n\t\t\tconst style = element.getStyle( name );\n\n\t\t\tif ( pattern instanceof RegExp ) {\n\t\t\t\tif ( pattern.test( style ) ) {\n\t\t\t\t\tmatch.push( name );\n\t\t\t\t} else {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t} else if ( style === pattern ) {\n\t\t\t\tmatch.push( name );\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\treturn match;\n}\n\n/**\n * An entity that is a valid pattern recognized by a matcher. `MatcherPattern` is used by {@link ~Matcher} to recognize\n * if a view element fits in a group of view elements described by the pattern.\n *\n * `MatcherPattern` can be given as a `String`, a `RegExp`, an `Object` or a `Function`.\n *\n * If `MatcherPattern` is given as a `String` or `RegExp`, it will match any view element that has a matching name:\n *\n *\t\t// Match any element with name equal to 'div'.\n *\t\tconst pattern = 'div';\n *\n *\t\t// Match any element which name starts on 'p'.\n *\t\tconst pattern = /^p/;\n *\n * If `MatcherPattern` is given as an `Object`, all the object's properties will be matched with view element properties.\n *\n *\t\t// Match view element's name.\n *\t\tconst pattern = { name: /^p/ };\n *\n *\t\t// Match view element which has matching attributes.\n *\t\tconst pattern = {\n *\t\t\tattributes: {\n *\t\t\t\ttitle: 'foobar',\t// Attribute title should equal 'foobar'.\n *\t\t\t\tfoo: /^\\w+/,\t\t// Attribute foo should match /^\\w+/ regexp.\n *\t\t\t\tbar: true\t\t\t// Attribute bar should be set (can be empty).\n *\t\t\t}\n *\t\t};\n *\n *\t\t// Match view element which has given class.\n *\t\tconst pattern = {\n *\t\t\tclasses: 'foobar'\n *\t\t};\n *\n *\t\t// Match view element class using regular expression.\n *\t\tconst pattern = {\n *\t\t\tclasses: /foo.../\n *\t\t};\n *\n *\t\t// Multiple classes to match.\n *\t\tconst pattern = {\n *\t\t\tclasses: [ 'baz', 'bar', /foo.../ ]\n *\t\t};\n *\n *\t\t// Match view element which has given styles.\n *\t\tconst pattern = {\n *\t\t\tstyles: {\n *\t\t\t\tposition: 'absolute',\n *\t\t\t\tcolor: /^\\w*blue$/\n *\t\t\t}\n *\t\t};\n *\n *\t\t// Pattern with multiple properties.\n *\t\tconst pattern = {\n *\t\t\tname: 'span',\n *\t\t\tstyles: {\n *\t\t\t\t'font-weight': 'bold'\n *\t\t\t},\n *\t\t\tclasses: 'highlighted'\n *\t\t};\n *\n * If `MatcherPattern` is given as a `Function`, the function takes a view element as a first and only parameter and\n * the function should decide whether that element matches. If so, it should return what part of the view element has been matched.\n * Otherwise, the function should return `null`. The returned result will be included in `match` property of the object\n * returned by {@link ~Matcher#match} call.\n *\n *\t\t// Match an empty <div> element.\n *\t\tconst pattern = element => {\n *\t\t\tif ( element.name == 'div' && element.childCount > 0 ) {\n *\t\t\t\t// Return which part of the element was matched.\n *\t\t\t\treturn { name: true };\n *\t\t\t}\n *\n *\t\t\treturn null;\n *\t\t};\n *\n *\t\t// Match a <p> element with big font (\"heading-like\" element).\n *\t\tconst pattern = element => {\n *\t\t\tif ( element.name == 'p' ) {\n *\t\t\t\tconst fontSize = element.getStyle( 'font-size' );\n *\t\t\t\tconst size = fontSize.match( /(\\d+)/px );\n *\n *\t\t\t\tif ( size && Number( size[ 1 ] ) > 26 ) {\n *\t\t\t\t\treturn { name: true, attribute: [ 'font-size' ] };\n *\t\t\t\t}\n *\t\t\t}\n *\n *\t\t\treturn null;\n *\t\t};\n *\n * `MatcherPattern` is defined in a way that it is a superset of {@link module:engine/view/elementdefinition~ElementDefinition},\n * that is, every `ElementDefinition` also can be used as a `MatcherPattern`.\n *\n * @typedef {String|RegExp|Object|Function} module:engine/view/matcher~MatcherPattern\n *\n * @property {String|RegExp} [name] View element name to match.\n * @property {String|RegExp|Array.<String|RegExp>} [classes] View element's class name(s) to match.\n * @property {Object} [styles] Object with key-value pairs representing styles to match.\n * Each object key represents style name. Value can be given as `String` or `RegExp`.\n * @property {Object} [attributes] Object with key-value pairs representing attributes to match.\n * Each object key represents attribute name. Value can be given as `String` or `RegExp`.\n */\n","import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nexport default isSymbol;\n","import isArray from './isArray.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/;\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\nexport default isKey;\n","import MapCache from './_MapCache.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `clear`, `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver != null && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result) || cache;\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Expose `MapCache`.\nmemoize.Cache = MapCache;\n\nexport default memoize;\n","import memoize from './memoize.js';\n\n/** Used as the maximum memoize cache size. */\nvar MAX_MEMOIZE_SIZE = 500;\n\n/**\n * A specialized version of `_.memoize` which clears the memoized function's\n * cache when it exceeds `MAX_MEMOIZE_SIZE`.\n *\n * @private\n * @param {Function} func The function to have its output memoized.\n * @returns {Function} Returns the new memoized function.\n */\nfunction memoizeCapped(func) {\n  var result = memoize(func, function(key) {\n    if (cache.size === MAX_MEMOIZE_SIZE) {\n      cache.clear();\n    }\n    return key;\n  });\n\n  var cache = result.cache;\n  return result;\n}\n\nexport default memoizeCapped;\n","import memoizeCapped from './_memoizeCapped.js';\n\n/** Used to match property names within property paths. */\nvar rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoizeCapped(function(string) {\n  var result = [];\n  if (string.charCodeAt(0) === 46 /* . */) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, subString) {\n    result.push(quote ? subString.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\nexport default stringToPath;\n","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nexport default arrayMap;\n","import Symbol from './_Symbol.js';\nimport arrayMap from './_arrayMap.js';\nimport isArray from './isArray.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nexport default baseToString;\n","import baseToString from './_baseToString.js';\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\nexport default toString;\n","import isArray from './isArray.js';\nimport isKey from './_isKey.js';\nimport stringToPath from './_stringToPath.js';\nimport toString from './toString.js';\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @param {Object} [object] The object to query keys on.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value, object) {\n  if (isArray(value)) {\n    return value;\n  }\n  return isKey(value, object) ? [value] : stringToPath(toString(value));\n}\n\nexport default castPath;\n","/**\n * Gets the last element of `array`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to query.\n * @returns {*} Returns the last element of `array`.\n * @example\n *\n * _.last([1, 2, 3]);\n * // => 3\n */\nfunction last(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? array[length - 1] : undefined;\n}\n\nexport default last;\n","import isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nexport default toKey;\n","import castPath from './_castPath.js';\nimport toKey from './_toKey.js';\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = castPath(path, object);\n\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[toKey(path[index++])];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\nexport default baseGet;\n","/**\n * The base implementation of `_.slice` without an iteratee call guard.\n *\n * @private\n * @param {Array} array The array to slice.\n * @param {number} [start=0] The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the slice of `array`.\n */\nfunction baseSlice(array, start, end) {\n  var index = -1,\n      length = array.length;\n\n  if (start < 0) {\n    start = -start > length ? 0 : (length + start);\n  }\n  end = end > length ? length : end;\n  if (end < 0) {\n    end += length;\n  }\n  length = start > end ? 0 : ((end - start) >>> 0);\n  start >>>= 0;\n\n  var result = Array(length);\n  while (++index < length) {\n    result[index] = array[index + start];\n  }\n  return result;\n}\n\nexport default baseSlice;\n","import baseGet from './_baseGet.js';\nimport baseSlice from './_baseSlice.js';\n\n/**\n * Gets the parent value at `path` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array} path The path to get the parent value of.\n * @returns {*} Returns the parent value.\n */\nfunction parent(object, path) {\n  return path.length < 2 ? object : baseGet(object, baseSlice(path, 0, -1));\n}\n\nexport default parent;\n","import castPath from './_castPath.js';\nimport last from './last.js';\nimport parent from './_parent.js';\nimport toKey from './_toKey.js';\n\n/**\n * The base implementation of `_.unset`.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {Array|string} path The property path to unset.\n * @returns {boolean} Returns `true` if the property is deleted, else `false`.\n */\nfunction baseUnset(object, path) {\n  path = castPath(path, object);\n  object = parent(object, path);\n  return object == null || delete object[toKey(last(path))];\n}\n\nexport default baseUnset;\n","import baseUnset from './_baseUnset.js';\n\n/**\n * Removes the property at `path` of `object`.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The object to modify.\n * @param {Array|string} path The path of the property to unset.\n * @returns {boolean} Returns `true` if the property is deleted, else `false`.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 7 } }] };\n * _.unset(object, 'a[0].b.c');\n * // => true\n *\n * console.log(object);\n * // => { 'a': [{ 'b': {} }] };\n *\n * _.unset(object, ['a', '0', 'b', 'c']);\n * // => true\n *\n * console.log(object);\n * // => { 'a': [{ 'b': {} }] };\n */\nfunction unset(object, path) {\n  return object == null ? true : baseUnset(object, path);\n}\n\nexport default unset;\n","import baseGet from './_baseGet.js';\n\n/**\n * Gets the value at `path` of `object`. If the resolved value is\n * `undefined`, the `defaultValue` is returned in its place.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.get(object, 'a[0].b.c');\n * // => 3\n *\n * _.get(object, ['a', '0', 'b', 'c']);\n * // => 3\n *\n * _.get(object, 'a.b.c', 'default');\n * // => 'default'\n */\nfunction get(object, path, defaultValue) {\n  var result = object == null ? undefined : baseGet(object, path);\n  return result === undefined ? defaultValue : result;\n}\n\nexport default get;\n","import baseAssignValue from './_baseAssignValue.js';\nimport eq from './eq.js';\n\n/**\n * This function is like `assignValue` except that it doesn't assign\n * `undefined` values.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignMergeValue(object, key, value) {\n  if ((value !== undefined && !eq(object[key], value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nexport default assignMergeValue;\n","/**\n * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\nexport default createBaseFor;\n","import createBaseFor from './_createBaseFor.js';\n\n/**\n * The base implementation of `baseForOwn` which iterates over `object`\n * properties returned by `keysFunc` and invokes `iteratee` for each property.\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\nexport default baseFor;\n","import isArrayLike from './isArrayLike.js';\nimport isObjectLike from './isObjectLike.js';\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\nexport default isArrayLikeObject;\n","/**\n * Gets the value at `key`, unless `key` is \"__proto__\" or \"constructor\".\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction safeGet(object, key) {\n  if (key === 'constructor' && typeof object[key] === 'function') {\n    return;\n  }\n\n  if (key == '__proto__') {\n    return;\n  }\n\n  return object[key];\n}\n\nexport default safeGet;\n","import copyObject from './_copyObject.js';\nimport keysIn from './keysIn.js';\n\n/**\n * Converts `value` to a plain object flattening inherited enumerable string\n * keyed properties of `value` to own properties of the plain object.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {Object} Returns the converted plain object.\n * @example\n *\n * function Foo() {\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.assign({ 'a': 1 }, new Foo);\n * // => { 'a': 1, 'b': 2 }\n *\n * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));\n * // => { 'a': 1, 'b': 2, 'c': 3 }\n */\nfunction toPlainObject(value) {\n  return copyObject(value, keysIn(value));\n}\n\nexport default toPlainObject;\n","import assignMergeValue from './_assignMergeValue.js';\nimport cloneBuffer from './_cloneBuffer.js';\nimport cloneTypedArray from './_cloneTypedArray.js';\nimport copyArray from './_copyArray.js';\nimport initCloneObject from './_initCloneObject.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\nimport isArrayLikeObject from './isArrayLikeObject.js';\nimport isBuffer from './isBuffer.js';\nimport isFunction from './isFunction.js';\nimport isObject from './isObject.js';\nimport isPlainObject from './isPlainObject.js';\nimport isTypedArray from './isTypedArray.js';\nimport safeGet from './_safeGet.js';\nimport toPlainObject from './toPlainObject.js';\n\n/**\n * A specialized version of `baseMerge` for arrays and objects which performs\n * deep merges and tracks traversed objects enabling objects with circular\n * references to be merged.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {string} key The key of the value to merge.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} mergeFunc The function to merge values.\n * @param {Function} [customizer] The function to customize assigned values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMergeDeep(object, source, key, srcIndex, mergeFunc, customizer, stack) {\n  var objValue = safeGet(object, key),\n      srcValue = safeGet(source, key),\n      stacked = stack.get(srcValue);\n\n  if (stacked) {\n    assignMergeValue(object, key, stacked);\n    return;\n  }\n  var newValue = customizer\n    ? customizer(objValue, srcValue, (key + ''), object, source, stack)\n    : undefined;\n\n  var isCommon = newValue === undefined;\n\n  if (isCommon) {\n    var isArr = isArray(srcValue),\n        isBuff = !isArr && isBuffer(srcValue),\n        isTyped = !isArr && !isBuff && isTypedArray(srcValue);\n\n    newValue = srcValue;\n    if (isArr || isBuff || isTyped) {\n      if (isArray(objValue)) {\n        newValue = objValue;\n      }\n      else if (isArrayLikeObject(objValue)) {\n        newValue = copyArray(objValue);\n      }\n      else if (isBuff) {\n        isCommon = false;\n        newValue = cloneBuffer(srcValue, true);\n      }\n      else if (isTyped) {\n        isCommon = false;\n        newValue = cloneTypedArray(srcValue, true);\n      }\n      else {\n        newValue = [];\n      }\n    }\n    else if (isPlainObject(srcValue) || isArguments(srcValue)) {\n      newValue = objValue;\n      if (isArguments(objValue)) {\n        newValue = toPlainObject(objValue);\n      }\n      else if (!isObject(objValue) || isFunction(objValue)) {\n        newValue = initCloneObject(srcValue);\n      }\n    }\n    else {\n      isCommon = false;\n    }\n  }\n  if (isCommon) {\n    // Recursively merge objects and arrays (susceptible to call stack limits).\n    stack.set(srcValue, newValue);\n    mergeFunc(newValue, srcValue, srcIndex, customizer, stack);\n    stack['delete'](srcValue);\n  }\n  assignMergeValue(object, key, newValue);\n}\n\nexport default baseMergeDeep;\n","import Stack from './_Stack.js';\nimport assignMergeValue from './_assignMergeValue.js';\nimport baseFor from './_baseFor.js';\nimport baseMergeDeep from './_baseMergeDeep.js';\nimport isObject from './isObject.js';\nimport keysIn from './keysIn.js';\nimport safeGet from './_safeGet.js';\n\n/**\n * The base implementation of `_.merge` without support for multiple sources.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} [customizer] The function to customize merged values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMerge(object, source, srcIndex, customizer, stack) {\n  if (object === source) {\n    return;\n  }\n  baseFor(source, function(srcValue, key) {\n    stack || (stack = new Stack);\n    if (isObject(srcValue)) {\n      baseMergeDeep(object, source, key, srcIndex, baseMerge, customizer, stack);\n    }\n    else {\n      var newValue = customizer\n        ? customizer(safeGet(object, key), srcValue, (key + ''), object, source, stack)\n        : undefined;\n\n      if (newValue === undefined) {\n        newValue = srcValue;\n      }\n      assignMergeValue(object, key, newValue);\n    }\n  }, keysIn);\n}\n\nexport default baseMerge;\n","import baseMerge from './_baseMerge.js';\nimport createAssigner from './_createAssigner.js';\n\n/**\n * This method is like `_.assign` except that it recursively merges own and\n * inherited enumerable string keyed properties of source objects into the\n * destination object. Source properties that resolve to `undefined` are\n * skipped if a destination value exists. Array and plain object properties\n * are merged recursively. Other objects and value types are overridden by\n * assignment. Source objects are applied from left to right. Subsequent\n * sources overwrite property assignments of previous sources.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 0.5.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @example\n *\n * var object = {\n *   'a': [{ 'b': 2 }, { 'd': 4 }]\n * };\n *\n * var other = {\n *   'a': [{ 'c': 3 }, { 'e': 5 }]\n * };\n *\n * _.merge(object, other);\n * // => { 'a': [{ 'b': 2, 'c': 3 }, { 'd': 4, 'e': 5 }] }\n */\nvar merge = createAssigner(function(object, source, srcIndex) {\n  baseMerge(object, source, srcIndex);\n});\n\nexport default merge;\n","import assignValue from './_assignValue.js';\nimport castPath from './_castPath.js';\nimport isIndex from './_isIndex.js';\nimport isObject from './isObject.js';\nimport toKey from './_toKey.js';\n\n/**\n * The base implementation of `_.set`.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {Array|string} path The path of the property to set.\n * @param {*} value The value to set.\n * @param {Function} [customizer] The function to customize path creation.\n * @returns {Object} Returns `object`.\n */\nfunction baseSet(object, path, value, customizer) {\n  if (!isObject(object)) {\n    return object;\n  }\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      lastIndex = length - 1,\n      nested = object;\n\n  while (nested != null && ++index < length) {\n    var key = toKey(path[index]),\n        newValue = value;\n\n    if (key === '__proto__' || key === 'constructor' || key === 'prototype') {\n      return object;\n    }\n\n    if (index != lastIndex) {\n      var objValue = nested[key];\n      newValue = customizer ? customizer(objValue, key, nested) : undefined;\n      if (newValue === undefined) {\n        newValue = isObject(objValue)\n          ? objValue\n          : (isIndex(path[index + 1]) ? [] : {});\n      }\n    }\n    assignValue(nested, key, newValue);\n    nested = nested[key];\n  }\n  return object;\n}\n\nexport default baseSet;\n","import baseSet from './_baseSet.js';\n\n/**\n * Sets the value at `path` of `object`. If a portion of `path` doesn't exist,\n * it's created. Arrays are created for missing index properties while objects\n * are created for all other missing properties. Use `_.setWith` to customize\n * `path` creation.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to modify.\n * @param {Array|string} path The path of the property to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns `object`.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.set(object, 'a[0].b.c', 4);\n * console.log(object.a[0].b.c);\n * // => 4\n *\n * _.set(object, ['x', '0', 'y', 'z'], 5);\n * console.log(object.x[0].y.z);\n * // => 5\n */\nfunction set(object, path, value) {\n  return object == null ? object : baseSet(object, path, value);\n}\n\nexport default set;\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/stylesmap\n */\n\nimport { get, isObject, merge, set, unset } from 'lodash-es';\n\n/**\n * Styles map. Allows handling (adding, removing, retrieving) a set of style rules (usually, of an element).\n *\n * The styles map is capable of normalizing style names so e.g. the following operations are possible:\n */\nexport default class StylesMap {\n\t/**\n\t * Creates Styles instance.\n\t *\n\t * @param {module:engine/view/stylesmap~StylesProcessor} styleProcessor\n\t */\n\tconstructor( styleProcessor ) {\n\t\t/**\n\t\t * Keeps an internal representation of styles map. Normalized styles are kept as object tree to allow unified modification and\n\t\t * value access model using lodash's get, set, unset, etc methods.\n\t\t *\n\t\t * When no style processor rules are defined the it acts as simple key-value storage.\n\t\t *\n\t\t * @private\n\t\t * @type {Object}\n\t\t */\n\t\tthis._styles = {};\n\n\t\t/**\n\t\t * An instance of the {@link module:engine/view/stylesmap~StylesProcessor}.\n\t\t *\n\t\t * @private\n\t\t * @member {module:engine/view/stylesmap~StylesProcessor}\n\t\t */\n\t\tthis._styleProcessor = styleProcessor;\n\t}\n\n\t/**\n\t * Returns true if style map has no styles set.\n\t *\n\t * @returns {Boolean}\n\t */\n\tget isEmpty() {\n\t\tconst entries = Object.entries( this._styles );\n\t\tconst from = Array.from( entries );\n\n\t\treturn !from.length;\n\t}\n\n\t/**\n\t * Number of styles defined.\n\t *\n\t * @type {Number}\n\t */\n\tget size() {\n\t\tif ( this.isEmpty ) {\n\t\t\treturn 0;\n\t\t}\n\n\t\treturn this.getStyleNames().length;\n\t}\n\n\t/**\n\t * Set styles map to a new value.\n\t *\n\t *\t\tstyles.setTo( 'border:1px solid blue;margin-top:1px;' );\n\t *\n\t * @param {String} inlineStyle\n\t */\n\tsetTo( inlineStyle ) {\n\t\tthis.clear();\n\n\t\tconst parsedStyles = Array.from( parseInlineStyles( inlineStyle ).entries() );\n\n\t\tfor ( const [ key, value ] of parsedStyles ) {\n\t\t\tthis._styleProcessor.toNormalizedForm( key, value, this._styles );\n\t\t}\n\t}\n\n\t/**\n\t * Checks if a given style is set.\n\t *\n\t *\t\tstyles.setTo( 'margin-left:1px;' );\n\t *\n\t *\t\tstyles.has( 'margin-left' );    // -> true\n\t *\t\tstyles.has( 'padding' );        // -> false\n\t *\n\t * **Note**: This check supports normalized style names.\n\t *\n\t *\t\t// Enable 'margin' shorthand processing:\n\t *\t\teditor.data.addStyleProcessorRules( addMarginRules );\n\t *\n\t *\t\tstyles.setTo( 'margin:2px;' );\n\t *\n\t *\t\tstyles.has( 'margin' );         // -> true\n\t *\t\tstyles.has( 'margin-top' );     // -> true\n\t *\t\tstyles.has( 'margin-left' );    // -> true\n\t *\n\t *\t\tstyles.remove( 'margin-top' );\n\t *\n\t *\t\tstyles.has( 'margin' );         // -> false\n\t *\t\tstyles.has( 'margin-top' );     // -> false\n\t *\t\tstyles.has( 'margin-left' );    // -> true\n\t *\n\t * @param {String} name Style name.\n\t * @returns {Boolean}\n\t */\n\thas( name ) {\n\t\tif ( this.isEmpty ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst styles = this._styleProcessor.getReducedForm( name, this._styles );\n\n\t\tconst propertyDescriptor = styles.find( ( [ property ] ) => property === name );\n\n\t\t// Only return a value if it is set;\n\t\treturn Array.isArray( propertyDescriptor );\n\t}\n\n\t/**\n\t * Sets a given style.\n\t *\n\t * Can insert one by one:\n\t *\n\t *\t\tstyles.set( 'color', 'blue' );\n\t *\t\tstyles.set( 'margin-right', '1em' );\n\t *\n\t * or many styles at once:\n\t *\n\t *\t\tstyles.set( {\n\t *\t\t\tcolor: 'blue',\n\t *\t\t\t'margin-right': '1em'\n\t *\t\t} );\n\t *\n\t * ***Note**:* This method uses {@link module:engine/controller/datacontroller~DataController#addStyleProcessorRules\n\t * enabled style processor rules} to normalize passed values.\n\t *\n\t *\t\t// Enable 'margin' shorthand processing:\n\t *\t\teditor.data.addStyleProcessorRules( addMarginRules );\n\t *\n\t *\t\tstyles.set( 'margin', '2px' );\n\t *\n\t * The above code will set margin to:\n\t *\n\t *\t\tstyles.getNormalized( 'margin' );\n\t *\t\t// -> { top: '2px', right: '2px', bottom: '2px', left: '2px' }\n\t *\n\t * Which makes it possible to retrieve a \"sub-value\":\n\t *\n\t *\t\tstyles.get( 'margin-left' );       // -> '2px'\n\t *\n\t * Or modify it:\n\t *\n\t *\t\tstyles.remove( 'margin-left' );\n\t *\n\t *\t\tstyles.getNormalized( 'margin' );  // -> { top: '1px', bottom: '1px', right: '1px' }\n\t *\t\tstyles.toString();                 // -> 'margin-bottom:1px;margin-right:1px;margin-top:1px;'\n\t *\n\t * This method also allows to set normalized values directly (if a particular styles processor rule was enabled):\n\t *\n\t *\t\tstyles.set( 'border-color', { top: 'blue' } );\n\t *\t\tstyles.set( 'margin', { right: '2em' } );\n\t *\n\t *\t\tstyles.toString();                 // -> 'border-color-top:blue;margin-right:2em;'\n\t *\n\t * @param {String|Object} nameOrObject Style property name or object with multiple properties.\n\t * @param {String|Object} valueOrObject Value to set.\n\t */\n\tset( nameOrObject, valueOrObject ) {\n\t\tif ( isObject( nameOrObject ) ) {\n\t\t\tfor ( const [ key, value ] of Object.entries( nameOrObject ) ) {\n\t\t\t\tthis._styleProcessor.toNormalizedForm( key, value, this._styles );\n\t\t\t}\n\t\t} else {\n\t\t\tthis._styleProcessor.toNormalizedForm( nameOrObject, valueOrObject, this._styles );\n\t\t}\n\t}\n\n\t/**\n\t * Removes given style.\n\t *\n\t *\t\tstyles.setTo( 'background:#f00;margin-right:2px;' );\n\t *\n\t *\t\tstyles.remove( 'background' );\n\t *\n\t *\t\tstyles.toString();   // -> 'margin-right:2px;'\n\t *\n\t * ***Note**:* This method uses {@link module:engine/controller/datacontroller~DataController#addStyleProcessorRules\n\t * enabled style processor rules} to normalize passed values.\n\t *\n\t *\t\t// Enable 'margin' shorthand processing:\n\t *\t\teditor.data.addStyleProcessorRules( addMarginRules );\n\t *\n\t *\t\tstyles.setTo( 'margin:1px' );\n\t *\n\t *\t\tstyles.remove( 'margin-top' );\n\t *\t\tstyles.remove( 'margin-right' );\n\t *\n\t *\t\tstyles.toString(); // -> 'margin-bottom:1px;margin-left:1px;'\n\t *\n\t * @param {String} name Style name.\n\t */\n\tremove( name ) {\n\t\tconst path = toPath( name );\n\n\t\tunset( this._styles, path );\n\t\tdelete this._styles[ name ];\n\n\t\tthis._cleanEmptyObjectsOnPath( path );\n\t}\n\n\t/**\n\t * Returns a normalized style object or a single value.\n\t *\n\t *\t\t// Enable 'margin' shorthand processing:\n\t *\t\teditor.data.addStyleProcessorRules( addMarginRules );\n\t *\n\t *\t\tconst styles = new Styles();\n\t *\t\tstyles.setTo( 'margin:1px 2px 3em;' );\n\t *\n\t *\t\tstyles.getNormalized( 'margin' );\n\t *\t\t// will log:\n\t *\t\t// {\n\t *\t\t//     top: '1px',\n\t *\t\t//     right: '2px',\n\t *\t\t//     bottom: '3em',\n\t *\t\t//     left: '2px'     // normalized value from margin shorthand\n\t *\t\t// }\n\t *\n\t *\t\tstyles.getNormalized( 'margin-left' ); // -> '2px'\n\t *\n\t * **Note**: This method will only return normalized styles if a style processor was defined.\n\t *\n\t * @param {String} name Style name.\n\t * @returns {Object|String|undefined}\n\t */\n\tgetNormalized( name ) {\n\t\treturn this._styleProcessor.getNormalized( name, this._styles );\n\t}\n\n\t/**\n\t * Returns a normalized style string. Styles are sorted by name.\n\t *\n\t *\t\tstyles.set( 'margin' , '1px' );\n\t *\t\tstyles.set( 'background', '#f00' );\n\t *\n\t *\t\tstyles.toString(); // -> 'background:#f00;margin:1px;'\n\t *\n\t * **Note**: This method supports normalized styles if defined.\n\t *\n\t *\t\t// Enable 'margin' shorthand processing:\n\t *\t\teditor.data.addStyleProcessorRules( addMarginRules );\n\t *\n\t *\t\tstyles.set( 'margin' , '1px' );\n\t *\t\tstyles.set( 'background', '#f00' );\n\t *\t\tstyles.remove( 'margin-top' );\n\t *\t\tstyles.remove( 'margin-right' );\n\t *\n\t *\t\tstyles.toString(); // -> 'background:#f00;margin-bottom:1px;margin-left:1px;'\n\t *\n\t * @returns {String}\n\t */\n\ttoString() {\n\t\tif ( this.isEmpty ) {\n\t\t\treturn '';\n\t\t}\n\n\t\treturn this._getStylesEntries()\n\t\t\t.map( arr => arr.join( ':' ) )\n\t\t\t.sort()\n\t\t\t.join( ';' ) + ';';\n\t}\n\n\t/**\n\t * Returns property as a value string or undefined if property is not set.\n\t *\n\t *\t\t// Enable 'margin' shorthand processing:\n\t *\t\teditor.data.addStyleProcessorRules( addMarginRules );\n\t *\n\t *\t\tconst styles = new Styles();\n\t *\t\tstyles.setTo( 'margin:1px;' );\n\t *\t\tstyles.set( 'margin-bottom', '3em' );\n\t *\n\t *\t\tstyles.getAsString( 'margin' ); // -> 'margin: 1px 1px 3em;'\n\t *\n\t * Note, however, that all sub-values must be set for the longhand property name to return a value:\n\t *\n\t *\t\tconst styles = new Styles();\n\t *\t\tstyles.setTo( 'margin:1px;' );\n\t *\t\tstyles.remove( 'margin-bottom' );\n\t *\n\t *\t\tstyles.getAsString( 'margin' ); // -> undefined\n\t *\n\t * In the above scenario, it is not possible to return a `margin` value, so `undefined` is returned.\n\t * Instead, you should use:\n\t *\n\t *\t\tconst styles = new Styles();\n\t *\t\tstyles.setTo( 'margin:1px;' );\n\t *\t\tstyles.remove( 'margin-bottom' );\n\t *\n\t *\t\tfor ( const styleName of styles.getStyleNames() ) {\n\t *\t\t\tconsole.log( styleName, styles.getAsString( styleName ) );\n\t *\t\t}\n\t *\t\t// 'margin-top', '1px'\n\t *\t\t// 'margin-right', '1px'\n\t *\t\t// 'margin-left', '1px'\n\t *\n\t * In general, it is recommend to iterate over style names like in the example above. This way, you will always get all\n\t * the currently set style values. So, if all the 4 margin values would be set\n\t * the for-of loop above would yield only `'margin'`, `'1px'`:\n\t *\n\t *\t\tconst styles = new Styles();\n\t *\t\tstyles.setTo( 'margin:1px;' );\n\t *\n\t *\t\tfor ( const styleName of styles.getStyleNames() ) {\n\t *\t\t\tconsole.log( styleName, styles.getAsString( styleName ) );\n\t *\t\t}\n\t *\t\t// 'margin', '1px'\n\t *\n\t * **Note**: To get a normalized version of a longhand property use the {@link #getNormalized `#getNormalized()`} method.\n\t *\n\t * @param {String} propertyName\n\t * @returns {String|undefined}\n\t */\n\tgetAsString( propertyName ) {\n\t\tif ( this.isEmpty ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( this._styles[ propertyName ] && !isObject( this._styles[ propertyName ] ) ) {\n\t\t\t// Try return styles set directly - values that are not parsed.\n\t\t\treturn this._styles[ propertyName ];\n\t\t}\n\n\t\tconst styles = this._styleProcessor.getReducedForm( propertyName, this._styles );\n\n\t\tconst propertyDescriptor = styles.find( ( [ property ] ) => property === propertyName );\n\n\t\t// Only return a value if it is set;\n\t\tif ( Array.isArray( propertyDescriptor ) ) {\n\t\t\treturn propertyDescriptor[ 1 ];\n\t\t}\n\t}\n\n\t/**\n\t * Returns style property names as they would appear when using {@link #toString `#toString()`}.\n\t *\n\t * @returns {Array.<String>}\n\t */\n\tgetStyleNames() {\n\t\tif ( this.isEmpty ) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst entries = this._getStylesEntries();\n\n\t\treturn entries.map( ( [ key ] ) => key );\n\t}\n\n\t/**\n\t * Removes all styles.\n\t */\n\tclear() {\n\t\tthis._styles = {};\n\t}\n\n\t/**\n\t * Returns normalized styles entries for further processing.\n\t *\n\t * @private\n\t * @returns {Array.<module:engine/view/stylesmap~PropertyDescriptor>}\n\t */\n\t_getStylesEntries() {\n\t\tconst parsed = [];\n\n\t\tconst keys = Object.keys( this._styles );\n\n\t\tfor ( const key of keys ) {\n\t\t\tparsed.push( ...this._styleProcessor.getReducedForm( key, this._styles ) );\n\t\t}\n\n\t\treturn parsed;\n\t}\n\n\t/**\n\t * Removes empty objects upon removing an entry from internal object.\n\t *\n\t * @param {String} path\n\t * @private\n\t */\n\t_cleanEmptyObjectsOnPath( path ) {\n\t\tconst pathParts = path.split( '.' );\n\t\tconst isChildPath = pathParts.length > 1;\n\n\t\tif ( !isChildPath ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst parentPath = pathParts.splice( 0, pathParts.length - 1 ).join( '.' );\n\n\t\tconst parentObject = get( this._styles, parentPath );\n\n\t\tif ( !parentObject ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst isParentEmpty = !Array.from( Object.keys( parentObject ) ).length;\n\n\t\tif ( isParentEmpty ) {\n\t\t\tthis.remove( parentPath );\n\t\t}\n\t}\n}\n\n/**\n * Style processor is responsible for writing and reading a normalized styles object.\n */\nexport class StylesProcessor {\n\t/**\n\t * Creates StylesProcessor instance.\n\t *\n\t * @private\n\t */\n\tconstructor() {\n\t\tthis._normalizers = new Map();\n\t\tthis._extractors = new Map();\n\t\tthis._reducers = new Map();\n\t\tthis._consumables = new Map();\n\t}\n\n\t/**\n\t * Parse style string value to a normalized object and appends it to styles object.\n\t *\n\t *\t\tconst styles = {};\n\t *\n\t *\t\tstylesProcessor.toNormalizedForm( 'margin', '1px', styles );\n\t *\n\t *\t\t// styles will consist: { margin: { top: '1px', right: '1px', bottom: '1px', left: '1px; } }\n\t *\n\t * **Note**: To define normalizer callbacks use {@link #setNormalizer}.\n\t *\n\t * @param {String} name Name of style property.\n\t * @param {String} propertyValue Value of style property.\n\t * @param {Object} styles Object holding normalized styles.\n\t */\n\ttoNormalizedForm( name, propertyValue, styles ) {\n\t\tif ( isObject( propertyValue ) ) {\n\t\t\tappendStyleValue( styles, toPath( name ), propertyValue );\n\n\t\t\treturn;\n\t\t}\n\n\t\tif ( this._normalizers.has( name ) ) {\n\t\t\tconst normalizer = this._normalizers.get( name );\n\n\t\t\tconst { path, value } = normalizer( propertyValue );\n\n\t\t\tappendStyleValue( styles, path, value );\n\t\t} else {\n\t\t\tappendStyleValue( styles, name, propertyValue );\n\t\t}\n\t}\n\n\t/**\n\t * Returns a normalized version of a style property.\n\t *\t\tconst styles = {\n\t *\t\t\tmargin: { top: '1px', right: '1px', bottom: '1px', left: '1px; },\n\t *\t\t\tbackground: { color: '#f00' }\n\t *\t\t};\n\t *\n\t *\t\tstylesProcessor.getNormalized( 'background' );\n\t *\t\t// will return: { color: '#f00' }\n\t *\n\t *\t\tstylesProcessor.getNormalized( 'margin-top' );\n\t *\t\t// will return: '1px'\n\t *\n\t * **Note**: In some cases extracting single value requires defining an extractor callback {@link #setExtractor}.\n\t *\n\t * @param {String} name Name of style property.\n\t * @param {Object} styles Object holding normalized styles.\n\t * @returns {*}\n\t */\n\tgetNormalized( name, styles ) {\n\t\tif ( !name ) {\n\t\t\treturn merge( {}, styles );\n\t\t}\n\n\t\t// Might be empty string.\n\t\tif ( styles[ name ] !== undefined ) {\n\t\t\treturn styles[ name ];\n\t\t}\n\n\t\tif ( this._extractors.has( name ) ) {\n\t\t\tconst extractor = this._extractors.get( name );\n\n\t\t\tif ( typeof extractor === 'string' ) {\n\t\t\t\treturn get( styles, extractor );\n\t\t\t}\n\n\t\t\tconst value = extractor( name, styles );\n\n\t\t\tif ( value ) {\n\t\t\t\treturn value;\n\t\t\t}\n\t\t}\n\n\t\treturn get( styles, toPath( name ) );\n\t}\n\n\t/**\n\t * Returns a reduced form of style property form normalized object.\n\t *\n\t * For default margin reducer, the below code:\n\t *\n\t *\t\tstylesProcessor.getReducedForm( 'margin', {\n\t *\t\t\tmargin: { top: '1px', right: '1px', bottom: '2px', left: '1px; }\n\t *\t\t} );\n\t *\n\t * will return:\n\t *\n\t *\t\t[\n\t *\t\t\t[ 'margin', '1px 1px 2px' ]\n\t *\t\t]\n\t *\n\t * because it might be represented as a shorthand 'margin' value. However if one of margin long hand values is missing it should return:\n\t *\n\t *\t\t[\n\t *\t\t\t[ 'margin-top', '1px' ],\n\t *\t\t\t[ 'margin-right', '1px' ],\n\t *\t\t\t[ 'margin-bottom', '2px' ]\n\t *\t\t\t// the 'left' value is missing - cannot use 'margin' shorthand.\n\t *\t\t]\n\t *\n\t * **Note**: To define reducer callbacks use {@link #setReducer}.\n\t *\n\t * @param {String} name\n\t * @param {String} name Name of style property.\n\t * @param {Object} styles Object holding normalized styles.\n\t * @returns {Array.<module:engine/view/stylesmap~PropertyDescriptor>}\n\t */\n\tgetReducedForm( name, styles ) {\n\t\tconst normalizedValue = this.getNormalized( name, styles );\n\n\t\t// Might be empty string.\n\t\tif ( normalizedValue === undefined ) {\n\t\t\treturn [];\n\t\t}\n\n\t\tif ( this._reducers.has( name ) ) {\n\t\t\tconst reducer = this._reducers.get( name );\n\n\t\t\treturn reducer( normalizedValue );\n\t\t}\n\n\t\treturn [ [ name, normalizedValue ] ];\n\t}\n\n\t/**\n\t * Returns related style names.\n\t *\n\t *\t\tstylesProcessor.getRelatedStyles( 'margin' );\n\t *\t\t// will return: [ 'margin-top', 'margin-right', 'margin-bottom', 'margin-left' ];\n\t *\n\t *\t\tstylesProcessor.getRelatedStyles( 'margin-top' );\n\t *\t\t// will return: [ 'margin' ];\n\t *\n\t * **Note**: To define new style relations load an existing style processor or use\n\t * {@link module:engine/view/stylesmap~StylesProcessor#setStyleRelation `StylesProcessor.setStyleRelation()`}.\n\t *\n\t * @param {String} name\n\t * @returns {Array.<String>}\n\t */\n\tgetRelatedStyles( name ) {\n\t\treturn this._consumables.get( name ) || [];\n\t}\n\n\t/**\n\t * Adds a normalizer method for a style property.\n\t *\n\t * A normalizer returns describing how the value should be normalized.\n\t *\n\t * For instance 'margin' style is a shorthand for four margin values:\n\t *\n\t * - 'margin-top'\n\t * - 'margin-right'\n\t * - 'margin-bottom'\n\t * - 'margin-left'\n\t *\n\t * and can be written in various ways if some values are equal to others. For instance `'margin: 1px 2em;'` is a shorthand for\n\t * `'margin-top: 1px;margin-right: 2em;margin-bottom: 1px;margin-left: 2em'`.\n\t *\n\t * A normalizer should parse various margin notations as a single object:\n\t *\n\t *\t\tconst styles = {\n\t *\t\t\tmargin: {\n\t *\t\t\t\ttop: '1px',\n\t *\t\t\t\tright: '2em',\n\t *\t\t\t\tbottom: '1px',\n\t *\t\t\t\tleft: '2em'\n\t *\t\t\t}\n\t *\t\t};\n\t *\n\t * Thus a normalizer for 'margin' style should return an object defining style path and value to store:\n\t *\n\t *\t\tconst returnValue = {\n\t *\t\t\tpath: 'margin',\n\t *\t\t\tvalue: {\n\t *\t\t\t\ttop: '1px',\n\t *\t\t\t\tright: '2em',\n\t *\t\t\t\tbottom: '1px',\n\t *\t\t\t\tleft: '2em'\n\t *\t\t\t}\n\t *\t\t};\n\t *\n\t * Additionally to fully support all margin notations there should be also defined 4 normalizers for longhand margin notations. Below\n\t * is an example for 'margin-top' style property normalizer:\n\t *\n\t *\t\tstylesProcessor.setNormalizer( 'margin-top', valueString => {\n\t *\t\t\treturn {\n\t *\t\t\t\tpath: 'margin.top',\n\t *\t\t\t\tvalue: valueString\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t * @param {String} name\n\t * @param {Function} callback\n\t */\n\tsetNormalizer( name, callback ) {\n\t\tthis._normalizers.set( name, callback );\n\t}\n\n\t/**\n\t * Adds a extractor callback for a style property.\n\t *\n\t * Most normalized style values are stored as one level objects. It is assumed that `'margin-top'` style will be stored as:\n\t *\n\t *\t\tconst styles = {\n\t *\t\t\tmargin: {\n\t *\t\t\t\ttop: 'value'\n\t *\t\t\t}\n\t *\t\t}\n\t *\n\t * However, some styles can have conflicting notations and thus it might be harder to extract a style value from shorthand. For instance\n\t * the 'border-top-style' can be defined using `'border-top:solid'`, `'border-style:solid none none none'` or by `'border:solid'`\n\t * shorthands. The default border styles processors stores styles as:\n\t *\n\t *\t\tconst styles = {\n\t *\t\t\tborder: {\n\t *\t\t\t\tstyle: {\n\t *\t\t\t\t\ttop: 'solid'\n\t *\t\t\t\t}\n\t *\t\t\t}\n\t *\t\t}\n\t *\n\t * as it is better to modify border style independently from other values. On the other part the output of the border might be\n\t * desired as `border-top`, `border-left`, etc notation.\n\t *\n\t * In the above example a reducer should return a side border value that combines style, color and width:\n\t *\n\t *\t\tstyleProcessor.setExtractor( 'border-top', styles => {\n\t *\t\t\treturn {\n\t *\t\t\t\tcolor: styles.border.color.top,\n\t *\t\t\t\tstyle: styles.border.style.top,\n\t *\t\t\t\twidth: styles.border.width.top\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t * @param {String} name\n\t * @param {Function|String} callbackOrPath Callback that return a requested value or path string for single values.\n\t */\n\tsetExtractor( name, callbackOrPath ) {\n\t\tthis._extractors.set( name, callbackOrPath );\n\t}\n\n\t/**\n\t * Adds a reducer callback for a style property.\n\t *\n\t * Reducer returns a minimal notation for given style name. For longhand properties it is not required to write a reducer as\n\t * by default the direct value from style path is taken.\n\t *\n\t * For shorthand styles a reducer should return minimal style notation either by returning single name-value tuple or multiple tuples\n\t * if a shorthand cannot be used. For instance for a margin shorthand a reducer might return:\n\t *\n\t *\t\tconst marginShortHandTuple = [\n\t *\t\t\t[ 'margin', '1px 1px 2px' ]\n\t *\t\t];\n\t *\n\t * or a longhand tuples for defined values:\n\t *\n\t *\t\t// Considering margin.bottom and margin.left are undefined.\n\t *\t\tconst marginLonghandsTuples = [\n\t *\t\t\t[ 'margin-top', '1px' ],\n\t *\t\t\t[ 'margin-right', '1px' ]\n\t *\t\t];\n\t *\n\t * A reducer obtains a normalized style value:\n\t *\n\t *\t\t// Simplified reducer that always outputs 4 values which are always present:\n\t *\t\tstylesProcessor.setReducer( 'margin', margin => {\n\t *\t\t\treturn [\n\t *\t\t\t\t[ 'margin', `${ margin.top } ${ margin.right } ${ margin.bottom } ${ margin.left }` ]\n\t *\t\t\t]\n\t *\t\t} );\n\t *\n\t * @param {String} name\n\t * @param {Function} callback\n\t */\n\tsetReducer( name, callback ) {\n\t\tthis._reducers.set( name, callback );\n\t}\n\n\t/**\n\t * Defines a style shorthand relation to other style notations.\n\t *\n\t *\t\tstylesProcessor.setStyleRelation( 'margin', [\n\t *\t\t\t'margin-top',\n\t *\t\t\t'margin-right',\n\t *\t\t\t'margin-bottom',\n\t *\t\t\t'margin-left'\n\t *\t\t] );\n\t *\n\t * This enables expanding of style names for shorthands. For instance, if defined,\n\t * {@link module:engine/conversion/viewconsumable~ViewConsumable view consumable} items are automatically created\n\t * for long-hand margin style notation alongside the `'margin'` item.\n\t *\n\t * This means that when an element being converted has a style `margin`, a converter for `margin-left` will work just\n\t * fine since the view consumable will contain a consumable `margin-left` item (thanks to the relation) and\n\t * `element.getStyle( 'margin-left' )` will work as well assuming that the style processor was correctly configured.\n\t * However, once `margin-left` is consumed, `margin` will not be consumable anymore.\n\t *\n\t * @param {String} shorthandName\n\t * @param {Array.<String>} styleNames\n\t */\n\tsetStyleRelation( shorthandName, styleNames ) {\n\t\tthis._mapStyleNames( shorthandName, styleNames );\n\n\t\tfor ( const alsoName of styleNames ) {\n\t\t\tthis._mapStyleNames( alsoName, [ shorthandName ] );\n\t\t}\n\t}\n\n\t/**\n\t * Set two-way binding of style names.\n\t *\n\t * @param {String} name\n\t * @param {Array.<String>} styleNames\n\t * @private\n\t */\n\t_mapStyleNames( name, styleNames ) {\n\t\tif ( !this._consumables.has( name ) ) {\n\t\t\tthis._consumables.set( name, [] );\n\t\t}\n\n\t\tthis._consumables.get( name ).push( ...styleNames );\n\t}\n}\n\n// Parses inline styles and puts property - value pairs into styles map.\n//\n// @param {String} stylesString Styles to parse.\n// @returns {Map.<String, String>} stylesMap Map of parsed properties and values.\nfunction parseInlineStyles( stylesString ) {\n\t// `null` if no quote was found in input string or last found quote was a closing quote. See below.\n\tlet quoteType = null;\n\tlet propertyNameStart = 0;\n\tlet propertyValueStart = 0;\n\tlet propertyName = null;\n\n\tconst stylesMap = new Map();\n\n\t// Do not set anything if input string is empty.\n\tif ( stylesString === '' ) {\n\t\treturn stylesMap;\n\t}\n\n\t// Fix inline styles that do not end with `;` so they are compatible with algorithm below.\n\tif ( stylesString.charAt( stylesString.length - 1 ) != ';' ) {\n\t\tstylesString = stylesString + ';';\n\t}\n\n\t// Seek the whole string for \"special characters\".\n\tfor ( let i = 0; i < stylesString.length; i++ ) {\n\t\tconst char = stylesString.charAt( i );\n\n\t\tif ( quoteType === null ) {\n\t\t\t// No quote found yet or last found quote was a closing quote.\n\t\t\tswitch ( char ) {\n\t\t\t\tcase ':':\n\t\t\t\t\t// Most of time colon means that property name just ended.\n\t\t\t\t\t// Sometimes however `:` is found inside property value (for example in background image url).\n\t\t\t\t\tif ( !propertyName ) {\n\t\t\t\t\t\t// Treat this as end of property only if property name is not already saved.\n\t\t\t\t\t\t// Save property name.\n\t\t\t\t\t\tpropertyName = stylesString.substr( propertyNameStart, i - propertyNameStart );\n\t\t\t\t\t\t// Save this point as the start of property value.\n\t\t\t\t\t\tpropertyValueStart = i + 1;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase '\"':\n\t\t\t\tcase '\\'':\n\t\t\t\t\t// Opening quote found (this is an opening quote, because `quoteType` is `null`).\n\t\t\t\t\tquoteType = char;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ';': {\n\t\t\t\t\t// Property value just ended.\n\t\t\t\t\t// Use previously stored property value start to obtain property value.\n\t\t\t\t\tconst propertyValue = stylesString.substr( propertyValueStart, i - propertyValueStart );\n\n\t\t\t\t\tif ( propertyName ) {\n\t\t\t\t\t\t// Save parsed part.\n\t\t\t\t\t\tstylesMap.set( propertyName.trim(), propertyValue.trim() );\n\t\t\t\t\t}\n\n\t\t\t\t\tpropertyName = null;\n\n\t\t\t\t\t// Save this point as property name start. Property name starts immediately after previous property value ends.\n\t\t\t\t\tpropertyNameStart = i + 1;\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t} else if ( char === quoteType ) {\n\t\t\t// If a quote char is found and it is a closing quote, mark this fact by `null`-ing `quoteType`.\n\t\t\tquoteType = null;\n\t\t}\n\t}\n\n\treturn stylesMap;\n}\n\n// Return lodash compatible path from style name.\nfunction toPath( name ) {\n\treturn name.replace( '-', '.' );\n}\n\n// Appends style definition to the styles object.\n//\n// @param {String} nameOrPath\n// @param {String|Object} valueOrObject\n// @private\nfunction appendStyleValue( stylesObject, nameOrPath, valueOrObject ) {\n\tlet valueToSet = valueOrObject;\n\n\tif ( isObject( valueOrObject ) ) {\n\t\tvalueToSet = merge( {}, get( stylesObject, nameOrPath ), valueOrObject );\n\t}\n\n\tset( stylesObject, nameOrPath, valueToSet );\n}\n\n/**\n * A CSS style property descriptor that contains tuplet of two strings:\n *\n * - first string describes property name\n * - second string describes property value\n *\n *\t\tconst marginDescriptor = [ 'margin', '2px 3em' ];\n *\t\tconst marginTopDescriptor = [ 'margin-top', '2px' ];\n *\n * @typedef {Array.<String, String>} module:engine/view/stylesmap~PropertyDescriptor\n */\n\n/**\n * An object describing values associated with the sides of a box, for instance margins, paddings,\n * border widths, border colors, etc.\n *\n *\t\tconst margin = {\n *\t\t\ttop: '1px',\n *\t\t\tright: '3px',\n *\t\t\tbottom: '3px',\n *\t\t\tleft: '7px'\n *\t\t};\n *\n *\t\tconst borderColor = {\n *\t\t\ttop: 'red',\n *\t\t\tright: 'blue',\n *\t\t\tbottom: 'blue',\n *\t\t\tleft: 'red'\n *\t\t};\n *\n * @typedef {Object} module:engine/view/stylesmap~BoxSides\n *\n * @property {String} top Top side value.\n * @property {String} right Right side value.\n * @property {String} bottom Bottom side value.\n * @property {String} left Left side value.\n */\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/element\n */\n\nimport Node from './node';\nimport Text from './text';\nimport TextProxy from './textproxy';\nimport toMap from '@ckeditor/ckeditor5-utils/src/tomap';\nimport toArray from '@ckeditor/ckeditor5-utils/src/toarray';\nimport isIterable from '@ckeditor/ckeditor5-utils/src/isiterable';\nimport Matcher from './matcher';\nimport StylesMap from './stylesmap';\n\n// @if CK_DEBUG_ENGINE // const { convertMapToTags } = require( '../dev-utils/utils' );\n\n/**\n * View element.\n *\n * The editing engine does not define a fixed semantics of its elements (it is \"DTD-free\").\n * This is why the type of the {@link module:engine/view/element~Element} need to\n * be defined by the feature developer. When creating an element you should use one of the following methods:\n *\n * * {@link module:engine/view/downcastwriter~DowncastWriter#createContainerElement `downcastWriter#createContainerElement()`}\n * in order to create a {@link module:engine/view/containerelement~ContainerElement},\n * * {@link module:engine/view/downcastwriter~DowncastWriter#createAttributeElement `downcastWriter#createAttributeElement()`}\n * in order to create a {@link module:engine/view/attributeelement~AttributeElement},\n * * {@link module:engine/view/downcastwriter~DowncastWriter#createEmptyElement `downcastWriter#createEmptyElement()`}\n * in order to create a {@link module:engine/view/emptyelement~EmptyElement}.\n * * {@link module:engine/view/downcastwriter~DowncastWriter#createUIElement `downcastWriter#createUIElement()`}\n * in order to create a {@link module:engine/view/uielement~UIElement}.\n * * {@link module:engine/view/downcastwriter~DowncastWriter#createEditableElement `downcastWriter#createEditableElement()`}\n * in order to create a {@link module:engine/view/editableelement~EditableElement}.\n *\n * Note that for view elements which are not created from the model, like elements from mutations, paste or\n * {@link module:engine/controller/datacontroller~DataController#set data.set} it is not possible to define the type of the element.\n * In such cases the {@link module:engine/view/upcastwriter~UpcastWriter#createElement `UpcastWriter#createElement()`} method\n * should be used to create generic view elements.\n *\n * @extends module:engine/view/node~Node\n */\nexport default class Element extends Node {\n\t/**\n\t * Creates a view element.\n\t *\n\t * Attributes can be passed in various formats:\n\t *\n\t *\t\tnew Element( viewDocument, 'div', { class: 'editor', contentEditable: 'true' } ); // object\n\t *\t\tnew Element( viewDocument, 'div', [ [ 'class', 'editor' ], [ 'contentEditable', 'true' ] ] ); // map-like iterator\n\t *\t\tnew Element( viewDocument, 'div', mapOfAttributes ); // map\n\t *\n\t * @protected\n\t * @param {module:engine/view/document~Document} document The document instance to which this element belongs.\n\t * @param {String} name Node name.\n\t * @param {Object|Iterable} [attrs] Collection of attributes.\n\t * @param {module:engine/view/node~Node|Iterable.<module:engine/view/node~Node>} [children]\n\t * A list of nodes to be inserted into created element.\n\t */\n\tconstructor( document, name, attrs, children ) {\n\t\tsuper( document );\n\n\t\t/**\n\t\t * Name of the element.\n\t\t *\n\t\t * @readonly\n\t\t * @member {String}\n\t\t */\n\t\tthis.name = name;\n\n\t\t/**\n\t\t * Map of attributes, where attributes names are keys and attributes values are values.\n\t\t *\n\t\t * @protected\n\t\t * @member {Map} #_attrs\n\t\t */\n\t\tthis._attrs = parseAttributes( attrs );\n\n\t\t/**\n\t\t * Array of child nodes.\n\t\t *\n\t\t * @protected\n\t\t * @member {Array.<module:engine/view/node~Node>}\n\t\t */\n\t\tthis._children = [];\n\n\t\tif ( children ) {\n\t\t\tthis._insertChild( 0, children );\n\t\t}\n\n\t\t/**\n\t\t * Set of classes associated with element instance.\n\t\t *\n\t\t * @protected\n\t\t * @member {Set}\n\t\t */\n\t\tthis._classes = new Set();\n\n\t\tif ( this._attrs.has( 'class' ) ) {\n\t\t\t// Remove class attribute and handle it by class set.\n\t\t\tconst classString = this._attrs.get( 'class' );\n\t\t\tparseClasses( this._classes, classString );\n\t\t\tthis._attrs.delete( 'class' );\n\t\t}\n\n\t\t/**\n\t\t * Normalized styles.\n\t\t *\n\t\t * @protected\n\t\t * @member {module:engine/view/stylesmap~StylesMap} module:engine/view/element~Element#_styles\n\t\t */\n\t\tthis._styles = new StylesMap( this.document.stylesProcessor );\n\n\t\tif ( this._attrs.has( 'style' ) ) {\n\t\t\t// Remove style attribute and handle it by styles map.\n\t\t\tthis._styles.setTo( this._attrs.get( 'style' ) );\n\n\t\t\tthis._attrs.delete( 'style' );\n\t\t}\n\n\t\t/**\n\t\t * Map of custom properties.\n\t\t * Custom properties can be added to element instance, will be cloned but not rendered into DOM.\n\t\t *\n\t\t * @protected\n\t\t * @member {Map}\n\t\t */\n\t\tthis._customProperties = new Map();\n\t}\n\n\t/**\n\t * Number of element's children.\n\t *\n\t * @readonly\n\t * @type {Number}\n\t */\n\tget childCount() {\n\t\treturn this._children.length;\n\t}\n\n\t/**\n\t * Is `true` if there are no nodes inside this element, `false` otherwise.\n\t *\n\t * @readonly\n\t * @type {Boolean}\n\t */\n\tget isEmpty() {\n\t\treturn this._children.length === 0;\n\t}\n\n\t/**\n\t * Checks whether this object is of the given.\n\t *\n\t *\t\telement.is( 'element' ); // -> true\n\t *\t\telement.is( 'node' ); // -> true\n\t *\t\telement.is( 'view:element' ); // -> true\n\t *\t\telement.is( 'view:node' ); // -> true\n\t *\n\t *\t\telement.is( 'model:element' ); // -> false\n\t *\t\telement.is( 'documentSelection' ); // -> false\n\t *\n\t * Assuming that the object being checked is an element, you can also check its\n\t * {@link module:engine/view/element~Element#name name}:\n\t *\n\t *\t\telement.is( 'element', 'img' ); // -> true if this is an <img> element\n\t *\t\ttext.is( 'element', 'img' ); -> false\n\t *\n\t * {@link module:engine/view/node~Node#is Check the entire list of view objects} which implement the `is()` method.\n\t *\n\t * @param {String} type Type to check.\n\t * @param {String} [name] Element name.\n\t * @returns {Boolean}\n\t */\n\tis( type, name = null ) {\n\t\tif ( !name ) {\n\t\t\treturn type === 'element' || type === 'view:element' ||\n\t\t\t\t// From super.is(). This is highly utilised method and cannot call super. See ckeditor/ckeditor5#6529.\n\t\t\t\ttype === 'node' || type === 'view:node';\n\t\t} else {\n\t\t\treturn name === this.name && ( type === 'element' || type === 'view:element' );\n\t\t}\n\t}\n\n\t/**\n\t * Gets child at the given index.\n\t *\n\t * @param {Number} index Index of child.\n\t * @returns {module:engine/view/node~Node} Child node.\n\t */\n\tgetChild( index ) {\n\t\treturn this._children[ index ];\n\t}\n\n\t/**\n\t * Gets index of the given child node. Returns `-1` if child node is not found.\n\t *\n\t * @param {module:engine/view/node~Node} node Child node.\n\t * @returns {Number} Index of the child node.\n\t */\n\tgetChildIndex( node ) {\n\t\treturn this._children.indexOf( node );\n\t}\n\n\t/**\n\t * Gets child nodes iterator.\n\t *\n\t * @returns {Iterable.<module:engine/view/node~Node>} Child nodes iterator.\n\t */\n\tgetChildren() {\n\t\treturn this._children[ Symbol.iterator ]();\n\t}\n\n\t/**\n\t * Returns an iterator that contains the keys for attributes. Order of inserting attributes is not preserved.\n\t *\n\t * @returns {Iterable.<String>} Keys for attributes.\n\t */\n\t* getAttributeKeys() {\n\t\tif ( this._classes.size > 0 ) {\n\t\t\tyield 'class';\n\t\t}\n\n\t\tif ( !this._styles.isEmpty ) {\n\t\t\tyield 'style';\n\t\t}\n\n\t\tyield* this._attrs.keys();\n\t}\n\n\t/**\n\t * Returns iterator that iterates over this element's attributes.\n\t *\n\t * Attributes are returned as arrays containing two items. First one is attribute key and second is attribute value.\n\t * This format is accepted by native `Map` object and also can be passed in `Node` constructor.\n\t *\n\t * @returns {Iterable.<*>}\n\t */\n\t* getAttributes() {\n\t\tyield* this._attrs.entries();\n\n\t\tif ( this._classes.size > 0 ) {\n\t\t\tyield [ 'class', this.getAttribute( 'class' ) ];\n\t\t}\n\n\t\tif ( !this._styles.isEmpty ) {\n\t\t\tyield [ 'style', this.getAttribute( 'style' ) ];\n\t\t}\n\t}\n\n\t/**\n\t * Gets attribute by key. If attribute is not present - returns undefined.\n\t *\n\t * @param {String} key Attribute key.\n\t * @returns {String|undefined} Attribute value.\n\t */\n\tgetAttribute( key ) {\n\t\tif ( key == 'class' ) {\n\t\t\tif ( this._classes.size > 0 ) {\n\t\t\t\treturn [ ...this._classes ].join( ' ' );\n\t\t\t}\n\n\t\t\treturn undefined;\n\t\t}\n\n\t\tif ( key == 'style' ) {\n\t\t\tconst inlineStyle = this._styles.toString();\n\n\t\t\treturn inlineStyle == '' ? undefined : inlineStyle;\n\t\t}\n\n\t\treturn this._attrs.get( key );\n\t}\n\n\t/**\n\t * Returns a boolean indicating whether an attribute with the specified key exists in the element.\n\t *\n\t * @param {String} key Attribute key.\n\t * @returns {Boolean} `true` if attribute with the specified key exists in the element, false otherwise.\n\t */\n\thasAttribute( key ) {\n\t\tif ( key == 'class' ) {\n\t\t\treturn this._classes.size > 0;\n\t\t}\n\n\t\tif ( key == 'style' ) {\n\t\t\treturn !this._styles.isEmpty;\n\t\t}\n\n\t\treturn this._attrs.has( key );\n\t}\n\n\t/**\n\t * Checks if this element is similar to other element.\n\t * Both elements should have the same name and attributes to be considered as similar. Two similar elements\n\t * can contain different set of children nodes.\n\t *\n\t * @param {module:engine/view/element~Element} otherElement\n\t * @returns {Boolean}\n\t */\n\tisSimilar( otherElement ) {\n\t\tif ( !( otherElement instanceof Element ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// If exactly the same Element is provided - return true immediately.\n\t\tif ( this === otherElement ) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Check element name.\n\t\tif ( this.name != otherElement.name ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Check number of attributes, classes and styles.\n\t\tif ( this._attrs.size !== otherElement._attrs.size || this._classes.size !== otherElement._classes.size ||\n\t\t\tthis._styles.size !== otherElement._styles.size ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Check if attributes are the same.\n\t\tfor ( const [ key, value ] of this._attrs ) {\n\t\t\tif ( !otherElement._attrs.has( key ) || otherElement._attrs.get( key ) !== value ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\t// Check if classes are the same.\n\t\tfor ( const className of this._classes ) {\n\t\t\tif ( !otherElement._classes.has( className ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\t// Check if styles are the same.\n\t\tfor ( const property of this._styles.getStyleNames() ) {\n\t\t\tif (\n\t\t\t\t!otherElement._styles.has( property ) ||\n\t\t\t\totherElement._styles.getAsString( property ) !== this._styles.getAsString( property )\n\t\t\t) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Returns true if class is present.\n\t * If more then one class is provided - returns true only when all classes are present.\n\t *\n\t *\t\telement.hasClass( 'foo' ); // Returns true if 'foo' class is present.\n\t *\t\telement.hasClass( 'foo', 'bar' ); // Returns true if 'foo' and 'bar' classes are both present.\n\t *\n\t * @param {...String} className\n\t */\n\thasClass( ...className ) {\n\t\tfor ( const name of className ) {\n\t\t\tif ( !this._classes.has( name ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Returns iterator that contains all class names.\n\t *\n\t * @returns {Iterable.<String>}\n\t */\n\tgetClassNames() {\n\t\treturn this._classes.keys();\n\t}\n\n\t/**\n\t * Returns style value for the given property mae.\n\t * If the style does not exist `undefined` is returned.\n\t *\n\t * **Note**: This method can work with normalized style names if\n\t * {@link module:engine/controller/datacontroller~DataController#addStyleProcessorRules a particular style processor rule is enabled}.\n\t * See {@link module:engine/view/stylesmap~StylesMap#getAsString `StylesMap#getAsString()`} for details.\n\t *\n\t * For an element with style set to `'margin:1px'`:\n\t *\n\t *\t\t// Enable 'margin' shorthand processing:\n\t *\t\teditor.data.addStyleProcessorRules( addMarginRules );\n\t *\n\t *\t\tconst element = view.change( writer => {\n\t *\t\t\tconst element = writer.createElement();\n\t *\t\t\twriter.setStyle( 'margin', '1px' );\n\t *\t\t\twriter.setStyle( 'margin-bottom', '3em' );\n\t *\n\t *\t\t\treturn element;\n\t *\t\t} );\n\t *\n\t *\t\telement.getStyle( 'margin' ); // -> 'margin: 1px 1px 3em;'\n\t *\n\t * @param {String} property\n\t * @returns {String|undefined}\n\t */\n\tgetStyle( property ) {\n\t\treturn this._styles.getAsString( property );\n\t}\n\n\t/**\n\t * Returns a normalized style object or single style value.\n\t *\n\t * For an element with style set to: margin:1px 2px 3em;\n\t *\n\t *\t\telement.getNormalizedStyle( 'margin' ) );\n\t *\n\t * will return:\n\t *\n\t *\t\t{\n\t *\t\t\ttop: '1px',\n\t *\t\t\tright: '2px',\n\t *\t\t\tbottom: '3em',\n\t *\t\t\tleft: '2px'    // a normalized value from margin shorthand\n\t *\t\t}\n\t *\n\t * and reading for single style value:\n\t *\n\t *\t\tstyles.getNormalizedStyle( 'margin-left' );\n\t *\n\t * Will return a `2px` string.\n\t *\n\t * **Note**: This method will return normalized values only if\n\t * {@link module:engine/controller/datacontroller~DataController#addStyleProcessorRules a particular style processor rule is enabled}.\n\t * See {@link module:engine/view/stylesmap~StylesMap#getNormalized `StylesMap#getNormalized()`} for details.\n\t *\n\t *\n\t * @param {String} property Name of CSS property\n\t * @returns {Object|String|undefined}\n\t */\n\tgetNormalizedStyle( property ) {\n\t\treturn this._styles.getNormalized( property );\n\t}\n\n\t/**\n\t * Returns iterator that contains all style names.\n\t *\n\t * @returns {Iterable.<String>}\n\t */\n\tgetStyleNames() {\n\t\treturn this._styles.getStyleNames();\n\t}\n\n\t/**\n\t * Returns true if style keys are present.\n\t * If more then one style property is provided - returns true only when all properties are present.\n\t *\n\t *\t\telement.hasStyle( 'color' ); // Returns true if 'border-top' style is present.\n\t *\t\telement.hasStyle( 'color', 'border-top' ); // Returns true if 'color' and 'border-top' styles are both present.\n\t *\n\t * @param {...String} property\n\t */\n\thasStyle( ...property ) {\n\t\tfor ( const name of property ) {\n\t\t\tif ( !this._styles.has( name ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Returns ancestor element that match specified pattern.\n\t * Provided patterns should be compatible with {@link module:engine/view/matcher~Matcher Matcher} as it is used internally.\n\t *\n\t * @see module:engine/view/matcher~Matcher\n\t * @param {Object|String|RegExp|Function} patterns Patterns used to match correct ancestor.\n\t * See {@link module:engine/view/matcher~Matcher}.\n\t * @returns {module:engine/view/element~Element|null} Found element or `null` if no matching ancestor was found.\n\t */\n\tfindAncestor( ...patterns ) {\n\t\tconst matcher = new Matcher( ...patterns );\n\t\tlet parent = this.parent;\n\n\t\twhile ( parent ) {\n\t\t\tif ( matcher.match( parent ) ) {\n\t\t\t\treturn parent;\n\t\t\t}\n\n\t\t\tparent = parent.parent;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Returns the custom property value for the given key.\n\t *\n\t * @param {String|Symbol} key\n\t * @returns {*}\n\t */\n\tgetCustomProperty( key ) {\n\t\treturn this._customProperties.get( key );\n\t}\n\n\t/**\n\t * Returns an iterator which iterates over this element's custom properties.\n\t * Iterator provides `[ key, value ]` pairs for each stored property.\n\t *\n\t * @returns {Iterable.<*>}\n\t */\n\t* getCustomProperties() {\n\t\tyield* this._customProperties.entries();\n\t}\n\n\t/**\n\t * Returns identity string based on element's name, styles, classes and other attributes.\n\t * Two elements that {@link #isSimilar are similar} will have same identity string.\n\t * It has the following format:\n\t *\n\t *\t\t'name class=\"class1,class2\" style=\"style1:value1;style2:value2\" attr1=\"val1\" attr2=\"val2\"'\n \t *\n\t * For example:\n\t *\n\t *\t\tconst element = writer.createContainerElement( 'foo', {\n\t *\t\t\tbanana: '10',\n\t *\t\t\tapple: '20',\n\t *\t\t\tstyle: 'color: red; border-color: white;',\n\t *\t\t\tclass: 'baz'\n\t *\t\t} );\n\t *\n\t *\t\t// returns 'foo class=\"baz\" style=\"border-color:white;color:red\" apple=\"20\" banana=\"10\"'\n\t *\t\telement.getIdentity();\n\t *\n\t * **Note**: Classes, styles and other attributes are sorted alphabetically.\n\t *\n\t * @returns {String}\n\t */\n\tgetIdentity() {\n\t\tconst classes = Array.from( this._classes ).sort().join( ',' );\n\t\tconst styles = this._styles.toString();\n\t\tconst attributes = Array.from( this._attrs ).map( i => `${ i[ 0 ] }=\"${ i[ 1 ] }\"` ).sort().join( ' ' );\n\n\t\treturn this.name +\n\t\t\t( classes == '' ? '' : ` class=\"${ classes }\"` ) +\n\t\t\t( !styles ? '' : ` style=\"${ styles }\"` ) +\n\t\t\t( attributes == '' ? '' : ` ${ attributes }` );\n\t}\n\n\t/**\n\t * Clones provided element.\n\t *\n\t * @protected\n\t * @param {Boolean} [deep=false] If set to `true` clones element and all its children recursively. When set to `false`,\n\t * element will be cloned without any children.\n\t * @returns {module:engine/view/element~Element} Clone of this element.\n\t */\n\t_clone( deep = false ) {\n\t\tconst childrenClone = [];\n\n\t\tif ( deep ) {\n\t\t\tfor ( const child of this.getChildren() ) {\n\t\t\t\tchildrenClone.push( child._clone( deep ) );\n\t\t\t}\n\t\t}\n\n\t\t// ContainerElement and AttributeElement should be also cloned properly.\n\t\tconst cloned = new this.constructor( this.document, this.name, this._attrs, childrenClone );\n\n\t\t// Classes and styles are cloned separately - this solution is faster than adding them back to attributes and\n\t\t// parse once again in constructor.\n\t\tcloned._classes = new Set( this._classes );\n\t\tcloned._styles.set( this._styles.getNormalized() );\n\n\t\t// Clone custom properties.\n\t\tcloned._customProperties = new Map( this._customProperties );\n\n\t\t// Clone filler offset method.\n\t\t// We can't define this method in a prototype because it's behavior which\n\t\t// is changed by e.g. toWidget() function from ckeditor5-widget. Perhaps this should be one of custom props.\n\t\tcloned.getFillerOffset = this.getFillerOffset;\n\n\t\treturn cloned;\n\t}\n\n\t/**\n\t * {@link module:engine/view/element~Element#_insertChild Insert} a child node or a list of child nodes at the end of this node\n\t * and sets the parent of these nodes to this element.\n\t *\n\t * @see module:engine/view/downcastwriter~DowncastWriter#insert\n\t * @protected\n\t * @param {module:engine/view/item~Item|Iterable.<module:engine/view/item~Item>} items Items to be inserted.\n\t * @fires module:engine/view/node~Node#change\n\t * @returns {Number} Number of appended nodes.\n\t */\n\t_appendChild( items ) {\n\t\treturn this._insertChild( this.childCount, items );\n\t}\n\n\t/**\n\t * Inserts a child node or a list of child nodes on the given index and sets the parent of these nodes to\n\t * this element.\n\t *\n\t * @see module:engine/view/downcastwriter~DowncastWriter#insert\n\t * @protected\n\t * @param {Number} index Position where nodes should be inserted.\n\t * @param {module:engine/view/item~Item|Iterable.<module:engine/view/item~Item>} items Items to be inserted.\n\t * @fires module:engine/view/node~Node#change\n\t * @returns {Number} Number of inserted nodes.\n\t */\n\t_insertChild( index, items ) {\n\t\tthis._fireChange( 'children', this );\n\t\tlet count = 0;\n\n\t\tconst nodes = normalize( this.document, items );\n\n\t\tfor ( const node of nodes ) {\n\t\t\t// If node that is being added to this element is already inside another element, first remove it from the old parent.\n\t\t\tif ( node.parent !== null ) {\n\t\t\t\tnode._remove();\n\t\t\t}\n\n\t\t\tnode.parent = this;\n\t\t\tnode.document = this.document;\n\n\t\t\tthis._children.splice( index, 0, node );\n\t\t\tindex++;\n\t\t\tcount++;\n\t\t}\n\n\t\treturn count;\n\t}\n\n\t/**\n\t * Removes number of child nodes starting at the given index and set the parent of these nodes to `null`.\n\t *\n\t * @see module:engine/view/downcastwriter~DowncastWriter#remove\n\t * @protected\n\t * @param {Number} index Number of the first node to remove.\n\t * @param {Number} [howMany=1] Number of nodes to remove.\n\t * @fires module:engine/view/node~Node#change\n\t * @returns {Array.<module:engine/view/node~Node>} The array of removed nodes.\n\t */\n\t_removeChildren( index, howMany = 1 ) {\n\t\tthis._fireChange( 'children', this );\n\n\t\tfor ( let i = index; i < index + howMany; i++ ) {\n\t\t\tthis._children[ i ].parent = null;\n\t\t}\n\n\t\treturn this._children.splice( index, howMany );\n\t}\n\n\t/**\n\t * Adds or overwrite attribute with a specified key and value.\n\t *\n\t * @see module:engine/view/downcastwriter~DowncastWriter#setAttribute\n\t * @protected\n\t * @param {String} key Attribute key.\n\t * @param {String} value Attribute value.\n\t * @fires module:engine/view/node~Node#change\n\t */\n\t_setAttribute( key, value ) {\n\t\tvalue = String( value );\n\n\t\tthis._fireChange( 'attributes', this );\n\n\t\tif ( key == 'class' ) {\n\t\t\tparseClasses( this._classes, value );\n\t\t} else if ( key == 'style' ) {\n\t\t\tthis._styles.setTo( value );\n\t\t} else {\n\t\t\tthis._attrs.set( key, value );\n\t\t}\n\t}\n\n\t/**\n\t * Removes attribute from the element.\n\t *\n\t * @see module:engine/view/downcastwriter~DowncastWriter#removeAttribute\n\t * @protected\n\t * @param {String} key Attribute key.\n\t * @returns {Boolean} Returns true if an attribute existed and has been removed.\n\t * @fires module:engine/view/node~Node#change\n\t */\n\t_removeAttribute( key ) {\n\t\tthis._fireChange( 'attributes', this );\n\n\t\t// Remove class attribute.\n\t\tif ( key == 'class' ) {\n\t\t\tif ( this._classes.size > 0 ) {\n\t\t\t\tthis._classes.clear();\n\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\n\t\t// Remove style attribute.\n\t\tif ( key == 'style' ) {\n\t\t\tif ( !this._styles.isEmpty ) {\n\t\t\t\tthis._styles.clear();\n\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\n\t\t// Remove other attributes.\n\t\treturn this._attrs.delete( key );\n\t}\n\n\t/**\n\t * Adds specified class.\n\t *\n\t *\t\telement._addClass( 'foo' ); // Adds 'foo' class.\n\t *\t\telement._addClass( [ 'foo', 'bar' ] ); // Adds 'foo' and 'bar' classes.\n\t *\n\t * @see module:engine/view/downcastwriter~DowncastWriter#addClass\n\t * @protected\n\t * @param {Array.<String>|String} className\n\t * @fires module:engine/view/node~Node#change\n\t */\n\t_addClass( className ) {\n\t\tthis._fireChange( 'attributes', this );\n\n\t\tfor ( const name of toArray( className ) ) {\n\t\t\tthis._classes.add( name );\n\t\t}\n\t}\n\n\t/**\n\t * Removes specified class.\n\t *\n\t *\t\telement._removeClass( 'foo' );  // Removes 'foo' class.\n\t *\t\telement._removeClass( [ 'foo', 'bar' ] ); // Removes both 'foo' and 'bar' classes.\n\t *\n\t * @see module:engine/view/downcastwriter~DowncastWriter#removeClass\n\t * @protected\n\t * @param {Array.<String>|String} className\n\t * @fires module:engine/view/node~Node#change\n\t */\n\t_removeClass( className ) {\n\t\tthis._fireChange( 'attributes', this );\n\n\t\tfor ( const name of toArray( className ) ) {\n\t\t\tthis._classes.delete( name );\n\t\t}\n\t}\n\n\t/**\n\t * Adds style to the element.\n\t *\n\t *\t\telement._setStyle( 'color', 'red' );\n\t *\t\telement._setStyle( {\n\t *\t\t\tcolor: 'red',\n\t *\t\t\tposition: 'fixed'\n\t *\t\t} );\n\t *\n\t * **Note**: This method can work with normalized style names if\n\t * {@link module:engine/controller/datacontroller~DataController#addStyleProcessorRules a particular style processor rule is enabled}.\n\t * See {@link module:engine/view/stylesmap~StylesMap#set `StylesMap#set()`} for details.\n\t *\n\t * @see module:engine/view/downcastwriter~DowncastWriter#setStyle\n\t * @protected\n\t * @param {String|Object} property Property name or object with key - value pairs.\n\t * @param {String} [value] Value to set. This parameter is ignored if object is provided as the first parameter.\n\t * @fires module:engine/view/node~Node#change\n\t */\n\t_setStyle( property, value ) {\n\t\tthis._fireChange( 'attributes', this );\n\n\t\tthis._styles.set( property, value );\n\t}\n\n\t/**\n\t * Removes specified style.\n\t *\n\t *\t\telement._removeStyle( 'color' );  // Removes 'color' style.\n\t *\t\telement._removeStyle( [ 'color', 'border-top' ] ); // Removes both 'color' and 'border-top' styles.\n\t *\n\t * **Note**: This method can work with normalized style names if\n\t * {@link module:engine/controller/datacontroller~DataController#addStyleProcessorRules a particular style processor rule is enabled}.\n\t * See {@link module:engine/view/stylesmap~StylesMap#remove `StylesMap#remove()`} for details.\n\t *\n\t * @see module:engine/view/downcastwriter~DowncastWriter#removeStyle\n\t * @protected\n\t * @param {Array.<String>|String} property\n\t * @fires module:engine/view/node~Node#change\n\t */\n\t_removeStyle( property ) {\n\t\tthis._fireChange( 'attributes', this );\n\n\t\tfor ( const name of toArray( property ) ) {\n\t\t\tthis._styles.remove( name );\n\t\t}\n\t}\n\n\t/**\n\t * Sets a custom property. Unlike attributes, custom properties are not rendered to the DOM,\n\t * so they can be used to add special data to elements.\n\t *\n\t * @see module:engine/view/downcastwriter~DowncastWriter#setCustomProperty\n\t * @protected\n\t * @param {String|Symbol} key\n\t * @param {*} value\n\t */\n\t_setCustomProperty( key, value ) {\n\t\tthis._customProperties.set( key, value );\n\t}\n\n\t/**\n\t * Removes the custom property stored under the given key.\n\t *\n\t * @see module:engine/view/downcastwriter~DowncastWriter#removeCustomProperty\n\t * @protected\n\t * @param {String|Symbol} key\n\t * @returns {Boolean} Returns true if property was removed.\n\t */\n\t_removeCustomProperty( key ) {\n\t\treturn this._customProperties.delete( key );\n\t}\n\n\t/**\n\t * Returns block {@link module:engine/view/filler filler} offset or `null` if block filler is not needed.\n\t *\n\t * @abstract\n\t * @method module:engine/view/element~Element#getFillerOffset\n\t */\n\n\t// @if CK_DEBUG_ENGINE // printTree( level = 0) {\n\t// @if CK_DEBUG_ENGINE // \tlet string = '';\n\n\t// @if CK_DEBUG_ENGINE //\tstring += '\\t'.repeat( level ) + `<${ this.name }${ convertMapToTags( this.getAttributes() ) }>`;\n\n\t// @if CK_DEBUG_ENGINE //\tfor ( const child of this.getChildren() ) {\n\t// @if CK_DEBUG_ENGINE //\t\tif ( child.is( '$text' ) ) {\n\t// @if CK_DEBUG_ENGINE //\t\t\tstring += '\\n' + '\\t'.repeat( level + 1 ) + child.data;\n\t// @if CK_DEBUG_ENGINE //\t\t} else {\n\t// @if CK_DEBUG_ENGINE //\t\t\tstring += '\\n' + child.printTree( level + 1 );\n\t// @if CK_DEBUG_ENGINE //\t\t}\n\t// @if CK_DEBUG_ENGINE //\t}\n\n\t// @if CK_DEBUG_ENGINE //\tif ( this.childCount ) {\n\t// @if CK_DEBUG_ENGINE //\t\tstring += '\\n' + '\\t'.repeat( level );\n\t// @if CK_DEBUG_ENGINE //\t}\n\n\t// @if CK_DEBUG_ENGINE //\tstring += `</${ this.name }>`;\n\n\t// @if CK_DEBUG_ENGINE //\treturn string;\n\t// @if CK_DEBUG_ENGINE // }\n\n\t// @if CK_DEBUG_ENGINE // logTree() {\n\t// @if CK_DEBUG_ENGINE // \tconsole.log( this.printTree() );\n\t// @if CK_DEBUG_ENGINE // }\n}\n\n// Parses attributes provided to the element constructor before they are applied to an element. If attributes are passed\n// as an object (instead of `Iterable`), the object is transformed to the map. Attributes with `null` value are removed.\n// Attributes with non-`String` value are converted to `String`.\n//\n// @param {Object|Iterable} attrs Attributes to parse.\n// @returns {Map} Parsed attributes.\nfunction parseAttributes( attrs ) {\n\tattrs = toMap( attrs );\n\n\tfor ( const [ key, value ] of attrs ) {\n\t\tif ( value === null ) {\n\t\t\tattrs.delete( key );\n\t\t} else if ( typeof value != 'string' ) {\n\t\t\tattrs.set( key, String( value ) );\n\t\t}\n\t}\n\n\treturn attrs;\n}\n\n// Parses class attribute and puts all classes into classes set.\n// Classes set s cleared before insertion.\n//\n// @param {Set.<String>} classesSet Set to insert parsed classes.\n// @param {String} classesString String with classes to parse.\nfunction parseClasses( classesSet, classesString ) {\n\tconst classArray = classesString.split( /\\s+/ );\n\tclassesSet.clear();\n\tclassArray.forEach( name => classesSet.add( name ) );\n}\n\n// Converts strings to Text and non-iterables to arrays.\n//\n// @param {String|module:engine/view/item~Item|Iterable.<String|module:engine/view/item~Item>}\n// @returns {Iterable.<module:engine/view/node~Node>}\nfunction normalize( document, nodes ) {\n\t// Separate condition because string is iterable.\n\tif ( typeof nodes == 'string' ) {\n\t\treturn [ new Text( document, nodes ) ];\n\t}\n\n\tif ( !isIterable( nodes ) ) {\n\t\tnodes = [ nodes ];\n\t}\n\n\t// Array.from to enable .map() on non-arrays.\n\treturn Array.from( nodes )\n\t\t.map( node => {\n\t\t\tif ( typeof node == 'string' ) {\n\t\t\t\treturn new Text( document, node );\n\t\t\t}\n\n\t\t\tif ( node instanceof TextProxy ) {\n\t\t\t\treturn new Text( document, node.data );\n\t\t\t}\n\n\t\t\treturn node;\n\t\t} );\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/containerelement\n */\n\nimport Element from './element';\n\n/**\n * Containers are elements which define document structure. They define boundaries for\n * {@link module:engine/view/attributeelement~AttributeElement attributes}. They are mostly used for block elements like `<p>` or `<div>`.\n *\n * Editing engine does not define a fixed HTML DTD. This is why a feature developer needs to choose between various\n * types (container element, {@link module:engine/view/attributeelement~AttributeElement attribute element},\n * {@link module:engine/view/emptyelement~EmptyElement empty element}, etc) when developing a feature.\n *\n * The container element should be your default choice when writing a converter, unless:\n *\n * * this element represents a model text attribute (then use {@link module:engine/view/attributeelement~AttributeElement}),\n * * this is an empty element like `<img>` (then use {@link module:engine/view/emptyelement~EmptyElement}),\n * * this is a root element,\n * * this is a nested editable element (then use  {@link module:engine/view/editableelement~EditableElement}).\n *\n * To create a new container element instance use the\n * {@link module:engine/view/downcastwriter~DowncastWriter#createContainerElement `DowncastWriter#createContainerElement()`}\n * method.\n *\n * @extends module:engine/view/element~Element\n */\nexport default class ContainerElement extends Element {\n\t/**\n\t * Creates a container element.\n\t *\n\t * @see module:engine/view/downcastwriter~DowncastWriter#createContainerElement\n\t * @see module:engine/view/element~Element\n\t * @protected\n\t * @param {module:engine/view/document~Document} document The document instance to which this element belongs.\n\t * @param {String} name Node name.\n\t * @param {Object|Iterable} [attrs] Collection of attributes.\n\t * @param {module:engine/view/node~Node|Iterable.<module:engine/view/node~Node>} [children]\n\t * A list of nodes to be inserted into created element.\n\t */\n\tconstructor( document, name, attrs, children ) {\n\t\tsuper( document, name, attrs, children );\n\n\t\t/**\n\t\t * Returns block {@link module:engine/view/filler filler} offset or `null` if block filler is not needed.\n\t\t *\n\t\t * @method #getFillerOffset\n\t\t * @returns {Number|null} Block filler offset or `null` if block filler is not needed.\n\t\t */\n\t\tthis.getFillerOffset = getFillerOffset;\n\t}\n\n\t/**\n\t * Checks whether this object is of the given.\n\t *\n\t *\t\tcontainerElement.is( 'containerElement' ); // -> true\n\t *\t\tcontainerElement.is( 'element' ); // -> true\n\t *\t\tcontainerElement.is( 'node' ); // -> true\n\t *\t\tcontainerElement.is( 'view:containerElement' ); // -> true\n\t *\t\tcontainerElement.is( 'view:element' ); // -> true\n\t *\t\tcontainerElement.is( 'view:node' ); // -> true\n\t *\n\t *\t\tcontainerElement.is( 'model:element' ); // -> false\n\t *\t\tcontainerElement.is( 'documentFragment' ); // -> false\n\t *\n\t * Assuming that the object being checked is a container element, you can also check its\n\t * {@link module:engine/view/containerelement~ContainerElement#name name}:\n\t *\n\t *\t\tcontainerElement.is( 'element', 'div' ); // -> true if this is a div container element\n\t *\t\tcontainerElement.is( 'contaienrElement', 'div' ); // -> same as above\n\t *\t\ttext.is( 'element', 'div' ); -> false\n\t *\n\t * {@link module:engine/view/node~Node#is Check the entire list of view objects} which implement the `is()` method.\n\t *\n\t * @param {String} type Type to check.\n\t * @param {String} [name] Element name.\n\t * @returns {Boolean}\n\t */\n\tis( type, name = null ) {\n\t\tif ( !name ) {\n\t\t\treturn type === 'containerElement' || type === 'view:containerElement' ||\n\t\t\t\t// From super.is(). This is highly utilised method and cannot call super. See ckeditor/ckeditor5#6529.\n\t\t\t\ttype === 'element' || type === 'view:element' ||\n\t\t\t\ttype === 'node' || type === 'view:node';\n\t\t} else {\n\t\t\treturn name === this.name && (\n\t\t\t\ttype === 'containerElement' || type === 'view:containerElement' ||\n\t\t\t\t// From super.is(). This is highly utilised method and cannot call super. See ckeditor/ckeditor5#6529.\n\t\t\t\ttype === 'element' || type === 'view:element'\n\t\t\t);\n\t\t}\n\t}\n}\n\n/**\n * Returns block {@link module:engine/view/filler filler} offset or `null` if block filler is not needed.\n *\n * @returns {Number|null} Block filler offset or `null` if block filler is not needed.\n */\nexport function getFillerOffset() {\n\tconst children = [ ...this.getChildren() ];\n\tconst lastChild = children[ this.childCount - 1 ];\n\n\t// Block filler is required after a `<br>` if it's the last element in its container. See #1422.\n\tif ( lastChild && lastChild.is( 'element', 'br' ) ) {\n\t\treturn this.childCount;\n\t}\n\n\tfor ( const child of children ) {\n\t\t// If there's any non-UI element – don't render the bogus.\n\t\tif ( !child.is( 'uiElement' ) ) {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\t// If there are only UI elements – render the bogus at the end of the element.\n\treturn this.childCount;\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/editableelement\n */\n\nimport ContainerElement from './containerelement';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\nimport ObservableMixin from '@ckeditor/ckeditor5-utils/src/observablemixin';\n\n/**\n * Editable element which can be a {@link module:engine/view/rooteditableelement~RootEditableElement root}\n * or nested editable area in the editor.\n *\n * Editable is automatically read-only when its {@link module:engine/view/document~Document Document} is read-only.\n *\n * The constructor of this class shouldn't be used directly. To create new `EditableElement` use the\n * {@link module:engine/view/downcastwriter~DowncastWriter#createEditableElement `downcastWriter#createEditableElement()`} method.\n *\n * @extends module:engine/view/containerelement~ContainerElement\n * @mixes module:utils/observablemixin~ObservableMixin\n */\nexport default class EditableElement extends ContainerElement {\n\t/**\n\t * Creates an editable element.\n\t *\n\t * @see module:engine/view/downcastwriter~DowncastWriter#createEditableElement\n\t * @protected\n\t */\n\tconstructor( document, name, attrs, children ) {\n\t\tsuper( document, name, attrs, children );\n\n\t\t/**\n\t\t * Whether the editable is in read-write or read-only mode.\n\t\t *\n\t\t * @observable\n\t\t * @member {Boolean} module:engine/view/editableelement~EditableElement#isReadOnly\n\t\t */\n\t\tthis.set( 'isReadOnly', false );\n\n\t\t/**\n\t\t * Whether the editable is focused.\n\t\t *\n\t\t * This property updates when {@link module:engine/view/document~Document#isFocused document.isFocused} or view\n\t\t * selection is changed.\n\t\t *\n\t\t * @readonly\n\t\t * @observable\n\t\t * @member {Boolean} module:engine/view/editableelement~EditableElement#isFocused\n\t\t */\n\t\tthis.set( 'isFocused', false );\n\n\t\tthis.bind( 'isReadOnly' ).to( document );\n\n\t\tthis.bind( 'isFocused' ).to(\n\t\t\tdocument,\n\t\t\t'isFocused',\n\t\t\tisFocused => isFocused && document.selection.editableElement == this\n\t\t);\n\n\t\t// Update focus state based on selection changes.\n\t\tthis.listenTo( document.selection, 'change', () => {\n\t\t\tthis.isFocused = document.isFocused && document.selection.editableElement == this;\n\t\t} );\n\t}\n\n\t/**\n\t * Checks whether this object is of the given.\n\t *\n\t *\t\teditableElement.is( 'editableElement' ); // -> true\n\t *\t\teditableElement.is( 'element' ); // -> true\n\t *\t\teditableElement.is( 'node' ); // -> true\n\t *\t\teditableElement.is( 'view:editableElement' ); // -> true\n\t *\t\teditableElement.is( 'view:element' ); // -> true\n\t *\t\teditableElement.is( 'view:node' ); // -> true\n\t *\n\t *\t\teditableElement.is( 'model:element' ); // -> false\n\t *\t\teditableElement.is( 'documentFragment' ); // -> false\n\t *\n\t * Assuming that the object being checked is an editbale element, you can also check its\n\t * {@link module:engine/view/editableelement~EditableElement#name name}:\n\t *\n\t *\t\teditableElement.is( 'element', 'div' ); // -> true if this is a div element\n\t *\t\teditableElement.is( 'editableElement', 'div' ); // -> same as above\n\t *\t\ttext.is( 'element', 'div' ); -> false\n\t *\n\t * {@link module:engine/view/node~Node#is Check the entire list of view objects} which implement the `is()` method.\n\t *\n\t * @param {String} type Type to check.\n\t * @param {String} [name] Element name.\n\t * @returns {Boolean}\n\t */\n\tis( type, name = null ) {\n\t\tif ( !name ) {\n\t\t\treturn type === 'editableElement' || type === 'view:editableElement' ||\n\t\t\t\t// From super.is(). This is highly utilised method and cannot call super. See ckeditor/ckeditor5#6529.\n\t\t\t\ttype === 'containerElement' || type === 'view:containerElement' ||\n\t\t\t\ttype === 'element' || type === 'view:element' ||\n\t\t\t\ttype === 'node' || type === 'view:node';\n\t\t} else {\n\t\t\treturn name === this.name && (\n\t\t\t\ttype === 'editableElement' || type === 'view:editableElement' ||\n\t\t\t\t// From super.is(). This is highly utilised method and cannot call super. See ckeditor/ckeditor5#6529.\n\t\t\t\ttype === 'containerElement' || type === 'view:containerElement' ||\n\t\t\t\ttype === 'element' || type === 'view:element'\n\t\t\t);\n\t\t}\n\t}\n\n\tdestroy() {\n\t\tthis.stopListening();\n\t}\n}\n\nmix( EditableElement, ObservableMixin );\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/rooteditableelement\n */\n\nimport EditableElement from './editableelement';\n\nconst rootNameSymbol = Symbol( 'rootName' );\n\n/**\n * Class representing a single root in the data view. A root can be either {@link ~RootEditableElement#isReadOnly editable or read-only},\n * but in both cases it is called \"an editable\". Roots can contain other {@link module:engine/view/editableelement~EditableElement\n * editable elements} making them \"nested editables\".\n *\n * @extends module:engine/view/editableelement~EditableElement\n */\nexport default class RootEditableElement extends EditableElement {\n\t/**\n\t * Creates root editable element.\n\t *\n\t * @param {module:engine/view/document~Document} document The document instance to which this element belongs.\n\t * @param {String} name Node name.\n\t */\n\tconstructor( document, name ) {\n\t\tsuper( document, name );\n\n\t\t/**\n\t\t * Name of this root inside {@link module:engine/view/document~Document} that is an owner of this root. If no\n\t\t * other name is set, `main` name is used.\n\t\t *\n\t\t * @readonly\n\t\t * @member {String}\n\t\t */\n\t\tthis.rootName = 'main';\n\t}\n\n\t/**\n\t * Checks whether this object is of the given.\n\t *\n\t *\t\trootEditableElement.is( 'rootElement' ); // -> true\n\t *\t\trootEditableElement.is( 'editableElement' ); // -> true\n\t *\t\trootEditableElement.is( 'element' ); // -> true\n\t *\t\trootEditableElement.is( 'node' ); // -> true\n\t *\t\trootEditableElement.is( 'view:editableElement' ); // -> true\n\t *\t\trootEditableElement.is( 'view:element' ); // -> true\n\t *\t\trootEditableElement.is( 'view:node' ); // -> true\n\t *\n\t *\t\trootEditableElement.is( 'model:element' ); // -> false\n\t *\t\trootEditableElement.is( 'documentFragment' ); // -> false\n\t *\n\t * Assuming that the object being checked is a root editable element, you can also check its\n\t * {@link module:engine/view/rooteditableelement~RootEditableElement#name name}:\n\t *\n\t *\t\trootEditableElement.is( 'element', 'div' ); // -> true if this is a div root editable element\n\t *\t\trootEditableElement.is( 'rootElement', 'div' ); // -> same as above\n\t *\t\ttext.is( 'element', 'div' ); -> false\n\t *\n\t * {@link module:engine/view/node~Node#is Check the entire list of view objects} which implement the `is()` method.\n\t *\n\t * @param {String} type Type to check.\n\t * @param {String} [name] Element name.\n\t * @returns {Boolean}\n\t */\n\tis( type, name = null ) {\n\t\tif ( !name ) {\n\t\t\treturn type === 'rootElement' || type === 'view:rootElement' ||\n\t\t\t\t// From super.is(). This is highly utilised method and cannot call super. See ckeditor/ckeditor5#6529.\n\t\t\t\ttype === 'editableElement' || type === 'view:editableElement' ||\n\t\t\t\ttype === 'containerElement' || type === 'view:containerElement' ||\n\t\t\t\ttype === 'element' || type === 'view:element' ||\n\t\t\t\ttype === 'node' || type === 'view:node';\n\t\t} else {\n\t\t\treturn name === this.name && (\n\t\t\t\ttype === 'rootElement' || type === 'view:rootElement' ||\n\t\t\t\t// From super.is(). This is highly utilised method and cannot call super. See ckeditor/ckeditor5#6529.\n\t\t\t\ttype === 'editableElement' || type === 'view:editableElement' ||\n\t\t\t\ttype === 'containerElement' || type === 'view:containerElement' ||\n\t\t\t\ttype === 'element' || type === 'view:element'\n\t\t\t);\n\t\t}\n\t}\n\n\tget rootName() {\n\t\treturn this.getCustomProperty( rootNameSymbol );\n\t}\n\n\tset rootName( rootName ) {\n\t\tthis._setCustomProperty( rootNameSymbol, rootName );\n\t}\n\n\t/**\n\t * Overrides old element name and sets new one.\n\t * This is needed because view roots are created before they are attached to the DOM.\n\t * The name of the root element is temporary at this stage. It has to be changed when the\n\t * view root element is attached to the DOM element.\n\t *\n\t * @protected\n\t * @param {String} name The new name of element.\n\t */\n\tset _name( name ) {\n\t\tthis.name = name;\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/treewalker\n */\n\nimport Element from './element';\nimport Text from './text';\nimport TextProxy from './textproxy';\nimport Position from './position';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n\n/**\n * Position iterator class. It allows to iterate forward and backward over the document.\n */\nexport default class TreeWalker {\n\t/**\n\t * Creates a range iterator. All parameters are optional, but you have to specify either `boundaries` or `startPosition`.\n\t *\n\t * @constructor\n\t * @param {Object} options Object with configuration.\n\t * @param {module:engine/view/range~Range} [options.boundaries=null] Range to define boundaries of the iterator.\n\t * @param {module:engine/view/position~Position} [options.startPosition] Starting position.\n\t * @param {'forward'|'backward'} [options.direction='forward'] Walking direction.\n\t * @param {Boolean} [options.singleCharacters=false] Flag indicating whether all characters from\n\t * {@link module:engine/view/text~Text} should be returned as one {@link module:engine/view/text~Text} (`false`) ore one by one as\n\t * {@link module:engine/view/textproxy~TextProxy} (`true`).\n\t * @param {Boolean} [options.shallow=false] Flag indicating whether iterator should enter elements or not. If the\n\t * iterator is shallow child nodes of any iterated node will not be returned along with `elementEnd` tag.\n\t * @param {Boolean} [options.ignoreElementEnd=false] Flag indicating whether iterator should ignore `elementEnd`\n\t * tags. If the option is true walker will not return a parent node of start position. If this option is `true`\n\t * each {@link module:engine/view/element~Element} will be returned once, while if the option is `false` they might be returned\n\t * twice: for `'elementStart'` and `'elementEnd'`.\n\t */\n\tconstructor( options = {} ) {\n\t\tif ( !options.boundaries && !options.startPosition ) {\n\t\t\t/**\n\t\t\t * Neither boundaries nor starting position have been defined.\n\t\t\t *\n\t\t\t * @error view-tree-walker-no-start-position\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'view-tree-walker-no-start-position',\n\t\t\t\tnull\n\t\t\t);\n\t\t}\n\n\t\tif ( options.direction && options.direction != 'forward' && options.direction != 'backward' ) {\n\t\t\t/**\n\t\t\t * Only `backward` and `forward` direction allowed.\n\t\t\t *\n\t\t\t * @error view-tree-walker-unknown-direction\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'view-tree-walker-unknown-direction', options.startPosition, { direction: options.direction } );\n\t\t}\n\n\t\t/**\n\t\t * Iterator boundaries.\n\t\t *\n\t\t * When the iterator is walking `'forward'` on the end of boundary or is walking `'backward'`\n\t\t * on the start of boundary, then `{ done: true }` is returned.\n\t\t *\n\t\t * If boundaries are not defined they are set before first and after last child of the root node.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/range~Range} module:engine/view/treewalker~TreeWalker#boundaries\n\t\t */\n\t\tthis.boundaries = options.boundaries || null;\n\n\t\t/**\n\t\t * Iterator position. If start position is not defined then position depends on {@link #direction}. If direction is\n\t\t * `'forward'` position starts form the beginning, when direction is `'backward'` position starts from the end.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/position~Position} module:engine/view/treewalker~TreeWalker#position\n\t\t */\n\t\tif ( options.startPosition ) {\n\t\t\tthis.position = Position._createAt( options.startPosition );\n\t\t} else {\n\t\t\tthis.position = Position._createAt( options.boundaries[ options.direction == 'backward' ? 'end' : 'start' ] );\n\t\t}\n\n\t\t/**\n\t\t * Walking direction. Defaults `'forward'`.\n\t\t *\n\t\t * @readonly\n\t\t * @member {'backward'|'forward'} module:engine/view/treewalker~TreeWalker#direction\n\t\t */\n\t\tthis.direction = options.direction || 'forward';\n\n\t\t/**\n\t\t * Flag indicating whether all characters from {@link module:engine/view/text~Text} should be returned as one\n\t\t * {@link module:engine/view/text~Text} or one by one as {@link module:engine/view/textproxy~TextProxy}.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Boolean} module:engine/view/treewalker~TreeWalker#singleCharacters\n\t\t */\n\t\tthis.singleCharacters = !!options.singleCharacters;\n\n\t\t/**\n\t\t * Flag indicating whether iterator should enter elements or not. If the iterator is shallow child nodes of any\n\t\t * iterated node will not be returned along with `elementEnd` tag.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Boolean} module:engine/view/treewalker~TreeWalker#shallow\n\t\t */\n\t\tthis.shallow = !!options.shallow;\n\n\t\t/**\n\t\t * Flag indicating whether iterator should ignore `elementEnd` tags. If set to `true`, walker will not\n\t\t * return a parent node of the start position. Each {@link module:engine/view/element~Element} will be returned once.\n\t\t * When set to `false` each element might be returned twice: for `'elementStart'` and `'elementEnd'`.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Boolean} module:engine/view/treewalker~TreeWalker#ignoreElementEnd\n\t\t */\n\t\tthis.ignoreElementEnd = !!options.ignoreElementEnd;\n\n\t\t/**\n\t\t * Start boundary parent.\n\t\t *\n\t\t * @private\n\t\t * @member {module:engine/view/node~Node} module:engine/view/treewalker~TreeWalker#_boundaryStartParent\n\t\t */\n\t\tthis._boundaryStartParent = this.boundaries ? this.boundaries.start.parent : null;\n\n\t\t/**\n\t\t * End boundary parent.\n\t\t *\n\t\t * @private\n\t\t * @member {module:engine/view/node~Node} module:engine/view/treewalker~TreeWalker#_boundaryEndParent\n\t\t */\n\t\tthis._boundaryEndParent = this.boundaries ? this.boundaries.end.parent : null;\n\t}\n\n\t/**\n\t * Iterable interface.\n\t *\n\t * @returns {Iterable.<module:engine/view/treewalker~TreeWalkerValue>}\n\t */\n\t[ Symbol.iterator ]() {\n\t\treturn this;\n\t}\n\n\t/**\n\t * Moves {@link #position} in the {@link #direction} skipping values as long as the callback function returns `true`.\n\t *\n\t * For example:\n\t *\n\t * \t\twalker.skip( value => value.type == 'text' ); // <p>{}foo</p> -> <p>foo[]</p>\n\t * \t\twalker.skip( value => true ); // Move the position to the end: <p>{}foo</p> -> <p>foo</p>[]\n\t * \t\twalker.skip( value => false ); // Do not move the position.\n\t *\n\t * @param {Function} skip Callback function. Gets {@link module:engine/view/treewalker~TreeWalkerValue} and should\n\t * return `true` if the value should be skipped or `false` if not.\n\t */\n\tskip( skip ) {\n\t\tlet done, value, prevPosition;\n\n\t\tdo {\n\t\t\tprevPosition = this.position;\n\n\t\t\t( { done, value } = this.next() );\n\t\t} while ( !done && skip( value ) );\n\n\t\tif ( !done ) {\n\t\t\tthis.position = prevPosition;\n\t\t}\n\t}\n\n\t/**\n\t * Gets the next tree walker's value.\n\t *\n\t * @returns {module:engine/view/treewalker~TreeWalkerValue} Object implementing iterator interface, returning\n\t * information about taken step.\n\t */\n\tnext() {\n\t\tif ( this.direction == 'forward' ) {\n\t\t\treturn this._next();\n\t\t} else {\n\t\t\treturn this._previous();\n\t\t}\n\t}\n\n\t/**\n\t * Makes a step forward in view. Moves the {@link #position} to the next position and returns the encountered value.\n\t *\n\t * @private\n\t * @returns {Object}\n\t * @returns {Boolean} return.done `true` if iterator is done, `false` otherwise.\n\t * @returns {module:engine/view/treewalker~TreeWalkerValue} return.value Information about taken step.\n\t */\n\t_next() {\n\t\tlet position = this.position.clone();\n\t\tconst previousPosition = this.position;\n\t\tconst parent = position.parent;\n\n\t\t// We are at the end of the root.\n\t\tif ( parent.parent === null && position.offset === parent.childCount ) {\n\t\t\treturn { done: true };\n\t\t}\n\n\t\t// We reached the walker boundary.\n\t\tif ( parent === this._boundaryEndParent && position.offset == this.boundaries.end.offset ) {\n\t\t\treturn { done: true };\n\t\t}\n\n\t\t// Get node just after current position.\n\t\tlet node;\n\n\t\t// Text is a specific parent because it contains string instead of child nodes.\n\t\tif ( parent instanceof Text ) {\n\t\t\tif ( position.isAtEnd ) {\n\t\t\t\t// Prevent returning \"elementEnd\" for Text node. Skip that value and return the next walker step.\n\t\t\t\tthis.position = Position._createAfter( parent );\n\n\t\t\t\treturn this._next();\n\t\t\t}\n\n\t\t\tnode = parent.data[ position.offset ];\n\t\t} else {\n\t\t\tnode = parent.getChild( position.offset );\n\t\t}\n\n\t\tif ( node instanceof Element ) {\n\t\t\tif ( !this.shallow ) {\n\t\t\t\tposition = new Position( node, 0 );\n\t\t\t} else {\n\t\t\t\tposition.offset++;\n\t\t\t}\n\n\t\t\tthis.position = position;\n\n\t\t\treturn this._formatReturnValue( 'elementStart', node, previousPosition, position, 1 );\n\t\t} else if ( node instanceof Text ) {\n\t\t\tif ( this.singleCharacters ) {\n\t\t\t\tposition = new Position( node, 0 );\n\t\t\t\tthis.position = position;\n\n\t\t\t\treturn this._next();\n\t\t\t} else {\n\t\t\t\tlet charactersCount = node.data.length;\n\t\t\t\tlet item;\n\n\t\t\t\t// If text stick out of walker range, we need to cut it and wrap in TextProxy.\n\t\t\t\tif ( node == this._boundaryEndParent ) {\n\t\t\t\t\tcharactersCount = this.boundaries.end.offset;\n\t\t\t\t\titem = new TextProxy( node, 0, charactersCount );\n\t\t\t\t\tposition = Position._createAfter( item );\n\t\t\t\t} else {\n\t\t\t\t\titem = new TextProxy( node, 0, node.data.length );\n\t\t\t\t\t// If not just keep moving forward.\n\t\t\t\t\tposition.offset++;\n\t\t\t\t}\n\n\t\t\t\tthis.position = position;\n\n\t\t\t\treturn this._formatReturnValue( 'text', item, previousPosition, position, charactersCount );\n\t\t\t}\n\t\t} else if ( typeof node == 'string' ) {\n\t\t\tlet textLength;\n\n\t\t\tif ( this.singleCharacters ) {\n\t\t\t\ttextLength = 1;\n\t\t\t} else {\n\t\t\t\t// Check if text stick out of walker range.\n\t\t\t\tconst endOffset = parent === this._boundaryEndParent ? this.boundaries.end.offset : parent.data.length;\n\n\t\t\t\ttextLength = endOffset - position.offset;\n\t\t\t}\n\n\t\t\tconst textProxy = new TextProxy( parent, position.offset, textLength );\n\n\t\t\tposition.offset += textLength;\n\t\t\tthis.position = position;\n\n\t\t\treturn this._formatReturnValue( 'text', textProxy, previousPosition, position, textLength );\n\t\t} else {\n\t\t\t// `node` is not set, we reached the end of current `parent`.\n\t\t\tposition = Position._createAfter( parent );\n\t\t\tthis.position = position;\n\n\t\t\tif ( this.ignoreElementEnd ) {\n\t\t\t\treturn this._next();\n\t\t\t} else {\n\t\t\t\treturn this._formatReturnValue( 'elementEnd', parent, previousPosition, position );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Makes a step backward in view. Moves the {@link #position} to the previous position and returns the encountered value.\n\t *\n\t * @private\n\t * @returns {Object}\n\t * @returns {Boolean} return.done True if iterator is done.\n\t * @returns {module:engine/view/treewalker~TreeWalkerValue} return.value Information about taken step.\n\t */\n\t_previous() {\n\t\tlet position = this.position.clone();\n\t\tconst previousPosition = this.position;\n\t\tconst parent = position.parent;\n\n\t\t// We are at the beginning of the root.\n\t\tif ( parent.parent === null && position.offset === 0 ) {\n\t\t\treturn { done: true };\n\t\t}\n\n\t\t// We reached the walker boundary.\n\t\tif ( parent == this._boundaryStartParent && position.offset == this.boundaries.start.offset ) {\n\t\t\treturn { done: true };\n\t\t}\n\n\t\t// Get node just before current position.\n\t\tlet node;\n\n\t\t// Text {@link module:engine/view/text~Text} element is a specific parent because contains string instead of child nodes.\n\t\tif ( parent instanceof Text ) {\n\t\t\tif ( position.isAtStart ) {\n\t\t\t\t// Prevent returning \"elementStart\" for Text node. Skip that value and return the next walker step.\n\t\t\t\tthis.position = Position._createBefore( parent );\n\n\t\t\t\treturn this._previous();\n\t\t\t}\n\n\t\t\tnode = parent.data[ position.offset - 1 ];\n\t\t} else {\n\t\t\tnode = parent.getChild( position.offset - 1 );\n\t\t}\n\n\t\tif ( node instanceof Element ) {\n\t\t\tif ( !this.shallow ) {\n\t\t\t\tposition = new Position( node, node.childCount );\n\t\t\t\tthis.position = position;\n\n\t\t\t\tif ( this.ignoreElementEnd ) {\n\t\t\t\t\treturn this._previous();\n\t\t\t\t} else {\n\t\t\t\t\treturn this._formatReturnValue( 'elementEnd', node, previousPosition, position );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tposition.offset--;\n\t\t\t\tthis.position = position;\n\n\t\t\t\treturn this._formatReturnValue( 'elementStart', node, previousPosition, position, 1 );\n\t\t\t}\n\t\t} else if ( node instanceof Text ) {\n\t\t\tif ( this.singleCharacters ) {\n\t\t\t\tposition = new Position( node, node.data.length );\n\t\t\t\tthis.position = position;\n\n\t\t\t\treturn this._previous();\n\t\t\t} else {\n\t\t\t\tlet charactersCount = node.data.length;\n\t\t\t\tlet item;\n\n\t\t\t\t// If text stick out of walker range, we need to cut it and wrap in TextProxy.\n\t\t\t\tif ( node == this._boundaryStartParent ) {\n\t\t\t\t\tconst offset = this.boundaries.start.offset;\n\n\t\t\t\t\titem = new TextProxy( node, offset, node.data.length - offset );\n\t\t\t\t\tcharactersCount = item.data.length;\n\t\t\t\t\tposition = Position._createBefore( item );\n\t\t\t\t} else {\n\t\t\t\t\titem = new TextProxy( node, 0, node.data.length );\n\t\t\t\t\t// If not just keep moving backward.\n\t\t\t\t\tposition.offset--;\n\t\t\t\t}\n\n\t\t\t\tthis.position = position;\n\n\t\t\t\treturn this._formatReturnValue( 'text', item, previousPosition, position, charactersCount );\n\t\t\t}\n\t\t} else if ( typeof node == 'string' ) {\n\t\t\tlet textLength;\n\n\t\t\tif ( !this.singleCharacters ) {\n\t\t\t\t// Check if text stick out of walker range.\n\t\t\t\tconst startOffset = parent === this._boundaryStartParent ? this.boundaries.start.offset : 0;\n\n\t\t\t\ttextLength = position.offset - startOffset;\n\t\t\t} else {\n\t\t\t\ttextLength = 1;\n\t\t\t}\n\n\t\t\tposition.offset -= textLength;\n\n\t\t\tconst textProxy = new TextProxy( parent, position.offset, textLength );\n\n\t\t\tthis.position = position;\n\n\t\t\treturn this._formatReturnValue( 'text', textProxy, previousPosition, position, textLength );\n\t\t} else {\n\t\t\t// `node` is not set, we reached the beginning of current `parent`.\n\t\t\tposition = Position._createBefore( parent );\n\t\t\tthis.position = position;\n\n\t\t\treturn this._formatReturnValue( 'elementStart', parent, previousPosition, position, 1 );\n\t\t}\n\t}\n\n\t/**\n\t * Format returned data and adjust `previousPosition` and `nextPosition` if reach the bound of the {@link module:engine/view/text~Text}.\n\t *\n\t * @private\n\t * @param {module:engine/view/treewalker~TreeWalkerValueType} type Type of step.\n\t * @param {module:engine/view/item~Item} item Item between old and new position.\n\t * @param {module:engine/view/position~Position} previousPosition Previous position of iterator.\n\t * @param {module:engine/view/position~Position} nextPosition Next position of iterator.\n\t * @param {Number} [length] Length of the item.\n\t * @returns {module:engine/view/treewalker~TreeWalkerValue}\n\t */\n\t_formatReturnValue( type, item, previousPosition, nextPosition, length ) {\n\t\t// Text is a specific parent, because contains string instead of children.\n\t\t// Walker doesn't enter to the Text except situations when walker is iterating over every single character,\n\t\t// or the bound starts/ends inside the Text. So when the position is at the beginning or at the end of the Text\n\t\t// we move it just before or just after Text.\n\t\tif ( item instanceof TextProxy ) {\n\t\t\t// Position is at the end of Text.\n\t\t\tif ( item.offsetInText + item.data.length == item.textNode.data.length ) {\n\t\t\t\tif ( this.direction == 'forward' && !( this.boundaries && this.boundaries.end.isEqual( this.position ) ) ) {\n\t\t\t\t\tnextPosition = Position._createAfter( item.textNode );\n\t\t\t\t\t// When we change nextPosition of returned value we need also update walker current position.\n\t\t\t\t\tthis.position = nextPosition;\n\t\t\t\t} else {\n\t\t\t\t\tpreviousPosition = Position._createAfter( item.textNode );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Position is at the begining ot the text.\n\t\t\tif ( item.offsetInText === 0 ) {\n\t\t\t\tif ( this.direction == 'backward' && !( this.boundaries && this.boundaries.start.isEqual( this.position ) ) ) {\n\t\t\t\t\tnextPosition = Position._createBefore( item.textNode );\n\t\t\t\t\t// When we change nextPosition of returned value we need also update walker current position.\n\t\t\t\t\tthis.position = nextPosition;\n\t\t\t\t} else {\n\t\t\t\t\tpreviousPosition = Position._createBefore( item.textNode );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tdone: false,\n\t\t\tvalue: {\n\t\t\t\ttype,\n\t\t\t\titem,\n\t\t\t\tpreviousPosition,\n\t\t\t\tnextPosition,\n\t\t\t\tlength\n\t\t\t}\n\t\t};\n\t}\n}\n\n/**\n * Type of the step made by {@link module:engine/view/treewalker~TreeWalker}.\n * Possible values: `'elementStart'` if walker is at the beginning of a node, `'elementEnd'` if walker is at the end\n * of node, or `'text'` if walker traversed over single and multiple characters.\n * For {@link module:engine/view/text~Text} `elementStart` and `elementEnd` is not returned.\n *\n * @typedef {String} module:engine/view/treewalker~TreeWalkerValueType\n */\n\n/**\n * Object returned by {@link module:engine/view/treewalker~TreeWalker} when traversing tree view.\n *\n * @typedef {Object} module:engine/view/treewalker~TreeWalkerValue\n * @property {module:engine/view/treewalker~TreeWalkerValueType} type\n * @property {module:engine/view/item~Item} item Item between the old and the new positions\n * of the tree walker.\n * @property {module:engine/view/position~Position} previousPosition Previous position of the iterator.\n * * Forward iteration: For `'elementEnd'` it is the last position inside the element. For all other types it is the\n * position before the item.\n * * Backward iteration: For `'elementStart'` it is the first position inside the element. For all other types it is\n * the position after item.\n * * If the position is at the beginning or at the end of the {@link module:engine/view/text~Text} it is always moved from the\n * inside of the text to its parent just before or just after that text.\n * @property {module:engine/view/position~Position} nextPosition Next position of the iterator.\n * * Forward iteration: For `'elementStart'` it is the first position inside the element. For all other types it is\n * the position after the item.\n * * Backward iteration: For `'elementEnd'` it is last position inside element. For all other types it is the position\n * before the item.\n * * If the position is at the beginning or at the end of the {@link module:engine/view/text~Text} it is always moved from the\n * inside of the text to its parent just before or just after that text.\n * @property {Number} [length] Length of the item. For `'elementStart'` it is `1`. For `'text'` it is\n * the length of that text. For `'elementEnd'` it is `undefined`.\n */\n\n/**\n * Tree walking directions.\n *\n * @typedef {'forward'|'backward'} module:engine/view/treewalker~TreeWalkerDirection\n */\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/position\n */\n\nimport TreeWalker from './treewalker';\n\nimport compareArrays from '@ckeditor/ckeditor5-utils/src/comparearrays';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport EditableElement from './editableelement';\n\n// To check if component is loaded more than once.\nimport '@ckeditor/ckeditor5-utils/src/version';\n\n/**\n * Position in the view tree. Position is represented by its parent node and an offset in this parent.\n *\n * In order to create a new position instance use the `createPosition*()` factory methods available in:\n *\n * * {@link module:engine/view/view~View}\n * * {@link module:engine/view/downcastwriter~DowncastWriter}\n * * {@link module:engine/view/upcastwriter~UpcastWriter}\n */\nexport default class Position {\n\t/**\n\t * Creates a position.\n\t *\n\t * @param {module:engine/view/node~Node|module:engine/view/documentfragment~DocumentFragment} parent Position parent.\n\t * @param {Number} offset Position offset.\n\t */\n\tconstructor( parent, offset ) {\n\t\t/**\n\t\t * Position parent.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/node~Node|module:engine/view/documentfragment~DocumentFragment}\n\t\t * module:engine/view/position~Position#parent\n\t\t */\n\t\tthis.parent = parent;\n\n\t\t/**\n\t\t * Position offset.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Number} module:engine/view/position~Position#offset\n\t\t */\n\t\tthis.offset = offset;\n\t}\n\n\t/**\n\t * Node directly after the position. Equals `null` when there is no node after position or position is located\n\t * inside text node.\n\t *\n\t * @readonly\n\t * @type {module:engine/view/node~Node|null}\n\t */\n\tget nodeAfter() {\n\t\tif ( this.parent.is( '$text' ) ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this.parent.getChild( this.offset ) || null;\n\t}\n\n\t/**\n\t * Node directly before the position. Equals `null` when there is no node before position or position is located\n\t * inside text node.\n\t *\n\t * @readonly\n\t * @type {module:engine/view/node~Node|null}\n\t */\n\tget nodeBefore() {\n\t\tif ( this.parent.is( '$text' ) ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this.parent.getChild( this.offset - 1 ) || null;\n\t}\n\n\t/**\n\t * Is `true` if position is at the beginning of its {@link module:engine/view/position~Position#parent parent}, `false` otherwise.\n\t *\n\t * @readonly\n\t * @type {Boolean}\n\t */\n\tget isAtStart() {\n\t\treturn this.offset === 0;\n\t}\n\n\t/**\n\t * Is `true` if position is at the end of its {@link module:engine/view/position~Position#parent parent}, `false` otherwise.\n\t *\n\t * @readonly\n\t * @type {Boolean}\n\t */\n\tget isAtEnd() {\n\t\tconst endOffset = this.parent.is( '$text' ) ? this.parent.data.length : this.parent.childCount;\n\n\t\treturn this.offset === endOffset;\n\t}\n\n\t/**\n\t * Position's root, that is the root of the position's parent element.\n\t *\n\t * @readonly\n\t * @type {module:engine/view/node~Node|module:engine/view/documentfragment~DocumentFragment}\n\t */\n\tget root() {\n\t\treturn this.parent.root;\n\t}\n\n\t/**\n\t * {@link module:engine/view/editableelement~EditableElement EditableElement} instance that contains this position, or `null` if\n\t * position is not inside an editable element.\n\t *\n\t * @type {module:engine/view/editableelement~EditableElement|null}\n\t */\n\tget editableElement() {\n\t\tlet editable = this.parent;\n\n\t\twhile ( !( editable instanceof EditableElement ) ) {\n\t\t\tif ( editable.parent ) {\n\t\t\t\teditable = editable.parent;\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\n\t\treturn editable;\n\t}\n\n\t/**\n\t * Returns a new instance of Position with offset incremented by `shift` value.\n\t *\n\t * @param {Number} shift How position offset should get changed. Accepts negative values.\n\t * @returns {module:engine/view/position~Position} Shifted position.\n\t */\n\tgetShiftedBy( shift ) {\n\t\tconst shifted = Position._createAt( this );\n\n\t\tconst offset = shifted.offset + shift;\n\t\tshifted.offset = offset < 0 ? 0 : offset;\n\n\t\treturn shifted;\n\t}\n\n\t/**\n\t * Gets the farthest position which matches the callback using\n\t * {@link module:engine/view/treewalker~TreeWalker TreeWalker}.\n\t *\n\t * For example:\n\t *\n\t * \t\tgetLastMatchingPosition( value => value.type == 'text' ); // <p>{}foo</p> -> <p>foo[]</p>\n\t * \t\tgetLastMatchingPosition( value => value.type == 'text', { direction: 'backward' } ); // <p>foo[]</p> -> <p>{}foo</p>\n\t * \t\tgetLastMatchingPosition( value => false ); // Do not move the position.\n\t *\n\t * @param {Function} skip Callback function. Gets {@link module:engine/view/treewalker~TreeWalkerValue} and should\n\t * return `true` if the value should be skipped or `false` if not.\n\t * @param {Object} options Object with configuration options. See {@link module:engine/view/treewalker~TreeWalker}.\n\t *\n\t * @returns {module:engine/view/position~Position} The position after the last item which matches the `skip` callback test.\n\t */\n\tgetLastMatchingPosition( skip, options = {} ) {\n\t\toptions.startPosition = this;\n\n\t\tconst treeWalker = new TreeWalker( options );\n\t\ttreeWalker.skip( skip );\n\n\t\treturn treeWalker.position;\n\t}\n\n\t/**\n\t * Returns ancestors array of this position, that is this position's parent and it's ancestors.\n\t *\n\t * @returns {Array} Array with ancestors.\n\t */\n\tgetAncestors() {\n\t\tif ( this.parent.is( 'documentFragment' ) ) {\n\t\t\treturn [ this.parent ];\n\t\t} else {\n\t\t\treturn this.parent.getAncestors( { includeSelf: true } );\n\t\t}\n\t}\n\n\t/**\n\t * Returns a {@link module:engine/view/node~Node} or {@link module:engine/view/documentfragment~DocumentFragment}\n\t * which is a common ancestor of both positions.\n\t *\n\t * @param {module:engine/view/position~Position} position\n\t * @returns {module:engine/view/node~Node|module:engine/view/documentfragment~DocumentFragment|null}\n\t */\n\tgetCommonAncestor( position ) {\n\t\tconst ancestorsA = this.getAncestors();\n\t\tconst ancestorsB = position.getAncestors();\n\n\t\tlet i = 0;\n\n\t\twhile ( ancestorsA[ i ] == ancestorsB[ i ] && ancestorsA[ i ] ) {\n\t\t\ti++;\n\t\t}\n\n\t\treturn i === 0 ? null : ancestorsA[ i - 1 ];\n\t}\n\n\t/**\n\t * Checks whether this object is of the given type.\n\t *\n\t *\t\tposition.is( 'position' ); // -> true\n\t *\t\tposition.is( 'view:position' ); // -> true\n\t *\n\t *\t\tposition.is( 'model:position' ); // -> false\n\t *\t\tposition.is( 'element' ); // -> false\n\t *\t\tposition.is( 'range' ); // -> false\n\t *\n\t * {@link module:engine/view/node~Node#is Check the entire list of view objects} which implement the `is()` method.\n\t *\n\t * @param {String} type\n\t * @returns {Boolean}\n\t */\n\tis( type ) {\n\t\treturn type === 'position' || type === 'view:position';\n\t}\n\n\t/**\n\t * Checks whether this position equals given position.\n\t *\n\t * @param {module:engine/view/position~Position} otherPosition Position to compare with.\n\t * @returns {Boolean} True if positions are same.\n\t */\n\tisEqual( otherPosition ) {\n\t\treturn ( this.parent == otherPosition.parent && this.offset == otherPosition.offset );\n\t}\n\n\t/**\n\t * Checks whether this position is located before given position. When method returns `false` it does not mean that\n\t * this position is after give one. Two positions may be located inside separate roots and in that situation this\n\t * method will still return `false`.\n\t *\n\t * @see module:engine/view/position~Position#isAfter\n\t * @see module:engine/view/position~Position#compareWith\n\t * @param {module:engine/view/position~Position} otherPosition Position to compare with.\n\t * @returns {Boolean} Returns `true` if this position is before given position.\n\t */\n\tisBefore( otherPosition ) {\n\t\treturn this.compareWith( otherPosition ) == 'before';\n\t}\n\n\t/**\n\t * Checks whether this position is located after given position. When method returns `false` it does not mean that\n\t * this position is before give one. Two positions may be located inside separate roots and in that situation this\n\t * method will still return `false`.\n\t *\n\t * @see module:engine/view/position~Position#isBefore\n\t * @see module:engine/view/position~Position#compareWith\n\t * @param {module:engine/view/position~Position} otherPosition Position to compare with.\n\t * @returns {Boolean} Returns `true` if this position is after given position.\n\t */\n\tisAfter( otherPosition ) {\n\t\treturn this.compareWith( otherPosition ) == 'after';\n\t}\n\n\t/**\n\t * Checks whether this position is before, after or in same position that other position. Two positions may be also\n\t * different when they are located in separate roots.\n\t *\n\t * @param {module:engine/view/position~Position} otherPosition Position to compare with.\n\t * @returns {module:engine/view/position~PositionRelation}\n\t */\n\tcompareWith( otherPosition ) {\n\t\tif ( this.root !== otherPosition.root ) {\n\t\t\treturn 'different';\n\t\t}\n\n\t\tif ( this.isEqual( otherPosition ) ) {\n\t\t\treturn 'same';\n\t\t}\n\n\t\t// Get path from root to position's parent element.\n\t\tconst thisPath = this.parent.is( 'node' ) ? this.parent.getPath() : [];\n\t\tconst otherPath = otherPosition.parent.is( 'node' ) ? otherPosition.parent.getPath() : [];\n\n\t\t// Add the positions' offsets to the parents offsets.\n\t\tthisPath.push( this.offset );\n\t\totherPath.push( otherPosition.offset );\n\n\t\t// Compare both path arrays to find common ancestor.\n\t\tconst result = compareArrays( thisPath, otherPath );\n\n\t\tswitch ( result ) {\n\t\t\tcase 'prefix':\n\t\t\t\treturn 'before';\n\n\t\t\tcase 'extension':\n\t\t\t\treturn 'after';\n\n\t\t\tdefault:\n\t\t\t\treturn thisPath[ result ] < otherPath[ result ] ? 'before' : 'after';\n\t\t}\n\t}\n\n\t/**\n\t * Creates a {@link module:engine/view/treewalker~TreeWalker TreeWalker} instance with this positions as a start position.\n\t *\n\t * @param {Object} options Object with configuration options. See {@link module:engine/view/treewalker~TreeWalker}\n\t * @param {module:engine/view/range~Range} [options.boundaries=null] Range to define boundaries of the iterator.\n\t * @param {Boolean} [options.singleCharacters=false]\n\t * @param {Boolean} [options.shallow=false]\n\t * @param {Boolean} [options.ignoreElementEnd=false]\n\t */\n\tgetWalker( options = {} ) {\n\t\toptions.startPosition = this;\n\n\t\treturn new TreeWalker( options );\n\t}\n\n\tclone() {\n\t\treturn new Position( this.parent, this.offset );\n\t}\n\n\t/**\n\t * Creates position at the given location. The location can be specified as:\n\t *\n\t * * a {@link module:engine/view/position~Position position},\n\t * * parent element and offset (offset defaults to `0`),\n\t * * parent element and `'end'` (sets position at the end of that element),\n\t * * {@link module:engine/view/item~Item view item} and `'before'` or `'after'` (sets position before or after given view item).\n\t *\n\t * This method is a shortcut to other constructors such as:\n\t *\n\t * * {@link module:engine/view/position~Position._createBefore},\n\t * * {@link module:engine/view/position~Position._createAfter}.\n\t *\n\t * @protected\n\t * @param {module:engine/view/item~Item|module:engine/view/position~Position} itemOrPosition\n\t * @param {Number|'end'|'before'|'after'} [offset] Offset or one of the flags. Used only when\n\t * first parameter is a {@link module:engine/view/item~Item view item}.\n\t */\n\tstatic _createAt( itemOrPosition, offset ) {\n\t\tif ( itemOrPosition instanceof Position ) {\n\t\t\treturn new this( itemOrPosition.parent, itemOrPosition.offset );\n\t\t} else {\n\t\t\tconst node = itemOrPosition;\n\n\t\t\tif ( offset == 'end' ) {\n\t\t\t\toffset = node.is( '$text' ) ? node.data.length : node.childCount;\n\t\t\t} else if ( offset == 'before' ) {\n\t\t\t\treturn this._createBefore( node );\n\t\t\t} else if ( offset == 'after' ) {\n\t\t\t\treturn this._createAfter( node );\n\t\t\t} else if ( offset !== 0 && !offset ) {\n\t\t\t\t/**\n\t\t\t\t * {@link module:engine/view/view~View#createPositionAt `View#createPositionAt()`}\n\t\t\t\t * requires the offset to be specified when the first parameter is a view item.\n\t\t\t\t *\n\t\t\t\t * @error view-createpositionat-offset-required\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError( 'view-createpositionat-offset-required', node );\n\t\t\t}\n\n\t\t\treturn new Position( node, offset );\n\t\t}\n\t}\n\n\t/**\n\t * Creates a new position after given view item.\n\t *\n\t * @protected\n\t * @param {module:engine/view/item~Item} item View item after which the position should be located.\n\t * @returns {module:engine/view/position~Position}\n\t */\n\tstatic _createAfter( item ) {\n\t\t// TextProxy is not a instance of Node so we need do handle it in specific way.\n\t\tif ( item.is( '$textProxy' ) ) {\n\t\t\treturn new Position( item.textNode, item.offsetInText + item.data.length );\n\t\t}\n\n\t\tif ( !item.parent ) {\n\t\t\t/**\n\t\t\t * You can not make a position after a root.\n\t\t\t *\n\t\t\t * @error view-position-after-root\n\t\t\t * @param {module:engine/view/node~Node} root\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'view-position-after-root', item, { root: item } );\n\t\t}\n\n\t\treturn new Position( item.parent, item.index + 1 );\n\t}\n\n\t/**\n\t * Creates a new position before given view item.\n\t *\n\t * @protected\n\t * @param {module:engine/view/item~Item} item View item before which the position should be located.\n\t * @returns {module:engine/view/position~Position}\n\t */\n\tstatic _createBefore( item ) {\n\t\t// TextProxy is not a instance of Node so we need do handle it in specific way.\n\t\tif ( item.is( '$textProxy' ) ) {\n\t\t\treturn new Position( item.textNode, item.offsetInText );\n\t\t}\n\n\t\tif ( !item.parent ) {\n\t\t\t/**\n\t\t\t * You cannot make a position before a root.\n\t\t\t *\n\t\t\t * @error view-position-before-root\n\t\t\t * @param {module:engine/view/node~Node} root\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'view-position-before-root', item, { root: item } );\n\t\t}\n\n\t\treturn new Position( item.parent, item.index );\n\t}\n}\n\n/**\n * A flag indicating whether this position is `'before'` or `'after'` or `'same'` as given position.\n * If positions are in different roots `'different'` flag is returned.\n *\n * @typedef {String} module:engine/view/position~PositionRelation\n */\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/range\n */\n\nimport Position from './position';\nimport TreeWalker from './treewalker';\n\n/**\n * Range in the view tree. A range is represented by its start and end {@link module:engine/view/position~Position positions}.\n *\n * In order to create a new position instance use the `createPosition*()` factory methods available in:\n *\n * * {@link module:engine/view/view~View}\n * * {@link module:engine/view/downcastwriter~DowncastWriter}\n * * {@link module:engine/view/upcastwriter~UpcastWriter}\n */\nexport default class Range {\n\t/**\n\t * Creates a range spanning from `start` position to `end` position.\n\t *\n\t * **Note:** Constructor creates it's own {@link module:engine/view/position~Position} instances basing on passed values.\n\t *\n\t * @param {module:engine/view/position~Position} start Start position.\n\t * @param {module:engine/view/position~Position} [end] End position. If not set, range will be collapsed at the `start` position.\n\t */\n\tconstructor( start, end = null ) {\n\t\t/**\n\t\t * Start position.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/position~Position}\n\t\t */\n\t\tthis.start = start.clone();\n\n\t\t/**\n\t\t * End position.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/position~Position}\n\t\t */\n\t\tthis.end = end ? end.clone() : start.clone();\n\t}\n\n\t/**\n\t * Iterable interface.\n\t *\n\t * Iterates over all {@link module:engine/view/item~Item view items} that are in this range and returns\n\t * them together with additional information like length or {@link module:engine/view/position~Position positions},\n\t * grouped as {@link module:engine/view/treewalker~TreeWalkerValue}.\n\t *\n\t * This iterator uses {@link module:engine/view/treewalker~TreeWalker TreeWalker} with `boundaries` set to this range and\n\t * `ignoreElementEnd` option\n\t * set to `true`.\n\t *\n\t * @returns {Iterable.<module:engine/view/treewalker~TreeWalkerValue>}\n\t */\n\t* [ Symbol.iterator ]() {\n\t\tyield* new TreeWalker( { boundaries: this, ignoreElementEnd: true } );\n\t}\n\n\t/**\n\t * Returns whether the range is collapsed, that is it start and end positions are equal.\n\t *\n\t * @type {Boolean}\n\t */\n\tget isCollapsed() {\n\t\treturn this.start.isEqual( this.end );\n\t}\n\n\t/**\n\t * Returns whether this range is flat, that is if {@link module:engine/view/range~Range#start start} position and\n\t * {@link module:engine/view/range~Range#end end} position are in the same {@link module:engine/view/position~Position#parent parent}.\n\t *\n\t * @type {Boolean}\n\t */\n\tget isFlat() {\n\t\treturn this.start.parent === this.end.parent;\n\t}\n\n\t/**\n\t * Range root element.\n\t *\n\t * @type {module:engine/view/element~Element|module:engine/view/documentfragment~DocumentFragment}\n\t */\n\tget root() {\n\t\treturn this.start.root;\n\t}\n\n\t/**\n\t * Creates a maximal range that has the same content as this range but is expanded in both ways (at the beginning\n\t * and at the end).\n\t *\n\t * For example:\n\t *\n\t *\t\t<p>Foo</p><p><b>{Bar}</b></p> -> <p>Foo</p>[<p><b>Bar</b>]</p>\n\t *\t\t<p><b>foo</b>{bar}<span></span></p> -> <p><b>foo[</b>bar<span></span>]</p>\n\t *\n\t * Note that in the sample above:\n\t *\n\t * - `<p>` have type of {@link module:engine/view/containerelement~ContainerElement},\n\t * - `<b>` have type of {@link module:engine/view/attributeelement~AttributeElement},\n\t * - `<span>` have type of {@link module:engine/view/uielement~UIElement}.\n\t *\n\t * @returns {module:engine/view/range~Range} Enlarged range.\n\t */\n\tgetEnlarged() {\n\t\tlet start = this.start.getLastMatchingPosition( enlargeTrimSkip, { direction: 'backward' } );\n\t\tlet end = this.end.getLastMatchingPosition( enlargeTrimSkip );\n\n\t\t// Fix positions, in case if they are in Text node.\n\t\tif ( start.parent.is( '$text' ) && start.isAtStart ) {\n\t\t\tstart = Position._createBefore( start.parent );\n\t\t}\n\n\t\tif ( end.parent.is( '$text' ) && end.isAtEnd ) {\n\t\t\tend = Position._createAfter( end.parent );\n\t\t}\n\n\t\treturn new Range( start, end );\n\t}\n\n\t/**\n\t * Creates a minimum range that has the same content as this range but is trimmed in both ways (at the beginning\n\t * and at the end).\n\t *\n\t * For example:\n\t *\n\t *\t\t<p>Foo</p>[<p><b>Bar</b>]</p> -> <p>Foo</p><p><b>{Bar}</b></p>\n\t *\t\t<p><b>foo[</b>bar<span></span>]</p> -> <p><b>foo</b>{bar}<span></span></p>\n\t *\n\t * Note that in the sample above:\n\t *\n\t * - `<p>` have type of {@link module:engine/view/containerelement~ContainerElement},\n\t * - `<b>` have type of {@link module:engine/view/attributeelement~AttributeElement},\n\t * - `<span>` have type of {@link module:engine/view/uielement~UIElement}.\n\t *\n\t * @returns {module:engine/view/range~Range} Shrink range.\n\t */\n\tgetTrimmed() {\n\t\tlet start = this.start.getLastMatchingPosition( enlargeTrimSkip );\n\n\t\tif ( start.isAfter( this.end ) || start.isEqual( this.end ) ) {\n\t\t\treturn new Range( start, start );\n\t\t}\n\n\t\tlet end = this.end.getLastMatchingPosition( enlargeTrimSkip, { direction: 'backward' } );\n\t\tconst nodeAfterStart = start.nodeAfter;\n\t\tconst nodeBeforeEnd = end.nodeBefore;\n\n\t\t// Because TreeWalker prefers positions next to text node, we need to move them manually into these text nodes.\n\t\tif ( nodeAfterStart && nodeAfterStart.is( '$text' ) ) {\n\t\t\tstart = new Position( nodeAfterStart, 0 );\n\t\t}\n\n\t\tif ( nodeBeforeEnd && nodeBeforeEnd.is( '$text' ) ) {\n\t\t\tend = new Position( nodeBeforeEnd, nodeBeforeEnd.data.length );\n\t\t}\n\n\t\treturn new Range( start, end );\n\t}\n\n\t/**\n\t * Two ranges are equal if their start and end positions are equal.\n\t *\n\t * @param {module:engine/view/range~Range} otherRange Range to compare with.\n\t * @returns {Boolean} `true` if ranges are equal, `false` otherwise\n\t */\n\tisEqual( otherRange ) {\n\t\treturn this == otherRange || ( this.start.isEqual( otherRange.start ) && this.end.isEqual( otherRange.end ) );\n\t}\n\n\t/**\n\t * Checks whether this range contains given {@link module:engine/view/position~Position position}.\n\t *\n\t * @param {module:engine/view/position~Position} position Position to check.\n\t * @returns {Boolean} `true` if given {@link module:engine/view/position~Position position} is contained in this range,\n\t * `false` otherwise.\n\t */\n\tcontainsPosition( position ) {\n\t\treturn position.isAfter( this.start ) && position.isBefore( this.end );\n\t}\n\n\t/**\n\t * Checks whether this range contains given {@link module:engine/view/range~Range range}.\n\t *\n\t * @param {module:engine/view/range~Range} otherRange Range to check.\n\t * @param {Boolean} [loose=false] Whether the check is loose or strict. If the check is strict (`false`), compared range cannot\n\t * start or end at the same position as this range boundaries. If the check is loose (`true`), compared range can start, end or\n\t * even be equal to this range. Note that collapsed ranges are always compared in strict mode.\n\t * @returns {Boolean} `true` if given {@link module:engine/view/range~Range range} boundaries are contained by this range, `false`\n\t * otherwise.\n\t */\n\tcontainsRange( otherRange, loose = false ) {\n\t\tif ( otherRange.isCollapsed ) {\n\t\t\tloose = false;\n\t\t}\n\n\t\tconst containsStart = this.containsPosition( otherRange.start ) || ( loose && this.start.isEqual( otherRange.start ) );\n\t\tconst containsEnd = this.containsPosition( otherRange.end ) || ( loose && this.end.isEqual( otherRange.end ) );\n\n\t\treturn containsStart && containsEnd;\n\t}\n\n\t/**\n\t * Computes which part(s) of this {@link module:engine/view/range~Range range} is not a part of given\n\t * {@link module:engine/view/range~Range range}.\n\t * Returned array contains zero, one or two {@link module:engine/view/range~Range ranges}.\n\t *\n\t * Examples:\n\t *\n\t *\t\tlet foo = downcastWriter.createText( 'foo' );\n\t *\t\tlet img = downcastWriter.createContainerElement( 'img' );\n\t *\t\tlet bar = downcastWriter.createText( 'bar' );\n\t *\t\tlet p = downcastWriter.createContainerElement( 'p', null, [ foo, img, bar ] );\n\t *\n\t *\t\tlet range = view.createRange( view.createPositionAt( foo, 2 ), view.createPositionAt( bar, 1 ); // \"o\", img, \"b\" are in range.\n\t *\t\tlet otherRange = view.createRange( // \"oo\", img, \"ba\" are in range.\n\t *\t\t\tview.createPositionAt( foo, 1 ),\n\t *\t\t\tview.createPositionAt( bar, 2 )\n\t *\t\t);\n\t *\t\tlet transformed = range.getDifference( otherRange );\n\t *\t\t// transformed array has no ranges because `otherRange` contains `range`\n\t *\n\t *\t\totherRange = view.createRange( view.createPositionAt( foo, 1 ), view.createPositionAt( p, 2 ); // \"oo\", img are in range.\n\t *\t\ttransformed = range.getDifference( otherRange );\n\t *\t\t// transformed array has one range: from ( p, 2 ) to ( bar, 1 )\n\t *\n\t *\t\totherRange = view.createRange( view.createPositionAt( p, 1 ), view.createPositionAt( p, 2 ) ); // img is in range.\n\t *\t\ttransformed = range.getDifference( otherRange );\n\t *\t\t// transformed array has two ranges: from ( foo, 1 ) to ( p, 1 ) and from ( p, 2 ) to ( bar, 1 )\n\t *\n\t * @param {module:engine/view/range~Range} otherRange Range to differentiate against.\n\t * @returns {Array.<module:engine/view/range~Range>} The difference between ranges.\n\t */\n\tgetDifference( otherRange ) {\n\t\tconst ranges = [];\n\n\t\tif ( this.isIntersecting( otherRange ) ) {\n\t\t\t// Ranges intersect.\n\n\t\t\tif ( this.containsPosition( otherRange.start ) ) {\n\t\t\t\t// Given range start is inside this range. This means that we have to\n\t\t\t\t// add shrunken range - from the start to the middle of this range.\n\t\t\t\tranges.push( new Range( this.start, otherRange.start ) );\n\t\t\t}\n\n\t\t\tif ( this.containsPosition( otherRange.end ) ) {\n\t\t\t\t// Given range end is inside this range. This means that we have to\n\t\t\t\t// add shrunken range - from the middle of this range to the end.\n\t\t\t\tranges.push( new Range( otherRange.end, this.end ) );\n\t\t\t}\n\t\t} else {\n\t\t\t// Ranges do not intersect, return the original range.\n\t\t\tranges.push( this.clone() );\n\t\t}\n\n\t\treturn ranges;\n\t}\n\n\t/**\n\t * Returns an intersection of this {@link module:engine/view/range~Range range} and given {@link module:engine/view/range~Range range}.\n\t * Intersection is a common part of both of those ranges. If ranges has no common part, returns `null`.\n\t *\n\t * Examples:\n\t *\n\t *\t\tlet foo = downcastWriter.createText( 'foo' );\n\t *\t\tlet img = downcastWriter.createContainerElement( 'img' );\n\t *\t\tlet bar = downcastWriter.createText( 'bar' );\n\t *\t\tlet p = downcastWriter.createContainerElement( 'p', null, [ foo, img, bar ] );\n\t *\n\t *\t\tlet range = view.createRange( view.createPositionAt( foo, 2 ), view.createPositionAt( bar, 1 ); // \"o\", img, \"b\" are in range.\n\t *\t\tlet otherRange = view.createRange( view.createPositionAt( foo, 1 ), view.createPositionAt( p, 2 ); // \"oo\", img are in range.\n\t *\t\tlet transformed = range.getIntersection( otherRange ); // range from ( foo, 1 ) to ( p, 2 ).\n\t *\n\t *\t\totherRange = view.createRange( view.createPositionAt( bar, 1 ), view.createPositionAt( bar, 3 ); \"ar\" is in range.\n\t *\t\ttransformed = range.getIntersection( otherRange ); // null - no common part.\n\t *\n\t * @param {module:engine/view/range~Range} otherRange Range to check for intersection.\n\t * @returns {module:engine/view/range~Range|null} A common part of given ranges or `null` if ranges have no common part.\n\t */\n\tgetIntersection( otherRange ) {\n\t\tif ( this.isIntersecting( otherRange ) ) {\n\t\t\t// Ranges intersect, so a common range will be returned.\n\t\t\t// At most, it will be same as this range.\n\t\t\tlet commonRangeStart = this.start;\n\t\t\tlet commonRangeEnd = this.end;\n\n\t\t\tif ( this.containsPosition( otherRange.start ) ) {\n\t\t\t\t// Given range start is inside this range. This means thaNt we have to\n\t\t\t\t// shrink common range to the given range start.\n\t\t\t\tcommonRangeStart = otherRange.start;\n\t\t\t}\n\n\t\t\tif ( this.containsPosition( otherRange.end ) ) {\n\t\t\t\t// Given range end is inside this range. This means that we have to\n\t\t\t\t// shrink common range to the given range end.\n\t\t\t\tcommonRangeEnd = otherRange.end;\n\t\t\t}\n\n\t\t\treturn new Range( commonRangeStart, commonRangeEnd );\n\t\t}\n\n\t\t// Ranges do not intersect, so they do not have common part.\n\t\treturn null;\n\t}\n\n\t/**\n\t * Creates a {@link module:engine/view/treewalker~TreeWalker TreeWalker} instance with this range as a boundary.\n\t *\n\t * @param {Object} options Object with configuration options. See {@link module:engine/view/treewalker~TreeWalker}.\n\t * @param {module:engine/view/position~Position} [options.startPosition]\n\t * @param {Boolean} [options.singleCharacters=false]\n\t * @param {Boolean} [options.shallow=false]\n\t * @param {Boolean} [options.ignoreElementEnd=false]\n\t * @returns {module:engine/view/treewalker~TreeWalker}\n\t */\n\tgetWalker( options = {} ) {\n\t\toptions.boundaries = this;\n\n\t\treturn new TreeWalker( options );\n\t}\n\n\t/**\n\t * Returns a {@link module:engine/view/node~Node} or {@link module:engine/view/documentfragment~DocumentFragment}\n\t * which is a common ancestor of range's both ends (in which the entire range is contained).\n\t *\n\t * @returns {module:engine/view/node~Node|module:engine/view/documentfragment~DocumentFragment|null}\n\t */\n\tgetCommonAncestor() {\n\t\treturn this.start.getCommonAncestor( this.end );\n\t}\n\n\t/**\n\t * Returns an {@link module:engine/view/element~Element Element} contained by the range.\n\t * The element will be returned when it is the **only** node within the range and **fully–contained**\n\t * at the same time.\n\t *\n\t * @returns {module:engine/view/element~Element|null}\n\t */\n\tgetContainedElement() {\n\t\tif ( this.isCollapsed ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tlet nodeAfterStart = this.start.nodeAfter;\n\t\tlet nodeBeforeEnd = this.end.nodeBefore;\n\n\t\t// Handle the situation when the range position is at the beginning / at the end of a text node.\n\t\t// In such situation `.nodeAfter` and `.nodeBefore` are `null` but the range still might be spanning\n\t\t// over one element.\n\t\t//\n\t\t// <p>Foo{<span class=\"widget\"></span>}bar</p> vs <p>Foo[<span class=\"widget\"></span>]bar</p>\n\t\t//\n\t\t// These are basically the same range, only the difference is if the range position is at\n\t\t// at the end/at the beginning of a text node or just before/just after the text node.\n\t\t//\n\t\tif ( this.start.parent.is( '$text' ) && this.start.isAtEnd && this.start.parent.nextSibling ) {\n\t\t\tnodeAfterStart = this.start.parent.nextSibling;\n\t\t}\n\n\t\tif ( this.end.parent.is( '$text' ) && this.end.isAtStart && this.end.parent.previousSibling ) {\n\t\t\tnodeBeforeEnd = this.end.parent.previousSibling;\n\t\t}\n\n\t\tif ( nodeAfterStart && nodeAfterStart.is( 'element' ) && nodeAfterStart === nodeBeforeEnd ) {\n\t\t\treturn nodeAfterStart;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Clones this range.\n\t *\n\t * @returns {module:engine/view/range~Range}\n\t */\n\tclone() {\n\t\treturn new Range( this.start, this.end );\n\t}\n\n\t/**\n\t * Returns an iterator that iterates over all {@link module:engine/view/item~Item view items} that are in this range and returns\n\t * them.\n\t *\n\t * This method uses {@link module:engine/view/treewalker~TreeWalker} with `boundaries` set to this range and `ignoreElementEnd` option\n\t * set to `true`. However it returns only {@link module:engine/view/item~Item items},\n\t * not {@link module:engine/view/treewalker~TreeWalkerValue}.\n\t *\n\t * You may specify additional options for the tree walker. See {@link module:engine/view/treewalker~TreeWalker} for\n\t * a full list of available options.\n\t *\n\t * @param {Object} options Object with configuration options. See {@link module:engine/view/treewalker~TreeWalker}.\n\t * @returns {Iterable.<module:engine/view/item~Item>}\n\t */\n\t* getItems( options = {} ) {\n\t\toptions.boundaries = this;\n\t\toptions.ignoreElementEnd = true;\n\n\t\tconst treeWalker = new TreeWalker( options );\n\n\t\tfor ( const value of treeWalker ) {\n\t\t\tyield value.item;\n\t\t}\n\t}\n\n\t/**\n\t * Returns an iterator that iterates over all {@link module:engine/view/position~Position positions} that are boundaries or\n\t * contained in this range.\n\t *\n\t * This method uses {@link module:engine/view/treewalker~TreeWalker} with `boundaries` set to this range. However it returns only\n\t * {@link module:engine/view/position~Position positions}, not {@link module:engine/view/treewalker~TreeWalkerValue}.\n\t *\n\t * You may specify additional options for the tree walker. See {@link module:engine/view/treewalker~TreeWalker} for\n\t * a full list of available options.\n\t *\n\t * @param {Object} options Object with configuration options. See {@link module:engine/view/treewalker~TreeWalker}.\n\t * @returns {Iterable.<module:engine/view/position~Position>}\n\t */\n\t* getPositions( options = {} ) {\n\t\toptions.boundaries = this;\n\n\t\tconst treeWalker = new TreeWalker( options );\n\n\t\tyield treeWalker.position;\n\n\t\tfor ( const value of treeWalker ) {\n\t\t\tyield value.nextPosition;\n\t\t}\n\t}\n\n\t/**\n\t * Checks whether this object is of the given type.\n\t *\n\t *\t\trange.is( 'range' ); // -> true\n\t *\t\trange.is( 'view:range' ); // -> true\n\t *\n\t *\t\trange.is( 'model:range' ); // -> false\n\t *\t\trange.is( 'element' ); // -> false\n\t *\t\trange.is( 'selection' ); // -> false\n\t *\n\t * {@link module:engine/view/node~Node#is Check the entire list of view objects} which implement the `is()` method.\n\t *\n\t * @param {String} type\n\t * @returns {Boolean}\n\t */\n\tis( type ) {\n\t\treturn type === 'range' || type === 'view:range';\n\t}\n\n\t/**\n\t * Checks and returns whether this range intersects with the given range.\n\t *\n\t * @param {module:engine/view/range~Range} otherRange Range to compare with.\n\t * @returns {Boolean} True if ranges intersect.\n\t */\n\tisIntersecting( otherRange ) {\n\t\treturn this.start.isBefore( otherRange.end ) && this.end.isAfter( otherRange.start );\n\t}\n\n\t/**\n\t * Creates a range from the given parents and offsets.\n\t *\n\t * @protected\n\t * @param {module:engine/view/node~Node|module:engine/view/documentfragment~DocumentFragment} startElement Start position\n\t * parent element.\n\t * @param {Number} startOffset Start position offset.\n\t * @param {module:engine/view/node~Node|module:engine/view/documentfragment~DocumentFragment} endElement End position\n\t * parent element.\n\t * @param {Number} endOffset End position offset.\n\t * @returns {module:engine/view/range~Range} Created range.\n\t */\n\tstatic _createFromParentsAndOffsets( startElement, startOffset, endElement, endOffset ) {\n\t\treturn new this(\n\t\t\tnew Position( startElement, startOffset ),\n\t\t\tnew Position( endElement, endOffset )\n\t\t);\n\t}\n\n\t/**\n\t * Creates a new range, spreading from specified {@link module:engine/view/position~Position position} to a position moved by\n\t * given `shift`. If `shift` is a negative value, shifted position is treated as the beginning of the range.\n\t *\n\t * @protected\n\t * @param {module:engine/view/position~Position} position Beginning of the range.\n\t * @param {Number} shift How long the range should be.\n\t * @returns {module:engine/view/range~Range}\n\t */\n\tstatic _createFromPositionAndShift( position, shift ) {\n\t\tconst start = position;\n\t\tconst end = position.getShiftedBy( shift );\n\n\t\treturn shift > 0 ? new this( start, end ) : new this( end, start );\n\t}\n\n\t/**\n\t * Creates a range inside an {@link module:engine/view/element~Element element} which starts before the first child of\n\t * that element and ends after the last child of that element.\n\t *\n\t * @protected\n\t * @param {module:engine/view/element~Element} element Element which is a parent for the range.\n\t * @returns {module:engine/view/range~Range}\n\t */\n\tstatic _createIn( element ) {\n\t\treturn this._createFromParentsAndOffsets( element, 0, element, element.childCount );\n\t}\n\n\t/**\n\t * Creates a range that starts before given {@link module:engine/view/item~Item view item} and ends after it.\n\t *\n\t * @protected\n\t * @param {module:engine/view/item~Item} item\n\t * @returns {module:engine/view/range~Range}\n\t */\n\tstatic _createOn( item ) {\n\t\tconst size = item.is( '$textProxy' ) ? item.offsetSize : 1;\n\n\t\treturn this._createFromPositionAndShift( Position._createBefore( item ), size );\n\t}\n}\n\n// Function used by getEnlarged and getTrimmed methods.\nfunction enlargeTrimSkip( value ) {\n\tif ( value.item.is( 'attributeElement' ) || value.item.is( 'uiElement' ) ) {\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/count\n */\n\n/**\n * Returns the number of items return by the iterator.\n *\n *\t\tcount( [ 1, 2, 3, 4, 5 ] ); // 5;\n *\n * @param {Iterable.<*>} iterator Any iterator.\n * @returns {Number} Number of items returned by that iterator.\n */\nexport default function count( iterator ) {\n\tlet count = 0;\n\n\tfor ( const _ of iterator ) { // eslint-disable-line no-unused-vars\n\t\tcount++;\n\t}\n\n\treturn count;\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/selection\n */\n\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport Range from './range';\nimport Position from './position';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\nimport EmitterMixin from '@ckeditor/ckeditor5-utils/src/emittermixin';\nimport Node from './node';\nimport count from '@ckeditor/ckeditor5-utils/src/count';\nimport isIterable from '@ckeditor/ckeditor5-utils/src/isiterable';\nimport DocumentSelection from './documentselection';\n\n/**\n * Class representing an arbirtary selection in the view.\n * See also {@link module:engine/view/documentselection~DocumentSelection}.\n *\n * New selection instances can be created via the constructor or one these methods:\n *\n * * {@link module:engine/view/view~View#createSelection `View#createSelection()`},\n * * {@link module:engine/view/upcastwriter~UpcastWriter#createSelection `UpcastWriter#createSelection()`}.\n *\n * A selection can consist of {@link module:engine/view/range~Range ranges} that can be set by using\n * the {@link module:engine/view/selection~Selection#setTo `Selection#setTo()`} method.\n */\nexport default class Selection {\n\t/**\n\t * Creates new selection instance.\n\t *\n\t * **Note**: The selection constructor is available as a factory method:\n\t *\n\t * * {@link module:engine/view/view~View#createSelection `View#createSelection()`},\n\t * * {@link module:engine/view/upcastwriter~UpcastWriter#createSelection `UpcastWriter#createSelection()`}.\n\t *\n\t * \t\t// Creates empty selection without ranges.\n\t *\t\tconst selection = writer.createSelection();\n\t *\n\t *\t\t// Creates selection at the given range.\n\t *\t\tconst range = writer.createRange( start, end );\n\t *\t\tconst selection = writer.createSelection( range );\n\t *\n\t *\t\t// Creates selection at the given ranges\n\t * \t\tconst ranges = [ writer.createRange( start1, end2 ), writer.createRange( star2, end2 ) ];\n\t *\t\tconst selection = writer.createSelection( ranges );\n\t *\n\t *\t\t// Creates selection from the other selection.\n\t *\t\tconst otherSelection = writer.createSelection();\n\t *\t\tconst selection = writer.createSelection( otherSelection );\n\t *\n\t *\t\t// Creates selection from the document selection.\n\t *\t\tconst selection = writer.createSelection( editor.editing.view.document.selection );\n\t *\n\t * \t\t// Creates selection at the given position.\n\t *\t\tconst position = writer.createPositionFromPath( root, path );\n\t *\t\tconst selection = writer.createSelection( position );\n\t *\n\t *\t\t// Creates collapsed selection at the position of given item and offset.\n\t *\t\tconst paragraph = writer.createContainerElement( 'paragraph' );\n\t *\t\tconst selection = writer.createSelection( paragraph, offset );\n\t *\n\t *\t\t// Creates a range inside an {@link module:engine/view/element~Element element} which starts before the\n\t *\t\t// first child of that element and ends after the last child of that element.\n\t *\t\tconst selection = writer.createSelection( paragraph, 'in' );\n\t *\n\t *\t\t// Creates a range on an {@link module:engine/view/item~Item item} which starts before the item and ends\n\t *\t\t// just after the item.\n\t *\t\tconst selection = writer.createSelection( paragraph, 'on' );\n\t *\n\t * `Selection`'s constructor allow passing additional options (`backward`, `fake` and `label`) as the last argument.\n\t *\n\t *\t\t// Creates backward selection.\n\t *\t\tconst selection = writer.createSelection( range, { backward: true } );\n\t *\n\t * Fake selection does not render as browser native selection over selected elements and is hidden to the user.\n\t * This way, no native selection UI artifacts are displayed to the user and selection over elements can be\n\t * represented in other way, for example by applying proper CSS class.\n\t *\n\t * Additionally fake's selection label can be provided. It will be used to describe fake selection in DOM\n\t * (and be  properly handled by screen readers).\n\t *\n\t *\t\t// Creates fake selection with label.\n\t *\t\tconst selection = writer.createSelection( range, { fake: true, label: 'foo' } );\n\t *\n\t * @param {module:engine/view/selection~Selectable} [selectable=null]\n\t * @param {Number|'before'|'end'|'after'|'on'|'in'} [placeOrOffset] Offset or place when selectable is an `Item`.\n\t * @param {Object} [options]\n\t * @param {Boolean} [options.backward] Sets this selection instance to be backward.\n\t * @param {Boolean} [options.fake] Sets this selection instance to be marked as `fake`.\n\t * @param {String} [options.label] Label for the fake selection.\n\t */\n\tconstructor( selectable = null, placeOrOffset, options ) {\n\t\t/**\n\t\t * Stores all ranges that are selected.\n\t\t *\n\t\t * @protected\n\t\t * @member {Array.<module:engine/view/range~Range>}\n\t\t */\n\t\tthis._ranges = [];\n\n\t\t/**\n\t\t * Specifies whether the last added range was added as a backward or forward range.\n\t\t *\n\t\t * @protected\n\t\t * @member {Boolean}\n\t\t */\n\t\tthis._lastRangeBackward = false;\n\n\t\t/**\n\t\t * Specifies whether selection instance is fake.\n\t\t *\n\t\t * @private\n\t\t * @member {Boolean}\n\t\t */\n\t\tthis._isFake = false;\n\n\t\t/**\n\t\t * Fake selection's label.\n\t\t *\n\t\t * @private\n\t\t * @member {String}\n\t\t */\n\t\tthis._fakeSelectionLabel = '';\n\n\t\tthis.setTo( selectable, placeOrOffset, options );\n\t}\n\n\t/**\n\t * Returns true if selection instance is marked as `fake`.\n\t *\n\t * @see #setTo\n\t * @returns {Boolean}\n\t */\n\tget isFake() {\n\t\treturn this._isFake;\n\t}\n\n\t/**\n\t * Returns fake selection label.\n\t *\n\t * @see #setTo\n\t * @returns {String}\n\t */\n\tget fakeSelectionLabel() {\n\t\treturn this._fakeSelectionLabel;\n\t}\n\n\t/**\n\t * Selection anchor. Anchor may be described as a position where the selection starts. Together with\n\t * {@link #focus focus} they define the direction of selection, which is important\n\t * when expanding/shrinking selection. Anchor is always the start or end of the most recent added range.\n\t * It may be a bit unintuitive when there are multiple ranges in selection.\n\t *\n\t * @see #focus\n\t * @type {module:engine/view/position~Position}\n\t */\n\tget anchor() {\n\t\tif ( !this._ranges.length ) {\n\t\t\treturn null;\n\t\t}\n\t\tconst range = this._ranges[ this._ranges.length - 1 ];\n\t\tconst anchor = this._lastRangeBackward ? range.end : range.start;\n\n\t\treturn anchor.clone();\n\t}\n\n\t/**\n\t * Selection focus. Focus is a position where the selection ends.\n\t *\n\t * @see #anchor\n\t * @type {module:engine/view/position~Position}\n\t */\n\tget focus() {\n\t\tif ( !this._ranges.length ) {\n\t\t\treturn null;\n\t\t}\n\t\tconst range = this._ranges[ this._ranges.length - 1 ];\n\t\tconst focus = this._lastRangeBackward ? range.start : range.end;\n\n\t\treturn focus.clone();\n\t}\n\n\t/**\n\t * Returns whether the selection is collapsed. Selection is collapsed when there is exactly one range which is\n\t * collapsed.\n\t *\n\t * @type {Boolean}\n\t */\n\tget isCollapsed() {\n\t\treturn this.rangeCount === 1 && this._ranges[ 0 ].isCollapsed;\n\t}\n\n\t/**\n\t * Returns number of ranges in selection.\n\t *\n\t * @type {Number}\n\t */\n\tget rangeCount() {\n\t\treturn this._ranges.length;\n\t}\n\n\t/**\n\t * Specifies whether the {@link #focus} precedes {@link #anchor}.\n\t *\n\t * @type {Boolean}\n\t */\n\tget isBackward() {\n\t\treturn !this.isCollapsed && this._lastRangeBackward;\n\t}\n\n\t/**\n\t * {@link module:engine/view/editableelement~EditableElement EditableElement} instance that contains this selection, or `null`\n\t * if the selection is not inside an editable element.\n\t *\n\t * @type {module:engine/view/editableelement~EditableElement|null}\n\t */\n\tget editableElement() {\n\t\tif ( this.anchor ) {\n\t\t\treturn this.anchor.editableElement;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Returns an iterable that contains copies of all ranges added to the selection.\n\t *\n\t * @returns {Iterable.<module:engine/view/range~Range>}\n\t */\n\t* getRanges() {\n\t\tfor ( const range of this._ranges ) {\n\t\t\tyield range.clone();\n\t\t}\n\t}\n\n\t/**\n\t * Returns copy of the first range in the selection. First range is the one which\n\t * {@link module:engine/view/range~Range#start start} position {@link module:engine/view/position~Position#isBefore is before} start\n\t * position of all other ranges (not to confuse with the first range added to the selection).\n\t * Returns `null` if no ranges are added to selection.\n\t *\n\t * @returns {module:engine/view/range~Range|null}\n\t */\n\tgetFirstRange() {\n\t\tlet first = null;\n\n\t\tfor ( const range of this._ranges ) {\n\t\t\tif ( !first || range.start.isBefore( first.start ) ) {\n\t\t\t\tfirst = range;\n\t\t\t}\n\t\t}\n\n\t\treturn first ? first.clone() : null;\n\t}\n\n\t/**\n\t * Returns copy of the last range in the selection. Last range is the one which {@link module:engine/view/range~Range#end end}\n\t * position {@link module:engine/view/position~Position#isAfter is after} end position of all other ranges (not to confuse\n\t * with the last range added to the selection). Returns `null` if no ranges are added to selection.\n\t *\n\t * @returns {module:engine/view/range~Range|null}\n\t */\n\tgetLastRange() {\n\t\tlet last = null;\n\n\t\tfor ( const range of this._ranges ) {\n\t\t\tif ( !last || range.end.isAfter( last.end ) ) {\n\t\t\t\tlast = range;\n\t\t\t}\n\t\t}\n\n\t\treturn last ? last.clone() : null;\n\t}\n\n\t/**\n\t * Returns copy of the first position in the selection. First position is the position that\n\t * {@link module:engine/view/position~Position#isBefore is before} any other position in the selection ranges.\n\t * Returns `null` if no ranges are added to selection.\n\t *\n\t * @returns {module:engine/view/position~Position|null}\n\t */\n\tgetFirstPosition() {\n\t\tconst firstRange = this.getFirstRange();\n\n\t\treturn firstRange ? firstRange.start.clone() : null;\n\t}\n\n\t/**\n\t * Returns copy of the last position in the selection. Last position is the position that\n\t * {@link module:engine/view/position~Position#isAfter is after} any other position in the selection ranges.\n\t * Returns `null` if no ranges are added to selection.\n\t *\n\t * @returns {module:engine/view/position~Position|null}\n\t */\n\tgetLastPosition() {\n\t\tconst lastRange = this.getLastRange();\n\n\t\treturn lastRange ? lastRange.end.clone() : null;\n\t}\n\n\t/**\n\t * Checks whether, this selection is equal to given selection. Selections are equal if they have same directions,\n\t * same number of ranges and all ranges from one selection equal to a range from other selection.\n\t *\n\t * @param {module:engine/view/selection~Selection|module:engine/view/documentselection~DocumentSelection} otherSelection\n\t * Selection to compare with.\n\t * @returns {Boolean} `true` if selections are equal, `false` otherwise.\n\t */\n\tisEqual( otherSelection ) {\n\t\tif ( this.isFake != otherSelection.isFake ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif ( this.isFake && this.fakeSelectionLabel != otherSelection.fakeSelectionLabel ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif ( this.rangeCount != otherSelection.rangeCount ) {\n\t\t\treturn false;\n\t\t} else if ( this.rangeCount === 0 ) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif ( !this.anchor.isEqual( otherSelection.anchor ) || !this.focus.isEqual( otherSelection.focus ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tfor ( const thisRange of this._ranges ) {\n\t\t\tlet found = false;\n\n\t\t\tfor ( const otherRange of otherSelection._ranges ) {\n\t\t\t\tif ( thisRange.isEqual( otherRange ) ) {\n\t\t\t\t\tfound = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( !found ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Checks whether this selection is similar to given selection. Selections are similar if they have same directions, same\n\t * number of ranges, and all {@link module:engine/view/range~Range#getTrimmed trimmed} ranges from one selection are\n\t * equal to any trimmed range from other selection.\n\t *\n\t * @param {module:engine/view/selection~Selection|module:engine/view/documentselection~DocumentSelection} otherSelection\n\t * Selection to compare with.\n\t * @returns {Boolean} `true` if selections are similar, `false` otherwise.\n\t */\n\tisSimilar( otherSelection ) {\n\t\tif ( this.isBackward != otherSelection.isBackward ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst numOfRangesA = count( this.getRanges() );\n\t\tconst numOfRangesB = count( otherSelection.getRanges() );\n\n\t\t// If selections have different number of ranges, they cannot be similar.\n\t\tif ( numOfRangesA != numOfRangesB ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// If both selections have no ranges, they are similar.\n\t\tif ( numOfRangesA == 0 ) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Check if each range in one selection has a similar range in other selection.\n\t\tfor ( let rangeA of this.getRanges() ) {\n\t\t\trangeA = rangeA.getTrimmed();\n\n\t\t\tlet found = false;\n\n\t\t\tfor ( let rangeB of otherSelection.getRanges() ) {\n\t\t\t\trangeB = rangeB.getTrimmed();\n\n\t\t\t\tif ( rangeA.start.isEqual( rangeB.start ) && rangeA.end.isEqual( rangeB.end ) ) {\n\t\t\t\t\tfound = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// For `rangeA`, neither range in `otherSelection` was similar. So selections are not similar.\n\t\t\tif ( !found ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\t// There were no ranges that weren't matched. Selections are similar.\n\t\treturn true;\n\t}\n\n\t/**\n\t * Returns the selected element. {@link module:engine/view/element~Element Element} is considered as selected if there is only\n\t * one range in the selection, and that range contains exactly one element.\n\t * Returns `null` if there is no selected element.\n\t *\n\t * @returns {module:engine/view/element~Element|null}\n\t */\n\tgetSelectedElement() {\n\t\tif ( this.rangeCount !== 1 ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this.getFirstRange().getContainedElement();\n\t}\n\n\t/**\n\t * Sets this selection's ranges and direction to the specified location based on the given\n\t * {@link module:engine/view/selection~Selectable selectable}.\n\t *\n\t *\t\t// Sets selection to the given range.\n\t *\t\tconst range = writer.createRange( start, end );\n\t *\t\tselection.setTo( range );\n\t *\n\t *\t\t// Sets selection to given ranges.\n\t * \t\tconst ranges = [ writer.createRange( start1, end2 ), writer.createRange( star2, end2 ) ];\n\t *\t\tselection.setTo( range );\n\t *\n\t *\t\t// Sets selection to the other selection.\n\t *\t\tconst otherSelection = writer.createSelection();\n\t *\t\tselection.setTo( otherSelection );\n\t *\n\t *\t \t// Sets selection to contents of DocumentSelection.\n\t *\t\tselection.setTo( editor.editing.view.document.selection );\n\t *\n\t * \t\t// Sets collapsed selection at the given position.\n\t *\t\tconst position = writer.createPositionAt( root, path );\n\t *\t\tselection.setTo( position );\n\t *\n\t * \t\t// Sets collapsed selection at the position of given item and offset.\n\t *\t\tselection.setTo( paragraph, offset );\n\t *\n\t * Creates a range inside an {@link module:engine/view/element~Element element} which starts before the first child of\n\t * that element and ends after the last child of that element.\n\t *\n\t *\t\tselection.setTo( paragraph, 'in' );\n\t *\n\t * Creates a range on an {@link module:engine/view/item~Item item} which starts before the item and ends just after the item.\n\t *\n\t *\t\tselection.setTo( paragraph, 'on' );\n\t *\n\t * \t\t// Clears selection. Removes all ranges.\n\t *\t\tselection.setTo( null );\n\t *\n\t * `Selection#setTo()` method allow passing additional options (`backward`, `fake` and `label`) as the last argument.\n\t *\n\t *\t\t// Sets selection as backward.\n\t *\t\tselection.setTo( range, { backward: true } );\n\t *\n\t * Fake selection does not render as browser native selection over selected elements and is hidden to the user.\n\t * This way, no native selection UI artifacts are displayed to the user and selection over elements can be\n\t * represented in other way, for example by applying proper CSS class.\n\t *\n\t * Additionally fake's selection label can be provided. It will be used to describe fake selection in DOM\n\t * (and be  properly handled by screen readers).\n\t *\n\t *\t\t// Creates fake selection with label.\n\t *\t\tselection.setTo( range, { fake: true, label: 'foo' } );\n\t *\n\t * @fires change\n\t * @param {module:engine/view/selection~Selectable} selectable\n\t * @param {Number|'before'|'end'|'after'|'on'|'in'} [placeOrOffset] Sets place or offset of the selection.\n\t * @param {Object} [options]\n\t * @param {Boolean} [options.backward] Sets this selection instance to be backward.\n\t * @param {Boolean} [options.fake] Sets this selection instance to be marked as `fake`.\n\t * @param {String} [options.label] Label for the fake selection.\n\t */\n\tsetTo( selectable, placeOrOffset, options ) {\n\t\tif ( selectable === null ) {\n\t\t\tthis._setRanges( [] );\n\t\t\tthis._setFakeOptions( placeOrOffset );\n\t\t} else if ( selectable instanceof Selection || selectable instanceof DocumentSelection ) {\n\t\t\tthis._setRanges( selectable.getRanges(), selectable.isBackward );\n\t\t\tthis._setFakeOptions( { fake: selectable.isFake, label: selectable.fakeSelectionLabel } );\n\t\t} else if ( selectable instanceof Range ) {\n\t\t\tthis._setRanges( [ selectable ], placeOrOffset && placeOrOffset.backward );\n\t\t\tthis._setFakeOptions( placeOrOffset );\n\t\t} else if ( selectable instanceof Position ) {\n\t\t\tthis._setRanges( [ new Range( selectable ) ] );\n\t\t\tthis._setFakeOptions( placeOrOffset );\n\t\t} else if ( selectable instanceof Node ) {\n\t\t\tconst backward = !!options && !!options.backward;\n\t\t\tlet range;\n\n\t\t\tif ( placeOrOffset === undefined ) {\n\t\t\t\t/**\n\t\t\t\t * selection.setTo requires the second parameter when the first parameter is a node.\n\t\t\t\t *\n\t\t\t\t * @error view-selection-setto-required-second-parameter\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError( 'view-selection-setto-required-second-parameter', this );\n\t\t\t} else if ( placeOrOffset == 'in' ) {\n\t\t\t\trange = Range._createIn( selectable );\n\t\t\t} else if ( placeOrOffset == 'on' ) {\n\t\t\t\trange = Range._createOn( selectable );\n\t\t\t} else {\n\t\t\t\trange = new Range( Position._createAt( selectable, placeOrOffset ) );\n\t\t\t}\n\n\t\t\tthis._setRanges( [ range ], backward );\n\t\t\tthis._setFakeOptions( options );\n\t\t} else if ( isIterable( selectable ) ) {\n\t\t\t// We assume that the selectable is an iterable of ranges.\n\t\t\t// Array.from() is used to prevent setting ranges to the old iterable\n\t\t\tthis._setRanges( selectable, placeOrOffset && placeOrOffset.backward );\n\t\t\tthis._setFakeOptions( placeOrOffset );\n\t\t} else {\n\t\t\t/**\n\t\t\t * Cannot set selection to given place.\n\t\t\t *\n\t\t\t * @error view-selection-setto-not-selectable\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'view-selection-setto-not-selectable', this );\n\t\t}\n\n\t\tthis.fire( 'change' );\n\t}\n\n\t/**\n\t * Moves {@link #focus} to the specified location.\n\t *\n\t * The location can be specified in the same form as {@link module:engine/view/view~View#createPositionAt view.createPositionAt()}\n\t * parameters.\n\t *\n\t * @fires change\n\t * @param {module:engine/view/item~Item|module:engine/view/position~Position} itemOrPosition\n\t * @param {Number|'end'|'before'|'after'} [offset] Offset or one of the flags. Used only when\n\t * first parameter is a {@link module:engine/view/item~Item view item}.\n\t */\n\tsetFocus( itemOrPosition, offset ) {\n\t\tif ( this.anchor === null ) {\n\t\t\t/**\n\t\t\t * Cannot set selection focus if there are no ranges in selection.\n\t\t\t *\n\t\t\t * @error view-selection-setfocus-no-ranges\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'view-selection-setfocus-no-ranges', this );\n\t\t}\n\n\t\tconst newFocus = Position._createAt( itemOrPosition, offset );\n\n\t\tif ( newFocus.compareWith( this.focus ) == 'same' ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst anchor = this.anchor;\n\n\t\tthis._ranges.pop();\n\n\t\tif ( newFocus.compareWith( anchor ) == 'before' ) {\n\t\t\tthis._addRange( new Range( newFocus, anchor ), true );\n\t\t} else {\n\t\t\tthis._addRange( new Range( anchor, newFocus ) );\n\t\t}\n\n\t\tthis.fire( 'change' );\n\t}\n\n\t/**\n\t * Checks whether this object is of the given type.\n\t *\n\t *\t\tselection.is( 'selection' ); // -> true\n\t *\t\tselection.is( 'view:selection' ); // -> true\n\t *\n\t *\t\tselection.is( 'model:selection' ); // -> false\n\t *\t\tselection.is( 'element' ); // -> false\n\t *\t\tselection.is( 'range' ); // -> false\n\t *\n\t * {@link module:engine/view/node~Node#is Check the entire list of view objects} which implement the `is()` method.\n\t *\n\t * @param {String} type\n\t * @returns {Boolean}\n\t */\n\tis( type ) {\n\t\treturn type === 'selection' || type === 'view:selection';\n\t}\n\n\t/**\n\t * Replaces all ranges that were added to the selection with given array of ranges. Last range of the array\n\t * is treated like the last added range and is used to set {@link #anchor anchor} and {@link #focus focus}.\n\t * Accepts a flag describing in which way the selection is made.\n\t *\n\t * @private\n\t * @param {Iterable.<module:engine/view/range~Range>} newRanges Iterable object of ranges to set.\n\t * @param {Boolean} [isLastBackward=false] Flag describing if last added range was selected forward - from start to end\n\t * (`false`) or backward - from end to start (`true`). Defaults to `false`.\n\t */\n\t_setRanges( newRanges, isLastBackward = false ) {\n\t\t// New ranges should be copied to prevent removing them by setting them to `[]` first.\n\t\t// Only applies to situations when selection is set to the same selection or same selection's ranges.\n\t\tnewRanges = Array.from( newRanges );\n\n\t\tthis._ranges = [];\n\n\t\tfor ( const range of newRanges ) {\n\t\t\tthis._addRange( range );\n\t\t}\n\n\t\tthis._lastRangeBackward = !!isLastBackward;\n\t}\n\n\t/**\n\t * Sets this selection instance to be marked as `fake`. A fake selection does not render as browser native selection\n\t * over selected elements and is hidden to the user. This way, no native selection UI artifacts are displayed to\n\t * the user and selection over elements can be represented in other way, for example by applying proper CSS class.\n\t *\n\t * Additionally fake's selection label can be provided. It will be used to describe fake selection in DOM (and be\n\t * properly handled by screen readers).\n\t *\n\t * @private\n\t * @param {Object} [options] Options.\n\t * @param {Boolean} [options.fake] If set to true selection will be marked as `fake`.\n\t * @param {String} [options.label=''] Fake selection label.\n\t */\n\t_setFakeOptions( options = {} ) {\n\t\tthis._isFake = !!options.fake;\n\t\tthis._fakeSelectionLabel = options.fake ? options.label || '' : '';\n\t}\n\n\t/**\n\t * Adds a range to the selection. Added range is copied. This means that passed range is not saved in the\n\t * selection instance and you can safely operate on it.\n\t *\n\t * Accepts a flag describing in which way the selection is made - passed range might be selected from\n\t * {@link module:engine/view/range~Range#start start} to {@link module:engine/view/range~Range#end end}\n\t * or from {@link module:engine/view/range~Range#end end} to {@link module:engine/view/range~Range#start start}.\n\t * The flag is used to set {@link #anchor anchor} and {@link #focus focus} properties.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `view-selection-range-intersects` if added range intersects\n\t * with ranges already stored in Selection instance.\n\t *\n\t * @private\n\t * @fires change\n\t * @param {module:engine/view/range~Range} range\n\t * @param {Boolean} [isBackward]\n\t */\n\t_addRange( range, isBackward = false ) {\n\t\tif ( !( range instanceof Range ) ) {\n\t\t\t/**\n\t\t\t * Selection range set to an object that is not an instance of {@link module:engine/view/range~Range}.\n\t\t\t *\n\t\t\t * @error view-selection-add-range-not-range\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'view-selection-add-range-not-range',\n\t\t\t\tthis\n\t\t\t);\n\t\t}\n\n\t\tthis._pushRange( range );\n\t\tthis._lastRangeBackward = !!isBackward;\n\t}\n\n\t/**\n\t * Adds range to selection - creates copy of given range so it can be safely used and modified.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `view-selection-range-intersects` if added range intersects\n\t * with ranges already stored in selection instance.\n\t *\n\t * @private\n\t * @param {module:engine/view/range~Range} range\n\t */\n\t_pushRange( range ) {\n\t\tfor ( const storedRange of this._ranges ) {\n\t\t\tif ( range.isIntersecting( storedRange ) ) {\n\t\t\t\t/**\n\t\t\t\t * Trying to add a range that intersects with another range from selection.\n\t\t\t\t *\n\t\t\t\t * @error view-selection-range-intersects\n\t\t\t\t * @param {module:engine/view/range~Range} addedRange Range that was added to the selection.\n\t\t\t\t * @param {module:engine/view/range~Range} intersectingRange Range from selection that intersects with `addedRange`.\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError(\n\t\t\t\t\t'view-selection-range-intersects',\n\t\t\t\t\tthis,\n\t\t\t\t\t{ addedRange: range, intersectingRange: storedRange }\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tthis._ranges.push( new Range( range.start, range.end ) );\n\t}\n\n\t/**\n\t * Fired whenever selection ranges are changed through {@link ~Selection Selection API}.\n\t *\n\t * @event change\n\t */\n}\n\nmix( Selection, EmitterMixin );\n\n/**\n * An entity that is used to set selection.\n *\n * See also {@link module:engine/view/selection~Selection#setTo}\n *\n * @typedef {\n *    module:engine/view/selection~Selection|\n *    module:engine/view/documentselection~DocumentSelection|\n *    module:engine/view/position~Position|\n *    Iterable.<module:engine/view/range~Range>|\n *    module:engine/view/range~Range|\n *    module:engine/view/item~Item|\n *    null\n * } module:engine/view/selection~Selectable\n */\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/documentselection\n */\n\nimport Selection from './selection';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\nimport EmitterMixin from '@ckeditor/ckeditor5-utils/src/emittermixin';\n\n/**\n * Class representing the document selection in the view.\n *\n * Its instance is available in {@link module:engine/view/document~Document#selection `Document#selection`}.\n *\n * It is similar to {@link module:engine/view/selection~Selection} but\n * it has a read-only API and can be modified only by the writer available in\n * the {@link module:engine/view/view~View#change `View#change()`} block\n * (so via {@link module:engine/view/downcastwriter~DowncastWriter#setSelection `DowncastWriter#setSelection()`}).\n */\nexport default class DocumentSelection {\n\t/**\n\t * Creates new DocumentSelection instance.\n\t *\n\t * \t\t// Creates empty selection without ranges.\n\t *\t\tconst selection = new DocumentSelection();\n\t *\n\t *\t\t// Creates selection at the given range.\n\t *\t\tconst range = writer.createRange( start, end );\n\t *\t\tconst selection = new DocumentSelection( range );\n\t *\n\t *\t\t// Creates selection at the given ranges\n\t * \t\tconst ranges = [ writer.createRange( start1, end2 ), writer.createRange( start2, end2 ) ];\n\t *\t\tconst selection = new DocumentSelection( ranges );\n\t *\n\t *\t\t// Creates selection from the other selection.\n\t *\t\tconst otherSelection = writer.createSelection();\n\t *\t\tconst selection = new DocumentSelection( otherSelection );\n\t *\n\t * \t\t// Creates selection at the given position.\n\t *\t\tconst position = writer.createPositionAt( root, offset );\n\t *\t\tconst selection = new DocumentSelection( position );\n\t *\n\t *\t\t// Creates collapsed selection at the position of given item and offset.\n\t *\t\tconst paragraph = writer.createContainerElement( 'paragraph' );\n\t *\t\tconst selection = new DocumentSelection( paragraph, offset );\n\t *\n\t *\t\t// Creates a range inside an {@link module:engine/view/element~Element element} which starts before the\n\t *\t\t// first child of that element and ends after the last child of that element.\n\t *\t\tconst selection = new DocumentSelection( paragraph, 'in' );\n\t *\n\t *\t\t// Creates a range on an {@link module:engine/view/item~Item item} which starts before the item and ends\n\t *\t\t// just after the item.\n\t *\t\tconst selection = new DocumentSelection( paragraph, 'on' );\n\t *\n\t * `Selection`'s constructor allow passing additional options (`backward`, `fake` and `label`) as the last argument.\n\t *\n\t *\t\t// Creates backward selection.\n\t *\t\tconst selection = new DocumentSelection( range, { backward: true } );\n\t *\n\t * Fake selection does not render as browser native selection over selected elements and is hidden to the user.\n\t * This way, no native selection UI artifacts are displayed to the user and selection over elements can be\n\t * represented in other way, for example by applying proper CSS class.\n\t *\n\t * Additionally fake's selection label can be provided. It will be used to describe fake selection in DOM\n\t * (and be  properly handled by screen readers).\n\t *\n\t *\t\t// Creates fake selection with label.\n\t *\t\tconst selection = new DocumentSelection( range, { fake: true, label: 'foo' } );\n\t *\n\t * @param {module:engine/view/selection~Selectable} [selectable=null]\n\t * @param {Number|'before'|'end'|'after'|'on'|'in'} [placeOrOffset] Offset or place when selectable is an `Item`.\n\t * @param {Object} [options]\n\t * @param {Boolean} [options.backward] Sets this selection instance to be backward.\n\t * @param {Boolean} [options.fake] Sets this selection instance to be marked as `fake`.\n\t * @param {String} [options.label] Label for the fake selection.\n\t */\n\tconstructor( selectable = null, placeOrOffset, options ) {\n\t\t/**\n\t\t * Selection is used internally (`DocumentSelection` is a proxy to that selection).\n\t\t *\n\t\t * @private\n\t\t * @member {module:engine/view/selection~Selection}\n\t\t */\n\t\tthis._selection = new Selection();\n\n\t\t// Delegate change event to be fired on DocumentSelection instance.\n\t\tthis._selection.delegate( 'change' ).to( this );\n\n\t\t// Set selection data.\n\t\tthis._selection.setTo( selectable, placeOrOffset, options );\n\t}\n\n\t/**\n\t * Returns true if selection instance is marked as `fake`.\n\t *\n\t * @see #_setTo\n\t * @returns {Boolean}\n\t */\n\tget isFake() {\n\t\treturn this._selection.isFake;\n\t}\n\n\t/**\n\t * Returns fake selection label.\n\t *\n\t * @see #_setTo\n\t * @returns {String}\n\t */\n\tget fakeSelectionLabel() {\n\t\treturn this._selection.fakeSelectionLabel;\n\t}\n\n\t/**\n\t * Selection anchor. Anchor may be described as a position where the selection starts. Together with\n\t * {@link #focus focus} they define the direction of selection, which is important\n\t * when expanding/shrinking selection. Anchor is always the start or end of the most recent added range.\n\t * It may be a bit unintuitive when there are multiple ranges in selection.\n\t *\n\t * @see #focus\n\t * @type {module:engine/view/position~Position}\n\t */\n\tget anchor() {\n\t\treturn this._selection.anchor;\n\t}\n\n\t/**\n\t * Selection focus. Focus is a position where the selection ends.\n\t *\n\t * @see #anchor\n\t * @type {module:engine/view/position~Position}\n\t */\n\tget focus() {\n\t\treturn this._selection.focus;\n\t}\n\n\t/**\n\t * Returns whether the selection is collapsed. Selection is collapsed when there is exactly one range which is\n\t * collapsed.\n\t *\n\t * @type {Boolean}\n\t */\n\tget isCollapsed() {\n\t\treturn this._selection.isCollapsed;\n\t}\n\n\t/**\n\t * Returns number of ranges in selection.\n\t *\n\t * @type {Number}\n\t */\n\tget rangeCount() {\n\t\treturn this._selection.rangeCount;\n\t}\n\n\t/**\n\t * Specifies whether the {@link #focus} precedes {@link #anchor}.\n\t *\n\t * @type {Boolean}\n\t */\n\tget isBackward() {\n\t\treturn this._selection.isBackward;\n\t}\n\n\t/**\n\t * {@link module:engine/view/editableelement~EditableElement EditableElement} instance that contains this selection, or `null`\n\t * if the selection is not inside an editable element.\n\t *\n\t * @type {module:engine/view/editableelement~EditableElement|null}\n\t */\n\tget editableElement() {\n\t\treturn this._selection.editableElement;\n\t}\n\n\t/**\n\t * Used for the compatibility with the {@link module:engine/view/selection~Selection#isEqual} method.\n\t *\n\t * @protected\n\t */\n\tget _ranges() {\n\t\treturn this._selection._ranges;\n\t}\n\n\t/**\n\t * Returns an iterable that contains copies of all ranges added to the selection.\n\t *\n\t * @returns {Iterable.<module:engine/view/range~Range>}\n\t */\n\t* getRanges() {\n\t\tyield* this._selection.getRanges();\n\t}\n\n\t/**\n\t * Returns copy of the first range in the selection. First range is the one which\n\t * {@link module:engine/view/range~Range#start start} position {@link module:engine/view/position~Position#isBefore is before} start\n\t * position of all other ranges (not to confuse with the first range added to the selection).\n\t * Returns `null` if no ranges are added to selection.\n\t *\n\t * @returns {module:engine/view/range~Range|null}\n\t */\n\tgetFirstRange() {\n\t\treturn this._selection.getFirstRange();\n\t}\n\n\t/**\n\t * Returns copy of the last range in the selection. Last range is the one which {@link module:engine/view/range~Range#end end}\n\t * position {@link module:engine/view/position~Position#isAfter is after} end position of all other ranges (not to confuse\n\t * with the last range added to the selection). Returns `null` if no ranges are added to selection.\n\t *\n\t * @returns {module:engine/view/range~Range|null}\n\t */\n\tgetLastRange() {\n\t\treturn this._selection.getLastRange();\n\t}\n\n\t/**\n\t * Returns copy of the first position in the selection. First position is the position that\n\t * {@link module:engine/view/position~Position#isBefore is before} any other position in the selection ranges.\n\t * Returns `null` if no ranges are added to selection.\n\t *\n\t * @returns {module:engine/view/position~Position|null}\n\t */\n\tgetFirstPosition() {\n\t\treturn this._selection.getFirstPosition();\n\t}\n\n\t/**\n\t * Returns copy of the last position in the selection. Last position is the position that\n\t * {@link module:engine/view/position~Position#isAfter is after} any other position in the selection ranges.\n\t * Returns `null` if no ranges are added to selection.\n\t *\n\t * @returns {module:engine/view/position~Position|null}\n\t */\n\tgetLastPosition() {\n\t\treturn this._selection.getLastPosition();\n\t}\n\n\t/**\n\t * Returns the selected element. {@link module:engine/view/element~Element Element} is considered as selected if there is only\n\t * one range in the selection, and that range contains exactly one element.\n\t * Returns `null` if there is no selected element.\n\t *\n\t * @returns {module:engine/view/element~Element|null}\n\t */\n\tgetSelectedElement() {\n\t\treturn this._selection.getSelectedElement();\n\t}\n\n\t/**\n\t * Checks whether, this selection is equal to given selection. Selections are equal if they have same directions,\n\t * same number of ranges and all ranges from one selection equal to a range from other selection.\n\t *\n\t * @param {module:engine/view/selection~Selection|module:engine/view/documentselection~DocumentSelection} otherSelection\n\t * Selection to compare with.\n\t * @returns {Boolean} `true` if selections are equal, `false` otherwise.\n\t */\n\tisEqual( otherSelection ) {\n\t\treturn this._selection.isEqual( otherSelection );\n\t}\n\n\t/**\n\t * Checks whether this selection is similar to given selection. Selections are similar if they have same directions, same\n\t * number of ranges, and all {@link module:engine/view/range~Range#getTrimmed trimmed} ranges from one selection are\n\t * equal to any trimmed range from other selection.\n\t *\n\t * @param {module:engine/view/selection~Selection|module:engine/view/documentselection~DocumentSelection} otherSelection\n\t * Selection to compare with.\n\t * @returns {Boolean} `true` if selections are similar, `false` otherwise.\n\t */\n\tisSimilar( otherSelection ) {\n\t\treturn this._selection.isSimilar( otherSelection );\n\t}\n\n\t/**\n\t * Checks whether this object is of the given type.\n\t *\n\t *\t\tdocSelection.is( 'selection' ); // -> true\n\t *\t\tdocSelection.is( 'documentSelection' ); // -> true\n\t *\t\tdocSelection.is( 'view:selection' ); // -> true\n\t *\t\tdocSelection.is( 'view:documentSelection' ); // -> true\n\t *\n\t *\t\tdocSelection.is( 'model:documentSelection' ); // -> false\n\t *\t\tdocSelection.is( 'element' ); // -> false\n\t *\t\tdocSelection.is( 'node' ); // -> false\n\t *\n\t * {@link module:engine/view/node~Node#is Check the entire list of view objects} which implement the `is()` method.\n\t *\n\t * @param {String} type\n\t * @returns {Boolean}\n\t */\n\tis( type ) {\n\t\treturn type === 'selection' ||\n\t\t\ttype == 'documentSelection' ||\n\t\t\ttype == 'view:selection' ||\n\t\t\ttype == 'view:documentSelection';\n\t}\n\n\t/**\n\t * Sets this selection's ranges and direction to the specified location based on the given\n\t * {@link module:engine/view/selection~Selectable selectable}.\n\t *\n\t *\t\t// Sets selection to the given range.\n\t *\t\tconst range = writer.createRange( start, end );\n\t *\t\tdocumentSelection._setTo( range );\n\t *\n\t *\t\t// Sets selection to given ranges.\n\t * \t\tconst ranges = [ writer.createRange( start1, end2 ), writer.createRange( start2, end2 ) ];\n\t *\t\tdocumentSelection._setTo( range );\n\t *\n\t *\t\t// Sets selection to the other selection.\n\t *\t\tconst otherSelection = writer.createSelection();\n\t *\t\tdocumentSelection._setTo( otherSelection );\n\t *\n\t * \t\t// Sets collapsed selection at the given position.\n\t *\t\tconst position = writer.createPositionAt( root, offset );\n\t *\t\tdocumentSelection._setTo( position );\n\t *\n\t * \t\t// Sets collapsed selection at the position of given item and offset.\n\t *\t\tdocumentSelection._setTo( paragraph, offset );\n\t *\n\t * Creates a range inside an {@link module:engine/view/element~Element element} which starts before the first child of\n\t * that element and ends after the last child of that element.\n\t *\n\t *\t\tdocumentSelection._setTo( paragraph, 'in' );\n\t *\n\t * Creates a range on an {@link module:engine/view/item~Item item} which starts before the item and ends just after the item.\n\t *\n\t *\t\tdocumentSelection._setTo( paragraph, 'on' );\n\t *\n\t * \t\t// Clears selection. Removes all ranges.\n\t *\t\tdocumentSelection._setTo( null );\n\t *\n\t * `Selection#_setTo()` method allow passing additional options (`backward`, `fake` and `label`) as the last argument.\n\t *\n\t *\t\t// Sets selection as backward.\n\t *\t\tdocumentSelection._setTo( range, { backward: true } );\n\t *\n\t * Fake selection does not render as browser native selection over selected elements and is hidden to the user.\n\t * This way, no native selection UI artifacts are displayed to the user and selection over elements can be\n\t * represented in other way, for example by applying proper CSS class.\n\t *\n\t * Additionally fake's selection label can be provided. It will be used to des cribe fake selection in DOM\n\t * (and be  properly handled by screen readers).\n\t *\n\t *\t\t// Creates fake selection with label.\n\t *\t\tdocumentSelection._setTo( range, { fake: true, label: 'foo' } );\n\t *\n\t * @protected\n\t * @fires change\n\t * @param {module:engine/view/selection~Selectable} selectable\n\t * @param {Number|'before'|'end'|'after'|'on'|'in'} [placeOrOffset] Sets place or offset of the selection.\n\t * @param {Object} [options]\n\t * @param {Boolean} [options.backward] Sets this selection instance to be backward.\n\t * @param {Boolean} [options.fake] Sets this selection instance to be marked as `fake`.\n\t * @param {String} [options.label] Label for the fake selection.\n\t */\n\t_setTo( selectable, placeOrOffset, options ) {\n\t\tthis._selection.setTo( selectable, placeOrOffset, options );\n\t}\n\n\t/**\n\t * Moves {@link #focus} to the specified location.\n\t *\n\t * The location can be specified in the same form as {@link module:engine/view/view~View#createPositionAt view.createPositionAt()}\n\t * parameters.\n\t *\n\t * @protected\n\t * @fires change\n\t * @param {module:engine/view/item~Item|module:engine/view/position~Position} itemOrPosition\n\t * @param {Number|'end'|'before'|'after'} [offset] Offset or one of the flags. Used only when\n\t * first parameter is a {@link module:engine/view/item~Item view item}.\n\t */\n\t_setFocus( itemOrPosition, offset ) {\n\t\tthis._selection.setFocus( itemOrPosition, offset );\n\t}\n\n\t/**\n\t * Fired whenever selection ranges are changed through {@link ~DocumentSelection Selection API}.\n\t *\n\t * @event change\n\t */\n}\n\nmix( DocumentSelection, EmitterMixin );\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/document\n */\n\nimport DocumentSelection from './documentselection';\nimport Collection from '@ckeditor/ckeditor5-utils/src/collection';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\nimport ObservableMixin from '@ckeditor/ckeditor5-utils/src/observablemixin';\n\n// @if CK_DEBUG_ENGINE // const { logDocument } = require( '../dev-utils/utils' );\n\n/**\n * Document class creates an abstract layer over the content editable area, contains a tree of view elements and\n * {@link module:engine/view/documentselection~DocumentSelection view selection} associated with this document.\n *\n * @mixes module:utils/observablemixin~ObservableMixin\n */\nexport default class Document {\n\t/**\n\t * Creates a Document instance.\n\t *\n\t * @param {module:engine/view/stylesmap~StylesProcessor} stylesProcessor The styles processor instance.\n\t */\n\tconstructor( stylesProcessor ) {\n\t\t/**\n\t\t * Selection done on this document.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/documentselection~DocumentSelection} module:engine/view/document~Document#selection\n\t\t */\n\t\tthis.selection = new DocumentSelection();\n\n\t\t/**\n\t\t * Roots of the view tree. Collection of the {@link module:engine/view/element~Element view elements}.\n\t\t *\n\t\t * View roots are created as a result of binding between {@link module:engine/view/document~Document#roots} and\n\t\t * {@link module:engine/model/document~Document#roots} and this is handled by\n\t\t * {@link module:engine/controller/editingcontroller~EditingController}, so to create view root we need to create\n\t\t * model root using {@link module:engine/model/document~Document#createRoot}.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:utils/collection~Collection} module:engine/view/document~Document#roots\n\t\t */\n\t\tthis.roots = new Collection( { idProperty: 'rootName' } );\n\n\t\t/**\n\t\t * The styles processor instance used by this document when normalizing styles.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/stylesmap~StylesProcessor}\n\t\t */\n\t\tthis.stylesProcessor = stylesProcessor;\n\n\t\t/**\n\t\t * Defines whether document is in read-only mode.\n\t\t *\n\t\t * When document is read-ony then all roots are read-only as well and caret placed inside this root is hidden.\n\t\t *\n\t\t * @observable\n\t\t * @member {Boolean} #isReadOnly\n\t\t */\n\t\tthis.set( 'isReadOnly', false );\n\n\t\t/**\n\t\t * True if document is focused.\n\t\t *\n\t\t * This property is updated by the {@link module:engine/view/observer/focusobserver~FocusObserver}.\n\t\t * If the {@link module:engine/view/observer/focusobserver~FocusObserver} is disabled this property will not change.\n\t\t *\n\t\t * @readonly\n\t\t * @observable\n\t\t * @member {Boolean} module:engine/view/document~Document#isFocused\n\t\t */\n\t\tthis.set( 'isFocused', false );\n\n\t\t/**\n\t\t * True if composition is in progress inside the document.\n\t\t *\n\t\t * This property is updated by the {@link module:engine/view/observer/compositionobserver~CompositionObserver}.\n\t\t * If the {@link module:engine/view/observer/compositionobserver~CompositionObserver} is disabled this property will not change.\n\t\t *\n\t\t * @readonly\n\t\t * @observable\n\t\t * @member {Boolean} module:engine/view/document~Document#isComposing\n\t\t */\n\t\tthis.set( 'isComposing', false );\n\n\t\t/**\n\t\t * Post-fixer callbacks registered to the view document.\n\t\t *\n\t\t * @private\n\t\t * @member {Set}\n\t\t */\n\t\tthis._postFixers = new Set();\n\t}\n\n\t/**\n\t * Gets a {@link module:engine/view/document~Document#roots view root element} with the specified name. If the name is not\n\t * specific \"main\" root is returned.\n\t *\n\t * @param {String} [name='main'] Name of the root.\n\t * @returns {module:engine/view/rooteditableelement~RootEditableElement|null} The view root element with the specified name\n\t * or null when there is no root of given name.\n\t */\n\tgetRoot( name = 'main' ) {\n\t\treturn this.roots.get( name );\n\t}\n\n\t/**\n\t * Allows registering post-fixer callbacks. A post-fixers mechanism allows to update the view tree just before it is rendered\n\t * to the DOM.\n\t *\n\t * Post-fixers are executed right after all changes from the outermost change block were applied but\n\t * before the {@link module:engine/view/view~View#event:render render event} is fired. If a post-fixer callback made\n\t * a change, it should return `true`. When this happens, all post-fixers are fired again to check if something else should\n\t * not be fixed in the new document tree state.\n\t *\n\t * View post-fixers are useful when you want to apply some fixes whenever the view structure changes. Keep in mind that\n\t * changes executed in a view post-fixer should not break model-view mapping.\n\t *\n\t * The types of changes which should be safe:\n\t *\n\t * * adding or removing attribute from elements,\n\t * * changes inside of {@link module:engine/view/uielement~UIElement UI elements},\n\t * * {@link module:engine/model/differ~Differ#refreshItem marking some of the model elements to be re-converted}.\n\t *\n\t * Try to avoid changes which touch view structure:\n\t *\n\t * * you should not add or remove nor wrap or unwrap any view elements,\n\t * * you should not change the editor data model in a view post-fixer.\n\t *\n\t * As a parameter, a post-fixer callback receives a {@link module:engine/view/downcastwriter~DowncastWriter downcast writer}.\n\t *\n\t * Typically, a post-fixer will look like this:\n\t *\n\t *\t\teditor.editing.view.document.registerPostFixer( writer => {\n\t *\t\t\tif ( checkSomeCondition() ) {\n\t *\t\t\t\twriter.doSomething();\n\t *\n\t *\t\t\t\t// Let other post-fixers know that something changed.\n\t *\t\t\t\treturn true;\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t * Note that nothing happens right after you register a post-fixer (e.g. execute such a code in the console).\n\t * That is because adding a post-fixer does not execute it.\n\t * The post-fixer will be executed as soon as any change in the document needs to cause its rendering.\n\t * If you want to re-render the editor's view after registering the post-fixer then you should do it manually by calling\n\t * {@link module:engine/view/view~View#forceRender `view.forceRender()`}.\n\t *\n\t * If you need to register a callback which is executed when DOM elements are already updated,\n\t * use {@link module:engine/view/view~View#event:render render event}.\n\t *\n\t * @param {Function} postFixer\n\t */\n\tregisterPostFixer( postFixer ) {\n\t\tthis._postFixers.add( postFixer );\n\t}\n\n\t/**\n\t * Destroys this instance. Makes sure that all observers are destroyed and listeners removed.\n\t */\n\tdestroy() {\n\t\tthis.roots.map( root => root.destroy() );\n\t\tthis.stopListening();\n\t}\n\n\t/**\n\t * Performs post-fixer loops. Executes post-fixer callbacks as long as none of them has done any changes to the model.\n\t *\n\t * @protected\n\t * @param {module:engine/view/downcastwriter~DowncastWriter} writer\n\t */\n\t_callPostFixers( writer ) {\n\t\tlet wasFixed = false;\n\n\t\tdo {\n\t\t\tfor ( const callback of this._postFixers ) {\n\t\t\t\twasFixed = callback( writer );\n\n\t\t\t\tif ( wasFixed ) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t} while ( wasFixed );\n\t}\n\n\t/**\n\t * Event fired whenever document content layout changes. It is fired whenever content is\n\t * {@link module:engine/view/view~View#event:render rendered}, but should be also fired by observers in case of\n\t * other actions which may change layout, for instance when image loads.\n\t *\n\t * @event layoutChanged\n\t */\n\n\t// @if CK_DEBUG_ENGINE // log( version ) {\n\t// @if CK_DEBUG_ENGINE //\tlogDocument( this, version );\n\t// @if CK_DEBUG_ENGINE // }\n}\n\nmix( Document, ObservableMixin );\n\n/**\n * Enum representing type of the change.\n *\n * Possible values:\n *\n * * `children` - for child list changes,\n * * `attributes` - for element attributes changes,\n * * `text` - for text nodes changes.\n *\n * @typedef {String} module:engine/view/document~ChangeType\n */\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/attributeelement\n */\n\nimport Element from './element';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n\n// Default attribute priority.\nconst DEFAULT_PRIORITY = 10;\n\n/**\n * Attribute elements are used to represent formatting elements in the view (think – `<b>`, `<span style=\"font-size: 2em\">`, etc.).\n * Most often they are created when downcasting model text attributes.\n *\n * Editing engine does not define a fixed HTML DTD. This is why a feature developer needs to choose between various\n * types (container element, {@link module:engine/view/attributeelement~AttributeElement attribute element},\n * {@link module:engine/view/emptyelement~EmptyElement empty element}, etc) when developing a feature.\n *\n * To create a new attribute element instance use the\n * {@link module:engine/view/downcastwriter~DowncastWriter#createAttributeElement `DowncastWriter#createAttributeElement()`} method.\n *\n * @extends module:engine/view/element~Element\n */\nexport default class AttributeElement extends Element {\n\t/**\n\t * Creates an attribute element.\n\t *\n\t * @see module:engine/view/downcastwriter~DowncastWriter#createAttributeElement\n\t * @see module:engine/view/element~Element\n\t * @protected\n\t * @param {module:engine/view/document~Document} document The document instance to which this element belongs.\n\t * @param {String} name Node name.\n\t * @param {Object|Iterable} [attrs] Collection of attributes.\n\t * @param {module:engine/view/node~Node|Iterable.<module:engine/view/node~Node>} [children]\n\t * A list of nodes to be inserted into created element.\n\t */\n\tconstructor( document, name, attrs, children ) {\n\t\tsuper( document, name, attrs, children );\n\n\t\t/**\n\t\t * Returns block {@link module:engine/view/filler filler} offset or `null` if block filler is not needed.\n\t\t *\n\t\t * @method #getFillerOffset\n\t\t * @returns {Number|null} Block filler offset or `null` if block filler is not needed.\n\t\t */\n\t\tthis.getFillerOffset = getFillerOffset;\n\n\t\t/**\n\t\t * Element priority. Decides in what order elements are wrapped by {@link module:engine/view/downcastwriter~DowncastWriter}.\n\t\t *\n\t\t * @protected\n\t\t * @member {Number}\n\t\t */\n\t\tthis._priority = DEFAULT_PRIORITY;\n\n\t\t/**\n\t\t * Element identifier. If set, it is used by {@link module:engine/view/element~Element#isSimilar},\n\t\t * and then two elements are considered similar if, and only if they have the same `_id`.\n\t\t *\n\t\t * @protected\n\t\t * @member {String|Number}\n\t\t */\n\t\tthis._id = null;\n\n\t\t/**\n\t\t * Keeps all the attribute elements that have the same {@link module:engine/view/attributeelement~AttributeElement#id ids}\n\t\t * and still exist in the view tree.\n\t\t *\n\t\t * This property is managed by {@link module:engine/view/downcastwriter~DowncastWriter}.\n\t\t *\n\t\t * @protected\n\t\t * @member {Set.<module:engine/view/attributeelement~AttributeElement>|null}\n\t\t */\n\t\tthis._clonesGroup = null;\n\t}\n\n\t/**\n\t * Element priority. Decides in what order elements are wrapped by {@link module:engine/view/downcastwriter~DowncastWriter}.\n\t *\n\t * @readonly\n\t * @type {Number}\n\t */\n\tget priority() {\n\t\treturn this._priority;\n\t}\n\n\t/**\n\t * Element identifier. If set, it is used by {@link module:engine/view/element~Element#isSimilar},\n\t * and then two elements are considered similar if, and only if they have the same `id`.\n\t *\n\t * @readonly\n\t * @type {String|Number}\n\t */\n\tget id() {\n\t\treturn this._id;\n\t}\n\n\t/**\n\t * Returns all {@link module:engine/view/attributeelement~AttributeElement attribute elements} that has the\n\t * same {@link module:engine/view/attributeelement~AttributeElement#id id} and are in the view tree (were not removed).\n\t *\n\t * Note: If this element has been removed from the tree, returned set will not include it.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError attribute-element-get-elements-with-same-id-no-id}\n\t * if this element has no `id`.\n\t *\n\t * @returns {Set.<module:engine/view/attributeelement~AttributeElement>} Set containing all the attribute elements\n\t * with the same `id` that were added and not removed from the view tree.\n\t */\n\tgetElementsWithSameId() {\n\t\tif ( this.id === null ) {\n\t\t\t/**\n\t\t\t * Cannot get elements with the same id for an attribute element without id.\n\t\t\t *\n\t\t\t * @error attribute-element-get-elements-with-same-id-no-id\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'attribute-element-get-elements-with-same-id-no-id',\n\t\t\t\tthis\n\t\t\t);\n\t\t}\n\n\t\treturn new Set( this._clonesGroup );\n\t}\n\n\t/**\n\t * Checks whether this object is of the given.\n\t *\n\t *\t\tattributeElement.is( 'attributeElement' ); // -> true\n\t *\t\tattributeElement.is( 'element' ); // -> true\n\t *\t\tattributeElement.is( 'node' ); // -> true\n\t *\t\tattributeElement.is( 'view:attributeElement' ); // -> true\n\t *\t\tattributeElement.is( 'view:element' ); // -> true\n\t *\t\tattributeElement.is( 'view:node' ); // -> true\n\t *\n\t *\t\tattributeElement.is( 'model:element' ); // -> false\n\t *\t\tattributeElement.is( 'documentFragment' ); // -> false\n\t *\n\t * Assuming that the object being checked is an attribute element, you can also check its\n\t * {@link module:engine/view/attributeelement~AttributeElement#name name}:\n\t *\n\t *\t\tattributeElement.is( 'element', 'b' ); // -> true if this is a bold element\n\t *\t\tattributeElement.is( 'attributeElement', 'b' ); // -> same as above\n\t *\t\ttext.is( 'element', 'b' ); -> false\n\t *\n\t * {@link module:engine/view/node~Node#is Check the entire list of view objects} which implement the `is()` method.\n\t *\n\t * @param {String} type Type to check.\n\t * @param {String} [name] Element name.\n\t * @returns {Boolean}\n\t */\n\tis( type, name = null ) {\n\t\tif ( !name ) {\n\t\t\treturn type === 'attributeElement' || type === 'view:attributeElement' ||\n\t\t\t\t// From super.is(). This is highly utilised method and cannot call super. See ckeditor/ckeditor5#6529.\n\t\t\t\ttype === 'element' || type === 'view:element' ||\n\t\t\t\ttype === 'node' || type === 'view:node';\n\t\t} else {\n\t\t\treturn name === this.name && (\n\t\t\t\ttype === 'attributeElement' || type === 'view:attributeElement' ||\n\t\t\t\t// From super.is(). This is highly utilised method and cannot call super. See ckeditor/ckeditor5#6529.\n\t\t\t\ttype === 'element' || type === 'view:element'\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * Checks if this element is similar to other element.\n\t *\n\t * If none of elements has set {@link module:engine/view/attributeelement~AttributeElement#id}, then both elements\n\t * should have the same name, attributes and priority to be considered as similar. Two similar elements can contain\n\t * different set of children nodes.\n\t *\n\t * If at least one element has {@link module:engine/view/attributeelement~AttributeElement#id} set, then both\n\t * elements have to have the same {@link module:engine/view/attributeelement~AttributeElement#id} value to be\n\t * considered similar.\n\t *\n\t * Similarity is important for {@link module:engine/view/downcastwriter~DowncastWriter}. For example:\n\t *\n\t * * two following similar elements can be merged together into one, longer element,\n\t * * {@link module:engine/view/downcastwriter~DowncastWriter#unwrap} checks similarity of passed element and processed element to\n\t * decide whether processed element should be unwrapped,\n\t * * etc.\n\t *\n\t * @param {module:engine/view/element~Element} otherElement\n\t * @returns {Boolean}\n\t */\n\tisSimilar( otherElement ) {\n\t\t// If any element has an `id` set, just compare the ids.\n\t\tif ( this.id !== null || otherElement.id !== null ) {\n\t\t\treturn this.id === otherElement.id;\n\t\t}\n\n\t\treturn super.isSimilar( otherElement ) && this.priority == otherElement.priority;\n\t}\n\n\t/**\n\t * Clones provided element with priority.\n\t *\n\t * @protected\n\t * @param {Boolean} deep If set to `true` clones element and all its children recursively. When set to `false`,\n\t * element will be cloned without any children.\n\t * @returns {module:engine/view/attributeelement~AttributeElement} Clone of this element.\n\t */\n\t_clone( deep ) {\n\t\tconst cloned = super._clone( deep );\n\n\t\t// Clone priority too.\n\t\tcloned._priority = this._priority;\n\n\t\t// And id too.\n\t\tcloned._id = this._id;\n\n\t\treturn cloned;\n\t}\n}\n\n/**\n * Default attribute priority.\n *\n * @member {Number} module:engine/view/attributeelement~AttributeElement.DEFAULT_PRIORITY\n */\nAttributeElement.DEFAULT_PRIORITY = DEFAULT_PRIORITY;\n\n// Returns block {@link module:engine/view/filler~Filler filler} offset or `null` if block filler is not needed.\n//\n// @returns {Number|null} Block filler offset or `null` if block filler is not needed.\nfunction getFillerOffset() {\n\t// <b>foo</b> does not need filler.\n\tif ( nonUiChildrenCount( this ) ) {\n\t\treturn null;\n\t}\n\n\tlet element = this.parent;\n\n\t// <p><b></b></p> needs filler -> <p><b><br></b></p>\n\twhile ( element && element.is( 'attributeElement' ) ) {\n\t\tif ( nonUiChildrenCount( element ) > 1 ) {\n\t\t\treturn null;\n\t\t}\n\n\t\telement = element.parent;\n\t}\n\n\tif ( !element || nonUiChildrenCount( element ) > 1 ) {\n\t\treturn null;\n\t}\n\n\t// Render block filler at the end of element (after all ui elements).\n\treturn this.childCount;\n}\n\n// Returns total count of children that are not {@link module:engine/view/uielement~UIElement UIElements}.\n//\n// @param {module:engine/view/element~Element} element\n// @returns {Number}\nfunction nonUiChildrenCount( element ) {\n\treturn Array.from( element.getChildren() ).filter( element => !element.is( 'uiElement' ) ).length;\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/emptyelement\n */\n\nimport Element from './element';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport Node from './node';\n\n/**\n * Empty element class. It is used to represent elements that cannot contain any child nodes (for example `<img>` elements).\n *\n * To create a new empty element use the\n * {@link module:engine/view/downcastwriter~DowncastWriter#createEmptyElement `downcastWriter#createEmptyElement()`} method.\n *\n * @extends module:engine/view/element~Element\n */\nexport default class EmptyElement extends Element {\n\t/**\n\t * Creates new instance of EmptyElement.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `view-emptyelement-cannot-add` when third parameter is passed,\n\t * to inform that usage of EmptyElement is incorrect (adding child nodes to EmptyElement is forbidden).\n\t *\n\t * @see module:engine/view/downcastwriter~DowncastWriter#createEmptyElement\n\t * @protected\n\t * @param {module:engine/view/document~Document} document The document instance to which this element belongs.\n\t * @param {String} name Node name.\n\t * @param {Object|Iterable} [attrs] Collection of attributes.\n\t * @param {module:engine/view/node~Node|Iterable.<module:engine/view/node~Node>} [children]\n\t * A list of nodes to be inserted into created element.\n\t */\n\tconstructor( document, name, attrs, children ) {\n\t\tsuper( document, name, attrs, children );\n\n\t\t/**\n\t\t * Returns `null` because filler is not needed for EmptyElements.\n\t\t *\n\t\t * @method #getFillerOffset\n\t\t * @returns {null} Always returns null.\n\t\t */\n\t\tthis.getFillerOffset = getFillerOffset;\n\t}\n\n\t/**\n\t * Checks whether this object is of the given.\n\t *\n\t *\t\temptyElement.is( 'emptyElement' ); // -> true\n\t *\t\temptyElement.is( 'element' ); // -> true\n\t *\t\temptyElement.is( 'node' ); // -> true\n\t *\t\temptyElement.is( 'view:emptyElement' ); // -> true\n\t *\t\temptyElement.is( 'view:element' ); // -> true\n\t *\t\temptyElement.is( 'view:node' ); // -> true\n\t *\n\t *\t\temptyElement.is( 'model:element' ); // -> false\n\t *\t\temptyElement.is( 'documentFragment' ); // -> false\n\t *\n\t * Assuming that the object being checked is an empty element, you can also check its\n\t * {@link module:engine/view/emptyelement~EmptyElement#name name}:\n\t *\n\t *\t\temptyElement.is( 'element', 'img' ); // -> true if this is a img element\n\t *\t\temptyElement.is( 'emptyElement', 'img' ); // -> same as above\n\t *\t\ttext.is( 'element', 'img' ); -> false\n\t *\n\t * {@link module:engine/view/node~Node#is Check the entire list of view objects} which implement the `is()` method.\n\t *\n\t * @param {String} type Type to check.\n\t * @param {String} [name] Element name.\n\t * @returns {Boolean}\n\t */\n\tis( type, name = null ) {\n\t\tif ( !name ) {\n\t\t\treturn type === 'emptyElement' || type === 'view:emptyElement' ||\n\t\t\t\t// From super.is(). This is highly utilised method and cannot call super. See ckeditor/ckeditor5#6529.\n\t\t\t\ttype === 'element' || type === 'view:element' ||\n\t\t\t\ttype === 'node' || type === 'view:node';\n\t\t} else {\n\t\t\treturn name === this.name && (\n\t\t\t\ttype === 'emptyElement' || type === 'view:emptyElement' ||\n\t\t\t\ttype === 'element' || type === 'view:element'\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * Overrides {@link module:engine/view/element~Element#_insertChild} method.\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `view-emptyelement-cannot-add` to prevent\n\t * adding any child nodes to EmptyElement.\n\t *\n\t * @protected\n\t */\n\t_insertChild( index, nodes ) {\n\t\tif ( nodes && ( nodes instanceof Node || Array.from( nodes ).length > 0 ) ) {\n\t\t\t/**\n\t\t\t * Cannot add children to {@link module:engine/view/emptyelement~EmptyElement}.\n\t\t\t *\n\t\t\t * @error view-emptyelement-cannot-add\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'view-emptyelement-cannot-add',\n\t\t\t\t[ this, nodes ]\n\t\t\t);\n\t\t}\n\t}\n}\n\n// Returns `null` because block filler is not needed for EmptyElements.\n//\n// @returns {null}\nfunction getFillerOffset() {\n\treturn null;\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/* globals navigator:false */\n\n/**\n * @module utils/env\n */\n\nconst userAgent = navigator.userAgent.toLowerCase();\n\n/**\n * A namespace containing environment and browser information.\n *\n * @namespace\n */\nconst env = {\n\t/**\n\t * Indicates that the application is running on Macintosh.\n\t *\n\t * @static\n\t * @type {Boolean}\n\t */\n\tisMac: isMac( userAgent ),\n\n\t/**\n\t * Indicates that the application is running in Firefox (Gecko).\n\t *\n\t * @static\n\t * @type {Boolean}\n\t */\n\tisGecko: isGecko( userAgent ),\n\n\t/**\n\t * Indicates that the application is running in Safari.\n\t *\n\t * @static\n\t * @type {Boolean}\n\t */\n\tisSafari: isSafari( userAgent ),\n\n\t/**\n\t * Indicates that the application is running on Android mobile device.\n\t *\n\t * @static\n\t * @type {Boolean}\n\t */\n\tisAndroid: isAndroid( userAgent ),\n\n\t/**\n\t * Indicates that the application is running in a browser using the Blink engine.\n\t *\n\t * @static\n\t * @type {Boolean}\n\t */\n\tisBlink: isBlink( userAgent ),\n\n\t/**\n\t * Environment features information.\n\t *\n\t * @memberOf module:utils/env~env\n\t * @namespace\n\t */\n\tfeatures: {\n\t\t/**\n\t\t * Indicates that the environment supports ES2018 Unicode property escapes — like `\\p{P}` or `\\p{L}`.\n\t\t * More information about unicode properties might be found\n\t\t * [in Unicode Standard Annex #44](https://www.unicode.org/reports/tr44/#GC_Values_Table).\n\t\t *\n\t\t * @type {Boolean}\n\t\t */\n\t\tisRegExpUnicodePropertySupported: isRegExpUnicodePropertySupported()\n\t}\n};\n\nexport default env;\n\n/**\n * Checks if User Agent represented by the string is running on Macintosh.\n *\n * @param {String} userAgent **Lowercase** `navigator.userAgent` string.\n * @returns {Boolean} Whether User Agent is running on Macintosh or not.\n */\nexport function isMac( userAgent ) {\n\treturn userAgent.indexOf( 'macintosh' ) > -1;\n}\n\n/**\n * Checks if User Agent represented by the string is Firefox (Gecko).\n *\n * @param {String} userAgent **Lowercase** `navigator.userAgent` string.\n * @returns {Boolean} Whether User Agent is Firefox or not.\n */\nexport function isGecko( userAgent ) {\n\treturn !!userAgent.match( /gecko\\/\\d+/ );\n}\n\n/**\n * Checks if User Agent represented by the string is Safari.\n *\n * @param {String} userAgent **Lowercase** `navigator.userAgent` string.\n * @returns {Boolean} Whether User Agent is Safari or not.\n */\nexport function isSafari( userAgent ) {\n\treturn userAgent.indexOf( ' applewebkit/' ) > -1 && userAgent.indexOf( 'chrome' ) === -1;\n}\n\n/**\n * Checks if User Agent represented by the string is Android mobile device.\n *\n * @param {String} userAgent **Lowercase** `navigator.userAgent` string.\n * @returns {Boolean} Whether User Agent is Safari or not.\n */\nexport function isAndroid( userAgent ) {\n\treturn userAgent.indexOf( 'android' ) > -1;\n}\n\n/**\n * Checks if User Agent represented by the string is Blink engine.\n *\n * @param {String} userAgent **Lowercase** `navigator.userAgent` string.\n * @returns {Boolean} Whether User Agent is Blink engine or not.\n */\nexport function isBlink( userAgent ) {\n\t// The Edge browser before switching to the Blink engine used to report itself as Chrome (and \"Edge/\")\n\t// but after switching to the Blink it replaced \"Edge/\" with \"Edg/\".\n\treturn userAgent.indexOf( 'chrome/' ) > -1 && userAgent.indexOf( 'edge/' ) < 0;\n}\n\n/**\n * Checks if the current environment supports ES2018 Unicode properties like `\\p{P}` or `\\p{L}`.\n * More information about unicode properties might be found\n * [in Unicode Standard Annex #44](https://www.unicode.org/reports/tr44/#GC_Values_Table).\n *\n * @returns {Boolean}\n */\nexport function isRegExpUnicodePropertySupported() {\n\tlet isSupported = false;\n\n\t// Feature detection for Unicode properties. Added in ES2018. Currently Firefox does not support it.\n\t// See https://github.com/ckeditor/ckeditor5-mention/issues/44#issuecomment-487002174.\n\n\ttry {\n\t\t// Usage of regular expression literal cause error during build (ckeditor/ckeditor5-dev#534).\n\t\tisSupported = 'ć'.search( new RegExp( '[\\\\p{L}]', 'u' ) ) === 0;\n\t} catch ( error ) {\n\t\t// Firefox throws a SyntaxError when the group is unsupported.\n\t}\n\n\treturn isSupported;\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * Set of utils related to keyboard support.\n *\n * @module utils/keyboard\n */\n\nimport CKEditorError from './ckeditorerror';\nimport env from './env';\n\nconst macGlyphsToModifiers = {\n\t'⌘': 'ctrl',\n\t'⇧': 'shift',\n\t'⌥': 'alt'\n};\n\nconst modifiersToMacGlyphs = {\n\t'ctrl': '⌘',\n\t'shift': '⇧',\n\t'alt': '⌥'\n};\n\n/**\n * Object with `keyName => keyCode` pairs for a set of known keys.\n *\n * Contains:\n *\n * * `a-z`,\n * * `0-9`,\n * * `f1-f12`,\n * * `arrow(left|up|right|bottom)`,\n * * `backspace`, `delete`, `enter`, `esc`, `tab`,\n * * `ctrl`, `cmd`, `shift`, `alt`.\n */\nexport const keyCodes = generateKnownKeyCodes();\n\n/**\n * Converts a key name or a {@link module:utils/keyboard~KeystrokeInfo keystroke info} into a key code.\n *\n * Note: Key names are matched with {@link module:utils/keyboard~keyCodes} in a case-insensitive way.\n *\n * @param {String|module:utils/keyboard~KeystrokeInfo} Key name (see {@link module:utils/keyboard~keyCodes})\n * or a keystroke data object.\n * @returns {Number} Key or keystroke code.\n */\nexport function getCode( key ) {\n\tlet keyCode;\n\n\tif ( typeof key == 'string' ) {\n\t\tkeyCode = keyCodes[ key.toLowerCase() ];\n\n\t\tif ( !keyCode ) {\n\t\t\t/**\n\t\t\t * Unknown key name. Only key names contained by the {@link module:utils/keyboard~keyCodes} can be used.\n\t\t\t *\n\t\t\t * @error keyboard-unknown-key\n\t\t\t * @param {String} key\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'keyboard-unknown-key', null, { key } );\n\t\t}\n\t} else {\n\t\tkeyCode = key.keyCode +\n\t\t\t( key.altKey ? keyCodes.alt : 0 ) +\n\t\t\t( key.ctrlKey ? keyCodes.ctrl : 0 ) +\n\t\t\t( key.shiftKey ? keyCodes.shift : 0 );\n\t}\n\n\treturn keyCode;\n}\n\n/**\n * Parses keystroke and returns a keystroke code that will match the code returned by\n * link {@link module:utils/keyboard~getCode} for a corresponding {@link module:utils/keyboard~KeystrokeInfo keystroke info}.\n *\n * The keystroke can be passed in two formats:\n *\n * * as a single string – e.g. `ctrl + A`,\n * * as an array of {@link module:utils/keyboard~keyCodes known key names} and key codes – e.g.:\n *   * `[ 'ctrl', 32 ]` (ctrl + space),\n *   * `[ 'ctrl', 'a' ]` (ctrl + A).\n *\n * Note: Key names are matched with {@link module:utils/keyboard~keyCodes} in a case-insensitive way.\n *\n * Note: Only keystrokes with a single non-modifier key are supported (e.g. `ctrl+A` is OK, but `ctrl+A+B` is not).\n *\n * @param {String|Array.<Number|String>} keystroke Keystroke definition.\n * @returns {Number} Keystroke code.\n */\nexport function parseKeystroke( keystroke ) {\n\tif ( typeof keystroke == 'string' ) {\n\t\tkeystroke = splitKeystrokeText( keystroke );\n\t}\n\n\treturn keystroke\n\t\t.map( key => ( typeof key == 'string' ) ? getCode( key ) : key )\n\t\t.reduce( ( key, sum ) => sum + key, 0 );\n}\n\n/**\n * It translates any keystroke string text like `\"CTRL+A\"` to an\n * environment–specific keystroke, i.e. `\"⌘A\"` on Mac OSX.\n *\n * @param {String} keystroke Keystroke text.\n * @returns {String} Keystroke text specific for the environment.\n */\nexport function getEnvKeystrokeText( keystroke ) {\n\tif ( !env.isMac ) {\n\t\treturn keystroke;\n\t}\n\n\treturn splitKeystrokeText( keystroke )\n\t\t// Replace modifiers (e.g. \"ctrl\") with Mac glyphs (e.g. \"⌘\") first.\n\t\t.map( key => modifiersToMacGlyphs[ key.toLowerCase() ] || key )\n\n\t\t// Decide whether to put \"+\" between keys in the keystroke or not.\n\t\t.reduce( ( value, key ) => {\n\t\t\tif ( value.slice( -1 ) in macGlyphsToModifiers ) {\n\t\t\t\treturn value + key;\n\t\t\t} else {\n\t\t\t\treturn value + '+' + key;\n\t\t\t}\n\t\t} );\n}\n\n/**\n * Returns `true` if the provided key code represents one of the arrow keys.\n *\n * @param {Number} keyCode A key code as in {@link module:utils/keyboard~KeystrokeInfo#keyCode}.\n * @returns {Boolean}\n */\nexport function isArrowKeyCode( keyCode ) {\n\treturn keyCode == keyCodes.arrowright ||\n\t\tkeyCode == keyCodes.arrowleft ||\n\t\tkeyCode == keyCodes.arrowup ||\n\t\tkeyCode == keyCodes.arrowdown;\n}\n\n/**\n * Returns the direction in which the {@link module:engine/model/documentselection~DocumentSelection selection}\n * will move when a provided arrow key code is pressed considering the language direction of the editor content.\n *\n * For instance, in right–to–left (RTL) content languages, pressing the left arrow means moving selection right (forward)\n * in the model structure. Similarly, pressing the right arrow moves the selection left (backward).\n *\n * @param {Number} keyCode A key code as in {@link module:utils/keyboard~KeystrokeInfo#keyCode}.\n * @param {'ltr'|'rtl'} contentLanguageDirection The content language direction, corresponding to\n * {@link module:utils/locale~Locale#contentLanguageDirection}.\n * @returns {'left'|'up'|'right'|'down'} Localized arrow direction.\n */\nexport function getLocalizedArrowKeyCodeDirection( keyCode, contentLanguageDirection ) {\n\tconst isLtrContent = contentLanguageDirection === 'ltr';\n\n\tswitch ( keyCode ) {\n\t\tcase keyCodes.arrowleft:\n\t\t\treturn isLtrContent ? 'left' : 'right';\n\n\t\tcase keyCodes.arrowright:\n\t\t\treturn isLtrContent ? 'right' : 'left';\n\n\t\tcase keyCodes.arrowup:\n\t\t\treturn 'up';\n\n\t\tcase keyCodes.arrowdown:\n\t\t\treturn 'down';\n\t}\n}\n\n/**\n * Determines if the provided key code moves the {@link module:engine/model/documentselection~DocumentSelection selection}\n * forward or backward considering the language direction of the editor content.\n *\n * For instance, in right–to–left (RTL) languages, pressing the left arrow means moving forward\n * in the model structure. Similarly, pressing the right arrow moves the selection backward.\n *\n * @param {Number} keyCode A key code as in {@link module:utils/keyboard~KeystrokeInfo#keyCode}.\n * @param {'ltr'|'rtl'} contentLanguageDirection The content language direction, corresponding to\n * {@link module:utils/locale~Locale#contentLanguageDirection}.\n * @returns {Boolean}\n */\nexport function isForwardArrowKeyCode( keyCode, contentLanguageDirection ) {\n\tconst localizedKeyCodeDirection = getLocalizedArrowKeyCodeDirection( keyCode, contentLanguageDirection );\n\n\treturn localizedKeyCodeDirection === 'down' || localizedKeyCodeDirection === 'right';\n}\n\nfunction generateKnownKeyCodes() {\n\tconst keyCodes = {\n\t\tarrowleft: 37,\n\t\tarrowup: 38,\n\t\tarrowright: 39,\n\t\tarrowdown: 40,\n\t\tbackspace: 8,\n\t\tdelete: 46,\n\t\tenter: 13,\n\t\tspace: 32,\n\t\tesc: 27,\n\t\ttab: 9,\n\n\t\t// The idea about these numbers is that they do not collide with any real key codes, so we can use them\n\t\t// like bit masks.\n\t\tctrl: 0x110000,\n\t\t// Has the same code as ctrl, because their behaviour should be unified across the editor.\n\t\t// See http://ckeditor.github.io/editor-recommendations/general-policies#ctrl-vs-cmd\n\t\tcmd: 0x110000,\n\t\tshift: 0x220000,\n\t\talt: 0x440000\n\t};\n\n\t// a-z\n\tfor ( let code = 65; code <= 90; code++ ) {\n\t\tconst letter = String.fromCharCode( code );\n\n\t\tkeyCodes[ letter.toLowerCase() ] = code;\n\t}\n\n\t// 0-9\n\tfor ( let code = 48; code <= 57; code++ ) {\n\t\tkeyCodes[ code - 48 ] = code;\n\t}\n\n\t// F1-F12\n\tfor ( let code = 112; code <= 123; code++ ) {\n\t\tkeyCodes[ 'f' + ( code - 111 ) ] = code;\n\t}\n\n\treturn keyCodes;\n}\n\nfunction splitKeystrokeText( keystroke ) {\n\treturn keystroke.split( /\\s*\\+\\s*/ );\n}\n\n/**\n * Information about a keystroke.\n *\n * @interface module:utils/keyboard~KeystrokeInfo\n */\n\n/**\n * The [key code](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/keyCode).\n *\n * @member {Number} module:utils/keyboard~KeystrokeInfo#keyCode\n */\n\n/**\n * Whether the <kbd>Alt</kbd> modifier was pressed.\n *\n * @member {Bolean} module:utils/keyboard~KeystrokeInfo#altKey\n */\n\n/**\n * Whether the <kbd>Ctrl</kbd> or <kbd>Cmd</kbd> modifier was pressed.\n *\n * @member {Bolean} module:utils/keyboard~KeystrokeInfo#ctrlKey\n */\n\n/**\n * Whether the <kbd>Shift</kbd> modifier was pressed.\n *\n * @member {Bolean} module:utils/keyboard~KeystrokeInfo#shiftKey\n */\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/uielement\n */\n\nimport Element from './element';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport Node from './node';\nimport { keyCodes } from '@ckeditor/ckeditor5-utils/src/keyboard';\n\n/**\n * UI element class. It should be used to represent editing UI which needs to be injected into the editing view\n * If possible, you should keep your UI outside the editing view. However, if that is not possible,\n * UI elements can be used.\n *\n * How a UI element is rendered is in your control (you pass a callback to\n * {@link module:engine/view/downcastwriter~DowncastWriter#createUIElement `downcastWriter#createUIElement()`}).\n * The editor will ignore your UI element – the selection cannot be placed in it, it is skipped (invisible) when\n * the user modifies the selection by using arrow keys and the editor does not listen to any mutations which\n * happen inside your UI elements.\n *\n * The limitation is that you cannot convert a model element to a UI element. UI elements need to be\n * created for {@link module:engine/model/markercollection~Marker markers} or as additinal elements\n * inside normal {@link module:engine/view/containerelement~ContainerElement container elements}.\n *\n * To create a new UI element use the\n * {@link module:engine/view/downcastwriter~DowncastWriter#createUIElement `downcastWriter#createUIElement()`} method.\n *\n * @extends module:engine/view/element~Element\n */\nexport default class UIElement extends Element {\n\t/**\n\t * Creates new instance of UIElement.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `view-uielement-cannot-add` when third parameter is passed,\n\t * to inform that usage of UIElement is incorrect (adding child nodes to UIElement is forbidden).\n\t *\n\t * @see module:engine/view/downcastwriter~DowncastWriter#createUIElement\n\t * @protected\n\t * @param {module:engine/view/document~Document} document The document instance to which this element belongs.\n\t * @param {String} name Node name.\n\t * @param {Object|Iterable} [attributes] Collection of attributes.\n\t * @param {module:engine/view/node~Node|Iterable.<module:engine/view/node~Node>} [children]\n\t * A list of nodes to be inserted into created element.\n\t */\n\tconstructor( document, name, attributes, children ) {\n\t\tsuper( document, name, attributes, children );\n\n\t\t/**\n\t\t * Returns `null` because filler is not needed for UIElements.\n\t\t *\n\t\t * @method #getFillerOffset\n\t\t * @returns {null} Always returns null.\n\t\t */\n\t\tthis.getFillerOffset = getFillerOffset;\n\t}\n\n\t/**\n\t * Checks whether this object is of the given.\n\t *\n\t *\t\tuiElement.is( 'uiElement' ); // -> true\n\t *\t\tuiElement.is( 'element' ); // -> true\n\t *\t\tuiElement.is( 'node' ); // -> true\n\t *\t\tuiElement.is( 'view:uiElement' ); // -> true\n\t *\t\tuiElement.is( 'view:element' ); // -> true\n\t *\t\tuiElement.is( 'view:node' ); // -> true\n\t *\n\t *\t\tuiElement.is( 'model:element' ); // -> false\n\t *\t\tuiElement.is( 'documentFragment' ); // -> false\n\t *\n\t * Assuming that the object being checked is an ui element, you can also check its\n\t * {@link module:engine/view/uielement~UIElement#name name}:\n\t *\n\t *\t\tuiElement.is( 'element', 'span' ); // -> true if this is a span ui element\n\t *\t\tuiElement.is( 'uiElement', 'span' ); // -> same as above\n\t *\t\ttext.is( 'element', 'span' ); -> false\n\t *\n\t * {@link module:engine/view/node~Node#is Check the entire list of view objects} which implement the `is()` method.\n\t *\n\t * @param {String} type Type to check.\n\t * @param {String} [name] Element name.\n\t * @returns {Boolean}\n\t */\n\tis( type, name = null ) {\n\t\tif ( !name ) {\n\t\t\treturn type === 'uiElement' || type === 'view:uiElement' ||\n\t\t\t\t// From super.is(). This is highly utilised method and cannot call super. See ckeditor/ckeditor5#6529.\n\t\t\t\ttype === 'element' || type === 'view:element' ||\n\t\t\t\ttype === 'node' || type === 'view:node';\n\t\t} else {\n\t\t\treturn name === this.name && (\n\t\t\t\ttype === 'uiElement' || type === 'view:uiElement' ||\n\t\t\t\ttype === 'element' || type === 'view:element'\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * Overrides {@link module:engine/view/element~Element#_insertChild} method.\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `view-uielement-cannot-add` to prevent adding any child nodes\n\t * to UIElement.\n\t *\n\t * @protected\n\t */\n\t_insertChild( index, nodes ) {\n\t\tif ( nodes && ( nodes instanceof Node || Array.from( nodes ).length > 0 ) ) {\n\t\t\t/**\n\t\t\t * Cannot add children to {@link module:engine/view/uielement~UIElement}.\n\t\t\t *\n\t\t\t * @error view-uielement-cannot-add\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'view-uielement-cannot-add', this );\n\t\t}\n\t}\n\n\t/**\n\t * Renders this {@link module:engine/view/uielement~UIElement} to DOM. This method is called by\n\t * {@link module:engine/view/domconverter~DomConverter}.\n\t * Do not use inheritance to create custom rendering method, replace `render()` method instead:\n\t *\n\t *\t\tconst myUIElement = downcastWriter.createUIElement( 'span' );\n\t *\t\tmyUIElement.render = function( domDocument ) {\n\t *\t\t\tconst domElement = this.toDomElement( domDocument );\n\t *\t\t\tdomElement.innerHTML = '<b>this is ui element</b>';\n\t *\n\t *\t\t\treturn domElement;\n\t *\t\t};\n\t *\n\t * If changes in your UI element should trigger some editor UI update you should call\n\t * the {@link module:core/editor/editorui~EditorUI#update `editor.ui.update()`} method\n\t * after rendering your UI element.\n\t *\n\t * @param {Document} domDocument\n\t * @returns {HTMLElement}\n\t */\n\trender( domDocument ) {\n\t\treturn this.toDomElement( domDocument );\n\t}\n\n\t/**\n\t * Creates DOM element based on this view UIElement.\n\t * Note that each time this method is called new DOM element is created.\n\t *\n\t * @param {Document} domDocument\n\t * @returns {HTMLElement}\n\t */\n\ttoDomElement( domDocument ) {\n\t\tconst domElement = domDocument.createElement( this.name );\n\n\t\tfor ( const key of this.getAttributeKeys() ) {\n\t\t\tdomElement.setAttribute( key, this.getAttribute( key ) );\n\t\t}\n\n\t\treturn domElement;\n\t}\n}\n\n/**\n * This function injects UI element handling to the given {@link module:engine/view/document~Document document}.\n *\n * A callback is added to {@link module:engine/view/document~Document#event:keydown document keydown event}.\n * The callback handles the situation when right arrow key is pressed and selection is collapsed before a UI element.\n * Without this handler, it would be impossible to \"jump over\" UI element using right arrow key.\n *\n * @param {module:engine/view/view~View} view View controller to which the quirks handling will be injected.\n */\nexport function injectUiElementHandling( view ) {\n\tview.document.on( 'keydown', ( evt, data ) => jumpOverUiElement( evt, data, view.domConverter ) );\n}\n\n// Returns `null` because block filler is not needed for UIElements.\n//\n// @returns {null}\nfunction getFillerOffset() {\n\treturn null;\n}\n\n// Selection cannot be placed in a `UIElement`. Whenever it is placed there, it is moved before it. This\n// causes a situation when it is impossible to jump over `UIElement` using right arrow key, because the selection\n// ends up in ui element (in DOM) and is moved back to the left. This handler fixes this situation.\nfunction jumpOverUiElement( evt, data, domConverter ) {\n\tif ( data.keyCode == keyCodes.arrowright ) {\n\t\tconst domSelection = data.domTarget.ownerDocument.defaultView.getSelection();\n\t\tconst domSelectionCollapsed = domSelection.rangeCount == 1 && domSelection.getRangeAt( 0 ).collapsed;\n\n\t\t// Jump over UI element if selection is collapsed or shift key is pressed. These are the cases when selection would extend.\n\t\tif ( domSelectionCollapsed || data.shiftKey ) {\n\t\t\tconst domParent = domSelection.focusNode;\n\t\t\tconst domOffset = domSelection.focusOffset;\n\n\t\t\tconst viewPosition = domConverter.domPositionToView( domParent, domOffset );\n\n\t\t\t// In case if dom element is not converted to view or is not mapped or something. Happens for example in some tests.\n\t\t\tif ( viewPosition === null ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Skip all following ui elements.\n\t\t\tlet jumpedOverAnyUiElement = false;\n\n\t\t\tconst nextViewPosition = viewPosition.getLastMatchingPosition( value => {\n\t\t\t\tif ( value.item.is( 'uiElement' ) ) {\n\t\t\t\t\t// Remember that there was at least one ui element.\n\t\t\t\t\tjumpedOverAnyUiElement = true;\n\t\t\t\t}\n\n\t\t\t\t// Jump over ui elements, jump over empty attribute elements, move up from inside of attribute element.\n\t\t\t\tif ( value.item.is( 'uiElement' ) || value.item.is( 'attributeElement' ) ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\t// Don't jump over text or don't get out of container element.\n\t\t\t\treturn false;\n\t\t\t} );\n\n\t\t\t// If anything has been skipped, fix position.\n\t\t\t// This `if` could be possibly omitted but maybe it is better not to mess with DOM selection if not needed.\n\t\t\tif ( jumpedOverAnyUiElement ) {\n\t\t\t\tconst newDomPosition = domConverter.viewPositionToDom( nextViewPosition );\n\n\t\t\t\tif ( domSelectionCollapsed ) {\n\t\t\t\t\t// Selection was collapsed, so collapse it at further position.\n\t\t\t\t\tdomSelection.collapse( newDomPosition.parent, newDomPosition.offset );\n\t\t\t\t} else {\n\t\t\t\t\t// Selection was not collapse, so extend it instead of collapsing.\n\t\t\t\t\tdomSelection.extend( newDomPosition.parent, newDomPosition.offset );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/rawelement\n */\n\nimport Element from './element';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport Node from './node';\n\n/**\n * The raw element class.\n *\n * The raw elements work as data containers (\"wrappers\", \"sandboxes\") but their children are not managed or\n * even recognized by the editor. This encapsulation allows integrations to maintain custom DOM structures\n * in the editor content without, for instance, worrying about compatibility with other editor features.\n * Raw elements are a perfect tool for integration with external frameworks and data sources.\n *\n * Unlike {@link module:engine/view/uielement~UIElement UI elements}, raw elements act like real editor\n * content (similar to {@link module:engine/view/containerelement~ContainerElement} or\n * {@link module:engine/view/emptyelement~EmptyElement}), they are considered by the editor selection and\n * {@link module:widget/utils~toWidget they can work as widgets}.\n *\n * To create a new raw element, use the\n * {@link module:engine/view/downcastwriter~DowncastWriter#createRawElement `downcastWriter#createRawElement()`} method.\n *\n * @extends module:engine/view/element~Element\n */\nexport default class RawElement extends Element {\n\t/**\n\t * Creates a new instance of a raw element.\n\t *\n\t * Throws the `view-rawelement-cannot-add` {@link module:utils/ckeditorerror~CKEditorError CKEditorError} when the `children`\n\t * parameter is passed to inform that the usage of `RawElement` is incorrect (adding child nodes to `RawElement` is forbidden).\n\t *\n\t * @see module:engine/view/downcastwriter~DowncastWriter#createRawElement\n\t * @protected\n\t * @param {module:engine/view/document~Document} document The document instance to which this element belongs.\n\t * @param {String} name A node name.\n\t * @param {Object|Iterable} [attrs] The collection of attributes.\n\t * @param {module:engine/view/node~Node|Iterable.<module:engine/view/node~Node>} [children]\n\t * A list of nodes to be inserted into the created element.\n\t */\n\tconstructor( document, name, attrs, children ) {\n\t\tsuper( document, name, attrs, children );\n\n\t\t/**\n\t\t * Returns `null` because filler is not needed for raw elements.\n\t\t *\n\t\t * @method #getFillerOffset\n\t\t * @returns {null} Always returns null.\n\t\t */\n\t\tthis.getFillerOffset = getFillerOffset;\n\t}\n\n\t/**\n\t * Checks whether this object is of the given type or name.\n\t *\n\t *\t\trawElement.is( 'rawElement' ); // -> true\n\t *\t\trawElement.is( 'element' ); // -> true\n\t *\t\trawElement.is( 'node' ); // -> true\n\t *\t\trawElement.is( 'view:rawElement' ); // -> true\n\t *\t\trawElement.is( 'view:element' ); // -> true\n\t *\t\trawElement.is( 'view:node' ); // -> true\n\t *\n\t *\t\trawElement.is( 'model:element' ); // -> false\n\t *\t\trawElement.is( 'documentFragment' ); // -> false\n\t *\n\t * Assuming that the object being checked is a raw element, you can also check its\n\t * {@link module:engine/view/rawelement~RawElement#name name}:\n\t *\n\t *\t\trawElement.is( 'img' ); // -> true if this is an img element\n\t *\t\trawElement.is( 'rawElement', 'img' ); // -> same as above\n\t *\t\ttext.is( 'img' ); -> false\n\t *\n\t * {@link module:engine/view/node~Node#is Check the entire list of view objects} which implement the `is()` method.\n\t *\n\t * @param {String} type The type to check when the `name` parameter is present.\n\t * Otherwise, it acts like the `name` parameter.\n\t * @param {String} [name] The element name.\n\t * @returns {Boolean}\n\t */\n\tis( type, name = null ) {\n\t\tif ( !name ) {\n\t\t\treturn type === 'rawElement' || type === 'view:rawElement' ||\n\t\t\t\t// From super.is(). This is highly utilised method and cannot call super. See ckeditor/ckeditor5#6529.\n\t\t\t\ttype === this.name || type === 'view:' + this.name ||\n\t\t\t\ttype === 'element' || type === 'view:element' ||\n\t\t\t\ttype === 'node' || type === 'view:node';\n\t\t} else {\n\t\t\treturn name === this.name && (\n\t\t\t\ttype === 'rawElement' || type === 'view:rawElement' ||\n\t\t\t\ttype === 'element' || type === 'view:element'\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * Overrides the {@link module:engine/view/element~Element#_insertChild} method.\n\t * Throws the `view-rawelement-cannot-add` {@link module:utils/ckeditorerror~CKEditorError CKEditorError} to prevent\n\t * adding any child nodes to a raw element.\n\t *\n\t * @protected\n\t */\n\t_insertChild( index, nodes ) {\n\t\tif ( nodes && ( nodes instanceof Node || Array.from( nodes ).length > 0 ) ) {\n\t\t\t/**\n\t\t\t * Cannot add children to a {@link module:engine/view/rawelement~RawElement} instance.\n\t\t\t *\n\t\t\t * @error view-rawelement-cannot-add\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'view-rawelement-cannot-add',\n\t\t\t\t[ this, nodes ]\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * This allows rendering the children of a {@link module:engine/view/rawelement~RawElement} on the DOM level.\n\t * This method is called by the {@link module:engine/view/domconverter~DomConverter} with the raw DOM element\n\t * passed as an argument, leaving the number and shape of the children up to the integrator.\n\t *\n\t * This method **must be defined** for the raw element to work:\n\t *\n\t *\t\tconst myRawElement = downcastWriter.createRawElement( 'div' );\n\t *\n\t *\t\tmyRawElement.render = function( domElement ) {\n\t *\t\t\tdomElement.innerHTML = '<b>This is the raw content of myRawElement.</b>';\n\t *\t\t};\n\t *\n\t * @method #render\n\t * @param {HTMLElement} domElement The native DOM element representing the raw view element.\n\t */\n}\n\n// Returns `null` because block filler is not needed for raw elements.\n//\n// @returns {null}\nfunction getFillerOffset() {\n\treturn null;\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/documentfragment\n */\n\nimport Text from './text';\nimport TextProxy from './textproxy';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\nimport isIterable from '@ckeditor/ckeditor5-utils/src/isiterable';\nimport EmitterMixin from '@ckeditor/ckeditor5-utils/src/emittermixin';\n\n/**\n * Document fragment.\n *\n * To create a new document fragment instance use the\n * {@link module:engine/view/upcastwriter~UpcastWriter#createDocumentFragment `UpcastWriter#createDocumentFragment()`}\n * method.\n */\nexport default class DocumentFragment {\n\t/**\n\t * Creates new DocumentFragment instance.\n\t *\n\t * @protected\n\t * @param {module:engine/view/document~Document} document The document to which this document fragment belongs.\n\t * @param {module:engine/view/node~Node|Iterable.<module:engine/view/node~Node>} [children]\n\t * A list of nodes to be inserted into the created document fragment.\n\t */\n\tconstructor( document, children ) {\n\t\t/**\n\t\t * The document to which this document fragment belongs.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/document~Document}\n\t\t */\n\t\tthis.document = document;\n\n\t\t/**\n\t\t * Array of child nodes.\n\t\t *\n\t\t * @protected\n\t\t * @member {Array.<module:engine/view/element~Element>} module:engine/view/documentfragment~DocumentFragment#_children\n\t\t */\n\t\tthis._children = [];\n\n\t\tif ( children ) {\n\t\t\tthis._insertChild( 0, children );\n\t\t}\n\t}\n\n\t/**\n\t * Iterable interface.\n\t *\n\t * Iterates over nodes added to this document fragment.\n\t *\n\t * @returns {Iterable.<module:engine/view/node~Node>}\n\t */\n\t[ Symbol.iterator ]() {\n\t\treturn this._children[ Symbol.iterator ]();\n\t}\n\n\t/**\n\t * Number of child nodes in this document fragment.\n\t *\n\t * @readonly\n\t * @type {Number}\n\t */\n\tget childCount() {\n\t\treturn this._children.length;\n\t}\n\n\t/**\n\t * Is `true` if there are no nodes inside this document fragment, `false` otherwise.\n\t *\n\t * @readonly\n\t * @type {Boolean}\n\t */\n\tget isEmpty() {\n\t\treturn this.childCount === 0;\n\t}\n\n\t/**\n\t * Artificial root of `DocumentFragment`. Returns itself. Added for compatibility reasons.\n\t *\n\t * @readonly\n\t * @type {module:engine/model/documentfragment~DocumentFragment}\n\t */\n\tget root() {\n\t\treturn this;\n\t}\n\n\t/**\n\t * Artificial parent of `DocumentFragment`. Returns `null`. Added for compatibility reasons.\n\t *\n\t * @readonly\n\t * @type {null}\n\t */\n\tget parent() {\n\t\treturn null;\n\t}\n\n\t/**\n\t * Checks whether this object is of the given type.\n\t *\n\t *\t\tdocFrag.is( 'documentFragment' ); // -> true\n\t *\t\tdocFrag.is( 'view:documentFragment' ); // -> true\n\t *\n\t *\t\tdocFrag.is( 'model:documentFragment' ); // -> false\n\t *\t\tdocFrag.is( 'element' ); // -> false\n\t *\t\tdocFrag.is( 'node' ); // -> false\n\t *\n\t * {@link module:engine/view/node~Node#is Check the entire list of view objects} which implement the `is()` method.\n\t *\n\t * @param {String} type\n\t * @returns {Boolean}\n\t */\n\tis( type ) {\n\t\treturn type === 'documentFragment' || type === 'view:documentFragment';\n\t}\n\n\t/**\n\t * {@link module:engine/view/documentfragment~DocumentFragment#_insertChild Insert} a child node or a list of child nodes at the end\n\t * and sets the parent of these nodes to this fragment.\n\t *\n\t * @param {module:engine/view/item~Item|Iterable.<module:engine/view/item~Item>} items Items to be inserted.\n\t * @returns {Number} Number of appended nodes.\n\t */\n\t_appendChild( items ) {\n\t\treturn this._insertChild( this.childCount, items );\n\t}\n\n\t/**\n\t * Gets child at the given index.\n\t *\n\t * @param {Number} index Index of child.\n\t * @returns {module:engine/view/node~Node} Child node.\n\t */\n\tgetChild( index ) {\n\t\treturn this._children[ index ];\n\t}\n\n\t/**\n\t * Gets index of the given child node. Returns `-1` if child node is not found.\n\t *\n\t * @param {module:engine/view/node~Node} node Child node.\n\t * @returns {Number} Index of the child node.\n\t */\n\tgetChildIndex( node ) {\n\t\treturn this._children.indexOf( node );\n\t}\n\n\t/**\n\t * Gets child nodes iterator.\n\t *\n\t * @returns {Iterable.<module:engine/view/node~Node>} Child nodes iterator.\n\t */\n\tgetChildren() {\n\t\treturn this._children[ Symbol.iterator ]();\n\t}\n\n\t/**\n\t * Inserts a child node or a list of child nodes on the given index and sets the parent of these nodes to\n\t * this fragment.\n\t *\n\t * @param {Number} index Position where nodes should be inserted.\n\t * @param {module:engine/view/item~Item|Iterable.<module:engine/view/item~Item>} items Items to be inserted.\n\t * @returns {Number} Number of inserted nodes.\n\t */\n\t_insertChild( index, items ) {\n\t\tthis._fireChange( 'children', this );\n\t\tlet count = 0;\n\n\t\tconst nodes = normalize( this.document, items );\n\n\t\tfor ( const node of nodes ) {\n\t\t\t// If node that is being added to this element is already inside another element, first remove it from the old parent.\n\t\t\tif ( node.parent !== null ) {\n\t\t\t\tnode._remove();\n\t\t\t}\n\n\t\t\tnode.parent = this;\n\n\t\t\tthis._children.splice( index, 0, node );\n\t\t\tindex++;\n\t\t\tcount++;\n\t\t}\n\n\t\treturn count;\n\t}\n\n\t/**\n\t * Removes number of child nodes starting at the given index and set the parent of these nodes to `null`.\n\t *\n\t * @param {Number} index Number of the first node to remove.\n\t * @param {Number} [howMany=1] Number of nodes to remove.\n\t * @returns {Array.<module:engine/view/node~Node>} The array of removed nodes.\n\t */\n\t_removeChildren( index, howMany = 1 ) {\n\t\tthis._fireChange( 'children', this );\n\n\t\tfor ( let i = index; i < index + howMany; i++ ) {\n\t\t\tthis._children[ i ].parent = null;\n\t\t}\n\n\t\treturn this._children.splice( index, howMany );\n\t}\n\n\t/**\n\t * Fires `change` event with given type of the change.\n\t *\n\t * @private\n\t * @param {module:engine/view/document~ChangeType} type Type of the change.\n\t * @param {module:engine/view/node~Node} node Changed node.\n\t * @fires module:engine/view/node~Node#change\n\t */\n\t_fireChange( type, node ) {\n\t\tthis.fire( 'change:' + type, node );\n\t}\n\n\t// @if CK_DEBUG_ENGINE // printTree() {\n\t// @if CK_DEBUG_ENGINE //\tlet string = 'ViewDocumentFragment: [';\n\n\t// @if CK_DEBUG_ENGINE //\tfor ( const child of this.getChildren() ) {\n\t// @if CK_DEBUG_ENGINE //\t\tif ( child.is( '$text' ) ) {\n\t// @if CK_DEBUG_ENGINE //\t\t\tstring += '\\n' + '\\t'.repeat( 1 ) + child.data;\n\t// @if CK_DEBUG_ENGINE //\t\t} else {\n\t// @if CK_DEBUG_ENGINE //\t\t\tstring += '\\n' + child.printTree( 1 );\n\t// @if CK_DEBUG_ENGINE //\t\t}\n\t// @if CK_DEBUG_ENGINE //\t}\n\n\t// @if CK_DEBUG_ENGINE //\tstring += '\\n]';\n\n\t// @if CK_DEBUG_ENGINE //\treturn string;\n\t// @if CK_DEBUG_ENGINE // }\n\n\t// @if CK_DEBUG_ENGINE // logTree() {\n\t// @if CK_DEBUG_ENGINE // \tconsole.log( this.printTree() );\n\t// @if CK_DEBUG_ENGINE // }\n}\n\nmix( DocumentFragment, EmitterMixin );\n\n// Converts strings to Text and non-iterables to arrays.\n//\n// @param {String|module:engine/view/item~Item|Iterable.<String|module:engine/view/item~Item>}\n// @returns {Iterable.<module:engine/view/node~Node>}\nfunction normalize( document, nodes ) {\n\t// Separate condition because string is iterable.\n\tif ( typeof nodes == 'string' ) {\n\t\treturn [ new Text( document, nodes ) ];\n\t}\n\n\tif ( !isIterable( nodes ) ) {\n\t\tnodes = [ nodes ];\n\t}\n\n\t// Array.from to enable .map() on non-arrays.\n\treturn Array.from( nodes )\n\t\t.map( node => {\n\t\t\tif ( typeof node == 'string' ) {\n\t\t\t\treturn new Text( document, node );\n\t\t\t}\n\n\t\t\tif ( node instanceof TextProxy ) {\n\t\t\t\treturn new Text( document, node.data );\n\t\t\t}\n\n\t\t\treturn node;\n\t\t} );\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module module:engine/view/downcastwriter\n */\n\nimport Position from './position';\nimport Range from './range';\nimport Selection from './selection';\nimport ContainerElement from './containerelement';\nimport AttributeElement from './attributeelement';\nimport EmptyElement from './emptyelement';\nimport UIElement from './uielement';\nimport RawElement from './rawelement';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport DocumentFragment from './documentfragment';\nimport isIterable from '@ckeditor/ckeditor5-utils/src/isiterable';\nimport Text from './text';\nimport EditableElement from './editableelement';\nimport { isPlainObject } from 'lodash-es';\n\n/**\n * View downcast writer.\n *\n * It provides a set of methods used to manipulate view nodes.\n *\n * Do not create an instance of this writer manually. To modify a view structure, use\n * the {@link module:engine/view/view~View#change `View#change()`} block.\n *\n * The `DowncastWriter` is designed to work with semantic views which are the views that were/are being downcasted from the model.\n * To work with ordinary views (e.g. parsed from a pasted content) use the\n * {@link module:engine/view/upcastwriter~UpcastWriter upcast writer}.\n *\n * Read more about changing the view in the {@glink framework/guides/architecture/editing-engine#changing-the-view Changing the view}\n * section of the {@glink framework/guides/architecture/editing-engine Editing engine architecture} guide.\n */\nexport default class DowncastWriter {\n\t/**\n\t * @param {module:engine/view/document~Document} document The view document instance.\n\t */\n\tconstructor( document ) {\n\t\t/**\n\t\t * The view document instance in which this writer operates.\n\t\t *\n\t\t * @readonly\n\t\t * @type {module:engine/view/document~Document}\n\t\t */\n\t\tthis.document = document;\n\n\t\t/**\n\t\t * Holds references to the attribute groups that share the same {@link module:engine/view/attributeelement~AttributeElement#id id}.\n\t\t * The keys are `id`s, the values are `Set`s holding {@link module:engine/view/attributeelement~AttributeElement}s.\n\t\t *\n\t\t * @private\n\t\t * @type {Map.<String,Set>}\n\t\t */\n\t\tthis._cloneGroups = new Map();\n\t}\n\n\t/**\n\t * Sets {@link module:engine/view/documentselection~DocumentSelection selection's} ranges and direction to the\n\t * specified location based on the given {@link module:engine/view/selection~Selectable selectable}.\n\t *\n\t * Usage:\n\t *\n\t *\t\t// Sets selection to the given range.\n\t *\t\tconst range = writer.createRange( start, end );\n\t *\t\twriter.setSelection( range );\n\t *\n\t *\t\t// Sets backward selection to the given range.\n\t *\t\tconst range = writer.createRange( start, end );\n\t *\t\twriter.setSelection( range );\n\t *\n\t *\t\t// Sets selection to given ranges.\n\t * \t\tconst ranges = [ writer.createRange( start1, end2 ), writer.createRange( start2, end2 ) ];\n\t *\t\twriter.setSelection( range );\n\t *\n\t *\t\t// Sets selection to the other selection.\n\t *\t\tconst otherSelection = writer.createSelection();\n\t *\t\twriter.setSelection( otherSelection );\n\t *\n\t * \t\t// Sets collapsed selection at the given position.\n\t *\t\tconst position = writer.createPositionFromPath( root, path );\n\t *\t\twriter.setSelection( position );\n\t *\n\t * \t\t// Sets collapsed selection at the position of given item and offset.\n\t *\t\tconst paragraph = writer.createContainerElement( 'p' );\n\t *\t\twriter.setSelection( paragraph, offset );\n\t *\n\t * Creates a range inside an {@link module:engine/view/element~Element element} which starts before the first child of\n \t * that element and ends after the last child of that element.\n\t *\n\t * \t\twriter.setSelection( paragraph, 'in' );\n\t *\n\t * Creates a range on the {@link module:engine/view/item~Item item} which starts before the item and ends just after the item.\n\t *\n\t *\t\twriter.setSelection( paragraph, 'on' );\n\t *\n\t * \t\t// Removes all ranges.\n\t *\t\twriter.setSelection( null );\n\t *\n\t * `DowncastWriter#setSelection()` allow passing additional options (`backward`, `fake` and `label`) as the last argument.\n\t *\n\t *\t\t// Sets selection as backward.\n\t *\t\twriter.setSelection( range, { backward: true } );\n\t *\n\t *\t\t// Sets selection as fake.\n\t *\t\t// Fake selection does not render as browser native selection over selected elements and is hidden to the user.\n\t * \t\t// This way, no native selection UI artifacts are displayed to the user and selection over elements can be\n\t * \t\t// represented in other way, for example by applying proper CSS class.\n\t *\t\twriter.setSelection( range, { fake: true } );\n\t *\n\t * \t\t// Additionally fake's selection label can be provided. It will be used to describe fake selection in DOM\n\t * \t\t// (and be  properly handled by screen readers).\n\t *\t\twriter.setSelection( range, { fake: true, label: 'foo' } );\n\t *\n\t * @param {module:engine/view/selection~Selectable} selectable\n\t * @param {Number|'before'|'end'|'after'|'on'|'in'} [placeOrOffset] Sets place or offset of the selection.\n\t * @param {Object} [options]\n\t * @param {Boolean} [options.backward] Sets this selection instance to be backward.\n\t * @param {Boolean} [options.fake] Sets this selection instance to be marked as `fake`.\n\t * @param {String} [options.label] Label for the fake selection.\n\t */\n\tsetSelection( selectable, placeOrOffset, options ) {\n\t\tthis.document.selection._setTo( selectable, placeOrOffset, options );\n\t}\n\n\t/**\n\t * Moves {@link module:engine/view/documentselection~DocumentSelection#focus selection's focus} to the specified location.\n\t *\n\t * The location can be specified in the same form as {@link module:engine/view/view~View#createPositionAt view.createPositionAt()}\n\t * parameters.\n\t *\n\t * @param {module:engine/view/item~Item|module:engine/view/position~Position} itemOrPosition\n\t * @param {Number|'end'|'before'|'after'} [offset] Offset or one of the flags. Used only when\n\t * first parameter is a {@link module:engine/view/item~Item view item}.\n\t */\n\tsetSelectionFocus( itemOrPosition, offset ) {\n\t\tthis.document.selection._setFocus( itemOrPosition, offset );\n\t}\n\n\t/**\n\t * Creates a new {@link module:engine/view/text~Text text node}.\n\t *\n\t *\t\twriter.createText( 'foo' );\n\t *\n\t * @param {String} data The text's data.\n\t * @returns {module:engine/view/text~Text} The created text node.\n\t */\n\tcreateText( data ) {\n\t\treturn new Text( this.document, data );\n\t}\n\n\t/**\n\t * Creates a new {@link module:engine/view/attributeelement~AttributeElement}.\n\t *\n\t *\t\twriter.createAttributeElement( 'strong' );\n\t *\t\twriter.createAttributeElement( 'a', { href: 'foo.bar' } );\n\t *\n\t *\t\t// Make `<a>` element contain other attributes element so the `<a>` element is not broken.\n\t *\t\twriter.createAttributeElement( 'a', { href: 'foo.bar' }, { priority: 5 } );\n\t *\n\t *\t\t// Set `id` of a marker element so it is not joined or merged with \"normal\" elements.\n\t *\t\twriter.createAttributeElement( 'span', { class: 'my-marker' }, { id: 'marker:my' } );\n\t *\n\t * @param {String} name Name of the element.\n\t * @param {Object} [attributes] Element's attributes.\n\t * @param {Object} [options] Element's options.\n\t * @param {Number} [options.priority] Element's {@link module:engine/view/attributeelement~AttributeElement#priority priority}.\n\t * @param {Number|String} [options.id] Element's {@link module:engine/view/attributeelement~AttributeElement#id id}.\n\t * @returns {module:engine/view/attributeelement~AttributeElement} Created element.\n\t */\n\tcreateAttributeElement( name, attributes, options = {} ) {\n\t\tconst attributeElement = new AttributeElement( this.document, name, attributes );\n\n\t\tif ( options.priority ) {\n\t\t\tattributeElement._priority = options.priority;\n\t\t}\n\n\t\tif ( options.id ) {\n\t\t\tattributeElement._id = options.id;\n\t\t}\n\n\t\treturn attributeElement;\n\t}\n\n\t/**\n\t * Creates a new {@link module:engine/view/containerelement~ContainerElement}.\n\t *\n\t *\t\twriter.createContainerElement( 'p' );\n\t *\n\t *\t\t// Create element with custom attributes.\n\t *\t\twriter.createContainerElement( 'div', { id: 'foo-bar', 'data-baz': '123' } );\n\t *\n\t *\t\t// Create element with custom styles.\n\t *\t\twriter.createContainerElement( 'p', { style: 'font-weight: bold; padding-bottom: 10px' } );\n\t *\n\t *\t\t// Create element with custom classes.\n\t *\t\twriter.createContainerElement( 'p', { class: 'foo bar baz' } );\n\t *\n\t * @param {String} name Name of the element.\n\t * @param {Object} [attributes] Elements attributes.\n\t * @returns {module:engine/view/containerelement~ContainerElement} Created element.\n\t */\n\tcreateContainerElement( name, attributes ) {\n\t\treturn new ContainerElement( this.document, name, attributes );\n\t}\n\n\t/**\n\t * Creates a new {@link module:engine/view/editableelement~EditableElement}.\n\t *\n\t *\t\twriter.createEditableElement( 'div' );\n\t *\t\twriter.createEditableElement( 'div', { id: 'foo-1234' } );\n\t *\n\t * Note: The editable element is to be used in the editing pipeline. Usually, together with\n\t * {@link module:widget/utils~toWidgetEditable `toWidgetEditable()`}.\n\t *\n\t * @param {String} name Name of the element.\n\t * @param {Object} [attributes] Elements attributes.\n\t * @returns {module:engine/view/editableelement~EditableElement} Created element.\n\t */\n\tcreateEditableElement( name, attributes ) {\n\t\tconst editableElement = new EditableElement( this.document, name, attributes );\n\t\teditableElement._document = this.document;\n\n\t\treturn editableElement;\n\t}\n\n\t/**\n\t * Creates a new {@link module:engine/view/emptyelement~EmptyElement}.\n\t *\n\t *\t\twriter.createEmptyElement( 'img' );\n\t *\t\twriter.createEmptyElement( 'img', { id: 'foo-1234' } );\n\t *\n\t * @param {String} name Name of the element.\n\t * @param {Object} [attributes] Elements attributes.\n\t * @returns {module:engine/view/emptyelement~EmptyElement} Created element.\n\t */\n\tcreateEmptyElement( name, attributes ) {\n\t\treturn new EmptyElement( this.document, name, attributes );\n\t}\n\n\t/**\n\t * Creates a new {@link module:engine/view/uielement~UIElement}.\n\t *\n\t *\t\twriter.createUIElement( 'span' );\n\t *\t\twriter.createUIElement( 'span', { id: 'foo-1234' } );\n\t *\n\t * A custom render function can be provided as the third parameter:\n\t *\n\t *\t\twriter.createUIElement( 'span', null, function( domDocument ) {\n\t *\t\t\tconst domElement = this.toDomElement( domDocument );\n\t *\t\t\tdomElement.innerHTML = '<b>this is ui element</b>';\n\t *\n\t *\t\t\treturn domElement;\n\t *\t\t} );\n\t *\n\t * Unlike {@link #createRawElement raw elements}, UI elements are by no means editor content, for instance,\n\t * they are ignored by the editor selection system.\n\t *\n\t * You should not use UI elements as data containers. Check out {@link #createRawElement} instead.\n\t *\n\t * @param {String} name The name of the element.\n\t * @param {Object} [attributes] Element attributes.\n\t * @param {Function} [renderFunction] A custom render function.\n\t * @returns {module:engine/view/uielement~UIElement} The created element.\n\t */\n\tcreateUIElement( name, attributes, renderFunction ) {\n\t\tconst uiElement = new UIElement( this.document, name, attributes );\n\n\t\tif ( renderFunction ) {\n\t\t\tuiElement.render = renderFunction;\n\t\t}\n\n\t\treturn uiElement;\n\t}\n\n\t/**\n\t * Creates a new {@link module:engine/view/rawelement~RawElement}.\n\t *\n\t *\t\twriter.createRawElement( 'span', { id: 'foo-1234' }, function( domElement ) {\n\t *\t\t\tdomElement.innerHTML = '<b>This is the raw content of the raw element.</b>';\n\t *\t\t} );\n\t *\n\t * Raw elements work as data containers (\"wrappers\", \"sandboxes\") but their children are not managed or\n\t * even recognized by the editor. This encapsulation allows integrations to maintain custom DOM structures\n\t * in the editor content without, for instance, worrying about compatibility with other editor features.\n\t * Raw elements are a perfect tool for integration with external frameworks and data sources.\n\t *\n\t * Unlike {@link #createUIElement UI elements}, raw elements act like \"real\" editor content (similar to\n\t * {@link module:engine/view/containerelement~ContainerElement} or {@link module:engine/view/emptyelement~EmptyElement}),\n\t * and they are considered by the editor selection.\n\t *\n\t * You should not use raw elements to render the UI in the editor content. Check out {@link #createUIElement `#createUIElement()`}\n\t * instead.\n\t *\n\t * @param {String} name The name of the element.\n\t * @param {Object} [attributes] Element attributes.\n\t * @param {Function} [renderFunction] A custom render function.\n\t * @returns {module:engine/view/rawelement~RawElement} The created element.\n\t */\n\tcreateRawElement( name, attributes, renderFunction ) {\n\t\tconst rawElement = new RawElement( this.document, name, attributes );\n\n\t\trawElement.render = renderFunction || ( () => {} );\n\n\t\treturn rawElement;\n\t}\n\n\t/**\n\t * Adds or overwrites the element's attribute with a specified key and value.\n\t *\n\t *\t\twriter.setAttribute( 'href', 'http://ckeditor.com', linkElement );\n\t *\n\t * @param {String} key The attribute key.\n\t * @param {String} value The attribute value.\n\t * @param {module:engine/view/element~Element} element\n\t */\n\tsetAttribute( key, value, element ) {\n\t\telement._setAttribute( key, value );\n\t}\n\n\t/**\n\t * Removes attribute from the element.\n\t *\n\t *\t\twriter.removeAttribute( 'href', linkElement );\n\t *\n\t * @param {String} key Attribute key.\n\t * @param {module:engine/view/element~Element} element\n\t */\n\tremoveAttribute( key, element ) {\n\t\telement._removeAttribute( key );\n\t}\n\n\t/**\n\t * Adds specified class to the element.\n\t *\n\t *\t\twriter.addClass( 'foo', linkElement );\n\t *\t\twriter.addClass( [ 'foo', 'bar' ], linkElement );\n\t *\n\t * @param {Array.<String>|String} className\n\t * @param {module:engine/view/element~Element} element\n\t */\n\taddClass( className, element ) {\n\t\telement._addClass( className );\n\t}\n\n\t/**\n\t * Removes specified class from the element.\n\t *\n\t *\t\twriter.removeClass( 'foo', linkElement );\n\t *\t\twriter.removeClass( [ 'foo', 'bar' ], linkElement );\n\t *\n\t * @param {Array.<String>|String} className\n\t * @param {module:engine/view/element~Element} element\n\t */\n\tremoveClass( className, element ) {\n\t\telement._removeClass( className );\n\t}\n\n\t/**\n\t * Adds style to the element.\n\t *\n\t *\t\twriter.setStyle( 'color', 'red', element );\n\t *\t\twriter.setStyle( {\n\t *\t\t\tcolor: 'red',\n\t *\t\t\tposition: 'fixed'\n\t *\t\t}, element );\n\t *\n\t * **Note**: The passed style can be normalized if\n\t * {@link module:engine/controller/datacontroller~DataController#addStyleProcessorRules a particular style processor rule is enabled}.\n\t * See {@link module:engine/view/stylesmap~StylesMap#set `StylesMap#set()`} for details.\n\t *\n\t * @param {String|Object} property Property name or object with key - value pairs.\n\t * @param {String} [value] Value to set. This parameter is ignored if object is provided as the first parameter.\n\t * @param {module:engine/view/element~Element} element Element to set styles on.\n\t */\n\tsetStyle( property, value, element ) {\n\t\tif ( isPlainObject( property ) && element === undefined ) {\n\t\t\telement = value;\n\t\t}\n\n\t\telement._setStyle( property, value );\n\t}\n\n\t/**\n\t * Removes specified style from the element.\n\t *\n\t *\t\twriter.removeStyle( 'color', element ); // Removes 'color' style.\n\t *\t\twriter.removeStyle( [ 'color', 'border-top' ], element ); // Removes both 'color' and 'border-top' styles.\n\t *\n\t * **Note**: This method can work with normalized style names if\n\t * {@link module:engine/controller/datacontroller~DataController#addStyleProcessorRules a particular style processor rule is enabled}.\n\t * See {@link module:engine/view/stylesmap~StylesMap#remove `StylesMap#remove()`} for details.\n\t *\n\t * @param {Array.<String>|String} property\n\t * @param {module:engine/view/element~Element} element\n\t */\n\tremoveStyle( property, element ) {\n\t\telement._removeStyle( property );\n\t}\n\n\t/**\n\t * Sets a custom property on element. Unlike attributes, custom properties are not rendered to the DOM,\n\t * so they can be used to add special data to elements.\n\t *\n\t * @param {String|Symbol} key\n\t * @param {*} value\n\t * @param {module:engine/view/element~Element} element\n\t */\n\tsetCustomProperty( key, value, element ) {\n\t\telement._setCustomProperty( key, value );\n\t}\n\n\t/**\n\t * Removes a custom property stored under the given key.\n\t *\n\t * @param {String|Symbol} key\n\t * @param {module:engine/view/element~Element} element\n\t * @returns {Boolean} Returns true if property was removed.\n\t */\n\tremoveCustomProperty( key, element ) {\n\t\treturn element._removeCustomProperty( key );\n\t}\n\n\t/**\n\t * Breaks attribute elements at the provided position or at the boundaries of a provided range. It breaks attribute elements\n\t * up to their first ancestor that is a container element.\n\t *\n\t * In following examples `<p>` is a container, `<b>` and `<u>` are attribute elements:\n\t *\n\t *\t\t<p>foo<b><u>bar{}</u></b></p> -> <p>foo<b><u>bar</u></b>[]</p>\n\t *\t\t<p>foo<b><u>{}bar</u></b></p> -> <p>foo{}<b><u>bar</u></b></p>\n\t *\t\t<p>foo<b><u>b{}ar</u></b></p> -> <p>foo<b><u>b</u></b>[]<b><u>ar</u></b></p>\n\t *\t\t<p><b>fo{o</b><u>ba}r</u></p> -> <p><b>fo</b><b>o</b><u>ba</u><u>r</u></b></p>\n\t *\n\t * **Note:** {@link module:engine/view/documentfragment~DocumentFragment DocumentFragment} is treated like a container.\n\t *\n\t * **Note:** The difference between {@link module:engine/view/downcastwriter~DowncastWriter#breakAttributes breakAttributes()} and\n\t * {@link module:engine/view/downcastwriter~DowncastWriter#breakContainer breakContainer()} is that `breakAttributes()` breaks all\n\t * {@link module:engine/view/attributeelement~AttributeElement attribute elements} that are ancestors of a given `position`,\n\t * up to the first encountered {@link module:engine/view/containerelement~ContainerElement container element}.\n\t * `breakContainer()` assumes that a given `position` is directly in the container element and breaks that container element.\n\t *\n\t * Throws the `view-writer-invalid-range-container` {@link module:utils/ckeditorerror~CKEditorError CKEditorError}\n\t * when the {@link module:engine/view/range~Range#start start}\n\t * and {@link module:engine/view/range~Range#end end} positions of a passed range are not placed inside same parent container.\n\t *\n\t * Throws the `view-writer-cannot-break-empty-element` {@link module:utils/ckeditorerror~CKEditorError CKEditorError}\n\t * when trying to break attributes inside an {@link module:engine/view/emptyelement~EmptyElement EmptyElement}.\n\t *\n\t * Throws the `view-writer-cannot-break-ui-element` {@link module:utils/ckeditorerror~CKEditorError CKEditorError}\n\t * when trying to break attributes inside a {@link module:engine/view/uielement~UIElement UIElement}.\n\t *\n\t * @see module:engine/view/attributeelement~AttributeElement\n\t * @see module:engine/view/containerelement~ContainerElement\n\t * @see module:engine/view/downcastwriter~DowncastWriter#breakContainer\n\t * @param {module:engine/view/position~Position|module:engine/view/range~Range} positionOrRange The position where\n\t * to break attribute elements.\n\t * @returns {module:engine/view/position~Position|module:engine/view/range~Range} The new position or range, after breaking the\n\t * attribute elements.\n\t */\n\tbreakAttributes( positionOrRange ) {\n\t\tif ( positionOrRange instanceof Position ) {\n\t\t\treturn this._breakAttributes( positionOrRange );\n\t\t} else {\n\t\t\treturn this._breakAttributesRange( positionOrRange );\n\t\t}\n\t}\n\n\t/**\n\t * Breaks a {@link module:engine/view/containerelement~ContainerElement container view element} into two, at the given position.\n\t * The position has to be directly inside the container element and cannot be in the root. It does not break the conrainer view element\n\t * if the position is at the beginning or at the end of its parent element.\n\t *\n\t *\t\t<p>foo^bar</p> -> <p>foo</p><p>bar</p>\n\t *\t\t<div><p>foo</p>^<p>bar</p></div> -> <div><p>foo</p></div><div><p>bar</p></div>\n\t *\t\t<p>^foobar</p> -> ^<p>foobar</p>\n\t *\t\t<p>foobar^</p> -> <p>foobar</p>^\n\t *\n\t * **Note:** The difference between {@link module:engine/view/downcastwriter~DowncastWriter#breakAttributes breakAttributes()} and\n\t * {@link module:engine/view/downcastwriter~DowncastWriter#breakContainer breakContainer()} is that `breakAttributes()` breaks all\n\t * {@link module:engine/view/attributeelement~AttributeElement attribute elements} that are ancestors of a given `position`,\n\t * up to the first encountered {@link module:engine/view/containerelement~ContainerElement container element}.\n\t * `breakContainer()` assumes that the given `position` is directly in the container element and breaks that container element.\n\t *\n\t * @see module:engine/view/attributeelement~AttributeElement\n\t * @see module:engine/view/containerelement~ContainerElement\n\t * @see module:engine/view/downcastwriter~DowncastWriter#breakAttributes\n\t * @param {module:engine/view/position~Position} position The position where to break the element.\n\t * @returns {module:engine/view/position~Position} The position between broken elements. If an element has not been broken,\n\t * the returned position is placed either before or after it.\n\t */\n\tbreakContainer( position ) {\n\t\tconst element = position.parent;\n\n\t\tif ( !( element.is( 'containerElement' ) ) ) {\n\t\t\t/**\n\t\t\t * Trying to break an element which is not a container element.\n\t\t\t *\n\t\t\t * @error view-writer-break-non-container-element\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'view-writer-break-non-container-element', this.document );\n\t\t}\n\n\t\tif ( !element.parent ) {\n\t\t\t/**\n\t\t\t * Trying to break root element.\n\t\t\t *\n\t\t\t * @error view-writer-break-root\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'view-writer-break-root', this.document );\n\t\t}\n\n\t\tif ( position.isAtStart ) {\n\t\t\treturn Position._createBefore( element );\n\t\t} else if ( !position.isAtEnd ) {\n\t\t\tconst newElement = element._clone( false );\n\n\t\t\tthis.insert( Position._createAfter( element ), newElement );\n\n\t\t\tconst sourceRange = new Range( position, Position._createAt( element, 'end' ) );\n\t\t\tconst targetPosition = new Position( newElement, 0 );\n\n\t\t\tthis.move( sourceRange, targetPosition );\n\t\t}\n\n\t\treturn Position._createAfter( element );\n\t}\n\n\t/**\n\t * Merges {@link module:engine/view/attributeelement~AttributeElement attribute elements}. It also merges text nodes if needed.\n\t * Only {@link module:engine/view/attributeelement~AttributeElement#isSimilar similar} attribute elements can be merged.\n\t *\n\t * In following examples `<p>` is a container and `<b>` is an attribute element:\n\t *\n\t *\t\t<p>foo[]bar</p> -> <p>foo{}bar</p>\n\t *\t\t<p><b>foo</b>[]<b>bar</b></p> -> <p><b>foo{}bar</b></p>\n\t *\t\t<p><b foo=\"bar\">a</b>[]<b foo=\"baz\">b</b></p> -> <p><b foo=\"bar\">a</b>[]<b foo=\"baz\">b</b></p>\n\t *\n\t * It will also take care about empty attributes when merging:\n\t *\n\t *\t\t<p><b>[]</b></p> -> <p>[]</p>\n\t *\t\t<p><b>foo</b><i>[]</i><b>bar</b></p> -> <p><b>foo{}bar</b></p>\n\t *\n\t * **Note:** Difference between {@link module:engine/view/downcastwriter~DowncastWriter#mergeAttributes mergeAttributes} and\n\t * {@link module:engine/view/downcastwriter~DowncastWriter#mergeContainers mergeContainers} is that `mergeAttributes` merges two\n\t * {@link module:engine/view/attributeelement~AttributeElement attribute elements} or {@link module:engine/view/text~Text text nodes}\n\t * while `mergeContainer` merges two {@link module:engine/view/containerelement~ContainerElement container elements}.\n\t *\n\t * @see module:engine/view/attributeelement~AttributeElement\n\t * @see module:engine/view/containerelement~ContainerElement\n\t * @see module:engine/view/downcastwriter~DowncastWriter#mergeContainers\n\t * @param {module:engine/view/position~Position} position Merge position.\n\t * @returns {module:engine/view/position~Position} Position after merge.\n\t */\n\tmergeAttributes( position ) {\n\t\tconst positionOffset = position.offset;\n\t\tconst positionParent = position.parent;\n\n\t\t// When inside text node - nothing to merge.\n\t\tif ( positionParent.is( '$text' ) ) {\n\t\t\treturn position;\n\t\t}\n\n\t\t// When inside empty attribute - remove it.\n\t\tif ( positionParent.is( 'attributeElement' ) && positionParent.childCount === 0 ) {\n\t\t\tconst parent = positionParent.parent;\n\t\t\tconst offset = positionParent.index;\n\n\t\t\tpositionParent._remove();\n\t\t\tthis._removeFromClonedElementsGroup( positionParent );\n\n\t\t\treturn this.mergeAttributes( new Position( parent, offset ) );\n\t\t}\n\n\t\tconst nodeBefore = positionParent.getChild( positionOffset - 1 );\n\t\tconst nodeAfter = positionParent.getChild( positionOffset );\n\n\t\t// Position should be placed between two nodes.\n\t\tif ( !nodeBefore || !nodeAfter ) {\n\t\t\treturn position;\n\t\t}\n\n\t\t// When position is between two text nodes.\n\t\tif ( nodeBefore.is( '$text' ) && nodeAfter.is( '$text' ) ) {\n\t\t\treturn mergeTextNodes( nodeBefore, nodeAfter );\n\t\t}\n\t\t// When position is between two same attribute elements.\n\t\telse if ( nodeBefore.is( 'attributeElement' ) && nodeAfter.is( 'attributeElement' ) && nodeBefore.isSimilar( nodeAfter ) ) {\n\t\t\t// Move all children nodes from node placed after selection and remove that node.\n\t\t\tconst count = nodeBefore.childCount;\n\t\t\tnodeBefore._appendChild( nodeAfter.getChildren() );\n\n\t\t\tnodeAfter._remove();\n\t\t\tthis._removeFromClonedElementsGroup( nodeAfter );\n\n\t\t\t// New position is located inside the first node, before new nodes.\n\t\t\t// Call this method recursively to merge again if needed.\n\t\t\treturn this.mergeAttributes( new Position( nodeBefore, count ) );\n\t\t}\n\n\t\treturn position;\n\t}\n\n\t/**\n\t * Merges two {@link module:engine/view/containerelement~ContainerElement container elements} that are before and after given position.\n\t * Precisely, the element after the position is removed and it's contents are moved to element before the position.\n\t *\n\t *\t\t<p>foo</p>^<p>bar</p> -> <p>foo^bar</p>\n\t *\t\t<div>foo</div>^<p>bar</p> -> <div>foo^bar</div>\n\t *\n\t * **Note:** Difference between {@link module:engine/view/downcastwriter~DowncastWriter#mergeAttributes mergeAttributes} and\n\t * {@link module:engine/view/downcastwriter~DowncastWriter#mergeContainers mergeContainers} is that `mergeAttributes` merges two\n\t * {@link module:engine/view/attributeelement~AttributeElement attribute elements} or {@link module:engine/view/text~Text text nodes}\n\t * while `mergeContainer` merges two {@link module:engine/view/containerelement~ContainerElement container elements}.\n\t *\n\t * @see module:engine/view/attributeelement~AttributeElement\n\t * @see module:engine/view/containerelement~ContainerElement\n\t * @see module:engine/view/downcastwriter~DowncastWriter#mergeAttributes\n\t * @param {module:engine/view/position~Position} position Merge position.\n\t * @returns {module:engine/view/position~Position} Position after merge.\n\t */\n\tmergeContainers( position ) {\n\t\tconst prev = position.nodeBefore;\n\t\tconst next = position.nodeAfter;\n\n\t\tif ( !prev || !next || !prev.is( 'containerElement' ) || !next.is( 'containerElement' ) ) {\n\t\t\t/**\n\t\t\t * Element before and after given position cannot be merged.\n\t\t\t *\n\t\t\t * @error view-writer-merge-containers-invalid-position\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'view-writer-merge-containers-invalid-position', this.document );\n\t\t}\n\n\t\tconst lastChild = prev.getChild( prev.childCount - 1 );\n\t\tconst newPosition = lastChild instanceof Text ? Position._createAt( lastChild, 'end' ) : Position._createAt( prev, 'end' );\n\n\t\tthis.move( Range._createIn( next ), Position._createAt( prev, 'end' ) );\n\t\tthis.remove( Range._createOn( next ) );\n\n\t\treturn newPosition;\n\t}\n\n\t/**\n\t * Inserts a node or nodes at specified position. Takes care about breaking attributes before insertion\n\t * and merging them afterwards.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `view-writer-insert-invalid-node` when nodes to insert\n\t * contains instances that are not {@link module:engine/view/text~Text Texts},\n\t * {@link module:engine/view/attributeelement~AttributeElement AttributeElements},\n\t * {@link module:engine/view/containerelement~ContainerElement ContainerElements},\n\t * {@link module:engine/view/emptyelement~EmptyElement EmptyElements},\n\t * {@link module:engine/view/rawelement~RawElement RawElements} or\n\t * {@link module:engine/view/uielement~UIElement UIElements}.\n\t *\n\t * @param {module:engine/view/position~Position} position Insertion position.\n\t * @param {module:engine/view/text~Text|module:engine/view/attributeelement~AttributeElement|\n\t * module:engine/view/containerelement~ContainerElement|module:engine/view/emptyelement~EmptyElement|\n\t * module:engine/view/rawelement~RawElement|module:engine/view/uielement~UIElement|\n\t * Iterable.<module:engine/view/text~Text|\n\t * module:engine/view/attributeelement~AttributeElement|module:engine/view/containerelement~ContainerElement|\n\t * module:engine/view/emptyelement~EmptyElement|module:engine/view/rawelement~RawElement|\n\t * module:engine/view/uielement~UIElement>} nodes Node or nodes to insert.\n\t * @returns {module:engine/view/range~Range} Range around inserted nodes.\n\t */\n\tinsert( position, nodes ) {\n\t\tnodes = isIterable( nodes ) ? [ ...nodes ] : [ nodes ];\n\n\t\t// Check if nodes to insert are instances of AttributeElements, ContainerElements, EmptyElements, UIElements or Text.\n\t\tvalidateNodesToInsert( nodes, this.document );\n\n\t\tconst container = getParentContainer( position );\n\n\t\tif ( !container ) {\n\t\t\t/**\n\t\t\t * Position's parent container cannot be found.\n\t\t\t *\n\t\t\t * @error view-writer-invalid-position-container\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'view-writer-invalid-position-container',\n\t\t\t\tthis.document\n\t\t\t);\n\t\t}\n\n\t\tconst insertionPosition = this._breakAttributes( position, true );\n\t\tconst length = container._insertChild( insertionPosition.offset, nodes );\n\n\t\tfor ( const node of nodes ) {\n\t\t\tthis._addToClonedElementsGroup( node );\n\t\t}\n\n\t\tconst endPosition = insertionPosition.getShiftedBy( length );\n\t\tconst start = this.mergeAttributes( insertionPosition );\n\n\t\t// When no nodes were inserted - return collapsed range.\n\t\tif ( length === 0 ) {\n\t\t\treturn new Range( start, start );\n\t\t} else {\n\t\t\t// If start position was merged - move end position.\n\t\t\tif ( !start.isEqual( insertionPosition ) ) {\n\t\t\t\tendPosition.offset--;\n\t\t\t}\n\n\t\t\tconst end = this.mergeAttributes( endPosition );\n\n\t\t\treturn new Range( start, end );\n\t\t}\n\t}\n\n\t/**\n\t * Removes provided range from the container.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `view-writer-invalid-range-container` when\n\t * {@link module:engine/view/range~Range#start start} and {@link module:engine/view/range~Range#end end} positions are not placed inside\n\t * same parent container.\n\t *\n\t * @param {module:engine/view/range~Range|module:engine/view/item~Item} rangeOrItem Range to remove from container\n\t * or an {@link module:engine/view/item~Item item} to remove. If range is provided, after removing, it will be updated\n\t * to a collapsed range showing the new position.\n\t * @returns {module:engine/view/documentfragment~DocumentFragment} Document fragment containing removed nodes.\n\t */\n\tremove( rangeOrItem ) {\n\t\tconst range = rangeOrItem instanceof Range ? rangeOrItem : Range._createOn( rangeOrItem );\n\n\t\tvalidateRangeContainer( range, this.document );\n\n\t\t// If range is collapsed - nothing to remove.\n\t\tif ( range.isCollapsed ) {\n\t\t\treturn new DocumentFragment( this.document );\n\t\t}\n\n\t\t// Break attributes at range start and end.\n\t\tconst { start: breakStart, end: breakEnd } = this._breakAttributesRange( range, true );\n\t\tconst parentContainer = breakStart.parent;\n\n\t\tconst count = breakEnd.offset - breakStart.offset;\n\n\t\t// Remove nodes in range.\n\t\tconst removed = parentContainer._removeChildren( breakStart.offset, count );\n\n\t\tfor ( const node of removed ) {\n\t\t\tthis._removeFromClonedElementsGroup( node );\n\t\t}\n\n\t\t// Merge after removing.\n\t\tconst mergePosition = this.mergeAttributes( breakStart );\n\t\trange.start = mergePosition;\n\t\trange.end = mergePosition.clone();\n\n\t\t// Return removed nodes.\n\t\treturn new DocumentFragment( this.document, removed );\n\t}\n\n\t/**\n\t * Removes matching elements from given range.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `view-writer-invalid-range-container` when\n\t * {@link module:engine/view/range~Range#start start} and {@link module:engine/view/range~Range#end end} positions are not placed inside\n\t * same parent container.\n\t *\n\t * @param {module:engine/view/range~Range} range Range to clear.\n\t * @param {module:engine/view/element~Element} element Element to remove.\n\t */\n\tclear( range, element ) {\n\t\tvalidateRangeContainer( range, this.document );\n\n\t\t// Create walker on given range.\n\t\t// We walk backward because when we remove element during walk it modifies range end position.\n\t\tconst walker = range.getWalker( {\n\t\t\tdirection: 'backward',\n\t\t\tignoreElementEnd: true\n\t\t} );\n\n\t\t// Let's walk.\n\t\tfor ( const current of walker ) {\n\t\t\tconst item = current.item;\n\t\t\tlet rangeToRemove;\n\n\t\t\t// When current item matches to the given element.\n\t\t\tif ( item.is( 'element' ) && element.isSimilar( item ) ) {\n\t\t\t\t// Create range on this element.\n\t\t\t\trangeToRemove = Range._createOn( item );\n\t\t\t\t// When range starts inside Text or TextProxy element.\n\t\t\t} else if ( !current.nextPosition.isAfter( range.start ) && item.is( '$textProxy' ) ) {\n\t\t\t\t// We need to check if parent of this text matches to given element.\n\t\t\t\tconst parentElement = item.getAncestors().find( ancestor => {\n\t\t\t\t\treturn ancestor.is( 'element' ) && element.isSimilar( ancestor );\n\t\t\t\t} );\n\n\t\t\t\t// If it is then create range inside this element.\n\t\t\t\tif ( parentElement ) {\n\t\t\t\t\trangeToRemove = Range._createIn( parentElement );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If we have found element to remove.\n\t\t\tif ( rangeToRemove ) {\n\t\t\t\t// We need to check if element range stick out of the given range and truncate if it is.\n\t\t\t\tif ( rangeToRemove.end.isAfter( range.end ) ) {\n\t\t\t\t\trangeToRemove.end = range.end;\n\t\t\t\t}\n\n\t\t\t\tif ( rangeToRemove.start.isBefore( range.start ) ) {\n\t\t\t\t\trangeToRemove.start = range.start;\n\t\t\t\t}\n\n\t\t\t\t// At the end we remove range with found element.\n\t\t\t\tthis.remove( rangeToRemove );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Moves nodes from provided range to target position.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `view-writer-invalid-range-container` when\n\t * {@link module:engine/view/range~Range#start start} and {@link module:engine/view/range~Range#end end} positions are not placed inside\n\t * same parent container.\n\t *\n\t * @param {module:engine/view/range~Range} sourceRange Range containing nodes to move.\n\t * @param {module:engine/view/position~Position} targetPosition Position to insert.\n\t * @returns {module:engine/view/range~Range} Range in target container. Inserted nodes are placed between\n\t * {@link module:engine/view/range~Range#start start} and {@link module:engine/view/range~Range#end end} positions.\n\t */\n\tmove( sourceRange, targetPosition ) {\n\t\tlet nodes;\n\n\t\tif ( targetPosition.isAfter( sourceRange.end ) ) {\n\t\t\ttargetPosition = this._breakAttributes( targetPosition, true );\n\n\t\t\tconst parent = targetPosition.parent;\n\t\t\tconst countBefore = parent.childCount;\n\n\t\t\tsourceRange = this._breakAttributesRange( sourceRange, true );\n\n\t\t\tnodes = this.remove( sourceRange );\n\n\t\t\ttargetPosition.offset += ( parent.childCount - countBefore );\n\t\t} else {\n\t\t\tnodes = this.remove( sourceRange );\n\t\t}\n\n\t\treturn this.insert( targetPosition, nodes );\n\t}\n\n\t/**\n\t * Wraps elements within range with provided {@link module:engine/view/attributeelement~AttributeElement AttributeElement}.\n\t * If a collapsed range is provided, it will be wrapped only if it is equal to view selection.\n\t *\n\t * If a collapsed range was passed and is same as selection, the selection\n\t * will be moved to the inside of the wrapped attribute element.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError} `view-writer-invalid-range-container`\n\t * when {@link module:engine/view/range~Range#start}\n\t * and {@link module:engine/view/range~Range#end} positions are not placed inside same parent container.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError} `view-writer-wrap-invalid-attribute` when passed attribute element is not\n\t * an instance of {@link module:engine/view/attributeelement~AttributeElement AttributeElement}.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError} `view-writer-wrap-nonselection-collapsed-range` when passed range\n\t * is collapsed and different than view selection.\n\t *\n\t * @param {module:engine/view/range~Range} range Range to wrap.\n\t * @param {module:engine/view/attributeelement~AttributeElement} attribute Attribute element to use as wrapper.\n\t * @returns {module:engine/view/range~Range} range Range after wrapping, spanning over wrapping attribute element.\n\t */\n\twrap( range, attribute ) {\n\t\tif ( !( attribute instanceof AttributeElement ) ) {\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'view-writer-wrap-invalid-attribute',\n\t\t\t\tthis.document\n\t\t\t);\n\t\t}\n\n\t\tvalidateRangeContainer( range, this.document );\n\n\t\tif ( !range.isCollapsed ) {\n\t\t\t// Non-collapsed range. Wrap it with the attribute element.\n\t\t\treturn this._wrapRange( range, attribute );\n\t\t} else {\n\t\t\t// Collapsed range. Wrap position.\n\t\t\tlet position = range.start;\n\n\t\t\tif ( position.parent.is( 'element' ) && !_hasNonUiChildren( position.parent ) ) {\n\t\t\t\tposition = position.getLastMatchingPosition( value => value.item.is( 'uiElement' ) );\n\t\t\t}\n\n\t\t\tposition = this._wrapPosition( position, attribute );\n\t\t\tconst viewSelection = this.document.selection;\n\n\t\t\t// If wrapping position is equal to view selection, move view selection inside wrapping attribute element.\n\t\t\tif ( viewSelection.isCollapsed && viewSelection.getFirstPosition().isEqual( range.start ) ) {\n\t\t\t\tthis.setSelection( position );\n\t\t\t}\n\n\t\t\treturn new Range( position );\n\t\t}\n\t}\n\n\t/**\n\t * Unwraps nodes within provided range from attribute element.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `view-writer-invalid-range-container` when\n\t * {@link module:engine/view/range~Range#start start} and {@link module:engine/view/range~Range#end end} positions are not placed inside\n\t * same parent container.\n\t *\n\t * @param {module:engine/view/range~Range} range\n\t * @param {module:engine/view/attributeelement~AttributeElement} attribute\n\t */\n\tunwrap( range, attribute ) {\n\t\tif ( !( attribute instanceof AttributeElement ) ) {\n\t\t\t/**\n\t\t\t * The `attribute` passed to {@link module:engine/view/downcastwriter~DowncastWriter#unwrap `DowncastWriter#unwrap()`}\n\t\t\t * must be an instance of {@link module:engine/view/attributeelement~AttributeElement `AttributeElement`}.\n\t\t\t *\n\t\t\t * @error view-writer-unwrap-invalid-attribute\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'view-writer-unwrap-invalid-attribute',\n\t\t\t\tthis.document\n\t\t\t);\n\t\t}\n\n\t\tvalidateRangeContainer( range, this.document );\n\n\t\t// If range is collapsed - nothing to unwrap.\n\t\tif ( range.isCollapsed ) {\n\t\t\treturn range;\n\t\t}\n\n\t\t// Break attributes at range start and end.\n\t\tconst { start: breakStart, end: breakEnd } = this._breakAttributesRange( range, true );\n\t\tconst parentContainer = breakStart.parent;\n\n\t\t// Unwrap children located between break points.\n\t\tconst newRange = this._unwrapChildren( parentContainer, breakStart.offset, breakEnd.offset, attribute );\n\n\t\t// Merge attributes at the both ends and return a new range.\n\t\tconst start = this.mergeAttributes( newRange.start );\n\n\t\t// If start position was merged - move end position back.\n\t\tif ( !start.isEqual( newRange.start ) ) {\n\t\t\tnewRange.end.offset--;\n\t\t}\n\n\t\tconst end = this.mergeAttributes( newRange.end );\n\n\t\treturn new Range( start, end );\n\t}\n\n\t/**\n\t * Renames element by creating a copy of renamed element but with changed name and then moving contents of the\n\t * old element to the new one. Keep in mind that this will invalidate all {@link module:engine/view/position~Position positions} which\n\t * has renamed element as {@link module:engine/view/position~Position#parent a parent}.\n\t *\n\t * New element has to be created because `Element#tagName` property in DOM is readonly.\n\t *\n\t * Since this function creates a new element and removes the given one, the new element is returned to keep reference.\n\t *\n\t * @param {String} newName New name for element.\n\t * @param {module:engine/view/containerelement~ContainerElement} viewElement Element to be renamed.\n\t * @returns {module:engine/view/containerelement~ContainerElement} Element created due to rename.\n\t */\n\trename( newName, viewElement ) {\n\t\tconst newElement = new ContainerElement( this.document, newName, viewElement.getAttributes() );\n\n\t\tthis.insert( Position._createAfter( viewElement ), newElement );\n\t\tthis.move( Range._createIn( viewElement ), Position._createAt( newElement, 0 ) );\n\t\tthis.remove( Range._createOn( viewElement ) );\n\n\t\treturn newElement;\n\t}\n\n\t/**\n\t * Cleans up memory by removing obsolete cloned elements group from the writer.\n\t *\n\t * Should be used whenever all {@link module:engine/view/attributeelement~AttributeElement attribute elements}\n\t * with the same {@link module:engine/view/attributeelement~AttributeElement#id id} are going to be removed from the view and\n\t * the group will no longer be needed.\n\t *\n\t * Cloned elements group are not removed automatically in case if the group is still needed after all its elements\n\t * were removed from the view.\n\t *\n\t * Keep in mind that group names are equal to the `id` property of the attribute element.\n\t *\n\t * @param {String} groupName Name of the group to clear.\n\t */\n\tclearClonedElementsGroup( groupName ) {\n\t\tthis._cloneGroups.delete( groupName );\n\t}\n\n\t/**\n\t * Creates position at the given location. The location can be specified as:\n\t *\n\t * * a {@link module:engine/view/position~Position position},\n\t * * parent element and offset (offset defaults to `0`),\n\t * * parent element and `'end'` (sets position at the end of that element),\n\t * * {@link module:engine/view/item~Item view item} and `'before'` or `'after'` (sets position before or after given view item).\n\t *\n\t * This method is a shortcut to other constructors such as:\n\t *\n\t * * {@link #createPositionBefore},\n\t * * {@link #createPositionAfter},\n\t *\n\t * @param {module:engine/view/item~Item|module:engine/model/position~Position} itemOrPosition\n\t * @param {Number|'end'|'before'|'after'} [offset] Offset or one of the flags. Used only when\n\t * first parameter is a {@link module:engine/view/item~Item view item}.\n\t */\n\tcreatePositionAt( itemOrPosition, offset ) {\n\t\treturn Position._createAt( itemOrPosition, offset );\n\t}\n\n\t/**\n\t * Creates a new position after given view item.\n\t *\n\t * @param {module:engine/view/item~Item} item View item after which the position should be located.\n\t * @returns {module:engine/view/position~Position}\n\t */\n\tcreatePositionAfter( item ) {\n\t\treturn Position._createAfter( item );\n\t}\n\n\t/**\n\t * Creates a new position before given view item.\n\t *\n\t * @param {module:engine/view/item~Item} item View item before which the position should be located.\n\t * @returns {module:engine/view/position~Position}\n\t */\n\tcreatePositionBefore( item ) {\n\t\treturn Position._createBefore( item );\n\t}\n\n\t/**\n\t * Creates a range spanning from `start` position to `end` position.\n\t *\n\t * **Note:** This factory method creates its own {@link module:engine/view/position~Position} instances basing on passed values.\n\t *\n\t * @param {module:engine/view/position~Position} start Start position.\n\t * @param {module:engine/view/position~Position} [end] End position. If not set, range will be collapsed at `start` position.\n\t * @returns {module:engine/view/range~Range}\n\t */\n\tcreateRange( start, end ) {\n\t\treturn new Range( start, end );\n\t}\n\n\t/**\n\t * Creates a range that starts before given {@link module:engine/view/item~Item view item} and ends after it.\n\t *\n\t * @param {module:engine/view/item~Item} item\n\t * @returns {module:engine/view/range~Range}\n\t */\n\tcreateRangeOn( item ) {\n\t\treturn Range._createOn( item );\n\t}\n\n\t/**\n\t * Creates a range inside an {@link module:engine/view/element~Element element} which starts before the first child of\n\t * that element and ends after the last child of that element.\n\t *\n\t * @param {module:engine/view/element~Element} element Element which is a parent for the range.\n\t * @returns {module:engine/view/range~Range}\n\t */\n\tcreateRangeIn( element ) {\n\t\treturn Range._createIn( element );\n\t}\n\n\t/**\n\t Creates new {@link module:engine/view/selection~Selection} instance.\n\t *\n\t * \t\t// Creates empty selection without ranges.\n\t *\t\tconst selection = writer.createSelection();\n\t *\n\t *\t\t// Creates selection at the given range.\n\t *\t\tconst range = writer.createRange( start, end );\n\t *\t\tconst selection = writer.createSelection( range );\n\t *\n\t *\t\t// Creates selection at the given ranges\n\t * \t\tconst ranges = [ writer.createRange( start1, end2 ), writer.createRange( star2, end2 ) ];\n\t *\t\tconst selection = writer.createSelection( ranges );\n\t *\n\t *\t\t// Creates selection from the other selection.\n\t *\t\tconst otherSelection = writer.createSelection();\n\t *\t\tconst selection = writer.createSelection( otherSelection );\n\t *\n\t *\t\t// Creates selection from the document selection.\n\t *\t\tconst selection = writer.createSelection( editor.editing.view.document.selection );\n\t *\n\t * \t\t// Creates selection at the given position.\n\t *\t\tconst position = writer.createPositionFromPath( root, path );\n\t *\t\tconst selection = writer.createSelection( position );\n\t *\n\t *\t\t// Creates collapsed selection at the position of given item and offset.\n\t *\t\tconst paragraph = writer.createContainerElement( 'p' );\n\t *\t\tconst selection = writer.createSelection( paragraph, offset );\n\t *\n\t *\t\t// Creates a range inside an {@link module:engine/view/element~Element element} which starts before the\n\t *\t\t// first child of that element and ends after the last child of that element.\n\t *\t\tconst selection = writer.createSelection( paragraph, 'in' );\n\t *\n\t *\t\t// Creates a range on an {@link module:engine/view/item~Item item} which starts before the item and ends\n\t *\t\t// just after the item.\n\t *\t\tconst selection = writer.createSelection( paragraph, 'on' );\n\t *\n\t * `Selection`'s constructor allow passing additional options (`backward`, `fake` and `label`) as the last argument.\n\t *\n\t *\t\t// Creates backward selection.\n\t *\t\tconst selection = writer.createSelection( range, { backward: true } );\n\t *\n\t * Fake selection does not render as browser native selection over selected elements and is hidden to the user.\n\t * This way, no native selection UI artifacts are displayed to the user and selection over elements can be\n\t * represented in other way, for example by applying proper CSS class.\n\t *\n\t * Additionally fake's selection label can be provided. It will be used to describe fake selection in DOM\n\t * (and be  properly handled by screen readers).\n\t *\n\t *\t\t// Creates fake selection with label.\n\t *\t\tconst selection = writer.createSelection( range, { fake: true, label: 'foo' } );\n\t *\n\t * @param {module:engine/view/selection~Selectable} [selectable=null]\n\t * @param {Number|'before'|'end'|'after'|'on'|'in'} [placeOrOffset] Offset or place when selectable is an `Item`.\n\t * @param {Object} [options]\n\t * @param {Boolean} [options.backward] Sets this selection instance to be backward.\n\t * @param {Boolean} [options.fake] Sets this selection instance to be marked as `fake`.\n\t * @param {String} [options.label] Label for the fake selection.\n\t * @returns {module:engine/view/selection~Selection}\n\t */\n\tcreateSelection( selectable, placeOrOffset, options ) {\n\t\treturn new Selection( selectable, placeOrOffset, options );\n\t}\n\n\t/**\n\t * Wraps children with provided `wrapElement`. Only children contained in `parent` element between\n\t * `startOffset` and `endOffset` will be wrapped.\n\t *\n\t * @private\n\t * @param {module:engine/view/element~Element} parent\n\t * @param {Number} startOffset\n\t * @param {Number} endOffset\n\t * @param {module:engine/view/element~Element} wrapElement\n\t */\n\t_wrapChildren( parent, startOffset, endOffset, wrapElement ) {\n\t\tlet i = startOffset;\n\t\tconst wrapPositions = [];\n\n\t\twhile ( i < endOffset ) {\n\t\t\tconst child = parent.getChild( i );\n\t\t\tconst isText = child.is( '$text' );\n\t\t\tconst isAttribute = child.is( 'attributeElement' );\n\t\t\tconst isEmpty = child.is( 'emptyElement' );\n\t\t\tconst isUI = child.is( 'uiElement' );\n\t\t\tconst isRaw = child.is( 'rawElement' );\n\n\t\t\t//\n\t\t\t// (In all examples, assume that `wrapElement` is `<span class=\"foo\">` element.)\n\t\t\t//\n\t\t\t// Check if `wrapElement` can be joined with the wrapped element. One of requirements is having same name.\n\t\t\t// If possible, join elements.\n\t\t\t//\n\t\t\t// <p><span class=\"bar\">abc</span></p>  -->  <p><span class=\"foo bar\">abc</span></p>\n\t\t\t//\n\t\t\tif ( isAttribute && this._wrapAttributeElement( wrapElement, child ) ) {\n\t\t\t\twrapPositions.push( new Position( parent, i ) );\n\t\t\t}\n\t\t\t//\n\t\t\t// Wrap the child if it is not an attribute element or if it is an attribute element that should be inside\n\t\t\t// `wrapElement` (due to priority).\n\t\t\t//\n\t\t\t// <p>abc</p>                   -->  <p><span class=\"foo\">abc</span></p>\n\t\t\t// <p><strong>abc</strong></p>  -->  <p><span class=\"foo\"><strong>abc</strong></span></p>\n\t\t\telse if ( isText || isEmpty || isUI || isRaw || ( isAttribute && shouldABeOutsideB( wrapElement, child ) ) ) {\n\t\t\t\t// Clone attribute.\n\t\t\t\tconst newAttribute = wrapElement._clone();\n\n\t\t\t\t// Wrap current node with new attribute.\n\t\t\t\tchild._remove();\n\t\t\t\tnewAttribute._appendChild( child );\n\n\t\t\t\tparent._insertChild( i, newAttribute );\n\t\t\t\tthis._addToClonedElementsGroup( newAttribute );\n\n\t\t\t\twrapPositions.push( new Position( parent, i ) );\n\t\t\t}\n\t\t\t//\n\t\t\t// If other nested attribute is found and it wasn't wrapped (see above), continue wrapping inside it.\n\t\t\t//\n\t\t\t// <p><a href=\"foo.html\">abc</a></p>  -->  <p><a href=\"foo.html\"><span class=\"foo\">abc</span></a></p>\n\t\t\t//\n\t\t\telse if ( isAttribute ) {\n\t\t\t\tthis._wrapChildren( child, 0, child.childCount, wrapElement );\n\t\t\t}\n\n\t\t\ti++;\n\t\t}\n\n\t\t// Merge at each wrap.\n\t\tlet offsetChange = 0;\n\n\t\tfor ( const position of wrapPositions ) {\n\t\t\tposition.offset -= offsetChange;\n\n\t\t\t// Do not merge with elements outside selected children.\n\t\t\tif ( position.offset == startOffset ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst newPosition = this.mergeAttributes( position );\n\n\t\t\t// If nodes were merged - other merge offsets will change.\n\t\t\tif ( !newPosition.isEqual( position ) ) {\n\t\t\t\toffsetChange++;\n\t\t\t\tendOffset--;\n\t\t\t}\n\t\t}\n\n\t\treturn Range._createFromParentsAndOffsets( parent, startOffset, parent, endOffset );\n\t}\n\n\t/**\n\t * Unwraps children from provided `unwrapElement`. Only children contained in `parent` element between\n\t * `startOffset` and `endOffset` will be unwrapped.\n\t *\n\t * @private\n\t * @param {module:engine/view/element~Element} parent\n\t * @param {Number} startOffset\n\t * @param {Number} endOffset\n\t * @param {module:engine/view/element~Element} unwrapElement\n\t */\n\t_unwrapChildren( parent, startOffset, endOffset, unwrapElement ) {\n\t\tlet i = startOffset;\n\t\tconst unwrapPositions = [];\n\n\t\t// Iterate over each element between provided offsets inside parent.\n\t\t// We don't use tree walker or range iterator because we will be removing and merging potentially multiple nodes,\n\t\t// so it could get messy. It is safer to it manually in this case.\n\t\twhile ( i < endOffset ) {\n\t\t\tconst child = parent.getChild( i );\n\n\t\t\t// Skip all text nodes. There should be no container element's here either.\n\t\t\tif ( !child.is( 'attributeElement' ) ) {\n\t\t\t\ti++;\n\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t//\n\t\t\t// (In all examples, assume that `unwrapElement` is `<span class=\"foo\">` element.)\n\t\t\t//\n\t\t\t// If the child is similar to the given attribute element, unwrap it - it will be completely removed.\n\t\t\t//\n\t\t\t// <p><span class=\"foo\">abc</span>xyz</p>  -->  <p>abcxyz</p>\n\t\t\t//\n\t\t\tif ( child.isSimilar( unwrapElement ) ) {\n\t\t\t\tconst unwrapped = child.getChildren();\n\t\t\t\tconst count = child.childCount;\n\n\t\t\t\t// Replace wrapper element with its children\n\t\t\t\tchild._remove();\n\t\t\t\tparent._insertChild( i, unwrapped );\n\n\t\t\t\tthis._removeFromClonedElementsGroup( child );\n\n\t\t\t\t// Save start and end position of moved items.\n\t\t\t\tunwrapPositions.push(\n\t\t\t\t\tnew Position( parent, i ),\n\t\t\t\t\tnew Position( parent, i + count )\n\t\t\t\t);\n\n\t\t\t\t// Skip elements that were unwrapped. Assuming there won't be another element to unwrap in child elements.\n\t\t\t\ti += count;\n\t\t\t\tendOffset += count - 1;\n\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t//\n\t\t\t// If the child is not similar but is an attribute element, try partial unwrapping - remove the same attributes/styles/classes.\n\t\t\t// Partial unwrapping will happen only if the elements have the same name.\n\t\t\t//\n\t\t\t// <p><span class=\"foo bar\">abc</span>xyz</p>  -->  <p><span class=\"bar\">abc</span>xyz</p>\n\t\t\t// <p><i class=\"foo\">abc</i>xyz</p>            -->  <p><i class=\"foo\">abc</i>xyz</p>\n\t\t\t//\n\t\t\tif ( this._unwrapAttributeElement( unwrapElement, child ) ) {\n\t\t\t\tunwrapPositions.push(\n\t\t\t\t\tnew Position( parent, i ),\n\t\t\t\t\tnew Position( parent, i + 1 )\n\t\t\t\t);\n\n\t\t\t\ti++;\n\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t//\n\t\t\t// If other nested attribute is found, look through it's children for elements to unwrap.\n\t\t\t//\n\t\t\t// <p><i><span class=\"foo\">abc</span></i><p>  -->  <p><i>abc</i><p>\n\t\t\t//\n\t\t\tthis._unwrapChildren( child, 0, child.childCount, unwrapElement );\n\n\t\t\ti++;\n\t\t}\n\n\t\t// Merge at each unwrap.\n\t\tlet offsetChange = 0;\n\n\t\tfor ( const position of unwrapPositions ) {\n\t\t\tposition.offset -= offsetChange;\n\n\t\t\t// Do not merge with elements outside selected children.\n\t\t\tif ( position.offset == startOffset || position.offset == endOffset ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst newPosition = this.mergeAttributes( position );\n\n\t\t\t// If nodes were merged - other merge offsets will change.\n\t\t\tif ( !newPosition.isEqual( position ) ) {\n\t\t\t\toffsetChange++;\n\t\t\t\tendOffset--;\n\t\t\t}\n\t\t}\n\n\t\treturn Range._createFromParentsAndOffsets( parent, startOffset, parent, endOffset );\n\t}\n\n\t/**\n\t * Helper function for `view.writer.wrap`. Wraps range with provided attribute element.\n\t * This method will also merge newly added attribute element with its siblings whenever possible.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError} `view-writer-wrap-invalid-attribute` when passed attribute element is not\n\t * an instance of {@link module:engine/view/attributeelement~AttributeElement AttributeElement}.\n\t *\n\t * @private\n\t * @param {module:engine/view/range~Range} range\n\t * @param {module:engine/view/attributeelement~AttributeElement} attribute\n\t * @returns {module:engine/view/range~Range} New range after wrapping, spanning over wrapping attribute element.\n\t */\n\t_wrapRange( range, attribute ) {\n\t\t// Break attributes at range start and end.\n\t\tconst { start: breakStart, end: breakEnd } = this._breakAttributesRange( range, true );\n\t\tconst parentContainer = breakStart.parent;\n\n\t\t// Wrap all children with attribute.\n\t\tconst newRange = this._wrapChildren( parentContainer, breakStart.offset, breakEnd.offset, attribute );\n\n\t\t// Merge attributes at the both ends and return a new range.\n\t\tconst start = this.mergeAttributes( newRange.start );\n\n\t\t// If start position was merged - move end position back.\n\t\tif ( !start.isEqual( newRange.start ) ) {\n\t\t\tnewRange.end.offset--;\n\t\t}\n\t\tconst end = this.mergeAttributes( newRange.end );\n\n\t\treturn new Range( start, end );\n\t}\n\n\t/**\n\t * Helper function for {@link #wrap}. Wraps position with provided attribute element.\n\t * This method will also merge newly added attribute element with its siblings whenever possible.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError} `view-writer-wrap-invalid-attribute` when passed attribute element is not\n\t * an instance of {@link module:engine/view/attributeelement~AttributeElement AttributeElement}.\n\t *\n\t * @private\n\t * @param {module:engine/view/position~Position} position\n\t * @param {module:engine/view/attributeelement~AttributeElement} attribute\n\t * @returns {module:engine/view/position~Position} New position after wrapping.\n\t */\n\t_wrapPosition( position, attribute ) {\n\t\t// Return same position when trying to wrap with attribute similar to position parent.\n\t\tif ( attribute.isSimilar( position.parent ) ) {\n\t\t\treturn movePositionToTextNode( position.clone() );\n\t\t}\n\n\t\t// When position is inside text node - break it and place new position between two text nodes.\n\t\tif ( position.parent.is( '$text' ) ) {\n\t\t\tposition = breakTextNode( position );\n\t\t}\n\n\t\t// Create fake element that will represent position, and will not be merged with other attributes.\n\t\tconst fakePosition = this.createAttributeElement();\n\t\tfakePosition._priority = Number.POSITIVE_INFINITY;\n\t\tfakePosition.isSimilar = () => false;\n\n\t\t// Insert fake element in position location.\n\t\tposition.parent._insertChild( position.offset, fakePosition );\n\n\t\t// Range around inserted fake attribute element.\n\t\tconst wrapRange = new Range( position, position.getShiftedBy( 1 ) );\n\n\t\t// Wrap fake element with attribute (it will also merge if possible).\n\t\tthis.wrap( wrapRange, attribute );\n\n\t\t// Remove fake element and place new position there.\n\t\tconst newPosition = new Position( fakePosition.parent, fakePosition.index );\n\t\tfakePosition._remove();\n\n\t\t// If position is placed between text nodes - merge them and return position inside.\n\t\tconst nodeBefore = newPosition.nodeBefore;\n\t\tconst nodeAfter = newPosition.nodeAfter;\n\n\t\tif ( nodeBefore instanceof Text && nodeAfter instanceof Text ) {\n\t\t\treturn mergeTextNodes( nodeBefore, nodeAfter );\n\t\t}\n\n\t\t// If position is next to text node - move position inside.\n\t\treturn movePositionToTextNode( newPosition );\n\t}\n\n\t/**\n\t * \tWraps one {@link module:engine/view/attributeelement~AttributeElement AttributeElement} into another by\n\t * \tmerging them if possible. When merging is possible - all attributes, styles and classes are moved from wrapper\n\t * \telement to element being wrapped.\n\t *\n\t * \t@private\n\t * \t@param {module:engine/view/attributeelement~AttributeElement} wrapper Wrapper AttributeElement.\n\t * \t@param {module:engine/view/attributeelement~AttributeElement} toWrap AttributeElement to wrap using wrapper element.\n\t * \t@returns {Boolean} Returns `true` if elements are merged.\n\t */\n\t_wrapAttributeElement( wrapper, toWrap ) {\n\t\tif ( !canBeJoined( wrapper, toWrap ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Can't merge if name or priority differs.\n\t\tif ( wrapper.name !== toWrap.name || wrapper.priority !== toWrap.priority ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Check if attributes can be merged.\n\t\tfor ( const key of wrapper.getAttributeKeys() ) {\n\t\t\t// Classes and styles should be checked separately.\n\t\t\tif ( key === 'class' || key === 'style' ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// If some attributes are different we cannot wrap.\n\t\t\tif ( toWrap.hasAttribute( key ) && toWrap.getAttribute( key ) !== wrapper.getAttribute( key ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\t// Check if styles can be merged.\n\t\tfor ( const key of wrapper.getStyleNames() ) {\n\t\t\tif ( toWrap.hasStyle( key ) && toWrap.getStyle( key ) !== wrapper.getStyle( key ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\t// Move all attributes/classes/styles from wrapper to wrapped AttributeElement.\n\t\tfor ( const key of wrapper.getAttributeKeys() ) {\n\t\t\t// Classes and styles should be checked separately.\n\t\t\tif ( key === 'class' || key === 'style' ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Move only these attributes that are not present - other are similar.\n\t\t\tif ( !toWrap.hasAttribute( key ) ) {\n\t\t\t\tthis.setAttribute( key, wrapper.getAttribute( key ), toWrap );\n\t\t\t}\n\t\t}\n\n\t\tfor ( const key of wrapper.getStyleNames() ) {\n\t\t\tif ( !toWrap.hasStyle( key ) ) {\n\t\t\t\tthis.setStyle( key, wrapper.getStyle( key ), toWrap );\n\t\t\t}\n\t\t}\n\n\t\tfor ( const key of wrapper.getClassNames() ) {\n\t\t\tif ( !toWrap.hasClass( key ) ) {\n\t\t\t\tthis.addClass( key, toWrap );\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Unwraps {@link module:engine/view/attributeelement~AttributeElement AttributeElement} from another by removing\n\t * corresponding attributes, classes and styles. All attributes, classes and styles from wrapper should be present\n\t * inside element being unwrapped.\n\t *\n\t * @private\n\t * @param {module:engine/view/attributeelement~AttributeElement} wrapper Wrapper AttributeElement.\n\t * @param {module:engine/view/attributeelement~AttributeElement} toUnwrap AttributeElement to unwrap using wrapper element.\n\t * @returns {Boolean} Returns `true` if elements are unwrapped.\n\t **/\n\t_unwrapAttributeElement( wrapper, toUnwrap ) {\n\t\tif ( !canBeJoined( wrapper, toUnwrap ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Can't unwrap if name or priority differs.\n\t\tif ( wrapper.name !== toUnwrap.name || wrapper.priority !== toUnwrap.priority ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Check if AttributeElement has all wrapper attributes.\n\t\tfor ( const key of wrapper.getAttributeKeys() ) {\n\t\t\t// Classes and styles should be checked separately.\n\t\t\tif ( key === 'class' || key === 'style' ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// If some attributes are missing or different we cannot unwrap.\n\t\t\tif ( !toUnwrap.hasAttribute( key ) || toUnwrap.getAttribute( key ) !== wrapper.getAttribute( key ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\t// Check if AttributeElement has all wrapper classes.\n\t\tif ( !toUnwrap.hasClass( ...wrapper.getClassNames() ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Check if AttributeElement has all wrapper styles.\n\t\tfor ( const key of wrapper.getStyleNames() ) {\n\t\t\t// If some styles are missing or different we cannot unwrap.\n\t\t\tif ( !toUnwrap.hasStyle( key ) || toUnwrap.getStyle( key ) !== wrapper.getStyle( key ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\t// Remove all wrapper's attributes from unwrapped element.\n\t\tfor ( const key of wrapper.getAttributeKeys() ) {\n\t\t\t// Classes and styles should be checked separately.\n\t\t\tif ( key === 'class' || key === 'style' ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tthis.removeAttribute( key, toUnwrap );\n\t\t}\n\n\t\t// Remove all wrapper's classes from unwrapped element.\n\t\tthis.removeClass( Array.from( wrapper.getClassNames() ), toUnwrap );\n\n\t\t// Remove all wrapper's styles from unwrapped element.\n\t\tthis.removeStyle( Array.from( wrapper.getStyleNames() ), toUnwrap );\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Helper function used by other `DowncastWriter` methods. Breaks attribute elements at the boundaries of given range.\n\t *\n\t * @private\n\t * @param {module:engine/view/range~Range} range Range which `start` and `end` positions will be used to break attributes.\n\t * @param {Boolean} [forceSplitText=false] If set to `true`, will break text nodes even if they are directly in container element.\n\t * This behavior will result in incorrect view state, but is needed by other view writing methods which then fixes view state.\n\t * @returns {module:engine/view/range~Range} New range with located at break positions.\n\t */\n\t_breakAttributesRange( range, forceSplitText = false ) {\n\t\tconst rangeStart = range.start;\n\t\tconst rangeEnd = range.end;\n\n\t\tvalidateRangeContainer( range, this.document );\n\n\t\t// Break at the collapsed position. Return new collapsed range.\n\t\tif ( range.isCollapsed ) {\n\t\t\tconst position = this._breakAttributes( range.start, forceSplitText );\n\n\t\t\treturn new Range( position, position );\n\t\t}\n\n\t\tconst breakEnd = this._breakAttributes( rangeEnd, forceSplitText );\n\t\tconst count = breakEnd.parent.childCount;\n\t\tconst breakStart = this._breakAttributes( rangeStart, forceSplitText );\n\n\t\t// Calculate new break end offset.\n\t\tbreakEnd.offset += breakEnd.parent.childCount - count;\n\n\t\treturn new Range( breakStart, breakEnd );\n\t}\n\n\t/**\n\t * Helper function used by other `DowncastWriter` methods. Breaks attribute elements at given position.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `view-writer-cannot-break-empty-element` when break position\n\t * is placed inside {@link module:engine/view/emptyelement~EmptyElement EmptyElement}.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `view-writer-cannot-break-ui-element` when break position\n\t * is placed inside {@link module:engine/view/uielement~UIElement UIElement}.\n\t *\n\t * @private\n\t * @param {module:engine/view/position~Position} position Position where to break attributes.\n\t * @param {Boolean} [forceSplitText=false] If set to `true`, will break text nodes even if they are directly in container element.\n\t * This behavior will result in incorrect view state, but is needed by other view writing methods which then fixes view state.\n\t * @returns {module:engine/view/position~Position} New position after breaking the attributes.\n\t */\n\t_breakAttributes( position, forceSplitText = false ) {\n\t\tconst positionOffset = position.offset;\n\t\tconst positionParent = position.parent;\n\n\t\t// If position is placed inside EmptyElement - throw an exception as we cannot break inside.\n\t\tif ( position.parent.is( 'emptyElement' ) ) {\n\t\t\t/**\n\t\t\t * Cannot break an `EmptyElement` instance.\n\t\t\t *\n\t\t\t * This error is thrown if\n\t\t\t * {@link module:engine/view/downcastwriter~DowncastWriter#breakAttributes `DowncastWriter#breakAttributes()`}\n\t\t\t * was executed in an incorrect position.\n\t\t\t *\n\t\t\t * @error view-writer-cannot-break-empty-element\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'view-writer-cannot-break-empty-element', this.document );\n\t\t}\n\n\t\t// If position is placed inside UIElement - throw an exception as we cannot break inside.\n\t\tif ( position.parent.is( 'uiElement' ) ) {\n\t\t\t/**\n\t\t\t * Cannot break a `UIElement` instance.\n\t\t\t *\n\t\t\t * This error is thrown if\n\t\t\t * {@link module:engine/view/downcastwriter~DowncastWriter#breakAttributes `DowncastWriter#breakAttributes()`}\n\t\t\t * was executed in an incorrect position.\n\t\t\t *\n\t\t\t * @error view-writer-cannot-break-ui-element\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'view-writer-cannot-break-ui-element', this.document );\n\t\t}\n\n\t\t// If position is placed inside RawElement - throw an exception as we cannot break inside.\n\t\tif ( position.parent.is( 'rawElement' ) ) {\n\t\t\t/**\n\t\t\t * Cannot break a `RawElement` instance.\n\t\t\t *\n\t\t\t * This error is thrown if\n\t\t\t * {@link module:engine/view/downcastwriter~DowncastWriter#breakAttributes `DowncastWriter#breakAttributes()`}\n\t\t\t * was executed in an incorrect position.\n\t\t\t *\n\t\t\t * @error view-writer-cannot-break-raw-element\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'view-writer-cannot-break-raw-element', this.document );\n\t\t}\n\n\t\t// There are no attributes to break and text nodes breaking is not forced.\n\t\tif ( !forceSplitText && positionParent.is( '$text' ) && isContainerOrFragment( positionParent.parent ) ) {\n\t\t\treturn position.clone();\n\t\t}\n\n\t\t// Position's parent is container, so no attributes to break.\n\t\tif ( isContainerOrFragment( positionParent ) ) {\n\t\t\treturn position.clone();\n\t\t}\n\n\t\t// Break text and start again in new position.\n\t\tif ( positionParent.is( '$text' ) ) {\n\t\t\treturn this._breakAttributes( breakTextNode( position ), forceSplitText );\n\t\t}\n\n\t\tconst length = positionParent.childCount;\n\n\t\t// <p>foo<b><u>bar{}</u></b></p>\n\t\t// <p>foo<b><u>bar</u>[]</b></p>\n\t\t// <p>foo<b><u>bar</u></b>[]</p>\n\t\tif ( positionOffset == length ) {\n\t\t\tconst newPosition = new Position( positionParent.parent, positionParent.index + 1 );\n\n\t\t\treturn this._breakAttributes( newPosition, forceSplitText );\n\t\t} else {\n\t\t\t// <p>foo<b><u>{}bar</u></b></p>\n\t\t\t// <p>foo<b>[]<u>bar</u></b></p>\n\t\t\t// <p>foo{}<b><u>bar</u></b></p>\n\t\t\tif ( positionOffset === 0 ) {\n\t\t\t\tconst newPosition = new Position( positionParent.parent, positionParent.index );\n\n\t\t\t\treturn this._breakAttributes( newPosition, forceSplitText );\n\t\t\t}\n\t\t\t// <p>foo<b><u>b{}ar</u></b></p>\n\t\t\t// <p>foo<b><u>b[]ar</u></b></p>\n\t\t\t// <p>foo<b><u>b</u>[]<u>ar</u></b></p>\n\t\t\t// <p>foo<b><u>b</u></b>[]<b><u>ar</u></b></p>\n\t\t\telse {\n\t\t\t\tconst offsetAfter = positionParent.index + 1;\n\n\t\t\t\t// Break element.\n\t\t\t\tconst clonedNode = positionParent._clone();\n\n\t\t\t\t// Insert cloned node to position's parent node.\n\t\t\t\tpositionParent.parent._insertChild( offsetAfter, clonedNode );\n\t\t\t\tthis._addToClonedElementsGroup( clonedNode );\n\n\t\t\t\t// Get nodes to move.\n\t\t\t\tconst count = positionParent.childCount - positionOffset;\n\t\t\t\tconst nodesToMove = positionParent._removeChildren( positionOffset, count );\n\n\t\t\t\t// Move nodes to cloned node.\n\t\t\t\tclonedNode._appendChild( nodesToMove );\n\n\t\t\t\t// Create new position to work on.\n\t\t\t\tconst newPosition = new Position( positionParent.parent, offsetAfter );\n\n\t\t\t\treturn this._breakAttributes( newPosition, forceSplitText );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Stores the information that an {@link module:engine/view/attributeelement~AttributeElement attribute element} was\n\t * added to the tree. Saves the reference to the group in the given element and updates the group, so other elements\n\t * from the group now keep a reference to the given attribute element.\n\t *\n\t * The clones group can be obtained using {@link module:engine/view/attributeelement~AttributeElement#getElementsWithSameId}.\n\t *\n\t * Does nothing if added element has no {@link module:engine/view/attributeelement~AttributeElement#id id}.\n\t *\n\t * @private\n\t * @param {module:engine/view/attributeelement~AttributeElement} element Attribute element to save.\n\t */\n\t_addToClonedElementsGroup( element ) {\n\t\t// Add only if the element is in document tree.\n\t\tif ( !element.root.is( 'rootElement' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Traverse the element's children recursively to find other attribute elements that also might got inserted.\n\t\t// The loop is at the beginning so we can make fast returns later in the code.\n\t\tif ( element.is( 'element' ) ) {\n\t\t\tfor ( const child of element.getChildren() ) {\n\t\t\t\tthis._addToClonedElementsGroup( child );\n\t\t\t}\n\t\t}\n\n\t\tconst id = element.id;\n\n\t\tif ( !id ) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet group = this._cloneGroups.get( id );\n\n\t\tif ( !group ) {\n\t\t\tgroup = new Set();\n\t\t\tthis._cloneGroups.set( id, group );\n\t\t}\n\n\t\tgroup.add( element );\n\t\telement._clonesGroup = group;\n\t}\n\n\t/**\n\t * Removes all the information about the given {@link module:engine/view/attributeelement~AttributeElement attribute element}\n\t * from its clones group.\n\t *\n\t * Keep in mind, that the element will still keep a reference to the group (but the group will not keep a reference to it).\n\t * This allows to reference the whole group even if the element was already removed from the tree.\n\t *\n\t * Does nothing if the element has no {@link module:engine/view/attributeelement~AttributeElement#id id}.\n\t *\n\t * @private\n\t * @param {module:engine/view/attributeelement~AttributeElement} element Attribute element to remove.\n\t */\n\t_removeFromClonedElementsGroup( element ) {\n\t\t// Traverse the element's children recursively to find other attribute elements that also got removed.\n\t\t// The loop is at the beginning so we can make fast returns later in the code.\n\t\tif ( element.is( 'element' ) ) {\n\t\t\tfor ( const child of element.getChildren() ) {\n\t\t\t\tthis._removeFromClonedElementsGroup( child );\n\t\t\t}\n\t\t}\n\n\t\tconst id = element.id;\n\n\t\tif ( !id ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst group = this._cloneGroups.get( id );\n\n\t\tif ( !group ) {\n\t\t\treturn;\n\t\t}\n\n\t\tgroup.delete( element );\n\t\t// Not removing group from element on purpose!\n\t\t// If other parts of code have reference to this element, they will be able to get references to other elements from the group.\n\t}\n}\n\n// Helper function for `view.writer.wrap`. Checks if given element has any children that are not ui elements.\nfunction _hasNonUiChildren( parent ) {\n\treturn Array.from( parent.getChildren() ).some( child => !child.is( 'uiElement' ) );\n}\n\n/**\n * The `attribute` passed to {@link module:engine/view/downcastwriter~DowncastWriter#wrap `DowncastWriter#wrap()`}\n * must be an instance of {@link module:engine/view/attributeelement~AttributeElement `AttributeElement`}.\n *\n * @error view-writer-wrap-invalid-attribute\n */\n\n// Returns first parent container of specified {@link module:engine/view/position~Position Position}.\n// Position's parent node is checked as first, then next parents are checked.\n// Note that {@link module:engine/view/documentfragment~DocumentFragment DocumentFragment} is treated like a container.\n//\n// @param {module:engine/view/position~Position} position Position used as a start point to locate parent container.\n// @returns {module:engine/view/containerelement~ContainerElement|module:engine/view/documentfragment~DocumentFragment|undefined}\n// Parent container element or `undefined` if container is not found.\nfunction getParentContainer( position ) {\n\tlet parent = position.parent;\n\n\twhile ( !isContainerOrFragment( parent ) ) {\n\t\tif ( !parent ) {\n\t\t\treturn undefined;\n\t\t}\n\t\tparent = parent.parent;\n\t}\n\n\treturn parent;\n}\n\n// Checks if first {@link module:engine/view/attributeelement~AttributeElement AttributeElement} provided to the function\n// can be wrapped otuside second element. It is done by comparing elements'\n// {@link module:engine/view/attributeelement~AttributeElement#priority priorities}, if both have same priority\n// {@link module:engine/view/element~Element#getIdentity identities} are compared.\n//\n// @param {module:engine/view/attributeelement~AttributeElement} a\n// @param {module:engine/view/attributeelement~AttributeElement} b\n// @returns {Boolean}\nfunction shouldABeOutsideB( a, b ) {\n\tif ( a.priority < b.priority ) {\n\t\treturn true;\n\t} else if ( a.priority > b.priority ) {\n\t\treturn false;\n\t}\n\n\t// When priorities are equal and names are different - use identities.\n\treturn a.getIdentity() < b.getIdentity();\n}\n\n// Returns new position that is moved to near text node. Returns same position if there is no text node before of after\n// specified position.\n//\n//\t\t<p>foo[]</p>  ->  <p>foo{}</p>\n//\t\t<p>[]foo</p>  ->  <p>{}foo</p>\n//\n// @param {module:engine/view/position~Position} position\n// @returns {module:engine/view/position~Position} Position located inside text node or same position if there is no text nodes\n// before or after position location.\nfunction movePositionToTextNode( position ) {\n\tconst nodeBefore = position.nodeBefore;\n\n\tif ( nodeBefore && nodeBefore.is( '$text' ) ) {\n\t\treturn new Position( nodeBefore, nodeBefore.data.length );\n\t}\n\n\tconst nodeAfter = position.nodeAfter;\n\n\tif ( nodeAfter && nodeAfter.is( '$text' ) ) {\n\t\treturn new Position( nodeAfter, 0 );\n\t}\n\n\treturn position;\n}\n\n// Breaks text node into two text nodes when possible.\n//\n//\t\t<p>foo{}bar</p> -> <p>foo[]bar</p>\n//\t\t<p>{}foobar</p> -> <p>[]foobar</p>\n//\t\t<p>foobar{}</p> -> <p>foobar[]</p>\n//\n// @param {module:engine/view/position~Position} position Position that need to be placed inside text node.\n// @returns {module:engine/view/position~Position} New position after breaking text node.\nfunction breakTextNode( position ) {\n\tif ( position.offset == position.parent.data.length ) {\n\t\treturn new Position( position.parent.parent, position.parent.index + 1 );\n\t}\n\n\tif ( position.offset === 0 ) {\n\t\treturn new Position( position.parent.parent, position.parent.index );\n\t}\n\n\t// Get part of the text that need to be moved.\n\tconst textToMove = position.parent.data.slice( position.offset );\n\n\t// Leave rest of the text in position's parent.\n\tposition.parent._data = position.parent.data.slice( 0, position.offset );\n\n\t// Insert new text node after position's parent text node.\n\tposition.parent.parent._insertChild( position.parent.index + 1, new Text( position.root.document, textToMove ) );\n\n\t// Return new position between two newly created text nodes.\n\treturn new Position( position.parent.parent, position.parent.index + 1 );\n}\n\n// Merges two text nodes into first node. Removes second node and returns merge position.\n//\n// @param {module:engine/view/text~Text} t1 First text node to merge. Data from second text node will be moved at the end of\n// this text node.\n// @param {module:engine/view/text~Text} t2 Second text node to merge. This node will be removed after merging.\n// @returns {module:engine/view/position~Position} Position after merging text nodes.\nfunction mergeTextNodes( t1, t2 ) {\n\t// Merge text data into first text node and remove second one.\n\tconst nodeBeforeLength = t1.data.length;\n\tt1._data += t2.data;\n\tt2._remove();\n\n\treturn new Position( t1, nodeBeforeLength );\n}\n\n// Checks if provided nodes are valid to insert.\n//\n// Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `view-writer-insert-invalid-node` when nodes to insert\n// contains instances that are not supported ones (see error description for valid ones.\n//\n// @param Iterable.<module:engine/view/text~Text|module:engine/view/element~Element> nodes\n// @param {Object} errorContext\nfunction validateNodesToInsert( nodes, errorContext ) {\n\tfor ( const node of nodes ) {\n\t\tif ( !validNodesToInsert.some( ( validNode => node instanceof validNode ) ) ) { // eslint-disable-line no-use-before-define\n\t\t\t/**\n\t\t\t * One of the nodes to be inserted is of an invalid type.\n\t\t\t *\n\t\t\t * Nodes to be inserted with {@link module:engine/view/downcastwriter~DowncastWriter#insert `DowncastWriter#insert()`} should be\n\t\t\t * of the following types:\n\t\t\t *\n\t\t\t * * {@link module:engine/view/attributeelement~AttributeElement AttributeElement},\n\t\t\t * * {@link module:engine/view/containerelement~ContainerElement ContainerElement},\n\t\t\t * * {@link module:engine/view/emptyelement~EmptyElement EmptyElement},\n\t\t\t * * {@link module:engine/view/uielement~UIElement UIElement},\n\t\t\t * * {@link module:engine/view/rawelement~RawElement RawElement},\n\t\t\t * * {@link module:engine/view/text~Text Text}.\n\t\t\t *\n\t\t\t * @error view-writer-insert-invalid-node-type\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'view-writer-insert-invalid-node-type', errorContext );\n\t\t}\n\n\t\tif ( !node.is( '$text' ) ) {\n\t\t\tvalidateNodesToInsert( node.getChildren(), errorContext );\n\t\t}\n\t}\n}\n\nconst validNodesToInsert = [ Text, AttributeElement, ContainerElement, EmptyElement, RawElement, UIElement ];\n\n// Checks if node is ContainerElement or DocumentFragment, because in most cases they should be treated the same way.\n//\n// @param {module:engine/view/node~Node} node\n// @returns {Boolean} Returns `true` if node is instance of ContainerElement or DocumentFragment.\nfunction isContainerOrFragment( node ) {\n\treturn node && ( node.is( 'containerElement' ) || node.is( 'documentFragment' ) );\n}\n\n// Checks if {@link module:engine/view/range~Range#start range start} and {@link module:engine/view/range~Range#end range end} are placed\n// inside same {@link module:engine/view/containerelement~ContainerElement container element}.\n// Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `view-writer-invalid-range-container` when validation fails.\n//\n// @param {module:engine/view/range~Range} range\n// @param {Object} errorContext\nfunction validateRangeContainer( range, errorContext ) {\n\tconst startContainer = getParentContainer( range.start );\n\tconst endContainer = getParentContainer( range.end );\n\n\tif ( !startContainer || !endContainer || startContainer !== endContainer ) {\n\t\t/**\n\t\t * The container of the given range is invalid.\n\t\t *\n\t\t * This may happen if {@link module:engine/view/range~Range#start range start} and\n\t\t * {@link module:engine/view/range~Range#end range end} positions are not placed inside the same container element or\n\t\t * a parent container for these positions cannot be found.\n\t\t *\n\t\t * Methods like {@link module:engine/view/downcastwriter~DowncastWriter#wrap `DowncastWriter#remove()`},\n\t\t * {@link module:engine/view/downcastwriter~DowncastWriter#wrap `DowncastWriter#clean()`},\n\t\t * {@link module:engine/view/downcastwriter~DowncastWriter#wrap `DowncastWriter#wrap()`},\n\t\t * {@link module:engine/view/downcastwriter~DowncastWriter#wrap `DowncastWriter#unwrap()`} need to be called\n\t\t * on a range that has its start and end positions located in the same container element. Both positions can be\n\t\t * nested within other elements (e.g. an attribute element) but the closest container ancestor must be the same.\n\t\t *\n\t\t * @error view-writer-invalid-range-container\n\t\t */\n\t\tthrow new CKEditorError( 'view-writer-invalid-range-container', errorContext );\n\t}\n}\n\n// Checks if two attribute elements can be joined together. Elements can be joined together if, and only if\n// they do not have ids specified.\n//\n// @private\n// @param {module:engine/view/element~Element} a\n// @param {module:engine/view/element~Element} b\n// @returns {Boolean}\nfunction canBeJoined( a, b ) {\n\treturn a.id === null && b.id === null;\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/dom/istext\n */\n\n/**\n * Checks if the object is a native DOM Text node.\n *\n * @param {*} obj\n * @returns {Boolean}\n */\nexport default function isText( obj ) {\n\treturn Object.prototype.toString.call( obj ) == '[object Text]';\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\nimport { keyCodes } from '@ckeditor/ckeditor5-utils/src/keyboard';\nimport isText from '@ckeditor/ckeditor5-utils/src/dom/istext';\n\n/**\n * Set of utils related to block and inline fillers handling.\n *\n * Browsers do not allow to put caret in elements which does not have height. Because of it, we need to fill all\n * empty elements which should be selectable with elements or characters called \"fillers\". Unfortunately there is no one\n * universal filler, this is why two types are uses:\n *\n * * Block filler is an element which fill block elements, like `<p>`. CKEditor uses `<br>` as a block filler during the editing,\n * as browsers do natively. So instead of an empty `<p>` there will be `<p><br></p>`. The advantage of block filler is that\n * it is transparent for the selection, so when the caret is before the `<br>` and user presses right arrow he will be\n * moved to the next paragraph, not after the `<br>`. The disadvantage is that it breaks a block, so it can not be used\n * in the middle of a line of text. The {@link module:engine/view/filler~BR_FILLER `<br>` filler} can be replaced with any other\n * character in the data output, for instance {@link module:engine/view/filler~NBSP_FILLER non-breaking space}.\n *\n * * Inline filler is a filler which does not break a line of text, so it can be used inside the text, for instance in the empty\n * `<b>` surrendered by text: `foo<b></b>bar`, if we want to put the caret there. CKEditor uses a sequence of the zero-width\n * spaces as an {@link module:engine/view/filler~INLINE_FILLER inline filler} having the predetermined\n * {@link module:engine/view/filler~INLINE_FILLER_LENGTH length}. A sequence is used, instead of a single character to\n * avoid treating random zero-width spaces as the inline filler. Disadvantage of the inline filler is that it is not\n * transparent for the selection. The arrow key moves the caret between zero-width spaces characters, so the additional\n * code is needed to handle the caret.\n *\n * Both inline and block fillers are handled by the {@link module:engine/view/renderer~Renderer renderer} and are not present in the\n * view.\n *\n * @module engine/view/filler\n */\n\n/**\n * Non-breaking space filler creator. This is a function which creates `&nbsp;` text node.\n * It defines how the filler is created.\n *\n * @see module:engine/view/filler~BR_FILLER\n * @function\n */\nexport const NBSP_FILLER = domDocument => domDocument.createTextNode( '\\u00A0' );\n\n/**\n * `<br>` filler creator. This is a function which creates `<br data-cke-filler=\"true\">` element.\n * It defines how the filler is created.\n *\n * @see module:engine/view/filler~NBSP_FILLER\n * @function\n */\nexport const BR_FILLER = domDocument => {\n\tconst fillerBr = domDocument.createElement( 'br' );\n\tfillerBr.dataset.ckeFiller = true;\n\n\treturn fillerBr;\n};\n\n/**\n * Length of the {@link module:engine/view/filler~INLINE_FILLER INLINE_FILLER}.\n */\nexport const INLINE_FILLER_LENGTH = 7;\n\n/**\n * Inline filler which is a sequence of the zero width spaces.\n *\n * @type {String}\n */\nexport const INLINE_FILLER = ( () => {\n\tlet inlineFiller = '';\n\n\tfor ( let i = 0; i < INLINE_FILLER_LENGTH; i++ ) {\n\t\tinlineFiller += '\\u200b';\n\t}\n\n\treturn inlineFiller;\n} )(); // Usu IIF so the INLINE_FILLER appears as a constant in the docs.\n\n/**\n * Checks if the node is a text node which starts with the {@link module:engine/view/filler~INLINE_FILLER inline filler}.\n *\n *\t\tstartsWithFiller( document.createTextNode( INLINE_FILLER ) ); // true\n *\t\tstartsWithFiller( document.createTextNode( INLINE_FILLER + 'foo' ) ); // true\n *\t\tstartsWithFiller( document.createTextNode( 'foo' ) ); // false\n *\t\tstartsWithFiller( document.createElement( 'p' ) ); // false\n *\n * @param {Node} domNode DOM node.\n * @returns {Boolean} True if the text node starts with the {@link module:engine/view/filler~INLINE_FILLER inline filler}.\n */\nexport function startsWithFiller( domNode ) {\n\treturn isText( domNode ) && ( domNode.data.substr( 0, INLINE_FILLER_LENGTH ) === INLINE_FILLER );\n}\n\n/**\n * Checks if the text node contains only the {@link module:engine/view/filler~INLINE_FILLER inline filler}.\n *\n *\t\tisInlineFiller( document.createTextNode( INLINE_FILLER ) ); // true\n *\t\tisInlineFiller( document.createTextNode( INLINE_FILLER + 'foo' ) ); // false\n *\n * @param {Text} domText DOM text node.\n * @returns {Boolean} True if the text node contains only the {@link module:engine/view/filler~INLINE_FILLER inline filler}.\n */\nexport function isInlineFiller( domText ) {\n\treturn domText.data.length == INLINE_FILLER_LENGTH && startsWithFiller( domText );\n}\n\n/**\n * Get string data from the text node, removing an {@link module:engine/view/filler~INLINE_FILLER inline filler} from it,\n * if text node contains it.\n *\n *\t\tgetDataWithoutFiller( document.createTextNode( INLINE_FILLER + 'foo' ) ) == 'foo' // true\n *\t\tgetDataWithoutFiller( document.createTextNode( 'foo' ) ) == 'foo' // true\n *\n * @param {Text} domText DOM text node, possible with inline filler.\n * @returns {String} Data without filler.\n */\nexport function getDataWithoutFiller( domText ) {\n\tif ( startsWithFiller( domText ) ) {\n\t\treturn domText.data.slice( INLINE_FILLER_LENGTH );\n\t} else {\n\t\treturn domText.data;\n\t}\n}\n\n/**\n * Assign key observer which move cursor from the end of the inline filler to the beginning of it when\n * the left arrow is pressed, so the filler does not break navigation.\n *\n * @param {module:engine/view/view~View} view View controller instance we should inject quirks handling on.\n */\nexport function injectQuirksHandling( view ) {\n\tview.document.on( 'keydown', jumpOverInlineFiller );\n}\n\n// Move cursor from the end of the inline filler to the beginning of it when, so the filler does not break navigation.\nfunction jumpOverInlineFiller( evt, data ) {\n\tif ( data.keyCode == keyCodes.arrowleft ) {\n\t\tconst domSelection = data.domTarget.ownerDocument.defaultView.getSelection();\n\n\t\tif ( domSelection.rangeCount == 1 && domSelection.getRangeAt( 0 ).collapsed ) {\n\t\t\tconst domParent = domSelection.getRangeAt( 0 ).startContainer;\n\t\t\tconst domOffset = domSelection.getRangeAt( 0 ).startOffset;\n\n\t\t\tif ( startsWithFiller( domParent ) && domOffset <= INLINE_FILLER_LENGTH ) {\n\t\t\t\tdomSelection.collapse( domParent, 0 );\n\t\t\t}\n\t\t}\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/fastdiff\n */\n\n/**\n * Finds positions of the first and last change in the given string/array and generates a set of changes:\n *\n *\t\tfastDiff( '12a', '12xyza' );\n *\t\t// [ { index: 2, type: 'insert', values: [ 'x', 'y', 'z' ] } ]\n *\n *\t\tfastDiff( '12a', '12aa' );\n *\t\t// [ { index: 3, type: 'insert', values: [ 'a' ] } ]\n *\n *\t\tfastDiff( '12xyza', '12a' );\n *\t\t// [ { index: 2, type: 'delete', howMany: 3 } ]\n *\n *\t\tfastDiff( [ '1', '2', 'a', 'a' ], [ '1', '2', 'a' ] );\n *\t\t// [ { index: 3, type: 'delete', howMany: 1 } ]\n *\n *\t\tfastDiff( [ '1', '2', 'a', 'b', 'c', '3' ], [ '2', 'a', 'b' ] );\n *\t\t// [ { index: 0, type: 'insert', values: [ '2', 'a', 'b' ] }, { index: 3, type: 'delete', howMany: 6 } ]\n *\n * Passed arrays can contain any type of data, however to compare them correctly custom comparator function\n * should be passed as a third parameter:\n *\n *\t\tfastDiff( [ { value: 1 }, { value: 2 } ], [ { value: 1 }, { value: 3 } ], ( a, b ) => {\n *\t\t\treturn a.value === b.value;\n *\t\t} );\n *\t\t// [ { index: 1, type: 'insert', values: [ { value: 3 } ] }, { index: 2, type: 'delete', howMany: 1 } ]\n *\n * The resulted set of changes can be applied to the input in order to transform it into the output, for example:\n *\n *\t\tlet input = '12abc3';\n *\t\tconst output = '2ab';\n *\t\tconst changes = fastDiff( input, output );\n *\n *\t\tchanges.forEach( change => {\n *\t\t\tif ( change.type == 'insert' ) {\n *\t\t\t\tinput = input.substring( 0, change.index ) + change.values.join( '' ) + input.substring( change.index );\n *\t\t\t} else if ( change.type == 'delete' ) {\n *\t\t\t\tinput = input.substring( 0, change.index ) + input.substring( change.index + change.howMany );\n *\t\t\t}\n *\t\t} );\n *\n *\t\t// input equals output now\n *\n * or in case of arrays:\n *\n *\t\tlet input = [ '1', '2', 'a', 'b', 'c', '3' ];\n *\t\tconst output = [ '2', 'a', 'b' ];\n *\t\tconst changes = fastDiff( input, output );\n *\n *\t\tchanges.forEach( change => {\n *\t\t\tif ( change.type == 'insert' ) {\n *\t\t\t\tinput = input.slice( 0, change.index ).concat( change.values, input.slice( change.index ) );\n *\t\t\t} else if ( change.type == 'delete' ) {\n *\t\t\t\tinput = input.slice( 0, change.index ).concat( input.slice( change.index + change.howMany ) );\n *\t\t\t}\n *\t\t} );\n *\n *\t\t// input equals output now\n *\n * By passing `true` as the fourth parameter (`atomicChanges`) the output of this function will become compatible with\n * the {@link module:utils/diff~diff `diff()`} function:\n *\n *\t\tfastDiff( '12a', '12xyza' );\n *\t\t// [ 'equal', 'equal', 'insert', 'insert', 'insert', 'equal' ]\n *\n * The default output format of this function is compatible with the output format of\n * {@link module:utils/difftochanges~diffToChanges `diffToChanges()`}. The `diffToChanges()` input format is, in turn,\n * compatible with the output of {@link module:utils/diff~diff `diff()`}:\n *\n *\t\tconst a = '1234';\n *\t\tconst b = '12xyz34';\n *\n *\t\t// Both calls will return the same results (grouped changes format).\n *\t\tfastDiff( a, b );\n *\t\tdiffToChanges( diff( a, b ) );\n *\n *\t\t// Again, both calls will return the same results (atomic changes format).\n *\t\tfastDiff( a, b, null, true );\n *\t\tdiff( a, b );\n *\n *\n * @param {Array|String} a Input array or string.\n * @param {Array|String} b Input array or string.\n * @param {Function} [cmp] Optional function used to compare array values, by default `===` (strict equal operator) is used.\n * @param {Boolean} [atomicChanges=false] Whether an array of `inset|delete|equal` operations should\n * be returned instead of changes set. This makes this function compatible with {@link module:utils/diff~diff `diff()`}.\n * @returns {Array} Array of changes.\n */\nexport default function fastDiff( a, b, cmp, atomicChanges = false ) {\n\t// Set the comparator function.\n\tcmp = cmp || function( a, b ) {\n\t\treturn a === b;\n\t};\n\n\t// Convert the string (or any array-like object - eg. NodeList) to an array by using the slice() method because,\n\t// unlike Array.from(), it returns array of UTF-16 code units instead of the code points of a string.\n\t// One code point might be a surrogate pair of two code units. All text offsets are expected to be in code units.\n\t// See ckeditor/ckeditor5#3147.\n\t//\n\t// We need to make sure here that fastDiff() works identical to diff().\n\tif ( !Array.isArray( a ) ) {\n\t\ta = Array.prototype.slice.call( a );\n\t}\n\n\tif ( !Array.isArray( b ) ) {\n\t\tb = Array.prototype.slice.call( b );\n\t}\n\n\t// Find first and last change.\n\tconst changeIndexes = findChangeBoundaryIndexes( a, b, cmp );\n\n\t// Transform into changes array.\n\treturn atomicChanges ? changeIndexesToAtomicChanges( changeIndexes, b.length ) : changeIndexesToChanges( b, changeIndexes );\n}\n\n// Finds position of the first and last change in the given arrays. For example:\n//\n//\t\tconst indexes = findChangeBoundaryIndexes( [ '1', '2', '3', '4' ], [ '1', '3', '4', '2', '4' ] );\n//\t\tconsole.log( indexes ); // { firstIndex: 1, lastIndexOld: 3, lastIndexNew: 4 }\n//\n// The above indexes means that in the first array the modified part is `1[23]4` and in the second array it is `1[342]4`.\n// Based on such indexes, array with `insert`/`delete` operations which allows transforming first value into the second one\n// can be generated.\n//\n// @param {Array} arr1\n// @param {Array} arr2\n// @param {Function} cmp Comparator function.\n// @returns {Object}\n// @returns {Number} return.firstIndex Index of the first change in both values (always the same for both).\n// @returns {Number} result.lastIndexOld Index of the last common value in `arr1`.\n// @returns {Number} result.lastIndexNew Index of the last common value in `arr2`.\nfunction findChangeBoundaryIndexes( arr1, arr2, cmp ) {\n\t// Find the first difference between passed values.\n\tconst firstIndex = findFirstDifferenceIndex( arr1, arr2, cmp );\n\n\t// If arrays are equal return -1 indexes object.\n\tif ( firstIndex === -1 ) {\n\t\treturn { firstIndex: -1, lastIndexOld: -1, lastIndexNew: -1 };\n\t}\n\n\t// Remove the common part of each value and reverse them to make it simpler to find the last difference between them.\n\tconst oldArrayReversed = cutAndReverse( arr1, firstIndex );\n\tconst newArrayReversed = cutAndReverse( arr2, firstIndex );\n\n\t// Find the first difference between reversed values.\n\t// It should be treated as \"how many elements from the end the last difference occurred\".\n\t//\n\t// For example:\n\t//\n\t// \t\t\t\tinitial\t->\tafter cut\t-> reversed:\n\t// oldValue:\t'321ba'\t->\t'21ba'\t\t-> 'ab12'\n\t// newValue:\t'31xba'\t->\t'1xba'\t\t-> 'abx1'\n\t// lastIndex:\t\t\t\t\t\t\t-> 2\n\t//\n\t// So the last change occurred two characters from the end of the arrays.\n\tconst lastIndex = findFirstDifferenceIndex( oldArrayReversed, newArrayReversed, cmp );\n\n\t// Use `lastIndex` to calculate proper offset, starting from the beginning (`lastIndex` kind of starts from the end).\n\tconst lastIndexOld = arr1.length - lastIndex;\n\tconst lastIndexNew = arr2.length - lastIndex;\n\n\treturn { firstIndex, lastIndexOld, lastIndexNew };\n}\n\n// Returns a first index on which given arrays differ. If both arrays are the same, -1 is returned.\n//\n// @param {Array} arr1\n// @param {Array} arr2\n// @param {Function} cmp Comparator function.\n// @returns {Number}\nfunction findFirstDifferenceIndex( arr1, arr2, cmp ) {\n\tfor ( let i = 0; i < Math.max( arr1.length, arr2.length ); i++ ) {\n\t\tif ( arr1[ i ] === undefined || arr2[ i ] === undefined || !cmp( arr1[ i ], arr2[ i ] ) ) {\n\t\t\treturn i;\n\t\t}\n\t}\n\n\treturn -1; // Return -1 if arrays are equal.\n}\n\n// Returns a copy of the given array with `howMany` elements removed starting from the beginning and in reversed order.\n//\n// @param {Array} arr Array to be processed.\n// @param {Number} howMany How many elements from array beginning to remove.\n// @returns {Array} Shortened and reversed array.\nfunction cutAndReverse( arr, howMany ) {\n\treturn arr.slice( howMany ).reverse();\n}\n\n// Generates changes array based on change indexes from `findChangeBoundaryIndexes` function. This function will\n// generate array with 0 (no changes), 1 (deletion or insertion) or 2 records (insertion and deletion).\n//\n// @param {Array} newArray New array for which change indexes were calculated.\n// @param {Object} changeIndexes Change indexes object from `findChangeBoundaryIndexes` function.\n// @returns {Array.<Object>} Array of changes compatible with {@link module:utils/difftochanges~diffToChanges} format.\nfunction changeIndexesToChanges( newArray, changeIndexes ) {\n\tconst result = [];\n\tconst { firstIndex, lastIndexOld, lastIndexNew } = changeIndexes;\n\n\t// Order operations as 'insert', 'delete' array to keep compatibility with {@link module:utils/difftochanges~diffToChanges}\n\t// in most cases. However, 'diffToChanges' does not stick to any order so in some cases\n\t// (for example replacing '12345' with 'abcd') it will generate 'delete', 'insert' order.\n\tif ( lastIndexNew - firstIndex > 0 ) {\n\t\tresult.push( {\n\t\t\tindex: firstIndex,\n\t\t\ttype: 'insert',\n\t\t\tvalues: newArray.slice( firstIndex, lastIndexNew )\n\t\t} );\n\t}\n\n\tif ( lastIndexOld - firstIndex > 0 ) {\n\t\tresult.push( {\n\t\t\tindex: firstIndex + ( lastIndexNew - firstIndex ), // Increase index of what was inserted.\n\t\t\ttype: 'delete',\n\t\t\thowMany: lastIndexOld - firstIndex\n\t\t} );\n\t}\n\n\treturn result;\n}\n\n// Generates array with set `equal|insert|delete` operations based on change indexes from `findChangeBoundaryIndexes` function.\n//\n// @param {Object} changeIndexes Change indexes object from `findChangeBoundaryIndexes` function.\n// @param {Number} newLength Length of the new array on which `findChangeBoundaryIndexes` calculated change indexes.\n// @returns {Array.<String>} Array of changes compatible with {@link module:utils/diff~diff} format.\nfunction changeIndexesToAtomicChanges( changeIndexes, newLength ) {\n\tconst { firstIndex, lastIndexOld, lastIndexNew } = changeIndexes;\n\n\t// No changes.\n\tif ( firstIndex === -1 ) {\n\t\treturn Array( newLength ).fill( 'equal' );\n\t}\n\n\tlet result = [];\n\tif ( firstIndex > 0 ) {\n\t\tresult = result.concat( Array( firstIndex ).fill( 'equal' ) );\n\t}\n\n\tif ( lastIndexNew - firstIndex > 0 ) {\n\t\tresult = result.concat( Array( lastIndexNew - firstIndex ).fill( 'insert' ) );\n\t}\n\n\tif ( lastIndexOld - firstIndex > 0 ) {\n\t\tresult = result.concat( Array( lastIndexOld - firstIndex ).fill( 'delete' ) );\n\t}\n\n\tif ( lastIndexNew < newLength ) {\n\t\tresult = result.concat( Array( newLength - lastIndexNew ).fill( 'equal' ) );\n\t}\n\n\treturn result;\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/diff\n */\n\nimport fastDiff from '../src/fastdiff';\n\n// The following code is based on the \"O(NP) Sequence Comparison Algorithm\"\n// by Sun Wu, Udi Manber, Gene Myers, Webb Miller.\n\n/**\n * Calculates the difference between two arrays or strings producing an array containing a list of changes\n * necessary to transform input into output.\n *\n *\t\tdiff( 'aba', 'acca' ); // [ 'equal', 'insert', 'insert', 'delete', 'equal' ]\n *\n * This function is based on the \"O(NP) Sequence Comparison Algorithm\" by Sun Wu, Udi Manber, Gene Myers, Webb Miller.\n * Unfortunately, while it gives the most precise results, its to complex for longer strings/arrow (above 200 items).\n * Therefore, `diff()` automatically switches to {@link module:utils/fastdiff~fastDiff `fastDiff()`} when detecting\n * such a scenario. The return formats of both functions are identical.\n *\n * @param {Array|String} a Input array or string.\n * @param {Array|String} b Output array or string.\n * @param {Function} [cmp] Optional function used to compare array values, by default === is used.\n * @returns {Array} Array of changes.\n */\nexport default function diff( a, b, cmp ) {\n\t// Set the comparator function.\n\tcmp = cmp || function( a, b ) {\n\t\treturn a === b;\n\t};\n\n\tconst aLength = a.length;\n\tconst bLength = b.length;\n\n\t// Perform `fastDiff` for longer strings/arrays (see #269).\n\tif ( aLength > 200 || bLength > 200 || aLength + bLength > 300 ) {\n\t\treturn diff.fastDiff( a, b, cmp, true );\n\t}\n\n\t// Temporary action type statics.\n\tlet _insert, _delete;\n\n\t// Swapped the arrays to use the shorter one as the first one.\n\tif ( bLength < aLength ) {\n\t\tconst tmp = a;\n\n\t\ta = b;\n\t\tb = tmp;\n\n\t\t// We swap the action types as well.\n\t\t_insert = 'delete';\n\t\t_delete = 'insert';\n\t} else {\n\t\t_insert = 'insert';\n\t\t_delete = 'delete';\n\t}\n\n\tconst m = a.length;\n\tconst n = b.length;\n\tconst delta = n - m;\n\n\t// Edit scripts, for each diagonal.\n\tconst es = {};\n\t// Furthest points, the furthest y we can get on each diagonal.\n\tconst fp = {};\n\n\tfunction snake( k ) {\n\t\t// We use -1 as an alternative below to handle initial values ( instead of filling the fp with -1 first ).\n\t\t// Furthest points (y) on the diagonal below k.\n\t\tconst y1 = ( fp[ k - 1 ] !== undefined ? fp[ k - 1 ] : -1 ) + 1;\n\t\t// Furthest points (y) on the diagonal above k.\n\t\tconst y2 = fp[ k + 1 ] !== undefined ? fp[ k + 1 ] : -1;\n\t\t// The way we should go to get further.\n\t\tconst dir = y1 > y2 ? -1 : 1;\n\n\t\t// Clone previous changes array (if any).\n\t\tif ( es[ k + dir ] ) {\n\t\t\tes[ k ] = es[ k + dir ].slice( 0 );\n\t\t}\n\n\t\t// Create changes array.\n\t\tif ( !es[ k ] ) {\n\t\t\tes[ k ] = [];\n\t\t}\n\n\t\t// Push the action.\n\t\tes[ k ].push( y1 > y2 ? _insert : _delete );\n\n\t\t// Set the beginning coordinates.\n\t\tlet y = Math.max( y1, y2 );\n\t\tlet x = y - k;\n\n\t\t// Traverse the diagonal as long as the values match.\n\t\twhile ( x < m && y < n && cmp( a[ x ], b[ y ] ) ) {\n\t\t\tx++;\n\t\t\ty++;\n\t\t\t// Push no change action.\n\t\t\tes[ k ].push( 'equal' );\n\t\t}\n\n\t\treturn y;\n\t}\n\n\tlet p = 0;\n\tlet k;\n\n\t// Traverse the graph until we reach the end of the longer string.\n\tdo {\n\t\t// Updates furthest points and edit scripts for diagonals below delta.\n\t\tfor ( k = -p; k < delta; k++ ) {\n\t\t\tfp[ k ] = snake( k );\n\t\t}\n\n\t\t// Updates furthest points and edit scripts for diagonals above delta.\n\t\tfor ( k = delta + p; k > delta; k-- ) {\n\t\t\tfp[ k ] = snake( k );\n\t\t}\n\n\t\t// Updates furthest point and edit script for the delta diagonal.\n\t\t// note that the delta diagonal is the one which goes through the sink (m, n).\n\t\tfp[ delta ] = snake( delta );\n\n\t\tp++;\n\t} while ( fp[ delta ] !== n );\n\n\t// Return the final list of edit changes.\n\t// We remove the first item that represents the action for the injected nulls.\n\treturn es[ delta ].slice( 1 );\n}\n\n// Store the API in static property to easily overwrite it in tests.\n// Too bad dependency injection does not work in Webpack + ES 6 (const) + Babel.\ndiff.fastDiff = fastDiff;\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/dom/insertat\n */\n\n/**\n * Inserts node to the parent at given index.\n *\n * @param {Element} parentElement Parent element.\n * @param {Number} index Insertions index.\n * @param {Node} nodeToInsert Node to insert.\n */\nexport default function insertAt( parentElement, index, nodeToInsert ) {\n\tparentElement.insertBefore( nodeToInsert, parentElement.childNodes[ index ] || null );\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/dom/remove\n */\n\n/**\n * Removes given node from parent.\n *\n * @param {Node} node Node to remove.\n */\nexport default function remove( node ) {\n\tconst parent = node.parentNode;\n\n\tif ( parent ) {\n\t\tparent.removeChild( node );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/dom/isnode\n */\n\n/**\n * Checks if the object is a native DOM Node.\n *\n * @param {*} obj\n * @returns {Boolean}\n */\nexport default function isNode( obj ) {\n\tif ( obj ) {\n\t\tif ( obj.defaultView ) {\n\t\t\treturn obj instanceof obj.defaultView.Document;\n\t\t} else if ( obj.ownerDocument && obj.ownerDocument.defaultView ) {\n\t\t\treturn obj instanceof obj.ownerDocument.defaultView.Node;\n\t\t}\n\t}\n\n\treturn false;\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/* globals Node */\n\n/**\n * @module engine/view/renderer\n */\n\nimport ViewText from './text';\nimport ViewPosition from './position';\nimport { INLINE_FILLER, INLINE_FILLER_LENGTH, startsWithFiller, isInlineFiller } from './filler';\n\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\nimport diff from '@ckeditor/ckeditor5-utils/src/diff';\nimport insertAt from '@ckeditor/ckeditor5-utils/src/dom/insertat';\nimport remove from '@ckeditor/ckeditor5-utils/src/dom/remove';\nimport ObservableMixin from '@ckeditor/ckeditor5-utils/src/observablemixin';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport isText from '@ckeditor/ckeditor5-utils/src/dom/istext';\nimport isNode from '@ckeditor/ckeditor5-utils/src/dom/isnode';\nimport fastDiff from '@ckeditor/ckeditor5-utils/src/fastdiff';\nimport env from '@ckeditor/ckeditor5-utils/src/env';\n\n/**\n * Renderer is responsible for updating the DOM structure and the DOM selection based on\n * the {@link module:engine/view/renderer~Renderer#markToSync information about updated view nodes}.\n * In other words, it renders the view to the DOM.\n *\n * Its main responsibility is to make only the necessary, minimal changes to the DOM. However, unlike in many\n * virtual DOM implementations, the primary reason for doing minimal changes is not the performance but ensuring\n * that native editing features such as text composition, autocompletion, spell checking, selection's x-index are\n * affected as little as possible.\n *\n * Renderer uses {@link module:engine/view/domconverter~DomConverter} to transform view nodes and positions\n * to and from the DOM.\n */\nexport default class Renderer {\n\t/**\n\t * Creates a renderer instance.\n\t *\n\t * @param {module:engine/view/domconverter~DomConverter} domConverter Converter instance.\n\t * @param {module:engine/view/documentselection~DocumentSelection} selection View selection.\n\t */\n\tconstructor( domConverter, selection ) {\n\t\t/**\n\t\t * Set of DOM Documents instances.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Set.<Document>}\n\t\t */\n\t\tthis.domDocuments = new Set();\n\n\t\t/**\n\t\t * Converter instance.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/domconverter~DomConverter}\n\t\t */\n\t\tthis.domConverter = domConverter;\n\n\t\t/**\n\t\t * Set of nodes which attributes changed and may need to be rendered.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Set.<module:engine/view/node~Node>}\n\t\t */\n\t\tthis.markedAttributes = new Set();\n\n\t\t/**\n\t\t * Set of elements which child lists changed and may need to be rendered.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Set.<module:engine/view/node~Node>}\n\t\t */\n\t\tthis.markedChildren = new Set();\n\n\t\t/**\n\t\t * Set of text nodes which text data changed and may need to be rendered.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Set.<module:engine/view/node~Node>}\n\t\t */\n\t\tthis.markedTexts = new Set();\n\n\t\t/**\n\t\t * View selection. Renderer updates DOM selection based on the view selection.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/documentselection~DocumentSelection}\n\t\t */\n\t\tthis.selection = selection;\n\n\t\t/**\n\t\t * Indicates if the view document is focused and selection can be rendered. Selection will not be rendered if\n\t\t * this is set to `false`.\n\t\t *\n\t\t * @member {Boolean}\n\t\t */\n\t\tthis.isFocused = false;\n\n\t\t/**\n\t\t * The text node in which the inline filler was rendered.\n\t\t *\n\t\t * @private\n\t\t * @member {Text}\n\t\t */\n\t\tthis._inlineFiller = null;\n\n\t\t/**\n\t\t * DOM element containing fake selection.\n\t\t *\n\t\t * @private\n\t\t * @type {null|HTMLElement}\n\t\t */\n\t\tthis._fakeSelectionContainer = null;\n\t}\n\n\t/**\n\t * Marks a view node to be updated in the DOM by {@link #render `render()`}.\n\t *\n\t * Note that only view nodes whose parents have corresponding DOM elements need to be marked to be synchronized.\n\t *\n\t * @see #markedAttributes\n\t * @see #markedChildren\n\t * @see #markedTexts\n\t *\n\t * @param {module:engine/view/document~ChangeType} type Type of the change.\n\t * @param {module:engine/view/node~Node} node Node to be marked.\n\t */\n\tmarkToSync( type, node ) {\n\t\tif ( type === 'text' ) {\n\t\t\tif ( this.domConverter.mapViewToDom( node.parent ) ) {\n\t\t\t\tthis.markedTexts.add( node );\n\t\t\t}\n\t\t} else {\n\t\t\t// If the node has no DOM element it is not rendered yet,\n\t\t\t// its children/attributes do not need to be marked to be sync.\n\t\t\tif ( !this.domConverter.mapViewToDom( node ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( type === 'attributes' ) {\n\t\t\t\tthis.markedAttributes.add( node );\n\t\t\t} else if ( type === 'children' ) {\n\t\t\t\tthis.markedChildren.add( node );\n\t\t\t} else {\n\t\t\t\t/**\n\t\t\t\t * Unknown type passed to Renderer.markToSync.\n\t\t\t\t *\n\t\t\t\t * @error view-renderer-unknown-type\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError( 'view-renderer-unknown-type', this );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Renders all buffered changes ({@link #markedAttributes}, {@link #markedChildren} and {@link #markedTexts}) and\n\t * the current view selection (if needed) to the DOM by applying a minimal set of changes to it.\n\t *\n\t * Renderer tries not to break the text composition (e.g. IME) and x-index of the selection,\n\t * so it does as little as it is needed to update the DOM.\n\t *\n\t * Renderer also handles {@link module:engine/view/filler fillers}. Especially, it checks if the inline filler is needed\n\t * at the selection position and adds or removes it. To prevent breaking text composition inline filler will not be\n\t * removed as long as the selection is in the text node which needed it at first.\n\t */\n\trender() {\n\t\tlet inlineFillerPosition;\n\n\t\t// Refresh mappings.\n\t\tfor ( const element of this.markedChildren ) {\n\t\t\tthis._updateChildrenMappings( element );\n\t\t}\n\n\t\t// There was inline filler rendered in the DOM but it's not\n\t\t// at the selection position any more, so we can remove it\n\t\t// (cause even if it's needed, it must be placed in another location).\n\t\tif ( this._inlineFiller && !this._isSelectionInInlineFiller() ) {\n\t\t\tthis._removeInlineFiller();\n\t\t}\n\n\t\t// If we've got the filler, let's try to guess its position in the view.\n\t\tif ( this._inlineFiller ) {\n\t\t\tinlineFillerPosition = this._getInlineFillerPosition();\n\t\t}\n\t\t// Otherwise, if it's needed, create it at the selection position.\n\t\telse if ( this._needsInlineFillerAtSelection() ) {\n\t\t\tinlineFillerPosition = this.selection.getFirstPosition();\n\n\t\t\t// Do not use `markToSync` so it will be added even if the parent is already added.\n\t\t\tthis.markedChildren.add( inlineFillerPosition.parent );\n\t\t}\n\n\t\tfor ( const element of this.markedAttributes ) {\n\t\t\tthis._updateAttrs( element );\n\t\t}\n\n\t\tfor ( const element of this.markedChildren ) {\n\t\t\tthis._updateChildren( element, { inlineFillerPosition } );\n\t\t}\n\n\t\tfor ( const node of this.markedTexts ) {\n\t\t\tif ( !this.markedChildren.has( node.parent ) && this.domConverter.mapViewToDom( node.parent ) ) {\n\t\t\t\tthis._updateText( node, { inlineFillerPosition } );\n\t\t\t}\n\t\t}\n\n\t\t// Check whether the inline filler is required and where it really is in the DOM.\n\t\t// At this point in most cases it will be in the DOM, but there are exceptions.\n\t\t// For example, if the inline filler was deep in the created DOM structure, it will not be created.\n\t\t// Similarly, if it was removed at the beginning of this function and then neither text nor children were updated,\n\t\t// it will not be present.\n\t\t// Fix those and similar scenarios.\n\t\tif ( inlineFillerPosition ) {\n\t\t\tconst fillerDomPosition = this.domConverter.viewPositionToDom( inlineFillerPosition );\n\t\t\tconst domDocument = fillerDomPosition.parent.ownerDocument;\n\n\t\t\tif ( !startsWithFiller( fillerDomPosition.parent ) ) {\n\t\t\t\t// Filler has not been created at filler position. Create it now.\n\t\t\t\tthis._inlineFiller = addInlineFiller( domDocument, fillerDomPosition.parent, fillerDomPosition.offset );\n\t\t\t} else {\n\t\t\t\t// Filler has been found, save it.\n\t\t\t\tthis._inlineFiller = fillerDomPosition.parent;\n\t\t\t}\n\t\t} else {\n\t\t\t// There is no filler needed.\n\t\t\tthis._inlineFiller = null;\n\t\t}\n\n\t\tthis._updateSelection();\n\t\tthis._updateFocus();\n\n\t\tthis.markedTexts.clear();\n\t\tthis.markedAttributes.clear();\n\t\tthis.markedChildren.clear();\n\t}\n\n\t/**\n\t * Updates mappings of view element's children.\n\t *\n\t * Children that were replaced in the view structure by similar elements (same tag name) are treated as 'replaced'.\n\t * This means that their mappings can be updated so the new view elements are mapped to the existing DOM elements.\n\t * Thanks to that these elements do not need to be re-rendered completely.\n\t *\n\t * @private\n\t * @param {module:engine/view/node~Node} viewElement The view element whose children mappings will be updated.\n\t */\n\t_updateChildrenMappings( viewElement ) {\n\t\tconst domElement = this.domConverter.mapViewToDom( viewElement );\n\n\t\tif ( !domElement ) {\n\t\t\t// If there is no `domElement` it means that it was already removed from DOM and there is no need to process it.\n\t\t\treturn;\n\t\t}\n\n\t\tconst actualDomChildren = this.domConverter.mapViewToDom( viewElement ).childNodes;\n\t\tconst expectedDomChildren = Array.from(\n\t\t\tthis.domConverter.viewChildrenToDom( viewElement, domElement.ownerDocument, { withChildren: false } )\n\t\t);\n\t\tconst diff = this._diffNodeLists( actualDomChildren, expectedDomChildren );\n\t\tconst actions = this._findReplaceActions( diff, actualDomChildren, expectedDomChildren );\n\n\t\tif ( actions.indexOf( 'replace' ) !== -1 ) {\n\t\t\tconst counter = { equal: 0, insert: 0, delete: 0 };\n\n\t\t\tfor ( const action of actions ) {\n\t\t\t\tif ( action === 'replace' ) {\n\t\t\t\t\tconst insertIndex = counter.equal + counter.insert;\n\t\t\t\t\tconst deleteIndex = counter.equal + counter.delete;\n\t\t\t\t\tconst viewChild = viewElement.getChild( insertIndex );\n\n\t\t\t\t\t// UIElement and RawElement are special cases. Their children are not stored in a view (#799)\n\t\t\t\t\t// so we cannot use them with replacing flow (since they use view children during rendering\n\t\t\t\t\t// which will always result in rendering empty elements).\n\t\t\t\t\tif ( viewChild && !( viewChild.is( 'uiElement' ) || viewChild.is( 'rawElement' ) ) ) {\n\t\t\t\t\t\tthis._updateElementMappings( viewChild, actualDomChildren[ deleteIndex ] );\n\t\t\t\t\t}\n\n\t\t\t\t\tremove( expectedDomChildren[ insertIndex ] );\n\t\t\t\t\tcounter.equal++;\n\t\t\t\t} else {\n\t\t\t\t\tcounter[ action ]++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Updates mappings of a given view element.\n\t *\n\t * @private\n\t * @param {module:engine/view/node~Node} viewElement The view element whose mappings will be updated.\n\t * @param {Node} domElement The DOM element representing the given view element.\n\t */\n\t_updateElementMappings( viewElement, domElement ) {\n\t\t// Remap 'DomConverter' bindings.\n\t\tthis.domConverter.unbindDomElement( domElement );\n\t\tthis.domConverter.bindElements( domElement, viewElement );\n\n\t\t// View element may have children which needs to be updated, but are not marked, mark them to update.\n\t\tthis.markedChildren.add( viewElement );\n\n\t\t// Because we replace new view element mapping with the existing one, the corresponding DOM element\n\t\t// will not be rerendered. The new view element may have different attributes than the previous one.\n\t\t// Since its corresponding DOM element will not be rerendered, new attributes will not be added\n\t\t// to the DOM, so we need to mark it here to make sure its attributes gets updated. See #1427 for more\n\t\t// detailed case study.\n\t\t// Also there are cases where replaced element is removed from the view structure and then has\n\t\t// its attributes changed or removed. In such cases the element will not be present in `markedAttributes`\n\t\t// and also may be the same (`element.isSimilar()`) as the reused element not having its attributes updated.\n\t\t// To prevent such situations we always mark reused element to have its attributes rerenderd (#1560).\n\t\tthis.markedAttributes.add( viewElement );\n\t}\n\n\t/**\n\t * Gets the position of the inline filler based on the current selection.\n\t * Here, we assume that we know that the filler is needed and\n\t * {@link #_isSelectionInInlineFiller is at the selection position}, and, since it is needed,\n\t * it is somewhere at the selection position.\n\t *\n\t * Note: The filler position cannot be restored based on the filler's DOM text node, because\n\t * when this method is called (before rendering), the bindings will often be broken. View-to-DOM\n\t * bindings are only dependable after rendering.\n\t *\n\t * @private\n\t * @returns {module:engine/view/position~Position}\n\t */\n\t_getInlineFillerPosition() {\n\t\tconst firstPos = this.selection.getFirstPosition();\n\n\t\tif ( firstPos.parent.is( '$text' ) ) {\n\t\t\treturn ViewPosition._createBefore( this.selection.getFirstPosition().parent );\n\t\t} else {\n\t\t\treturn firstPos;\n\t\t}\n\t}\n\n\t/**\n\t * Returns `true` if the selection has not left the inline filler's text node.\n\t * If it is `true`, it means that the filler had been added for a reason and the selection did not\n\t * leave the filler's text node. For example, the user can be in the middle of a composition so it should not be touched.\n\t *\n\t * @private\n\t * @returns {Boolean} `true` if the inline filler and selection are in the same place.\n\t */\n\t_isSelectionInInlineFiller() {\n\t\tif ( this.selection.rangeCount != 1 || !this.selection.isCollapsed ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Note, we can't check if selection's position equals position of the\n\t\t// this._inlineFiller node, because of #663. We may not be able to calculate\n\t\t// the filler's position in the view at this stage.\n\t\t// Instead, we check it the other way – whether selection is anchored in\n\t\t// that text node or next to it.\n\n\t\t// Possible options are:\n\t\t// \"FILLER{}\"\n\t\t// \"FILLERadded-text{}\"\n\t\tconst selectionPosition = this.selection.getFirstPosition();\n\t\tconst position = this.domConverter.viewPositionToDom( selectionPosition );\n\n\t\tif ( position && isText( position.parent ) && startsWithFiller( position.parent ) ) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * Removes the inline filler.\n\t *\n\t * @private\n\t */\n\t_removeInlineFiller() {\n\t\tconst domFillerNode = this._inlineFiller;\n\n\t\t// Something weird happened and the stored node doesn't contain the filler's text.\n\t\tif ( !startsWithFiller( domFillerNode ) ) {\n\t\t\t/**\n\t\t\t * The inline filler node was lost. Most likely, something overwrote the filler text node\n\t\t\t * in the DOM.\n\t\t\t *\n\t\t\t * @error view-renderer-filler-was-lost\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'view-renderer-filler-was-lost', this );\n\t\t}\n\n\t\tif ( isInlineFiller( domFillerNode ) ) {\n\t\t\tdomFillerNode.parentNode.removeChild( domFillerNode );\n\t\t} else {\n\t\t\tdomFillerNode.data = domFillerNode.data.substr( INLINE_FILLER_LENGTH );\n\t\t}\n\n\t\tthis._inlineFiller = null;\n\t}\n\n\t/**\n\t * Checks if the inline {@link module:engine/view/filler filler} should be added.\n\t *\n\t * @private\n\t * @returns {Boolean} `true` if the inline filler should be added.\n\t */\n\t_needsInlineFillerAtSelection() {\n\t\tif ( this.selection.rangeCount != 1 || !this.selection.isCollapsed ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst selectionPosition = this.selection.getFirstPosition();\n\t\tconst selectionParent = selectionPosition.parent;\n\t\tconst selectionOffset = selectionPosition.offset;\n\n\t\t// If there is no DOM root we do not care about fillers.\n\t\tif ( !this.domConverter.mapViewToDom( selectionParent.root ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif ( !( selectionParent.is( 'element' ) ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Prevent adding inline filler inside elements with contenteditable=false.\n\t\t// https://github.com/ckeditor/ckeditor5-engine/issues/1170\n\t\tif ( !isEditable( selectionParent ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// We have block filler, we do not need inline one.\n\t\tif ( selectionOffset === selectionParent.getFillerOffset() ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst nodeBefore = selectionPosition.nodeBefore;\n\t\tconst nodeAfter = selectionPosition.nodeAfter;\n\n\t\tif ( nodeBefore instanceof ViewText || nodeAfter instanceof ViewText ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Checks if text needs to be updated and possibly updates it.\n\t *\n\t * @private\n\t * @param {module:engine/view/text~Text} viewText View text to update.\n\t * @param {Object} options\n\t * @param {module:engine/view/position~Position} options.inlineFillerPosition The position where the inline\n\t * filler should be rendered.\n\t */\n\t_updateText( viewText, options ) {\n\t\tconst domText = this.domConverter.findCorrespondingDomText( viewText );\n\t\tconst newDomText = this.domConverter.viewToDom( viewText, domText.ownerDocument );\n\n\t\tconst actualText = domText.data;\n\t\tlet expectedText = newDomText.data;\n\n\t\tconst filler = options.inlineFillerPosition;\n\n\t\tif ( filler && filler.parent == viewText.parent && filler.offset == viewText.index ) {\n\t\t\texpectedText = INLINE_FILLER + expectedText;\n\t\t}\n\n\t\tif ( actualText != expectedText ) {\n\t\t\tconst actions = fastDiff( actualText, expectedText );\n\n\t\t\tfor ( const action of actions ) {\n\t\t\t\tif ( action.type === 'insert' ) {\n\t\t\t\t\tdomText.insertData( action.index, action.values.join( '' ) );\n\t\t\t\t} else { // 'delete'\n\t\t\t\t\tdomText.deleteData( action.index, action.howMany );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Checks if attribute list needs to be updated and possibly updates it.\n\t *\n\t * @private\n\t * @param {module:engine/view/element~Element} viewElement The view element to update.\n\t */\n\t_updateAttrs( viewElement ) {\n\t\tconst domElement = this.domConverter.mapViewToDom( viewElement );\n\n\t\tif ( !domElement ) {\n\t\t\t// If there is no `domElement` it means that 'viewElement' is outdated as its mapping was updated\n\t\t\t// in 'this._updateChildrenMappings()'. There is no need to process it as new view element which\n\t\t\t// replaced old 'viewElement' mapping was also added to 'this.markedAttributes'\n\t\t\t// in 'this._updateChildrenMappings()' so it will be processed separately.\n\t\t\treturn;\n\t\t}\n\n\t\tconst domAttrKeys = Array.from( domElement.attributes ).map( attr => attr.name );\n\t\tconst viewAttrKeys = viewElement.getAttributeKeys();\n\n\t\t// Add or overwrite attributes.\n\t\tfor ( const key of viewAttrKeys ) {\n\t\t\tdomElement.setAttribute( key, viewElement.getAttribute( key ) );\n\t\t}\n\n\t\t// Remove from DOM attributes which do not exists in the view.\n\t\tfor ( const key of domAttrKeys ) {\n\t\t\tif ( !viewElement.hasAttribute( key ) ) {\n\t\t\t\tdomElement.removeAttribute( key );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Checks if elements child list needs to be updated and possibly updates it.\n\t *\n\t * @private\n\t * @param {module:engine/view/element~Element} viewElement View element to update.\n\t * @param {Object} options\n\t * @param {module:engine/view/position~Position} options.inlineFillerPosition The position where the inline\n\t * filler should be rendered.\n\t */\n\t_updateChildren( viewElement, options ) {\n\t\tconst domElement = this.domConverter.mapViewToDom( viewElement );\n\n\t\tif ( !domElement ) {\n\t\t\t// If there is no `domElement` it means that it was already removed from DOM.\n\t\t\t// There is no need to process it. It will be processed when re-inserted.\n\t\t\treturn;\n\t\t}\n\n\t\tconst inlineFillerPosition = options.inlineFillerPosition;\n\t\tconst actualDomChildren = this.domConverter.mapViewToDom( viewElement ).childNodes;\n\t\tconst expectedDomChildren = Array.from(\n\t\t\tthis.domConverter.viewChildrenToDom( viewElement, domElement.ownerDocument, { bind: true, inlineFillerPosition } )\n\t\t);\n\n\t\t// Inline filler element has to be created as it is present in the DOM, but not in the view. It is required\n\t\t// during diffing so text nodes could be compared correctly and also during rendering to maintain\n\t\t// proper order and indexes while updating the DOM.\n\t\tif ( inlineFillerPosition && inlineFillerPosition.parent === viewElement ) {\n\t\t\taddInlineFiller( domElement.ownerDocument, expectedDomChildren, inlineFillerPosition.offset );\n\t\t}\n\n\t\tconst diff = this._diffNodeLists( actualDomChildren, expectedDomChildren );\n\n\t\tlet i = 0;\n\t\tconst nodesToUnbind = new Set();\n\n\t\t// Handle deletions first.\n\t\t// This is to prevent a situation where an element that already exists in `actualDomChildren` is inserted at a different\n\t\t// index in `actualDomChildren`. Since `actualDomChildren` is a `NodeList`, this works like move, not like an insert,\n\t\t// and it disrupts the whole algorithm. See https://github.com/ckeditor/ckeditor5/issues/6367.\n\t\t//\n\t\t// It doesn't matter in what order we remove or add nodes, as long as we remove and add correct nodes at correct indexes.\n\t\tfor ( const action of diff ) {\n\t\t\tif ( action === 'delete' ) {\n\t\t\t\tnodesToUnbind.add( actualDomChildren[ i ] );\n\t\t\t\tremove( actualDomChildren[ i ] );\n\t\t\t} else if ( action === 'equal' ) {\n\t\t\t\ti++;\n\t\t\t}\n\t\t}\n\n\t\ti = 0;\n\n\t\tfor ( const action of diff ) {\n\t\t\tif ( action === 'insert' ) {\n\t\t\t\tinsertAt( domElement, i, expectedDomChildren[ i ] );\n\t\t\t\ti++;\n\t\t\t} else if ( action === 'equal' ) {\n\t\t\t\t// Force updating text nodes inside elements which did not change and do not need to be re-rendered (#1125).\n\t\t\t\t// Do it here (not in the loop above) because only after insertions the `i` index is correct.\n\t\t\t\tthis._markDescendantTextToSync( this.domConverter.domToView( expectedDomChildren[ i ] ) );\n\t\t\t\ti++;\n\t\t\t}\n\t\t}\n\n\t\t// Unbind removed nodes. When node does not have a parent it means that it was removed from DOM tree during\n\t\t// comparison with the expected DOM. We don't need to check child nodes, because if child node was reinserted,\n\t\t// it was moved to DOM tree out of the removed node.\n\t\tfor ( const node of nodesToUnbind ) {\n\t\t\tif ( !node.parentNode ) {\n\t\t\t\tthis.domConverter.unbindDomElement( node );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Shorthand for diffing two arrays or node lists of DOM nodes.\n\t *\n\t * @private\n\t * @param {Array.<Node>|NodeList} actualDomChildren Actual DOM children\n\t * @param {Array.<Node>|NodeList} expectedDomChildren Expected DOM children.\n\t * @returns {Array.<String>} The list of actions based on the {@link module:utils/diff~diff} function.\n\t */\n\t_diffNodeLists( actualDomChildren, expectedDomChildren ) {\n\t\tactualDomChildren = filterOutFakeSelectionContainer( actualDomChildren, this._fakeSelectionContainer );\n\n\t\treturn diff( actualDomChildren, expectedDomChildren, sameNodes.bind( null, this.domConverter ) );\n\t}\n\n\t/**\n\t * Finds DOM nodes that were replaced with the similar nodes (same tag name) in the view. All nodes are compared\n\t * within one `insert`/`delete` action group, for example:\n\t *\n\t * \t\tActual DOM:\t\t<p><b>Foo</b>Bar<i>Baz</i><b>Bax</b></p>\n\t * \t\tExpected DOM:\t<p>Bar<b>123</b><i>Baz</i><b>456</b></p>\n\t * \t\tInput actions:\t[ insert, insert, delete, delete, equal, insert, delete ]\n\t * \t\tOutput actions:\t[ insert, replace, delete, equal, replace ]\n\t *\n\t * @private\n\t * @param {Array.<String>} actions Actions array which is a result of the {@link module:utils/diff~diff} function.\n\t * @param {Array.<Node>|NodeList} actualDom Actual DOM children\n\t * @param {Array.<Node>} expectedDom Expected DOM children.\n\t * @returns {Array.<String>} Actions array modified with the `replace` actions.\n\t */\n\t_findReplaceActions( actions, actualDom, expectedDom ) {\n\t\t// If there is no both 'insert' and 'delete' actions, no need to check for replaced elements.\n\t\tif ( actions.indexOf( 'insert' ) === -1 || actions.indexOf( 'delete' ) === -1 ) {\n\t\t\treturn actions;\n\t\t}\n\n\t\tlet newActions = [];\n\t\tlet actualSlice = [];\n\t\tlet expectedSlice = [];\n\n\t\tconst counter = { equal: 0, insert: 0, delete: 0 };\n\n\t\tfor ( const action of actions ) {\n\t\t\tif ( action === 'insert' ) {\n\t\t\t\texpectedSlice.push( expectedDom[ counter.equal + counter.insert ] );\n\t\t\t} else if ( action === 'delete' ) {\n\t\t\t\tactualSlice.push( actualDom[ counter.equal + counter.delete ] );\n\t\t\t} else { // equal\n\t\t\t\tnewActions = newActions.concat( diff( actualSlice, expectedSlice, areSimilar ).map( x => x === 'equal' ? 'replace' : x ) );\n\t\t\t\tnewActions.push( 'equal' );\n\t\t\t\t// Reset stored elements on 'equal'.\n\t\t\t\tactualSlice = [];\n\t\t\t\texpectedSlice = [];\n\t\t\t}\n\t\t\tcounter[ action ]++;\n\t\t}\n\n\t\treturn newActions.concat( diff( actualSlice, expectedSlice, areSimilar ).map( x => x === 'equal' ? 'replace' : x ) );\n\t}\n\n\t/**\n\t * Marks text nodes to be synchronized.\n\t *\n\t * If a text node is passed, it will be marked. If an element is passed, all descendant text nodes inside it will be marked.\n\t *\n\t * @private\n\t * @param {module:engine/view/node~Node} viewNode View node to sync.\n\t */\n\t_markDescendantTextToSync( viewNode ) {\n\t\tif ( !viewNode ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( viewNode.is( '$text' ) ) {\n\t\t\tthis.markedTexts.add( viewNode );\n\t\t} else if ( viewNode.is( 'element' ) ) {\n\t\t\tfor ( const child of viewNode.getChildren() ) {\n\t\t\t\tthis._markDescendantTextToSync( child );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Checks if the selection needs to be updated and possibly updates it.\n\t *\n\t * @private\n\t */\n\t_updateSelection() {\n\t\t// If there is no selection - remove DOM and fake selections.\n\t\tif ( this.selection.rangeCount === 0 ) {\n\t\t\tthis._removeDomSelection();\n\t\t\tthis._removeFakeSelection();\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst domRoot = this.domConverter.mapViewToDom( this.selection.editableElement );\n\n\t\t// Do nothing if there is no focus, or there is no DOM element corresponding to selection's editable element.\n\t\tif ( !this.isFocused || !domRoot ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Render selection.\n\t\tif ( this.selection.isFake ) {\n\t\t\tthis._updateFakeSelection( domRoot );\n\t\t} else {\n\t\t\tthis._removeFakeSelection();\n\t\t\tthis._updateDomSelection( domRoot );\n\t\t}\n\t}\n\n\t/**\n\t * Updates the fake selection.\n\t *\n\t * @private\n\t * @param {HTMLElement} domRoot A valid DOM root where the fake selection container should be added.\n\t */\n\t_updateFakeSelection( domRoot ) {\n\t\tconst domDocument = domRoot.ownerDocument;\n\n\t\tif ( !this._fakeSelectionContainer ) {\n\t\t\tthis._fakeSelectionContainer = createFakeSelectionContainer( domDocument );\n\t\t}\n\n\t\tconst container = this._fakeSelectionContainer;\n\n\t\t// Bind fake selection container with the current selection *position*.\n\t\tthis.domConverter.bindFakeSelection( container, this.selection );\n\n\t\tif ( !this._fakeSelectionNeedsUpdate( domRoot ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !container.parentElement || container.parentElement != domRoot ) {\n\t\t\tdomRoot.appendChild( container );\n\t\t}\n\n\t\tcontainer.textContent = this.selection.fakeSelectionLabel || '\\u00A0';\n\n\t\tconst domSelection = domDocument.getSelection();\n\t\tconst domRange = domDocument.createRange();\n\n\t\tdomSelection.removeAllRanges();\n\t\tdomRange.selectNodeContents( container );\n\t\tdomSelection.addRange( domRange );\n\t}\n\n\t/**\n\t * Updates the DOM selection.\n\t *\n\t * @private\n\t * @param {HTMLElement} domRoot A valid DOM root where the DOM selection should be rendered.\n\t */\n\t_updateDomSelection( domRoot ) {\n\t\tconst domSelection = domRoot.ownerDocument.defaultView.getSelection();\n\n\t\t// Let's check whether DOM selection needs updating at all.\n\t\tif ( !this._domSelectionNeedsUpdate( domSelection ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Multi-range selection is not available in most browsers, and, at least in Chrome, trying to\n\t\t// set such selection, that is not continuous, throws an error. Because of that, we will just use anchor\n\t\t// and focus of view selection.\n\t\t// Since we are not supporting multi-range selection, we also do not need to check if proper editable is\n\t\t// selected. If there is any editable selected, it is okay (editable is taken from selection anchor).\n\t\tconst anchor = this.domConverter.viewPositionToDom( this.selection.anchor );\n\t\tconst focus = this.domConverter.viewPositionToDom( this.selection.focus );\n\n\t\t// Focus the new editing host.\n\t\t// Otherwise, FF may throw an error (https://github.com/ckeditor/ckeditor5/issues/721).\n\t\tdomRoot.focus();\n\n\t\tdomSelection.collapse( anchor.parent, anchor.offset );\n\t\tdomSelection.extend( focus.parent, focus.offset );\n\n\t\t// Firefox–specific hack (https://github.com/ckeditor/ckeditor5-engine/issues/1439).\n\t\tif ( env.isGecko ) {\n\t\t\tfixGeckoSelectionAfterBr( focus, domSelection );\n\t\t}\n\t}\n\n\t/**\n\t * Checks whether a given DOM selection needs to be updated.\n\t *\n\t * @private\n\t * @param {Selection} domSelection The DOM selection to check.\n\t * @returns {Boolean}\n\t */\n\t_domSelectionNeedsUpdate( domSelection ) {\n\t\tif ( !this.domConverter.isDomSelectionCorrect( domSelection ) ) {\n\t\t\t// Current DOM selection is in incorrect position. We need to update it.\n\t\t\treturn true;\n\t\t}\n\n\t\tconst oldViewSelection = domSelection && this.domConverter.domSelectionToView( domSelection );\n\n\t\tif ( oldViewSelection && this.selection.isEqual( oldViewSelection ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// If selection is not collapsed, it does not need to be updated if it is similar.\n\t\tif ( !this.selection.isCollapsed && this.selection.isSimilar( oldViewSelection ) ) {\n\t\t\t// Selection did not changed and is correct, do not update.\n\t\t\treturn false;\n\t\t}\n\n\t\t// Selections are not similar.\n\t\treturn true;\n\t}\n\n\t/**\n\t * Checks whether the fake selection needs to be updated.\n\t *\n\t * @private\n\t * @param {HTMLElement} domRoot A valid DOM root where a new fake selection container should be added.\n\t * @returns {Boolean}\n\t */\n\t_fakeSelectionNeedsUpdate( domRoot ) {\n\t\tconst container = this._fakeSelectionContainer;\n\t\tconst domSelection = domRoot.ownerDocument.getSelection();\n\n\t\t// Fake selection needs to be updated if there's no fake selection container, or the container currently sits\n\t\t// in a different root.\n\t\tif ( !container || container.parentElement !== domRoot ) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Make sure that the selection actually is within the fake selection.\n\t\tif ( domSelection.anchorNode !== container && !container.contains( domSelection.anchorNode ) ) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn container.textContent !== this.selection.fakeSelectionLabel;\n\t}\n\n\t/**\n\t * Removes the DOM selection.\n\t *\n\t * @private\n\t */\n\t_removeDomSelection() {\n\t\tfor ( const doc of this.domDocuments ) {\n\t\t\tconst domSelection = doc.getSelection();\n\n\t\t\tif ( domSelection.rangeCount ) {\n\t\t\t\tconst activeDomElement = doc.activeElement;\n\t\t\t\tconst viewElement = this.domConverter.mapDomToView( activeDomElement );\n\n\t\t\t\tif ( activeDomElement && viewElement ) {\n\t\t\t\t\tdoc.getSelection().removeAllRanges();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Removes the fake selection.\n\t *\n\t * @private\n\t */\n\t_removeFakeSelection() {\n\t\tconst container = this._fakeSelectionContainer;\n\n\t\tif ( container ) {\n\t\t\tcontainer.remove();\n\t\t}\n\t}\n\n\t/**\n\t * Checks if focus needs to be updated and possibly updates it.\n\t *\n\t * @private\n\t */\n\t_updateFocus() {\n\t\tif ( this.isFocused ) {\n\t\t\tconst editable = this.selection.editableElement;\n\n\t\t\tif ( editable ) {\n\t\t\t\tthis.domConverter.focus( editable );\n\t\t\t}\n\t\t}\n\t}\n}\n\nmix( Renderer, ObservableMixin );\n\n// Checks if provided element is editable.\n//\n// @private\n// @param {module:engine/view/element~Element} element\n// @returns {Boolean}\nfunction isEditable( element ) {\n\tif ( element.getAttribute( 'contenteditable' ) == 'false' ) {\n\t\treturn false;\n\t}\n\n\tconst parent = element.findAncestor( element => element.hasAttribute( 'contenteditable' ) );\n\n\treturn !parent || parent.getAttribute( 'contenteditable' ) == 'true';\n}\n\n// Adds inline filler at a given position.\n//\n// The position can be given as an array of DOM nodes and an offset in that array,\n// or a DOM parent element and an offset in that element.\n//\n// @private\n// @param {Document} domDocument\n// @param {Element|Array.<Node>} domParentOrArray\n// @param {Number} offset\n// @returns {Text} The DOM text node that contains an inline filler.\nfunction addInlineFiller( domDocument, domParentOrArray, offset ) {\n\tconst childNodes = domParentOrArray instanceof Array ? domParentOrArray : domParentOrArray.childNodes;\n\tconst nodeAfterFiller = childNodes[ offset ];\n\n\tif ( isText( nodeAfterFiller ) ) {\n\t\tnodeAfterFiller.data = INLINE_FILLER + nodeAfterFiller.data;\n\n\t\treturn nodeAfterFiller;\n\t} else {\n\t\tconst fillerNode = domDocument.createTextNode( INLINE_FILLER );\n\n\t\tif ( Array.isArray( domParentOrArray ) ) {\n\t\t\tchildNodes.splice( offset, 0, fillerNode );\n\t\t} else {\n\t\t\tinsertAt( domParentOrArray, offset, fillerNode );\n\t\t}\n\n\t\treturn fillerNode;\n\t}\n}\n\n// Whether two DOM nodes should be considered as similar.\n// Nodes are considered similar if they have the same tag name.\n//\n// @private\n// @param {Node} node1\n// @param {Node} node2\n// @returns {Boolean}\nfunction areSimilar( node1, node2 ) {\n\treturn isNode( node1 ) && isNode( node2 ) &&\n\t\t!isText( node1 ) && !isText( node2 ) &&\n\t\tnode1.nodeType !== Node.COMMENT_NODE && node2.nodeType !== Node.COMMENT_NODE &&\n\t\tnode1.tagName.toLowerCase() === node2.tagName.toLowerCase();\n}\n\n// Whether two dom nodes should be considered as the same.\n// Two nodes which are considered the same are:\n//\n//\t\t* Text nodes with the same text.\n//\t\t* Element nodes represented by the same object.\n//\t\t* Two block filler elements.\n//\n// @private\n// @param {String} blockFillerMode Block filler mode, see {@link module:engine/view/domconverter~DomConverter#blockFillerMode}.\n// @param {Node} node1\n// @param {Node} node2\n// @returns {Boolean}\nfunction sameNodes( domConverter, actualDomChild, expectedDomChild ) {\n\t// Elements.\n\tif ( actualDomChild === expectedDomChild ) {\n\t\treturn true;\n\t}\n\t// Texts.\n\telse if ( isText( actualDomChild ) && isText( expectedDomChild ) ) {\n\t\treturn actualDomChild.data === expectedDomChild.data;\n\t}\n\t// Block fillers.\n\telse if ( domConverter.isBlockFiller( actualDomChild ) &&\n\t\tdomConverter.isBlockFiller( expectedDomChild ) ) {\n\t\treturn true;\n\t}\n\n\t// Not matching types.\n\treturn false;\n}\n\n// The following is a Firefox–specific hack (https://github.com/ckeditor/ckeditor5-engine/issues/1439).\n// When the native DOM selection is at the end of the block and preceded by <br /> e.g.\n//\n//\t\t<p>foo<br/>[]</p>\n//\n// which happens a lot when using the soft line break, the browser fails to (visually) move the\n// caret to the new line. A quick fix is as simple as force–refreshing the selection with the same range.\nfunction fixGeckoSelectionAfterBr( focus, domSelection ) {\n\tconst parent = focus.parent;\n\n\t// This fix works only when the focus point is at the very end of an element.\n\t// There is no point in running it in cases unrelated to the browser bug.\n\tif ( parent.nodeType != Node.ELEMENT_NODE || focus.offset != parent.childNodes.length - 1 ) {\n\t\treturn;\n\t}\n\n\tconst childAtOffset = parent.childNodes[ focus.offset ];\n\n\t// To stay on the safe side, the fix being as specific as possible, it targets only the\n\t// selection which is at the very end of the element and preceded by <br />.\n\tif ( childAtOffset && childAtOffset.tagName == 'BR' ) {\n\t\tdomSelection.addRange( domSelection.getRangeAt( 0 ) );\n\t}\n}\n\nfunction filterOutFakeSelectionContainer( domChildList, fakeSelectionContainer ) {\n\tconst childList = Array.from( domChildList );\n\n\tif ( childList.length == 0 || !fakeSelectionContainer ) {\n\t\treturn childList;\n\t}\n\n\tconst last = childList[ childList.length - 1 ];\n\n\tif ( last == fakeSelectionContainer ) {\n\t\tchildList.pop();\n\t}\n\n\treturn childList;\n}\n\n// Creates a fake selection container for a given document.\n//\n// @private\n// @param {Document} domDocument\n// @returns {HTMLElement}\nfunction createFakeSelectionContainer( domDocument ) {\n\tconst container = domDocument.createElement( 'div' );\n\n\tcontainer.className = 'ck-fake-selection-container';\n\n\tObject.assign( container.style, {\n\t\tposition: 'fixed',\n\t\ttop: 0,\n\t\tleft: '-9999px',\n\t\t// See https://github.com/ckeditor/ckeditor5/issues/752.\n\t\twidth: '42px'\n\t} );\n\n\t// Fill it with a text node so we can update it later.\n\tcontainer.textContent = '\\u00A0';\n\n\treturn container;\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/* globals window, document */\n\n/**\n * @module utils/dom/global\n */\n\n/**\n * A helper (module) giving an access to the global DOM objects such as `window` and\n * `document`. Accessing these objects using this helper allows easy and bulletproof\n * testing, i.e. stubbing native properties:\n *\n *\t\timport global from 'ckeditor5/utils/dom/global.js';\n *\n *\t\t// This stub will work for any code using global module.\n *\t\ttestUtils.sinon.stub( global, 'window', {\n *\t\t\tinnerWidth: 10000\n *\t\t} );\n *\n *\t\tconsole.log( global.window.innerWidth );\n */\nexport default { window, document };\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/dom/indexof\n */\n\n/**\n * Returns index of the node in the parent element.\n *\n * @param {Node} node Node which index is tested.\n * @returns {Number} Index of the node in the parent element. Returns 0 if node has no parent.\n */\nexport default function indexOf( node ) {\n\tlet index = 0;\n\n\twhile ( node.previousSibling ) {\n\t\tnode = node.previousSibling;\n\t\tindex++;\n\t}\n\n\treturn index;\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/* globals Node */\n\n/**\n * @module utils/dom/getancestors\n */\n\n/**\n * Returns all ancestors of given DOM node, starting from the top-most (root). Includes the given node itself. If the\n * node is a part of `DocumentFragment` that `DocumentFragment` will be returned. In contrary, if the node is\n * appended to a `Document`, that `Document` will not be returned (algorithms operating on DOM tree care for `Document#documentElement`\n * at most, which will be returned).\n *\n * @param {Node} node DOM node.\n * @returns {Array.<Node|DocumentFragment>} Array of given `node` parents.\n */\nexport default function getAncestors( node ) {\n\tconst nodes = [];\n\n\t// We are interested in `Node`s `DocumentFragment`s only.\n\twhile ( node && node.nodeType != Node.DOCUMENT_NODE ) {\n\t\tnodes.unshift( node );\n\t\tnode = node.parentNode;\n\t}\n\n\treturn nodes;\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/domconverter\n */\n\n/* globals document, Node, NodeFilter, Text */\n\nimport ViewText from './text';\nimport ViewElement from './element';\nimport ViewPosition from './position';\nimport ViewRange from './range';\nimport ViewSelection from './selection';\nimport ViewDocumentFragment from './documentfragment';\nimport ViewTreeWalker from './treewalker';\nimport Matcher from './matcher';\nimport { BR_FILLER, getDataWithoutFiller, INLINE_FILLER_LENGTH, isInlineFiller, NBSP_FILLER, startsWithFiller } from './filler';\n\nimport global from '@ckeditor/ckeditor5-utils/src/dom/global';\nimport indexOf from '@ckeditor/ckeditor5-utils/src/dom/indexof';\nimport getAncestors from '@ckeditor/ckeditor5-utils/src/dom/getancestors';\nimport getCommonAncestor from '@ckeditor/ckeditor5-utils/src/dom/getcommonancestor';\nimport isText from '@ckeditor/ckeditor5-utils/src/dom/istext';\nimport { isElement } from 'lodash-es';\n\n// eslint-disable-next-line new-cap\nconst BR_FILLER_REF = BR_FILLER( document );\n\n/**\n * `DomConverter` is a set of tools to do transformations between DOM nodes and view nodes. It also handles\n * {@link module:engine/view/domconverter~DomConverter#bindElements bindings} between these nodes.\n *\n * An instance of the DOM converter is available under\n * {@link module:engine/view/view~View#domConverter `editor.editing.view.domConverter`}.\n *\n * The DOM converter does not check which nodes should be rendered (use {@link module:engine/view/renderer~Renderer}), does not keep the\n * state of a tree nor keeps the synchronization between the tree view and the DOM tree (use {@link module:engine/view/document~Document}).\n *\n * The DOM converter keeps DOM elements to view element bindings, so when the converter gets destroyed, the bindings are lost.\n * Two converters will keep separate binding maps, so one tree view can be bound with two DOM trees.\n */\nexport default class DomConverter {\n\t/**\n\t * Creates a DOM converter.\n\t *\n\t * @param {module:engine/view/document~Document} document The view document instance.\n\t * @param {Object} options An object with configuration options.\n\t * @param {module:engine/view/filler~BlockFillerMode} [options.blockFillerMode='br'] The type of the block filler to use.\n\t */\n\tconstructor( document, options = {} ) {\n\t\t/**\n\t\t * @readonly\n\t\t * @type {module:engine/view/document~Document}\n\t\t */\n\t\tthis.document = document;\n\n\t\t/**\n\t\t * The mode of a block filler used by the DOM converter.\n\t\t *\n\t\t * @readonly\n\t\t * @member {'br'|'nbsp'} module:engine/view/domconverter~DomConverter#blockFillerMode\n\t\t */\n\t\tthis.blockFillerMode = options.blockFillerMode || 'br';\n\n\t\t/**\n\t\t * Elements which are considered pre-formatted elements.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Array.<String>} module:engine/view/domconverter~DomConverter#preElements\n\t\t */\n\t\tthis.preElements = [ 'pre' ];\n\n\t\t/**\n\t\t * Elements which are considered block elements (and hence should be filled with a\n\t\t * {@link #isBlockFiller block filler}).\n\t\t *\n\t\t * Whether an element is considered a block element also affects handling of trailing whitespaces.\n\t\t *\n\t\t * You can extend this array if you introduce support for block elements which are not yet recognized here.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Array.<String>} module:engine/view/domconverter~DomConverter#blockElements\n\t\t */\n\t\tthis.blockElements = [ 'p', 'div', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'li', 'dd', 'dt', 'figcaption', 'td', 'th' ];\n\n\t\t/**\n\t\t * Block {@link module:engine/view/filler filler} creator, which is used to create all block fillers during the\n\t\t * view-to-DOM conversion and to recognize block fillers during the DOM-to-view conversion.\n\t\t *\n\t\t * @readonly\n\t\t * @private\n\t\t * @member {Function} module:engine/view/domconverter~DomConverter#_blockFiller\n\t\t */\n\t\tthis._blockFiller = this.blockFillerMode == 'br' ? BR_FILLER : NBSP_FILLER;\n\n\t\t/**\n\t\t * The DOM-to-view mapping.\n\t\t *\n\t\t * @private\n\t\t * @member {WeakMap} module:engine/view/domconverter~DomConverter#_domToViewMapping\n\t\t */\n\t\tthis._domToViewMapping = new WeakMap();\n\n\t\t/**\n\t\t * The view-to-DOM mapping.\n\t\t *\n\t\t * @private\n\t\t * @member {WeakMap} module:engine/view/domconverter~DomConverter#_viewToDomMapping\n\t\t */\n\t\tthis._viewToDomMapping = new WeakMap();\n\n\t\t/**\n\t\t * Holds the mapping between fake selection containers and corresponding view selections.\n\t\t *\n\t\t * @private\n\t\t * @member {WeakMap} module:engine/view/domconverter~DomConverter#_fakeSelectionMapping\n\t\t */\n\t\tthis._fakeSelectionMapping = new WeakMap();\n\n\t\t/**\n\t\t * Matcher for view elements whose content should be treated as raw data\n\t\t * and not processed during the conversion from DOM nodes to view elements.\n\t\t *\n\t\t * @private\n\t\t * @type {module:engine/view/matcher~Matcher}\n\t\t */\n\t\tthis._rawContentElementMatcher = new Matcher();\n\n\t\t/**\n\t\t * A set of encountered raw content DOM nodes. It is used for preventing left trimming of the following text node.\n\t\t *\n\t\t * @private\n\t\t * @type {WeakSet.<Node>}\n\t\t */\n\t\tthis._encounteredRawContentDomNodes = new WeakSet();\n\t}\n\n\t/**\n\t * Binds a given DOM element that represents fake selection to a **position** of a\n\t * {@link module:engine/view/documentselection~DocumentSelection document selection}.\n\t * Document selection copy is stored and can be retrieved by the\n\t * {@link module:engine/view/domconverter~DomConverter#fakeSelectionToView} method.\n\t *\n\t * @param {HTMLElement} domElement\n\t * @param {module:engine/view/documentselection~DocumentSelection} viewDocumentSelection\n\t */\n\tbindFakeSelection( domElement, viewDocumentSelection ) {\n\t\tthis._fakeSelectionMapping.set( domElement, new ViewSelection( viewDocumentSelection ) );\n\t}\n\n\t/**\n\t * Returns a {@link module:engine/view/selection~Selection view selection} instance corresponding to a given\n\t * DOM element that represents fake selection. Returns `undefined` if binding to the given DOM element does not exist.\n\t *\n\t * @param {HTMLElement} domElement\n\t * @returns {module:engine/view/selection~Selection|undefined}\n\t */\n\tfakeSelectionToView( domElement ) {\n\t\treturn this._fakeSelectionMapping.get( domElement );\n\t}\n\n\t/**\n\t * Binds DOM and view elements, so it will be possible to get corresponding elements using\n\t * {@link module:engine/view/domconverter~DomConverter#mapDomToView} and\n\t * {@link module:engine/view/domconverter~DomConverter#mapViewToDom}.\n\t *\n\t * @param {HTMLElement} domElement The DOM element to bind.\n\t * @param {module:engine/view/element~Element} viewElement The view element to bind.\n\t */\n\tbindElements( domElement, viewElement ) {\n\t\tthis._domToViewMapping.set( domElement, viewElement );\n\t\tthis._viewToDomMapping.set( viewElement, domElement );\n\t}\n\n\t/**\n\t * Unbinds a given DOM element from the view element it was bound to. Unbinding is deep, meaning that all children of\n\t * the DOM element will be unbound too.\n\t *\n\t * @param {HTMLElement} domElement The DOM element to unbind.\n\t */\n\tunbindDomElement( domElement ) {\n\t\tconst viewElement = this._domToViewMapping.get( domElement );\n\n\t\tif ( viewElement ) {\n\t\t\tthis._domToViewMapping.delete( domElement );\n\t\t\tthis._viewToDomMapping.delete( viewElement );\n\n\t\t\tfor ( const child of domElement.childNodes ) {\n\t\t\t\tthis.unbindDomElement( child );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Binds DOM and view document fragments, so it will be possible to get corresponding document fragments using\n\t * {@link module:engine/view/domconverter~DomConverter#mapDomToView} and\n\t * {@link module:engine/view/domconverter~DomConverter#mapViewToDom}.\n\t *\n\t * @param {DocumentFragment} domFragment The DOM document fragment to bind.\n\t * @param {module:engine/view/documentfragment~DocumentFragment} viewFragment The view document fragment to bind.\n\t */\n\tbindDocumentFragments( domFragment, viewFragment ) {\n\t\tthis._domToViewMapping.set( domFragment, viewFragment );\n\t\tthis._viewToDomMapping.set( viewFragment, domFragment );\n\t}\n\n\t/**\n\t * Converts the view to the DOM. For all text nodes, not bound elements and document fragments new items will\n\t * be created. For bound elements and document fragments the method will return corresponding items.\n\t *\n\t * @param {module:engine/view/node~Node|module:engine/view/documentfragment~DocumentFragment} viewNode\n\t * View node or document fragment to transform.\n\t * @param {Document} domDocument Document which will be used to create DOM nodes.\n\t * @param {Object} [options] Conversion options.\n\t * @param {Boolean} [options.bind=false] Determines whether new elements will be bound.\n\t * @param {Boolean} [options.withChildren=true] If `true`, node's and document fragment's children will be converted too.\n\t * @returns {Node|DocumentFragment} Converted node or DocumentFragment.\n\t */\n\tviewToDom( viewNode, domDocument, options = {} ) {\n\t\tif ( viewNode.is( '$text' ) ) {\n\t\t\tconst textData = this._processDataFromViewText( viewNode );\n\n\t\t\treturn domDocument.createTextNode( textData );\n\t\t} else {\n\t\t\tif ( this.mapViewToDom( viewNode ) ) {\n\t\t\t\treturn this.mapViewToDom( viewNode );\n\t\t\t}\n\n\t\t\tlet domElement;\n\n\t\t\tif ( viewNode.is( 'documentFragment' ) ) {\n\t\t\t\t// Create DOM document fragment.\n\t\t\t\tdomElement = domDocument.createDocumentFragment();\n\n\t\t\t\tif ( options.bind ) {\n\t\t\t\t\tthis.bindDocumentFragments( domElement, viewNode );\n\t\t\t\t}\n\t\t\t} else if ( viewNode.is( 'uiElement' ) ) {\n\t\t\t\t// UIElement has its own render() method (see #799).\n\t\t\t\tdomElement = viewNode.render( domDocument );\n\n\t\t\t\tif ( options.bind ) {\n\t\t\t\t\tthis.bindElements( domElement, viewNode );\n\t\t\t\t}\n\n\t\t\t\treturn domElement;\n\t\t\t} else {\n\t\t\t\t// Create DOM element.\n\t\t\t\tif ( viewNode.hasAttribute( 'xmlns' ) ) {\n\t\t\t\t\tdomElement = domDocument.createElementNS( viewNode.getAttribute( 'xmlns' ), viewNode.name );\n\t\t\t\t} else {\n\t\t\t\t\tdomElement = domDocument.createElement( viewNode.name );\n\t\t\t\t}\n\n\t\t\t\t// RawElement take care of their children in RawElement#render() method which can be customized\n\t\t\t\t// (see https://github.com/ckeditor/ckeditor5/issues/4469).\n\t\t\t\tif ( viewNode.is( 'rawElement' ) ) {\n\t\t\t\t\tviewNode.render( domElement );\n\t\t\t\t}\n\n\t\t\t\tif ( options.bind ) {\n\t\t\t\t\tthis.bindElements( domElement, viewNode );\n\t\t\t\t}\n\n\t\t\t\t// Copy element's attributes.\n\t\t\t\tfor ( const key of viewNode.getAttributeKeys() ) {\n\t\t\t\t\tdomElement.setAttribute( key, viewNode.getAttribute( key ) );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( options.withChildren !== false ) {\n\t\t\t\tfor ( const child of this.viewChildrenToDom( viewNode, domDocument, options ) ) {\n\t\t\t\t\tdomElement.appendChild( child );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn domElement;\n\t\t}\n\t}\n\n\t/**\n\t * Converts children of the view element to DOM using the\n\t * {@link module:engine/view/domconverter~DomConverter#viewToDom} method.\n\t * Additionally, this method adds block {@link module:engine/view/filler filler} to the list of children, if needed.\n\t *\n\t * @param {module:engine/view/element~Element|module:engine/view/documentfragment~DocumentFragment} viewElement Parent view element.\n\t * @param {Document} domDocument Document which will be used to create DOM nodes.\n\t * @param {Object} options See {@link module:engine/view/domconverter~DomConverter#viewToDom} options parameter.\n\t * @returns {Iterable.<Node>} DOM nodes.\n\t */\n\t* viewChildrenToDom( viewElement, domDocument, options = {} ) {\n\t\tconst fillerPositionOffset = viewElement.getFillerOffset && viewElement.getFillerOffset();\n\t\tlet offset = 0;\n\n\t\tfor ( const childView of viewElement.getChildren() ) {\n\t\t\tif ( fillerPositionOffset === offset ) {\n\t\t\t\tyield this._blockFiller( domDocument );\n\t\t\t}\n\n\t\t\tyield this.viewToDom( childView, domDocument, options );\n\n\t\t\toffset++;\n\t\t}\n\n\t\tif ( fillerPositionOffset === offset ) {\n\t\t\tyield this._blockFiller( domDocument );\n\t\t}\n\t}\n\n\t/**\n\t * Converts view {@link module:engine/view/range~Range} to DOM range.\n\t * Inline and block {@link module:engine/view/filler fillers} are handled during the conversion.\n\t *\n\t * @param {module:engine/view/range~Range} viewRange View range.\n\t * @returns {Range} DOM range.\n\t */\n\tviewRangeToDom( viewRange ) {\n\t\tconst domStart = this.viewPositionToDom( viewRange.start );\n\t\tconst domEnd = this.viewPositionToDom( viewRange.end );\n\n\t\tconst domRange = document.createRange();\n\t\tdomRange.setStart( domStart.parent, domStart.offset );\n\t\tdomRange.setEnd( domEnd.parent, domEnd.offset );\n\n\t\treturn domRange;\n\t}\n\n\t/**\n\t * Converts view {@link module:engine/view/position~Position} to DOM parent and offset.\n\t *\n\t * Inline and block {@link module:engine/view/filler fillers} are handled during the conversion.\n\t * If the converted position is directly before inline filler it is moved inside the filler.\n\t *\n\t * @param {module:engine/view/position~Position} viewPosition View position.\n\t * @returns {Object|null} position DOM position or `null` if view position could not be converted to DOM.\n\t * @returns {Node} position.parent DOM position parent.\n\t * @returns {Number} position.offset DOM position offset.\n\t */\n\tviewPositionToDom( viewPosition ) {\n\t\tconst viewParent = viewPosition.parent;\n\n\t\tif ( viewParent.is( '$text' ) ) {\n\t\t\tconst domParent = this.findCorrespondingDomText( viewParent );\n\n\t\t\tif ( !domParent ) {\n\t\t\t\t// Position is in a view text node that has not been rendered to DOM yet.\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tlet offset = viewPosition.offset;\n\n\t\t\tif ( startsWithFiller( domParent ) ) {\n\t\t\t\toffset += INLINE_FILLER_LENGTH;\n\t\t\t}\n\n\t\t\treturn { parent: domParent, offset };\n\t\t} else {\n\t\t\t// viewParent is instance of ViewElement.\n\t\t\tlet domParent, domBefore, domAfter;\n\n\t\t\tif ( viewPosition.offset === 0 ) {\n\t\t\t\tdomParent = this.mapViewToDom( viewParent );\n\n\t\t\t\tif ( !domParent ) {\n\t\t\t\t\t// Position is in a view element that has not been rendered to DOM yet.\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tdomAfter = domParent.childNodes[ 0 ];\n\t\t\t} else {\n\t\t\t\tconst nodeBefore = viewPosition.nodeBefore;\n\n\t\t\t\tdomBefore = nodeBefore.is( '$text' ) ?\n\t\t\t\t\tthis.findCorrespondingDomText( nodeBefore ) :\n\t\t\t\t\tthis.mapViewToDom( viewPosition.nodeBefore );\n\n\t\t\t\tif ( !domBefore ) {\n\t\t\t\t\t// Position is after a view element that has not been rendered to DOM yet.\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tdomParent = domBefore.parentNode;\n\t\t\t\tdomAfter = domBefore.nextSibling;\n\t\t\t}\n\n\t\t\t// If there is an inline filler at position return position inside the filler. We should never return\n\t\t\t// the position before the inline filler.\n\t\t\tif ( isText( domAfter ) && startsWithFiller( domAfter ) ) {\n\t\t\t\treturn { parent: domAfter, offset: INLINE_FILLER_LENGTH };\n\t\t\t}\n\n\t\t\tconst offset = domBefore ? indexOf( domBefore ) + 1 : 0;\n\n\t\t\treturn { parent: domParent, offset };\n\t\t}\n\t}\n\n\t/**\n\t * Converts DOM to view. For all text nodes, not bound elements and document fragments new items will\n\t * be created. For bound elements and document fragments function will return corresponding items. For\n\t * {@link module:engine/view/filler fillers} `null` will be returned.\n\t * For all DOM elements rendered by {@link module:engine/view/uielement~UIElement} that UIElement will be returned.\n\t *\n\t * @param {Node|DocumentFragment} domNode DOM node or document fragment to transform.\n\t * @param {Object} [options] Conversion options.\n\t * @param {Boolean} [options.bind=false] Determines whether new elements will be bound.\n\t * @param {Boolean} [options.withChildren=true] If `true`, node's and document fragment's children will be converted too.\n\t * @param {Boolean} [options.keepOriginalCase=false] If `false`, node's tag name will be converter to lower case.\n\t * @returns {module:engine/view/node~Node|module:engine/view/documentfragment~DocumentFragment|null} Converted node or document fragment\n\t * or `null` if DOM node is a {@link module:engine/view/filler filler} or the given node is an empty text node.\n\t */\n\tdomToView( domNode, options = {} ) {\n\t\tif ( this.isBlockFiller( domNode, this.blockFillerMode ) ) {\n\t\t\treturn null;\n\t\t}\n\n\t\t// When node is inside a UIElement or a RawElement return that parent as it's view representation.\n\t\tconst hostElement = this.getHostViewElement( domNode );\n\n\t\tif ( hostElement ) {\n\t\t\treturn hostElement;\n\t\t}\n\n\t\tif ( isText( domNode ) ) {\n\t\t\tif ( isInlineFiller( domNode ) ) {\n\t\t\t\treturn null;\n\t\t\t} else {\n\t\t\t\tconst textData = this._processDataFromDomText( domNode );\n\n\t\t\t\treturn textData === '' ? null : new ViewText( this.document, textData );\n\t\t\t}\n\t\t} else if ( this.isComment( domNode ) ) {\n\t\t\treturn null;\n\t\t} else {\n\t\t\tif ( this.mapDomToView( domNode ) ) {\n\t\t\t\treturn this.mapDomToView( domNode );\n\t\t\t}\n\n\t\t\tlet viewElement;\n\n\t\t\tif ( this.isDocumentFragment( domNode ) ) {\n\t\t\t\t// Create view document fragment.\n\t\t\t\tviewElement = new ViewDocumentFragment( this.document );\n\n\t\t\t\tif ( options.bind ) {\n\t\t\t\t\tthis.bindDocumentFragments( domNode, viewElement );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Create view element.\n\t\t\t\tconst viewName = options.keepOriginalCase ? domNode.tagName : domNode.tagName.toLowerCase();\n\t\t\t\tviewElement = new ViewElement( this.document, viewName );\n\n\t\t\t\tif ( options.bind ) {\n\t\t\t\t\tthis.bindElements( domNode, viewElement );\n\t\t\t\t}\n\n\t\t\t\t// Copy element's attributes.\n\t\t\t\tconst attrs = domNode.attributes;\n\n\t\t\t\tfor ( let i = attrs.length - 1; i >= 0; i-- ) {\n\t\t\t\t\tviewElement._setAttribute( attrs[ i ].name, attrs[ i ].value );\n\t\t\t\t}\n\n\t\t\t\t// Treat this element's content as a raw data if it was registered as such.\n\t\t\t\tif ( options.withChildren !== false && this._rawContentElementMatcher.match( viewElement ) ) {\n\t\t\t\t\tviewElement._setCustomProperty( '$rawContent', domNode.innerHTML );\n\n\t\t\t\t\t// Store a DOM node to prevent left trimming of the following text node.\n\t\t\t\t\tthis._encounteredRawContentDomNodes.add( domNode );\n\n\t\t\t\t\treturn viewElement;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( options.withChildren !== false ) {\n\t\t\t\tfor ( const child of this.domChildrenToView( domNode, options ) ) {\n\t\t\t\t\tviewElement._appendChild( child );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn viewElement;\n\t\t}\n\t}\n\n\t/**\n\t * Converts children of the DOM element to view nodes using\n\t * the {@link module:engine/view/domconverter~DomConverter#domToView} method.\n\t * Additionally this method omits block {@link module:engine/view/filler filler}, if it exists in the DOM parent.\n\t *\n\t * @param {HTMLElement} domElement Parent DOM element.\n\t * @param {Object} options See {@link module:engine/view/domconverter~DomConverter#domToView} options parameter.\n\t * @returns {Iterable.<module:engine/view/node~Node>} View nodes.\n\t */\n\t* domChildrenToView( domElement, options = {} ) {\n\t\tfor ( let i = 0; i < domElement.childNodes.length; i++ ) {\n\t\t\tconst domChild = domElement.childNodes[ i ];\n\t\t\tconst viewChild = this.domToView( domChild, options );\n\n\t\t\tif ( viewChild !== null ) {\n\t\t\t\tyield viewChild;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Converts DOM selection to view {@link module:engine/view/selection~Selection}.\n\t * Ranges which cannot be converted will be omitted.\n\t *\n\t * @param {Selection} domSelection DOM selection.\n\t * @returns {module:engine/view/selection~Selection} View selection.\n\t */\n\tdomSelectionToView( domSelection ) {\n\t\t// DOM selection might be placed in fake selection container.\n\t\t// If container contains fake selection - return corresponding view selection.\n\t\tif ( domSelection.rangeCount === 1 ) {\n\t\t\tlet container = domSelection.getRangeAt( 0 ).startContainer;\n\n\t\t\t// The DOM selection might be moved to the text node inside the fake selection container.\n\t\t\tif ( isText( container ) ) {\n\t\t\t\tcontainer = container.parentNode;\n\t\t\t}\n\n\t\t\tconst viewSelection = this.fakeSelectionToView( container );\n\n\t\t\tif ( viewSelection ) {\n\t\t\t\treturn viewSelection;\n\t\t\t}\n\t\t}\n\n\t\tconst isBackward = this.isDomSelectionBackward( domSelection );\n\n\t\tconst viewRanges = [];\n\n\t\tfor ( let i = 0; i < domSelection.rangeCount; i++ ) {\n\t\t\t// DOM Range have correct start and end, no matter what is the DOM Selection direction. So we don't have to fix anything.\n\t\t\tconst domRange = domSelection.getRangeAt( i );\n\t\t\tconst viewRange = this.domRangeToView( domRange );\n\n\t\t\tif ( viewRange ) {\n\t\t\t\tviewRanges.push( viewRange );\n\t\t\t}\n\t\t}\n\n\t\treturn new ViewSelection( viewRanges, { backward: isBackward } );\n\t}\n\n\t/**\n\t * Converts DOM Range to view {@link module:engine/view/range~Range}.\n\t * If the start or end position can not be converted `null` is returned.\n\t *\n\t * @param {Range} domRange DOM range.\n\t * @returns {module:engine/view/range~Range|null} View range.\n\t */\n\tdomRangeToView( domRange ) {\n\t\tconst viewStart = this.domPositionToView( domRange.startContainer, domRange.startOffset );\n\t\tconst viewEnd = this.domPositionToView( domRange.endContainer, domRange.endOffset );\n\n\t\tif ( viewStart && viewEnd ) {\n\t\t\treturn new ViewRange( viewStart, viewEnd );\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Converts DOM parent and offset to view {@link module:engine/view/position~Position}.\n\t *\n\t * If the position is inside a {@link module:engine/view/filler filler} which has no corresponding view node,\n\t * position of the filler will be converted and returned.\n\t *\n\t * If the position is inside DOM element rendered by {@link module:engine/view/uielement~UIElement}\n\t * that position will be converted to view position before that UIElement.\n\t *\n\t * If structures are too different and it is not possible to find corresponding position then `null` will be returned.\n\t *\n\t * @param {Node} domParent DOM position parent.\n\t * @param {Number} domOffset DOM position offset.\n\t * @returns {module:engine/view/position~Position} viewPosition View position.\n\t */\n\tdomPositionToView( domParent, domOffset ) {\n\t\tif ( this.isBlockFiller( domParent, this.blockFillerMode ) ) {\n\t\t\treturn this.domPositionToView( domParent.parentNode, indexOf( domParent ) );\n\t\t}\n\n\t\t// If position is somewhere inside UIElement or a RawElement - return position before that element.\n\t\tconst viewElement = this.mapDomToView( domParent );\n\n\t\tif ( viewElement && ( viewElement.is( 'uiElement' ) || viewElement.is( 'rawElement' ) ) ) {\n\t\t\treturn ViewPosition._createBefore( viewElement );\n\t\t}\n\n\t\tif ( isText( domParent ) ) {\n\t\t\tif ( isInlineFiller( domParent ) ) {\n\t\t\t\treturn this.domPositionToView( domParent.parentNode, indexOf( domParent ) );\n\t\t\t}\n\n\t\t\tconst viewParent = this.findCorrespondingViewText( domParent );\n\t\t\tlet offset = domOffset;\n\n\t\t\tif ( !viewParent ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tif ( startsWithFiller( domParent ) ) {\n\t\t\t\toffset -= INLINE_FILLER_LENGTH;\n\t\t\t\toffset = offset < 0 ? 0 : offset;\n\t\t\t}\n\n\t\t\treturn new ViewPosition( viewParent, offset );\n\t\t}\n\t\t// domParent instanceof HTMLElement.\n\t\telse {\n\t\t\tif ( domOffset === 0 ) {\n\t\t\t\tconst viewParent = this.mapDomToView( domParent );\n\n\t\t\t\tif ( viewParent ) {\n\t\t\t\t\treturn new ViewPosition( viewParent, 0 );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst domBefore = domParent.childNodes[ domOffset - 1 ];\n\t\t\t\tconst viewBefore = isText( domBefore ) ?\n\t\t\t\t\tthis.findCorrespondingViewText( domBefore ) :\n\t\t\t\t\tthis.mapDomToView( domBefore );\n\n\t\t\t\t// TODO #663\n\t\t\t\tif ( viewBefore && viewBefore.parent ) {\n\t\t\t\t\treturn new ViewPosition( viewBefore.parent, viewBefore.index + 1 );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null;\n\t\t}\n\t}\n\n\t/**\n\t * Returns corresponding view {@link module:engine/view/element~Element Element} or\n\t * {@link module:engine/view/documentfragment~DocumentFragment} for provided DOM element or\n\t * document fragment. If there is no view item {@link module:engine/view/domconverter~DomConverter#bindElements bound}\n\t * to the given DOM - `undefined` is returned.\n\t *\n\t * For all DOM elements rendered by a {@link module:engine/view/uielement~UIElement} or\n\t * a {@link module:engine/view/rawelement~RawElement}, the parent `UIElement` or `RawElement` will be returned.\n\t *\n\t * @param {DocumentFragment|Element} domElementOrDocumentFragment DOM element or document fragment.\n\t * @returns {module:engine/view/element~Element|module:engine/view/documentfragment~DocumentFragment|undefined}\n\t * Corresponding view element, document fragment or `undefined` if no element was bound.\n\t */\n\tmapDomToView( domElementOrDocumentFragment ) {\n\t\tconst hostElement = this.getHostViewElement( domElementOrDocumentFragment );\n\n\t\treturn hostElement || this._domToViewMapping.get( domElementOrDocumentFragment );\n\t}\n\n\t/**\n\t * Finds corresponding text node. Text nodes are not {@link module:engine/view/domconverter~DomConverter#bindElements bound},\n\t * corresponding text node is returned based on the sibling or parent.\n\t *\n\t * If the directly previous sibling is a {@link module:engine/view/domconverter~DomConverter#bindElements bound} element, it is used\n\t * to find the corresponding text node.\n\t *\n\t * If this is a first child in the parent and the parent is a {@link module:engine/view/domconverter~DomConverter#bindElements bound}\n\t * element, it is used to find the corresponding text node.\n\t *\n\t * For all text nodes rendered by a {@link module:engine/view/uielement~UIElement} or\n\t * a {@link module:engine/view/rawelement~RawElement}, the parent `UIElement` or `RawElement` will be returned.\n\t *\n\t * Otherwise `null` is returned.\n\t *\n\t * Note that for the block or inline {@link module:engine/view/filler filler} this method returns `null`.\n\t *\n\t * @param {Text} domText DOM text node.\n\t * @returns {module:engine/view/text~Text|null} Corresponding view text node or `null`, if it was not possible to find a\n\t * corresponding node.\n\t */\n\tfindCorrespondingViewText( domText ) {\n\t\tif ( isInlineFiller( domText ) ) {\n\t\t\treturn null;\n\t\t}\n\n\t\t// If DOM text was rendered by a UIElement or a RawElement - return this parent element.\n\t\tconst hostElement = this.getHostViewElement( domText );\n\n\t\tif ( hostElement ) {\n\t\t\treturn hostElement;\n\t\t}\n\n\t\tconst previousSibling = domText.previousSibling;\n\n\t\t// Try to use previous sibling to find the corresponding text node.\n\t\tif ( previousSibling ) {\n\t\t\tif ( !( this.isElement( previousSibling ) ) ) {\n\t\t\t\t// The previous is text or comment.\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tconst viewElement = this.mapDomToView( previousSibling );\n\n\t\t\tif ( viewElement ) {\n\t\t\t\tconst nextSibling = viewElement.nextSibling;\n\n\t\t\t\t// It might be filler which has no corresponding view node.\n\t\t\t\tif ( nextSibling instanceof ViewText ) {\n\t\t\t\t\treturn viewElement.nextSibling;\n\t\t\t\t} else {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// Try to use parent to find the corresponding text node.\n\t\telse {\n\t\t\tconst viewElement = this.mapDomToView( domText.parentNode );\n\n\t\t\tif ( viewElement ) {\n\t\t\t\tconst firstChild = viewElement.getChild( 0 );\n\n\t\t\t\t// It might be filler which has no corresponding view node.\n\t\t\t\tif ( firstChild instanceof ViewText ) {\n\t\t\t\t\treturn firstChild;\n\t\t\t\t} else {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Returns corresponding DOM item for provided {@link module:engine/view/element~Element Element} or\n\t * {@link module:engine/view/documentfragment~DocumentFragment DocumentFragment}.\n\t * To find a corresponding text for {@link module:engine/view/text~Text view Text instance}\n\t * use {@link #findCorrespondingDomText}.\n\t *\n\t * @param {module:engine/view/element~Element|module:engine/view/documentfragment~DocumentFragment} viewNode\n\t * View element or document fragment.\n\t * @returns {Node|DocumentFragment|undefined} Corresponding DOM node or document fragment.\n\t */\n\tmapViewToDom( documentFragmentOrElement ) {\n\t\treturn this._viewToDomMapping.get( documentFragmentOrElement );\n\t}\n\n\t/**\n\t * Finds corresponding text node. Text nodes are not {@link module:engine/view/domconverter~DomConverter#bindElements bound},\n\t * corresponding text node is returned based on the sibling or parent.\n\t *\n\t * If the directly previous sibling is a {@link module:engine/view/domconverter~DomConverter#bindElements bound} element, it is used\n\t * to find the corresponding text node.\n\t *\n\t * If this is a first child in the parent and the parent is a {@link module:engine/view/domconverter~DomConverter#bindElements bound}\n\t * element, it is used to find the corresponding text node.\n\t *\n\t * Otherwise `null` is returned.\n\t *\n\t * @param {module:engine/view/text~Text} viewText View text node.\n\t * @returns {Text|null} Corresponding DOM text node or `null`, if it was not possible to find a corresponding node.\n\t */\n\tfindCorrespondingDomText( viewText ) {\n\t\tconst previousSibling = viewText.previousSibling;\n\n\t\t// Try to use previous sibling to find the corresponding text node.\n\t\tif ( previousSibling && this.mapViewToDom( previousSibling ) ) {\n\t\t\treturn this.mapViewToDom( previousSibling ).nextSibling;\n\t\t}\n\n\t\t// If this is a first node, try to use parent to find the corresponding text node.\n\t\tif ( !previousSibling && viewText.parent && this.mapViewToDom( viewText.parent ) ) {\n\t\t\treturn this.mapViewToDom( viewText.parent ).childNodes[ 0 ];\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Focuses DOM editable that is corresponding to provided {@link module:engine/view/editableelement~EditableElement}.\n\t *\n\t * @param {module:engine/view/editableelement~EditableElement} viewEditable\n\t */\n\tfocus( viewEditable ) {\n\t\tconst domEditable = this.mapViewToDom( viewEditable );\n\n\t\tif ( domEditable && domEditable.ownerDocument.activeElement !== domEditable ) {\n\t\t\t// Save the scrollX and scrollY positions before the focus.\n\t\t\tconst { scrollX, scrollY } = global.window;\n\t\t\tconst scrollPositions = [];\n\n\t\t\t// Save all scrollLeft and scrollTop values starting from domEditable up to\n\t\t\t// document#documentElement.\n\t\t\tforEachDomNodeAncestor( domEditable, node => {\n\t\t\t\tconst { scrollLeft, scrollTop } = node;\n\n\t\t\t\tscrollPositions.push( [ scrollLeft, scrollTop ] );\n\t\t\t} );\n\n\t\t\tdomEditable.focus();\n\n\t\t\t// Restore scrollLeft and scrollTop values starting from domEditable up to\n\t\t\t// document#documentElement.\n\t\t\t// https://github.com/ckeditor/ckeditor5-engine/issues/951\n\t\t\t// https://github.com/ckeditor/ckeditor5-engine/issues/957\n\t\t\tforEachDomNodeAncestor( domEditable, node => {\n\t\t\t\tconst [ scrollLeft, scrollTop ] = scrollPositions.shift();\n\n\t\t\t\tnode.scrollLeft = scrollLeft;\n\t\t\t\tnode.scrollTop = scrollTop;\n\t\t\t} );\n\n\t\t\t// Restore the scrollX and scrollY positions after the focus.\n\t\t\t// https://github.com/ckeditor/ckeditor5-engine/issues/951\n\t\t\tglobal.window.scrollTo( scrollX, scrollY );\n\t\t}\n\t}\n\n\t/**\n\t * Returns `true` when `node.nodeType` equals `Node.ELEMENT_NODE`.\n\t *\n\t * @param {Node} node Node to check.\n\t * @returns {Boolean}\n\t */\n\tisElement( node ) {\n\t\treturn node && node.nodeType == Node.ELEMENT_NODE;\n\t}\n\n\t/**\n\t * Returns `true` when `node.nodeType` equals `Node.DOCUMENT_FRAGMENT_NODE`.\n\t *\n\t * @param {Node} node Node to check.\n\t * @returns {Boolean}\n\t */\n\tisDocumentFragment( node ) {\n\t\treturn node && node.nodeType == Node.DOCUMENT_FRAGMENT_NODE;\n\t}\n\n\t/**\n\t * Returns `true` when `node.nodeType` equals `Node.COMMENT_NODE`.\n\t *\n\t * @param {Node} node Node to check.\n\t * @returns {Boolean}\n\t */\n\tisComment( node ) {\n\t\treturn node && node.nodeType == Node.COMMENT_NODE;\n\t}\n\n\t/**\n\t * Checks if the node is an instance of the block filler for this DOM converter.\n\t *\n\t *\t\tconst converter = new DomConverter( viewDocument, { blockFillerMode: 'br' } );\n\t *\n\t *\t\tconverter.isBlockFiller( BR_FILLER( document ) ); // true\n\t *\t\tconverter.isBlockFiller( NBSP_FILLER( document ) ); // false\n\t *\n\t * **Note:**: For the `'nbsp'` mode the method also checks context of a node so it cannot be a detached node.\n\t *\n\t * **Note:** A special case in the `'nbsp'` mode exists where the `<br>` in `<p><br></p>` is treated as a block filler.\n\t *\n\t * @param {Node} domNode DOM node to check.\n\t * @returns {Boolean} True if a node is considered a block filler for given mode.\n\t */\n\tisBlockFiller( domNode ) {\n\t\tif ( this.blockFillerMode == 'br' ) {\n\t\t\treturn domNode.isEqualNode( BR_FILLER_REF );\n\t\t}\n\n\t\t// Special case for <p><br></p> in which case the <br> should be treated as filler even\n\t\t// when we're in the 'nbsp' mode. See ckeditor5#5564.\n\t\tif ( domNode.tagName === 'BR' && hasBlockParent( domNode, this.blockElements ) && domNode.parentNode.childNodes.length === 1 ) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn isNbspBlockFiller( domNode, this.blockElements );\n\t}\n\n\t/**\n\t * Returns `true` if given selection is a backward selection, that is, if it's `focus` is before `anchor`.\n\t *\n\t * @param {Selection} DOM Selection instance to check.\n\t * @returns {Boolean}\n\t */\n\tisDomSelectionBackward( selection ) {\n\t\tif ( selection.isCollapsed ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Since it takes multiple lines of code to check whether a \"DOM Position\" is before/after another \"DOM Position\",\n\t\t// we will use the fact that range will collapse if it's end is before it's start.\n\t\tconst range = document.createRange();\n\n\t\trange.setStart( selection.anchorNode, selection.anchorOffset );\n\t\trange.setEnd( selection.focusNode, selection.focusOffset );\n\n\t\tconst backward = range.collapsed;\n\n\t\trange.detach();\n\n\t\treturn backward;\n\t}\n\n\t/**\n\t * Returns a parent {@link module:engine/view/uielement~UIElement} or {@link module:engine/view/rawelement~RawElement}\n\t * that hosts the provided DOM node. Returns `null` if there is no such parent.\n\t *\n\t * @param {Node} domNode\n\t * @returns {module:engine/view/uielement~UIElement|module:engine/view/rawelement~RawElement|null}\n\t */\n\tgetHostViewElement( domNode ) {\n\t\tconst ancestors = getAncestors( domNode );\n\n\t\t// Remove domNode from the list.\n\t\tancestors.pop();\n\n\t\twhile ( ancestors.length ) {\n\t\t\tconst domNode = ancestors.pop();\n\t\t\tconst viewNode = this._domToViewMapping.get( domNode );\n\n\t\t\tif ( viewNode && ( viewNode.is( 'uiElement' ) || viewNode.is( 'rawElement' ) ) ) {\n\t\t\t\treturn viewNode;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Checks if the given selection's boundaries are at correct places.\n\t *\n\t * The following places are considered as incorrect for selection boundaries:\n\t *\n\t * * before or in the middle of an inline filler sequence,\n\t * * inside a DOM element which represents {@link module:engine/view/uielement~UIElement a view UI element},\n\t * * inside a DOM element which represents {@link module:engine/view/rawelement~RawElement a view raw element}.\n\t *\n\t * @param {Selection} domSelection The DOM selection object to be checked.\n\t * @returns {Boolean} `true` if the given selection is at a correct place, `false` otherwise.\n\t */\n\tisDomSelectionCorrect( domSelection ) {\n\t\treturn this._isDomSelectionPositionCorrect( domSelection.anchorNode, domSelection.anchorOffset ) &&\n\t\t\tthis._isDomSelectionPositionCorrect( domSelection.focusNode, domSelection.focusOffset );\n\t}\n\n\t/**\n\t * Registers a {@link module:engine/view/matcher~MatcherPattern} for view elements whose content should be treated as raw data\n\t * and not processed during the conversion from DOM nodes to view elements.\n\t *\n\t * This is affecting how {@link module:engine/view/domconverter~DomConverter#domToView} and\n\t * {@link module:engine/view/domconverter~DomConverter#domChildrenToView} process DOM nodes.\n\t *\n\t * The raw data can be later accessed by a\n\t * {@link module:engine/view/element~Element#getCustomProperty custom property of a view element} called `\"$rawContent\"`.\n\t *\n\t * @param {module:engine/view/matcher~MatcherPattern} pattern Pattern matching a view element whose content should\n\t * be treated as raw data.\n\t */\n\tregisterRawContentMatcher( pattern ) {\n\t\tthis._rawContentElementMatcher.add( pattern );\n\t}\n\n\t/**\n\t * Checks if the given DOM position is a correct place for selection boundary. See {@link #isDomSelectionCorrect}.\n\t *\n\t * @private\n\t * @param {Element} domParent Position parent.\n\t * @param {Number} offset Position offset.\n\t * @returns {Boolean} `true` if given position is at a correct place for selection boundary, `false` otherwise.\n\t */\n\t_isDomSelectionPositionCorrect( domParent, offset ) {\n\t\t// If selection is before or in the middle of inline filler string, it is incorrect.\n\t\tif ( isText( domParent ) && startsWithFiller( domParent ) && offset < INLINE_FILLER_LENGTH ) {\n\t\t\t// Selection in a text node, at wrong position (before or in the middle of filler).\n\t\t\treturn false;\n\t\t}\n\n\t\tif ( this.isElement( domParent ) && startsWithFiller( domParent.childNodes[ offset ] ) ) {\n\t\t\t// Selection in an element node, before filler text node.\n\t\t\treturn false;\n\t\t}\n\n\t\tconst viewParent = this.mapDomToView( domParent );\n\n\t\t// The position is incorrect when anchored inside a UIElement or a RawElement.\n\t\t// Note: In case of UIElement and RawElement, mapDomToView() returns a parent element for any DOM child\n\t\t// so there's no need to perform any additional checks.\n\t\tif ( viewParent && ( viewParent.is( 'uiElement' ) || viewParent.is( 'rawElement' ) ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Takes text data from a given {@link module:engine/view/text~Text#data} and processes it so\n\t * it is correctly displayed in the DOM.\n\t *\n\t * Following changes are done:\n\t *\n\t * * a space at the beginning is changed to `&nbsp;` if this is the first text node in its container\n\t * element or if a previous text node ends with a space character,\n\t * * space at the end of the text node is changed to `&nbsp;` if there are two spaces at the end of a node or if next node\n\t * starts with a space or if it is the last text node in its container,\n\t * * remaining spaces are replaced to a chain of spaces and `&nbsp;` (e.g. `'x   x'` becomes `'x &nbsp; x'`).\n\t *\n\t * Content of {@link #preElements} is not processed.\n\t *\n\t * @private\n\t * @param {module:engine/view/text~Text} node View text node to process.\n\t * @returns {String} Processed text data.\n\t */\n\t_processDataFromViewText( node ) {\n\t\tlet data = node.data;\n\n\t\t// If any of node ancestors has a name which is in `preElements` array, then currently processed\n\t\t// view text node is (will be) in preformatted element. We should not change whitespaces then.\n\t\tif ( node.getAncestors().some( parent => this.preElements.includes( parent.name ) ) ) {\n\t\t\treturn data;\n\t\t}\n\n\t\t// 1. Replace the first space with a nbsp if the previous node ends with a space or there is no previous node\n\t\t// (container element boundary).\n\t\tif ( data.charAt( 0 ) == ' ' ) {\n\t\t\tconst prevNode = this._getTouchingViewTextNode( node, false );\n\t\t\tconst prevEndsWithSpace = prevNode && this._nodeEndsWithSpace( prevNode );\n\n\t\t\tif ( prevEndsWithSpace || !prevNode ) {\n\t\t\t\tdata = '\\u00A0' + data.substr( 1 );\n\t\t\t}\n\t\t}\n\n\t\t// 2. Replace the last space with nbsp if there are two spaces at the end or if the next node starts with space or there is no\n\t\t// next node (container element boundary).\n\t\t//\n\t\t// Keep in mind that Firefox prefers $nbsp; before tag, not inside it:\n\t\t//\n\t\t// Foo <span>&nbsp;bar</span>  <-- bad.\n\t\t// Foo&nbsp;<span> bar</span>  <-- good.\n\t\t//\n\t\t// More here: https://github.com/ckeditor/ckeditor5-engine/issues/1747.\n\t\tif ( data.charAt( data.length - 1 ) == ' ' ) {\n\t\t\tconst nextNode = this._getTouchingViewTextNode( node, true );\n\n\t\t\tif ( data.charAt( data.length - 2 ) == ' ' || !nextNode || nextNode.data.charAt( 0 ) == ' ' ) {\n\t\t\t\tdata = data.substr( 0, data.length - 1 ) + '\\u00A0';\n\t\t\t}\n\t\t}\n\n\t\t// 3. Create space+nbsp pairs.\n\t\treturn data.replace( / {2}/g, ' \\u00A0' );\n\t}\n\n\t/**\n\t * Checks whether given node ends with a space character after changing appropriate space characters to `&nbsp;`s.\n\t *\n\t * @private\n\t * @param {module:engine/view/text~Text} node Node to check.\n\t * @returns {Boolean} `true` if given `node` ends with space, `false` otherwise.\n\t */\n\t_nodeEndsWithSpace( node ) {\n\t\tif ( node.getAncestors().some( parent => this.preElements.includes( parent.name ) ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst data = this._processDataFromViewText( node );\n\n\t\treturn data.charAt( data.length - 1 ) == ' ';\n\t}\n\n\t/**\n\t * Takes text data from native `Text` node and processes it to a correct {@link module:engine/view/text~Text view text node} data.\n\t *\n\t * Following changes are done:\n\t *\n\t * * multiple whitespaces are replaced to a single space,\n\t * * space at the beginning of a text node is removed if it is the first text node in its container\n\t * element or if the previous text node ends with a space character,\n\t * * space at the end of the text node is removed if there are two spaces at the end of a node or if next node\n\t * starts with a space or if it is the last text node in its container\n\t * * nbsps are converted to spaces.\n\t *\n\t * @param {Node} node DOM text node to process.\n\t * @returns {String} Processed data.\n\t * @private\n\t */\n\t_processDataFromDomText( node ) {\n\t\tlet data = node.data;\n\n\t\tif ( _hasDomParentOfType( node, this.preElements ) ) {\n\t\t\treturn getDataWithoutFiller( node );\n\t\t}\n\n\t\t// Change all consecutive whitespace characters (from the [ \\n\\t\\r] set –\n\t\t// see https://github.com/ckeditor/ckeditor5-engine/issues/822#issuecomment-311670249) to a single space character.\n\t\t// That's how multiple whitespaces are treated when rendered, so we normalize those whitespaces.\n\t\t// We're replacing 1+ (and not 2+) to also normalize singular \\n\\t\\r characters (#822).\n\t\tdata = data.replace( /[ \\n\\t\\r]{1,}/g, ' ' );\n\n\t\tconst prevNode = this._getTouchingInlineDomNode( node, false );\n\t\tconst nextNode = this._getTouchingInlineDomNode( node, true );\n\n\t\tconst shouldLeftTrim = this._checkShouldLeftTrimDomText( node, prevNode );\n\t\tconst shouldRightTrim = this._checkShouldRightTrimDomText( node, nextNode );\n\n\t\t// If the previous dom text node does not exist or it ends by whitespace character, remove space character from the beginning\n\t\t// of this text node. Such space character is treated as a whitespace.\n\t\tif ( shouldLeftTrim ) {\n\t\t\tdata = data.replace( /^ /, '' );\n\t\t}\n\n\t\t// If the next text node does not exist remove space character from the end of this text node.\n\t\tif ( shouldRightTrim ) {\n\t\t\tdata = data.replace( / $/, '' );\n\t\t}\n\n\t\t// At the beginning and end of a block element, Firefox inserts normal space + <br> instead of non-breaking space.\n\t\t// This means that the text node starts/end with normal space instead of non-breaking space.\n\t\t// This causes a problem because the normal space would be removed in `.replace` calls above. To prevent that,\n\t\t// the inline filler is removed only after the data is initially processed (by the `.replace` above). See ckeditor5#692.\n\t\tdata = getDataWithoutFiller( new Text( data ) );\n\n\t\t// At this point we should have removed all whitespaces from DOM text data.\n\t\t//\n\t\t// Now, We will reverse the process that happens in `_processDataFromViewText`.\n\t\t//\n\t\t// We have to change &nbsp; chars, that were in DOM text data because of rendering reasons, to spaces.\n\t\t// First, change all ` \\u00A0` pairs (space + &nbsp;) to two spaces. DOM converter changes two spaces from model/view to\n\t\t// ` \\u00A0` to ensure proper rendering. Since here we convert back, we recognize those pairs and change them back to `  `.\n\t\tdata = data.replace( / \\u00A0/g, '  ' );\n\n\t\t// Then, let's change the last nbsp to a space.\n\t\tif ( /( |\\u00A0)\\u00A0$/.test( data ) || !nextNode || ( nextNode.data && nextNode.data.charAt( 0 ) == ' ' ) ) {\n\t\t\tdata = data.replace( /\\u00A0$/, ' ' );\n\t\t}\n\n\t\t// Then, change &nbsp; character that is at the beginning of the text node to space character.\n\t\t// We do that replacement only if this is the first node or the previous node ends on whitespace character.\n\t\tif ( shouldLeftTrim ) {\n\t\t\tdata = data.replace( /^\\u00A0/, ' ' );\n\t\t}\n\n\t\t// At this point, all whitespaces should be removed and all &nbsp; created for rendering reasons should be\n\t\t// changed to normal space. All left &nbsp; are &nbsp; inserted intentionally.\n\t\treturn data;\n\t}\n\n\t/**\n\t * Helper function which checks if a DOM text node, preceded by the given `prevNode` should\n\t * be trimmed from the left side.\n\t *\n\t * @private\n\t * @param {Node} node\n\t * @param {Node} prevNode\n\t */\n\t_checkShouldLeftTrimDomText( node, prevNode ) {\n\t\tif ( !prevNode ) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif ( isElement( prevNode ) ) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Shouldn't left trim if previous node is a node that was encountered as a raw content node.\n\t\tif ( this._encounteredRawContentDomNodes.has( node.previousSibling ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn /[^\\S\\u00A0]/.test( prevNode.data.charAt( prevNode.data.length - 1 ) );\n\t}\n\n\t/**\n\t * Helper function which checks if a DOM text node, succeeded by the given `nextNode` should\n\t * be trimmed from the right side.\n\t *\n\t * @private\n\t * @param {Node} node\n\t * @param {Node} nextNode\n\t */\n\t_checkShouldRightTrimDomText( node, nextNode ) {\n\t\tif ( nextNode ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn !startsWithFiller( node );\n\t}\n\n\t/**\n\t * Helper function. For given {@link module:engine/view/text~Text view text node}, it finds previous or next sibling\n\t * that is contained in the same container element. If there is no such sibling, `null` is returned.\n\t *\n\t * @private\n\t * @param {module:engine/view/text~Text} node Reference node.\n\t * @param {Boolean} getNext\n\t * @returns {module:engine/view/text~Text|null} Touching text node or `null` if there is no next or previous touching text node.\n\t */\n\t_getTouchingViewTextNode( node, getNext ) {\n\t\tconst treeWalker = new ViewTreeWalker( {\n\t\t\tstartPosition: getNext ? ViewPosition._createAfter( node ) : ViewPosition._createBefore( node ),\n\t\t\tdirection: getNext ? 'forward' : 'backward'\n\t\t} );\n\n\t\tfor ( const value of treeWalker ) {\n\t\t\t// ViewContainerElement is found on a way to next ViewText node, so given `node` was first/last\n\t\t\t// text node in its container element.\n\t\t\tif ( value.item.is( 'containerElement' ) ) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\t// <br> found – it works like a block boundary, so do not scan further.\n\t\t\telse if ( value.item.is( 'element', 'br' ) ) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\t// Found a text node in the same container element.\n\t\t\telse if ( value.item.is( '$textProxy' ) ) {\n\t\t\t\treturn value.item;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Helper function. For the given text node, it finds the closest touching node which is either\n\t * a text node or a `<br>`. The search is terminated at block element boundaries and if a matching node\n\t * wasn't found so far, `null` is returned.\n\t *\n\t * In the following DOM structure:\n\t *\n\t *\t\t<p>foo<b>bar</b><br>bom</p>\n\t *\n\t * * `foo` doesn't have its previous touching inline node (`null` is returned),\n\t * * `foo`'s next touching inline node is `bar`\n\t * * `bar`'s next touching inline node is `<br>`\n\t *\n\t * This method returns text nodes and `<br>` elements because these types of nodes affect how\n\t * spaces in the given text node need to be converted.\n\t *\n\t * @private\n\t * @param {Text} node\n\t * @param {Boolean} getNext\n\t * @returns {Text|Element|null}\n\t */\n\t_getTouchingInlineDomNode( node, getNext ) {\n\t\tif ( !node.parentNode ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst direction = getNext ? 'nextNode' : 'previousNode';\n\t\tconst document = node.ownerDocument;\n\t\tconst topmostParent = getAncestors( node )[ 0 ];\n\n\t\tconst treeWalker = document.createTreeWalker( topmostParent, NodeFilter.SHOW_TEXT | NodeFilter.SHOW_ELEMENT, {\n\t\t\tacceptNode( node ) {\n\t\t\t\tif ( isText( node ) ) {\n\t\t\t\t\treturn NodeFilter.FILTER_ACCEPT;\n\t\t\t\t}\n\n\t\t\t\tif ( node.tagName == 'BR' ) {\n\t\t\t\t\treturn NodeFilter.FILTER_ACCEPT;\n\t\t\t\t}\n\n\t\t\t\treturn NodeFilter.FILTER_SKIP;\n\t\t\t}\n\t\t} );\n\n\t\ttreeWalker.currentNode = node;\n\n\t\tconst touchingNode = treeWalker[ direction ]();\n\n\t\tif ( touchingNode !== null ) {\n\t\t\tconst lca = getCommonAncestor( node, touchingNode );\n\n\t\t\t// If there is common ancestor between the text node and next/prev text node,\n\t\t\t// and there are no block elements on a way from the text node to that ancestor,\n\t\t\t// and there are no block elements on a way from next/prev text node to that ancestor...\n\t\t\tif (\n\t\t\t\tlca &&\n\t\t\t\t!_hasDomParentOfType( node, this.blockElements, lca ) &&\n\t\t\t\t!_hasDomParentOfType( touchingNode, this.blockElements, lca )\n\t\t\t) {\n\t\t\t\t// Then they are in the same container element.\n\t\t\t\treturn touchingNode;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n}\n\n// Helper function.\n// Used to check if given native `Element` or `Text` node has parent with tag name from `types` array.\n//\n// @param {Node} node\n// @param {Array.<String>} types\n// @param {Boolean} [boundaryParent] Can be given if parents should be checked up to a given element (excluding that element).\n// @returns {Boolean} `true` if such parent exists or `false` if it does not.\nfunction _hasDomParentOfType( node, types, boundaryParent ) {\n\tlet parents = getAncestors( node );\n\n\tif ( boundaryParent ) {\n\t\tparents = parents.slice( parents.indexOf( boundaryParent ) + 1 );\n\t}\n\n\treturn parents.some( parent => parent.tagName && types.includes( parent.tagName.toLowerCase() ) );\n}\n\n// A helper that executes given callback for each DOM node's ancestor, starting from the given node\n// and ending in document#documentElement.\n//\n// @param {Node} node\n// @param {Function} callback A callback to be executed for each ancestor.\nfunction forEachDomNodeAncestor( node, callback ) {\n\twhile ( node && node != global.document ) {\n\t\tcallback( node );\n\t\tnode = node.parentNode;\n\t}\n}\n\n// Checks if given node is a nbsp block filler.\n//\n// A &nbsp; is a block filler only if it is a single child of a block element.\n//\n// @param {Node} domNode DOM node.\n// @returns {Boolean}\nfunction isNbspBlockFiller( domNode, blockElements ) {\n\tconst isNBSP = isText( domNode ) && domNode.data == '\\u00A0';\n\n\treturn isNBSP && hasBlockParent( domNode, blockElements ) && domNode.parentNode.childNodes.length === 1;\n}\n\n// Checks if domNode has block parent.\n//\n// @param {Node} domNode DOM node.\n// @returns {Boolean}\nfunction hasBlockParent( domNode, blockElements ) {\n\tconst parent = domNode.parentNode;\n\n\treturn parent && parent.tagName && blockElements.includes( parent.tagName.toLowerCase() );\n}\n\n/**\n * Enum representing type of the block filler.\n *\n * Possible values:\n *\n * * `br` - for `<br>` block filler used in editing view,\n * * `nbsp` - for `&nbsp;` block fillers used in the data.\n *\n * @typedef {String} module:engine/view/filler~BlockFillerMode\n */\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/dom/getcommonancestor\n */\n\nimport getAncestors from './getancestors';\n\n/**\n * Searches and returns the lowest common ancestor of two given nodes.\n *\n * @param {Node} nodeA First node.\n * @param {Node} nodeB Second node.\n * @returns {Node|DocumentFragment|Document|null} Lowest common ancestor of both nodes or `null` if nodes do not have a common ancestor.\n */\nexport default function getCommonAncestor( nodeA, nodeB ) {\n\tconst ancestorsA = getAncestors( nodeA );\n\tconst ancestorsB = getAncestors( nodeB );\n\n\tlet i = 0;\n\n\t// It does not matter which array is shorter.\n\twhile ( ancestorsA[ i ] == ancestorsB[ i ] && ancestorsA[ i ] ) {\n\t\ti++;\n\t}\n\n\treturn i === 0 ? null : ancestorsA[ i - 1 ];\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/dom/iswindow\n */\n\n/**\n * Checks if the object is a native DOM Window.\n *\n * @param {*} obj\n * @returns {Boolean}\n */\nexport default function isWindow( obj ) {\n\tconst stringifiedObject = Object.prototype.toString.apply( obj );\n\n\t// Returns `true` for the `window` object in browser environments.\n\tif ( stringifiedObject == '[object Window]' ) {\n\t\treturn true;\n\t}\n\n\t// Returns `true` for the `window` object in the Electron environment.\n\tif ( stringifiedObject == '[object global]' ) {\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/dom/emittermixin\n */\n\nimport { default as EmitterMixin, _getEmitterListenedTo, _setEmitterId } from '../emittermixin';\nimport uid from '../uid';\nimport isNode from './isnode';\nimport isWindow from './iswindow';\nimport { extend } from 'lodash-es';\n\n/**\n * Mixin that injects the DOM events API into its host. It provides the API\n * compatible with {@link module:utils/emittermixin~EmitterMixin}.\n *\n * DOM emitter mixin is by default available in the {@link module:ui/view~View} class,\n * but it can also be mixed into any other class:\n *\n *\t\timport mix from '../utils/mix.js';\n *\t\timport DomEmitterMixin from '../utils/dom/emittermixin.js';\n *\n *\t\tclass SomeView {}\n *\t\tmix( SomeView, DomEmitterMixin );\n *\n *\t\tconst view = new SomeView();\n *\t\tview.listenTo( domElement, ( evt, domEvt ) => {\n *\t\t\tconsole.log( evt, domEvt );\n *\t\t} );\n *\n * @mixin EmitterMixin\n * @mixes module:utils/emittermixin~EmitterMixin\n * @implements module:utils/dom/emittermixin~Emitter\n */\nconst DomEmitterMixin = extend( {}, EmitterMixin, {\n\t/**\n\t * Registers a callback function to be executed when an event is fired in a specific Emitter or DOM Node.\n\t * It is backwards compatible with {@link module:utils/emittermixin~EmitterMixin#listenTo}.\n\t *\n\t * @param {module:utils/emittermixin~Emitter|Node} emitter The object that fires the event.\n\t * @param {String} event The name of the event.\n\t * @param {Function} callback The function to be called on event.\n\t * @param {Object} [options={}] Additional options.\n\t * @param {module:utils/priorities~PriorityString|Number} [options.priority='normal'] The priority of this event callback. The higher\n\t * the priority value the sooner the callback will be fired. Events having the same priority are called in the\n\t * order they were added.\n\t * @param {Boolean} [options.useCapture=false] Indicates that events of this type will be dispatched to the registered\n\t * listener before being dispatched to any EventTarget beneath it in the DOM tree.\n\t * @param {Boolean} [options.usePassive=false] Indicates that the function specified by listener will never call preventDefault()\n\t * and prevents blocking browser's main thread by this event handler.\n\t */\n\tlistenTo( emitter, ...rest ) {\n\t\t// Check if emitter is an instance of DOM Node. If so, replace the argument with\n\t\t// corresponding ProxyEmitter (or create one if not existing).\n\t\tif ( isNode( emitter ) || isWindow( emitter ) ) {\n\t\t\tconst proxy = this._getProxyEmitter( emitter ) || new ProxyEmitter( emitter );\n\n\t\t\tproxy.attach( ...rest );\n\n\t\t\temitter = proxy;\n\t\t}\n\n\t\t// Execute parent class method with Emitter (or ProxyEmitter) instance.\n\t\tEmitterMixin.listenTo.call( this, emitter, ...rest );\n\t},\n\n\t/**\n\t * Stops listening for events. It can be used at different levels:\n\t * It is backwards compatible with {@link module:utils/emittermixin~EmitterMixin#listenTo}.\n\t *\n\t * * To stop listening to a specific callback.\n\t * * To stop listening to a specific event.\n\t * * To stop listening to all events fired by a specific object.\n\t * * To stop listening to all events fired by all object.\n\t *\n\t * @param {module:utils/emittermixin~Emitter|Node} [emitter] The object to stop listening to. If omitted, stops it for all objects.\n\t * @param {String} [event] (Requires the `emitter`) The name of the event to stop listening to. If omitted, stops it\n\t * for all events from `emitter`.\n\t * @param {Function} [callback] (Requires the `event`) The function to be removed from the call list for the given\n\t * `event`.\n\t */\n\tstopListening( emitter, event, callback ) {\n\t\t// Check if emitter is an instance of DOM Node. If so, replace the argument with corresponding ProxyEmitter.\n\t\tif ( isNode( emitter ) || isWindow( emitter ) ) {\n\t\t\tconst proxy = this._getProxyEmitter( emitter );\n\n\t\t\t// Element has no listeners.\n\t\t\tif ( !proxy ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\temitter = proxy;\n\t\t}\n\n\t\t// Execute parent class method with Emitter (or ProxyEmitter) instance.\n\t\tEmitterMixin.stopListening.call( this, emitter, event, callback );\n\n\t\tif ( emitter instanceof ProxyEmitter ) {\n\t\t\temitter.detach( event );\n\t\t}\n\t},\n\n\t/**\n\t * Retrieves ProxyEmitter instance for given DOM Node residing in this Host.\n\t *\n\t * @private\n\t * @param {Node} node DOM Node of the ProxyEmitter.\n\t * @returns {module:utils/dom/emittermixin~ProxyEmitter} ProxyEmitter instance or null.\n\t */\n\t_getProxyEmitter( node ) {\n\t\treturn _getEmitterListenedTo( this, getNodeUID( node ) );\n\t}\n} );\n\nexport default DomEmitterMixin;\n\n/**\n * Creates a ProxyEmitter instance. Such an instance is a bridge between a DOM Node firing events\n * and any Host listening to them. It is backwards compatible with {@link module:utils/emittermixin~EmitterMixin#on}.\n *\n *                                  listenTo( click, ... )\n *                    +-----------------------------------------+\n *                    |              stopListening( ... )       |\n *     +----------------------------+                           |             addEventListener( click, ... )\n *     | Host                       |                           |   +---------------------------------------------+\n *     +----------------------------+                           |   |       removeEventListener( click, ... )     |\n *     | _listeningTo: {            |                +----------v-------------+                                   |\n *     |   UID: {                   |                | ProxyEmitter           |                                   |\n *     |     emitter: ProxyEmitter, |                +------------------------+                      +------------v----------+\n *     |     callbacks: {           |                | events: {              |                      | Node (HTMLElement)    |\n *     |       click: [ callbacks ] |                |   click: [ callbacks ] |                      +-----------------------+\n *     |     }                      |                | },                     |                      | data-ck-expando: UID  |\n *     |   }                        |                | _domNode: Node,        |                      +-----------------------+\n *     | }                          |                | _domListeners: {},     |                                   |\n *     | +------------------------+ |                | _emitterId: UID        |                                   |\n *     | | DomEmitterMixin        | |                +--------------^---------+                                   |\n *     | +------------------------+ |                           |   |                                             |\n *     +--------------^-------------+                           |   +---------------------------------------------+\n *                    |                                         |                  click (DOM Event)\n *                    +-----------------------------------------+\n *                                fire( click, DOM Event )\n *\n * @mixes module:utils/emittermixin~EmitterMixin\n * @implements module:utils/dom/emittermixin~Emitter\n * @private\n */\nclass ProxyEmitter {\n\t/**\n\t * @param {Node} node DOM Node that fires events.\n\t * @returns {Object} ProxyEmitter instance bound to the DOM Node.\n\t */\n\tconstructor( node ) {\n\t\t// Set emitter ID to match DOM Node \"expando\" property.\n\t\t_setEmitterId( this, getNodeUID( node ) );\n\n\t\t// Remember the DOM Node this ProxyEmitter is bound to.\n\t\tthis._domNode = node;\n\t}\n}\n\nextend( ProxyEmitter.prototype, EmitterMixin, {\n\t/**\n\t * Collection of native DOM listeners.\n\t *\n\t * @private\n\t * @member {Object} module:utils/dom/emittermixin~ProxyEmitter#_domListeners\n\t */\n\n\t/**\n\t * Registers a callback function to be executed when an event is fired.\n\t *\n\t * It attaches a native DOM listener to the DOM Node. When fired,\n\t * a corresponding Emitter event will also fire with DOM Event object as an argument.\n\t *\n\t * @method module:utils/dom/emittermixin~ProxyEmitter#attach\n\t * @param {String} event The name of the event.\n\t * @param {Function} callback The function to be called on event.\n\t * @param {Object} [options={}] Additional options.\n\t * @param {Boolean} [options.useCapture=false] Indicates that events of this type will be dispatched to the registered\n\t * listener before being dispatched to any EventTarget beneath it in the DOM tree.\n\t * @param {Boolean} [options.usePassive=false] Indicates that the function specified by listener will never call preventDefault()\n\t * and prevents blocking browser's main thread by this event handler.\n\t */\n\tattach( event, callback, options = {} ) {\n\t\t// If the DOM Listener for given event already exist it is pointless\n\t\t// to attach another one.\n\t\tif ( this._domListeners && this._domListeners[ event ] ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst listenerOptions = {\n\t\t\tcapture: !!options.useCapture,\n\t\t\tpassive: !!options.usePassive\n\t\t};\n\n\t\tconst domListener = this._createDomListener( event, listenerOptions );\n\n\t\t// Attach the native DOM listener to DOM Node.\n\t\tthis._domNode.addEventListener( event, domListener, listenerOptions );\n\n\t\tif ( !this._domListeners ) {\n\t\t\tthis._domListeners = {};\n\t\t}\n\n\t\t// Store the native DOM listener in this ProxyEmitter. It will be helpful\n\t\t// when stopping listening to the event.\n\t\tthis._domListeners[ event ] = domListener;\n\t},\n\n\t/**\n\t * Stops executing the callback on the given event.\n\t *\n\t * @method module:utils/dom/emittermixin~ProxyEmitter#detach\n\t * @param {String} event The name of the event.\n\t */\n\tdetach( event ) {\n\t\tlet events;\n\n\t\t// Remove native DOM listeners which are orphans. If no callbacks\n\t\t// are awaiting given event, detach native DOM listener from DOM Node.\n\t\t// See: {@link attach}.\n\n\t\tif ( this._domListeners[ event ] && ( !( events = this._events[ event ] ) || !events.callbacks.length ) ) {\n\t\t\tthis._domListeners[ event ].removeListener();\n\t\t}\n\t},\n\n\t/**\n\t * Creates a native DOM listener callback. When the native DOM event\n\t * is fired it will fire corresponding event on this ProxyEmitter.\n\t * Note: A native DOM Event is passed as an argument.\n\t *\n\t * @private\n\t * @method module:utils/dom/emittermixin~ProxyEmitter#_createDomListener\n\t * @param {String} event The name of the event.\n\t * @param {Object} [options] Additional options.\n\t * @param {Boolean} [options.capture=false] Indicates whether the listener was created for capturing event.\n\t * @param {Boolean} [options.passive=false] Indicates that the function specified by listener will never call preventDefault()\n\t * and prevents blocking browser's main thread by this event handler.\n\t * @returns {Function} The DOM listener callback.\n\t */\n\t_createDomListener( event, options ) {\n\t\tconst domListener = domEvt => {\n\t\t\tthis.fire( event, domEvt );\n\t\t};\n\n\t\t// Supply the DOM listener callback with a function that will help\n\t\t// detach it from the DOM Node, when it is no longer necessary.\n\t\t// See: {@link detach}.\n\t\tdomListener.removeListener = () => {\n\t\t\tthis._domNode.removeEventListener( event, domListener, options );\n\t\t\tdelete this._domListeners[ event ];\n\t\t};\n\n\t\treturn domListener;\n\t}\n} );\n\n// Gets an unique DOM Node identifier. The identifier will be set if not defined.\n//\n// @private\n// @param {Node} node\n// @returns {String} UID for given DOM Node.\nfunction getNodeUID( node ) {\n\treturn node[ 'data-ck-expando' ] || ( node[ 'data-ck-expando' ] = uid() );\n}\n\n/**\n * Interface representing classes which mix in {@link module:utils/dom/emittermixin~EmitterMixin}.\n *\n * @interface Emitter\n */\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/observer/observer\n */\n\nimport DomEmitterMixin from '@ckeditor/ckeditor5-utils/src/dom/emittermixin';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\n\n/**\n * Abstract base observer class. Observers are classes which listen to DOM events, do the preliminary\n * processing and fire events on the {@link module:engine/view/document~Document} objects.\n * Observers can also add features to the view, for instance by updating its status or marking elements\n * which need a refresh on DOM events.\n *\n * @abstract\n */\nexport default class Observer {\n\t/**\n\t * Creates an instance of the observer.\n\t *\n\t * @param {module:engine/view/view~View} view\n\t */\n\tconstructor( view ) {\n\t\t/**\n\t\t * An instance of the view controller.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/view~View}\n\t\t */\n\t\tthis.view = view;\n\n\t\t/**\n\t\t * A reference to the {@link module:engine/view/document~Document} object.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/document~Document}\n\t\t */\n\t\tthis.document = view.document;\n\n\t\t/**\n\t\t * The state of the observer. If it is disabled, no events will be fired.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Boolean}\n\t\t */\n\t\tthis.isEnabled = false;\n\t}\n\n\t/**\n\t * Enables the observer. This method is called when the observer is registered to the\n\t * {@link module:engine/view/view~View} and after {@link module:engine/view/view~View#forceRender rendering}\n\t * (all observers are {@link #disable disabled} before rendering).\n\t *\n\t * A typical use case for disabling observers is that mutation observers need to be disabled for the rendering.\n\t * However, a child class may not need to be disabled, so it can implement an empty method.\n\t *\n\t * @see module:engine/view/observer/observer~Observer#disable\n\t */\n\tenable() {\n\t\tthis.isEnabled = true;\n\t}\n\n\t/**\n\t * Disables the observer. This method is called before\n\t * {@link module:engine/view/view~View#forceRender rendering} to prevent firing events during rendering.\n\t *\n\t * @see module:engine/view/observer/observer~Observer#enable\n\t */\n\tdisable() {\n\t\tthis.isEnabled = false;\n\t}\n\n\t/**\n\t * Disables and destroys the observer, among others removes event listeners created by the observer.\n\t */\n\tdestroy() {\n\t\tthis.disable();\n\t\tthis.stopListening();\n\t}\n\n\t/**\n\t * Checks whether a given DOM event should be ignored (should not be turned into a synthetic view document event).\n\t *\n\t * Currently, an event will be ignored only if its target or any of its ancestors has the `data-cke-ignore-events` attribute.\n\t * This attribute can be used inside the structures generated by\n\t * {@link module:engine/view/downcastwriter~DowncastWriter#createUIElement `DowncastWriter#createUIElement()`} to ignore events\n\t * fired within a UI that should be excluded from CKEditor 5's realms.\n\t *\n\t * @param {Node} domTarget The DOM event target to check (usually an element, sometimes a text node and\n\t * potentially sometimes a document, too).\n\t * @returns {Boolean} Whether this event should be ignored by the observer.\n\t */\n\tcheckShouldIgnoreEventFromTarget( domTarget ) {\n\t\tif ( domTarget && domTarget.nodeType === 3 ) {\n\t\t\tdomTarget = domTarget.parentNode;\n\t\t}\n\n\t\tif ( !domTarget || domTarget.nodeType !== 1 ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn domTarget.matches( '[data-cke-ignore-events], [data-cke-ignore-events] *' );\n\t}\n\n\t/**\n\t * Starts observing the given root element.\n\t *\n\t * @method #observe\n\t * @param {HTMLElement} domElement\n\t * @param {String} name The name of the root element.\n\t */\n}\n\nmix( Observer, DomEmitterMixin );\n","/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\nexport default setCacheAdd;\n","/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\nexport default setCacheHas;\n","import MapCache from './_MapCache.js';\nimport setCacheAdd from './_setCacheAdd.js';\nimport setCacheHas from './_setCacheHas.js';\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\nexport default SetCache;\n","/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport default arraySome;\n","/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\nexport default cacheHas;\n","import SetCache from './_SetCache.js';\nimport arraySome from './_arraySome.js';\nimport cacheHas from './_cacheHas.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Check that cyclic values are equal.\n  var arrStacked = stack.get(array);\n  var othStacked = stack.get(other);\n  if (arrStacked && othStacked) {\n    return arrStacked == other && othStacked == array;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\nexport default equalArrays;\n","/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\nexport default mapToArray;\n","/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\nexport default setToArray;\n","import Symbol from './_Symbol.js';\nimport Uint8Array from './_Uint8Array.js';\nimport eq from './eq.js';\nimport equalArrays from './_equalArrays.js';\nimport mapToArray from './_mapToArray.js';\nimport setToArray from './_setToArray.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\nexport default equalByTag;\n","import getAllKeys from './_getAllKeys.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Check that cyclic values are equal.\n  var objStacked = stack.get(object);\n  var othStacked = stack.get(other);\n  if (objStacked && othStacked) {\n    return objStacked == other && othStacked == object;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\nexport default equalObjects;\n","import Stack from './_Stack.js';\nimport equalArrays from './_equalArrays.js';\nimport equalByTag from './_equalByTag.js';\nimport equalObjects from './_equalObjects.js';\nimport getTag from './_getTag.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isTypedArray from './isTypedArray.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\nexport default baseIsEqualDeep;\n","import baseIsEqualDeep from './_baseIsEqualDeep.js';\nimport isObjectLike from './isObjectLike.js';\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\nexport default baseIsEqual;\n","import baseIsEqual from './_baseIsEqual.js';\n\n/**\n * This method is like `_.isEqual` except that it accepts `customizer` which\n * is invoked to compare values. If `customizer` returns `undefined`, comparisons\n * are handled by the method instead. The `customizer` is invoked with up to\n * six arguments: (objValue, othValue [, index|key, object, other, stack]).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {Function} [customizer] The function to customize comparisons.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * function isGreeting(value) {\n *   return /^h(?:i|ello)$/.test(value);\n * }\n *\n * function customizer(objValue, othValue) {\n *   if (isGreeting(objValue) && isGreeting(othValue)) {\n *     return true;\n *   }\n * }\n *\n * var array = ['hello', 'goodbye'];\n * var other = ['hi', 'goodbye'];\n *\n * _.isEqualWith(array, other, customizer);\n * // => true\n */\nfunction isEqualWith(value, other, customizer) {\n  customizer = typeof customizer == 'function' ? customizer : undefined;\n  var result = customizer ? customizer(value, other) : undefined;\n  return result === undefined ? baseIsEqual(value, other, undefined, customizer) : !!result;\n}\n\nexport default isEqualWith;\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/observer/mutationobserver\n */\n\n/* globals window */\n\nimport Observer from './observer';\nimport ViewSelection from '../selection';\nimport { startsWithFiller, getDataWithoutFiller } from '../filler';\nimport { isEqualWith } from 'lodash-es';\n\n/**\n * Mutation observer class observes changes in the DOM, fires {@link module:engine/view/document~Document#event:mutations} event, mark view\n * elements as changed and call {@link module:engine/view/renderer~Renderer#render}.\n * Because all mutated nodes are marked as \"to be rendered\" and the\n * {@link module:engine/view/renderer~Renderer#render} is called, all changes will be reverted, unless the mutation will be handled by the\n * {@link module:engine/view/document~Document#event:mutations} event listener. It means user will see only handled changes, and the editor\n * will block all changes which are not handled.\n *\n * Mutation Observer also take care of reducing number of mutations which are fired. It removes duplicates and\n * mutations on elements which do not have corresponding view elements. Also\n * {@link module:engine/view/observer/mutationobserver~MutatedText text mutation} is fired only if parent element do not change child list.\n *\n * Note that this observer is attached by the {@link module:engine/view/view~View} and is available by default.\n *\n * @extends module:engine/view/observer/observer~Observer\n */\nexport default class MutationObserver extends Observer {\n\tconstructor( view ) {\n\t\tsuper( view );\n\n\t\t/**\n\t\t * Native mutation observer config.\n\t\t *\n\t\t * @private\n\t\t * @member {Object}\n\t\t */\n\t\tthis._config = {\n\t\t\tchildList: true,\n\t\t\tcharacterData: true,\n\t\t\tcharacterDataOldValue: true,\n\t\t\tsubtree: true\n\t\t};\n\n\t\t/**\n\t\t * Reference to the {@link module:engine/view/view~View#domConverter}.\n\t\t *\n\t\t * @member {module:engine/view/domconverter~DomConverter}\n\t\t */\n\t\tthis.domConverter = view.domConverter;\n\n\t\t/**\n\t\t * Reference to the {@link module:engine/view/view~View#_renderer}.\n\t\t *\n\t\t * @member {module:engine/view/renderer~Renderer}\n\t\t */\n\t\tthis.renderer = view._renderer;\n\n\t\t/**\n\t\t * Observed DOM elements.\n\t\t *\n\t\t * @private\n\t\t * @member {Array.<HTMLElement>}\n\t\t */\n\t\tthis._domElements = [];\n\n\t\t/**\n\t\t * Native mutation observer.\n\t\t *\n\t\t * @private\n\t\t * @member {MutationObserver}\n\t\t */\n\t\tthis._mutationObserver = new window.MutationObserver( this._onMutations.bind( this ) );\n\t}\n\n\t/**\n\t * Synchronously fires {@link module:engine/view/document~Document#event:mutations} event with all mutations in record queue.\n\t * At the same time empties the queue so mutations will not be fired twice.\n\t */\n\tflush() {\n\t\tthis._onMutations( this._mutationObserver.takeRecords() );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tobserve( domElement ) {\n\t\tthis._domElements.push( domElement );\n\n\t\tif ( this.isEnabled ) {\n\t\t\tthis._mutationObserver.observe( domElement, this._config );\n\t\t}\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tenable() {\n\t\tsuper.enable();\n\n\t\tfor ( const domElement of this._domElements ) {\n\t\t\tthis._mutationObserver.observe( domElement, this._config );\n\t\t}\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tdisable() {\n\t\tsuper.disable();\n\n\t\tthis._mutationObserver.disconnect();\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tdestroy() {\n\t\tsuper.destroy();\n\n\t\tthis._mutationObserver.disconnect();\n\t}\n\n\t/**\n\t * Handles mutations. Deduplicates, mark view elements to sync, fire event and call render.\n\t *\n\t * @private\n\t * @param {Array.<Object>} domMutations Array of native mutations.\n\t */\n\t_onMutations( domMutations ) {\n\t\t// As a result of this.flush() we can have an empty collection.\n\t\tif ( domMutations.length === 0 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst domConverter = this.domConverter;\n\n\t\t// Use map and set for deduplication.\n\t\tconst mutatedTexts = new Map();\n\t\tconst mutatedElements = new Set();\n\n\t\t// Handle `childList` mutations first, so we will be able to check if the `characterData` mutation is in the\n\t\t// element with changed structure anyway.\n\t\tfor ( const mutation of domMutations ) {\n\t\t\tif ( mutation.type === 'childList' ) {\n\t\t\t\tconst element = domConverter.mapDomToView( mutation.target );\n\n\t\t\t\t// Do not collect mutations from UIElements and RawElements.\n\t\t\t\tif ( element && ( element.is( 'uiElement' ) || element.is( 'rawElement' ) ) ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif ( element && !this._isBogusBrMutation( mutation ) ) {\n\t\t\t\t\tmutatedElements.add( element );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Handle `characterData` mutations later, when we have the full list of nodes which changed structure.\n\t\tfor ( const mutation of domMutations ) {\n\t\t\tconst element = domConverter.mapDomToView( mutation.target );\n\n\t\t\t// Do not collect mutations from UIElements and RawElements.\n\t\t\tif ( element && ( element.is( 'uiElement' ) || element.is( 'rawElement' ) ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif ( mutation.type === 'characterData' ) {\n\t\t\t\tconst text = domConverter.findCorrespondingViewText( mutation.target );\n\n\t\t\t\tif ( text && !mutatedElements.has( text.parent ) ) {\n\t\t\t\t\t// Use text as a key, for deduplication. If there will be another mutation on the same text element\n\t\t\t\t\t// we will have only one in the map.\n\t\t\t\t\tmutatedTexts.set( text, {\n\t\t\t\t\t\ttype: 'text',\n\t\t\t\t\t\toldText: text.data,\n\t\t\t\t\t\tnewText: getDataWithoutFiller( mutation.target ),\n\t\t\t\t\t\tnode: text\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t\t// When we added first letter to the text node which had only inline filler, for the DOM it is mutation\n\t\t\t\t// on text, but for the view, where filler text node did not existed, new text node was created, so we\n\t\t\t\t// need to fire 'children' mutation instead of 'text'.\n\t\t\t\telse if ( !text && startsWithFiller( mutation.target ) ) {\n\t\t\t\t\tmutatedElements.add( domConverter.mapDomToView( mutation.target.parentNode ) );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Now we build the list of mutations to fire and mark elements. We did not do it earlier to avoid marking the\n\t\t// same node multiple times in case of duplication.\n\n\t\t// List of mutations we will fire.\n\t\tconst viewMutations = [];\n\n\t\tfor ( const mutatedText of mutatedTexts.values() ) {\n\t\t\tthis.renderer.markToSync( 'text', mutatedText.node );\n\t\t\tviewMutations.push( mutatedText );\n\t\t}\n\n\t\tfor ( const viewElement of mutatedElements ) {\n\t\t\tconst domElement = domConverter.mapViewToDom( viewElement );\n\t\t\tconst viewChildren = Array.from( viewElement.getChildren() );\n\t\t\tconst newViewChildren = Array.from( domConverter.domChildrenToView( domElement, { withChildren: false } ) );\n\n\t\t\t// It may happen that as a result of many changes (sth was inserted and then removed),\n\t\t\t// both elements haven't really changed. #1031\n\t\t\tif ( !isEqualWith( viewChildren, newViewChildren, sameNodes ) ) {\n\t\t\t\tthis.renderer.markToSync( 'children', viewElement );\n\n\t\t\t\tviewMutations.push( {\n\t\t\t\t\ttype: 'children',\n\t\t\t\t\toldChildren: viewChildren,\n\t\t\t\t\tnewChildren: newViewChildren,\n\t\t\t\t\tnode: viewElement\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\n\t\t// Retrieve `domSelection` using `ownerDocument` of one of mutated nodes.\n\t\t// There should not be simultaneous mutation in multiple documents, so it's fine.\n\t\tconst domSelection = domMutations[ 0 ].target.ownerDocument.getSelection();\n\n\t\tlet viewSelection = null;\n\n\t\tif ( domSelection && domSelection.anchorNode ) {\n\t\t\t// If `domSelection` is inside a dom node that is already bound to a view node from view tree, get\n\t\t\t// corresponding selection in the view and pass it together with `viewMutations`. The `viewSelection` may\n\t\t\t// be used by features handling mutations.\n\t\t\t// Only one range is supported.\n\n\t\t\tconst viewSelectionAnchor = domConverter.domPositionToView( domSelection.anchorNode, domSelection.anchorOffset );\n\t\t\tconst viewSelectionFocus = domConverter.domPositionToView( domSelection.focusNode, domSelection.focusOffset );\n\n\t\t\t// Anchor and focus has to be properly mapped to view.\n\t\t\tif ( viewSelectionAnchor && viewSelectionFocus ) {\n\t\t\t\tviewSelection = new ViewSelection( viewSelectionAnchor );\n\t\t\t\tviewSelection.setFocus( viewSelectionFocus );\n\t\t\t}\n\t\t}\n\n\t\t// In case only non-relevant mutations were recorded it skips the event and force render (#5600).\n\t\tif ( viewMutations.length ) {\n\t\t\tthis.document.fire( 'mutations', viewMutations, viewSelection );\n\n\t\t\t// If nothing changes on `mutations` event, at this point we have \"dirty DOM\" (changed) and de-synched\n\t\t\t// view (which has not been changed). In order to \"reset DOM\" we render the view again.\n\t\t\tthis.view.forceRender();\n\t\t}\n\n\t\tfunction sameNodes( child1, child2 ) {\n\t\t\t// First level of comparison (array of children vs array of children) – use the Lodash's default behavior.\n\t\t\tif ( Array.isArray( child1 ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Elements.\n\t\t\tif ( child1 === child2 ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\t// Texts.\n\t\t\telse if ( child1.is( '$text' ) && child2.is( '$text' ) ) {\n\t\t\t\treturn child1.data === child2.data;\n\t\t\t}\n\n\t\t\t// Not matching types.\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t/**\n\t * Checks if mutation was generated by the browser inserting bogus br on the end of the block element.\n\t * Such mutations are generated while pressing space or performing native spellchecker correction\n\t * on the end of the block element in Firefox browser.\n\t *\n\t * @private\n\t * @param {Object} mutation Native mutation object.\n\t * @returns {Boolean}\n\t */\n\t_isBogusBrMutation( mutation ) {\n\t\tlet addedNode = null;\n\n\t\t// Check if mutation added only one node on the end of its parent.\n\t\tif ( mutation.nextSibling === null && mutation.removedNodes.length === 0 && mutation.addedNodes.length == 1 ) {\n\t\t\taddedNode = this.domConverter.domToView( mutation.addedNodes[ 0 ], {\n\t\t\t\twithChildren: false\n\t\t\t} );\n\t\t}\n\n\t\treturn addedNode && addedNode.is( 'element', 'br' );\n\t}\n}\n\n/**\n * Fired when mutation occurred. If tree view is not changed on this event, DOM will be reverted to the state before\n * mutation, so all changes which should be applied, should be handled on this event.\n *\n * Introduced by {@link module:engine/view/observer/mutationobserver~MutationObserver}.\n *\n * Note that because {@link module:engine/view/observer/mutationobserver~MutationObserver} is attached by the\n * {@link module:engine/view/view~View} this event is available by default.\n *\n * @see module:engine/view/observer/mutationobserver~MutationObserver\n * @event module:engine/view/document~Document#event:mutations\n * @param {Array.<module:engine/view/observer/mutationobserver~MutatedText|module:engine/view/observer/mutationobserver~MutatedChildren>}\n * viewMutations Array of mutations.\n * For mutated texts it will be {@link module:engine/view/observer/mutationobserver~MutatedText} and for mutated elements it will be\n * {@link module:engine/view/observer/mutationobserver~MutatedChildren}. You can recognize the type based on the `type` property.\n * @param {module:engine/view/selection~Selection|null} viewSelection View selection that is a result of converting DOM selection to view.\n * Keep in\n * mind that the DOM selection is already \"updated\", meaning that it already acknowledges changes done in mutation.\n */\n\n/**\n * Mutation item for text.\n *\n * @see module:engine/view/document~Document#event:mutations\n * @see module:engine/view/observer/mutationobserver~MutatedChildren\n *\n * @typedef {Object} module:engine/view/observer/mutationobserver~MutatedText\n *\n * @property {String} type For text mutations it is always 'text'.\n * @property {module:engine/view/text~Text} node Mutated text node.\n * @property {String} oldText Old text.\n * @property {String} newText New text.\n */\n\n/**\n * Mutation item for child nodes.\n *\n * @see module:engine/view/document~Document#event:mutations\n * @see module:engine/view/observer/mutationobserver~MutatedText\n *\n * @typedef {Object} module:engine/view/observer/mutationobserver~MutatedChildren\n *\n * @property {String} type For child nodes mutations it is always 'children'.\n * @property {module:engine/view/element~Element} node Parent of the mutated children.\n * @property {Array.<module:engine/view/node~Node>} oldChildren Old child nodes.\n * @property {Array.<module:engine/view/node~Node>} newChildren New child nodes.\n */\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/observer/domeventdata\n */\n\nimport { extend } from 'lodash-es';\n\n/**\n * Information about a DOM event in context of the {@link module:engine/view/document~Document}.\n * It wraps the native event, which usually should not be used as the wrapper contains\n * additional data (like key code for keyboard events).\n */\nexport default class DomEventData {\n\t/**\n\t * @param {module:engine/view/view~View} view The instance of the view controller.\n\t * @param {Event} domEvent The DOM event.\n\t * @param {Object} [additionalData] Additional properties that the instance should contain.\n\t */\n\tconstructor( view, domEvent, additionalData ) {\n\t\t/**\n\t\t * Instance of the view controller.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/view~View} module:engine/view/observer/observer~Observer.DomEvent#view\n\t\t */\n\t\tthis.view = view;\n\n\t\t/**\n\t\t * The instance of the document.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/document~Document} module:engine/view/observer/observer~Observer.DomEvent#document\n\t\t */\n\t\tthis.document = view.document;\n\n\t\t/**\n\t\t * The DOM event.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Event} module:engine/view/observer/observer~Observer.DomEvent#domEvent\n\t\t */\n\t\tthis.domEvent = domEvent;\n\n\t\t/**\n\t\t * The DOM target.\n\t\t *\n\t\t * @readonly\n\t\t * @member {HTMLElement} module:engine/view/observer/observer~Observer.DomEvent#target\n\t\t */\n\t\tthis.domTarget = domEvent.target;\n\n\t\textend( this, additionalData );\n\t}\n\n\t/**\n\t * The tree view element representing the target.\n\t *\n\t * @readonly\n\t * @type module:engine/view/element~Element\n\t */\n\tget target() {\n\t\treturn this.view.domConverter.mapDomToView( this.domTarget );\n\t}\n\n\t/**\n\t * Prevents the native's event default action.\n\t */\n\tpreventDefault() {\n\t\tthis.domEvent.preventDefault();\n\t}\n\n\t/**\n\t * Stops native event propagation.\n\t */\n\tstopPropagation() {\n\t\tthis.domEvent.stopPropagation();\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/observer/domeventobserver\n */\n\nimport Observer from './observer';\nimport DomEventData from './domeventdata';\n\n/**\n * Base class for DOM event observers. This class handles\n * {@link module:engine/view/observer/observer~Observer#observe adding} listeners to DOM elements,\n * {@link module:engine/view/observer/observer~Observer#disable disabling} and\n * {@link module:engine/view/observer/observer~Observer#enable re-enabling} events.\n * Child class needs to define\n * {@link module:engine/view/observer/domeventobserver~DomEventObserver#domEventType DOM event type} and\n * {@link module:engine/view/observer/domeventobserver~DomEventObserver#onDomEvent callback}.\n *\n * For instance:\n *\n *\t\tclass ClickObserver extends DomEventObserver {\n *\t\t\t// It can also be defined as a normal property in the constructor.\n *\t\t\tget domEventType() {\n *\t\t\t\treturn 'click';\n *\t\t\t}\n *\n *\t\t\tonDomEvent( domEvent ) {\n *\t\t\t\tthis.fire( 'click', domEvent );\n *\t\t\t}\n *\t\t}\n *\n * @extends module:engine/view/observer/observer~Observer\n */\nexport default class DomEventObserver extends Observer {\n\t/**\n\t * Type of the DOM event the observer should listen to. Array of types can be defined\n\t * if the observer should listen to multiple DOM events.\n\t *\n\t * @readonly\n\t * @member {String|Array.<String>} #domEventType\n\t */\n\n\t/**\n\t * Callback which should be called when the DOM event occurred. Note that the callback will not be called if\n\t * observer {@link #isEnabled is not enabled}.\n\t *\n\t * @see #domEventType\n\t * @abstract\n\t * @method #onDomEvent\n\t */\n\n\t/**\n\t * @inheritDoc\n\t */\n\tconstructor( view ) {\n\t\tsuper( view );\n\n\t\t/**\n\t\t * If set to `true` DOM events will be listened on the capturing phase.\n\t\t * Default value is `false`.\n\t\t *\n\t\t * @member {Boolean}\n\t\t */\n\t\tthis.useCapture = false;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tobserve( domElement ) {\n\t\tconst types = typeof this.domEventType == 'string' ? [ this.domEventType ] : this.domEventType;\n\n\t\ttypes.forEach( type => {\n\t\t\tthis.listenTo( domElement, type, ( eventInfo, domEvent ) => {\n\t\t\t\tif ( this.isEnabled && !this.checkShouldIgnoreEventFromTarget( domEvent.target ) ) {\n\t\t\t\t\tthis.onDomEvent( domEvent );\n\t\t\t\t}\n\t\t\t}, { useCapture: this.useCapture } );\n\t\t} );\n\t}\n\n\t/**\n\t * Calls `Document#fire()` if observer {@link #isEnabled is enabled}.\n\t *\n\t * @see module:utils/emittermixin~EmitterMixin#fire\n\t * @param {String} eventType The event type (name).\n\t * @param {Event} domEvent The DOM event.\n\t * @param {Object} [additionalData] The additional data which should extend the\n\t * {@link module:engine/view/observer/domeventdata~DomEventData event data} object.\n\t */\n\tfire( eventType, domEvent, additionalData ) {\n\t\tif ( this.isEnabled ) {\n\t\t\tthis.document.fire( eventType, new DomEventData( this.view, domEvent, additionalData ) );\n\t\t}\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/observer/keyobserver\n */\n\nimport DomEventObserver from './domeventobserver';\nimport { getCode } from '@ckeditor/ckeditor5-utils/src/keyboard';\n\n/**\n * Observer for events connected with pressing keyboard keys.\n *\n * Note that this observer is attached by the {@link module:engine/view/view~View} and is available by default.\n *\n * @extends module:engine/view/observer/domeventobserver~DomEventObserver\n */\nexport default class KeyObserver extends DomEventObserver {\n\tconstructor( view ) {\n\t\tsuper( view );\n\n\t\tthis.domEventType = [ 'keydown', 'keyup' ];\n\t}\n\n\tonDomEvent( domEvt ) {\n\t\tthis.fire( domEvt.type, domEvt, {\n\t\t\tkeyCode: domEvt.keyCode,\n\n\t\t\taltKey: domEvt.altKey,\n\t\t\tctrlKey: domEvt.ctrlKey || domEvt.metaKey,\n\t\t\tshiftKey: domEvt.shiftKey,\n\n\t\t\tget keystroke() {\n\t\t\t\treturn getCode( this );\n\t\t\t}\n\t\t} );\n\t}\n}\n\n/**\n * Fired when a key has been pressed.\n *\n * Introduced by {@link module:engine/view/observer/keyobserver~KeyObserver}.\n *\n * Note that because {@link module:engine/view/observer/keyobserver~KeyObserver} is attached by the\n * {@link module:engine/view/view~View} this event is available by default.\n *\n * @see module:engine/view/observer/keyobserver~KeyObserver\n * @event module:engine/view/document~Document#event:keydown\n * @param {module:engine/view/observer/keyobserver~KeyEventData} keyEventData\n */\n\n/**\n * Fired when a key has been released.\n *\n * Introduced by {@link module:engine/view/observer/keyobserver~KeyObserver}.\n *\n * Note that because {@link module:engine/view/observer/keyobserver~KeyObserver} is attached by the\n * {@link module:engine/view/view~View} this event is available by default.\n *\n * @see module:engine/view/observer/keyobserver~KeyObserver\n * @event module:engine/view/document~Document#event:keyup\n * @param {module:engine/view/observer/keyobserver~KeyEventData} keyEventData\n */\n\n/**\n * The value of both events - {@link module:engine/view/document~Document#event:keydown} and\n * {@link module:engine/view/document~Document#event:keyup}.\n *\n * @class module:engine/view/observer/keyobserver~KeyEventData\n * @extends module:engine/view/observer/domeventdata~DomEventData\n * @implements module:utils/keyboard~KeystrokeInfo\n */\n\n/**\n * Code of the whole keystroke. See {@link module:utils/keyboard~getCode}.\n *\n * @readonly\n * @member {Number} module:engine/view/observer/keyobserver~KeyEventData#keystroke\n */\n","import root from './_root.js';\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nexport default now;\n","/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n  return index;\n}\n\nexport default trimmedEndIndex;\n","import trimmedEndIndex from './_trimmedEndIndex.js';\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\nfunction baseTrim(string) {\n  return string\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n    : string;\n}\n\nexport default baseTrim;\n","import baseTrim from './_baseTrim.js';\nimport isObject from './isObject.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nexport default toNumber;\n","import isObject from './isObject.js';\nimport now from './now.js';\nimport toNumber from './toNumber.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nexport default debounce;\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/observer/fakeselectionobserver\n */\n\nimport Observer from './observer';\nimport ViewSelection from '../selection';\nimport { keyCodes, isArrowKeyCode } from '@ckeditor/ckeditor5-utils/src/keyboard';\nimport { debounce } from 'lodash-es';\n\n/**\n * Fake selection observer class. If view selection is fake it is placed in dummy DOM container. This observer listens\n * on {@link module:engine/view/document~Document#event:keydown keydown} events and handles moving fake view selection to the correct place\n * if arrow keys are pressed.\n * Fires {@link module:engine/view/document~Document#event:selectionChange selectionChange event} simulating natural behaviour of\n * {@link module:engine/view/observer/selectionobserver~SelectionObserver SelectionObserver}.\n *\n * @extends module:engine/view/observer/observer~Observer\n */\nexport default class FakeSelectionObserver extends Observer {\n\t/**\n\t * Creates new FakeSelectionObserver instance.\n\t *\n\t * @param {module:engine/view/view~View} view\n\t */\n\tconstructor( view ) {\n\t\tsuper( view );\n\n\t\t/**\n\t\t * Fires debounced event `selectionChangeDone`. It uses `lodash#debounce` method to delay function call.\n\t\t *\n\t\t * @private\n\t\t * @param {Object} data Selection change data.\n\t\t * @method #_fireSelectionChangeDoneDebounced\n\t\t */\n\t\tthis._fireSelectionChangeDoneDebounced = debounce( data => this.document.fire( 'selectionChangeDone', data ), 200 );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tobserve() {\n\t\tconst document = this.document;\n\n\t\tdocument.on( 'keydown', ( eventInfo, data ) => {\n\t\t\tconst selection = document.selection;\n\n\t\t\tif ( selection.isFake && isArrowKeyCode( data.keyCode ) && this.isEnabled ) {\n\t\t\t\t// Prevents default key down handling - no selection change will occur.\n\t\t\t\tdata.preventDefault();\n\n\t\t\t\tthis._handleSelectionMove( data.keyCode );\n\t\t\t}\n\t\t}, { priority: 'lowest' } );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tdestroy() {\n\t\tsuper.destroy();\n\n\t\tthis._fireSelectionChangeDoneDebounced.cancel();\n\t}\n\n\t/**\n\t * Handles collapsing view selection according to given key code. If left or up key is provided - new selection will be\n\t * collapsed to left. If right or down key is pressed - new selection will be collapsed to right.\n\t *\n\t * This method fires {@link module:engine/view/document~Document#event:selectionChange} and\n\t * {@link module:engine/view/document~Document#event:selectionChangeDone} events imitating behaviour of\n\t * {@link module:engine/view/observer/selectionobserver~SelectionObserver}.\n\t *\n\t * @private\n\t * @param {Number} keyCode\n\t * @fires module:engine/view/document~Document#event:selectionChange\n\t * @fires module:engine/view/document~Document#event:selectionChangeDone\n\t */\n\t_handleSelectionMove( keyCode ) {\n\t\tconst selection = this.document.selection;\n\t\tconst newSelection = new ViewSelection( selection.getRanges(), { backward: selection.isBackward, fake: false } );\n\n\t\t// Left or up arrow pressed - move selection to start.\n\t\tif ( keyCode == keyCodes.arrowleft || keyCode == keyCodes.arrowup ) {\n\t\t\tnewSelection.setTo( newSelection.getFirstPosition() );\n\t\t}\n\n\t\t// Right or down arrow pressed - move selection to end.\n\t\tif ( keyCode == keyCodes.arrowright || keyCode == keyCodes.arrowdown ) {\n\t\t\tnewSelection.setTo( newSelection.getLastPosition() );\n\t\t}\n\n\t\tconst data = {\n\t\t\toldSelection: selection,\n\t\t\tnewSelection,\n\t\t\tdomSelection: null\n\t\t};\n\n\t\t// Fire dummy selection change event.\n\t\tthis.document.fire( 'selectionChange', data );\n\n\t\t// Call` #_fireSelectionChangeDoneDebounced` every time when `selectionChange` event is fired.\n\t\t// This function is debounced what means that `selectionChangeDone` event will be fired only when\n\t\t// defined int the function time will elapse since the last time the function was called.\n\t\t// So `selectionChangeDone` will be fired when selection will stop changing.\n\t\tthis._fireSelectionChangeDoneDebounced( data );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/observer/selectionobserver\n */\n\n/* global setInterval, clearInterval */\n\nimport Observer from './observer';\nimport MutationObserver from './mutationobserver';\nimport { debounce } from 'lodash-es';\n\n/**\n * Selection observer class observes selection changes in the document. If a selection changes on the document this\n * observer checks if there are any mutations and if the DOM selection is different from the\n * {@link module:engine/view/document~Document#selection view selection}. The selection observer fires\n * {@link module:engine/view/document~Document#event:selectionChange} event only if a selection change was the only change in the document\n * and the DOM selection is different then the view selection.\n *\n * Note that this observer is attached by the {@link module:engine/view/view~View} and is available by default.\n *\n * @see module:engine/view/observer/mutationobserver~MutationObserver\n * @extends module:engine/view/observer/observer~Observer\n */\nexport default class SelectionObserver extends Observer {\n\tconstructor( view ) {\n\t\tsuper( view );\n\n\t\t/**\n\t\t * Instance of the mutation observer. Selection observer calls\n\t\t * {@link module:engine/view/observer/mutationobserver~MutationObserver#flush} to ensure that the mutations will be handled\n\t\t * before the {@link module:engine/view/document~Document#event:selectionChange} event is fired.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/observer/mutationobserver~MutationObserver}\n\t\t * module:engine/view/observer/selectionobserver~SelectionObserver#mutationObserver\n\t\t */\n\t\tthis.mutationObserver = view.getObserver( MutationObserver );\n\n\t\t/**\n\t\t * Reference to the view {@link module:engine/view/documentselection~DocumentSelection} object used to compare\n\t\t * new selection with it.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/documentselection~DocumentSelection}\n\t\t * module:engine/view/observer/selectionobserver~SelectionObserver#selection\n\t\t */\n\t\tthis.selection = this.document.selection;\n\n\t\t/* eslint-disable max-len */\n\t\t/**\n\t\t * Reference to the {@link module:engine/view/view~View#domConverter}.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/domconverter~DomConverter} module:engine/view/observer/selectionobserver~SelectionObserver#domConverter\n\t\t */\n\t\t/* eslint-enable max-len */\n\t\tthis.domConverter = view.domConverter;\n\n\t\t/**\n\t\t * A set of documents which have added `selectionchange` listener to avoid adding a listener twice to the same\n\t\t * document.\n\t\t *\n\t\t * @private\n\t\t * @member {WeakSet.<Document>} module:engine/view/observer/selectionobserver~SelectionObserver#_documents\n\t\t */\n\t\tthis._documents = new WeakSet();\n\n\t\t/**\n\t\t * Fires debounced event `selectionChangeDone`. It uses `lodash#debounce` method to delay function call.\n\t\t *\n\t\t * @private\n\t\t * @param {Object} data Selection change data.\n\t\t * @method #_fireSelectionChangeDoneDebounced\n\t\t */\n\t\tthis._fireSelectionChangeDoneDebounced = debounce( data => this.document.fire( 'selectionChangeDone', data ), 200 );\n\n\t\tthis._clearInfiniteLoopInterval = setInterval( () => this._clearInfiniteLoop(), 1000 );\n\n\t\t/**\n\t\t * Private property to check if the code does not enter infinite loop.\n\t\t *\n\t\t * @private\n\t\t * @member {Number} module:engine/view/observer/selectionobserver~SelectionObserver#_loopbackCounter\n\t\t */\n\t\tthis._loopbackCounter = 0;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tobserve( domElement ) {\n\t\tconst domDocument = domElement.ownerDocument;\n\n\t\t// Add listener once per each document.\n\t\tif ( this._documents.has( domDocument ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.listenTo( domDocument, 'selectionchange', ( evt, domEvent ) => {\n\t\t\tthis._handleSelectionChange( domEvent, domDocument );\n\t\t} );\n\n\t\tthis._documents.add( domDocument );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tdestroy() {\n\t\tsuper.destroy();\n\n\t\tclearInterval( this._clearInfiniteLoopInterval );\n\t\tthis._fireSelectionChangeDoneDebounced.cancel();\n\t}\n\n\t/**\n\t * Selection change listener. {@link module:engine/view/observer/mutationobserver~MutationObserver#flush Flush} mutations, check if\n\t * a selection changes and fires {@link module:engine/view/document~Document#event:selectionChange} event on every change\n\t * and {@link module:engine/view/document~Document#event:selectionChangeDone} when a selection stop changing.\n\t *\n\t * @private\n\t * @param {Event} domEvent DOM event.\n\t * @param {Document} domDocument DOM document.\n\t */\n\t_handleSelectionChange( domEvent, domDocument ) {\n\t\tif ( !this.isEnabled ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst domSelection = domDocument.defaultView.getSelection();\n\n\t\tif ( this.checkShouldIgnoreEventFromTarget( domSelection.anchorNode ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Ensure the mutation event will be before selection event on all browsers.\n\t\tthis.mutationObserver.flush();\n\n\t\t// If there were mutations then the view will be re-rendered by the mutation observer and the selection\n\t\t// will be updated, so the selections will equal and the event will not be fired, as expected.\n\t\tconst newViewSelection = this.domConverter.domSelectionToView( domSelection );\n\n\t\t// Do not convert selection change if the new view selection has no ranges in it.\n\t\t//\n\t\t// It means that the DOM selection is in some way incorrect. Ranges that were in the DOM selection could not be\n\t\t// converted to the view. This happens when the DOM selection was moved outside of the editable element.\n\t\tif ( newViewSelection.rangeCount == 0 ) {\n\t\t\tthis.view.hasDomSelection = false;\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.view.hasDomSelection = true;\n\n\t\tif ( this.selection.isEqual( newViewSelection ) && this.domConverter.isDomSelectionCorrect( domSelection ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Ensure we are not in the infinite loop (#400).\n\t\t// This counter is reset each second. 60 selection changes in 1 second is enough high number\n\t\t// to be very difficult (impossible) to achieve using just keyboard keys (during normal editor use).\n\t\tif ( ++this._loopbackCounter > 60 ) {\n\t\t\t// Selection change observer detected an infinite rendering loop.\n\t\t\t// Most probably you try to put the selection in the position which is not allowed\n\t\t\t// by the browser and browser fixes it automatically what causes `selectionchange` event on\n\t\t\t// which a loopback through a model tries to re-render the wrong selection and again.\n\t\t\t//\n\t\t\t// @if CK_DEBUG // console.warn( 'Selection change observer detected an infinite rendering loop.' );\n\n\t\t\treturn;\n\t\t}\n\n\t\tif ( this.selection.isSimilar( newViewSelection ) ) {\n\t\t\t// If selection was equal and we are at this point of algorithm, it means that it was incorrect.\n\t\t\t// Just re-render it, no need to fire any events, etc.\n\t\t\tthis.view.forceRender();\n\t\t} else {\n\t\t\tconst data = {\n\t\t\t\toldSelection: this.selection,\n\t\t\t\tnewSelection: newViewSelection,\n\t\t\t\tdomSelection\n\t\t\t};\n\n\t\t\t// Prepare data for new selection and fire appropriate events.\n\t\t\tthis.document.fire( 'selectionChange', data );\n\n\t\t\t// Call `#_fireSelectionChangeDoneDebounced` every time when `selectionChange` event is fired.\n\t\t\t// This function is debounced what means that `selectionChangeDone` event will be fired only when\n\t\t\t// defined int the function time will elapse since the last time the function was called.\n\t\t\t// So `selectionChangeDone` will be fired when selection will stop changing.\n\t\t\tthis._fireSelectionChangeDoneDebounced( data );\n\t\t}\n\t}\n\n\t/**\n\t * Clears `SelectionObserver` internal properties connected with preventing infinite loop.\n\t *\n\t * @protected\n\t */\n\t_clearInfiniteLoop() {\n\t\tthis._loopbackCounter = 0;\n\t}\n}\n\n/**\n * Fired when a selection has changed. This event is fired only when the selection change was the only change that happened\n * in the document, and the old selection is different then the new selection.\n *\n * Introduced by {@link module:engine/view/observer/selectionobserver~SelectionObserver}.\n *\n * Note that because {@link module:engine/view/observer/selectionobserver~SelectionObserver} is attached by the\n * {@link module:engine/view/view~View} this event is available by default.\n *\n * @see module:engine/view/observer/selectionobserver~SelectionObserver\n * @event module:engine/view/document~Document#event:selectionChange\n * @param {Object} data\n * @param {module:engine/view/documentselection~DocumentSelection} data.oldSelection Old View selection which is\n * {@link module:engine/view/document~Document#selection}.\n * @param {module:engine/view/selection~Selection} data.newSelection New View selection which is converted DOM selection.\n * @param {Selection} data.domSelection Native DOM selection.\n */\n\n/**\n * Fired when selection stops changing.\n *\n * Introduced by {@link module:engine/view/observer/selectionobserver~SelectionObserver}.\n *\n * Note that because {@link module:engine/view/observer/selectionobserver~SelectionObserver} is attached by the\n * {@link module:engine/view/view~View} this event is available by default.\n *\n * @see module:engine/view/observer/selectionobserver~SelectionObserver\n * @event module:engine/view/document~Document#event:selectionChangeDone\n * @param {Object} data\n * @param {module:engine/view/documentselection~DocumentSelection} data.oldSelection Old View selection which is\n * {@link module:engine/view/document~Document#selection}.\n * @param {module:engine/view/selection~Selection} data.newSelection New View selection which is converted DOM selection.\n * @param {Selection} data.domSelection Native DOM selection.\n */\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/observer/focusobserver\n */\n\n/* globals setTimeout, clearTimeout */\n\nimport DomEventObserver from './domeventobserver';\n\n/**\n * {@link module:engine/view/document~Document#event:focus Focus}\n * and {@link module:engine/view/document~Document#event:blur blur} events observer.\n * Focus observer handle also {@link module:engine/view/rooteditableelement~RootEditableElement#isFocused isFocused} property of the\n * {@link module:engine/view/rooteditableelement~RootEditableElement root elements}.\n *\n * Note that this observer is attached by the {@link module:engine/view/view~View} and is available by default.\n *\n * @extends module:engine/view/observer/domeventobserver~DomEventObserver\n */\nexport default class FocusObserver extends DomEventObserver {\n\tconstructor( view ) {\n\t\tsuper( view );\n\n\t\tthis.domEventType = [ 'focus', 'blur' ];\n\t\tthis.useCapture = true;\n\t\tconst document = this.document;\n\n\t\tdocument.on( 'focus', () => {\n\t\t\tdocument.isFocused = true;\n\n\t\t\t// Unfortunately native `selectionchange` event is fired asynchronously.\n\t\t\t// We need to wait until `SelectionObserver` handle the event and then render. Otherwise rendering will\n\t\t\t// overwrite new DOM selection with selection from the view.\n\t\t\t// See https://github.com/ckeditor/ckeditor5-engine/issues/795 for more details.\n\t\t\t// Long timeout is needed to solve #676 and https://github.com/ckeditor/ckeditor5-engine/issues/1157 issues.\n\t\t\tthis._renderTimeoutId = setTimeout( () => view.forceRender(), 50 );\n\t\t} );\n\n\t\tdocument.on( 'blur', ( evt, data ) => {\n\t\t\tconst selectedEditable = document.selection.editableElement;\n\n\t\t\tif ( selectedEditable === null || selectedEditable === data.target ) {\n\t\t\t\tdocument.isFocused = false;\n\n\t\t\t\t// Re-render the document to update view elements.\n\t\t\t\tview.forceRender();\n\t\t\t}\n\t\t} );\n\n\t\t/**\n\t\t * Identifier of the timeout currently used by focus listener to delay rendering execution.\n\t\t *\n\t\t * @private\n\t\t * @member {Number} #_renderTimeoutId\n\t\t */\n\t}\n\n\tonDomEvent( domEvent ) {\n\t\tthis.fire( domEvent.type, domEvent );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tdestroy() {\n\t\tif ( this._renderTimeoutId ) {\n\t\t\tclearTimeout( this._renderTimeoutId );\n\t\t}\n\n\t\tsuper.destroy();\n\t}\n}\n\n/**\n * Fired when one of the editables gets focus.\n *\n * Introduced by {@link module:engine/view/observer/focusobserver~FocusObserver}.\n *\n * Note that because {@link module:engine/view/observer/focusobserver~FocusObserver} is attached by the\n * {@link module:engine/view/view~View} this event is available by default.\n *\n * @see module:engine/view/observer/focusobserver~FocusObserver\n * @event module:engine/view/document~Document#event:focus\n * @param {module:engine/view/observer/domeventdata~DomEventData} data Event data.\n */\n\n/**\n * Fired when one of the editables loses focus.\n *\n * Introduced by {@link module:engine/view/observer/focusobserver~FocusObserver}.\n *\n * Note that because {@link module:engine/view/observer/focusobserver~FocusObserver} is attached by the\n * {@link module:engine/view/view~View} this event is available by default.\n *\n * @see module:engine/view/observer/focusobserver~FocusObserver\n * @event module:engine/view/document~Document#event:blur\n * @param {module:engine/view/observer/domeventdata~DomEventData} data Event data.\n */\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/observer/compositionobserver\n */\n\nimport DomEventObserver from './domeventobserver';\n\n/**\n * {@link module:engine/view/document~Document#event:compositionstart Compositionstart},\n * {@link module:engine/view/document~Document#event:compositionupdate compositionupdate} and\n * {@link module:engine/view/document~Document#event:compositionend compositionend} events observer.\n *\n * Note that this observer is attached by the {@link module:engine/view/view~View} and is available by default.\n *\n * @extends module:engine/view/observer/domeventobserver~DomEventObserver\n */\nexport default class CompositionObserver extends DomEventObserver {\n\tconstructor( view ) {\n\t\tsuper( view );\n\n\t\tthis.domEventType = [ 'compositionstart', 'compositionupdate', 'compositionend' ];\n\t\tconst document = this.document;\n\n\t\tdocument.on( 'compositionstart', () => {\n\t\t\tdocument.isComposing = true;\n\t\t} );\n\n\t\tdocument.on( 'compositionend', () => {\n\t\t\tdocument.isComposing = false;\n\t\t} );\n\t}\n\n\tonDomEvent( domEvent ) {\n\t\tthis.fire( domEvent.type, domEvent );\n\t}\n}\n\n/**\n * Fired when composition starts inside one of the editables.\n *\n * Introduced by {@link module:engine/view/observer/compositionobserver~CompositionObserver}.\n *\n * Note that because {@link module:engine/view/observer/compositionobserver~CompositionObserver} is attached by the\n * {@link module:engine/view/view~View} this event is available by default.\n *\n * @see module:engine/view/observer/compositionobserver~CompositionObserver\n * @event module:engine/view/document~Document#event:compositionstart\n * @param {module:engine/view/observer/domeventdata~DomEventData} data Event data.\n */\n\n/**\n * Fired when composition is updated inside one of the editables.\n *\n * Introduced by {@link module:engine/view/observer/compositionobserver~CompositionObserver}.\n *\n * Note that because {@link module:engine/view/observer/compositionobserver~CompositionObserver} is attached by the\n * {@link module:engine/view/view~View} this event is available by default.\n *\n * @see module:engine/view/observer/compositionobserver~CompositionObserver\n * @event module:engine/view/document~Document#event:compositionupdate\n * @param {module:engine/view/observer/domeventdata~DomEventData} data Event data.\n */\n\n/**\n * Fired when composition ends inside one of the editables.\n *\n * Introduced by {@link module:engine/view/observer/compositionobserver~CompositionObserver}.\n *\n * Note that because {@link module:engine/view/observer/compositionobserver~CompositionObserver} is attached by the\n * {@link module:engine/view/view~View} this event is available by default.\n *\n * @see module:engine/view/observer/compositionobserver~CompositionObserver\n * @event module:engine/view/document~Document#event:compositionend\n * @param {module:engine/view/observer/domeventdata~DomEventData} data Event data.\n */\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n\n/**\n * @module engine/view/observer/inputobserver\n */\n\nimport DomEventObserver from './domeventobserver';\n\n/**\n * Observer for events connected with data input.\n *\n * Note that this observer is attached by the {@link module:engine/view/view~View} and is available by default.\n *\n * @extends module:engine/view/observer/domeventobserver~DomEventObserver\n */\nexport default class InputObserver extends DomEventObserver {\n\tconstructor( view ) {\n\t\tsuper( view );\n\n\t\tthis.domEventType = [ 'beforeinput' ];\n\t}\n\n\tonDomEvent( domEvent ) {\n\t\tthis.fire( domEvent.type, domEvent );\n\t}\n}\n\n/**\n * Fired before browser inputs (or deletes) some data.\n *\n * This event is available only on browsers which support DOM `beforeinput` event.\n *\n * Introduced by {@link module:engine/view/observer/inputobserver~InputObserver}.\n *\n * Note that because {@link module:engine/view/observer/inputobserver~InputObserver} is attached by the\n * {@link module:engine/view/view~View} this event is available by default.\n *\n * @see module:engine/view/observer/inputobserver~InputObserver\n * @event module:engine/view/document~Document#event:beforeinput\n * @param {module:engine/view/observer/domeventdata~DomEventData} data Event data.\n */\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/dom/isrange\n */\n\n/**\n * Checks if the object is a native DOM Range.\n *\n * @param {*} obj\n * @returns {Boolean}\n */\nexport default function isRange( obj ) {\n\treturn Object.prototype.toString.apply( obj ) == '[object Range]';\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/dom/getborderwidths\n */\n\n/**\n * Returns an object containing CSS border widths of a specified HTML element.\n *\n * @param {HTMLElement} element An element which has CSS borders.\n * @returns {Object} An object containing `top`, `left`, `right` and `bottom` properties\n * with numerical values of the `border-[top,left,right,bottom]-width` CSS styles.\n */\nexport default function getBorderWidths( element ) {\n\t// Call getComputedStyle on the window the element document belongs to.\n\tconst style = element.ownerDocument.defaultView.getComputedStyle( element );\n\n\treturn {\n\t\ttop: parseInt( style.borderTopWidth, 10 ),\n\t\tright: parseInt( style.borderRightWidth, 10 ),\n\t\tbottom: parseInt( style.borderBottomWidth, 10 ),\n\t\tleft: parseInt( style.borderLeftWidth, 10 )\n\t};\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/dom/rect\n */\n\nimport isRange from './isrange';\nimport isWindow from './iswindow';\nimport getBorderWidths from './getborderwidths';\nimport isText from './istext';\nimport { isElement } from 'lodash-es';\n\nconst rectProperties = [ 'top', 'right', 'bottom', 'left', 'width', 'height' ];\n\n/**\n * A helper class representing a `ClientRect` object, e.g. value returned by\n * the native `object.getBoundingClientRect()` method. Provides a set of methods\n * to manipulate the rect and compare it against other rect instances.\n */\nexport default class Rect {\n\t/**\n\t * Creates an instance of rect.\n\t *\n\t *\t\t// Rect of an HTMLElement.\n\t *\t\tconst rectA = new Rect( document.body );\n\t *\n\t *\t\t// Rect of a DOM Range.\n\t *\t\tconst rectB = new Rect( document.getSelection().getRangeAt( 0 ) );\n\t *\n\t *\t\t// Rect of a window (web browser viewport).\n\t *\t\tconst rectC = new Rect( window );\n\t *\n\t *\t\t// Rect out of an object.\n\t *\t\tconst rectD = new Rect( { top: 0, right: 10, bottom: 10, left: 0, width: 10, height: 10 } );\n\t *\n\t *\t\t// Rect out of another Rect instance.\n\t *\t\tconst rectE = new Rect( rectD );\n\t *\n\t *\t\t// Rect out of a ClientRect.\n\t *\t\tconst rectF = new Rect( document.body.getClientRects().item( 0 ) );\n\t *\n\t * **Note**: By default a rect of an HTML element includes its CSS borders and scrollbars (if any)\n\t * ant the rect of a `window` includes scrollbars too. Use {@link #excludeScrollbarsAndBorders}\n\t * to get the inner part of the rect.\n\t *\n\t * @param {HTMLElement|Range|Window|ClientRect|module:utils/dom/rect~Rect|Object} source A source object to create the rect.\n\t */\n\tconstructor( source ) {\n\t\tconst isSourceRange = isRange( source );\n\n\t\t/**\n\t\t * The object this rect is for.\n\t\t *\n\t\t * @protected\n\t\t * @readonly\n\t\t * @member {HTMLElement|Range|ClientRect|module:utils/dom/rect~Rect|Object} #_source\n\t\t */\n\t\tObject.defineProperty( this, '_source', {\n\t\t\t// If the source is a Rect instance, copy it's #_source.\n\t\t\tvalue: source._source || source,\n\t\t\twritable: true,\n\t\t\tenumerable: false\n\t\t} );\n\n\t\tif ( isElement( source ) || isSourceRange ) {\n\t\t\t// The `Rect` class depends on `getBoundingClientRect` and `getClientRects` DOM methods. If the source\n\t\t\t// of a rect in an HTML element or a DOM range but it does not belong to any rendered DOM tree, these methods\n\t\t\t// will fail to obtain the geometry and the rect instance makes little sense to the features using it.\n\t\t\t// To get rid of this warning make sure the source passed to the constructor is a descendant of `window.document.body`.\n\t\t\t// @if CK_DEBUG // const sourceNode = isSourceRange ? source.startContainer : source;\n\t\t\t// @if CK_DEBUG // if ( !sourceNode.ownerDocument || !sourceNode.ownerDocument.body.contains( sourceNode ) ) {\n\t\t\t// @if CK_DEBUG // \tconsole.warn(\n\t\t\t// @if CK_DEBUG // \t\t'rect-source-not-in-dom: The source of this rect does not belong to any rendered DOM tree.',\n\t\t\t// @if CK_DEBUG // \t\t{ source } );\n\t\t\t// @if CK_DEBUG // }\n\n\t\t\tif ( isSourceRange ) {\n\t\t\t\tconst rangeRects = Rect.getDomRangeRects( source );\n\t\t\t\tcopyRectProperties( this, Rect.getBoundingRect( rangeRects ) );\n\t\t\t} else {\n\t\t\t\tcopyRectProperties( this, source.getBoundingClientRect() );\n\t\t\t}\n\t\t} else if ( isWindow( source ) ) {\n\t\t\tconst { innerWidth, innerHeight } = source;\n\n\t\t\tcopyRectProperties( this, {\n\t\t\t\ttop: 0,\n\t\t\t\tright: innerWidth,\n\t\t\t\tbottom: innerHeight,\n\t\t\t\tleft: 0,\n\t\t\t\twidth: innerWidth,\n\t\t\t\theight: innerHeight\n\t\t\t} );\n\t\t} else {\n\t\t\tcopyRectProperties( this, source );\n\t\t}\n\n\t\t/**\n\t\t * The \"top\" value of the rect.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Number} #top\n\t\t */\n\n\t\t/**\n\t\t * The \"right\" value of the rect.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Number} #right\n\t\t */\n\n\t\t/**\n\t\t * The \"bottom\" value of the rect.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Number} #bottom\n\t\t */\n\n\t\t/**\n\t\t * The \"left\" value of the rect.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Number} #left\n\t\t */\n\n\t\t/**\n\t\t * The \"width\" value of the rect.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Number} #width\n\t\t */\n\n\t\t/**\n\t\t * The \"height\" value of the rect.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Number} #height\n\t\t */\n\t}\n\n\t/**\n\t * Returns a clone of the rect.\n\t *\n\t * @returns {module:utils/dom/rect~Rect} A cloned rect.\n\t */\n\tclone() {\n\t\treturn new Rect( this );\n\t}\n\n\t/**\n\t * Moves the rect so that its upper–left corner lands in desired `[ x, y ]` location.\n\t *\n\t * @param {Number} x Desired horizontal location.\n\t * @param {Number} y Desired vertical location.\n\t * @returns {module:utils/dom/rect~Rect} A rect which has been moved.\n\t */\n\tmoveTo( x, y ) {\n\t\tthis.top = y;\n\t\tthis.right = x + this.width;\n\t\tthis.bottom = y + this.height;\n\t\tthis.left = x;\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Moves the rect in–place by a dedicated offset.\n\t *\n\t * @param {Number} x A horizontal offset.\n\t * @param {Number} y A vertical offset\n\t * @returns {module:utils/dom/rect~Rect} A rect which has been moved.\n\t */\n\tmoveBy( x, y ) {\n\t\tthis.top += y;\n\t\tthis.right += x;\n\t\tthis.left += x;\n\t\tthis.bottom += y;\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Returns a new rect a a result of intersection with another rect.\n\t *\n\t * @param {module:utils/dom/rect~Rect} anotherRect\n\t * @returns {module:utils/dom/rect~Rect}\n\t */\n\tgetIntersection( anotherRect ) {\n\t\tconst rect = {\n\t\t\ttop: Math.max( this.top, anotherRect.top ),\n\t\t\tright: Math.min( this.right, anotherRect.right ),\n\t\t\tbottom: Math.min( this.bottom, anotherRect.bottom ),\n\t\t\tleft: Math.max( this.left, anotherRect.left )\n\t\t};\n\n\t\trect.width = rect.right - rect.left;\n\t\trect.height = rect.bottom - rect.top;\n\n\t\tif ( rect.width < 0 || rect.height < 0 ) {\n\t\t\treturn null;\n\t\t} else {\n\t\t\treturn new Rect( rect );\n\t\t}\n\t}\n\n\t/**\n\t * Returns the area of intersection with another rect.\n\t *\n\t * @param {module:utils/dom/rect~Rect} anotherRect [description]\n\t * @returns {Number} Area of intersection.\n\t */\n\tgetIntersectionArea( anotherRect ) {\n\t\tconst rect = this.getIntersection( anotherRect );\n\n\t\tif ( rect ) {\n\t\t\treturn rect.getArea();\n\t\t} else {\n\t\t\treturn 0;\n\t\t}\n\t}\n\n\t/**\n\t * Returns the area of the rect.\n\t *\n\t * @returns {Number}\n\t */\n\tgetArea() {\n\t\treturn this.width * this.height;\n\t}\n\n\t/**\n\t * Returns a new rect, a part of the original rect, which is actually visible to the user,\n\t * e.g. an original rect cropped by parent element rects which have `overflow` set in CSS\n\t * other than `\"visible\"`.\n\t *\n\t * If there's no such visible rect, which is when the rect is limited by one or many of\n\t * the ancestors, `null` is returned.\n\t *\n\t * @returns {module:utils/dom/rect~Rect|null} A visible rect instance or `null`, if there's none.\n\t */\n\tgetVisible() {\n\t\tconst source = this._source;\n\t\tlet visibleRect = this.clone();\n\n\t\t// There's no ancestor to crop <body> with the overflow.\n\t\tif ( !isBody( source ) ) {\n\t\t\tlet parent = source.parentNode || source.commonAncestorContainer;\n\n\t\t\t// Check the ancestors all the way up to the <body>.\n\t\t\twhile ( parent && !isBody( parent ) ) {\n\t\t\t\tconst parentRect = new Rect( parent );\n\t\t\t\tconst intersectionRect = visibleRect.getIntersection( parentRect );\n\n\t\t\t\tif ( intersectionRect ) {\n\t\t\t\t\tif ( intersectionRect.getArea() < visibleRect.getArea() ) {\n\t\t\t\t\t\t// Reduce the visible rect to the intersection.\n\t\t\t\t\t\tvisibleRect = intersectionRect;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// There's no intersection, the rect is completely invisible.\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tparent = parent.parentNode;\n\t\t\t}\n\t\t}\n\n\t\treturn visibleRect;\n\t}\n\n\t/**\n\t * Checks if all property values ({@link #top}, {@link #left}, {@link #right},\n\t * {@link #bottom}, {@link #width} and {@link #height}) are the equal in both rect\n\t * instances.\n\t *\n\t * @param {module:utils/dom/rect~Rect} rect A rect instance to compare with.\n\t * @returns {Boolean} `true` when Rects are equal. `false` otherwise.\n\t */\n\tisEqual( anotherRect ) {\n\t\tfor ( const prop of rectProperties ) {\n\t\t\tif ( this[ prop ] !== anotherRect[ prop ] ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Checks whether a rect fully contains another rect instance.\n\t *\n\t * @param {module:utils/dom/rect~Rect} anotherRect\n\t * @returns {Boolean} `true` if contains, `false` otherwise.\n\t */\n\tcontains( anotherRect ) {\n\t\tconst intersectRect = this.getIntersection( anotherRect );\n\n\t\treturn !!( intersectRect && intersectRect.isEqual( anotherRect ) );\n\t}\n\n\t/**\n\t * Excludes scrollbars and CSS borders from the rect.\n\t *\n\t * * Borders are removed when {@link #_source} is an HTML element.\n\t * * Scrollbars are excluded from HTML elements and the `window`.\n\t *\n\t * @returns {module:utils/dom/rect~Rect} A rect which has been updated.\n\t */\n\texcludeScrollbarsAndBorders() {\n\t\tconst source = this._source;\n\t\tlet scrollBarWidth, scrollBarHeight, direction;\n\n\t\tif ( isWindow( source ) ) {\n\t\t\tscrollBarWidth = source.innerWidth - source.document.documentElement.clientWidth;\n\t\t\tscrollBarHeight = source.innerHeight - source.document.documentElement.clientHeight;\n\t\t\tdirection = source.getComputedStyle( source.document.documentElement ).direction;\n\t\t} else {\n\t\t\tconst borderWidths = getBorderWidths( this._source );\n\n\t\t\tscrollBarWidth = source.offsetWidth - source.clientWidth - borderWidths.left - borderWidths.right;\n\t\t\tscrollBarHeight = source.offsetHeight - source.clientHeight - borderWidths.top - borderWidths.bottom;\n\t\t\tdirection = source.ownerDocument.defaultView.getComputedStyle( source ).direction;\n\n\t\t\tthis.left += borderWidths.left;\n\t\t\tthis.top += borderWidths.top;\n\t\t\tthis.right -= borderWidths.right;\n\t\t\tthis.bottom -= borderWidths.bottom;\n\t\t\tthis.width = this.right - this.left;\n\t\t\tthis.height = this.bottom - this.top;\n\t\t}\n\n\t\tthis.width -= scrollBarWidth;\n\n\t\tif ( direction === 'ltr' ) {\n\t\t\tthis.right -= scrollBarWidth;\n\t\t} else {\n\t\t\tthis.left += scrollBarWidth;\n\t\t}\n\n\t\tthis.height -= scrollBarHeight;\n\t\tthis.bottom -= scrollBarHeight;\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Returns an array of rects of the given native DOM Range.\n\t *\n\t * @param {Range} range A native DOM range.\n\t * @returns {Array.<module:utils/dom/rect~Rect>} DOM Range rects.\n\t */\n\tstatic getDomRangeRects( range ) {\n\t\tconst rects = [];\n\t\t// Safari does not iterate over ClientRectList using for...of loop.\n\t\tconst clientRects = Array.from( range.getClientRects() );\n\n\t\tif ( clientRects.length ) {\n\t\t\tfor ( const rect of clientRects ) {\n\t\t\t\trects.push( new Rect( rect ) );\n\t\t\t}\n\t\t}\n\t\t// If there's no client rects for the Range, use parent container's bounding rect\n\t\t// instead and adjust rect's width to simulate the actual geometry of such range.\n\t\t// https://github.com/ckeditor/ckeditor5-utils/issues/153\n\t\t// https://github.com/ckeditor/ckeditor5-ui/issues/317\n\t\telse {\n\t\t\tlet startContainer = range.startContainer;\n\n\t\t\tif ( isText( startContainer ) ) {\n\t\t\t\tstartContainer = startContainer.parentNode;\n\t\t\t}\n\n\t\t\tconst rect = new Rect( startContainer.getBoundingClientRect() );\n\t\t\trect.right = rect.left;\n\t\t\trect.width = 0;\n\n\t\t\trects.push( rect );\n\t\t}\n\n\t\treturn rects;\n\t}\n\n\t/**\n\t * Returns a bounding rectangle that contains all the given `rects`.\n\t *\n\t * @param {Iterable.<module:utils/dom/rect~Rect>} rects A list of rectangles that should be contained in the result rectangle.\n\t * @returns {module:utils/dom/rect~Rect|null} Bounding rectangle or `null` if no `rects` were given.\n\t */\n\tstatic getBoundingRect( rects ) {\n\t\tconst boundingRectData = {\n\t\t\tleft: Number.POSITIVE_INFINITY,\n\t\t\ttop: Number.POSITIVE_INFINITY,\n\t\t\tright: Number.NEGATIVE_INFINITY,\n\t\t\tbottom: Number.NEGATIVE_INFINITY\n\t\t};\n\t\tlet rectangleCount = 0;\n\n\t\tfor ( const rect of rects ) {\n\t\t\trectangleCount++;\n\n\t\t\tboundingRectData.left = Math.min( boundingRectData.left, rect.left );\n\t\t\tboundingRectData.top = Math.min( boundingRectData.top, rect.top );\n\t\t\tboundingRectData.right = Math.max( boundingRectData.right, rect.right );\n\t\t\tboundingRectData.bottom = Math.max( boundingRectData.bottom, rect.bottom );\n\t\t}\n\n\t\tif ( rectangleCount == 0 ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tboundingRectData.width = boundingRectData.right - boundingRectData.left;\n\t\tboundingRectData.height = boundingRectData.bottom - boundingRectData.top;\n\n\t\treturn new Rect( boundingRectData );\n\t}\n}\n\n// Acquires all the rect properties from the passed source.\n//\n// @private\n// @param {module:utils/dom/rect~Rect} rect\n// @param {ClientRect|module:utils/dom/rect~Rect|Object} source\nfunction copyRectProperties( rect, source ) {\n\tfor ( const p of rectProperties ) {\n\t\trect[ p ] = source[ p ];\n\t}\n}\n\n// Checks if provided object is a <body> HTML element.\n//\n// @private\n// @param {HTMLElement|Range} elementOrRange\n// @returns {Boolean}\nfunction isBody( elementOrRange ) {\n\tif ( !isElement( elementOrRange ) ) {\n\t\treturn false;\n\t}\n\n\treturn elementOrRange === elementOrRange.ownerDocument.body;\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/dom/scroll\n */\n\nimport isRange from './isrange';\nimport Rect from './rect';\nimport isText from './istext';\n\nconst utils = {};\n\n/**\n * Makes any page `HTMLElement` or `Range` (`target`) visible inside the browser viewport.\n * This helper will scroll all `target` ancestors and the web browser viewport to reveal the target to\n * the user. If the `target` is already visible, nothing will happen.\n *\n * @param {HTMLElement|Range} options.target A target, which supposed to become visible to the user.\n * @param {Number} [options.viewportOffset] An offset from the edge of the viewport (in pixels)\n * the `target` will be moved by when the viewport is scrolled. It enhances the user experience\n * by keeping the `target` some distance from the edge of the viewport and thus making it easier to\n * read or edit by the user.\n */\nexport function scrollViewportToShowTarget( { target, viewportOffset = 0 } ) {\n\tconst targetWindow = getWindow( target );\n\tlet currentWindow = targetWindow;\n\tlet currentFrame = null;\n\n\t// Iterate over all windows, starting from target's parent window up to window#top.\n\twhile ( currentWindow ) {\n\t\tlet firstAncestorToScroll;\n\n\t\t// Let's scroll target's ancestors first to reveal it. Then, once the ancestor scrolls\n\t\t// settled down, the algorithm can eventually scroll the viewport of the current window.\n\t\t//\n\t\t// Note: If the current window is target's **original** window (e.g. the first one),\n\t\t// start scrolling the closest parent of the target. If not, scroll the closest parent\n\t\t// of an iframe that resides in the current window.\n\t\tif ( currentWindow == targetWindow ) {\n\t\t\tfirstAncestorToScroll = getParentElement( target );\n\t\t} else {\n\t\t\tfirstAncestorToScroll = getParentElement( currentFrame );\n\t\t}\n\n\t\t// Scroll the target's ancestors first. Once done, scrolling the viewport is easy.\n\t\tscrollAncestorsToShowRect( firstAncestorToScroll, () => {\n\t\t\t// Note: If the target does not belong to the current window **directly**,\n\t\t\t// i.e. it resides in an iframe belonging to the window, obtain the target's rect\n\t\t\t// in the coordinates of the current window. By default, a Rect returns geometry\n\t\t\t// relative to the current window's viewport. To make it work in a parent window,\n\t\t\t// it must be shifted.\n\t\t\treturn getRectRelativeToWindow( target, currentWindow );\n\t\t} );\n\n\t\t// Obtain the rect of the target after it has been scrolled within its ancestors.\n\t\t// It's time to scroll the viewport.\n\t\tconst targetRect = getRectRelativeToWindow( target, currentWindow );\n\n\t\tscrollWindowToShowRect( currentWindow, targetRect, viewportOffset );\n\n\t\tif ( currentWindow.parent != currentWindow ) {\n\t\t\t// Keep the reference to the <iframe> element the \"previous current window\" was\n\t\t\t// rendered within. It will be useful to re–calculate the rect of the target\n\t\t\t// in the parent window's relative geometry. The target's rect must be shifted\n\t\t\t// by it's iframe's position.\n\t\t\tcurrentFrame = currentWindow.frameElement;\n\t\t\tcurrentWindow = currentWindow.parent;\n\n\t\t\t// If the current window has some parent but frameElement is inaccessible, then they have\n\t\t\t// different domains/ports and, due to security reasons, accessing and scrolling\n\t\t\t// the parent window won't be possible.\n\t\t\t// See https://github.com/ckeditor/ckeditor5/issues/930.\n\t\t\tif ( !currentFrame ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t} else {\n\t\t\tcurrentWindow = null;\n\t\t}\n\t}\n}\n\n/**\n * Makes any page `HTMLElement` or `Range` (target) visible within its scrollable ancestors,\n * e.g. if they have `overflow: scroll` CSS style.\n *\n * @param {HTMLElement|Range} target A target, which supposed to become visible to the user.\n */\nexport function scrollAncestorsToShowTarget( target ) {\n\tconst targetParent = getParentElement( target );\n\n\tscrollAncestorsToShowRect( targetParent, () => {\n\t\treturn new Rect( target );\n\t} );\n}\n\n// TODO: Using a property value shorthand in the top of the file\n// causes JSDoc to throw errors. See https://github.com/cksource/docs-builder/issues/75.\nObject.assign( utils, {\n\tscrollViewportToShowTarget,\n\tscrollAncestorsToShowTarget\n} );\n\n// Makes a given rect visible within its parent window.\n//\n// Note: Avoid the situation where the caret is still in the viewport, but totally\n// at the edge of it. In such situation, if it moved beyond the viewport in the next\n// action e.g. after paste, the scrolling would move it to the viewportOffset level\n// and it all would look like the caret visually moved up/down:\n//\n// 1.\n//\t\t| foo[]\n//\t\t|                                    <--- N px of space below the caret\n//\t\t+---------------------------------...\n//\n// 2. *paste*\n// 3.\n//\t\t|\n//\t\t|\n//\t\t+-foo-----------------------------...\n//\t\t  bar[]                              <--- caret below viewport, scrolling...\n//\n// 4. *scrolling*\n// 5.\n//\t\t|\n//\t\t| foo\n//\t\t| bar[]                              <--- caret precisely at the edge\n//\t\t+---------------------------------...\n//\n// To prevent this, this method checks the rects moved by the viewportOffset to cover\n// the upper/lower edge of the viewport. It makes sure if the action repeats, there's\n// no twitching – it's a purely visual improvement:\n//\n// 5. (after fix)\n//\t\t|\n//\t\t| foo\n//\t\t| bar[]\n//\t\t|                                    <--- N px of space below the caret\n//\t\t+---------------------------------...\n//\n// @private\n// @param {Window} window A window which is scrolled to reveal the rect.\n// @param {module:utils/dom/rect~Rect} rect A rect which is to be revealed.\n// @param {Number} viewportOffset See scrollViewportToShowTarget.\nfunction scrollWindowToShowRect( window, rect, viewportOffset ) {\n\tconst targetShiftedDownRect = rect.clone().moveBy( 0, viewportOffset );\n\tconst targetShiftedUpRect = rect.clone().moveBy( 0, -viewportOffset );\n\tconst viewportRect = new Rect( window ).excludeScrollbarsAndBorders();\n\n\tconst rects = [ targetShiftedUpRect, targetShiftedDownRect ];\n\n\tif ( !rects.every( rect => viewportRect.contains( rect ) ) ) {\n\t\tlet { scrollX, scrollY } = window;\n\n\t\tif ( isAbove( targetShiftedUpRect, viewportRect ) ) {\n\t\t\tscrollY -= viewportRect.top - rect.top + viewportOffset;\n\t\t} else if ( isBelow( targetShiftedDownRect, viewportRect ) ) {\n\t\t\tscrollY += rect.bottom - viewportRect.bottom + viewportOffset;\n\t\t}\n\n\t\t// TODO: Web browsers scroll natively to place the target in the middle\n\t\t// of the viewport. It's not a very popular case, though.\n\t\tif ( isLeftOf( rect, viewportRect ) ) {\n\t\t\tscrollX -= viewportRect.left - rect.left + viewportOffset;\n\t\t} else if ( isRightOf( rect, viewportRect ) ) {\n\t\t\tscrollX += rect.right - viewportRect.right + viewportOffset;\n\t\t}\n\n\t\twindow.scrollTo( scrollX, scrollY );\n\t}\n}\n\n// Recursively scrolls element ancestors to visually reveal a rect.\n//\n// @private\n// @param {HTMLElement} A parent The first ancestors to start scrolling.\n// @param {Function} getRect A function which returns the Rect, which is to be revealed.\nfunction scrollAncestorsToShowRect( parent, getRect ) {\n\tconst parentWindow = getWindow( parent );\n\tlet parentRect, targetRect;\n\n\twhile ( parent != parentWindow.document.body ) {\n\t\ttargetRect = getRect();\n\t\tparentRect = new Rect( parent ).excludeScrollbarsAndBorders();\n\n\t\tif ( !parentRect.contains( targetRect ) ) {\n\t\t\tif ( isAbove( targetRect, parentRect ) ) {\n\t\t\t\tparent.scrollTop -= parentRect.top - targetRect.top;\n\t\t\t} else if ( isBelow( targetRect, parentRect ) ) {\n\t\t\t\tparent.scrollTop += targetRect.bottom - parentRect.bottom;\n\t\t\t}\n\n\t\t\tif ( isLeftOf( targetRect, parentRect ) ) {\n\t\t\t\tparent.scrollLeft -= parentRect.left - targetRect.left;\n\t\t\t} else if ( isRightOf( targetRect, parentRect ) ) {\n\t\t\t\tparent.scrollLeft += targetRect.right - parentRect.right;\n\t\t\t}\n\t\t}\n\n\t\tparent = parent.parentNode;\n\t}\n}\n\n// Determines if a given `Rect` extends beyond the bottom edge of the second `Rect`.\n//\n// @private\n// @param {module:utils/dom/rect~Rect} firstRect\n// @param {module:utils/dom/rect~Rect} secondRect\nfunction isBelow( firstRect, secondRect ) {\n\treturn firstRect.bottom > secondRect.bottom;\n}\n\n// Determines if a given `Rect` extends beyond the top edge of the second `Rect`.\n//\n// @private\n// @param {module:utils/dom/rect~Rect} firstRect\n// @param {module:utils/dom/rect~Rect} secondRect\nfunction isAbove( firstRect, secondRect ) {\n\treturn firstRect.top < secondRect.top;\n}\n\n// Determines if a given `Rect` extends beyond the left edge of the second `Rect`.\n//\n// @private\n// @param {module:utils/dom/rect~Rect} firstRect\n// @param {module:utils/dom/rect~Rect} secondRect\nfunction isLeftOf( firstRect, secondRect ) {\n\treturn firstRect.left < secondRect.left;\n}\n\n// Determines if a given `Rect` extends beyond the right edge of the second `Rect`.\n//\n// @private\n// @param {module:utils/dom/rect~Rect} firstRect\n// @param {module:utils/dom/rect~Rect} secondRect\nfunction isRightOf( firstRect, secondRect ) {\n\treturn firstRect.right > secondRect.right;\n}\n\n// Returns the closest window of an element or range.\n//\n// @private\n// @param {HTMLElement|Range} firstRect\n// @returns {Window}\nfunction getWindow( elementOrRange ) {\n\tif ( isRange( elementOrRange ) ) {\n\t\treturn elementOrRange.startContainer.ownerDocument.defaultView;\n\t} else {\n\t\treturn elementOrRange.ownerDocument.defaultView;\n\t}\n}\n\n// Returns the closest parent of an element or DOM range.\n//\n// @private\n// @param {HTMLElement|Range} firstRect\n// @returns {HTMLelement}\nfunction getParentElement( elementOrRange ) {\n\tif ( isRange( elementOrRange ) ) {\n\t\tlet parent = elementOrRange.commonAncestorContainer;\n\n\t\t// If a Range is attached to the Text, use the closest element ancestor.\n\t\tif ( isText( parent ) ) {\n\t\t\tparent = parent.parentNode;\n\t\t}\n\n\t\treturn parent;\n\t} else {\n\t\treturn elementOrRange.parentNode;\n\t}\n}\n\n// Returns the rect of an element or range residing in an iframe.\n// The result rect is relative to the geometry of the passed window instance.\n//\n// @private\n// @param {HTMLElement|Range} target Element or range which rect should be returned.\n// @param {Window} relativeWindow A window the rect should be relative to.\n// @returns {module:utils/dom/rect~Rect}\nfunction getRectRelativeToWindow( target, relativeWindow ) {\n\tconst targetWindow = getWindow( target );\n\tconst rect = new Rect( target );\n\n\tif ( targetWindow === relativeWindow ) {\n\t\treturn rect;\n\t} else {\n\t\tlet currentWindow = targetWindow;\n\n\t\twhile ( currentWindow != relativeWindow ) {\n\t\t\tconst frame = currentWindow.frameElement;\n\t\t\tconst frameRect = new Rect( frame ).excludeScrollbarsAndBorders();\n\n\t\t\trect.moveBy( frameRect.left, frameRect.top );\n\n\t\t\tcurrentWindow = currentWindow.parent;\n\t\t}\n\t}\n\n\treturn rect;\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/view\n */\n\nimport Document from './document';\nimport DowncastWriter from './downcastwriter';\nimport Renderer from './renderer';\nimport DomConverter from './domconverter';\nimport Position from './position';\nimport Range from './range';\nimport Selection from './selection';\n\nimport MutationObserver from './observer/mutationobserver';\nimport KeyObserver from './observer/keyobserver';\nimport FakeSelectionObserver from './observer/fakeselectionobserver';\nimport SelectionObserver from './observer/selectionobserver';\nimport FocusObserver from './observer/focusobserver';\nimport CompositionObserver from './observer/compositionobserver';\nimport InputObserver from './observer/inputobserver';\n\nimport ObservableMixin from '@ckeditor/ckeditor5-utils/src/observablemixin';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\nimport { scrollViewportToShowTarget } from '@ckeditor/ckeditor5-utils/src/dom/scroll';\nimport { injectUiElementHandling } from './uielement';\nimport { injectQuirksHandling } from './filler';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport env from '@ckeditor/ckeditor5-utils/src/env';\n\n/**\n * Editor's view controller class. Its main responsibility is DOM - View management for editing purposes, to provide\n * abstraction over the DOM structure and events and hide all browsers quirks.\n *\n * View controller renders view document to DOM whenever view structure changes. To determine when view can be rendered,\n * all changes need to be done using the {@link module:engine/view/view~View#change} method, using\n * {@link module:engine/view/downcastwriter~DowncastWriter}:\n *\n *\t\tview.change( writer => {\n *\t\t\twriter.insert( position, writer.createText( 'foo' ) );\n *\t\t} );\n *\n * View controller also register {@link module:engine/view/observer/observer~Observer observers} which observes changes\n * on DOM and fire events on the {@link module:engine/view/document~Document Document}.\n * Note that the following observers are added by the class constructor and are always available:\n *\n * * {@link module:engine/view/observer/mutationobserver~MutationObserver},\n * * {@link module:engine/view/observer/selectionobserver~SelectionObserver},\n * * {@link module:engine/view/observer/focusobserver~FocusObserver},\n * * {@link module:engine/view/observer/keyobserver~KeyObserver},\n * * {@link module:engine/view/observer/fakeselectionobserver~FakeSelectionObserver}.\n * * {@link module:engine/view/observer/compositionobserver~CompositionObserver}.\n *\n * This class also {@link module:engine/view/view~View#attachDomRoot binds the DOM and the view elements}.\n *\n * If you do not need full a DOM - view management, and only want to transform a tree of view elements to a tree of DOM\n * elements you do not need this controller. You can use the {@link module:engine/view/domconverter~DomConverter DomConverter} instead.\n *\n * @mixes module:utils/observablemixin~ObservableMixin\n */\nexport default class View {\n\t/**\n\t * @param {module:engine/view/stylesmap~StylesProcessor} stylesProcessor The styles processor instance.\n\t */\n\tconstructor( stylesProcessor ) {\n\t\t/**\n\t\t * Instance of the {@link module:engine/view/document~Document} associated with this view controller.\n\t\t *\n\t\t * @readonly\n\t\t * @type {module:engine/view/document~Document}\n\t\t */\n\t\tthis.document = new Document( stylesProcessor );\n\n\t\t/**\n\t\t * Instance of the {@link module:engine/view/domconverter~DomConverter domConverter} used by\n\t\t * {@link module:engine/view/view~View#_renderer renderer}\n\t\t * and {@link module:engine/view/observer/observer~Observer observers}.\n\t\t *\n\t\t * @readonly\n\t\t * @type {module:engine/view/domconverter~DomConverter}\n\t\t */\n\t\tthis.domConverter = new DomConverter( this.document );\n\n\t\t/**\n\t\t * Roots of the DOM tree. Map on the `HTMLElement`s with roots names as keys.\n\t\t *\n\t\t * @readonly\n\t\t * @type {Map.<String, HTMLElement>}\n\t\t */\n\t\tthis.domRoots = new Map();\n\n\t\t/**\n\t\t * Used to prevent calling {@link #forceRender} and {@link #change} during rendering view to the DOM.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Boolean} #isRenderingInProgress\n\t\t */\n\t\tthis.set( 'isRenderingInProgress', false );\n\n\t\t/**\n\t\t * Informs whether the DOM selection is inside any of the DOM roots managed by the view.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Boolean} #hasDomSelection\n\t\t */\n\t\tthis.set( 'hasDomSelection', false );\n\n\t\t/**\n\t\t * Instance of the {@link module:engine/view/renderer~Renderer renderer}.\n\t\t *\n\t\t * @protected\n\t\t * @type {module:engine/view/renderer~Renderer}\n\t\t */\n\t\tthis._renderer = new Renderer( this.domConverter, this.document.selection );\n\t\tthis._renderer.bind( 'isFocused' ).to( this.document );\n\n\t\t/**\n\t\t * A DOM root attributes cache. It saves the initial values of DOM root attributes before the DOM element\n\t\t * is {@link module:engine/view/view~View#attachDomRoot attached} to the view so later on, when\n\t\t * the view is destroyed ({@link module:engine/view/view~View#detachDomRoot}), they can be easily restored.\n\t\t * This way, the DOM element can go back to the (clean) state as if the editing view never used it.\n\t\t *\n\t\t * @private\n\t\t * @member {WeakMap.<HTMLElement,Object>}\n\t\t */\n\t\tthis._initialDomRootAttributes = new WeakMap();\n\n\t\t/**\n\t\t * Map of registered {@link module:engine/view/observer/observer~Observer observers}.\n\t\t *\n\t\t * @private\n\t\t * @type {Map.<Function, module:engine/view/observer/observer~Observer>}\n\t\t */\n\t\tthis._observers = new Map();\n\n\t\t/**\n\t\t * Is set to `true` when {@link #change view changes} are currently in progress.\n\t\t *\n\t\t * @private\n\t\t * @type {Boolean}\n\t\t */\n\t\tthis._ongoingChange = false;\n\n\t\t/**\n\t\t * Used to prevent calling {@link #forceRender} and {@link #change} during rendering view to the DOM.\n\t\t *\n\t\t * @private\n\t\t * @type {Boolean}\n\t\t */\n\t\tthis._postFixersInProgress = false;\n\n\t\t/**\n\t\t * Internal flag to temporary disable rendering. See the usage in the {@link #_disableRendering}.\n\t\t *\n\t\t * @private\n\t\t * @type {Boolean}\n\t\t */\n\t\tthis._renderingDisabled = false;\n\n\t\t/**\n\t\t * Internal flag that disables rendering when there are no changes since the last rendering.\n\t\t * It stores information about changed selection and changed elements from attached document roots.\n\t\t *\n\t\t * @private\n\t\t * @type {Boolean}\n\t\t */\n\t\tthis._hasChangedSinceTheLastRendering = false;\n\n\t\t/**\n\t\t * DowncastWriter instance used in {@link #change change method} callbacks.\n\t\t *\n\t\t * @private\n\t\t * @type {module:engine/view/downcastwriter~DowncastWriter}\n\t\t */\n\t\tthis._writer = new DowncastWriter( this.document );\n\n\t\t// Add default observers.\n\t\tthis.addObserver( MutationObserver );\n\t\tthis.addObserver( SelectionObserver );\n\t\tthis.addObserver( FocusObserver );\n\t\tthis.addObserver( KeyObserver );\n\t\tthis.addObserver( FakeSelectionObserver );\n\t\tthis.addObserver( CompositionObserver );\n\n\t\tif ( env.isAndroid ) {\n\t\t\tthis.addObserver( InputObserver );\n\t\t}\n\n\t\t// Inject quirks handlers.\n\t\tinjectQuirksHandling( this );\n\t\tinjectUiElementHandling( this );\n\n\t\t// Use 'normal' priority so that rendering is performed as first when using that priority.\n\t\tthis.on( 'render', () => {\n\t\t\tthis._render();\n\n\t\t\t// Informs that layout has changed after render.\n\t\t\tthis.document.fire( 'layoutChanged' );\n\n\t\t\t// Reset the `_hasChangedSinceTheLastRendering` flag after rendering.\n\t\t\tthis._hasChangedSinceTheLastRendering = false;\n\t\t} );\n\n\t\t// Listen to the document selection changes directly.\n\t\tthis.listenTo( this.document.selection, 'change', () => {\n\t\t\tthis._hasChangedSinceTheLastRendering = true;\n\t\t} );\n\t}\n\n\t/**\n\t * Attaches a DOM root element to the view element and enable all observers on that element.\n\t * Also {@link module:engine/view/renderer~Renderer#markToSync mark element} to be synchronized\n\t * with the view what means that all child nodes will be removed and replaced with content of the view root.\n\t *\n\t * This method also will change view element name as the same as tag name of given dom root.\n\t * Name is always transformed to lower case.\n\t *\n\t * **Note:** Use {@link #detachDomRoot `detachDomRoot()`} to revert this action.\n\t *\n\t * @param {Element} domRoot DOM root element.\n\t * @param {String} [name='main'] Name of the root.\n\t */\n\tattachDomRoot( domRoot, name = 'main' ) {\n\t\tconst viewRoot = this.document.getRoot( name );\n\n\t\t// Set view root name the same as DOM root tag name.\n\t\tviewRoot._name = domRoot.tagName.toLowerCase();\n\n\t\tconst initialDomRootAttributes = {};\n\n\t\t// 1. Copy and cache the attributes to remember the state of the element before attaching.\n\t\t//    The cached attributes will be restored in detachDomRoot() so the element goes to the\n\t\t//    clean state as if the editing view never used it.\n\t\t// 2. Apply the attributes using the view writer, so they all go under the control of the engine.\n\t\t//    The editing view takes over the attribute management completely because various\n\t\t//    features (e.g. addPlaceholder()) require dynamic changes of those attributes and they\n\t\t//    cannot be managed by the engine and the UI library at the same time.\n\t\tfor ( const { name, value } of Array.from( domRoot.attributes ) ) {\n\t\t\tinitialDomRootAttributes[ name ] = value;\n\n\t\t\t// Do not use writer.setAttribute() for the class attribute. The EditableUIView class\n\t\t\t// and its descendants could have already set some using the writer.addClass() on the view\n\t\t\t// document root. They haven't been rendered yet so they are not present in the DOM root.\n\t\t\t// Using writer.setAttribute( 'class', ... ) would override them completely.\n\t\t\tif ( name === 'class' ) {\n\t\t\t\tthis._writer.addClass( value.split( ' ' ), viewRoot );\n\t\t\t} else {\n\t\t\t\tthis._writer.setAttribute( name, value, viewRoot );\n\t\t\t}\n\t\t}\n\n\t\tthis._initialDomRootAttributes.set( domRoot, initialDomRootAttributes );\n\n\t\tconst updateContenteditableAttribute = () => {\n\t\t\tthis._writer.setAttribute( 'contenteditable', !viewRoot.isReadOnly, viewRoot );\n\n\t\t\tif ( viewRoot.isReadOnly ) {\n\t\t\t\tthis._writer.addClass( 'ck-read-only', viewRoot );\n\t\t\t} else {\n\t\t\t\tthis._writer.removeClass( 'ck-read-only', viewRoot );\n\t\t\t}\n\t\t};\n\n\t\t// Set initial value.\n\t\tupdateContenteditableAttribute();\n\n\t\tthis.domRoots.set( name, domRoot );\n\t\tthis.domConverter.bindElements( domRoot, viewRoot );\n\t\tthis._renderer.markToSync( 'children', viewRoot );\n\t\tthis._renderer.markToSync( 'attributes', viewRoot );\n\t\tthis._renderer.domDocuments.add( domRoot.ownerDocument );\n\n\t\tviewRoot.on( 'change:children', ( evt, node ) => this._renderer.markToSync( 'children', node ) );\n\t\tviewRoot.on( 'change:attributes', ( evt, node ) => this._renderer.markToSync( 'attributes', node ) );\n\t\tviewRoot.on( 'change:text', ( evt, node ) => this._renderer.markToSync( 'text', node ) );\n\t\tviewRoot.on( 'change:isReadOnly', () => this.change( updateContenteditableAttribute ) );\n\n\t\tviewRoot.on( 'change', () => {\n\t\t\tthis._hasChangedSinceTheLastRendering = true;\n\t\t} );\n\n\t\tfor ( const observer of this._observers.values() ) {\n\t\t\tobserver.observe( domRoot, name );\n\t\t}\n\t}\n\n\t/**\n\t * Detaches a DOM root element from the view element and restores its attributes to the state before\n\t * {@link #attachDomRoot `attachDomRoot()`}.\n\t *\n\t * @param {String} name Name of the root to detach.\n\t */\n\tdetachDomRoot( name ) {\n\t\tconst domRoot = this.domRoots.get( name );\n\n\t\t// Remove all root attributes so the DOM element is \"bare\".\n\t\tArray.from( domRoot.attributes ).forEach( ( { name } ) => domRoot.removeAttribute( name ) );\n\n\t\tconst initialDomRootAttributes = this._initialDomRootAttributes.get( domRoot );\n\n\t\t// Revert all view root attributes back to the state before attachDomRoot was called.\n\t\tfor ( const attribute in initialDomRootAttributes ) {\n\t\t\tdomRoot.setAttribute( attribute, initialDomRootAttributes[ attribute ] );\n\t\t}\n\n\t\tthis.domRoots.delete( name );\n\t\tthis.domConverter.unbindDomElement( domRoot );\n\t}\n\n\t/**\n\t * Gets DOM root element.\n\t *\n\t * @param {String} [name='main']  Name of the root.\n\t * @returns {Element} DOM root element instance.\n\t */\n\tgetDomRoot( name = 'main' ) {\n\t\treturn this.domRoots.get( name );\n\t}\n\n\t/**\n\t * Creates observer of the given type if not yet created, {@link module:engine/view/observer/observer~Observer#enable enables} it\n\t * and {@link module:engine/view/observer/observer~Observer#observe attaches} to all existing and future\n\t * {@link #domRoots DOM roots}.\n\t *\n\t * Note: Observers are recognized by their constructor (classes). A single observer will be instantiated and used only\n\t * when registered for the first time. This means that features and other components can register a single observer\n\t * multiple times without caring whether it has been already added or not.\n\t *\n\t * @param {Function} Observer The constructor of an observer to add.\n\t * Should create an instance inheriting from {@link module:engine/view/observer/observer~Observer}.\n\t * @returns {module:engine/view/observer/observer~Observer} Added observer instance.\n\t */\n\taddObserver( Observer ) {\n\t\tlet observer = this._observers.get( Observer );\n\n\t\tif ( observer ) {\n\t\t\treturn observer;\n\t\t}\n\n\t\tobserver = new Observer( this );\n\n\t\tthis._observers.set( Observer, observer );\n\n\t\tfor ( const [ name, domElement ] of this.domRoots ) {\n\t\t\tobserver.observe( domElement, name );\n\t\t}\n\n\t\tobserver.enable();\n\n\t\treturn observer;\n\t}\n\n\t/**\n\t * Returns observer of the given type or `undefined` if such observer has not been added yet.\n\t *\n\t * @param {Function} Observer The constructor of an observer to get.\n\t * @returns {module:engine/view/observer/observer~Observer|undefined} Observer instance or undefined.\n\t */\n\tgetObserver( Observer ) {\n\t\treturn this._observers.get( Observer );\n\t}\n\n\t/**\n\t * Disables all added observers.\n\t */\n\tdisableObservers() {\n\t\tfor ( const observer of this._observers.values() ) {\n\t\t\tobserver.disable();\n\t\t}\n\t}\n\n\t/**\n\t * Enables all added observers.\n\t */\n\tenableObservers() {\n\t\tfor ( const observer of this._observers.values() ) {\n\t\t\tobserver.enable();\n\t\t}\n\t}\n\n\t/**\n\t * Scrolls the page viewport and {@link #domRoots} with their ancestors to reveal the\n\t * caret, if not already visible to the user.\n\t */\n\tscrollToTheSelection() {\n\t\tconst range = this.document.selection.getFirstRange();\n\n\t\tif ( range ) {\n\t\t\tscrollViewportToShowTarget( {\n\t\t\t\ttarget: this.domConverter.viewRangeToDom( range ),\n\t\t\t\tviewportOffset: 20\n\t\t\t} );\n\t\t}\n\t}\n\n\t/**\n\t * It will focus DOM element representing {@link module:engine/view/editableelement~EditableElement EditableElement}\n\t * that is currently having selection inside.\n\t */\n\tfocus() {\n\t\tif ( !this.document.isFocused ) {\n\t\t\tconst editable = this.document.selection.editableElement;\n\n\t\t\tif ( editable ) {\n\t\t\t\tthis.domConverter.focus( editable );\n\t\t\t\tthis.forceRender();\n\t\t\t} else {\n\t\t\t\t// Before focusing view document, selection should be placed inside one of the view's editables.\n\t\t\t\t// Normally its selection will be converted from model document (which have default selection), but\n\t\t\t\t// when using view document on its own, we need to manually place selection before focusing it.\n\t\t\t\t//\n\t\t\t\t// @if CK_DEBUG // console.warn( 'There is no selection in any editable to focus.' );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * The `change()` method is the primary way of changing the view. You should use it to modify any node in the view tree.\n\t * It makes sure that after all changes are made the view is rendered to the DOM (assuming that the view will be changed\n\t * inside the callback). It prevents situations when the DOM is updated when the view state is not yet correct. It allows\n\t * to nest calls one inside another and still performs a single rendering after all those changes are made.\n\t * It also returns the return value of its callback.\n\t *\n\t *\t\tconst text = view.change( writer => {\n\t *\t\t\tconst newText = writer.createText( 'foo' );\n\t *\t\t\twriter.insert( position1, newText );\n\t *\n\t *\t\t\tview.change( writer => {\n\t *\t\t\t\twriter.insert( position2, writer.createText( 'bar' ) );\n\t *\t\t\t} );\n\t *\n\t * \t\t\twriter.remove( range );\n\t *\n\t * \t\t\treturn newText;\n\t *\t\t} );\n\t *\n\t * When the outermost change block is done and rendering to the DOM is over the\n\t * {@link module:engine/view/view~View#event:render `View#render`} event is fired.\n\t *\n\t * This method throws a `applying-view-changes-on-rendering` error when\n\t * the change block is used after rendering to the DOM has started.\n\t *\n\t * @param {Function} callback Callback function which may modify the view.\n\t * @returns {*} Value returned by the callback.\n\t */\n\tchange( callback ) {\n\t\tif ( this.isRenderingInProgress || this._postFixersInProgress ) {\n\t\t\t/**\n\t\t\t * Thrown when there is an attempt to make changes to the view tree when it is in incorrect state. This may\n\t\t\t * cause some unexpected behaviour and inconsistency between the DOM and the view.\n\t\t\t * This may be caused by:\n\t\t\t *\n\t\t\t * * calling {@link #change} or {@link #forceRender} during rendering process,\n\t\t\t * * calling {@link #change} or {@link #forceRender} inside of\n\t\t\t *   {@link module:engine/view/document~Document#registerPostFixer post-fixer function}.\n\t\t\t *\n\t\t\t * @error cannot-change-view-tree\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'cannot-change-view-tree',\n\t\t\t\tthis\n\t\t\t);\n\t\t}\n\n\t\ttry {\n\t\t\t// Recursive call to view.change() method - execute listener immediately.\n\t\t\tif ( this._ongoingChange ) {\n\t\t\t\treturn callback( this._writer );\n\t\t\t}\n\n\t\t\t// This lock will assure that all recursive calls to view.change() will end up in same block - one \"render\"\n\t\t\t// event for all nested calls.\n\t\t\tthis._ongoingChange = true;\n\t\t\tconst callbackResult = callback( this._writer );\n\t\t\tthis._ongoingChange = false;\n\n\t\t\t// This lock is used by editing controller to render changes from outer most model.change() once. As plugins might call\n\t\t\t// view.change() inside model.change() block - this will ensures that postfixers and rendering are called once after all\n\t\t\t// changes. Also, we don't need to render anything if there're no changes since last rendering.\n\t\t\tif ( !this._renderingDisabled && this._hasChangedSinceTheLastRendering ) {\n\t\t\t\tthis._postFixersInProgress = true;\n\t\t\t\tthis.document._callPostFixers( this._writer );\n\t\t\t\tthis._postFixersInProgress = false;\n\n\t\t\t\tthis.fire( 'render' );\n\t\t\t}\n\n\t\t\treturn callbackResult;\n\t\t} catch ( err ) {\n\t\t\t// @if CK_DEBUG // throw err;\n\t\t\t/* istanbul ignore next */\n\t\t\tCKEditorError.rethrowUnexpectedError( err, this );\n\t\t}\n\t}\n\n\t/**\n\t * Forces rendering {@link module:engine/view/document~Document view document} to DOM. If any view changes are\n\t * currently in progress, rendering will start after all {@link #change change blocks} are processed.\n\t *\n\t * Note that this method is dedicated for special cases. All view changes should be wrapped in the {@link #change}\n\t * block and the view will automatically check whether it needs to render DOM or not.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `applying-view-changes-on-rendering` when\n\t * trying to re-render when rendering to DOM has already started.\n\t */\n\tforceRender() {\n\t\tthis._hasChangedSinceTheLastRendering = true;\n\t\tthis.change( () => {} );\n\t}\n\n\t/**\n\t * Destroys this instance. Makes sure that all observers are destroyed and listeners removed.\n\t */\n\tdestroy() {\n\t\tfor ( const observer of this._observers.values() ) {\n\t\t\tobserver.destroy();\n\t\t}\n\n\t\tthis.document.destroy();\n\n\t\tthis.stopListening();\n\t}\n\n\t/**\n\t * Creates position at the given location. The location can be specified as:\n\t *\n\t * * a {@link module:engine/view/position~Position position},\n\t * * parent element and offset (offset defaults to `0`),\n\t * * parent element and `'end'` (sets position at the end of that element),\n\t * * {@link module:engine/view/item~Item view item} and `'before'` or `'after'` (sets position before or after given view item).\n\t *\n\t * This method is a shortcut to other constructors such as:\n\t *\n\t * * {@link #createPositionBefore},\n\t * * {@link #createPositionAfter},\n\t *\n\t * @param {module:engine/view/item~Item|module:engine/model/position~Position} itemOrPosition\n\t * @param {Number|'end'|'before'|'after'} [offset] Offset or one of the flags. Used only when\n\t * first parameter is a {@link module:engine/view/item~Item view item}.\n\t */\n\tcreatePositionAt( itemOrPosition, offset ) {\n\t\treturn Position._createAt( itemOrPosition, offset );\n\t}\n\n\t/**\n\t * Creates a new position after given view item.\n\t *\n\t * @param {module:engine/view/item~Item} item View item after which the position should be located.\n\t * @returns {module:engine/view/position~Position}\n\t */\n\tcreatePositionAfter( item ) {\n\t\treturn Position._createAfter( item );\n\t}\n\n\t/**\n\t * Creates a new position before given view item.\n\t *\n\t * @param {module:engine/view/item~Item} item View item before which the position should be located.\n\t * @returns {module:engine/view/position~Position}\n\t */\n\tcreatePositionBefore( item ) {\n\t\treturn Position._createBefore( item );\n\t}\n\n\t/**\n\t * Creates a range spanning from `start` position to `end` position.\n\t *\n\t * **Note:** This factory method creates it's own {@link module:engine/view/position~Position} instances basing on passed values.\n\t *\n\t * @param {module:engine/view/position~Position} start Start position.\n\t * @param {module:engine/view/position~Position} [end] End position. If not set, range will be collapsed at `start` position.\n\t * @returns {module:engine/view/range~Range}\n\t */\n\tcreateRange( start, end ) {\n\t\treturn new Range( start, end );\n\t}\n\n\t/**\n\t * Creates a range that starts before given {@link module:engine/view/item~Item view item} and ends after it.\n\t *\n\t * @param {module:engine/view/item~Item} item\n\t * @returns {module:engine/view/range~Range}\n\t */\n\tcreateRangeOn( item ) {\n\t\treturn Range._createOn( item );\n\t}\n\n\t/**\n\t * Creates a range inside an {@link module:engine/view/element~Element element} which starts before the first child of\n\t * that element and ends after the last child of that element.\n\t *\n\t * @param {module:engine/view/element~Element} element Element which is a parent for the range.\n\t * @returns {module:engine/view/range~Range}\n\t */\n\tcreateRangeIn( element ) {\n\t\treturn Range._createIn( element );\n\t}\n\n\t/**\n\t Creates new {@link module:engine/view/selection~Selection} instance.\n\t *\n\t * \t\t// Creates empty selection without ranges.\n\t *\t\tconst selection = view.createSelection();\n\t *\n\t *\t\t// Creates selection at the given range.\n\t *\t\tconst range = view.createRange( start, end );\n\t *\t\tconst selection = view.createSelection( range );\n\t *\n\t *\t\t// Creates selection at the given ranges\n\t * \t\tconst ranges = [ view.createRange( start1, end2 ), view.createRange( star2, end2 ) ];\n\t *\t\tconst selection = view.createSelection( ranges );\n\t *\n\t *\t\t// Creates selection from the other selection.\n\t *\t\tconst otherSelection = view.createSelection();\n\t *\t\tconst selection = view.createSelection( otherSelection );\n\t *\n\t *\t\t// Creates selection from the document selection.\n\t *\t\tconst selection = view.createSelection( editor.editing.view.document.selection );\n\t *\n\t * \t\t// Creates selection at the given position.\n\t *\t\tconst position = view.createPositionFromPath( root, path );\n\t *\t\tconst selection = view.createSelection( position );\n\t *\n\t *\t\t// Creates collapsed selection at the position of given item and offset.\n\t *\t\tconst paragraph = view.createContainerElement( 'paragraph' );\n\t *\t\tconst selection = view.createSelection( paragraph, offset );\n\t *\n\t *\t\t// Creates a range inside an {@link module:engine/view/element~Element element} which starts before the\n\t *\t\t// first child of that element and ends after the last child of that element.\n\t *\t\tconst selection = view.createSelection( paragraph, 'in' );\n\t *\n\t *\t\t// Creates a range on an {@link module:engine/view/item~Item item} which starts before the item and ends\n\t *\t\t// just after the item.\n\t *\t\tconst selection = view.createSelection( paragraph, 'on' );\n\t *\n\t * `Selection`'s factory method allow passing additional options (`backward`, `fake` and `label`) as the last argument.\n\t *\n\t *\t\t// Creates backward selection.\n\t *\t\tconst selection = view.createSelection( range, { backward: true } );\n\t *\n\t * Fake selection does not render as browser native selection over selected elements and is hidden to the user.\n\t * This way, no native selection UI artifacts are displayed to the user and selection over elements can be\n\t * represented in other way, for example by applying proper CSS class.\n\t *\n\t * Additionally fake's selection label can be provided. It will be used to describe fake selection in DOM\n\t * (and be  properly handled by screen readers).\n\t *\n\t *\t\t// Creates fake selection with label.\n\t *\t\tconst selection = view.createSelection( range, { fake: true, label: 'foo' } );\n\t *\n\t * @param {module:engine/view/selection~Selectable} [selectable=null]\n\t * @param {Number|'before'|'end'|'after'|'on'|'in'} [placeOrOffset] Offset or place when selectable is an `Item`.\n\t * @param {Object} [options]\n\t * @param {Boolean} [options.backward] Sets this selection instance to be backward.\n\t * @param {Boolean} [options.fake] Sets this selection instance to be marked as `fake`.\n\t * @param {String} [options.label] Label for the fake selection.\n\t * @returns {module:engine/view/selection~Selection}\n\t */\n\tcreateSelection( selectable, placeOrOffset, options ) {\n\t\treturn new Selection( selectable, placeOrOffset, options );\n\t}\n\n\t/**\n\t * Disables or enables rendering. If the flag is set to `true` then the rendering will be disabled.\n\t * If the flag is set to `false` and if there was some change in the meantime, then the rendering action will be performed.\n\t *\n\t * @protected\n\t * @param {Boolean} flag A flag indicates whether the rendering should be disabled.\n\t */\n\t_disableRendering( flag ) {\n\t\tthis._renderingDisabled = flag;\n\n\t\tif ( flag == false ) {\n\t\t\t// Render when you stop blocking rendering.\n\t\t\tthis.change( () => {} );\n\t\t}\n\t}\n\n\t/**\n\t * Renders all changes. In order to avoid triggering the observers (e.g. mutations) all observers are disabled\n\t * before rendering and re-enabled after that.\n\t *\n\t * @private\n\t */\n\t_render() {\n\t\tthis.isRenderingInProgress = true;\n\t\tthis.disableObservers();\n\t\tthis._renderer.render();\n\t\tthis.enableObservers();\n\t\tthis.isRenderingInProgress = false;\n\t}\n\n\t/**\n\t * Fired after a topmost {@link module:engine/view/view~View#change change block} and all\n\t * {@link module:engine/view/document~Document#registerPostFixer post-fixers} are executed.\n\t *\n\t * Actual rendering is performed as a first listener on 'normal' priority.\n\t *\n\t *\t\tview.on( 'render', () => {\n\t *\t\t\t// Rendering to the DOM is complete.\n\t *\t\t} );\n\t *\n\t * This event is useful when you want to update interface elements after the rendering, e.g. position of the\n\t * balloon panel. If you wants to change view structure use\n\t * {@link module:engine/view/document~Document#registerPostFixer post-fixers}.\n\t *\n\t * @event module:engine/view/view~View#event:render\n\t */\n}\n\nmix( View, ObservableMixin );\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/conversion/mapper\n */\n\nimport ModelPosition from '../model/position';\nimport ModelRange from '../model/range';\n\nimport ViewPosition from '../view/position';\nimport ViewRange from '../view/range';\nimport ViewText from '../view/text';\n\nimport EmitterMixin from '@ckeditor/ckeditor5-utils/src/emittermixin';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\n\n/**\n * Maps elements, positions and markers between {@link module:engine/view/document~Document the view} and\n * {@link module:engine/model/model the model}.\n *\n * The instance of the Mapper used for the editing pipeline is available in\n * {@link module:engine/controller/editingcontroller~EditingController#mapper `editor.editing.mapper`}.\n *\n * Mapper uses bound elements to find corresponding elements and positions, so, to get proper results,\n * all model elements should be {@link module:engine/conversion/mapper~Mapper#bindElements bound}.\n *\n * To map complex model to/from view relations, you may provide custom callbacks for\n * {@link module:engine/conversion/mapper~Mapper#event:modelToViewPosition modelToViewPosition event} and\n * {@link module:engine/conversion/mapper~Mapper#event:viewToModelPosition viewToModelPosition event} that are fired whenever\n * a position mapping request occurs.\n * Those events are fired by {@link module:engine/conversion/mapper~Mapper#toViewPosition toViewPosition}\n * and {@link module:engine/conversion/mapper~Mapper#toModelPosition toModelPosition} methods. `Mapper` adds it's own default callbacks\n * with `'lowest'` priority. To override default `Mapper` mapping, add custom callback with higher priority and\n * stop the event.\n */\nexport default class Mapper {\n\t/**\n\t * Creates an instance of the mapper.\n\t */\n\tconstructor() {\n\t\t/**\n\t\t * Model element to view element mapping.\n\t\t *\n\t\t * @private\n\t\t * @member {WeakMap}\n\t\t */\n\t\tthis._modelToViewMapping = new WeakMap();\n\n\t\t/**\n\t\t * View element to model element mapping.\n\t\t *\n\t\t * @private\n\t\t * @member {WeakMap}\n\t\t */\n\t\tthis._viewToModelMapping = new WeakMap();\n\n\t\t/**\n\t\t * A map containing callbacks between view element names and functions evaluating length of view elements\n\t\t * in model.\n\t\t *\n\t\t * @private\n\t\t * @member {Map}\n\t\t */\n\t\tthis._viewToModelLengthCallbacks = new Map();\n\n\t\t/**\n\t\t * Model marker name to view elements mapping.\n\t\t *\n\t\t * Keys are `String`s while values are `Set`s with {@link module:engine/view/element~Element view elements}.\n\t\t * One marker (name) can be mapped to multiple elements.\n\t\t *\n\t\t * @private\n\t\t * @member {Map}\n\t\t */\n\t\tthis._markerNameToElements = new Map();\n\n\t\t/**\n\t\t * View element to model marker names mapping.\n\t\t *\n\t\t * This is reverse to {@link ~Mapper#_markerNameToElements} map.\n\t\t *\n\t\t * @private\n\t\t * @member {Map}\n\t\t */\n\t\tthis._elementToMarkerNames = new Map();\n\n\t\t/**\n\t\t * Stores marker names of markers which has changed due to unbinding a view element (so it is assumed that the view element\n\t\t * has been removed, moved or renamed).\n\t\t *\n\t\t * @private\n\t\t * @member {Set.<module:engine/model/markercollection~Marker>}\n\t\t */\n\t\tthis._unboundMarkerNames = new Set();\n\n\t\t// Default mapper algorithm for mapping model position to view position.\n\t\tthis.on( 'modelToViewPosition', ( evt, data ) => {\n\t\t\tif ( data.viewPosition ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst viewContainer = this._modelToViewMapping.get( data.modelPosition.parent );\n\n\t\t\tdata.viewPosition = this.findPositionIn( viewContainer, data.modelPosition.offset );\n\t\t}, { priority: 'low' } );\n\n\t\t// Default mapper algorithm for mapping view position to model position.\n\t\tthis.on( 'viewToModelPosition', ( evt, data ) => {\n\t\t\tif ( data.modelPosition ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst viewBlock = this.findMappedViewAncestor( data.viewPosition );\n\t\t\tconst modelParent = this._viewToModelMapping.get( viewBlock );\n\t\t\tconst modelOffset = this._toModelOffset( data.viewPosition.parent, data.viewPosition.offset, viewBlock );\n\n\t\t\tdata.modelPosition = ModelPosition._createAt( modelParent, modelOffset );\n\t\t}, { priority: 'low' } );\n\t}\n\n\t/**\n\t * Marks model and view elements as corresponding. Corresponding elements can be retrieved by using\n\t * the {@link module:engine/conversion/mapper~Mapper#toModelElement toModelElement} and\n\t * {@link module:engine/conversion/mapper~Mapper#toViewElement toViewElement} methods.\n\t * The information that elements are bound is also used to translate positions.\n\t *\n\t * @param {module:engine/model/element~Element} modelElement Model element.\n\t * @param {module:engine/view/element~Element} viewElement View element.\n\t */\n\tbindElements( modelElement, viewElement ) {\n\t\tthis._modelToViewMapping.set( modelElement, viewElement );\n\t\tthis._viewToModelMapping.set( viewElement, modelElement );\n\t}\n\n\t/**\n\t * Unbinds given {@link module:engine/view/element~Element view element} from the map.\n\t *\n\t * **Note:** view-to-model binding will be removed, if it existed. However, corresponding model-to-view binding\n\t * will be removed only if model element is still bound to passed `viewElement`.\n\t *\n\t * This behavior lets for re-binding model element to another view element without fear of losing the new binding\n\t * when the previously bound view element is unbound.\n\t *\n\t * @param {module:engine/view/element~Element} viewElement View element to unbind.\n\t */\n\tunbindViewElement( viewElement ) {\n\t\tconst modelElement = this.toModelElement( viewElement );\n\n\t\tthis._viewToModelMapping.delete( viewElement );\n\n\t\tif ( this._elementToMarkerNames.has( viewElement ) ) {\n\t\t\tfor ( const markerName of this._elementToMarkerNames.get( viewElement ) ) {\n\t\t\t\tthis._unboundMarkerNames.add( markerName );\n\t\t\t}\n\t\t}\n\n\t\tif ( this._modelToViewMapping.get( modelElement ) == viewElement ) {\n\t\t\tthis._modelToViewMapping.delete( modelElement );\n\t\t}\n\t}\n\n\t/**\n\t * Unbinds given {@link module:engine/model/element~Element model element} from the map.\n\t *\n\t * **Note:** model-to-view binding will be removed, if it existed. However, corresponding view-to-model binding\n\t * will be removed only if view element is still bound to passed `modelElement`.\n\t *\n\t * This behavior lets for re-binding view element to another model element without fear of losing the new binding\n\t * when the previously bound model element is unbound.\n\t *\n\t * @param {module:engine/model/element~Element} modelElement Model element to unbind.\n\t */\n\tunbindModelElement( modelElement ) {\n\t\tconst viewElement = this.toViewElement( modelElement );\n\n\t\tthis._modelToViewMapping.delete( modelElement );\n\n\t\tif ( this._viewToModelMapping.get( viewElement ) == modelElement ) {\n\t\t\tthis._viewToModelMapping.delete( viewElement );\n\t\t}\n\t}\n\n\t/**\n\t * Binds given marker name with given {@link module:engine/view/element~Element view element}. The element\n\t * will be added to the current set of elements bound with given marker name.\n\t *\n\t * @param {module:engine/view/element~Element} element Element to bind.\n\t * @param {String} name Marker name.\n\t */\n\tbindElementToMarker( element, name ) {\n\t\tconst elements = this._markerNameToElements.get( name ) || new Set();\n\t\telements.add( element );\n\n\t\tconst names = this._elementToMarkerNames.get( element ) || new Set();\n\t\tnames.add( name );\n\n\t\tthis._markerNameToElements.set( name, elements );\n\t\tthis._elementToMarkerNames.set( element, names );\n\t}\n\n\t/**\n\t * Unbinds an element from given marker name.\n\t *\n\t * @param {module:engine/view/element~Element} element Element to unbind.\n\t * @param {String} name Marker name.\n\t */\n\tunbindElementFromMarkerName( element, name ) {\n\t\tconst nameToElements = this._markerNameToElements.get( name );\n\n\t\tif ( nameToElements ) {\n\t\t\tnameToElements.delete( element );\n\n\t\t\tif ( nameToElements.size == 0 ) {\n\t\t\t\tthis._markerNameToElements.delete( name );\n\t\t\t}\n\t\t}\n\n\t\tconst elementToNames = this._elementToMarkerNames.get( element );\n\n\t\tif ( elementToNames ) {\n\t\t\telementToNames.delete( name );\n\n\t\t\tif ( elementToNames.size == 0 ) {\n\t\t\t\tthis._elementToMarkerNames.delete( element );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Returns all marker names of markers which has changed due to unbinding a view element (so it is assumed that the view element\n\t * has been removed, moved or renamed) since the last flush. After returning, the marker names list is cleared.\n\t *\n\t * @returns {Array.<String>}\n\t */\n\tflushUnboundMarkerNames() {\n\t\tconst markerNames = Array.from( this._unboundMarkerNames );\n\n\t\tthis._unboundMarkerNames.clear();\n\n\t\treturn markerNames;\n\t}\n\n\t/**\n\t * Removes all model to view and view to model bindings.\n\t */\n\tclearBindings() {\n\t\tthis._modelToViewMapping = new WeakMap();\n\t\tthis._viewToModelMapping = new WeakMap();\n\t\tthis._markerNameToElements = new Map();\n\t\tthis._elementToMarkerNames = new Map();\n\t\tthis._unboundMarkerNames = new Set();\n\t}\n\n\t/**\n\t * Gets the corresponding model element.\n\t *\n\t * **Note:** {@link module:engine/view/uielement~UIElement} does not have corresponding element in model.\n\t *\n\t * @param {module:engine/view/element~Element} viewElement View element.\n\t * @returns {module:engine/model/element~Element|undefined} Corresponding model element or `undefined` if not found.\n\t */\n\ttoModelElement( viewElement ) {\n\t\treturn this._viewToModelMapping.get( viewElement );\n\t}\n\n\t/**\n\t * Gets the corresponding view element.\n\t *\n\t * @param {module:engine/model/element~Element} modelElement Model element.\n\t * @returns {module:engine/view/element~Element|undefined} Corresponding view element or `undefined` if not found.\n\t */\n\ttoViewElement( modelElement ) {\n\t\treturn this._modelToViewMapping.get( modelElement );\n\t}\n\n\t/**\n\t * Gets the corresponding model range.\n\t *\n\t * @param {module:engine/view/range~Range} viewRange View range.\n\t * @returns {module:engine/model/range~Range} Corresponding model range.\n\t */\n\ttoModelRange( viewRange ) {\n\t\treturn new ModelRange( this.toModelPosition( viewRange.start ), this.toModelPosition( viewRange.end ) );\n\t}\n\n\t/**\n\t * Gets the corresponding view range.\n\t *\n\t * @param {module:engine/model/range~Range} modelRange Model range.\n\t * @returns {module:engine/view/range~Range} Corresponding view range.\n\t */\n\ttoViewRange( modelRange ) {\n\t\treturn new ViewRange( this.toViewPosition( modelRange.start ), this.toViewPosition( modelRange.end ) );\n\t}\n\n\t/**\n\t * Gets the corresponding model position.\n\t *\n\t * @fires viewToModelPosition\n\t * @param {module:engine/view/position~Position} viewPosition View position.\n\t * @returns {module:engine/model/position~Position} Corresponding model position.\n\t */\n\ttoModelPosition( viewPosition ) {\n\t\tconst data = {\n\t\t\tviewPosition,\n\t\t\tmapper: this\n\t\t};\n\n\t\tthis.fire( 'viewToModelPosition', data );\n\n\t\treturn data.modelPosition;\n\t}\n\n\t/**\n\t * Gets the corresponding view position.\n\t *\n\t * @fires modelToViewPosition\n\t * @param {module:engine/model/position~Position} modelPosition Model position.\n\t * @param {Object} [options] Additional options for position mapping process.\n\t * @param {Boolean} [options.isPhantom=false] Should be set to `true` if the model position to map is pointing to a place\n\t * in model tree which no longer exists. For example, it could be an end of a removed model range.\n\t * @returns {module:engine/view/position~Position} Corresponding view position.\n\t */\n\ttoViewPosition( modelPosition, options = { isPhantom: false } ) {\n\t\tconst data = {\n\t\t\tmodelPosition,\n\t\t\tmapper: this,\n\t\t\tisPhantom: options.isPhantom\n\t\t};\n\n\t\tthis.fire( 'modelToViewPosition', data );\n\n\t\treturn data.viewPosition;\n\t}\n\n\t/**\n\t * Gets all view elements bound to the given marker name.\n\t *\n\t * @param {String} name Marker name.\n\t * @returns {Set.<module:engine/view/element~Element>|null} View elements bound with given marker name or `null`\n\t * if no elements are bound to given marker name.\n\t */\n\tmarkerNameToElements( name ) {\n\t\tconst boundElements = this._markerNameToElements.get( name );\n\n\t\tif ( !boundElements ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst elements = new Set();\n\n\t\tfor ( const element of boundElements ) {\n\t\t\tif ( element.is( 'attributeElement' ) ) {\n\t\t\t\tfor ( const clone of element.getElementsWithSameId() ) {\n\t\t\t\t\telements.add( clone );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\telements.add( element );\n\t\t\t}\n\t\t}\n\n\t\treturn elements;\n\t}\n\n\t/**\n\t * Registers a callback that evaluates the length in the model of a view element with given name.\n\t *\n\t * The callback is fired with one argument, which is a view element instance. The callback is expected to return\n\t * a number representing the length of view element in model.\n\t *\n\t *\t\t// List item in view may contain nested list, which have other list items. In model though,\n\t *\t\t// the lists are represented by flat structure. Because of those differences, length of list view element\n\t *\t\t// may be greater than one. In the callback it's checked how many nested list items are in evaluated list item.\n\t *\n\t *\t\tfunction getViewListItemLength( element ) {\n\t *\t\t\tlet length = 1;\n\t *\n\t *\t\t\tfor ( let child of element.getChildren() ) {\n\t *\t\t\t\tif ( child.name == 'ul' || child.name == 'ol' ) {\n\t *\t\t\t\t\tfor ( let item of child.getChildren() ) {\n\t *\t\t\t\t\t\tlength += getViewListItemLength( item );\n\t *\t\t\t\t\t}\n\t *\t\t\t\t}\n\t *\t\t\t}\n\t *\n\t *\t\t\treturn length;\n\t *\t\t}\n\t *\n\t *\t\tmapper.registerViewToModelLength( 'li', getViewListItemLength );\n\t *\n\t * @param {String} viewElementName Name of view element for which callback is registered.\n\t * @param {Function} lengthCallback Function return a length of view element instance in model.\n\t */\n\tregisterViewToModelLength( viewElementName, lengthCallback ) {\n\t\tthis._viewToModelLengthCallbacks.set( viewElementName, lengthCallback );\n\t}\n\n\t/**\n\t * For given `viewPosition`, finds and returns the closest ancestor of this position that has a mapping to\n\t * the model.\n\t *\n\t * @param {module:engine/view/position~Position} viewPosition Position for which mapped ancestor should be found.\n\t * @returns {module:engine/view/element~Element}\n\t */\n\tfindMappedViewAncestor( viewPosition ) {\n\t\tlet parent = viewPosition.parent;\n\n\t\twhile ( !this._viewToModelMapping.has( parent ) ) {\n\t\t\tparent = parent.parent;\n\t\t}\n\n\t\treturn parent;\n\t}\n\n\t/**\n\t * Calculates model offset based on the view position and the block element.\n\t *\n\t * Example:\n\t *\n\t *\t\t<p>foo<b>ba|r</b></p> // _toModelOffset( b, 2, p ) -> 5\n\t *\n\t * Is a sum of:\n\t *\n\t *\t\t<p>foo|<b>bar</b></p> // _toModelOffset( p, 3, p ) -> 3\n\t *\t\t<p>foo<b>ba|r</b></p> // _toModelOffset( b, 2, b ) -> 2\n\t *\n\t * @private\n\t * @param {module:engine/view/element~Element} viewParent Position parent.\n\t * @param {Number} viewOffset Position offset.\n\t * @param {module:engine/view/element~Element} viewBlock Block used as a base to calculate offset.\n\t * @returns {Number} Offset in the model.\n\t */\n\t_toModelOffset( viewParent, viewOffset, viewBlock ) {\n\t\tif ( viewBlock != viewParent ) {\n\t\t\t// See example.\n\t\t\tconst offsetToParentStart = this._toModelOffset( viewParent.parent, viewParent.index, viewBlock );\n\t\t\tconst offsetInParent = this._toModelOffset( viewParent, viewOffset, viewParent );\n\n\t\t\treturn offsetToParentStart + offsetInParent;\n\t\t}\n\n\t\t// viewBlock == viewParent, so we need to calculate the offset in the parent element.\n\n\t\t// If the position is a text it is simple (\"ba|r\" -> 2).\n\t\tif ( viewParent.is( '$text' ) ) {\n\t\t\treturn viewOffset;\n\t\t}\n\n\t\t// If the position is in an element we need to sum lengths of siblings ( <b> bar </b> foo | -> 3 + 3 = 6 ).\n\t\tlet modelOffset = 0;\n\n\t\tfor ( let i = 0; i < viewOffset; i++ ) {\n\t\t\tmodelOffset += this.getModelLength( viewParent.getChild( i ) );\n\t\t}\n\n\t\treturn modelOffset;\n\t}\n\n\t/**\n\t * Gets the length of the view element in the model.\n\t *\n\t * The length is calculated as follows:\n\t * * if {@link #registerViewToModelLength length mapping callback} is provided for given `viewNode` it is used to\n\t * evaluate model length (`viewNode` is used as first and only parameter passed to the callback),\n\t * * length of a {@link module:engine/view/text~Text text node} is equal to the length of it's\n\t * {@link module:engine/view/text~Text#data data},\n\t * * length of a {@link module:engine/view/uielement~UIElement ui element} is equal to 0,\n\t * * length of a mapped {@link module:engine/view/element~Element element} is equal to 1,\n\t * * length of a not-mapped {@link module:engine/view/element~Element element} is equal to the length of it's children.\n\t *\n\t * Examples:\n\t *\n\t *\t\tfoo                          -> 3 // Text length is equal to it's data length.\n\t *\t\t<p>foo</p>                   -> 1 // Length of an element which is mapped is by default equal to 1.\n\t *\t\t<b>foo</b>                   -> 3 // Length of an element which is not mapped is a length of its children.\n\t *\t\t<div><p>x</p><p>y</p></div>  -> 2 // Assuming that <div> is not mapped and <p> are mapped.\n\t *\n\t * @param {module:engine/view/element~Element} viewNode View node.\n\t * @returns {Number} Length of the node in the tree model.\n\t */\n\tgetModelLength( viewNode ) {\n\t\tif ( this._viewToModelLengthCallbacks.get( viewNode.name ) ) {\n\t\t\tconst callback = this._viewToModelLengthCallbacks.get( viewNode.name );\n\n\t\t\treturn callback( viewNode );\n\t\t} else if ( this._viewToModelMapping.has( viewNode ) ) {\n\t\t\treturn 1;\n\t\t} else if ( viewNode.is( '$text' ) ) {\n\t\t\treturn viewNode.data.length;\n\t\t} else if ( viewNode.is( 'uiElement' ) ) {\n\t\t\treturn 0;\n\t\t} else {\n\t\t\tlet len = 0;\n\n\t\t\tfor ( const child of viewNode.getChildren() ) {\n\t\t\t\tlen += this.getModelLength( child );\n\t\t\t}\n\n\t\t\treturn len;\n\t\t}\n\t}\n\n\t/**\n\t * Finds the position in the view node (or its children) with the expected model offset.\n\t *\n\t * Example:\n\t *\n\t *\t\t<p>fo<b>bar</b>bom</p> -> expected offset: 4\n\t *\n\t *\t\tfindPositionIn( p, 4 ):\n\t *\t\t<p>|fo<b>bar</b>bom</p> -> expected offset: 4, actual offset: 0\n\t *\t\t<p>fo|<b>bar</b>bom</p> -> expected offset: 4, actual offset: 2\n\t *\t\t<p>fo<b>bar</b>|bom</p> -> expected offset: 4, actual offset: 5 -> we are too far\n\t *\n\t *\t\tfindPositionIn( b, 4 - ( 5 - 3 ) ):\n\t *\t\t<p>fo<b>|bar</b>bom</p> -> expected offset: 2, actual offset: 0\n\t *\t\t<p>fo<b>bar|</b>bom</p> -> expected offset: 2, actual offset: 3 -> we are too far\n\t *\n\t *\t\tfindPositionIn( bar, 2 - ( 3 - 3 ) ):\n\t *\t\tWe are in the text node so we can simple find the offset.\n\t *\t\t<p>fo<b>ba|r</b>bom</p> -> expected offset: 2, actual offset: 2 -> position found\n\t *\n\t * @param {module:engine/view/element~Element} viewParent Tree view element in which we are looking for the position.\n\t * @param {Number} expectedOffset Expected offset.\n\t * @returns {module:engine/view/position~Position} Found position.\n\t */\n\tfindPositionIn( viewParent, expectedOffset ) {\n\t\t// Last scanned view node.\n\t\tlet viewNode;\n\t\t// Length of the last scanned view node.\n\t\tlet lastLength = 0;\n\n\t\tlet modelOffset = 0;\n\t\tlet viewOffset = 0;\n\n\t\t// In the text node it is simple: offset in the model equals offset in the text.\n\t\tif ( viewParent.is( '$text' ) ) {\n\t\t\treturn new ViewPosition( viewParent, expectedOffset );\n\t\t}\n\n\t\t// In other cases we add lengths of child nodes to find the proper offset.\n\n\t\t// If it is smaller we add the length.\n\t\twhile ( modelOffset < expectedOffset ) {\n\t\t\tviewNode = viewParent.getChild( viewOffset );\n\t\t\tlastLength = this.getModelLength( viewNode );\n\t\t\tmodelOffset += lastLength;\n\t\t\tviewOffset++;\n\t\t}\n\n\t\t// If it equals we found the position.\n\t\tif ( modelOffset == expectedOffset ) {\n\t\t\treturn this._moveViewPositionToTextNode( new ViewPosition( viewParent, viewOffset ) );\n\t\t}\n\t\t// If it is higher we need to enter last child.\n\t\telse {\n\t\t\t// ( modelOffset - lastLength ) is the offset to the child we enter,\n\t\t\t// so we subtract it from the expected offset to fine the offset in the child.\n\t\t\treturn this.findPositionIn( viewNode, expectedOffset - ( modelOffset - lastLength ) );\n\t\t}\n\t}\n\n\t/**\n\t * Because we prefer positions in text nodes over positions next to text node moves view position to the text node\n\t * if it was next to it.\n\t *\n\t *\t\t<p>[]<b>foo</b></p> -> <p>[]<b>foo</b></p> // do not touch if position is not directly next to text\n\t *\t\t<p>foo[]<b>foo</b></p> -> <p>foo{}<b>foo</b></p> // move to text node\n\t *\t\t<p><b>[]foo</b></p> -> <p><b>{}foo</b></p> // move to text node\n\t *\n\t * @private\n\t * @param {module:engine/view/position~Position} viewPosition Position potentially next to text node.\n\t * @returns {module:engine/view/position~Position} Position in text node if possible.\n\t */\n\t_moveViewPositionToTextNode( viewPosition ) {\n\t\t// If the position is just after text node, put it at the end of that text node.\n\t\t// If the position is just before text node, put it at the beginning of that text node.\n\t\tconst nodeBefore = viewPosition.nodeBefore;\n\t\tconst nodeAfter = viewPosition.nodeAfter;\n\n\t\tif ( nodeBefore instanceof ViewText ) {\n\t\t\treturn new ViewPosition( nodeBefore, nodeBefore.data.length );\n\t\t} else if ( nodeAfter instanceof ViewText ) {\n\t\t\treturn new ViewPosition( nodeAfter, 0 );\n\t\t}\n\n\t\t// Otherwise, just return the given position.\n\t\treturn viewPosition;\n\t}\n\n\t/**\n\t * Fired for each model-to-view position mapping request. The purpose of this event is to enable custom model-to-view position\n\t * mapping. Callbacks added to this event take {@link module:engine/model/position~Position model position} and are expected to\n\t * calculate {@link module:engine/view/position~Position view position}. Calculated view position should be added as `viewPosition`\n\t * value in `data` object that is passed as one of parameters to the event callback.\n\t *\n\t * \t\t// Assume that \"captionedImage\" model element is converted to <img> and following <span> elements in view,\n\t * \t\t// and the model element is bound to <img> element. Force mapping model positions inside \"captionedImage\" to that\n\t * \t\t// <span> element.\n\t *\t\tmapper.on( 'modelToViewPosition', ( evt, data ) => {\n\t *\t\t\tconst positionParent = modelPosition.parent;\n\t *\n\t *\t\t\tif ( positionParent.name == 'captionedImage' ) {\n\t *\t\t\t\tconst viewImg = data.mapper.toViewElement( positionParent );\n\t *\t\t\t\tconst viewCaption = viewImg.nextSibling; // The <span> element.\n\t *\n\t *\t\t\t\tdata.viewPosition = new ViewPosition( viewCaption, modelPosition.offset );\n\t *\n\t *\t\t\t\t// Stop the event if other callbacks should not modify calculated value.\n\t *\t\t\t\tevt.stop();\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t * **Note:** keep in mind that sometimes a \"phantom\" model position is being converted. \"Phantom\" model position is\n\t * a position that points to a non-existing place in model. Such position might still be valid for conversion, though\n\t * (it would point to a correct place in view when converted). One example of such situation is when a range is\n\t * removed from model, there may be a need to map the range's end (which is no longer valid model position). To\n\t * handle such situation, check `data.isPhantom` flag:\n\t *\n\t * \t\t// Assume that there is \"customElement\" model element and whenever position is before it, we want to move it\n\t * \t\t// to the inside of the view element bound to \"customElement\".\n\t *\t\tmapper.on( 'modelToViewPosition', ( evt, data ) => {\n\t *\t\t\tif ( data.isPhantom ) {\n\t *\t\t\t\treturn;\n\t *\t\t\t}\n\t *\n\t *\t\t\t// Below line might crash for phantom position that does not exist in model.\n\t *\t\t\tconst sibling = data.modelPosition.nodeBefore;\n\t *\n\t *\t\t\t// Check if this is the element we are interested in.\n\t *\t\t\tif ( !sibling.is( 'element', 'customElement' ) ) {\n\t *\t\t\t\treturn;\n\t *\t\t\t}\n\t *\n\t *\t\t\tconst viewElement = data.mapper.toViewElement( sibling );\n\t *\n\t *\t\t\tdata.viewPosition = new ViewPosition( sibling, 0 );\n\t *\n\t *\t\t\tevt.stop();\n\t *\t\t} );\n\t *\n\t * **Note:** default mapping callback is provided with `low` priority setting and does not cancel the event, so it is possible to\n\t * attach a custom callback after default callback and also use `data.viewPosition` calculated by default callback\n\t * (for example to fix it).\n\t *\n\t * **Note:** default mapping callback will not fire if `data.viewPosition` is already set.\n\t *\n\t * **Note:** these callbacks are called **very often**. For efficiency reasons, it is advised to use them only when position\n\t * mapping between given model and view elements is unsolvable using just elements mapping and default algorithm. Also,\n\t * the condition that checks if special case scenario happened should be as simple as possible.\n\t *\n\t * @event modelToViewPosition\n\t * @param {Object} data Data pipeline object that can store and pass data between callbacks. The callback should add\n\t * `viewPosition` value to that object with calculated {@link module:engine/view/position~Position view position}.\n\t * @param {module:engine/conversion/mapper~Mapper} data.mapper Mapper instance that fired the event.\n\t */\n\n\t/**\n\t * Fired for each view-to-model position mapping request. See {@link module:engine/conversion/mapper~Mapper#event:modelToViewPosition}.\n\t *\n\t * \t\t// See example in `modelToViewPosition` event description.\n\t * \t\t// This custom mapping will map positions from <span> element next to <img> to the \"captionedImage\" element.\n\t *\t\tmapper.on( 'viewToModelPosition', ( evt, data ) => {\n\t *\t\t\tconst positionParent = viewPosition.parent;\n\t *\n\t *\t\t\tif ( positionParent.hasClass( 'image-caption' ) ) {\n\t *\t\t\t\tconst viewImg = positionParent.previousSibling;\n\t *\t\t\t\tconst modelImg = data.mapper.toModelElement( viewImg );\n\t *\n\t *\t\t\t\tdata.modelPosition = new ModelPosition( modelImg, viewPosition.offset );\n\t *\t\t\t\tevt.stop();\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t * **Note:** default mapping callback is provided with `low` priority setting and does not cancel the event, so it is possible to\n\t * attach a custom callback after default callback and also use `data.modelPosition` calculated by default callback\n\t * (for example to fix it).\n\t *\n\t * **Note:** default mapping callback will not fire if `data.modelPosition` is already set.\n\t *\n\t * **Note:** these callbacks are called **very often**. For efficiency reasons, it is advised to use them only when position\n\t * mapping between given model and view elements is unsolvable using just elements mapping and default algorithm. Also,\n\t * the condition that checks if special case scenario happened should be as simple as possible.\n\t *\n\t * @event viewToModelPosition\n\t * @param {Object} data Data pipeline object that can store and pass data between callbacks. The callback should add\n\t * `modelPosition` value to that object with calculated {@link module:engine/model/position~Position model position}.\n\t * @param {module:engine/conversion/mapper~Mapper} data.mapper Mapper instance that fired the event.\n\t */\n}\n\nmix( Mapper, EmitterMixin );\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/conversion/modelconsumable\n */\n\nimport TextProxy from '../model/textproxy';\n\n/**\n * Manages a list of consumable values for {@link module:engine/model/item~Item model items}.\n *\n * Consumables are various aspects of the model. A model item can be broken down into singular properties that might be\n * taken into consideration when converting that item.\n *\n * `ModelConsumable` is used by {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher} while analyzing changed\n * parts of {@link module:engine/model/document~Document the document}. The added / changed / removed model items are broken down\n * into singular properties (the item itself and it's attributes). All those parts are saved in `ModelConsumable`. Then,\n * during conversion, when given part of model item is converted (i.e. the view element has been inserted into the view,\n * but without attributes), consumable value is removed from `ModelConsumable`.\n *\n * For model items, `ModelConsumable` stores consumable values of one of following types: `insert`, `addattribute:<attributeKey>`,\n * `changeattributes:<attributeKey>`, `removeattributes:<attributeKey>`.\n *\n * In most cases, it is enough to let {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher}\n * gather consumable values, so there is no need to use\n * {@link module:engine/conversion/modelconsumable~ModelConsumable#add add method} directly.\n * However, it is important to understand how consumable values can be\n * {@link module:engine/conversion/modelconsumable~ModelConsumable#consume consumed}.\n * See {@link module:engine/conversion/downcasthelpers default downcast converters} for more information.\n *\n * Keep in mind, that one conversion event may have multiple callbacks (converters) attached to it. Each of those is\n * able to convert one or more parts of the model. However, when one of those callbacks actually converts\n * something, other should not, because they would duplicate the results. Using `ModelConsumable` helps avoiding\n * this situation, because callbacks should only convert those values, which were not yet consumed from `ModelConsumable`.\n *\n * Consuming multiple values in a single callback:\n *\n *\t\t// Converter for custom `image` element that might have a `caption` element inside which changes\n *\t\t// how the image is displayed in the view:\n *\t\t//\n *\t\t// Model:\n *\t\t//\n *\t\t// [image]\n *\t\t//   └─ [caption]\n *\t\t//       └─ foo\n *\t\t//\n *\t\t// View:\n *\t\t//\n *\t\t// <figure>\n *\t\t//   ├─ <img />\n *\t\t//   └─ <caption>\n *\t\t//       └─ foo\n *\t\tmodelConversionDispatcher.on( 'insert:image', ( evt, data, conversionApi ) => {\n *\t\t\t// First, consume the `image` element.\n *\t\t\tconversionApi.consumable.consume( data.item, 'insert' );\n *\n *\t\t\t// Just create normal image element for the view.\n *\t\t\t// Maybe it will be \"decorated\" later.\n *\t\t\tconst viewImage = new ViewElement( 'img' );\n *\t\t\tconst insertPosition = conversionApi.mapper.toViewPosition( data.range.start );\n *\t\t\tconst viewWriter = conversionApi.writer;\n *\n *\t\t\t// Check if the `image` element has children.\n *\t\t\tif ( data.item.childCount > 0 ) {\n *\t\t\t\tconst modelCaption = data.item.getChild( 0 );\n *\n *\t\t\t\t// `modelCaption` insertion change is consumed from consumable values.\n *\t\t\t\t// It will not be converted by other converters, but it's children (probably some text) will be.\n *\t\t\t\t// Through mapping, converters for text will know where to insert contents of `modelCaption`.\n *\t\t\t\tif ( conversionApi.consumable.consume( modelCaption, 'insert' ) ) {\n *\t\t\t\t\tconst viewCaption = new ViewElement( 'figcaption' );\n *\n *\t\t\t\t\tconst viewImageHolder = new ViewElement( 'figure', null, [ viewImage, viewCaption ] );\n *\n *\t\t\t\t\tconversionApi.mapper.bindElements( modelCaption, viewCaption );\n *\t\t\t\t\tconversionApi.mapper.bindElements( data.item, viewImageHolder );\n *\t\t\t\t\tviewWriter.insert( insertPosition, viewImageHolder );\n *\t\t\t\t}\n *\t\t\t} else {\n *\t\t\t\tconversionApi.mapper.bindElements( data.item, viewImage );\n *\t\t\t\tviewWriter.insert( insertPosition, viewImage );\n *\t\t\t}\n *\n *\t\t\tevt.stop();\n *\t\t} );\n */\nexport default class ModelConsumable {\n\t/**\n\t * Creates an empty consumables list.\n\t */\n\tconstructor() {\n\t\t/**\n\t\t * Contains list of consumable values.\n\t\t *\n\t\t * @private\n\t\t * @member {Map} module:engine/conversion/modelconsumable~ModelConsumable#_consumable\n\t\t */\n\t\tthis._consumable = new Map();\n\n\t\t/**\n\t\t * For each {@link module:engine/model/textproxy~TextProxy} added to `ModelConsumable`, this registry holds parent\n\t\t * of that `TextProxy` and start and end indices of that `TextProxy`. This allows identification of `TextProxy`\n\t\t * instances that points to the same part of the model but are different instances. Each distinct `TextProxy`\n\t\t * is given unique `Symbol` which is then registered as consumable. This process is transparent for `ModelConsumable`\n\t\t * API user because whenever `TextProxy` is added, tested, consumed or reverted, internal mechanisms of\n\t\t * `ModelConsumable` translates `TextProxy` to that unique `Symbol`.\n\t\t *\n\t\t * @private\n\t\t * @member {Map} module:engine/conversion/modelconsumable~ModelConsumable#_textProxyRegistry\n\t\t */\n\t\tthis._textProxyRegistry = new Map();\n\t}\n\n\t/**\n\t * Adds a consumable value to the consumables list and links it with given model item.\n\t *\n\t *\t\tmodelConsumable.add( modelElement, 'insert' ); // Add `modelElement` insertion change to consumable values.\n\t *\t\tmodelConsumable.add( modelElement, 'addAttribute:bold' ); // Add `bold` attribute insertion on `modelElement` change.\n\t *\t\tmodelConsumable.add( modelElement, 'removeAttribute:bold' ); // Add `bold` attribute removal on `modelElement` change.\n\t *\t\tmodelConsumable.add( modelSelection, 'selection' ); // Add `modelSelection` to consumable values.\n\t *\t\tmodelConsumable.add( modelRange, 'range' ); // Add `modelRange` to consumable values.\n\t *\n\t * @param {module:engine/model/item~Item|module:engine/model/selection~Selection|module:engine/model/range~Range} item\n\t * Model item, range or selection that has the consumable.\n\t * @param {String} type Consumable type. Will be normalized to a proper form, that is either `<word>` or `<part>:<part>`.\n\t * Second colon and everything after will be cut. Passing event name is a safe and good practice.\n\t */\n\tadd( item, type ) {\n\t\ttype = _normalizeConsumableType( type );\n\n\t\tif ( item instanceof TextProxy ) {\n\t\t\titem = this._getSymbolForTextProxy( item );\n\t\t}\n\n\t\tif ( !this._consumable.has( item ) ) {\n\t\t\tthis._consumable.set( item, new Map() );\n\t\t}\n\n\t\tthis._consumable.get( item ).set( type, true );\n\t}\n\n\t/**\n\t * Removes given consumable value from given model item.\n\t *\n\t *\t\tmodelConsumable.consume( modelElement, 'insert' ); // Remove `modelElement` insertion change from consumable values.\n\t *\t\tmodelConsumable.consume( modelElement, 'addAttribute:bold' ); // Remove `bold` attribute insertion on `modelElement` change.\n\t *\t\tmodelConsumable.consume( modelElement, 'removeAttribute:bold' ); // Remove `bold` attribute removal on `modelElement` change.\n\t *\t\tmodelConsumable.consume( modelSelection, 'selection' ); // Remove `modelSelection` from consumable values.\n\t *\t\tmodelConsumable.consume( modelRange, 'range' ); // Remove 'modelRange' from consumable values.\n\t *\n\t * @param {module:engine/model/item~Item|module:engine/model/selection~Selection|module:engine/model/range~Range} item\n\t * Model item, range or selection from which consumable will be consumed.\n\t * @param {String} type Consumable type. Will be normalized to a proper form, that is either `<word>` or `<part>:<part>`.\n\t * Second colon and everything after will be cut. Passing event name is a safe and good practice.\n\t * @returns {Boolean} `true` if consumable value was available and was consumed, `false` otherwise.\n\t */\n\tconsume( item, type ) {\n\t\ttype = _normalizeConsumableType( type );\n\n\t\tif ( item instanceof TextProxy ) {\n\t\t\titem = this._getSymbolForTextProxy( item );\n\t\t}\n\n\t\tif ( this.test( item, type ) ) {\n\t\t\tthis._consumable.get( item ).set( type, false );\n\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t/**\n\t * Tests whether there is a consumable value of given type connected with given model item.\n\t *\n\t *\t\tmodelConsumable.test( modelElement, 'insert' ); // Check for `modelElement` insertion change.\n\t *\t\tmodelConsumable.test( modelElement, 'addAttribute:bold' ); // Check for `bold` attribute insertion on `modelElement` change.\n\t *\t\tmodelConsumable.test( modelElement, 'removeAttribute:bold' ); // Check for `bold` attribute removal on `modelElement` change.\n\t *\t\tmodelConsumable.test( modelSelection, 'selection' ); // Check if `modelSelection` is consumable.\n\t *\t\tmodelConsumable.test( modelRange, 'range' ); // Check if `modelRange` is consumable.\n\t *\n\t * @param {module:engine/model/item~Item|module:engine/model/selection~Selection|module:engine/model/range~Range} item\n\t * Model item, range or selection to be tested.\n\t * @param {String} type Consumable type. Will be normalized to a proper form, that is either `<word>` or `<part>:<part>`.\n\t * Second colon and everything after will be cut. Passing event name is a safe and good practice.\n\t * @returns {null|Boolean} `null` if such consumable was never added, `false` if the consumable values was\n\t * already consumed or `true` if it was added and not consumed yet.\n\t */\n\ttest( item, type ) {\n\t\ttype = _normalizeConsumableType( type );\n\n\t\tif ( item instanceof TextProxy ) {\n\t\t\titem = this._getSymbolForTextProxy( item );\n\t\t}\n\n\t\tconst itemConsumables = this._consumable.get( item );\n\n\t\tif ( itemConsumables === undefined ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst value = itemConsumables.get( type );\n\n\t\tif ( value === undefined ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn value;\n\t}\n\n\t/**\n\t * Reverts consuming of consumable value.\n\t *\n\t *\t\tmodelConsumable.revert( modelElement, 'insert' ); // Revert consuming `modelElement` insertion change.\n\t *\t\tmodelConsumable.revert( modelElement, 'addAttribute:bold' ); // Revert consuming `bold` attribute insert from `modelElement`.\n\t *\t\tmodelConsumable.revert( modelElement, 'removeAttribute:bold' ); // Revert consuming `bold` attribute remove from `modelElement`.\n\t *\t\tmodelConsumable.revert( modelSelection, 'selection' ); // Revert consuming `modelSelection`.\n\t *\t\tmodelConsumable.revert( modelRange, 'range' ); // Revert consuming `modelRange`.\n\t *\n\t * @param {module:engine/model/item~Item|module:engine/model/selection~Selection|module:engine/model/range~Range} item\n\t * Model item, range or selection to be reverted.\n\t * @param {String} type Consumable type.\n\t * @returns {null|Boolean} `true` if consumable has been reversed, `false` otherwise. `null` if the consumable has\n\t * never been added.\n\t */\n\trevert( item, type ) {\n\t\ttype = _normalizeConsumableType( type );\n\n\t\tif ( item instanceof TextProxy ) {\n\t\t\titem = this._getSymbolForTextProxy( item );\n\t\t}\n\n\t\tconst test = this.test( item, type );\n\n\t\tif ( test === false ) {\n\t\t\tthis._consumable.get( item ).set( type, true );\n\n\t\t\treturn true;\n\t\t} else if ( test === true ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Gets a unique symbol for passed {@link module:engine/model/textproxy~TextProxy} instance. All `TextProxy` instances that\n\t * have same parent, same start index and same end index will get the same symbol.\n\t *\n\t * Used internally to correctly consume `TextProxy` instances.\n\t *\n\t * @private\n\t * @param {module:engine/model/textproxy~TextProxy} textProxy `TextProxy` instance to get a symbol for.\n\t * @returns {Symbol} Symbol representing all equal instances of `TextProxy`.\n\t */\n\t_getSymbolForTextProxy( textProxy ) {\n\t\tlet symbol = null;\n\n\t\tconst startMap = this._textProxyRegistry.get( textProxy.startOffset );\n\n\t\tif ( startMap ) {\n\t\t\tconst endMap = startMap.get( textProxy.endOffset );\n\n\t\t\tif ( endMap ) {\n\t\t\t\tsymbol = endMap.get( textProxy.parent );\n\t\t\t}\n\t\t}\n\n\t\tif ( !symbol ) {\n\t\t\tsymbol = this._addSymbolForTextProxy( textProxy.startOffset, textProxy.endOffset, textProxy.parent );\n\t\t}\n\n\t\treturn symbol;\n\t}\n\n\t/**\n\t * Adds a symbol for given properties that characterizes a {@link module:engine/model/textproxy~TextProxy} instance.\n\t *\n\t * Used internally to correctly consume `TextProxy` instances.\n\t *\n\t * @private\n\t * @param {Number} startIndex Text proxy start index in it's parent.\n\t * @param {Number} endIndex Text proxy end index in it's parent.\n\t * @param {module:engine/model/element~Element} parent Text proxy parent.\n\t * @returns {Symbol} Symbol generated for given properties.\n\t */\n\t_addSymbolForTextProxy( start, end, parent ) {\n\t\tconst symbol = Symbol( 'textProxySymbol' );\n\t\tlet startMap, endMap;\n\n\t\tstartMap = this._textProxyRegistry.get( start );\n\n\t\tif ( !startMap ) {\n\t\t\tstartMap = new Map();\n\t\t\tthis._textProxyRegistry.set( start, startMap );\n\t\t}\n\n\t\tendMap = startMap.get( end );\n\n\t\tif ( !endMap ) {\n\t\t\tendMap = new Map();\n\t\t\tstartMap.set( end, endMap );\n\t\t}\n\n\t\tendMap.set( parent, symbol );\n\n\t\treturn symbol;\n\t}\n}\n\n// Returns a normalized consumable type name from given string. A normalized consumable type name is a string that has\n// at most one colon, for example: `insert` or `addMarker:highlight`. If string to normalize has more \"parts\" (more colons),\n// the other parts are dropped, for example: `addattribute:bold:$text` -> `addattributes:bold`.\n//\n// @param {String} type Consumable type.\n// @returns {String} Normalized consumable type.\nfunction _normalizeConsumableType( type ) {\n\tconst parts = type.split( ':' );\n\n\treturn parts.length > 1 ? parts[ 0 ] + ':' + parts[ 1 ] : parts[ 0 ];\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/conversion/downcastdispatcher\n */\n\nimport Consumable from './modelconsumable';\nimport Range from '../model/range';\nimport Position, { getNodeAfterPosition, getTextNodeAtPosition } from '../model/position';\n\nimport EmitterMixin from '@ckeditor/ckeditor5-utils/src/emittermixin';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\n\n/**\n * The downcast dispatcher is a central point of downcasting (conversion from the model to the view), which is a process of reacting\n * to changes in the model and firing a set of events. Callbacks listening to these events are called converters. The\n * converters' role is to convert the model changes to changes in view (for example, adding view nodes or\n * changing attributes on view elements).\n *\n * During the conversion process, downcast dispatcher fires events basing on the state of the model and prepares\n * data for these events. It is important to understand that the events are connected with the changes done on the model,\n * for example: \"a node has been inserted\" or \"an attribute has changed\". This is in contrary to upcasting (a view-to-model conversion)\n * where you convert the view state (view nodes) to a model tree.\n *\n * The events are prepared basing on a diff created by {@link module:engine/model/differ~Differ Differ}, which buffers them\n * and then passes to the downcast dispatcher as a diff between the old model state and the new model state.\n *\n * Note that because the changes are converted, there is a need to have a mapping between the model structure and the view structure.\n * To map positions and elements during the downcast (a model-to-view conversion), use {@link module:engine/conversion/mapper~Mapper}.\n *\n * Downcast dispatcher fires the following events for model tree changes:\n *\n * * {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:insert `insert`} &ndash;\n * If a range of nodes was inserted to the model tree.\n * * {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:remove `remove`} &ndash;\n * If a range of nodes was removed from the model tree.\n * * {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:attribute `attribute`} &ndash;\n * If an attribute was added, changed or removed from a model node.\n *\n * For {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:insert `insert`}\n * and {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:attribute `attribute`},\n * downcast dispatcher generates {@link module:engine/conversion/modelconsumable~ModelConsumable consumables}.\n * These are used to have control over which changes have already been consumed. It is useful when some converters\n * overwrite others or convert multiple changes (for example, it converts an insertion of an element and also converts that\n * element's attributes during the insertion).\n *\n * Additionally, downcast dispatcher fires events for {@link module:engine/model/markercollection~Marker marker} changes:\n *\n * * {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:addMarker} &ndash; If a marker was added.\n * * {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:removeMarker} &ndash; If a marker was removed.\n *\n * Note that changing a marker is done through removing the marker from the old range and adding it to the new range,\n * so both events are fired.\n *\n * Finally, downcast dispatcher also handles firing events for the {@link module:engine/model/selection model selection}\n * conversion:\n *\n * * {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:selection}\n * &ndash; Converts the selection from the model to the view.\n * * {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:attribute}\n * &ndash; Fired for every selection attribute.\n * * {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:addMarker}\n * &ndash; Fired for every marker that contains a selection.\n *\n * Unlike the model tree and the markers, the events for selection are not fired for changes but for a selection state.\n *\n * When providing custom listeners for a downcast dispatcher, remember to check whether a given change has not been\n * {@link module:engine/conversion/modelconsumable~ModelConsumable#consume consumed} yet.\n *\n * When providing custom listeners for downcast dispatcher, keep in mind that any callback that has\n * {@link module:engine/conversion/modelconsumable~ModelConsumable#consume consumed} a value from a consumable and\n * converted the change should also stop the event (for efficiency purposes).\n *\n * When providing custom listeners for downcast dispatcher, remember to use the provided\n * {@link module:engine/view/downcastwriter~DowncastWriter view downcast writer} to apply changes to the view document.\n *\n * You can read more about conversion in the following guides:\n *\n * * {@glink framework/guides/deep-dive/conversion/conversion-introduction Advanced conversion concepts &mdash; attributes}\n * * {@glink framework/guides/deep-dive/conversion/conversion-extending-output Extending the editor output }\n * * {@glink framework/guides/deep-dive/conversion/custom-element-conversion Custom element conversion}\n *\n * An example of a custom converter for the downcast dispatcher:\n *\n *\t\t// You will convert inserting a \"paragraph\" model element into the model.\n *\t\tdowncastDispatcher.on( 'insert:paragraph', ( evt, data, conversionApi ) => {\n *\t\t\t// Remember to check whether the change has not been consumed yet and consume it.\n *\t\t\tif ( conversionApi.consumable.consume( data.item, 'insert' ) ) {\n *\t\t\t\treturn;\n *\t\t\t}\n *\n *\t\t\t// Translate the position in the model to a position in the view.\n *\t\t\tconst viewPosition = conversionApi.mapper.toViewPosition( data.range.start );\n *\n *\t\t\t// Create a <p> element that will be inserted into the view at the `viewPosition`.\n *\t\t\tconst viewElement = conversionApi.writer.createContainerElement( 'p' );\n *\n *\t\t\t// Bind the newly created view element to the model element so positions will map accordingly in the future.\n *\t\t\tconversionApi.mapper.bindElements( data.item, viewElement );\n *\n *\t\t\t// Add the newly created view element to the view.\n *\t\t\tconversionApi.writer.insert( viewPosition, viewElement );\n *\n *\t\t\t// Remember to stop the event propagation.\n *\t\t\tevt.stop();\n *\t\t} );\n */\nexport default class DowncastDispatcher {\n\t/**\n\t * Creates a downcast dispatcher instance.\n\t *\n\t * @see module:engine/conversion/downcastdispatcher~DowncastConversionApi\n\t * @param {Object} conversionApi Additional properties for an interface that will be passed to events fired\n\t * by the downcast dispatcher.\n\t */\n\tconstructor( conversionApi ) {\n\t\t/**\n\t\t * An interface passed by the dispatcher to the event callbacks.\n\t\t *\n\t\t * @member {module:engine/conversion/downcastdispatcher~DowncastConversionApi}\n\t\t */\n\t\tthis.conversionApi = Object.assign( { dispatcher: this }, conversionApi );\n\n\t\t/**\n\t\t * Maps conversion event names that will trigger element reconversion for a given element name.\n\t\t *\n\t\t * @type {Map<String, String>}\n\t\t * @private\n\t\t */\n\t\tthis._reconversionEventsMapping = new Map();\n\t}\n\n\t/**\n\t * Takes a {@link module:engine/model/differ~Differ model differ} object with buffered changes and fires conversion basing on it.\n\t *\n\t * @param {module:engine/model/differ~Differ} differ The differ object with buffered changes.\n\t * @param {module:engine/model/markercollection~MarkerCollection} markers Markers connected with the converted model.\n\t * @param {module:engine/view/downcastwriter~DowncastWriter} writer The view writer that should be used to modify the view document.\n\t */\n\tconvertChanges( differ, markers, writer ) {\n\t\t// Before the view is updated, remove markers which have changed.\n\t\tfor ( const change of differ.getMarkersToRemove() ) {\n\t\t\tthis.convertMarkerRemove( change.name, change.range, writer );\n\t\t}\n\n\t\tconst changes = this._mapChangesWithAutomaticReconversion( differ );\n\n\t\t// Convert changes that happened on model tree.\n\t\tfor ( const entry of changes ) {\n\t\t\tif ( entry.type === 'insert' ) {\n\t\t\t\tthis.convertInsert( Range._createFromPositionAndShift( entry.position, entry.length ), writer );\n\t\t\t} else if ( entry.type === 'remove' ) {\n\t\t\t\tthis.convertRemove( entry.position, entry.length, entry.name, writer );\n\t\t\t} else if ( entry.type === 'reconvert' ) {\n\t\t\t\tthis.reconvertElement( entry.element, writer );\n\t\t\t} else {\n\t\t\t\t// Defaults to 'attribute' change.\n\t\t\t\tthis.convertAttribute( entry.range, entry.attributeKey, entry.attributeOldValue, entry.attributeNewValue, writer );\n\t\t\t}\n\t\t}\n\n\t\tfor ( const markerName of this.conversionApi.mapper.flushUnboundMarkerNames() ) {\n\t\t\tconst markerRange = markers.get( markerName ).getRange();\n\n\t\t\tthis.convertMarkerRemove( markerName, markerRange, writer );\n\t\t\tthis.convertMarkerAdd( markerName, markerRange, writer );\n\t\t}\n\n\t\t// After the view is updated, convert markers which have changed.\n\t\tfor ( const change of differ.getMarkersToAdd() ) {\n\t\t\tthis.convertMarkerAdd( change.name, change.range, writer );\n\t\t}\n\t}\n\n\t/**\n\t * Starts a conversion of a range insertion.\n\t *\n\t * For each node in the range, {@link #event:insert `insert` event is fired}. For each attribute on each node,\n\t * {@link #event:attribute `attribute` event is fired}.\n\t *\n\t * @fires insert\n\t * @fires attribute\n\t * @param {module:engine/model/range~Range} range The inserted range.\n\t * @param {module:engine/view/downcastwriter~DowncastWriter} writer The view writer that should be used to modify the view document.\n\t */\n\tconvertInsert( range, writer ) {\n\t\tthis.conversionApi.writer = writer;\n\n\t\t// Create a list of things that can be consumed, consisting of nodes and their attributes.\n\t\tthis.conversionApi.consumable = this._createInsertConsumable( range );\n\n\t\t// Fire a separate insert event for each node and text fragment contained in the range.\n\t\tfor ( const data of Array.from( range ).map( walkerValueToEventData ) ) {\n\t\t\tthis._convertInsertWithAttributes( data );\n\t\t}\n\n\t\tthis._clearConversionApi();\n\t}\n\n\t/**\n\t * Fires conversion of a single node removal. Fires {@link #event:remove remove event} with provided data.\n\t *\n\t * @param {module:engine/model/position~Position} position Position from which node was removed.\n\t * @param {Number} length Offset size of removed node.\n\t * @param {String} name Name of removed node.\n\t * @param {module:engine/view/downcastwriter~DowncastWriter} writer View writer that should be used to modify view document.\n\t */\n\tconvertRemove( position, length, name, writer ) {\n\t\tthis.conversionApi.writer = writer;\n\n\t\tthis.fire( 'remove:' + name, { position, length }, this.conversionApi );\n\n\t\tthis._clearConversionApi();\n\t}\n\n\t/**\n\t * Starts a conversion of an attribute change on a given `range`.\n\t *\n\t * For each node in the given `range`, {@link #event:attribute attribute event} is fired with the passed data.\n\t *\n\t * @fires attribute\n\t * @param {module:engine/model/range~Range} range Changed range.\n\t * @param {String} key Key of the attribute that has changed.\n\t * @param {*} oldValue Attribute value before the change or `null` if the attribute has not been set before.\n\t * @param {*} newValue New attribute value or `null` if the attribute has been removed.\n\t * @param {module:engine/view/downcastwriter~DowncastWriter} writer View writer that should be used to modify view document.\n\t */\n\tconvertAttribute( range, key, oldValue, newValue, writer ) {\n\t\tthis.conversionApi.writer = writer;\n\n\t\t// Create a list with attributes to consume.\n\t\tthis.conversionApi.consumable = this._createConsumableForRange( range, `attribute:${ key }` );\n\n\t\t// Create a separate attribute event for each node in the range.\n\t\tfor ( const value of range ) {\n\t\t\tconst item = value.item;\n\t\t\tconst itemRange = Range._createFromPositionAndShift( value.previousPosition, value.length );\n\t\t\tconst data = {\n\t\t\t\titem,\n\t\t\t\trange: itemRange,\n\t\t\t\tattributeKey: key,\n\t\t\t\tattributeOldValue: oldValue,\n\t\t\t\tattributeNewValue: newValue\n\t\t\t};\n\n\t\t\tthis._testAndFire( `attribute:${ key }`, data );\n\t\t}\n\n\t\tthis._clearConversionApi();\n\t}\n\n\t/**\n\t * Starts the reconversion of an element. It will:\n\t *\n\t * * Fire an {@link #event:insert `insert` event} for the element to reconvert.\n\t * * Fire an {@link #event:attribute `attribute` event} for element attributes.\n\t *\n\t * This will not reconvert children of the element if they have existing (already converted) views. For newly inserted child elements\n\t * it will behave the same as {@link #convertInsert}.\n\t *\n\t * Element reconversion is defined by the `triggerBy` configuration for the\n\t * {@link module:engine/conversion/downcasthelpers~DowncastHelpers#elementToElement `elementToElement()`} conversion helper.\n\t *\n\t * @fires insert\n\t * @fires attribute\n\t * @param {module:engine/model/element~Element} element The element to be reconverted.\n\t * @param {module:engine/view/downcastwriter~DowncastWriter} writer The view writer that should be used to modify the view document.\n\t */\n\treconvertElement( element, writer ) {\n\t\tconst elementRange = Range._createOn( element );\n\n\t\tthis.conversionApi.writer = writer;\n\n\t\t// Create a list of things that can be consumed, consisting of nodes and their attributes.\n\t\tthis.conversionApi.consumable = this._createInsertConsumable( elementRange );\n\n\t\tconst mapper = this.conversionApi.mapper;\n\t\tconst currentView = mapper.toViewElement( element );\n\n\t\t// Remove the old view but do not remove mapper mappings - those will be used to revive existing elements.\n\t\twriter.remove( currentView );\n\n\t\t// Convert the element - without converting children.\n\t\tthis._convertInsertWithAttributes( {\n\t\t\titem: element,\n\t\t\trange: elementRange\n\t\t} );\n\n\t\tconst convertedViewElement = mapper.toViewElement( element );\n\n\t\t// Iterate over children of reconverted element in order to...\n\t\tfor ( const value of Range._createIn( element ) ) {\n\t\t\tconst { item } = value;\n\n\t\t\tconst view = elementOrTextProxyToView( item, mapper );\n\n\t\t\t// ...either bring back previously converted view...\n\t\t\tif ( view ) {\n\t\t\t\t// Do not move views that are already in converted element - those might be created by the main element converter in case\n\t\t\t\t// when main element converts also its direct children.\n\t\t\t\tif ( view.root !== convertedViewElement.root ) {\n\t\t\t\t\twriter.move(\n\t\t\t\t\t\twriter.createRangeOn( view ),\n\t\t\t\t\t\tmapper.toViewPosition( Position._createBefore( item ) )\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// ... or by converting newly inserted elements.\n\t\t\telse {\n\t\t\t\tthis._convertInsertWithAttributes( walkerValueToEventData( value ) );\n\t\t\t}\n\t\t}\n\n\t\t// After reconversion is done we can unbind the old view.\n\t\tmapper.unbindViewElement( currentView );\n\n\t\tthis._clearConversionApi();\n\t}\n\n\t/**\n\t * Starts the model selection conversion.\n\t *\n\t * Fires events for a given {@link module:engine/model/selection~Selection selection} to start the selection conversion.\n\t *\n\t * @fires selection\n\t * @fires addMarker\n\t * @fires attribute\n\t * @param {module:engine/model/selection~Selection} selection The selection to convert.\n\t * @param {module:engine/model/markercollection~MarkerCollection} markers Markers connected with the converted model.\n\t * @param {module:engine/view/downcastwriter~DowncastWriter} writer View writer that should be used to modify the view document.\n\t */\n\tconvertSelection( selection, markers, writer ) {\n\t\tconst markersAtSelection = Array.from( markers.getMarkersAtPosition( selection.getFirstPosition() ) );\n\n\t\tthis.conversionApi.writer = writer;\n\t\tthis.conversionApi.consumable = this._createSelectionConsumable( selection, markersAtSelection );\n\n\t\tthis.fire( 'selection', { selection }, this.conversionApi );\n\n\t\tif ( !selection.isCollapsed ) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor ( const marker of markersAtSelection ) {\n\t\t\tconst markerRange = marker.getRange();\n\n\t\t\tif ( !shouldMarkerChangeBeConverted( selection.getFirstPosition(), marker, this.conversionApi.mapper ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst data = {\n\t\t\t\titem: selection,\n\t\t\t\tmarkerName: marker.name,\n\t\t\t\tmarkerRange\n\t\t\t};\n\n\t\t\tif ( this.conversionApi.consumable.test( selection, 'addMarker:' + marker.name ) ) {\n\t\t\t\tthis.fire( 'addMarker:' + marker.name, data, this.conversionApi );\n\t\t\t}\n\t\t}\n\n\t\tfor ( const key of selection.getAttributeKeys() ) {\n\t\t\tconst data = {\n\t\t\t\titem: selection,\n\t\t\t\trange: selection.getFirstRange(),\n\t\t\t\tattributeKey: key,\n\t\t\t\tattributeOldValue: null,\n\t\t\t\tattributeNewValue: selection.getAttribute( key )\n\t\t\t};\n\n\t\t\t// Do not fire event if the attribute has been consumed.\n\t\t\tif ( this.conversionApi.consumable.test( selection, 'attribute:' + data.attributeKey ) ) {\n\t\t\t\tthis.fire( 'attribute:' + data.attributeKey + ':$text', data, this.conversionApi );\n\t\t\t}\n\t\t}\n\n\t\tthis._clearConversionApi();\n\t}\n\n\t/**\n\t * Converts the added marker. Fires the {@link #event:addMarker `addMarker`} event for each item\n\t * in the marker's range. If the range is collapsed, a single event is dispatched. See the event description for more details.\n\t *\n\t * @fires addMarker\n\t * @param {String} markerName Marker name.\n\t * @param {module:engine/model/range~Range} markerRange The marker range.\n\t * @param {module:engine/view/downcastwriter~DowncastWriter} writer View writer that should be used to modify the view document.\n\t */\n\tconvertMarkerAdd( markerName, markerRange, writer ) {\n\t\t// Do not convert if range is in graveyard or not in the document (e.g. in DocumentFragment).\n\t\tif ( !markerRange.root.document || markerRange.root.rootName == '$graveyard' ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.conversionApi.writer = writer;\n\n\t\t// In markers' case, event name == consumable name.\n\t\tconst eventName = 'addMarker:' + markerName;\n\n\t\t//\n\t\t// First, fire an event for the whole marker.\n\t\t//\n\t\tconst consumable = new Consumable();\n\t\tconsumable.add( markerRange, eventName );\n\n\t\tthis.conversionApi.consumable = consumable;\n\n\t\tthis.fire( eventName, { markerName, markerRange }, this.conversionApi );\n\n\t\t//\n\t\t// Do not fire events for each item inside the range if the range got consumed.\n\t\t//\n\t\tif ( !consumable.test( markerRange, eventName ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t//\n\t\t// Then, fire an event for each item inside the marker range.\n\t\t//\n\t\tthis.conversionApi.consumable = this._createConsumableForRange( markerRange, eventName );\n\n\t\tfor ( const item of markerRange.getItems() ) {\n\t\t\t// Do not fire event for already consumed items.\n\t\t\tif ( !this.conversionApi.consumable.test( item, eventName ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst data = { item, range: Range._createOn( item ), markerName, markerRange };\n\n\t\t\tthis.fire( eventName, data, this.conversionApi );\n\t\t}\n\n\t\tthis._clearConversionApi();\n\t}\n\n\t/**\n\t * Fires the conversion of the marker removal. Fires the {@link #event:removeMarker `removeMarker`} event with the provided data.\n\t *\n\t * @fires removeMarker\n\t * @param {String} markerName Marker name.\n\t * @param {module:engine/model/range~Range} markerRange The marker range.\n\t * @param {module:engine/view/downcastwriter~DowncastWriter} writer View writer that should be used to modify the view document.\n\t */\n\tconvertMarkerRemove( markerName, markerRange, writer ) {\n\t\t// Do not convert if range is in graveyard or not in the document (e.g. in DocumentFragment).\n\t\tif ( !markerRange.root.document || markerRange.root.rootName == '$graveyard' ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.conversionApi.writer = writer;\n\n\t\tthis.fire( 'removeMarker:' + markerName, { markerName, markerRange }, this.conversionApi );\n\n\t\tthis._clearConversionApi();\n\t}\n\n\t/**\n\t * Maps the model element \"insert\" reconversion for given event names. The event names must be fully specified:\n\t *\n\t * * For \"attribute\" change event, it should include the main element name, i.e: `'attribute:attributeName:elementName'`.\n\t * * For child node change events, these should use the child event name as well, i.e:\n\t *     * For adding a node: `'insert:childElementName'`.\n\t *     * For removing a node: `'remove:childElementName'`.\n\t *\n\t * **Note**: This method should not be used directly. The reconversion is defined by the `triggerBy()` configuration of the\n\t * `elementToElement()` conversion helper.\n\t *\n\t * @protected\n\t * @param {String} modelName The name of the main model element for which the events will trigger the reconversion.\n\t * @param {String} eventName The name of an event that would trigger conversion for a given model element.\n\t */\n\t_mapReconversionTriggerEvent( modelName, eventName ) {\n\t\tthis._reconversionEventsMapping.set( eventName, modelName );\n\t}\n\n\t/**\n\t * Creates {@link module:engine/conversion/modelconsumable~ModelConsumable} with values to consume from a given range,\n\t * assuming that the range has just been inserted to the model.\n\t *\n\t * @private\n\t * @param {module:engine/model/range~Range} range The inserted range.\n\t * @returns {module:engine/conversion/modelconsumable~ModelConsumable} The values to consume.\n\t */\n\t_createInsertConsumable( range ) {\n\t\tconst consumable = new Consumable();\n\n\t\tfor ( const value of range ) {\n\t\t\tconst item = value.item;\n\n\t\t\tconsumable.add( item, 'insert' );\n\n\t\t\tfor ( const key of item.getAttributeKeys() ) {\n\t\t\t\tconsumable.add( item, 'attribute:' + key );\n\t\t\t}\n\t\t}\n\n\t\treturn consumable;\n\t}\n\n\t/**\n\t * Creates {@link module:engine/conversion/modelconsumable~ModelConsumable} with values to consume for a given range.\n\t *\n\t * @private\n\t * @param {module:engine/model/range~Range} range The affected range.\n\t * @param {String} type Consumable type.\n\t * @returns {module:engine/conversion/modelconsumable~ModelConsumable} The values to consume.\n\t */\n\t_createConsumableForRange( range, type ) {\n\t\tconst consumable = new Consumable();\n\n\t\tfor ( const item of range.getItems() ) {\n\t\t\tconsumable.add( item, type );\n\t\t}\n\n\t\treturn consumable;\n\t}\n\n\t/**\n\t * Creates {@link module:engine/conversion/modelconsumable~ModelConsumable} with selection consumable values.\n\t *\n\t * @private\n\t * @param {module:engine/model/selection~Selection} selection The selection to create the consumable from.\n\t * @param {Iterable.<module:engine/model/markercollection~Marker>} markers Markers that contain the selection.\n\t * @returns {module:engine/conversion/modelconsumable~ModelConsumable} The values to consume.\n\t */\n\t_createSelectionConsumable( selection, markers ) {\n\t\tconst consumable = new Consumable();\n\n\t\tconsumable.add( selection, 'selection' );\n\n\t\tfor ( const marker of markers ) {\n\t\t\tconsumable.add( selection, 'addMarker:' + marker.name );\n\t\t}\n\n\t\tfor ( const key of selection.getAttributeKeys() ) {\n\t\t\tconsumable.add( selection, 'attribute:' + key );\n\t\t}\n\n\t\treturn consumable;\n\t}\n\n\t/**\n\t * Tests passed `consumable` to check whether given event can be fired and if so, fires it.\n\t *\n\t * @private\n\t * @fires insert\n\t * @fires attribute\n\t * @param {String} type Event type.\n\t * @param {Object} data Event data.\n\t */\n\t_testAndFire( type, data ) {\n\t\tif ( !this.conversionApi.consumable.test( data.item, type ) ) {\n\t\t\t// Do not fire event if the item was consumed.\n\t\t\treturn;\n\t\t}\n\n\t\tthis.fire( getEventName( type, data ), data, this.conversionApi );\n\t}\n\n\t/**\n\t * Clears the conversion API object.\n\t *\n\t * @private\n\t */\n\t_clearConversionApi() {\n\t\tdelete this.conversionApi.writer;\n\t\tdelete this.conversionApi.consumable;\n\t}\n\n\t/**\n\t * Internal method for converting element insertion. It will fire events for the inserted element and events for its attributes.\n\t *\n\t * @private\n\t * @fires insert\n\t * @fires attribute\n\t * @param {Object} data Event data.\n\t */\n\t_convertInsertWithAttributes( data ) {\n\t\tthis._testAndFire( 'insert', data );\n\n\t\t// Fire a separate addAttribute event for each attribute that was set on inserted items.\n\t\t// This is important because most attributes converters will listen only to add/change/removeAttribute events.\n\t\t// If we would not add this part, attributes on inserted nodes would not be converted.\n\t\tfor ( const key of data.item.getAttributeKeys() ) {\n\t\t\tdata.attributeKey = key;\n\t\t\tdata.attributeOldValue = null;\n\t\t\tdata.attributeNewValue = data.item.getAttribute( key );\n\n\t\t\tthis._testAndFire( `attribute:${ key }`, data );\n\t\t}\n\t}\n\n\t/**\n\t * Returns differ changes together with added \"reconvert\" type changes for {@link #reconvertElement}. These are defined by\n\t * a the `triggerBy()` configuration for the\n\t * {@link module:engine/conversion/downcasthelpers~DowncastHelpers#elementToElement `elementToElement()`} conversion helper.\n\t *\n\t * This method will remove every mapped insert or remove change with a single \"reconvert\" change.\n\t *\n\t * For instance: Having a `triggerBy()` configuration defined for the `<complex>` element that issues this element reconversion on\n\t * `foo` and `bar` attributes change, and a set of changes for this element:\n\t *\n\t *\t\tconst differChanges = [\n\t *\t\t\t{ type: 'attribute', attributeKey: 'foo', ... },\n\t *\t\t\t{ type: 'attribute', attributeKey: 'bar', ... },\n\t *\t\t\t{ type: 'attribute', attributeKey: 'baz', ... }\n\t *\t\t];\n\t *\n\t * This method will return:\n\t *\n\t *\t\tconst updatedChanges = [\n\t *\t\t\t{ type: 'reconvert', element: complexElementInstance },\n\t *\t\t\t{ type: 'attribute', attributeKey: 'baz', ... }\n\t *\t\t];\n\t *\n\t * In the example above, the `'baz'` attribute change will fire an {@link #event:attribute attribute event}\n\t *\n\t * @param {module:engine/model/differ~Differ} differ The differ object with buffered changes.\n\t * @returns {Array.<Object>} Updated set of changes.\n\t * @private\n\t */\n\t_mapChangesWithAutomaticReconversion( differ ) {\n\t\tconst itemsToReconvert = new Set();\n\t\tconst updated = [];\n\n\t\tfor ( const entry of differ.getChanges() ) {\n\t\t\tconst position = entry.position || entry.range.start;\n\t\t\t// Cached parent - just in case. See https://github.com/ckeditor/ckeditor5/issues/6579.\n\t\t\tconst positionParent = position.parent;\n\t\t\tconst textNode = getTextNodeAtPosition( position, positionParent );\n\n\t\t\t// Reconversion is done only on elements so skip text changes.\n\t\t\tif ( textNode ) {\n\t\t\t\tupdated.push( entry );\n\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst element = entry.type === 'attribute' ? getNodeAfterPosition( position, positionParent, null ) : positionParent;\n\n\t\t\t// Case of text node set directly in root. For now used only in tests but can be possible when enabled in paragraph-like roots.\n\t\t\t// See: https://github.com/ckeditor/ckeditor5/issues/762.\n\t\t\tif ( element.is( '$text' ) ) {\n\t\t\t\tupdated.push( entry );\n\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tlet eventName;\n\n\t\t\tif ( entry.type === 'attribute' ) {\n\t\t\t\teventName = `attribute:${ entry.attributeKey }:${ element.name }`;\n\t\t\t} else {\n\t\t\t\teventName = `${ entry.type }:${ entry.name }`;\n\t\t\t}\n\n\t\t\tif ( this._isReconvertTriggerEvent( eventName, element.name ) ) {\n\t\t\t\tif ( itemsToReconvert.has( element ) ) {\n\t\t\t\t\t// Element is already reconverted, so skip this change.\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\titemsToReconvert.add( element );\n\n\t\t\t\t// Add special \"reconvert\" change.\n\t\t\t\tupdated.push( { type: 'reconvert', element } );\n\t\t\t} else {\n\t\t\t\tupdated.push( entry );\n\t\t\t}\n\t\t}\n\n\t\treturn updated;\n\t}\n\n\t/**\n\t * Checks if the resulting change should trigger element reconversion.\n\t *\n\t * These are defined by a `triggerBy()` configuration for the\n\t * {@link module:engine/conversion/downcasthelpers~DowncastHelpers#elementToElement `elementToElement()`} conversion helper.\n\t *\n\t * @private\n\t * @param {String} eventName The event name to check.\n\t * @param {String} elementName The element name to check.\n\t * @returns {Boolean}\n\t */\n\t_isReconvertTriggerEvent( eventName, elementName ) {\n\t\treturn this._reconversionEventsMapping.get( eventName ) === elementName;\n\t}\n\n\t/**\n\t * Fired for inserted nodes.\n\t *\n\t * `insert` is a namespace for a class of events. Names of actually called events follow this pattern:\n\t * `insert:name`. `name` is either `'$text'`, when {@link module:engine/model/text~Text a text node} has been inserted,\n\t * or {@link module:engine/model/element~Element#name name} of inserted element.\n\t *\n\t * This way listeners can either listen to a general `insert` event or specific event (for example `insert:paragraph`).\n\t *\n\t * @event insert\n\t * @param {Object} data Additional information about the change.\n\t * @param {module:engine/model/item~Item} data.item Inserted item.\n\t * @param {module:engine/model/range~Range} data.range Range spanning over inserted item.\n\t * @param {module:engine/conversion/downcastdispatcher~DowncastConversionApi} conversionApi Conversion interface\n\t * to be used by callback, passed in `DowncastDispatcher` constructor.\n\t */\n\n\t/**\n\t * Fired for removed nodes.\n\t *\n\t * `remove` is a namespace for a class of events. Names of actually called events follow this pattern:\n\t * `remove:name`. `name` is either `'$text'`, when {@link module:engine/model/text~Text a text node} has been removed,\n\t * or the {@link module:engine/model/element~Element#name name} of removed element.\n\t *\n\t * This way listeners can either listen to a general `remove` event or specific event (for example `remove:paragraph`).\n\t *\n\t * @event remove\n\t * @param {Object} data Additional information about the change.\n\t * @param {module:engine/model/position~Position} data.position Position from which the node has been removed.\n\t * @param {Number} data.length Offset size of the removed node.\n\t * @param {module:engine/conversion/downcastdispatcher~DowncastConversionApi} conversionApi Conversion interface\n\t * to be used by callback, passed in `DowncastDispatcher` constructor.\n\t */\n\n\t/**\n\t * Fired in the following cases:\n\t *\n\t * * when an attribute has been added, changed, or removed from a node,\n\t * * when a node with an attribute is inserted,\n\t * * when collapsed model selection attribute is converted.\n\t *\n\t * `attribute` is a namespace for a class of events. Names of actually called events follow this pattern:\n\t * `attribute:attributeKey:name`. `attributeKey` is the key of added/changed/removed attribute.\n\t * `name` is either `'$text'` if change was on {@link module:engine/model/text~Text a text node},\n\t * or the {@link module:engine/model/element~Element#name name} of element which attribute has changed.\n\t *\n\t * This way listeners can either listen to a general `attribute:bold` event or specific event (for example `attribute:src:image`).\n\t *\n\t * @event attribute\n\t * @param {Object} data Additional information about the change.\n\t * @param {module:engine/model/item~Item|module:engine/model/documentselection~DocumentSelection} data.item Changed item\n\t * or converted selection.\n\t * @param {module:engine/model/range~Range} data.range Range spanning over changed item or selection range.\n\t * @param {String} data.attributeKey Attribute key.\n\t * @param {*} data.attributeOldValue Attribute value before the change. This is `null` when selection attribute is converted.\n\t * @param {*} data.attributeNewValue New attribute value.\n\t * @param {module:engine/conversion/downcastdispatcher~DowncastConversionApi} conversionApi Conversion interface\n\t * to be used by callback, passed in `DowncastDispatcher` constructor.\n\t */\n\n\t/**\n\t * Fired for {@link module:engine/model/selection~Selection selection} changes.\n\t *\n\t * @event selection\n\t * @param {module:engine/model/selection~Selection} selection Selection that is converted.\n\t * @param {module:engine/conversion/downcastdispatcher~DowncastConversionApi} conversionApi Conversion interface\n\t * to be used by callback, passed in `DowncastDispatcher` constructor.\n\t */\n\n\t/**\n\t * Fired when a new marker is added to the model. Also fired when a collapsed model selection that is inside a marker is converted.\n\t *\n\t * `addMarker` is a namespace for a class of events. Names of actually called events follow this pattern:\n\t * `addMarker:markerName`. By specifying certain marker names, you can make the events even more gradual. For example,\n\t * if markers are named `foo:abc`, `foo:bar`, then it is possible to listen to `addMarker:foo` or `addMarker:foo:abc` and\n\t * `addMarker:foo:bar` events.\n\t *\n\t * If the marker range is not collapsed:\n\t *\n\t * * the event is fired for each item in the marker range one by one,\n\t * * `conversionApi.consumable` includes each item of the marker range and the consumable value is same as the event name.\n\t *\n\t * If the marker range is collapsed:\n\t *\n\t * * there is only one event,\n\t * * `conversionApi.consumable` includes marker range with the event name.\n\t *\n\t * If the selection inside a marker is converted:\n\t *\n\t * * there is only one event,\n\t * * `conversionApi.consumable` includes the selection instance with the event name.\n\t *\n\t * @event addMarker\n\t * @param {Object} data Additional information about the change.\n\t * @param {module:engine/model/item~Item|module:engine/model/selection~Selection} data.item Item inside the new marker or\n\t * the selection that is being converted.\n\t * @param {module:engine/model/range~Range} [data.range] Range spanning over converted item. Available only in marker conversion, if\n\t * the marker range was not collapsed.\n\t * @param {module:engine/model/range~Range} data.markerRange Marker range.\n\t * @param {String} data.markerName Marker name.\n\t * @param {module:engine/conversion/downcastdispatcher~DowncastConversionApi} conversionApi Conversion interface\n\t * to be used by callback, passed in `DowncastDispatcher` constructor.\n\t */\n\n\t/**\n\t * Fired when a marker is removed from the model.\n\t *\n\t * `removeMarker` is a namespace for a class of events. Names of actually called events follow this pattern:\n\t * `removeMarker:markerName`. By specifying certain marker names, you can make the events even more gradual. For example,\n\t * if markers are named `foo:abc`, `foo:bar`, then it is possible to listen to `removeMarker:foo` or `removeMarker:foo:abc` and\n\t * `removeMarker:foo:bar` events.\n\t *\n\t * @event removeMarker\n\t * @param {Object} data Additional information about the change.\n\t * @param {module:engine/model/range~Range} data.markerRange Marker range.\n\t * @param {String} data.markerName Marker name.\n\t * @param {module:engine/conversion/downcastdispatcher~DowncastConversionApi} conversionApi Conversion interface\n\t * to be used by callback, passed in `DowncastDispatcher` constructor.\n\t */\n}\n\nmix( DowncastDispatcher, EmitterMixin );\n\n// Helper function, checks whether change of `marker` at `modelPosition` should be converted. Marker changes are not\n// converted if they happen inside an element with custom conversion method.\n//\n// @param {module:engine/model/position~Position} modelPosition\n// @param {module:engine/model/markercollection~Marker} marker\n// @param {module:engine/conversion/mapper~Mapper} mapper\n// @returns {Boolean}\nfunction shouldMarkerChangeBeConverted( modelPosition, marker, mapper ) {\n\tconst range = marker.getRange();\n\tconst ancestors = Array.from( modelPosition.getAncestors() );\n\tancestors.shift(); // Remove root element. It cannot be passed to `model.Range#containsItem`.\n\tancestors.reverse();\n\n\tconst hasCustomHandling = ancestors.some( element => {\n\t\tif ( range.containsItem( element ) ) {\n\t\t\tconst viewElement = mapper.toViewElement( element );\n\n\t\t\treturn !!viewElement.getCustomProperty( 'addHighlight' );\n\t\t}\n\t} );\n\n\treturn !hasCustomHandling;\n}\n\nfunction getEventName( type, data ) {\n\tconst name = data.item.name || '$text';\n\n\treturn `${ type }:${ name }`;\n}\n\nfunction walkerValueToEventData( value ) {\n\tconst item = value.item;\n\tconst itemRange = Range._createFromPositionAndShift( value.previousPosition, value.length );\n\n\treturn {\n\t\titem,\n\t\trange: itemRange\n\t};\n}\n\nfunction elementOrTextProxyToView( item, mapper ) {\n\tif ( item.is( 'textProxy' ) ) {\n\t\tconst mappedPosition = mapper.toViewPosition( Position._createBefore( item ) );\n\t\tconst positionParent = mappedPosition.parent;\n\n\t\treturn positionParent.is( '$text' ) ? positionParent : null;\n\t}\n\n\treturn mapper.toViewElement( item );\n}\n\n/**\n * Conversion interface that is registered for given {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher}\n * and is passed as one of parameters when {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher dispatcher}\n * fires its events.\n *\n * @interface module:engine/conversion/downcastdispatcher~DowncastConversionApi\n */\n\n/**\n * The {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher} instance.\n *\n * @member {module:engine/conversion/downcastdispatcher~DowncastDispatcher} #dispatcher\n */\n\n/**\n * Stores the information about what parts of a processed model item are still waiting to be handled. After a piece of a model item was\n * converted, an appropriate consumable value should be {@link module:engine/conversion/modelconsumable~ModelConsumable#consume consumed}.\n *\n * @member {module:engine/conversion/modelconsumable~ModelConsumable} #consumable\n */\n\n/**\n * The {@link module:engine/conversion/mapper~Mapper} instance.\n *\n * @member {module:engine/conversion/mapper~Mapper} #mapper\n */\n\n/**\n * The {@link module:engine/model/schema~Schema} instance set for the model that is downcast.\n *\n * @member {module:engine/model/schema~Schema} #schema\n */\n\n/**\n * The {@link module:engine/view/downcastwriter~DowncastWriter} instance used to manipulate the data during conversion.\n *\n * @member {module:engine/view/downcastwriter~DowncastWriter} #writer\n */\n\n/**\n * An object with an additional configuration which can be used during the conversion process. Available only for data downcast conversion.\n *\n * @member {Object} #options\n */\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/selection\n */\n\nimport Position from './position';\nimport Node from './node';\nimport Range from './range';\nimport EmitterMixin from '@ckeditor/ckeditor5-utils/src/emittermixin';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\nimport isIterable from '@ckeditor/ckeditor5-utils/src/isiterable';\n\n/**\n * Selection is a set of {@link module:engine/model/range~Range ranges}. It has a direction specified by its\n * {@link module:engine/model/selection~Selection#anchor anchor} and {@link module:engine/model/selection~Selection#focus focus}\n * (it can be {@link module:engine/model/selection~Selection#isBackward forward or backward}).\n * Additionally, selection may have its own attributes (think – whether text typed in in this selection\n * should have those attributes – e.g. whether you type a bolded text).\n *\n * @mixes module:utils/emittermixin~EmitterMixin\n */\nexport default class Selection {\n\t/**\n\t * Creates a new selection instance based on the given {@link module:engine/model/selection~Selectable selectable}\n\t * or creates an empty selection if no arguments were passed.\n\t *\n\t *\t\t// Creates empty selection without ranges.\n\t *\t\tconst selection = writer.createSelection();\n\t *\n\t *\t\t// Creates selection at the given range.\n\t *\t\tconst range = writer.createRange( start, end );\n\t *\t\tconst selection = writer.createSelection( range );\n\t *\n\t *\t\t// Creates selection at the given ranges\n\t *\t\tconst ranges = [ writer.createRange( start1, end2 ), writer.createRange( star2, end2 ) ];\n\t *\t\tconst selection = writer.createSelection( ranges );\n\t *\n\t *\t\t// Creates selection from the other selection.\n\t *\t\t// Note: It doesn't copies selection attributes.\n\t *\t\tconst otherSelection = writer.createSelection();\n\t *\t\tconst selection = writer.createSelection( otherSelection );\n\t *\n\t *\t\t// Creates selection from the given document selection.\n\t *\t\t// Note: It doesn't copies selection attributes.\n\t *\t\tconst documentSelection = model.document.selection;\n\t *\t\tconst selection = writer.createSelection( documentSelection );\n\t *\n\t *\t\t// Creates selection at the given position.\n\t *\t\tconst position = writer.createPositionFromPath( root, path );\n\t *\t\tconst selection = writer.createSelection( position );\n\t *\n\t *\t\t// Creates selection at the given offset in the given element.\n\t *\t\tconst paragraph = writer.createElement( 'paragraph' );\n\t *\t\tconst selection = writer.createSelection( paragraph, offset );\n\t *\n\t *\t\t// Creates a range inside an {@link module:engine/model/element~Element element} which starts before the\n\t *\t\t// first child of that element and ends after the last child of that element.\n\t *\t\tconst selection = writer.createSelection( paragraph, 'in' );\n\t *\n\t *\t\t// Creates a range on an {@link module:engine/model/item~Item item} which starts before the item and ends\n\t *\t\t// just after the item.\n\t *\t\tconst selection = writer.createSelection( paragraph, 'on' );\n\t *\n\t * Selection's constructor allow passing additional options (`'backward'`) as the last argument.\n\t *\n\t *\t\t// Creates backward selection.\n\t *\t\tconst selection = writer.createSelection( range, { backward: true } );\n\t *\n\t * @param {module:engine/model/selection~Selectable} selectable\n\t * @param {Number|'before'|'end'|'after'|'on'|'in'} [placeOrOffset] Sets place or offset of the selection.\n\t * @param {Object} [options]\n\t * @param {Boolean} [options.backward] Sets this selection instance to be backward.\n\t */\n\tconstructor( selectable, placeOrOffset, options ) {\n\t\t/**\n\t\t * Specifies whether the last added range was added as a backward or forward range.\n\t\t *\n\t\t * @private\n\t\t * @type {Boolean}\n\t\t */\n\t\tthis._lastRangeBackward = false;\n\n\t\t/**\n\t\t * Stores selection ranges.\n\t\t *\n\t\t * @protected\n\t\t * @type {Array.<module:engine/model/range~Range>}\n\t\t */\n\t\tthis._ranges = [];\n\n\t\t/**\n\t\t * List of attributes set on current selection.\n\t\t *\n\t\t * @protected\n\t\t * @type {Map.<String,*>}\n\t\t */\n\t\tthis._attrs = new Map();\n\n\t\tif ( selectable ) {\n\t\t\tthis.setTo( selectable, placeOrOffset, options );\n\t\t}\n\t}\n\n\t/**\n\t * Selection anchor. Anchor is the position from which the selection was started. If a user is making a selection\n\t * by dragging the mouse, the anchor is where the user pressed the mouse button (the beginning of the selection).\n\t *\n\t * Anchor and {@link #focus} define the direction of the selection, which is important\n\t * when expanding/shrinking selection. The focus moves, while the anchor should remain in the same place.\n\t *\n\t * Anchor is always set to the {@link module:engine/model/range~Range#start start} or\n\t * {@link module:engine/model/range~Range#end end} position of the last of selection's ranges. Whether it is\n\t * the `start` or `end` depends on the specified `options.backward`. See the {@link #setTo `setTo()`} method.\n\t *\n\t * May be set to `null` if there are no ranges in the selection.\n\t *\n\t * @see #focus\n\t * @readonly\n\t * @type {module:engine/model/position~Position|null}\n\t */\n\tget anchor() {\n\t\tif ( this._ranges.length > 0 ) {\n\t\t\tconst range = this._ranges[ this._ranges.length - 1 ];\n\n\t\t\treturn this._lastRangeBackward ? range.end : range.start;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Selection focus. Focus is the position where the selection ends. If a user is making a selection\n\t * by dragging the mouse, the focus is where the mouse cursor is.\n\t *\n\t * May be set to `null` if there are no ranges in the selection.\n\t *\n\t * @see #anchor\n\t * @readonly\n\t * @type {module:engine/model/position~Position|null}\n\t */\n\tget focus() {\n\t\tif ( this._ranges.length > 0 ) {\n\t\t\tconst range = this._ranges[ this._ranges.length - 1 ];\n\n\t\t\treturn this._lastRangeBackward ? range.start : range.end;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Whether the selection is collapsed. Selection is collapsed when there is exactly one range in it\n\t * and it is collapsed.\n\t *\n\t * @readonly\n\t * @type {Boolean}\n\t */\n\tget isCollapsed() {\n\t\tconst length = this._ranges.length;\n\n\t\tif ( length === 1 ) {\n\t\t\treturn this._ranges[ 0 ].isCollapsed;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t/**\n\t * Returns the number of ranges in the selection.\n\t *\n\t * @readonly\n\t * @type {Number}\n\t */\n\tget rangeCount() {\n\t\treturn this._ranges.length;\n\t}\n\n\t/**\n\t * Specifies whether the selection's {@link #focus} precedes the selection's {@link #anchor}.\n\t *\n\t * @readonly\n\t * @type {Boolean}\n\t */\n\tget isBackward() {\n\t\treturn !this.isCollapsed && this._lastRangeBackward;\n\t}\n\n\t/**\n\t * Checks whether this selection is equal to the given selection. Selections are equal if they have the same directions,\n\t * the same number of ranges and all ranges from one selection equal to ranges from the another selection.\n\t *\n\t * @param {module:engine/model/selection~Selection|module:engine/model/documentselection~DocumentSelection} otherSelection\n\t * Selection to compare with.\n\t * @returns {Boolean} `true` if selections are equal, `false` otherwise.\n\t */\n\tisEqual( otherSelection ) {\n\t\tif ( this.rangeCount != otherSelection.rangeCount ) {\n\t\t\treturn false;\n\t\t} else if ( this.rangeCount === 0 ) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif ( !this.anchor.isEqual( otherSelection.anchor ) || !this.focus.isEqual( otherSelection.focus ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tfor ( const thisRange of this._ranges ) {\n\t\t\tlet found = false;\n\n\t\t\tfor ( const otherRange of otherSelection._ranges ) {\n\t\t\t\tif ( thisRange.isEqual( otherRange ) ) {\n\t\t\t\t\tfound = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( !found ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Returns an iterable object that iterates over copies of selection ranges.\n\t *\n\t * @returns {Iterable.<module:engine/model/range~Range>}\n\t */\n\t* getRanges() {\n\t\tfor ( const range of this._ranges ) {\n\t\t\tyield new Range( range.start, range.end );\n\t\t}\n\t}\n\n\t/**\n\t * Returns a copy of the first range in the selection.\n\t * First range is the one which {@link module:engine/model/range~Range#start start} position\n\t * {@link module:engine/model/position~Position#isBefore is before} start position of all other ranges\n\t * (not to confuse with the first range added to the selection).\n\t *\n\t * Returns `null` if there are no ranges in selection.\n\t *\n\t * @returns {module:engine/model/range~Range|null}\n\t */\n\tgetFirstRange() {\n\t\tlet first = null;\n\n\t\tfor ( const range of this._ranges ) {\n\t\t\tif ( !first || range.start.isBefore( first.start ) ) {\n\t\t\t\tfirst = range;\n\t\t\t}\n\t\t}\n\n\t\treturn first ? new Range( first.start, first.end ) : null;\n\t}\n\n\t/**\n\t * Returns a copy of the last range in the selection.\n\t * Last range is the one which {@link module:engine/model/range~Range#end end} position\n\t * {@link module:engine/model/position~Position#isAfter is after} end position of all other ranges (not to confuse with the range most\n\t * recently added to the selection).\n\t *\n\t * Returns `null` if there are no ranges in selection.\n\t *\n\t * @returns {module:engine/model/range~Range|null}\n\t */\n\tgetLastRange() {\n\t\tlet last = null;\n\n\t\tfor ( const range of this._ranges ) {\n\t\t\tif ( !last || range.end.isAfter( last.end ) ) {\n\t\t\t\tlast = range;\n\t\t\t}\n\t\t}\n\n\t\treturn last ? new Range( last.start, last.end ) : null;\n\t}\n\n\t/**\n\t * Returns the first position in the selection.\n\t * First position is the position that {@link module:engine/model/position~Position#isBefore is before}\n\t * any other position in the selection.\n\t *\n\t * Returns `null` if there are no ranges in selection.\n\t *\n\t * @returns {module:engine/model/position~Position|null}\n\t */\n\tgetFirstPosition() {\n\t\tconst first = this.getFirstRange();\n\n\t\treturn first ? first.start.clone() : null;\n\t}\n\n\t/**\n\t * Returns the last position in the selection.\n\t * Last position is the position that {@link module:engine/model/position~Position#isAfter is after}\n\t * any other position in the selection.\n\t *\n\t * Returns `null` if there are no ranges in selection.\n\t *\n\t * @returns {module:engine/model/position~Position|null}\n\t */\n\tgetLastPosition() {\n\t\tconst lastRange = this.getLastRange();\n\n\t\treturn lastRange ? lastRange.end.clone() : null;\n\t}\n\n\t/**\n\t * Sets this selection's ranges and direction to the specified location based on the given\n\t * {@link module:engine/model/selection~Selectable selectable}.\n\t *\n\t *\t\t// Removes all selection's ranges.\n\t *\t\tselection.setTo( null );\n\t *\n\t *\t\t// Sets selection to the given range.\n\t *\t\tconst range = writer.createRange( start, end );\n\t *\t\tselection.setTo( range );\n\t *\n\t *\t\t// Sets selection to given ranges.\n\t *\t\tconst ranges = [ writer.createRange( start1, end2 ), writer.createRange( star2, end2 ) ];\n\t *\t\tselection.setTo( ranges );\n\t *\n\t *\t\t// Sets selection to other selection.\n\t *\t\t// Note: It doesn't copies selection attributes.\n\t *\t\tconst otherSelection = writer.createSelection();\n\t *\t\tselection.setTo( otherSelection );\n\t *\n\t *\t\t// Sets selection to the given document selection.\n\t *\t\t// Note: It doesn't copies selection attributes.\n\t *\t\tconst documentSelection = new DocumentSelection( doc );\n\t *\t\tselection.setTo( documentSelection );\n\t *\n\t *\t\t// Sets collapsed selection at the given position.\n\t *\t\tconst position = writer.createPositionFromPath( root, path );\n\t *\t\tselection.setTo( position );\n\t *\n\t *\t\t// Sets collapsed selection at the position of the given node and an offset.\n\t *\t\tselection.setTo( paragraph, offset );\n\t *\n\t * Creates a range inside an {@link module:engine/model/element~Element element} which starts before the first child of\n \t * that element and ends after the last child of that element.\n\t *\n\t *\t\tselection.setTo( paragraph, 'in' );\n\t *\n\t * Creates a range on an {@link module:engine/model/item~Item item} which starts before the item and ends just after the item.\n\t *\n\t *\t\tselection.setTo( paragraph, 'on' );\n\t *\n\t * `Selection#setTo()`' method allow passing additional options (`backward`) as the last argument.\n\t *\n\t *\t\t// Sets backward selection.\n\t *\t\tconst selection = writer.createSelection( range, { backward: true } );\n\t *\n\t * @param {module:engine/model/selection~Selectable} selectable\n\t * @param {Number|'before'|'end'|'after'|'on'|'in'} [placeOrOffset] Sets place or offset of the selection.\n\t * @param {Object} [options]\n\t * @param {Boolean} [options.backward] Sets this selection instance to be backward.\n\t */\n\tsetTo( selectable, placeOrOffset, options ) {\n\t\tif ( selectable === null ) {\n\t\t\tthis._setRanges( [] );\n\t\t} else if ( selectable instanceof Selection ) {\n\t\t\tthis._setRanges( selectable.getRanges(), selectable.isBackward );\n\t\t} else if ( selectable && typeof selectable.getRanges == 'function' ) {\n\t\t\t// We assume that the selectable is a DocumentSelection.\n\t\t\t// It can't be imported here, because it would lead to circular imports.\n\t\t\tthis._setRanges( selectable.getRanges(), selectable.isBackward );\n\t\t} else if ( selectable instanceof Range ) {\n\t\t\tthis._setRanges( [ selectable ], !!placeOrOffset && !!placeOrOffset.backward );\n\t\t} else if ( selectable instanceof Position ) {\n\t\t\tthis._setRanges( [ new Range( selectable ) ] );\n\t\t} else if ( selectable instanceof Node ) {\n\t\t\tconst backward = !!options && !!options.backward;\n\t\t\tlet range;\n\n\t\t\tif ( placeOrOffset == 'in' ) {\n\t\t\t\trange = Range._createIn( selectable );\n\t\t\t} else if ( placeOrOffset == 'on' ) {\n\t\t\t\trange = Range._createOn( selectable );\n\t\t\t} else if ( placeOrOffset !== undefined ) {\n\t\t\t\trange = new Range( Position._createAt( selectable, placeOrOffset ) );\n\t\t\t} else {\n\t\t\t\t/**\n\t\t\t\t * selection.setTo requires the second parameter when the first parameter is a node.\n\t\t\t\t *\n\t\t\t\t * @error model-selection-setto-required-second-parameter\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError( 'model-selection-setto-required-second-parameter', [ this, selectable ] );\n\t\t\t}\n\n\t\t\tthis._setRanges( [ range ], backward );\n\t\t} else if ( isIterable( selectable ) ) {\n\t\t\t// We assume that the selectable is an iterable of ranges.\n\t\t\tthis._setRanges( selectable, placeOrOffset && !!placeOrOffset.backward );\n\t\t} else {\n\t\t\t/**\n\t\t\t * Cannot set the selection to the given place.\n\t\t\t *\n\t\t\t * Invalid parameters were specified when setting the selection. Common issues:\n\t\t\t *\n\t\t\t * * A {@link module:engine/model/textproxy~TextProxy} instance was passed instead of\n\t\t\t * a real {@link module:engine/model/text~Text}.\n\t\t\t * * View nodes were passed instead of model nodes.\n\t\t\t * * `null`/`undefined` was passed.\n\t\t\t *\n\t\t\t * @error model-selection-setto-not-selectable\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'model-selection-setto-not-selectable', [ this, selectable ] );\n\t\t}\n\t}\n\n\t/**\n\t * Replaces all ranges that were added to the selection with given array of ranges. Last range of the array\n\t * is treated like the last added range and is used to set {@link module:engine/model/selection~Selection#anchor} and\n\t * {@link module:engine/model/selection~Selection#focus}. Accepts a flag describing in which direction the selection is made.\n\t *\n\t * @protected\n\t * @fires change:range\n\t * @param {Iterable.<module:engine/model/range~Range>} newRanges Ranges to set.\n\t * @param {Boolean} [isLastBackward=false] Flag describing if last added range was selected forward - from start to end (`false`)\n\t * or backward - from end to start (`true`).\n\t */\n\t_setRanges( newRanges, isLastBackward = false ) {\n\t\tnewRanges = Array.from( newRanges );\n\n\t\t// Check whether there is any range in new ranges set that is different than all already added ranges.\n\t\tconst anyNewRange = newRanges.some( newRange => {\n\t\t\tif ( !( newRange instanceof Range ) ) {\n\t\t\t\t/**\n\t\t\t\t * Selection range set to an object that is not an instance of {@link module:engine/model/range~Range}.\n\t\t\t\t *\n\t\t\t\t * Only {@link module:engine/model/range~Range} instances can be used to set a selection.\n\t\t\t\t * Common mistakes leading to this error are:\n\t\t\t\t *\n\t\t\t\t * * using DOM `Range` object,\n\t\t\t\t * * incorrect CKEditor 5 installation with multiple `ckeditor5-engine` packages having different versions.\n\t\t\t\t *\n\t\t\t\t * @error model-selection-set-ranges-not-range\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError(\n\t\t\t\t\t'model-selection-set-ranges-not-range',\n\t\t\t\t\t[ this, newRanges ]\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn this._ranges.every( oldRange => {\n\t\t\t\treturn !oldRange.isEqual( newRange );\n\t\t\t} );\n\t\t} );\n\n\t\t// Don't do anything if nothing changed.\n\t\tif ( newRanges.length === this._ranges.length && !anyNewRange ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._removeAllRanges();\n\n\t\tfor ( const range of newRanges ) {\n\t\t\tthis._pushRange( range );\n\t\t}\n\n\t\tthis._lastRangeBackward = !!isLastBackward;\n\n\t\tthis.fire( 'change:range', { directChange: true } );\n\t}\n\n\t/**\n\t * Moves {@link module:engine/model/selection~Selection#focus} to the specified location.\n\t *\n\t * The location can be specified in the same form as\n\t * {@link module:engine/model/writer~Writer#createPositionAt writer.createPositionAt()} parameters.\n\t *\n\t * @fires change:range\n\t * @param {module:engine/model/item~Item|module:engine/model/position~Position} itemOrPosition\n\t * @param {Number|'end'|'before'|'after'} [offset] Offset or one of the flags. Used only when\n\t * first parameter is a {@link module:engine/model/item~Item model item}.\n\t */\n\tsetFocus( itemOrPosition, offset ) {\n\t\tif ( this.anchor === null ) {\n\t\t\t/**\n\t\t\t * Cannot set selection focus if there are no ranges in selection.\n\t\t\t *\n\t\t\t * @error model-selection-setfocus-no-ranges\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'model-selection-setfocus-no-ranges', [ this, itemOrPosition ] );\n\t\t}\n\n\t\tconst newFocus = Position._createAt( itemOrPosition, offset );\n\n\t\tif ( newFocus.compareWith( this.focus ) == 'same' ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst anchor = this.anchor;\n\n\t\tif ( this._ranges.length ) {\n\t\t\tthis._popRange();\n\t\t}\n\n\t\tif ( newFocus.compareWith( anchor ) == 'before' ) {\n\t\t\tthis._pushRange( new Range( newFocus, anchor ) );\n\t\t\tthis._lastRangeBackward = true;\n\t\t} else {\n\t\t\tthis._pushRange( new Range( anchor, newFocus ) );\n\t\t\tthis._lastRangeBackward = false;\n\t\t}\n\n\t\tthis.fire( 'change:range', { directChange: true } );\n\t}\n\n\t/**\n\t * Gets an attribute value for given key or `undefined` if that attribute is not set on the selection.\n\t *\n\t * @param {String} key Key of attribute to look for.\n\t * @returns {*} Attribute value or `undefined`.\n\t */\n\tgetAttribute( key ) {\n\t\treturn this._attrs.get( key );\n\t}\n\n\t/**\n\t * Returns iterable that iterates over this selection's attributes.\n\t *\n\t * Attributes are returned as arrays containing two items. First one is attribute key and second is attribute value.\n\t * This format is accepted by native `Map` object and also can be passed in `Node` constructor.\n\t *\n\t * @returns {Iterable.<*>}\n\t */\n\tgetAttributes() {\n\t\treturn this._attrs.entries();\n\t}\n\n\t/**\n\t * Returns iterable that iterates over this selection's attribute keys.\n\t *\n\t * @returns {Iterable.<String>}\n\t */\n\tgetAttributeKeys() {\n\t\treturn this._attrs.keys();\n\t}\n\n\t/**\n\t * Checks if the selection has an attribute for given key.\n\t *\n\t * @param {String} key Key of attribute to check.\n\t * @returns {Boolean} `true` if attribute with given key is set on selection, `false` otherwise.\n\t */\n\thasAttribute( key ) {\n\t\treturn this._attrs.has( key );\n\t}\n\n\t/**\n\t * Removes an attribute with given key from the selection.\n\t *\n\t * If given attribute was set on the selection, fires the {@link #event:change:range} event with\n\t * removed attribute key.\n\t *\n\t * @fires change:attribute\n\t * @param {String} key Key of attribute to remove.\n\t */\n\tremoveAttribute( key ) {\n\t\tif ( this.hasAttribute( key ) ) {\n\t\t\tthis._attrs.delete( key );\n\n\t\t\tthis.fire( 'change:attribute', { attributeKeys: [ key ], directChange: true } );\n\t\t}\n\t}\n\n\t/**\n\t * Sets attribute on the selection. If attribute with the same key already is set, it's value is overwritten.\n\t *\n\t * If the attribute value has changed, fires the {@link #event:change:range} event with\n\t * the attribute key.\n\t *\n\t * @fires change:attribute\n\t * @param {String} key Key of attribute to set.\n\t * @param {*} value Attribute value.\n\t */\n\tsetAttribute( key, value ) {\n\t\tif ( this.getAttribute( key ) !== value ) {\n\t\t\tthis._attrs.set( key, value );\n\n\t\t\tthis.fire( 'change:attribute', { attributeKeys: [ key ], directChange: true } );\n\t\t}\n\t}\n\n\t/**\n\t * Returns the selected element. {@link module:engine/model/element~Element Element} is considered as selected if there is only\n\t * one range in the selection, and that range contains exactly one element.\n\t * Returns `null` if there is no selected element.\n\t *\n\t * @returns {module:engine/model/element~Element|null}\n\t */\n\tgetSelectedElement() {\n\t\tif ( this.rangeCount !== 1 ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this.getFirstRange().getContainedElement();\n\t}\n\n\t/**\n\t * Checks whether this object is of the given.\n\t *\n\t *\t\tselection.is( 'selection' ); // -> true\n\t *\t\tselection.is( 'model:selection' ); // -> true\n\t *\n\t *\t\tselection.is( 'view:selection' ); // -> false\n\t *\t\tselection.is( 'range' ); // -> false\n\t *\n\t * {@link module:engine/model/node~Node#is Check the entire list of model objects} which implement the `is()` method.\n\t *\n\t * @param {String} type\n\t * @returns {Boolean}\n\t */\n\tis( type ) {\n\t\treturn type === 'selection' || type === 'model:selection';\n\t}\n\n\t/**\n\t * Gets elements of type {@link module:engine/model/schema~Schema#isBlock \"block\"} touched by the selection.\n\t *\n\t * This method's result can be used for example to apply block styling to all blocks covered by this selection.\n\t *\n\t * **Note:** `getSelectedBlocks()` returns blocks that are nested in other non-block elements\n\t * but will not return blocks nested in other blocks.\n\t *\n\t * In this case the function will return exactly all 3 paragraphs (note: `<blockQuote>` is not a block itself):\n\t *\n\t *\t\t<paragraph>[a</paragraph>\n\t *\t\t<blockQuote>\n\t *\t\t\t<paragraph>b</paragraph>\n\t *\t\t</blockQuote>\n\t *\t\t<paragraph>c]d</paragraph>\n\t *\n\t * In this case the paragraph will also be returned, despite the collapsed selection:\n\t *\n\t *\t\t<paragraph>[]a</paragraph>\n\t *\n\t * In such a scenario, however, only blocks A, B & E will be returned as blocks C & D are nested in block B:\n\t *\n\t *\t\t[<blockA></blockA>\n\t *\t\t<blockB>\n\t *\t\t\t<blockC></blockC>\n\t *\t\t\t<blockD></blockD>\n\t *\t\t</blockB>\n\t *\t\t<blockE></blockE>]\n\t *\n\t * If the selection is inside a block all the inner blocks (A & B) are returned:\n\t *\n\t * \t\t<block>\n\t *\t\t\t<blockA>[a</blockA>\n\t * \t\t\t<blockB>b]</blockB>\n\t * \t\t</block>\n\t *\n\t * **Special case**: If a selection ends at the beginning of a block, that block is not returned as from user perspective\n\t * this block wasn't selected. See [#984](https://github.com/ckeditor/ckeditor5-engine/issues/984) for more details.\n\t *\n\t *\t\t<paragraph>[a</paragraph>\n\t *\t\t<paragraph>b</paragraph>\n\t *\t\t<paragraph>]c</paragraph> // this block will not be returned\n\t *\n\t * @returns {Iterable.<module:engine/model/element~Element>}\n\t */\n\t* getSelectedBlocks() {\n\t\tconst visited = new WeakSet();\n\n\t\tfor ( const range of this.getRanges() ) {\n\t\t\t// Get start block of range in case of a collapsed range.\n\t\t\tconst startBlock = getParentBlock( range.start, visited );\n\n\t\t\tif ( startBlock && isTopBlockInRange( startBlock, range ) ) {\n\t\t\t\tyield startBlock;\n\t\t\t}\n\n\t\t\tfor ( const value of range.getWalker() ) {\n\t\t\t\tconst block = value.item;\n\n\t\t\t\tif ( value.type == 'elementEnd' && isUnvisitedTopBlock( block, visited, range ) ) {\n\t\t\t\t\tyield block;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst endBlock = getParentBlock( range.end, visited );\n\n\t\t\t// #984. Don't return the end block if the range ends right at its beginning.\n\t\t\tif ( endBlock && !range.end.isTouching( Position._createAt( endBlock, 0 ) ) && isTopBlockInRange( endBlock, range ) ) {\n\t\t\t\tyield endBlock;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Checks whether the selection contains the entire content of the given element. This means that selection must start\n\t * at a position {@link module:engine/model/position~Position#isTouching touching} the element's start and ends at position\n\t * touching the element's end.\n\t *\n\t * By default, this method will check whether the entire content of the selection's current root is selected.\n\t * Useful to check if e.g. the user has just pressed <kbd>Ctrl</kbd> + <kbd>A</kbd>.\n\t *\n\t * @param {module:engine/model/element~Element} [element=this.anchor.root]\n\t * @returns {Boolean}\n\t */\n\tcontainsEntireContent( element = this.anchor.root ) {\n\t\tconst limitStartPosition = Position._createAt( element, 0 );\n\t\tconst limitEndPosition = Position._createAt( element, 'end' );\n\n\t\treturn limitStartPosition.isTouching( this.getFirstPosition() ) &&\n\t\t\tlimitEndPosition.isTouching( this.getLastPosition() );\n\t}\n\n\t/**\n\t * Adds given range to internal {@link #_ranges ranges array}. Throws an error\n\t * if given range is intersecting with any range that is already stored in this selection.\n\t *\n\t * @protected\n\t * @param {module:engine/model/range~Range} range Range to add.\n\t */\n\t_pushRange( range ) {\n\t\tthis._checkRange( range );\n\t\tthis._ranges.push( new Range( range.start, range.end ) );\n\t}\n\n\t/**\n\t * Checks if given range intersects with ranges that are already in the selection. Throws an error if it does.\n\t *\n\t * @protected\n\t * @param {module:engine/model/range~Range} range Range to check.\n\t */\n\t_checkRange( range ) {\n\t\tfor ( let i = 0; i < this._ranges.length; i++ ) {\n\t\t\tif ( range.isIntersecting( this._ranges[ i ] ) ) {\n\t\t\t\t/**\n\t\t\t\t * Trying to add a range that intersects with another range in the selection.\n\t\t\t\t *\n\t\t\t\t * @error model-selection-range-intersects\n\t\t\t\t * @param {module:engine/model/range~Range} addedRange Range that was added to the selection.\n\t\t\t\t * @param {module:engine/model/range~Range} intersectingRange Range in the selection that intersects with `addedRange`.\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError(\n\t\t\t\t\t'model-selection-range-intersects',\n\t\t\t\t\t[ this, range ],\n\t\t\t\t\t{ addedRange: range, intersectingRange: this._ranges[ i ] }\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Deletes ranges from internal range array. Uses {@link #_popRange _popRange} to\n\t * ensure proper ranges removal.\n\t *\n\t * @protected\n\t */\n\t_removeAllRanges() {\n\t\twhile ( this._ranges.length > 0 ) {\n\t\t\tthis._popRange();\n\t\t}\n\t}\n\n\t/**\n\t * Removes most recently added range from the selection.\n\t *\n\t * @protected\n\t */\n\t_popRange() {\n\t\tthis._ranges.pop();\n\t}\n\n\t/**\n\t * Fired when selection range(s) changed.\n\t *\n\t * @event change:range\n\t * @param {Boolean} directChange In case of {@link module:engine/model/selection~Selection} class it is always set\n\t * to `true` which indicates that the selection change was caused by a direct use of selection's API.\n\t * The {@link module:engine/model/documentselection~DocumentSelection}, however, may change because its position\n\t * was directly changed through the {@link module:engine/model/writer~Writer writer} or because its position was\n\t * changed because the structure of the model has been changed (which means an indirect change).\n\t * The indirect change does not occur in case of normal (detached) selections because they are \"static\" (as \"not live\")\n\t * which mean that they are not updated once the document changes.\n\t */\n\n\t/**\n\t * Fired when selection attribute changed.\n\t *\n\t * @event change:attribute\n\t * @param {Boolean} directChange In case of {@link module:engine/model/selection~Selection} class it is always set\n\t * to `true` which indicates that the selection change was caused by a direct use of selection's API.\n\t * The {@link module:engine/model/documentselection~DocumentSelection}, however, may change because its attributes\n\t * were directly changed through the {@link module:engine/model/writer~Writer writer} or because its position was\n\t * changed in the model and its attributes were refreshed (which means an indirect change).\n\t * The indirect change does not occur in case of normal (detached) selections because they are \"static\" (as \"not live\")\n\t * which mean that they are not updated once the document changes.\n\t * @param {Array.<String>} attributeKeys Array containing keys of attributes that changed.\n\t */\n}\n\nmix( Selection, EmitterMixin );\n\n// Checks whether the given element extends $block in the schema and has a parent (is not a root).\n// Marks it as already visited.\nfunction isUnvisitedBlock( element, visited ) {\n\tif ( visited.has( element ) ) {\n\t\treturn false;\n\t}\n\n\tvisited.add( element );\n\n\treturn element.root.document.model.schema.isBlock( element ) && element.parent;\n}\n\n// Checks if the given element is a $block was not previously visited and is a top block in a range.\nfunction isUnvisitedTopBlock( element, visited, range ) {\n\treturn isUnvisitedBlock( element, visited ) && isTopBlockInRange( element, range );\n}\n\n// Finds the lowest element in position's ancestors which is a block.\n// It will search until first ancestor that is a limit element.\n// Marks all ancestors as already visited to not include any of them later on.\nfunction getParentBlock( position, visited ) {\n\tconst element = position.parent;\n\tconst schema = element.root.document.model.schema;\n\n\tconst ancestors = position.parent.getAncestors( { parentFirst: true, includeSelf: true } );\n\n\tlet hasParentLimit = false;\n\n\tconst block = ancestors.find( element => {\n\t\t// Stop searching after first parent node that is limit element.\n\t\tif ( hasParentLimit ) {\n\t\t\treturn false;\n\t\t}\n\n\t\thasParentLimit = schema.isLimit( element );\n\n\t\treturn !hasParentLimit && isUnvisitedBlock( element, visited );\n\t} );\n\n\t// Mark all ancestors of this position's parent, because find() might've stopped early and\n\t// the found block may be a child of another block.\n\tancestors.forEach( element => visited.add( element ) );\n\n\treturn block;\n}\n\n// Checks if the blocks is not nested in other block inside a range.\n//\n// @param {module:engine/model/element~Element} block Block to check.\n// @param {module:engine/model/range~Range} range Range to check.\nfunction isTopBlockInRange( block, range ) {\n\tconst parentBlock = findAncestorBlock( block );\n\n\tif ( !parentBlock ) {\n\t\treturn true;\n\t}\n\n\t// Add loose flag to check as parentRange can be equal to range.\n\tconst isParentInRange = range.containsRange( Range._createOn( parentBlock ), true );\n\n\treturn !isParentInRange;\n}\n\n// Returns first ancestor block of a node.\n//\n// @param {module:engine/model/node~Node} node\n// @returns {module:engine/model/node~Node|undefined}\nfunction findAncestorBlock( node ) {\n\tconst schema = node.root.document.model.schema;\n\n\tlet parent = node.parent;\n\n\twhile ( parent ) {\n\t\tif ( schema.isBlock( parent ) ) {\n\t\t\treturn parent;\n\t\t}\n\n\t\tparent = parent.parent;\n\t}\n}\n\n/**\n * An entity that is used to set selection.\n *\n * See also {@link module:engine/model/selection~Selection#setTo}\n *\n * @typedef {\n *     module:engine/model/selection~Selection|\n *     module:engine/model/documentselection~DocumentSelection|\n *     module:engine/model/position~Position|\n *     module:engine/model/range~Range|\n *     module:engine/model/node~Node|\n *     Iterable.<module:engine/model/range~Range>|\n *     null\n * } module:engine/model/selection~Selectable\n */\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/documentselection\n */\n\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\nimport EmitterMixin from '@ckeditor/ckeditor5-utils/src/emittermixin';\n\nimport Selection from './selection';\nimport LiveRange from './liverange';\nimport Text from './text';\nimport TextProxy from './textproxy';\nimport toMap from '@ckeditor/ckeditor5-utils/src/tomap';\nimport Collection from '@ckeditor/ckeditor5-utils/src/collection';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport uid from '@ckeditor/ckeditor5-utils/src/uid';\n\nconst storePrefix = 'selection:';\n\n/**\n * `DocumentSelection` is a special selection which is used as the\n * {@link module:engine/model/document~Document#selection document's selection}.\n * There can be only one instance of `DocumentSelection` per document.\n *\n * Document selection can only be changed by using the {@link module:engine/model/writer~Writer} instance\n * inside the {@link module:engine/model/model~Model#change `change()`} block, as it provides a secure way to modify model.\n *\n * `DocumentSelection` is automatically updated upon changes in the {@link module:engine/model/document~Document document}\n * to always contain valid ranges. Its attributes are inherited from the text unless set explicitly.\n *\n * Differences between {@link module:engine/model/selection~Selection} and `DocumentSelection` are:\n * * there is always a range in `DocumentSelection` - even if no ranges were added there is a \"default range\"\n * present in the selection,\n * * ranges added to this selection updates automatically when the document changes,\n * * attributes of `DocumentSelection` are updated automatically according to selection ranges.\n *\n * Since `DocumentSelection` uses {@link module:engine/model/liverange~LiveRange live ranges}\n * and is updated when {@link module:engine/model/document~Document document}\n * changes, it cannot be set on {@link module:engine/model/node~Node nodes}\n * that are inside {@link module:engine/model/documentfragment~DocumentFragment document fragment}.\n * If you need to represent a selection in document fragment,\n * use {@link module:engine/model/selection~Selection Selection class} instead.\n *\n * @mixes module:utils/emittermixin~EmitterMixin\n */\nexport default class DocumentSelection {\n\t/**\n\t * Creates an empty live selection for given {@link module:engine/model/document~Document}.\n\t *\n\t * @param {module:engine/model/document~Document} doc Document which owns this selection.\n\t */\n\tconstructor( doc ) {\n\t\t/**\n\t\t * Selection used internally by that class (`DocumentSelection` is a proxy to that selection).\n\t\t *\n\t\t * @protected\n\t\t */\n\t\tthis._selection = new LiveSelection( doc );\n\n\t\tthis._selection.delegate( 'change:range' ).to( this );\n\t\tthis._selection.delegate( 'change:attribute' ).to( this );\n\t\tthis._selection.delegate( 'change:marker' ).to( this );\n\t}\n\n\t/**\n\t * Returns whether the selection is collapsed. Selection is collapsed when there is exactly one range which is\n\t * collapsed.\n\t *\n\t * @readonly\n\t * @type {Boolean}\n\t */\n\tget isCollapsed() {\n\t\treturn this._selection.isCollapsed;\n\t}\n\n\t/**\n\t * Selection anchor. Anchor may be described as a position where the most recent part of the selection starts.\n\t * Together with {@link #focus} they define the direction of selection, which is important\n\t * when expanding/shrinking selection. Anchor is always {@link module:engine/model/range~Range#start start} or\n\t * {@link module:engine/model/range~Range#end end} position of the most recently added range.\n\t *\n\t * Is set to `null` if there are no ranges in selection.\n\t *\n\t * @see #focus\n\t * @readonly\n\t * @type {module:engine/model/position~Position|null}\n\t */\n\tget anchor() {\n\t\treturn this._selection.anchor;\n\t}\n\n\t/**\n\t * Selection focus. Focus is a position where the selection ends.\n\t *\n\t * Is set to `null` if there are no ranges in selection.\n\t *\n\t * @see #anchor\n\t * @readonly\n\t * @type {module:engine/model/position~Position|null}\n\t */\n\tget focus() {\n\t\treturn this._selection.focus;\n\t}\n\n\t/**\n\t * Returns number of ranges in selection.\n\t *\n\t * @readonly\n\t * @type {Number}\n\t */\n\tget rangeCount() {\n\t\treturn this._selection.rangeCount;\n\t}\n\n\t/**\n\t * Describes whether `Documentselection` has own range(s) set, or if it is defaulted to\n\t * {@link module:engine/model/document~Document#_getDefaultRange document's default range}.\n\t *\n\t * @readonly\n\t * @type {Boolean}\n\t */\n\tget hasOwnRange() {\n\t\treturn this._selection.hasOwnRange;\n\t}\n\n\t/**\n\t * Specifies whether the {@link #focus}\n\t * precedes {@link #anchor}.\n\t *\n\t * @readonly\n\t * @type {Boolean}\n\t */\n\tget isBackward() {\n\t\treturn this._selection.isBackward;\n\t}\n\n\t/**\n\t * Describes whether the gravity is overridden (using {@link module:engine/model/writer~Writer#overrideSelectionGravity}) or not.\n\t *\n\t * Note that the gravity remains overridden as long as will not be restored the same number of times as it was overridden.\n\t *\n\t * @readonly\n\t * @returns {Boolean}\n\t */\n\tget isGravityOverridden() {\n\t\treturn this._selection.isGravityOverridden;\n\t}\n\n\t/**\n\t * A collection of selection {@link module:engine/model/markercollection~Marker markers}.\n\t * Marker is a selection marker when selection range is inside the marker range.\n\t *\n\t * **Note**: Only markers from {@link ~DocumentSelection#observeMarkers observed markers groups} are collected.\n\t *\n\t * @readonly\n\t * @type {module:utils/collection~Collection}\n\t */\n\tget markers() {\n\t\treturn this._selection.markers;\n\t}\n\n\t/**\n\t * Used for the compatibility with the {@link module:engine/model/selection~Selection#isEqual} method.\n\t *\n\t * @protected\n\t */\n\tget _ranges() {\n\t\treturn this._selection._ranges;\n\t}\n\n\t/**\n\t * Returns an iterable that iterates over copies of selection ranges.\n\t *\n\t * @returns {Iterable.<module:engine/model/range~Range>}\n\t */\n\tgetRanges() {\n\t\treturn this._selection.getRanges();\n\t}\n\n\t/**\n\t * Returns the first position in the selection.\n\t * First position is the position that {@link module:engine/model/position~Position#isBefore is before}\n\t * any other position in the selection.\n\t *\n\t * Returns `null` if there are no ranges in selection.\n\t *\n\t * @returns {module:engine/model/position~Position|null}\n\t */\n\tgetFirstPosition() {\n\t\treturn this._selection.getFirstPosition();\n\t}\n\n\t/**\n\t * Returns the last position in the selection.\n\t * Last position is the position that {@link module:engine/model/position~Position#isAfter is after}\n\t * any other position in the selection.\n\t *\n\t * Returns `null` if there are no ranges in selection.\n\t *\n\t * @returns {module:engine/model/position~Position|null}\n\t */\n\tgetLastPosition() {\n\t\treturn this._selection.getLastPosition();\n\t}\n\n\t/**\n\t * Returns a copy of the first range in the selection.\n\t * First range is the one which {@link module:engine/model/range~Range#start start} position\n\t * {@link module:engine/model/position~Position#isBefore is before} start position of all other ranges\n\t * (not to confuse with the first range added to the selection).\n\t *\n\t * Returns `null` if there are no ranges in selection.\n\t *\n\t * @returns {module:engine/model/range~Range|null}\n\t */\n\tgetFirstRange() {\n\t\treturn this._selection.getFirstRange();\n\t}\n\n\t/**\n\t * Returns a copy of the last range in the selection.\n\t * Last range is the one which {@link module:engine/model/range~Range#end end} position\n\t * {@link module:engine/model/position~Position#isAfter is after} end position of all other ranges (not to confuse with the range most\n\t * recently added to the selection).\n\t *\n\t * Returns `null` if there are no ranges in selection.\n\t *\n\t * @returns {module:engine/model/range~Range|null}\n\t */\n\tgetLastRange() {\n\t\treturn this._selection.getLastRange();\n\t}\n\n\t/**\n\t * Gets elements of type {@link module:engine/model/schema~Schema#isBlock \"block\"} touched by the selection.\n\t *\n\t * This method's result can be used for example to apply block styling to all blocks covered by this selection.\n\t *\n\t * **Note:** `getSelectedBlocks()` returns blocks that are nested in other non-block elements\n\t * but will not return blocks nested in other blocks.\n\t *\n\t * In this case the function will return exactly all 3 paragraphs (note: `<blockQuote>` is not a block itself):\n\t *\n\t *\t\t<paragraph>[a</paragraph>\n\t *\t\t<blockQuote>\n\t *\t\t\t<paragraph>b</paragraph>\n\t *\t\t</blockQuote>\n\t *\t\t<paragraph>c]d</paragraph>\n\t *\n\t * In this case the paragraph will also be returned, despite the collapsed selection:\n\t *\n\t *\t\t<paragraph>[]a</paragraph>\n\t *\n\t * In such a scenario, however, only blocks A, B & E will be returned as blocks C & D are nested in block B:\n\t *\n\t *\t\t[<blockA></blockA>\n\t *\t\t<blockB>\n\t *\t\t\t<blockC></blockC>\n\t *\t\t\t<blockD></blockD>\n\t *\t\t</blockB>\n\t *\t\t<blockE></blockE>]\n\t *\n\t * If the selection is inside a block all the inner blocks (A & B) are returned:\n\t *\n\t * \t\t<block>\n\t *\t\t\t<blockA>[a</blockA>\n\t * \t\t\t<blockB>b]</blockB>\n\t * \t\t</block>\n\t *\n\t * **Special case**: If a selection ends at the beginning of a block, that block is not returned as from user perspective\n\t * this block wasn't selected. See [#984](https://github.com/ckeditor/ckeditor5-engine/issues/984) for more details.\n\t *\n\t *\t\t<paragraph>[a</paragraph>\n\t *\t\t<paragraph>b</paragraph>\n\t *\t\t<paragraph>]c</paragraph> // this block will not be returned\n\t *\n\t * @returns {Iterable.<module:engine/model/element~Element>}\n\t */\n\tgetSelectedBlocks() {\n\t\treturn this._selection.getSelectedBlocks();\n\t}\n\n\t/**\n\t * Returns the selected element. {@link module:engine/model/element~Element Element} is considered as selected if there is only\n\t * one range in the selection, and that range contains exactly one element.\n\t * Returns `null` if there is no selected element.\n\t *\n\t * @returns {module:engine/model/element~Element|null}\n\t */\n\tgetSelectedElement() {\n\t\treturn this._selection.getSelectedElement();\n\t}\n\n\t/**\n\t * Checks whether the selection contains the entire content of the given element. This means that selection must start\n\t * at a position {@link module:engine/model/position~Position#isTouching touching} the element's start and ends at position\n\t * touching the element's end.\n\t *\n\t * By default, this method will check whether the entire content of the selection's current root is selected.\n\t * Useful to check if e.g. the user has just pressed <kbd>Ctrl</kbd> + <kbd>A</kbd>.\n\t *\n\t * @param {module:engine/model/element~Element} [element=this.anchor.root]\n\t * @returns {Boolean}\n\t */\n\tcontainsEntireContent( element ) {\n\t\treturn this._selection.containsEntireContent( element );\n\t}\n\n\t/**\n\t * Unbinds all events previously bound by document selection.\n\t */\n\tdestroy() {\n\t\tthis._selection.destroy();\n\t}\n\n\t/**\n\t * Returns iterable that iterates over this selection's attribute keys.\n\t *\n\t * @returns {Iterable.<String>}\n\t */\n\tgetAttributeKeys() {\n\t\treturn this._selection.getAttributeKeys();\n\t}\n\n\t/**\n\t * Returns iterable that iterates over this selection's attributes.\n\t *\n\t * Attributes are returned as arrays containing two items. First one is attribute key and second is attribute value.\n\t * This format is accepted by native `Map` object and also can be passed in `Node` constructor.\n\t *\n\t * @returns {Iterable.<*>}\n\t */\n\tgetAttributes() {\n\t\treturn this._selection.getAttributes();\n\t}\n\n\t/**\n\t * Gets an attribute value for given key or `undefined` if that attribute is not set on the selection.\n\t *\n\t * @param {String} key Key of attribute to look for.\n\t * @returns {*} Attribute value or `undefined`.\n\t */\n\tgetAttribute( key ) {\n\t\treturn this._selection.getAttribute( key );\n\t}\n\n\t/**\n\t * Checks if the selection has an attribute for given key.\n\t *\n\t * @param {String} key Key of attribute to check.\n\t * @returns {Boolean} `true` if attribute with given key is set on selection, `false` otherwise.\n\t */\n\thasAttribute( key ) {\n\t\treturn this._selection.hasAttribute( key );\n\t}\n\n\t/**\n\t * Refreshes selection attributes and markers according to the current position in the model.\n\t */\n\trefresh() {\n\t\tthis._selection._updateMarkers();\n\t\tthis._selection._updateAttributes( false );\n\t}\n\n\t/**\n\t * Registers a marker group prefix or a marker name to be collected in the\n\t * {@link ~DocumentSelection#markers selection markers collection}.\n\t *\n\t * See also {@link module:engine/model/markercollection~MarkerCollection#getMarkersGroup `MarkerCollection#getMarkersGroup()`}.\n\t *\n\t * @param {String} prefixOrName The marker group prefix or marker name.\n\t */\n\tobserveMarkers( prefixOrName ) {\n\t\tthis._selection.observeMarkers( prefixOrName );\n\t}\n\n\t/**\n\t * Checks whether this object is of the given type.\n\t *\n\t *\t\tselection.is( 'selection' ); // -> true\n\t *\t\tselection.is( 'documentSelection' ); // -> true\n\t *\t\tselection.is( 'model:selection' ); // -> true\n\t *\t\tselection.is( 'model:documentSelection' ); // -> true\n\t *\n\t *\t\tselection.is( 'view:selection' ); // -> false\n\t *\t\tselection.is( 'element' ); // -> false\n\t *\t\tselection.is( 'node' ); // -> false\n\t *\n\t * {@link module:engine/model/node~Node#is Check the entire list of model objects} which implement the `is()` method.\n\t *\n\t * @param {String} type\n\t * @returns {Boolean}\n\t */\n\tis( type ) {\n\t\treturn type === 'selection' ||\n\t\t\ttype == 'model:selection' ||\n\t\t\ttype == 'documentSelection' ||\n\t\t\ttype == 'model:documentSelection';\n\t}\n\n\t/**\n\t * Moves {@link module:engine/model/documentselection~DocumentSelection#focus} to the specified location.\n\t * Should be used only within the {@link module:engine/model/writer~Writer#setSelectionFocus} method.\n\t *\n\t * The location can be specified in the same form as\n\t * {@link module:engine/model/writer~Writer#createPositionAt writer.createPositionAt()} parameters.\n\t *\n\t * @see module:engine/model/writer~Writer#setSelectionFocus\n\t * @protected\n\t * @param {module:engine/model/item~Item|module:engine/model/position~Position} itemOrPosition\n\t * @param {Number|'end'|'before'|'after'} [offset] Offset or one of the flags. Used only when\n\t * first parameter is a {@link module:engine/model/item~Item model item}.\n\t */\n\t_setFocus( itemOrPosition, offset ) {\n\t\tthis._selection.setFocus( itemOrPosition, offset );\n\t}\n\n\t/**\n\t * Sets this selection's ranges and direction to the specified location based on the given\n\t * {@link module:engine/model/selection~Selectable selectable}.\n\t * Should be used only within the {@link module:engine/model/writer~Writer#setSelection} method.\n\t *\n\t * @see module:engine/model/writer~Writer#setSelection\n\t * @protected\n\t * @param {module:engine/model/selection~Selectable} selectable\n\t * @param {Number|'before'|'end'|'after'|'on'|'in'} [placeOrOffset] Sets place or offset of the selection.\n\t * @param {Object} [options]\n\t * @param {Boolean} [options.backward] Sets this selection instance to be backward.\n\t */\n\t_setTo( selectable, placeOrOffset, options ) {\n\t\tthis._selection.setTo( selectable, placeOrOffset, options );\n\t}\n\n\t/**\n\t * Sets attribute on the selection. If attribute with the same key already is set, it's value is overwritten.\n\t * Should be used only within the {@link module:engine/model/writer~Writer#setSelectionAttribute} method.\n\t *\n\t * @see module:engine/model/writer~Writer#setSelectionAttribute\n\t * @protected\n\t * @param {String} key Key of the attribute to set.\n\t * @param {*} value Attribute value.\n\t */\n\t_setAttribute( key, value ) {\n\t\tthis._selection.setAttribute( key, value );\n\t}\n\n\t/**\n\t * Removes an attribute with given key from the selection.\n\t * If the given attribute was set on the selection, fires the {@link module:engine/model/selection~Selection#event:change:range}\n\t * event with removed attribute key.\n\t * Should be used only within the {@link module:engine/model/writer~Writer#removeSelectionAttribute} method.\n\t *\n\t * @see module:engine/model/writer~Writer#removeSelectionAttribute\n\t * @protected\n\t * @param {String} key Key of the attribute to remove.\n\t */\n\t_removeAttribute( key ) {\n\t\tthis._selection.removeAttribute( key );\n\t}\n\n\t/**\n\t * Returns an iterable that iterates through all selection attributes stored in current selection's parent.\n\t *\n\t * @protected\n\t * @returns {Iterable.<*>}\n\t */\n\t_getStoredAttributes() {\n\t\treturn this._selection._getStoredAttributes();\n\t}\n\n\t/**\n\t * Temporarily changes the gravity of the selection from the left to the right.\n\t *\n\t * The gravity defines from which direction the selection inherits its attributes. If it's the default left\n\t * gravity, the selection (after being moved by the the user) inherits attributes from its left hand side.\n\t * This method allows to temporarily override this behavior by forcing the gravity to the right.\n\t *\n\t * It returns an unique identifier which is required to restore the gravity. It guarantees the symmetry\n\t * of the process.\n\t *\n\t * @see module:engine/model/writer~Writer#overrideSelectionGravity\n\t * @protected\n\t * @returns {String} The unique id which allows restoring the gravity.\n\t */\n\t_overrideGravity() {\n\t\treturn this._selection.overrideGravity();\n\t}\n\n\t/**\n\t * Restores the {@link ~DocumentSelection#_overrideGravity overridden gravity}.\n\t *\n\t * Restoring the gravity is only possible using the unique identifier returned by\n\t * {@link ~DocumentSelection#_overrideGravity}. Note that the gravity remains overridden as long as won't be restored\n\t * the same number of times it was overridden.\n\t *\n\t * @see module:engine/model/writer~Writer#restoreSelectionGravity\n\t * @protected\n\t * @param {String} uid The unique id returned by {@link #_overrideGravity}.\n\t */\n\t_restoreGravity( uid ) {\n\t\tthis._selection.restoreGravity( uid );\n\t}\n\n\t/**\n\t * Generates and returns an attribute key for selection attributes store, basing on original attribute key.\n\t *\n\t * @protected\n\t * @param {String} key Attribute key to convert.\n\t * @returns {String} Converted attribute key, applicable for selection store.\n\t */\n\tstatic _getStoreAttributeKey( key ) {\n\t\treturn storePrefix + key;\n\t}\n\n\t/**\n\t * Checks whether the given attribute key is an attribute stored on an element.\n\t *\n\t * @protected\n\t * @param {String} key\n\t * @returns {Boolean}\n\t */\n\tstatic _isStoreAttributeKey( key ) {\n\t\treturn key.startsWith( storePrefix );\n\t}\n}\n\nmix( DocumentSelection, EmitterMixin );\n\n/**\n * Fired when selection range(s) changed.\n *\n * @event change:range\n * @param {Boolean} directChange In case of {@link module:engine/model/selection~Selection} class it is always set\n * to `true` which indicates that the selection change was caused by a direct use of selection's API.\n * The {@link module:engine/model/documentselection~DocumentSelection}, however, may change because its position\n * was directly changed through the {@link module:engine/model/writer~Writer writer} or because its position was\n * changed because the structure of the model has been changed (which means an indirect change).\n * The indirect change does not occur in case of normal (detached) selections because they are \"static\" (as \"not live\")\n * which mean that they are not updated once the document changes.\n */\n\n/**\n * Fired when selection attribute changed.\n *\n * @event change:attribute\n * @param {Boolean} directChange In case of {@link module:engine/model/selection~Selection} class it is always set\n * to `true` which indicates that the selection change was caused by a direct use of selection's API.\n * The {@link module:engine/model/documentselection~DocumentSelection}, however, may change because its attributes\n * were directly changed through the {@link module:engine/model/writer~Writer writer} or because its position was\n * changed in the model and its attributes were refreshed (which means an indirect change).\n * The indirect change does not occur in case of normal (detached) selections because they are \"static\" (as \"not live\")\n * which mean that they are not updated once the document changes.\n * @param {Array.<String>} attributeKeys Array containing keys of attributes that changed.\n */\n\n/**\n * Fired when selection marker(s) changed.\n *\n * @event change:marker\n * @param {Boolean} directChange This is always set to `false` in case of `change:marker` event as there is no possibility\n * to change markers directly through {@link module:engine/model/documentselection~DocumentSelection} API.\n * See also {@link module:engine/model/documentselection~DocumentSelection#event:change:range} and\n * {@link module:engine/model/documentselection~DocumentSelection#event:change:attribute}.\n * @param {Array.<module:engine/model/markercollection~Marker>} oldMarkers Markers in which the selection was before the change.\n */\n\n// `LiveSelection` is used internally by {@link module:engine/model/documentselection~DocumentSelection} and shouldn't be used directly.\n//\n// LiveSelection` is automatically updated upon changes in the {@link module:engine/model/document~Document document}\n// to always contain valid ranges. Its attributes are inherited from the text unless set explicitly.\n//\n// Differences between {@link module:engine/model/selection~Selection} and `LiveSelection` are:\n// * there is always a range in `LiveSelection` - even if no ranges were added there is a \"default range\"\n// present in the selection,\n// * ranges added to this selection updates automatically when the document changes,\n// * attributes of `LiveSelection` are updated automatically according to selection ranges.\n//\n// @extends module:engine/model/selection~Selection\n//\nclass LiveSelection extends Selection {\n\t// Creates an empty live selection for given {@link module:engine/model/document~Document}.\n\t// @param {module:engine/model/document~Document} doc Document which owns this selection.\n\tconstructor( doc ) {\n\t\tsuper();\n\n\t\t// List of selection markers.\n\t\t// Marker is a selection marker when selection range is inside the marker range.\n\t\t//\n\t\t// @type {module:utils/collection~Collection}\n\t\tthis.markers = new Collection( { idProperty: 'name' } );\n\n\t\t// Document which owns this selection.\n\t\t//\n\t\t// @protected\n\t\t// @member {module:engine/model/model~Model}\n\t\tthis._model = doc.model;\n\n\t\t// Document which owns this selection.\n\t\t//\n\t\t// @protected\n\t\t// @member {module:engine/model/document~Document}\n\t\tthis._document = doc;\n\n\t\t// Keeps mapping of attribute name to priority with which the attribute got modified (added/changed/removed)\n\t\t// last time. Possible values of priority are: `'low'` and `'normal'`.\n\t\t//\n\t\t// Priorities are used by internal `LiveSelection` mechanisms. All attributes set using `LiveSelection`\n\t\t// attributes API are set with `'normal'` priority.\n\t\t//\n\t\t// @private\n\t\t// @member {Map} module:engine/model/liveselection~LiveSelection#_attributePriority\n\t\tthis._attributePriority = new Map();\n\n\t\t// Position to which the selection should be set if the last selection range was moved to the graveyard.\n\t\t// @private\n\t\t// @member {module:engine/model/position~Position} module:engine/model/liveselection~LiveSelection#_selectionRestorePosition\n\t\tthis._selectionRestorePosition = null;\n\n\t\t// Flag that informs whether the selection ranges have changed. It is changed on true when `LiveRange#change:range` event is fired.\n\t\t// @private\n\t\t// @member {Array} module:engine/model/liveselection~LiveSelection#_hasChangedRange\n\t\tthis._hasChangedRange = false;\n\n\t\t// Each overriding gravity adds an UID to the set and each removal removes it.\n\t\t// Gravity is overridden when there's at least one UID in the set.\n\t\t// Gravity is restored when the set is empty.\n\t\t// This is to prevent conflicts when gravity is overridden by more than one feature at the same time.\n\t\t// @private\n\t\t// @type {Set}\n\t\tthis._overriddenGravityRegister = new Set();\n\n\t\t// Prefixes of marker names that should affect `LiveSelection#markers` collection.\n\t\t// @private\n\t\t// @type {Set}\n\t\tthis._observedMarkers = new Set();\n\n\t\t// Ensure selection is correct after each operation.\n\t\tthis.listenTo( this._model, 'applyOperation', ( evt, args ) => {\n\t\t\tconst operation = args[ 0 ];\n\n\t\t\tif ( !operation.isDocumentOperation || operation.type == 'marker' || operation.type == 'rename' || operation.type == 'noop' ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Fix selection if the last range was removed from it and we have a position to which we can restore the selection.\n\t\t\tif ( this._ranges.length == 0 && this._selectionRestorePosition ) {\n\t\t\t\tthis._fixGraveyardSelection( this._selectionRestorePosition );\n\t\t\t}\n\n\t\t\t// \"Forget\" the restore position even if it was not \"used\".\n\t\t\tthis._selectionRestorePosition = null;\n\n\t\t\tif ( this._hasChangedRange ) {\n\t\t\t\tthis._hasChangedRange = false;\n\t\t\t\tthis.fire( 'change:range', { directChange: false } );\n\t\t\t}\n\t\t}, { priority: 'lowest' } );\n\n\t\t// Ensure selection is correct and up to date after each range change.\n\t\tthis.on( 'change:range', () => {\n\t\t\tfor ( const range of this.getRanges() ) {\n\t\t\t\tif ( !this._document._validateSelectionRange( range ) ) {\n\t\t\t\t\t/**\n\t\t\t\t\t * Range from {@link module:engine/model/documentselection~DocumentSelection document selection}\n\t\t\t\t\t * starts or ends at incorrect position.\n\t\t\t\t\t *\n\t\t\t\t\t * @error document-selection-wrong-position\n\t\t\t\t\t * @param {module:engine/model/range~Range} range\n\t\t\t\t\t */\n\t\t\t\t\tthrow new CKEditorError(\n\t\t\t\t\t\t'document-selection-wrong-position',\n\t\t\t\t\t\tthis,\n\t\t\t\t\t\t{ range }\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\n\t\t// Update markers data stored by the selection after each marker change.\n\t\t// This handles only marker changes done through marker operations (not model tree changes).\n\t\tthis.listenTo( this._model.markers, 'update', ( evt, marker, oldRange, newRange ) => {\n\t\t\tthis._updateMarker( marker, newRange );\n\t\t} );\n\n\t\t// Ensure selection is up to date after each change block.\n\t\tthis.listenTo( this._document, 'change', ( evt, batch ) => {\n\t\t\tclearAttributesStoredInElement( this._model, batch );\n\t\t} );\n\t}\n\n\tget isCollapsed() {\n\t\tconst length = this._ranges.length;\n\n\t\treturn length === 0 ? this._document._getDefaultRange().isCollapsed : super.isCollapsed;\n\t}\n\n\tget anchor() {\n\t\treturn super.anchor || this._document._getDefaultRange().start;\n\t}\n\n\tget focus() {\n\t\treturn super.focus || this._document._getDefaultRange().end;\n\t}\n\n\tget rangeCount() {\n\t\treturn this._ranges.length ? this._ranges.length : 1;\n\t}\n\n\t// Describes whether `LiveSelection` has own range(s) set, or if it is defaulted to\n\t// {@link module:engine/model/document~Document#_getDefaultRange document's default range}.\n\t//\n\t// @readonly\n\t// @type {Boolean}\n\tget hasOwnRange() {\n\t\treturn this._ranges.length > 0;\n\t}\n\n\t// When set to `true` then selection attributes on node before the caret won't be taken\n\t// into consideration while updating selection attributes.\n\t//\n\t// @protected\n\t// @type {Boolean}\n\tget isGravityOverridden() {\n\t\treturn !!this._overriddenGravityRegister.size;\n\t}\n\n\t// Unbinds all events previously bound by live selection.\n\tdestroy() {\n\t\tfor ( let i = 0; i < this._ranges.length; i++ ) {\n\t\t\tthis._ranges[ i ].detach();\n\t\t}\n\n\t\tthis.stopListening();\n\t}\n\n\t* getRanges() {\n\t\tif ( this._ranges.length ) {\n\t\t\tyield* super.getRanges();\n\t\t} else {\n\t\t\tyield this._document._getDefaultRange();\n\t\t}\n\t}\n\n\tgetFirstRange() {\n\t\treturn super.getFirstRange() || this._document._getDefaultRange();\n\t}\n\n\tgetLastRange() {\n\t\treturn super.getLastRange() || this._document._getDefaultRange();\n\t}\n\n\tsetTo( selectable, optionsOrPlaceOrOffset, options ) {\n\t\tsuper.setTo( selectable, optionsOrPlaceOrOffset, options );\n\t\tthis._updateAttributes( true );\n\t\tthis._updateMarkers();\n\t}\n\n\tsetFocus( itemOrPosition, offset ) {\n\t\tsuper.setFocus( itemOrPosition, offset );\n\t\tthis._updateAttributes( true );\n\t\tthis._updateMarkers();\n\t}\n\n\tsetAttribute( key, value ) {\n\t\tif ( this._setAttribute( key, value ) ) {\n\t\t\t// Fire event with exact data.\n\t\t\tconst attributeKeys = [ key ];\n\t\t\tthis.fire( 'change:attribute', { attributeKeys, directChange: true } );\n\t\t}\n\t}\n\n\tremoveAttribute( key ) {\n\t\tif ( this._removeAttribute( key ) ) {\n\t\t\t// Fire event with exact data.\n\t\t\tconst attributeKeys = [ key ];\n\t\t\tthis.fire( 'change:attribute', { attributeKeys, directChange: true } );\n\t\t}\n\t}\n\n\toverrideGravity() {\n\t\tconst overrideUid = uid();\n\n\t\t// Remember that another overriding has been requested. It will need to be removed\n\t\t// before the gravity is to be restored.\n\t\tthis._overriddenGravityRegister.add( overrideUid );\n\n\t\tif ( this._overriddenGravityRegister.size === 1 ) {\n\t\t\tthis._updateAttributes( true );\n\t\t}\n\n\t\treturn overrideUid;\n\t}\n\n\trestoreGravity( uid ) {\n\t\tif ( !this._overriddenGravityRegister.has( uid ) ) {\n\t\t\t/**\n\t\t\t * Restoring gravity for an unknown UID is not possible. Make sure you are using a correct\n\t\t\t * UID obtained from the {@link module:engine/model/writer~Writer#overrideSelectionGravity} to restore.\n\t\t\t *\n\t\t\t * @error document-selection-gravity-wrong-restore\n\t\t\t * @param {String} uid The unique identifier returned by\n\t\t\t * {@link module:engine/model/documentselection~DocumentSelection#_overrideGravity}.\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'document-selection-gravity-wrong-restore',\n\t\t\t\tthis,\n\t\t\t\t{ uid }\n\t\t\t);\n\t\t}\n\n\t\tthis._overriddenGravityRegister.delete( uid );\n\n\t\t// Restore gravity only when all overriding have been restored.\n\t\tif ( !this.isGravityOverridden ) {\n\t\t\tthis._updateAttributes( true );\n\t\t}\n\t}\n\n\tobserveMarkers( prefixOrName ) {\n\t\tthis._observedMarkers.add( prefixOrName );\n\t\tthis._updateMarkers();\n\t}\n\n\t_popRange() {\n\t\tthis._ranges.pop().detach();\n\t}\n\n\t_pushRange( range ) {\n\t\tconst liveRange = this._prepareRange( range );\n\n\t\t// `undefined` is returned when given `range` is in graveyard root.\n\t\tif ( liveRange ) {\n\t\t\tthis._ranges.push( liveRange );\n\t\t}\n\t}\n\n\t// Prepares given range to be added to selection. Checks if it is correct,\n\t// converts it to {@link module:engine/model/liverange~LiveRange LiveRange}\n\t// and sets listeners listening to the range's change event.\n\t//\n\t// @private\n\t// @param {module:engine/model/range~Range} range\n\t_prepareRange( range ) {\n\t\tthis._checkRange( range );\n\n\t\tif ( range.root == this._document.graveyard ) {\n\t\t\t// @if CK_DEBUG // console.warn( 'Trying to add a Range that is in the graveyard root. Range rejected.' );\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst liveRange = LiveRange.fromRange( range );\n\n\t\t// If selection range is moved to the graveyard remove it from the selection object.\n\t\t// Also, save some data that can be used to restore selection later, on `Model#applyOperation` event.\n\t\tliveRange.on( 'change:range', ( evt, oldRange, data ) => {\n\t\t\tthis._hasChangedRange = true;\n\n\t\t\tif ( liveRange.root == this._document.graveyard ) {\n\t\t\t\tthis._selectionRestorePosition = data.deletionPosition;\n\n\t\t\t\tconst index = this._ranges.indexOf( liveRange );\n\t\t\t\tthis._ranges.splice( index, 1 );\n\t\t\t\tliveRange.detach();\n\t\t\t}\n\t\t} );\n\n\t\treturn liveRange;\n\t}\n\n\t_updateMarkers() {\n\t\tif ( !this._observedMarkers.size ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst markers = [];\n\t\tlet changed = false;\n\n\t\tfor ( const marker of this._model.markers ) {\n\t\t\tconst markerGroup = marker.name.split( ':', 1 )[ 0 ];\n\n\t\t\tif ( !this._observedMarkers.has( markerGroup ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst markerRange = marker.getRange();\n\n\t\t\tfor ( const selectionRange of this.getRanges() ) {\n\t\t\t\tif ( markerRange.containsRange( selectionRange, !selectionRange.isCollapsed ) ) {\n\t\t\t\t\tmarkers.push( marker );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst oldMarkers = Array.from( this.markers );\n\n\t\tfor ( const marker of markers ) {\n\t\t\tif ( !this.markers.has( marker ) ) {\n\t\t\t\tthis.markers.add( marker );\n\n\t\t\t\tchanged = true;\n\t\t\t}\n\t\t}\n\n\t\tfor ( const marker of Array.from( this.markers ) ) {\n\t\t\tif ( !markers.includes( marker ) ) {\n\t\t\t\tthis.markers.remove( marker );\n\n\t\t\t\tchanged = true;\n\t\t\t}\n\t\t}\n\n\t\tif ( changed ) {\n\t\t\tthis.fire( 'change:marker', { oldMarkers, directChange: false } );\n\t\t}\n\t}\n\n\t_updateMarker( marker, markerRange ) {\n\t\tconst markerGroup = marker.name.split( ':', 1 )[ 0 ];\n\n\t\tif ( !this._observedMarkers.has( markerGroup ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet changed = false;\n\n\t\tconst oldMarkers = Array.from( this.markers );\n\t\tconst hasMarker = this.markers.has( marker );\n\n\t\tif ( !markerRange ) {\n\t\t\tif ( hasMarker ) {\n\t\t\t\tthis.markers.remove( marker );\n\t\t\t\tchanged = true;\n\t\t\t}\n\t\t} else {\n\t\t\tlet contained = false;\n\n\t\t\tfor ( const selectionRange of this.getRanges() ) {\n\t\t\t\tif ( markerRange.containsRange( selectionRange, !selectionRange.isCollapsed ) ) {\n\t\t\t\t\tcontained = true;\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( contained && !hasMarker ) {\n\t\t\t\tthis.markers.add( marker );\n\n\t\t\t\tchanged = true;\n\t\t\t} else if ( !contained && hasMarker ) {\n\t\t\t\tthis.markers.remove( marker );\n\n\t\t\t\tchanged = true;\n\t\t\t}\n\t\t}\n\n\t\tif ( changed ) {\n\t\t\tthis.fire( 'change:marker', { oldMarkers, directChange: false } );\n\t\t}\n\t}\n\n\t// Updates this selection attributes according to its ranges and the {@link module:engine/model/document~Document model document}.\n\t//\n\t// @protected\n\t// @param {Boolean} clearAll\n\t// @fires change:attribute\n\t_updateAttributes( clearAll ) {\n\t\tconst newAttributes = toMap( this._getSurroundingAttributes() );\n\t\tconst oldAttributes = toMap( this.getAttributes() );\n\n\t\tif ( clearAll ) {\n\t\t\t// If `clearAll` remove all attributes and reset priorities.\n\t\t\tthis._attributePriority = new Map();\n\t\t\tthis._attrs = new Map();\n\t\t} else {\n\t\t\t// If not, remove only attributes added with `low` priority.\n\t\t\tfor ( const [ key, priority ] of this._attributePriority ) {\n\t\t\t\tif ( priority == 'low' ) {\n\t\t\t\t\tthis._attrs.delete( key );\n\t\t\t\t\tthis._attributePriority.delete( key );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._setAttributesTo( newAttributes );\n\n\t\t// Let's evaluate which attributes really changed.\n\t\tconst changed = [];\n\n\t\t// First, loop through all attributes that are set on selection right now.\n\t\t// Check which of them are different than old attributes.\n\t\tfor ( const [ newKey, newValue ] of this.getAttributes() ) {\n\t\t\tif ( !oldAttributes.has( newKey ) || oldAttributes.get( newKey ) !== newValue ) {\n\t\t\t\tchanged.push( newKey );\n\t\t\t}\n\t\t}\n\n\t\t// Then, check which of old attributes got removed.\n\t\tfor ( const [ oldKey ] of oldAttributes ) {\n\t\t\tif ( !this.hasAttribute( oldKey ) ) {\n\t\t\t\tchanged.push( oldKey );\n\t\t\t}\n\t\t}\n\n\t\t// Fire event with exact data (fire only if anything changed).\n\t\tif ( changed.length > 0 ) {\n\t\t\tthis.fire( 'change:attribute', { attributeKeys: changed, directChange: false } );\n\t\t}\n\t}\n\n\t// Internal method for setting `LiveSelection` attribute. Supports attribute priorities (through `directChange`\n\t// parameter).\n\t//\n\t// @private\n\t// @param {String} key Attribute key.\n\t// @param {*} value Attribute value.\n\t// @param {Boolean} [directChange=true] `true` if the change is caused by `Selection` API, `false` if change\n\t// is caused by `Batch` API.\n\t// @returns {Boolean} Whether value has changed.\n\t_setAttribute( key, value, directChange = true ) {\n\t\tconst priority = directChange ? 'normal' : 'low';\n\n\t\tif ( priority == 'low' && this._attributePriority.get( key ) == 'normal' ) {\n\t\t\t// Priority too low.\n\t\t\treturn false;\n\t\t}\n\n\t\tconst oldValue = super.getAttribute( key );\n\n\t\t// Don't do anything if value has not changed.\n\t\tif ( oldValue === value ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis._attrs.set( key, value );\n\n\t\t// Update priorities map.\n\t\tthis._attributePriority.set( key, priority );\n\n\t\treturn true;\n\t}\n\n\t// Internal method for removing `LiveSelection` attribute. Supports attribute priorities (through `directChange`\n\t// parameter).\n\t//\n\t// NOTE: Even if attribute is not present in the selection but is provided to this method, it's priority will\n\t// be changed according to `directChange` parameter.\n\t//\n\t// @private\n\t// @param {String} key Attribute key.\n\t// @param {Boolean} [directChange=true] `true` if the change is caused by `Selection` API, `false` if change\n\t// is caused by `Batch` API.\n\t// @returns {Boolean} Whether attribute was removed. May not be true if such attributes didn't exist or the\n\t// existing attribute had higher priority.\n\t_removeAttribute( key, directChange = true ) {\n\t\tconst priority = directChange ? 'normal' : 'low';\n\n\t\tif ( priority == 'low' && this._attributePriority.get( key ) == 'normal' ) {\n\t\t\t// Priority too low.\n\t\t\treturn false;\n\t\t}\n\n\t\t// Update priorities map.\n\t\tthis._attributePriority.set( key, priority );\n\n\t\t// Don't do anything if value has not changed.\n\t\tif ( !super.hasAttribute( key ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis._attrs.delete( key );\n\n\t\treturn true;\n\t}\n\n\t// Internal method for setting multiple `LiveSelection` attributes. Supports attribute priorities (through\n\t// `directChange` parameter).\n\t//\n\t// @private\n\t// @param {Map.<String,*>} attrs Iterable object containing attributes to be set.\n\t// @returns {Set.<String>} Changed attribute keys.\n\t_setAttributesTo( attrs ) {\n\t\tconst changed = new Set();\n\n\t\tfor ( const [ oldKey, oldValue ] of this.getAttributes() ) {\n\t\t\t// Do not remove attribute if attribute with same key and value is about to be set.\n\t\t\tif ( attrs.get( oldKey ) === oldValue ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// All rest attributes will be removed so changed attributes won't change .\n\t\t\tthis._removeAttribute( oldKey, false );\n\t\t}\n\n\t\tfor ( const [ key, value ] of attrs ) {\n\t\t\t// Attribute may not be set because of attributes or because same key/value is already added.\n\t\t\tconst gotAdded = this._setAttribute( key, value, false );\n\n\t\t\tif ( gotAdded ) {\n\t\t\t\tchanged.add( key );\n\t\t\t}\n\t\t}\n\n\t\treturn changed;\n\t}\n\n\t// Returns an iterable that iterates through all selection attributes stored in current selection's parent.\n\t//\n\t// @protected\n\t// @returns {Iterable.<*>}\n\t* _getStoredAttributes() {\n\t\tconst selectionParent = this.getFirstPosition().parent;\n\n\t\tif ( this.isCollapsed && selectionParent.isEmpty ) {\n\t\t\tfor ( const key of selectionParent.getAttributeKeys() ) {\n\t\t\t\tif ( key.startsWith( storePrefix ) ) {\n\t\t\t\t\tconst realKey = key.substr( storePrefix.length );\n\n\t\t\t\t\tyield [ realKey, selectionParent.getAttribute( key ) ];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Checks model text nodes that are closest to the selection's first position and returns attributes of first\n\t// found element. If there are no text nodes in selection's first position parent, it returns selection\n\t// attributes stored in that parent.\n\t//\n\t// @private\n\t// @returns {Iterable.<*>} Collection of attributes.\n\t_getSurroundingAttributes() {\n\t\tconst position = this.getFirstPosition();\n\t\tconst schema = this._model.schema;\n\n\t\tlet attrs = null;\n\n\t\tif ( !this.isCollapsed ) {\n\t\t\t// 1. If selection is a range...\n\t\t\tconst range = this.getFirstRange();\n\n\t\t\t// ...look for a first character node in that range and take attributes from it.\n\t\t\tfor ( const value of range ) {\n\t\t\t\t// If the item is an object, we don't want to get attributes from its children.\n\t\t\t\tif ( value.item.is( 'element' ) && schema.isObject( value.item ) ) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tif ( value.type == 'text' ) {\n\t\t\t\t\tattrs = value.item.getAttributes();\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\t// 2. If the selection is a caret or the range does not contain a character node...\n\n\t\t\tconst nodeBefore = position.textNode ? position.textNode : position.nodeBefore;\n\t\t\tconst nodeAfter = position.textNode ? position.textNode : position.nodeAfter;\n\n\t\t\t// When gravity is overridden then don't take node before into consideration.\n\t\t\tif ( !this.isGravityOverridden ) {\n\t\t\t\t// ...look at the node before caret and take attributes from it if it is a character node.\n\t\t\t\tattrs = getAttrsIfCharacter( nodeBefore );\n\t\t\t}\n\n\t\t\t// 3. If not, look at the node after caret...\n\t\t\tif ( !attrs ) {\n\t\t\t\tattrs = getAttrsIfCharacter( nodeAfter );\n\t\t\t}\n\n\t\t\t// 4. If not, try to find the first character on the left, that is in the same node.\n\t\t\t// When gravity is overridden then don't take node before into consideration.\n\t\t\tif ( !this.isGravityOverridden && !attrs ) {\n\t\t\t\tlet node = nodeBefore;\n\n\t\t\t\twhile ( node && !schema.isInline( node ) && !attrs ) {\n\t\t\t\t\tnode = node.previousSibling;\n\t\t\t\t\tattrs = getAttrsIfCharacter( node );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// 5. If not found, try to find the first character on the right, that is in the same node.\n\t\t\tif ( !attrs ) {\n\t\t\t\tlet node = nodeAfter;\n\n\t\t\t\twhile ( node && !schema.isInline( node ) && !attrs ) {\n\t\t\t\t\tnode = node.nextSibling;\n\t\t\t\t\tattrs = getAttrsIfCharacter( node );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// 6. If not found, selection should retrieve attributes from parent.\n\t\t\tif ( !attrs ) {\n\t\t\t\tattrs = this._getStoredAttributes();\n\t\t\t}\n\t\t}\n\n\t\treturn attrs;\n\t}\n\n\t// Fixes the selection after all its ranges got removed.\n\t//\n\t// @private\n\t// @param {module:engine/model/position~Position} deletionPosition Position where the deletion happened.\n\t_fixGraveyardSelection( deletionPosition ) {\n\t\t// Find a range that is a correct selection range and is closest to the position where the deletion happened.\n\t\tconst selectionRange = this._model.schema.getNearestSelectionRange( deletionPosition );\n\n\t\t// If nearest valid selection range has been found - add it in the place of old range.\n\t\tif ( selectionRange ) {\n\t\t\t// Check the range, convert it to live range, bind events, etc.\n\t\t\tthis._pushRange( selectionRange );\n\t\t}\n\t\t// If nearest valid selection range cannot be found don't add any range. Selection will be set to the default range.\n\t}\n}\n\n// Helper function for {@link module:engine/model/liveselection~LiveSelection#_updateAttributes}.\n//\n// It takes model item, checks whether it is a text node (or text proxy) and, if so, returns it's attributes. If not, returns `null`.\n//\n// @param {module:engine/model/item~Item|null}  node\n// @returns {Boolean}\nfunction getAttrsIfCharacter( node ) {\n\tif ( node instanceof TextProxy || node instanceof Text ) {\n\t\treturn node.getAttributes();\n\t}\n\n\treturn null;\n}\n\n// Removes selection attributes from element which is not empty anymore.\n//\n// @param {module:engine/model/model~Model} model\n// @param {module:engine/model/batch~Batch} batch\nfunction clearAttributesStoredInElement( model, batch ) {\n\tconst differ = model.document.differ;\n\n\tfor ( const entry of differ.getChanges() ) {\n\t\tif ( entry.type != 'insert' ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tconst changeParent = entry.position.parent;\n\t\tconst isNoLongerEmpty = entry.length === changeParent.maxOffset;\n\n\t\tif ( isNoLongerEmpty ) {\n\t\t\tmodel.enqueueChange( batch, writer => {\n\t\t\t\tconst storedAttributes = Array.from( changeParent.getAttributeKeys() )\n\t\t\t\t\t.filter( key => key.startsWith( storePrefix ) );\n\n\t\t\t\tfor ( const key of storedAttributes ) {\n\t\t\t\t\twriter.removeAttribute( key, changeParent );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/conversion/conversionhelpers\n */\n\n/**\n * Base class for conversion helpers.\n */\nexport default class ConversionHelpers {\n\t/**\n\t * Creates a conversion helpers instance.\n\t *\n\t * @param {Array.<module:engine/conversion/downcastdispatcher~DowncastDispatcher|\n\t * module:engine/conversion/upcastdispatcher~UpcastDispatcher>} dispatchers\n\t */\n\tconstructor( dispatchers ) {\n\t\tthis._dispatchers = dispatchers;\n\t}\n\n\t/**\n\t * Registers a conversion helper.\n\t *\n\t * **Note**: See full usage example in the `{@link module:engine/conversion/conversion~Conversion#for conversion.for()}`\n\t * method description.\n\t *\n\t * @param {Function} conversionHelper The function to be called on event.\n\t * @returns {module:engine/conversion/downcasthelpers~DowncastHelpers|module:engine/conversion/upcasthelpers~UpcastHelpers}\n\t */\n\tadd( conversionHelper ) {\n\t\tfor ( const dispatcher of this._dispatchers ) {\n\t\t\tconversionHelper( dispatcher );\n\t\t}\n\n\t\treturn this;\n\t}\n}\n","import baseClone from './_baseClone.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG);\n}\n\nexport default cloneDeep;\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * Contains downcast (model-to-view) converters for {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher}.\n *\n * @module engine/conversion/downcasthelpers\n */\n\nimport ModelRange from '../model/range';\nimport ModelSelection from '../model/selection';\nimport ModelElement from '../model/element';\n\nimport ViewAttributeElement from '../view/attributeelement';\nimport DocumentSelection from '../model/documentselection';\nimport ConversionHelpers from './conversionhelpers';\n\nimport { cloneDeep } from 'lodash-es';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport toArray from '@ckeditor/ckeditor5-utils/src/toarray';\n\n/**\n * Downcast conversion helper functions.\n *\n * @extends module:engine/conversion/conversionhelpers~ConversionHelpers\n */\nexport default class DowncastHelpers extends ConversionHelpers {\n\t/**\n\t * Model element to view element conversion helper.\n\t *\n\t * This conversion results in creating a view element. For example, model `<paragraph>Foo</paragraph>` becomes `<p>Foo</p>` in the view.\n\t *\n\t *\t\teditor.conversion.for( 'downcast' ).elementToElement( {\n\t *\t\t\tmodel: 'paragraph',\n\t *\t\t\tview: 'p'\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'downcast' ).elementToElement( {\n\t *\t\t\tmodel: 'paragraph',\n\t *\t\t\tview: 'div',\n\t *\t\t\tconverterPriority: 'high'\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'downcast' ).elementToElement( {\n\t *\t\t\tmodel: 'fancyParagraph',\n\t *\t\t\tview: {\n\t *\t\t\t\tname: 'p',\n\t *\t\t\t\tclasses: 'fancy'\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'downcast' ).elementToElement( {\n\t *\t\t\tmodel: 'heading',\n\t *\t\t\tview: ( modelElement, conversionApi ) => {\n\t *\t\t\t\tconst { writer } = conversionApi;\n\t *\n\t *\t\t\t\treturn writer.createContainerElement( 'h' + modelElement.getAttribute( 'level' ) );\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t * The element-to-element conversion supports the reconversion mechanism. This is helpful in the conversion to complex view structures\n\t * where multiple atomic element-to-element and attribute-to-attribute or attribute-to-element could be used. By specifying\n\t * `triggerBy()` events you can trigger reconverting the model to full view tree structures at once.\n\t *\n\t *\t\teditor.conversion.for( 'downcast' ).elementToElement( {\n\t *\t\t\tmodel: 'complex',\n\t *\t\t\tview: ( modelElement, conversionApi ) => createComplexViewFromModel( modelElement, conversionApi ),\n\t *\t\t\ttriggerBy: {\n\t *\t\t\t\tattributes: [ 'foo', 'bar' ],\n\t *\t\t\t\tchildren: [ 'slot' ]\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t * See {@link module:engine/conversion/conversion~Conversion#for `conversion.for()`} to learn how to add a converter\n\t * to the conversion process.\n\t *\n\t * You can read more about element-to-element conversion in the\n\t * {@glink framework/guides/deep-dive/conversion/custom-element-conversion Custom element conversion} guide.\n\t *\n\t * @method #elementToElement\n\t * @param {Object} config Conversion configuration.\n\t * @param {String} config.model The name of the model element to convert.\n\t * @param {module:engine/view/elementdefinition~ElementDefinition|Function} config.view A view element definition or a function\n\t * that takes the model element and {@link module:engine/conversion/downcastdispatcher~DowncastConversionApi downcast conversion API}\n\t * as parameters and returns a view container element.\n\t * @param {Object} [config.triggerBy] Reconversion triggers. At least one trigger must be defined.\n\t * @param {Array.<String>} config.triggerBy.attributes The name of the element's attributes whose change will trigger element\n\t * reconversion.\n\t * @param {Array.<String>} config.triggerBy.children The name of direct children whose adding or removing will trigger element\n\t * reconversion.\n\t * @returns {module:engine/conversion/downcasthelpers~DowncastHelpers}\n\t */\n\telementToElement( config ) {\n\t\treturn this.add( downcastElementToElement( config ) );\n\t}\n\n\t/**\n\t * Model attribute to view element conversion helper.\n\t *\n\t * This conversion results in wrapping view nodes with a view attribute element. For example, a model text node with\n\t * `\"Foo\"` as data and the `bold` attribute becomes `<strong>Foo</strong>` in the view.\n\t *\n\t *\t\teditor.conversion.for( 'downcast' ).attributeToElement( {\n\t *\t\t\tmodel: 'bold',\n\t *\t\t\tview: 'strong'\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'downcast' ).attributeToElement( {\n\t *\t\t\tmodel: 'bold',\n\t *\t\t\tview: 'b',\n\t *\t\t\tconverterPriority: 'high'\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'downcast' ).attributeToElement( {\n\t *\t\t\tmodel: 'invert',\n\t *\t\t\tview: {\n\t *\t\t\t\tname: 'span',\n\t *\t\t\t\tclasses: [ 'font-light', 'bg-dark' ]\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'downcast' ).attributeToElement( {\n\t *\t\t\tmodel: {\n\t *\t\t\t\tkey: 'fontSize',\n\t *\t\t\t\tvalues: [ 'big', 'small' ]\n\t *\t\t\t},\n\t *\t\t\tview: {\n\t *\t\t\t\tbig: {\n\t *\t\t\t\t\tname: 'span',\n\t *\t\t\t\t\tstyles: {\n\t *\t\t\t\t\t\t'font-size': '1.2em'\n\t *\t\t\t\t\t}\n\t *\t\t\t\t},\n\t *\t\t\t\tsmall: {\n\t *\t\t\t\t\tname: 'span',\n\t *\t\t\t\t\tstyles: {\n\t *\t\t\t\t\t\t'font-size': '0.8em'\n\t *\t\t\t\t\t}\n\t *\t\t\t\t}\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'downcast' ).attributeToElement( {\n\t *\t\t\tmodel: 'bold',\n\t *\t\t\tview: ( modelAttributeValue, conversionApi ) => {\n\t *\t\t\t\tconst { writer } = conversionApi;\n\t *\n\t *\t\t\t\treturn writer.createAttributeElement( 'span', {\n\t *\t\t\t\t\tstyle: 'font-weight:' + modelAttributeValue\n\t *\t\t\t\t} );\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'downcast' ).attributeToElement( {\n\t *\t\t\tmodel: {\n\t *\t\t\t\tkey: 'color',\n\t *\t\t\t\tname: '$text'\n\t *\t\t\t},\n\t *\t\t\tview: ( modelAttributeValue, conversionApi ) => {\n\t *\t\t\t\tconst { writer } = conversionApi;\n\t *\n\t *\t\t\t\treturn writer.createAttributeElement( 'span', {\n\t *\t\t\t\t\tstyle: 'color:' + modelAttributeValue\n\t *\t\t\t\t} );\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t * See {@link module:engine/conversion/conversion~Conversion#for `conversion.for()`} to learn how to add a converter\n\t * to the conversion process.\n\t *\n\t * @method #attributeToElement\n\t * @param {Object} config Conversion configuration.\n\t * @param {String|Object} config.model The key of the attribute to convert from or a `{ key, values }` object. `values` is an array\n\t * of `String`s with possible values if the model attribute is an enumerable.\n\t * @param {module:engine/view/elementdefinition~ElementDefinition|Function|Object} config.view A view element definition or a function\n\t * that takes the model attribute value and\n\t * {@link module:engine/conversion/downcastdispatcher~DowncastConversionApi downcast conversion API} as parameters and returns a view\n\t * attribute element. If `config.model.values` is given, `config.view` should be an object assigning values from `config.model.values`\n\t * to view element definitions or functions.\n\t * @param {module:utils/priorities~PriorityString} [config.converterPriority='normal'] Converter priority.\n\t * @returns {module:engine/conversion/downcasthelpers~DowncastHelpers}\n\t */\n\tattributeToElement( config ) {\n\t\treturn this.add( downcastAttributeToElement( config ) );\n\t}\n\n\t/**\n\t * Model attribute to view attribute conversion helper.\n\t *\n\t * This conversion results in adding an attribute to a view node, basing on an attribute from a model node. For example,\n\t * `<image src='foo.jpg'></image>` is converted to `<img src='foo.jpg'></img>`.\n\t *\n\t *\t\teditor.conversion.for( 'downcast' ).attributeToAttribute( {\n\t *\t\t\tmodel: 'source',\n\t *\t\t\tview: 'src'\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'downcast' ).attributeToAttribute( {\n\t *\t\t\tmodel: 'source',\n\t *\t\t\tview: 'href',\n\t *\t\t\tconverterPriority: 'high'\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'downcast' ).attributeToAttribute( {\n\t *\t\t\tmodel: {\n\t *\t\t\t\tname: 'image',\n\t *\t\t\t\tkey: 'source'\n\t *\t\t\t},\n\t *\t\t\tview: 'src'\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'downcast' ).attributeToAttribute( {\n\t *\t\t\tmodel: {\n\t *\t\t\t\tname: 'styled',\n\t *\t\t\t\tvalues: [ 'dark', 'light' ]\n\t *\t\t\t},\n\t *\t\t\tview: {\n\t *\t\t\t\tdark: {\n\t *\t\t\t\t\tkey: 'class',\n\t *\t\t\t\t\tvalue: [ 'styled', 'styled-dark' ]\n\t *\t\t\t\t},\n\t *\t\t\t\tlight: {\n\t *\t\t\t\t\tkey: 'class',\n\t *\t\t\t\t\tvalue: [ 'styled', 'styled-light' ]\n\t *\t\t\t\t}\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'downcast' ).attributeToAttribute( {\n\t *\t\t\tmodel: 'styled',\n\t *\t\t\tview: modelAttributeValue => ( {\n\t *\t\t\t\tkey: 'class',\n\t *\t\t\t\tvalue: 'styled-' + modelAttributeValue\n\t *\t\t\t} )\n\t *\t\t} );\n\t *\n\t * **Note**: Downcasting to a style property requires providing `value` as an object:\n\t *\n\t *\t\teditor.conversion.for( 'downcast' ).attributeToAttribute( {\n\t *\t\t\tmodel: 'lineHeight',\n\t *\t\t\tview: modelAttributeValue => ( {\n\t *\t\t\t\tkey: 'style',\n\t *\t\t\t\tvalue: {\n\t *\t\t\t\t\t'line-height': modelAttributeValue,\n\t *\t\t\t\t\t'border-bottom': '1px dotted #ba2'\n\t *\t\t\t\t}\n\t *\t\t\t} )\n\t *\t\t} );\n\t *\n\t * See {@link module:engine/conversion/conversion~Conversion#for `conversion.for()`} to learn how to add a converter\n\t * to the conversion process.\n\t *\n\t * @method #attributeToAttribute\n\t * @param {Object} config Conversion configuration.\n\t * @param {String|Object} config.model The key of the attribute to convert from or a `{ key, values, [ name ] }` object describing\n\t * the attribute key, possible values and, optionally, an element name to convert from.\n\t * @param {String|Object|Function} config.view A view attribute key, or a `{ key, value }` object or a function that takes\n\t * the model attribute value and {@link module:engine/conversion/downcastdispatcher~DowncastConversionApi downcast conversion API}\n\t * as parameters and returns a `{ key, value }` object. If `key` is `'class'`, `value` can be a `String` or an\n\t * array of `String`s. If `key` is `'style'`, `value` is an object with key-value pairs. In other cases, `value` is a `String`.\n\t * If `config.model.values` is set, `config.view` should be an object assigning values from `config.model.values` to\n\t * `{ key, value }` objects or a functions.\n\t * @param {module:utils/priorities~PriorityString} [config.converterPriority='normal'] Converter priority.\n\t * @returns {module:engine/conversion/downcasthelpers~DowncastHelpers}\n\t */\n\tattributeToAttribute( config ) {\n\t\treturn this.add( downcastAttributeToAttribute( config ) );\n\t}\n\n\t/**\n\t * Model marker to view element conversion helper.\n\t *\n\t * **Note**: This method should be used only for editing downcast. For data downcast, use\n\t * {@link #markerToData `#markerToData()`} that produces valid HTML data.\n\t *\n\t * This conversion results in creating a view element on the boundaries of the converted marker. If the converted marker\n\t * is collapsed, only one element is created. For example, model marker set like this: `<paragraph>F[oo b]ar</paragraph>`\n\t * becomes `<p>F<span data-marker=\"search\"></span>oo b<span data-marker=\"search\"></span>ar</p>` in the view.\n\t *\n\t *\t\teditor.conversion.for( 'editingDowncast' ).markerToElement( {\n\t *\t\t\tmodel: 'search',\n\t *\t\t\tview: 'marker-search'\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'editingDowncast' ).markerToElement( {\n\t *\t\t\tmodel: 'search',\n\t *\t\t\tview: 'search-result',\n\t *\t\t\tconverterPriority: 'high'\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'editingDowncast' ).markerToElement( {\n\t *\t\t\tmodel: 'search',\n\t *\t\t\tview: {\n\t *\t\t\t\tname: 'span',\n\t *\t\t\t\tattributes: {\n\t *\t\t\t\t\t'data-marker': 'search'\n\t *\t\t\t\t}\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'editingDowncast' ).markerToElement( {\n\t *\t\t\tmodel: 'search',\n\t *\t\t\tview: ( markerData, conversionApi ) => {\n\t *\t\t\t\tconst { writer } = conversionApi;\n\t *\n\t *\t\t\t\treturn writer.createUIElement( 'span', {\n\t *\t\t\t\t\t'data-marker': 'search',\n\t *\t\t\t\t\t'data-start': markerData.isOpening\n\t *\t\t\t\t} );\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t * If a function is passed as the `config.view` parameter, it will be used to generate both boundary elements. The function\n\t * receives the `data` object and {@link module:engine/conversion/downcastdispatcher~DowncastConversionApi downcast conversion API}\n\t * as a parameters and should return an instance of the\n\t * {@link module:engine/view/uielement~UIElement view UI element}. The `data` object and\n\t * {@link module:engine/conversion/downcastdispatcher~DowncastConversionApi `conversionApi`} are passed from\n\t * {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:addMarker}. Additionally,\n\t * the `data.isOpening` parameter is passed, which is set to `true` for the marker start boundary element, and `false` to\n\t * the marker end boundary element.\n\t *\n\t * See {@link module:engine/conversion/conversion~Conversion#for `conversion.for()`} to learn how to add a converter\n\t * to the conversion process.\n\t *\n\t * @method #markerToElement\n\t * @param {Object} config Conversion configuration.\n\t * @param {String} config.model The name of the model marker (or model marker group) to convert.\n\t * @param {module:engine/view/elementdefinition~ElementDefinition|Function} config.view A view element definition or a function that\n\t * takes the model marker data and {@link module:engine/conversion/downcastdispatcher~DowncastConversionApi downcast conversion API}\n\t * as a parameters and returns a view UI element.\n\t * @param {module:utils/priorities~PriorityString} [config.converterPriority='normal'] Converter priority.\n\t * @returns {module:engine/conversion/downcasthelpers~DowncastHelpers}\n\t */\n\tmarkerToElement( config ) {\n\t\treturn this.add( downcastMarkerToElement( config ) );\n\t}\n\n\t/**\n\t * Model marker to highlight conversion helper.\n\t *\n\t * This conversion results in creating a highlight on view nodes. For this kind of conversion,\n\t * {@link module:engine/conversion/downcasthelpers~HighlightDescriptor} should be provided.\n\t *\n\t * For text nodes, a `<span>` {@link module:engine/view/attributeelement~AttributeElement} is created and it wraps all text nodes\n\t * in the converted marker range. For example, a model marker set like this: `<paragraph>F[oo b]ar</paragraph>` becomes\n\t * `<p>F<span class=\"comment\">oo b</span>ar</p>` in the view.\n\t *\n\t * {@link module:engine/view/containerelement~ContainerElement} may provide a custom way of handling highlight. Most often,\n\t * the element itself is given classes and attributes described in the highlight descriptor (instead of being wrapped in `<span>`).\n\t * For example, a model marker set like this: `[<image src=\"foo.jpg\"></image>]` becomes `<img src=\"foo.jpg\" class=\"comment\"></img>`\n\t * in the view.\n\t *\n\t * For container elements, the conversion is two-step. While the converter processes the highlight descriptor and passes it\n\t * to a container element, it is the container element instance itself that applies values from the highlight descriptor.\n\t * So, in a sense, the converter takes care of stating what should be applied on what, while the element decides how to apply that.\n\t *\n\t *\t\teditor.conversion.for( 'downcast' ).markerToHighlight( { model: 'comment', view: { classes: 'comment' } } );\n\t *\n\t *\t\teditor.conversion.for( 'downcast' ).markerToHighlight( {\n\t *\t\t\tmodel: 'comment',\n\t *\t\t\tview: { classes: 'new-comment' },\n\t *\t\t\tconverterPriority: 'high'\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'downcast' ).markerToHighlight( {\n\t *\t\t\tmodel: 'comment',\n\t *\t\t\tview: ( data, converstionApi ) => {\n\t *\t\t\t\t// Assuming that the marker name is in a form of comment:commentType.\n\t *\t\t\t\tconst commentType = data.markerName.split( ':' )[ 1 ];\n\t *\n\t *\t\t\t\treturn {\n\t *\t\t\t\t\tclasses: [ 'comment', 'comment-' + commentType ]\n\t *\t\t\t\t};\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t * If a function is passed as the `config.view` parameter, it will be used to generate the highlight descriptor. The function\n\t * receives the `data` object and {@link module:engine/conversion/downcastdispatcher~DowncastConversionApi downcast conversion API}\n\t * as a parameters and should return a\n\t * {@link module:engine/conversion/downcasthelpers~HighlightDescriptor highlight descriptor}.\n\t * The `data` object properties are passed from {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:addMarker}.\n\t *\n\t * See {@link module:engine/conversion/conversion~Conversion#for `conversion.for()`} to learn how to add a converter\n\t * to the conversion process.\n\t *\n\t * @method #markerToHighlight\n\t * @param {Object} config Conversion configuration.\n\t * @param {String} config.model The name of the model marker (or model marker group) to convert.\n\t * @param {module:engine/conversion/downcasthelpers~HighlightDescriptor|Function} config.view A highlight descriptor\n\t * that will be used for highlighting or a function that takes the model marker data and\n\t * {@link module:engine/conversion/downcastdispatcher~DowncastConversionApi downcast conversion API} as a parameters\n\t * and returns a highlight descriptor.\n\t * @param {module:utils/priorities~PriorityString} [config.converterPriority='normal'] Converter priority.\n\t * @returns {module:engine/conversion/downcasthelpers~DowncastHelpers}\n\t */\n\tmarkerToHighlight( config ) {\n\t\treturn this.add( downcastMarkerToHighlight( config ) );\n\t}\n\n\t/**\n\t * Model marker converter for data downcast.\n\t *\n\t * This conversion creates a representation for model marker boundaries in the view:\n\t *\n\t * * If the marker boundary is at a position where text nodes are allowed, then a view element with the specified tag name\n\t * and `name` attribute is added at this position.\n\t * * In other cases, a specified attribute is set on a view element that is before or after the marker boundary.\n\t *\n\t * Typically, marker names use the `group:uniqueId:otherData` convention. For example: `comment:e34zfk9k2n459df53sjl34:zx32c`.\n\t * The default configuration for this conversion is that the first part is the `group` part and the rest of\n\t * the marker name becomes the `name` part.\n\t *\n\t * Tag and attribute names and values are generated from the marker name:\n\t *\n\t * * Templates for attributes are `data-[group]-start-before=\"[name]\"`, `data-[group]-start-after=\"[name]\"`,\n\t * `data-[group]-end-before=\"[name]\"` and `data-[group]-end-after=\"[name]\"`.\n\t * * Templates for view elements are `<[group]-start name=\"[name]\">` and `<[group]-end name=\"[name]\">`.\n\t *\n\t * Attributes mark whether the given marker's start or end boundary is before or after the given element.\n\t * Attributes `data-[group]-start-before` and `data-[group]-end-after` are favored.\n\t * The other two are used when the former two cannot be used.\n\t *\n\t * The conversion configuration can take a function that will generate different group and name parts.\n\t * If such function is set as the `config.view` parameter, it is passed a marker name and it is expected to return an object with two\n\t * properties: `group` and `name`. If the function returns a falsy value, the conversion will not take place.\n\t *\n\t * Basic usage:\n\t *\n\t *\t\t// Using the default conversion.\n\t *\t\t// In this case, all markers whose name starts with 'comment:' will be converted.\n\t *\t\t// The `group` parameter will be set to `comment`.\n\t *\t\t// The `name` parameter will be the rest of the marker name (without `:`).\n\t *\t\teditor.conversion.for( 'dataDowncast' ).markerToData( {\n\t *\t\t\tmodel: 'comment'\n\t *\t\t} );\n\t *\n\t * An example of a view that may be generated by this conversion (assuming a marker with the name `comment:commentId:uid` marked\n\t * by `[]`):\n\t *\n\t *\t\t// Model:\n\t *\t\t<paragraph>Foo[bar</paragraph>\n\t *\t\t<image src=\"abc.jpg\"></image>]\n\t *\n\t *\t\t// View:\n\t *\t\t<p>Foo<comment-start name=\"commentId:uid\"></comment-start>bar</p>\n\t *\t\t<figure data-comment-end-after=\"commentId:uid\" class=\"image\"><img src=\"abc.jpg\" /></figure>\n\t *\n\t * In the example above, the comment starts before \"bar\" and ends after the image.\n\t *\n\t * If the `name` part is empty, the following view may be generated:\n\t *\n\t *\t\t<p>Foo <myMarker-start></myMarker-start>bar</p>\n\t *\t\t<figure data-myMarker-end-after=\"\" class=\"image\"><img src=\"abc.jpg\" /></figure>\n\t *\n\t * **Note:** A situation where some markers have the `name` part and some do not have it is incorrect and should be avoided.\n\t *\n\t * Examples where `data-group-start-after` and `data-group-end-before` are used:\n\t *\n\t *\t\t// Model:\n\t *\t\t<blockQuote>[]<paragraph>Foo</paragraph></blockQuote>\n\t *\n\t * \t\t// View:\n\t *\t\t<blockquote><p data-group-end-before=\"name\" data-group-start-before=\"name\">Foo</p></blockquote>\n\t *\n\t * Similarly, when a marker is collapsed after the last element:\n\t *\n\t *\t\t// Model:\n\t *\t\t<blockQuote><paragraph>Foo</paragraph>[]</blockQuote>\n\t *\n\t *\t\t// View:\n\t *\t\t<blockquote><p data-group-end-after=\"name\" data-group-start-after=\"name\">Foo</p></blockquote>\n\t *\n\t * When there are multiple markers from the same group stored in the same attribute of the same element, their\n\t * name parts are put together in the attribute value, for example: `data-group-start-before=\"name1,name2,name3\"`.\n\t *\n\t * Other examples of usage:\n\t *\n\t *\t\t// Using a custom function which is the same as the default conversion:\n\t *\t\teditor.conversion.for( 'dataDowncast' ).markerToData( {\n\t *\t\t\tmodel: 'comment'\n\t *\t\t\tview: markerName => ( {\n\t *\t\t\t\tgroup: 'comment',\n\t *\t\t\t\tname: markerName.substr( 8 ) // Removes 'comment:' part.\n\t *\t\t\t} )\n\t *\t\t} );\n\t *\n\t *\t\t// Using the converter priority:\n\t *\t\teditor.conversion.for( 'dataDowncast' ).markerToData( {\n\t *\t\t\tmodel: 'comment'\n\t *\t\t\tview: markerName => ( {\n\t *\t\t\t\tgroup: 'comment',\n\t *\t\t\t\tname: markerName.substr( 8 ) // Removes 'comment:' part.\n\t *\t\t\t} ),\n\t *\t\t\tconverterPriority: 'high'\n\t *\t\t} );\n\t *\n\t * This kind of conversion is useful for saving data into the database, so it should be used in the data conversion pipeline.\n\t *\n\t * See {@link module:engine/conversion/conversion~Conversion#for `conversion.for()`} to learn how to add a converter\n\t * to the conversion process.\n\t *\n\t * @method #markerToData\n\t * @param {Object} config Conversion configuration.\n\t * @param {String} config.model The name of the model marker (or model marker group) to convert.\n\t * @param {Function} [config.view] A function that takes the model marker name and\n\t * {@link module:engine/conversion/downcastdispatcher~DowncastConversionApi downcast conversion API} as a parameters\n\t * and returns an object with the `group` and `name` properties.\n\t * @param {module:utils/priorities~PriorityString} [config.converterPriority='normal'] Converter priority.\n\t * @returns {module:engine/conversion/downcasthelpers~DowncastHelpers}\n\t */\n\tmarkerToData( config ) {\n\t\treturn this.add( downcastMarkerToData( config ) );\n\t}\n}\n\n/**\n * Function factory that creates a default downcast converter for text insertion changes.\n *\n * The converter automatically consumes the corresponding value from the consumables list and stops the event (see\n * {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher}).\n *\n *\t\tmodelDispatcher.on( 'insert:$text', insertText() );\n *\n * @returns {Function} Insert text event converter.\n */\nexport function insertText() {\n\treturn ( evt, data, conversionApi ) => {\n\t\tif ( !conversionApi.consumable.consume( data.item, 'insert' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst viewWriter = conversionApi.writer;\n\t\tconst viewPosition = conversionApi.mapper.toViewPosition( data.range.start );\n\t\tconst viewText = viewWriter.createText( data.item.data );\n\n\t\tviewWriter.insert( viewPosition, viewText );\n\t};\n}\n\n/**\n * Function factory that creates a default downcast converter for node remove changes.\n *\n *\t\tmodelDispatcher.on( 'remove', remove() );\n *\n * @returns {Function} Remove event converter.\n */\nexport function remove() {\n\treturn ( evt, data, conversionApi ) => {\n\t\t// Find view range start position by mapping model position at which the remove happened.\n\t\tconst viewStart = conversionApi.mapper.toViewPosition( data.position );\n\n\t\tconst modelEnd = data.position.getShiftedBy( data.length );\n\t\tconst viewEnd = conversionApi.mapper.toViewPosition( modelEnd, { isPhantom: true } );\n\n\t\tconst viewRange = conversionApi.writer.createRange( viewStart, viewEnd );\n\n\t\t// Trim the range to remove in case some UI elements are on the view range boundaries.\n\t\tconst removed = conversionApi.writer.remove( viewRange.getTrimmed() );\n\n\t\t// After the range is removed, unbind all view elements from the model.\n\t\t// Range inside view document fragment is used to unbind deeply.\n\t\tfor ( const child of conversionApi.writer.createRangeIn( removed ).getItems() ) {\n\t\t\tconversionApi.mapper.unbindViewElement( child );\n\t\t}\n\t};\n}\n\n/**\n * Creates a `<span>` {@link module:engine/view/attributeelement~AttributeElement view attribute element} from the information\n * provided by the {@link module:engine/conversion/downcasthelpers~HighlightDescriptor highlight descriptor} object. If a priority\n * is not provided in the descriptor, the default priority will be used.\n *\n * @param {module:engine/view/downcastwriter~DowncastWriter} writer\n * @param {module:engine/conversion/downcasthelpers~HighlightDescriptor} descriptor\n * @returns {module:engine/view/attributeelement~AttributeElement}\n */\nexport function createViewElementFromHighlightDescriptor( writer, descriptor ) {\n\tconst viewElement = writer.createAttributeElement( 'span', descriptor.attributes );\n\n\tif ( descriptor.classes ) {\n\t\tviewElement._addClass( descriptor.classes );\n\t}\n\n\tif ( descriptor.priority ) {\n\t\tviewElement._priority = descriptor.priority;\n\t}\n\n\tviewElement._id = descriptor.id;\n\n\treturn viewElement;\n}\n\n/**\n * Function factory that creates a converter which converts a non-collapsed {@link module:engine/model/selection~Selection model selection}\n * to a {@link module:engine/view/documentselection~DocumentSelection view selection}. The converter consumes appropriate\n * value from the `consumable` object and maps model positions from the selection to view positions.\n *\n *\t\tmodelDispatcher.on( 'selection', convertRangeSelection() );\n *\n * @returns {Function} Selection converter.\n */\nexport function convertRangeSelection() {\n\treturn ( evt, data, conversionApi ) => {\n\t\tconst selection = data.selection;\n\n\t\tif ( selection.isCollapsed ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !conversionApi.consumable.consume( selection, 'selection' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst viewRanges = [];\n\n\t\tfor ( const range of selection.getRanges() ) {\n\t\t\tconst viewRange = conversionApi.mapper.toViewRange( range );\n\t\t\tviewRanges.push( viewRange );\n\t\t}\n\n\t\tconversionApi.writer.setSelection( viewRanges, { backward: selection.isBackward } );\n\t};\n}\n\n/**\n * Function factory that creates a converter which converts a collapsed {@link module:engine/model/selection~Selection model selection} to\n * a {@link module:engine/view/documentselection~DocumentSelection view selection}. The converter consumes appropriate\n * value from the `consumable` object, maps the model selection position to the view position and breaks\n * {@link module:engine/view/attributeelement~AttributeElement attribute elements} at the selection position.\n *\n *\t\tmodelDispatcher.on( 'selection', convertCollapsedSelection() );\n *\n * An example of the view state before and after converting the collapsed selection:\n *\n *\t\t   <p><strong>f^oo<strong>bar</p>\n *\t\t-> <p><strong>f</strong>^<strong>oo</strong>bar</p>\n *\n * By breaking attribute elements like `<strong>`, the selection is in a correct element. Then, when the selection attribute is\n * converted, broken attributes might be merged again, or the position where the selection is may be wrapped\n * with different, appropriate attribute elements.\n *\n * See also {@link module:engine/conversion/downcasthelpers~clearAttributes} which does a clean-up\n * by merging attributes.\n *\n * @returns {Function} Selection converter.\n */\nexport function convertCollapsedSelection() {\n\treturn ( evt, data, conversionApi ) => {\n\t\tconst selection = data.selection;\n\n\t\tif ( !selection.isCollapsed ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !conversionApi.consumable.consume( selection, 'selection' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst viewWriter = conversionApi.writer;\n\t\tconst modelPosition = selection.getFirstPosition();\n\t\tconst viewPosition = conversionApi.mapper.toViewPosition( modelPosition );\n\t\tconst brokenPosition = viewWriter.breakAttributes( viewPosition );\n\n\t\tviewWriter.setSelection( brokenPosition );\n\t};\n}\n\n/**\n * Function factory that creates a converter which clears artifacts after the previous\n * {@link module:engine/model/selection~Selection model selection} conversion. It removes all empty\n * {@link module:engine/view/attributeelement~AttributeElement view attribute elements} and merges sibling attributes at all start and end\n * positions of all ranges.\n *\n *\t\t   <p><strong>^</strong></p>\n *\t\t-> <p>^</p>\n *\n *\t\t   <p><strong>foo</strong>^<strong>bar</strong>bar</p>\n *\t\t-> <p><strong>foo^bar<strong>bar</p>\n *\n *\t\t   <p><strong>foo</strong><em>^</em><strong>bar</strong>bar</p>\n *\t\t-> <p><strong>foo^bar<strong>bar</p>\n *\n * This listener should be assigned before any converter for the new selection:\n *\n *\t\tmodelDispatcher.on( 'selection', clearAttributes() );\n *\n * See {@link module:engine/conversion/downcasthelpers~convertCollapsedSelection}\n * which does the opposite by breaking attributes in the selection position.\n *\n * @returns {Function} Selection converter.\n */\nexport function clearAttributes() {\n\treturn ( evt, data, conversionApi ) => {\n\t\tconst viewWriter = conversionApi.writer;\n\t\tconst viewSelection = viewWriter.document.selection;\n\n\t\tfor ( const range of viewSelection.getRanges() ) {\n\t\t\t// Not collapsed selection should not have artifacts.\n\t\t\tif ( range.isCollapsed ) {\n\t\t\t\t// Position might be in the node removed by the view writer.\n\t\t\t\tif ( range.end.parent.isAttached() ) {\n\t\t\t\t\tconversionApi.writer.mergeAttributes( range.start );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tviewWriter.setSelection( null );\n\t};\n}\n\n/**\n * Function factory that creates a converter which converts set/change/remove attribute changes from the model to the view.\n * It can also be used to convert selection attributes. In that case, an empty attribute element will be created and the\n * selection will be put inside it.\n *\n * Attributes from the model are converted to a view element that will be wrapping these view nodes that are bound to\n * model elements having the given attribute. This is useful for attributes like `bold` that may be set on text nodes in the model\n * but are represented as an element in the view:\n *\n *\t\t[paragraph]              MODEL ====> VIEW        <p>\n *\t\t\t|- a {bold: true}                             |- <b>\n *\t\t\t|- b {bold: true}                             |   |- ab\n *\t\t\t|- c                                          |- c\n *\n * Passed `Function` will be provided with the attribute value and then all the parameters of the\n * {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:attribute `attribute` event}.\n * It is expected that the function returns an {@link module:engine/view/element~Element}.\n * The result of the function will be the wrapping element.\n * When the provided `Function` does not return any element, no conversion will take place.\n *\n * The converter automatically consumes the corresponding value from the consumables list and stops the event (see\n * {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher}).\n *\n *\t\tmodelDispatcher.on( 'attribute:bold', wrap( ( modelAttributeValue, { writer } ) => {\n *\t\t\treturn writer.createAttributeElement( 'strong' );\n *\t\t} );\n *\n * @protected\n * @param {Function} elementCreator Function returning a view element that will be used for wrapping.\n * @returns {Function} Set/change attribute converter.\n */\nexport function wrap( elementCreator ) {\n\treturn ( evt, data, conversionApi ) => {\n\t\t// Recreate current wrapping node. It will be used to unwrap view range if the attribute value has changed\n\t\t// or the attribute was removed.\n\t\tconst oldViewElement = elementCreator( data.attributeOldValue, conversionApi );\n\n\t\t// Create node to wrap with.\n\t\tconst newViewElement = elementCreator( data.attributeNewValue, conversionApi );\n\n\t\tif ( !oldViewElement && !newViewElement ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !conversionApi.consumable.consume( data.item, evt.name ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst viewWriter = conversionApi.writer;\n\t\tconst viewSelection = viewWriter.document.selection;\n\n\t\tif ( data.item instanceof ModelSelection || data.item instanceof DocumentSelection ) {\n\t\t\t// Selection attribute conversion.\n\t\t\tviewWriter.wrap( viewSelection.getFirstRange(), newViewElement );\n\t\t} else {\n\t\t\t// Node attribute conversion.\n\t\t\tlet viewRange = conversionApi.mapper.toViewRange( data.range );\n\n\t\t\t// First, unwrap the range from current wrapper.\n\t\t\tif ( data.attributeOldValue !== null && oldViewElement ) {\n\t\t\t\tviewRange = viewWriter.unwrap( viewRange, oldViewElement );\n\t\t\t}\n\n\t\t\tif ( data.attributeNewValue !== null && newViewElement ) {\n\t\t\t\tviewWriter.wrap( viewRange, newViewElement );\n\t\t\t}\n\t\t}\n\t};\n}\n\n/**\n * Function factory that creates a converter which converts node insertion changes from the model to the view.\n * The function passed will be provided with all the parameters of the dispatcher's\n * {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:insert `insert` event}.\n * It is expected that the function returns an {@link module:engine/view/element~Element}.\n * The result of the function will be inserted into the view.\n *\n * The converter automatically consumes the corresponding value from the consumables list, stops the event (see\n * {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher}) and binds the model and view elements.\n *\n *\t\tdowncastDispatcher.on(\n *\t\t\t'insert:myElem',\n *\t\t\tinsertElement( ( modelItem, { writer } ) => {\n *\t\t\t\tconst text = writer.createText( 'myText' );\n *\t\t\t\tconst myElem = writer.createElement( 'myElem', { myAttr: 'my-' + modelItem.getAttribute( 'myAttr' ) }, text );\n *\n *\t\t\t\t// Do something fancy with `myElem` using `modelItem` or other parameters.\n *\n *\t\t\t\treturn myElem;\n *\t\t\t}\n *\t\t) );\n *\n * @protected\n * @param {Function} elementCreator Function returning a view element, which will be inserted.\n * @returns {Function} Insert element event converter.\n */\nexport function insertElement( elementCreator ) {\n\treturn ( evt, data, conversionApi ) => {\n\t\tconst viewElement = elementCreator( data.item, conversionApi );\n\n\t\tif ( !viewElement ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !conversionApi.consumable.consume( data.item, 'insert' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst viewPosition = conversionApi.mapper.toViewPosition( data.range.start );\n\n\t\tconversionApi.mapper.bindElements( data.item, viewElement );\n\t\tconversionApi.writer.insert( viewPosition, viewElement );\n\t};\n}\n\n/**\n * Function factory that creates a converter which converts marker adding change to the\n * {@link module:engine/view/uielement~UIElement view UI element}.\n *\n * The view UI element that will be added to the view depends on the passed parameter. See {@link ~insertElement}.\n * In case of a non-collapsed range, the UI element will not wrap nodes but separate elements will be placed at the beginning\n * and at the end of the range.\n *\n * This converter binds created UI elements with the marker name using {@link module:engine/conversion/mapper~Mapper#bindElementToMarker}.\n *\n * @protected\n * @param {module:engine/view/uielement~UIElement|Function} elementCreator A view UI element or a function returning the view element\n * that will be inserted.\n * @returns {Function} Insert element event converter.\n */\nexport function insertUIElement( elementCreator ) {\n\treturn ( evt, data, conversionApi ) => {\n\t\t// Create two view elements. One will be inserted at the beginning of marker, one at the end.\n\t\t// If marker is collapsed, only \"opening\" element will be inserted.\n\t\tdata.isOpening = true;\n\t\tconst viewStartElement = elementCreator( data, conversionApi );\n\n\t\tdata.isOpening = false;\n\t\tconst viewEndElement = elementCreator( data, conversionApi );\n\n\t\tif ( !viewStartElement || !viewEndElement ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst markerRange = data.markerRange;\n\n\t\t// Marker that is collapsed has consumable build differently that non-collapsed one.\n\t\t// For more information see `addMarker` event description.\n\t\t// If marker's range is collapsed - check if it can be consumed.\n\t\tif ( markerRange.isCollapsed && !conversionApi.consumable.consume( markerRange, evt.name ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If marker's range is not collapsed - consume all items inside.\n\t\tfor ( const value of markerRange ) {\n\t\t\tif ( !conversionApi.consumable.consume( value.item, evt.name ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tconst mapper = conversionApi.mapper;\n\t\tconst viewWriter = conversionApi.writer;\n\n\t\t// Add \"opening\" element.\n\t\tviewWriter.insert( mapper.toViewPosition( markerRange.start ), viewStartElement );\n\t\tconversionApi.mapper.bindElementToMarker( viewStartElement, data.markerName );\n\n\t\t// Add \"closing\" element only if range is not collapsed.\n\t\tif ( !markerRange.isCollapsed ) {\n\t\t\tviewWriter.insert( mapper.toViewPosition( markerRange.end ), viewEndElement );\n\t\t\tconversionApi.mapper.bindElementToMarker( viewEndElement, data.markerName );\n\t\t}\n\n\t\tevt.stop();\n\t};\n}\n\n// Function factory that returns a default downcast converter for removing a {@link module:engine/view/uielement~UIElement UI element}\n// based on marker remove change.\n//\n// This converter unbinds elements from the marker name.\n//\n// @returns {Function} Removed UI element converter.\nfunction removeUIElement() {\n\treturn ( evt, data, conversionApi ) => {\n\t\tconst elements = conversionApi.mapper.markerNameToElements( data.markerName );\n\n\t\tif ( !elements ) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor ( const element of elements ) {\n\t\t\tconversionApi.mapper.unbindElementFromMarkerName( element, data.markerName );\n\t\t\tconversionApi.writer.clear( conversionApi.writer.createRangeOn( element ), element );\n\t\t}\n\n\t\tconversionApi.writer.clearClonedElementsGroup( data.markerName );\n\n\t\tevt.stop();\n\t};\n}\n\n// Function factory that creates a default converter for model markers.\n//\n// See {@link DowncastHelpers#markerToData} for more information what type of view is generated.\n//\n// This converter binds created UI elements and affected view elements with the marker name\n// using {@link module:engine/conversion/mapper~Mapper#bindElementToMarker}.\n//\n// @returns {Function} Add marker converter.\nfunction insertMarkerData( viewCreator ) {\n\treturn ( evt, data, conversionApi ) => {\n\t\tconst viewMarkerData = viewCreator( data.markerName, conversionApi );\n\n\t\tif ( !viewMarkerData ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst markerRange = data.markerRange;\n\n\t\tif ( !conversionApi.consumable.consume( markerRange, evt.name ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Adding closing data first to keep the proper order in the view.\n\t\thandleMarkerBoundary( markerRange, false, conversionApi, data, viewMarkerData );\n\t\thandleMarkerBoundary( markerRange, true, conversionApi, data, viewMarkerData );\n\n\t\tevt.stop();\n\t};\n}\n\n// Helper function for `insertMarkerData()` that marks a marker boundary at the beginning or end of given `range`.\nfunction handleMarkerBoundary( range, isStart, conversionApi, data, viewMarkerData ) {\n\tconst modelPosition = isStart ? range.start : range.end;\n\tconst canInsertElement = conversionApi.schema.checkChild( modelPosition, '$text' );\n\n\tif ( canInsertElement ) {\n\t\tconst viewPosition = conversionApi.mapper.toViewPosition( modelPosition );\n\n\t\tinsertMarkerAsElement( viewPosition, isStart, conversionApi, data, viewMarkerData );\n\t} else {\n\t\tlet modelElement;\n\t\tlet isBefore;\n\n\t\t// If possible, we want to add `data-group-start-before` and `data-group-end-after` attributes.\n\t\t// Below `if` is constructed in a way that will favor adding these attributes.\n\t\t//\n\t\t// Also, I assume that there will be always an element either after or before the position.\n\t\t// If not, then it is a case when we are not in a position where text is allowed and also there are no elements around...\n\t\tif ( isStart && modelPosition.nodeAfter || !isStart && !modelPosition.nodeBefore ) {\n\t\t\tmodelElement = modelPosition.nodeAfter;\n\t\t\tisBefore = true;\n\t\t} else {\n\t\t\tmodelElement = modelPosition.nodeBefore;\n\t\t\tisBefore = false;\n\t\t}\n\n\t\tconst viewElement = conversionApi.mapper.toViewElement( modelElement );\n\n\t\tinsertMarkerAsAttribute( viewElement, isStart, isBefore, conversionApi, data, viewMarkerData );\n\t}\n}\n\n// Helper function for `insertMarkerData()` that marks a marker boundary in the view as an attribute on a view element.\nfunction insertMarkerAsAttribute( viewElement, isStart, isBefore, conversionApi, data, viewMarkerData ) {\n\tconst attributeName = `data-${ viewMarkerData.group }-${ isStart ? 'start' : 'end' }-${ isBefore ? 'before' : 'after' }`;\n\n\tconst markerNames = viewElement.hasAttribute( attributeName ) ? viewElement.getAttribute( attributeName ).split( ',' ) : [];\n\n\t// Adding marker name at the beginning to have the same order in the attribute as there is with marker elements.\n\tmarkerNames.unshift( viewMarkerData.name );\n\n\tconversionApi.writer.setAttribute( attributeName, markerNames.join( ',' ), viewElement );\n\tconversionApi.mapper.bindElementToMarker( viewElement, data.markerName );\n}\n\n// Helper function for `insertMarkerData()` that marks a marker boundary in the view as a separate view ui element.\nfunction insertMarkerAsElement( position, isStart, conversionApi, data, viewMarkerData ) {\n\tconst viewElementName = `${ viewMarkerData.group }-${ isStart ? 'start' : 'end' }`;\n\n\tconst attrs = viewMarkerData.name ? { 'name': viewMarkerData.name } : null;\n\tconst viewElement = conversionApi.writer.createUIElement( viewElementName, attrs );\n\n\tconversionApi.writer.insert( position, viewElement );\n\tconversionApi.mapper.bindElementToMarker( viewElement, data.markerName );\n}\n\n// Function factory that creates a converter for removing a model marker data added by the {@link #insertMarkerData} converter.\n//\n// @returns {Function} Remove marker converter.\nfunction removeMarkerData( viewCreator ) {\n\treturn ( evt, data, conversionApi ) => {\n\t\tconst viewData = viewCreator( data.markerName, conversionApi );\n\n\t\tif ( !viewData ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst elements = conversionApi.mapper.markerNameToElements( data.markerName );\n\n\t\tif ( !elements ) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor ( const element of elements ) {\n\t\t\tconversionApi.mapper.unbindElementFromMarkerName( element, data.markerName );\n\n\t\t\tif ( element.is( 'containerElement' ) ) {\n\t\t\t\tremoveMarkerFromAttribute( `data-${ viewData.group }-start-before`, element );\n\t\t\t\tremoveMarkerFromAttribute( `data-${ viewData.group }-start-after`, element );\n\t\t\t\tremoveMarkerFromAttribute( `data-${ viewData.group }-end-before`, element );\n\t\t\t\tremoveMarkerFromAttribute( `data-${ viewData.group }-end-after`, element );\n\t\t\t} else {\n\t\t\t\tconversionApi.writer.clear( conversionApi.writer.createRangeOn( element ), element );\n\t\t\t}\n\t\t}\n\n\t\tconversionApi.writer.clearClonedElementsGroup( data.markerName );\n\n\t\tevt.stop();\n\n\t\tfunction removeMarkerFromAttribute( attributeName, element ) {\n\t\t\tif ( element.hasAttribute( attributeName ) ) {\n\t\t\t\tconst markerNames = new Set( element.getAttribute( attributeName ).split( ',' ) );\n\t\t\t\tmarkerNames.delete( viewData.name );\n\n\t\t\t\tif ( markerNames.size == 0 ) {\n\t\t\t\t\tconversionApi.writer.removeAttribute( attributeName, element );\n\t\t\t\t} else {\n\t\t\t\t\tconversionApi.writer.setAttribute( attributeName, Array.from( markerNames ).join( ',' ), element );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n}\n\n// Function factory that creates a converter which converts set/change/remove attribute changes from the model to the view.\n//\n// Attributes from the model are converted to the view element attributes in the view. You may provide a custom function to generate\n// a key-value attribute pair to add/change/remove. If not provided, model attributes will be converted to view element\n// attributes on a one-to-one basis.\n//\n// *Note:** The provided attribute creator should always return the same `key` for a given attribute from the model.\n//\n// The converter automatically consumes the corresponding value from the consumables list and stops the event (see\n// {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher}).\n//\n//\t\tmodelDispatcher.on( 'attribute:customAttr:myElem', changeAttribute( ( value, data ) => {\n//\t\t\t// Change attribute key from `customAttr` to `class` in the view.\n//\t\t\tconst key = 'class';\n//\t\t\tlet value = data.attributeNewValue;\n//\n//\t\t\t// Force attribute value to 'empty' if the model element is empty.\n//\t\t\tif ( data.item.childCount === 0 ) {\n//\t\t\t\tvalue = 'empty';\n//\t\t\t}\n//\n//\t\t\t// Return the key-value pair.\n//\t\t\treturn { key, value };\n//\t\t} ) );\n//\n// @param {Function} [attributeCreator] Function returning an object with two properties: `key` and `value`, which\n// represent the attribute key and attribute value to be set on a {@link module:engine/view/element~Element view element}.\n// The function is passed the model attribute value as the first parameter and additional data about the change as the second parameter.\n// @returns {Function} Set/change attribute converter.\nfunction changeAttribute( attributeCreator ) {\n\treturn ( evt, data, conversionApi ) => {\n\t\tconst oldAttribute = attributeCreator( data.attributeOldValue, conversionApi );\n\t\tconst newAttribute = attributeCreator( data.attributeNewValue, conversionApi );\n\n\t\tif ( !oldAttribute && !newAttribute ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !conversionApi.consumable.consume( data.item, evt.name ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst viewElement = conversionApi.mapper.toViewElement( data.item );\n\t\tconst viewWriter = conversionApi.writer;\n\n\t\t// If model item cannot be mapped to a view element, it means item is not an `Element` instance but a `TextProxy` node.\n\t\t// Only elements can have attributes in a view so do not proceed for anything else (#1587).\n\t\tif ( !viewElement ) {\n\t\t\t/**\n\t\t\t * This error occurs when a {@link module:engine/model/textproxy~TextProxy text node's} attribute is to be downcasted\n\t\t\t * by {@link module:engine/conversion/conversion~Conversion#attributeToAttribute `Attribute to Attribute converter`}.\n\t\t\t * In most cases it is caused by converters misconfiguration when only \"generic\" converter is defined:\n\t\t\t *\n\t\t\t *\t\teditor.conversion.for( 'downcast' ).attributeToAttribute( {\n\t\t\t *\t\t\tmodel: 'attribute-name',\n\t\t\t *\t\t\tview: 'attribute-name'\n\t\t\t *\t\t} ) );\n\t\t\t *\n\t\t\t * and given attribute is used on text node, for example:\n\t\t\t *\n\t\t\t *\t\tmodel.change( writer => {\n\t\t\t *\t\t\twriter.insertText( 'Foo', { 'attribute-name': 'bar' }, parent, 0 );\n\t\t\t *\t\t} );\n\t\t\t *\n\t\t\t * In such cases, to convert the same attribute for both {@link module:engine/model/element~Element}\n\t\t\t * and {@link module:engine/model/textproxy~TextProxy `Text`} nodes, text specific\n\t\t\t * {@link module:engine/conversion/conversion~Conversion#attributeToElement `Attribute to Element converter`}\n\t\t\t * with higher {@link module:utils/priorities~PriorityString priority} must also be defined:\n\t\t\t *\n\t\t\t *\t\teditor.conversion.for( 'downcast' ).attributeToElement( {\n\t\t\t *\t\t\tmodel: {\n\t\t\t *\t\t\t\tkey: 'attribute-name',\n\t\t\t *\t\t\t\tname: '$text'\n\t\t\t *\t\t\t},\n\t\t\t *\t\t\tview: ( value, { writer } ) => {\n\t\t\t *\t\t\t\treturn writer.createAttributeElement( 'span', { 'attribute-name': value } );\n\t\t\t *\t\t\t},\n\t\t\t *\t\t\tconverterPriority: 'high'\n\t\t\t *\t\t} ) );\n\t\t\t *\n\t\t\t * @error conversion-attribute-to-attribute-on-text\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'conversion-attribute-to-attribute-on-text',\n\t\t\t\t[ data, conversionApi ]\n\t\t\t);\n\t\t}\n\n\t\t// First remove the old attribute if there was one.\n\t\tif ( data.attributeOldValue !== null && oldAttribute ) {\n\t\t\tif ( oldAttribute.key == 'class' ) {\n\t\t\t\tconst classes = toArray( oldAttribute.value );\n\n\t\t\t\tfor ( const className of classes ) {\n\t\t\t\t\tviewWriter.removeClass( className, viewElement );\n\t\t\t\t}\n\t\t\t} else if ( oldAttribute.key == 'style' ) {\n\t\t\t\tconst keys = Object.keys( oldAttribute.value );\n\n\t\t\t\tfor ( const key of keys ) {\n\t\t\t\t\tviewWriter.removeStyle( key, viewElement );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tviewWriter.removeAttribute( oldAttribute.key, viewElement );\n\t\t\t}\n\t\t}\n\n\t\t// Then set the new attribute.\n\t\tif ( data.attributeNewValue !== null && newAttribute ) {\n\t\t\tif ( newAttribute.key == 'class' ) {\n\t\t\t\tconst classes = toArray( newAttribute.value );\n\n\t\t\t\tfor ( const className of classes ) {\n\t\t\t\t\tviewWriter.addClass( className, viewElement );\n\t\t\t\t}\n\t\t\t} else if ( newAttribute.key == 'style' ) {\n\t\t\t\tconst keys = Object.keys( newAttribute.value );\n\n\t\t\t\tfor ( const key of keys ) {\n\t\t\t\t\tviewWriter.setStyle( key, newAttribute.value[ key ], viewElement );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tviewWriter.setAttribute( newAttribute.key, newAttribute.value, viewElement );\n\t\t\t}\n\t\t}\n\t};\n}\n\n// Function factory that creates a converter which converts the text inside marker's range. The converter wraps the text with\n// {@link module:engine/view/attributeelement~AttributeElement} created from the provided descriptor.\n// See {link module:engine/conversion/downcasthelpers~createViewElementFromHighlightDescriptor}.\n//\n// It can also be used to convert the selection that is inside a marker. In that case, an empty attribute element will be\n// created and the selection will be put inside it.\n//\n// If the highlight descriptor does not provide the `priority` property, `10` will be used.\n//\n// If the highlight descriptor does not provide the `id` property, the name of the marker will be used.\n//\n// This converter binds the created {@link module:engine/view/attributeelement~AttributeElement attribute elemens} with the marker name\n// using the {@link module:engine/conversion/mapper~Mapper#bindElementToMarker} method.\n//\n// @param {module:engine/conversion/downcasthelpers~HighlightDescriptor|Function} highlightDescriptor\n// @returns {Function}\nfunction highlightText( highlightDescriptor ) {\n\treturn ( evt, data, conversionApi ) => {\n\t\tif ( !data.item ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !( data.item instanceof ModelSelection || data.item instanceof DocumentSelection ) && !data.item.is( '$textProxy' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst descriptor = prepareDescriptor( highlightDescriptor, data, conversionApi );\n\n\t\tif ( !descriptor ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !conversionApi.consumable.consume( data.item, evt.name ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst viewWriter = conversionApi.writer;\n\t\tconst viewElement = createViewElementFromHighlightDescriptor( viewWriter, descriptor );\n\t\tconst viewSelection = viewWriter.document.selection;\n\n\t\tif ( data.item instanceof ModelSelection || data.item instanceof DocumentSelection ) {\n\t\t\tviewWriter.wrap( viewSelection.getFirstRange(), viewElement, viewSelection );\n\t\t} else {\n\t\t\tconst viewRange = conversionApi.mapper.toViewRange( data.range );\n\t\t\tconst rangeAfterWrap = viewWriter.wrap( viewRange, viewElement );\n\n\t\t\tfor ( const element of rangeAfterWrap.getItems() ) {\n\t\t\t\tif ( element.is( 'attributeElement' ) && element.isSimilar( viewElement ) ) {\n\t\t\t\t\tconversionApi.mapper.bindElementToMarker( element, data.markerName );\n\n\t\t\t\t\t// One attribute element is enough, because all of them are bound together by the view writer.\n\t\t\t\t\t// Mapper uses this binding to get all the elements no matter how many of them are registered in the mapper.\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n}\n\n// Converter function factory. It creates a function which applies the marker's highlight to an element inside the marker's range.\n//\n// The converter checks if an element has the `addHighlight` function stored as a\n// {@link module:engine/view/element~Element#_setCustomProperty custom property} and, if so, uses it to apply the highlight.\n// In such case the converter will consume all element's children, assuming that they were handled by the element itself.\n//\n// When the `addHighlight` custom property is not present, the element is not converted in any special way.\n// This means that converters will proceed to convert the element's child nodes.\n//\n// If the highlight descriptor does not provide the `priority` property, `10` will be used.\n//\n// If the highlight descriptor does not provide the `id` property, the name of the marker will be used.\n//\n// This converter binds altered {@link module:engine/view/containerelement~ContainerElement container elements} with the marker name using\n// the {@link module:engine/conversion/mapper~Mapper#bindElementToMarker} method.\n//\n// @param {module:engine/conversion/downcasthelpers~HighlightDescriptor|Function} highlightDescriptor\n// @returns {Function}\nfunction highlightElement( highlightDescriptor ) {\n\treturn ( evt, data, conversionApi ) => {\n\t\tif ( !data.item ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !( data.item instanceof ModelElement ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst descriptor = prepareDescriptor( highlightDescriptor, data, conversionApi );\n\n\t\tif ( !descriptor ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !conversionApi.consumable.test( data.item, evt.name ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst viewElement = conversionApi.mapper.toViewElement( data.item );\n\n\t\tif ( viewElement && viewElement.getCustomProperty( 'addHighlight' ) ) {\n\t\t\t// Consume element itself.\n\t\t\tconversionApi.consumable.consume( data.item, evt.name );\n\n\t\t\t// Consume all children nodes.\n\t\t\tfor ( const value of ModelRange._createIn( data.item ) ) {\n\t\t\t\tconversionApi.consumable.consume( value.item, evt.name );\n\t\t\t}\n\n\t\t\tviewElement.getCustomProperty( 'addHighlight' )( viewElement, descriptor, conversionApi.writer );\n\n\t\t\tconversionApi.mapper.bindElementToMarker( viewElement, data.markerName );\n\t\t}\n\t};\n}\n\n// Function factory that creates a converter which converts the removing model marker to the view.\n//\n// Both text nodes and elements are handled by this converter but they are handled a bit differently.\n//\n// Text nodes are unwrapped using the {@link module:engine/view/attributeelement~AttributeElement attribute element} created from the\n// provided highlight descriptor. See {link module:engine/conversion/downcasthelpers~HighlightDescriptor}.\n//\n// For elements, the converter checks if an element has the `removeHighlight` function stored as a\n// {@link module:engine/view/element~Element#_setCustomProperty custom property}. If so, it uses it to remove the highlight.\n// In such case, the children of that element will not be converted.\n//\n// When `removeHighlight` is not present, the element is not converted in any special way.\n// The converter will proceed to convert the element's child nodes instead.\n//\n// If the highlight descriptor does not provide the `priority` property, `10` will be used.\n//\n// If the highlight descriptor does not provide the `id` property, the name of the marker will be used.\n//\n// This converter unbinds elements from the marker name.\n//\n// @param {module:engine/conversion/downcasthelpers~HighlightDescriptor|Function} highlightDescriptor\n// @returns {Function}\nfunction removeHighlight( highlightDescriptor ) {\n\treturn ( evt, data, conversionApi ) => {\n\t\t// This conversion makes sense only for non-collapsed range.\n\t\tif ( data.markerRange.isCollapsed ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst descriptor = prepareDescriptor( highlightDescriptor, data, conversionApi );\n\n\t\tif ( !descriptor ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// View element that will be used to unwrap `AttributeElement`s.\n\t\tconst viewHighlightElement = createViewElementFromHighlightDescriptor( conversionApi.writer, descriptor );\n\n\t\t// Get all elements bound with given marker name.\n\t\tconst elements = conversionApi.mapper.markerNameToElements( data.markerName );\n\n\t\tif ( !elements ) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor ( const element of elements ) {\n\t\t\tconversionApi.mapper.unbindElementFromMarkerName( element, data.markerName );\n\n\t\t\tif ( element.is( 'attributeElement' ) ) {\n\t\t\t\tconversionApi.writer.unwrap( conversionApi.writer.createRangeOn( element ), viewHighlightElement );\n\t\t\t} else {\n\t\t\t\t// if element.is( 'containerElement' ).\n\t\t\t\telement.getCustomProperty( 'removeHighlight' )( element, descriptor.id, conversionApi.writer );\n\t\t\t}\n\t\t}\n\n\t\tconversionApi.writer.clearClonedElementsGroup( data.markerName );\n\n\t\tevt.stop();\n\t};\n}\n\n// Model element to view element conversion helper.\n//\n// See {@link ~DowncastHelpers#elementToElement `.elementToElement()` downcast helper} for examples and config params description.\n//\n// @param {Object} config Conversion configuration.\n// @param {String} config.model\n// @param {module:engine/view/elementdefinition~ElementDefinition|Function} config.view\n// @param {Object} [config.triggerBy]\n// @param {Array.<String>} [config.triggerBy.attributes]\n// @param {Array.<String>} [config.triggerBy.children]\n// @returns {Function} Conversion helper.\nfunction downcastElementToElement( config ) {\n\tconfig = cloneDeep( config );\n\n\tconfig.view = normalizeToElementConfig( config.view, 'container' );\n\n\treturn dispatcher => {\n\t\tdispatcher.on( 'insert:' + config.model, insertElement( config.view ), { priority: config.converterPriority || 'normal' } );\n\n\t\tif ( config.triggerBy ) {\n\t\t\tif ( config.triggerBy.attributes ) {\n\t\t\t\tfor ( const attributeKey of config.triggerBy.attributes ) {\n\t\t\t\t\tdispatcher._mapReconversionTriggerEvent( config.model, `attribute:${ attributeKey }:${ config.model }` );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( config.triggerBy.children ) {\n\t\t\t\tfor ( const childName of config.triggerBy.children ) {\n\t\t\t\t\tdispatcher._mapReconversionTriggerEvent( config.model, `insert:${ childName }` );\n\t\t\t\t\tdispatcher._mapReconversionTriggerEvent( config.model, `remove:${ childName }` );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n}\n\n// Model attribute to view element conversion helper.\n//\n// See {@link ~DowncastHelpers#attributeToElement `.attributeToElement()` downcast helper} for examples.\n//\n// @param {Object} config Conversion configuration.\n// @param {String|Object} config.model The key of the attribute to convert from or a `{ key, values }` object. `values` is an array\n// of `String`s with possible values if the model attribute is an enumerable.\n// @param {module:engine/view/elementdefinition~ElementDefinition|Function|Object} config.view A view element definition or a function\n// that takes the model attribute value and {@link module:engine/view/downcastwriter~DowncastWriter view downcast writer}\n// as parameters and returns a view attribute element. If `config.model.values` is\n// given, `config.view` should be an object assigning values from `config.model.values` to view element definitions or functions.\n// @param {module:utils/priorities~PriorityString} [config.converterPriority='normal'] Converter priority.\n// @returns {Function} Conversion helper.\nfunction downcastAttributeToElement( config ) {\n\tconfig = cloneDeep( config );\n\n\tconst modelKey = config.model.key ? config.model.key : config.model;\n\tlet eventName = 'attribute:' + modelKey;\n\n\tif ( config.model.name ) {\n\t\teventName += ':' + config.model.name;\n\t}\n\n\tif ( config.model.values ) {\n\t\tfor ( const modelValue of config.model.values ) {\n\t\t\tconfig.view[ modelValue ] = normalizeToElementConfig( config.view[ modelValue ], 'attribute' );\n\t\t}\n\t} else {\n\t\tconfig.view = normalizeToElementConfig( config.view, 'attribute' );\n\t}\n\n\tconst elementCreator = getFromAttributeCreator( config );\n\n\treturn dispatcher => {\n\t\tdispatcher.on( eventName, wrap( elementCreator ), { priority: config.converterPriority || 'normal' } );\n\t};\n}\n\n// Model attribute to view attribute conversion helper.\n//\n// See {@link ~DowncastHelpers#attributeToAttribute `.attributeToAttribute()` downcast helper} for examples.\n//\n// @param {Object} config Conversion configuration.\n// @param {String|Object} config.model The key of the attribute to convert from or a `{ key, values, [ name ] }` object describing\n// the attribute key, possible values and, optionally, an element name to convert from.\n// @param {String|Object|Function} config.view A view attribute key, or a `{ key, value }` object or a function that takes\n// the model attribute value and returns a `{ key, value }` object. If `key` is `'class'`, `value` can be a `String` or an\n// array of `String`s. If `key` is `'style'`, `value` is an object with key-value pairs. In other cases, `value` is a `String`.\n// If `config.model.values` is set, `config.view` should be an object assigning values from `config.model.values` to\n// `{ key, value }` objects or a functions.\n// @param {module:utils/priorities~PriorityString} [config.converterPriority='normal'] Converter priority.\n// @returns {Function} Conversion helper.\nfunction downcastAttributeToAttribute( config ) {\n\tconfig = cloneDeep( config );\n\n\tconst modelKey = config.model.key ? config.model.key : config.model;\n\tlet eventName = 'attribute:' + modelKey;\n\n\tif ( config.model.name ) {\n\t\teventName += ':' + config.model.name;\n\t}\n\n\tif ( config.model.values ) {\n\t\tfor ( const modelValue of config.model.values ) {\n\t\t\tconfig.view[ modelValue ] = normalizeToAttributeConfig( config.view[ modelValue ] );\n\t\t}\n\t} else {\n\t\tconfig.view = normalizeToAttributeConfig( config.view );\n\t}\n\n\tconst elementCreator = getFromAttributeCreator( config );\n\n\treturn dispatcher => {\n\t\tdispatcher.on( eventName, changeAttribute( elementCreator ), { priority: config.converterPriority || 'normal' } );\n\t};\n}\n\n// Model marker to view element conversion helper.\n//\n// See {@link ~DowncastHelpers#markerToElement `.markerToElement()` downcast helper} for examples.\n//\n// @param {Object} config Conversion configuration.\n// @param {String} config.model The name of the model marker (or model marker group) to convert.\n// @param {module:engine/view/elementdefinition~ElementDefinition|Function} config.view A view element definition or a function\n// that takes the model marker data as a parameter and returns a view UI element.\n// @param {module:utils/priorities~PriorityString} [config.converterPriority='normal'] Converter priority.\n// @returns {Function} Conversion helper.\nfunction downcastMarkerToElement( config ) {\n\tconfig = cloneDeep( config );\n\n\tconfig.view = normalizeToElementConfig( config.view, 'ui' );\n\n\treturn dispatcher => {\n\t\tdispatcher.on( 'addMarker:' + config.model, insertUIElement( config.view ), { priority: config.converterPriority || 'normal' } );\n\t\tdispatcher.on( 'removeMarker:' + config.model, removeUIElement( config.view ), { priority: config.converterPriority || 'normal' } );\n\t};\n}\n\n// Model marker to view data conversion helper.\n//\n// See {@link ~DowncastHelpers#markerToData `markerToData()` downcast helper} to learn more.\n//\n// @param {Object} config\n// @param {String} config.model\n// @param {Function} [config.view]\n// @param {module:utils/priorities~PriorityString} [config.converterPriority='normal']\n// @returns {Function} Conversion helper.\nfunction downcastMarkerToData( config ) {\n\tconfig = cloneDeep( config );\n\n\tconst group = config.model;\n\n\t// Default conversion.\n\tif ( !config.view ) {\n\t\tconfig.view = markerName => ( {\n\t\t\tgroup,\n\t\t\tname: markerName.substr( config.model.length + 1 )\n\t\t} );\n\t}\n\n\treturn dispatcher => {\n\t\tdispatcher.on( 'addMarker:' + group, insertMarkerData( config.view ), { priority: config.converterPriority || 'normal' } );\n\t\tdispatcher.on( 'removeMarker:' + group, removeMarkerData( config.view ), { priority: config.converterPriority || 'normal' } );\n\t};\n}\n\n// Model marker to highlight conversion helper.\n//\n// See {@link ~DowncastHelpers#markerToElement `.markerToElement()` downcast helper} for examples.\n//\n// @param {Object} config Conversion configuration.\n// @param {String} config.model The name of the model marker (or model marker group) to convert.\n// @param {module:engine/conversion/downcasthelpers~HighlightDescriptor|Function} config.view A highlight descriptor\n// that will be used for highlighting or a function that takes the model marker data as a parameter and returns a highlight descriptor.\n// @param {module:utils/priorities~PriorityString} [config.converterPriority='normal'] Converter priority.\n// @returns {Function} Conversion helper.\nfunction downcastMarkerToHighlight( config ) {\n\treturn dispatcher => {\n\t\tdispatcher.on( 'addMarker:' + config.model, highlightText( config.view ), { priority: config.converterPriority || 'normal' } );\n\t\tdispatcher.on( 'addMarker:' + config.model, highlightElement( config.view ), { priority: config.converterPriority || 'normal' } );\n\t\tdispatcher.on( 'removeMarker:' + config.model, removeHighlight( config.view ), { priority: config.converterPriority || 'normal' } );\n\t};\n}\n\n// Takes `config.view`, and if it is an {@link module:engine/view/elementdefinition~ElementDefinition}, converts it\n// to a function (because lower level converters accept only element creator functions).\n//\n// @param {module:engine/view/elementdefinition~ElementDefinition|Function} view View configuration.\n// @param {'container'|'attribute'|'ui'} viewElementType View element type to create.\n// @returns {Function} Element creator function to use in lower level converters.\nfunction normalizeToElementConfig( view, viewElementType ) {\n\tif ( typeof view == 'function' ) {\n\t\t// If `view` is already a function, don't do anything.\n\t\treturn view;\n\t}\n\n\treturn ( modelData, conversionApi ) => createViewElementFromDefinition( view, conversionApi, viewElementType );\n}\n\n// Creates a view element instance from the provided {@link module:engine/view/elementdefinition~ElementDefinition} and class.\n//\n// @param {module:engine/view/elementdefinition~ElementDefinition} viewElementDefinition\n// @param {module:engine/view/downcastwriter~DowncastWriter} viewWriter\n// @param {'container'|'attribute'|'ui'} viewElementType\n// @returns {module:engine/view/element~Element}\nfunction createViewElementFromDefinition( viewElementDefinition, conversionApi, viewElementType ) {\n\tif ( typeof viewElementDefinition == 'string' ) {\n\t\t// If `viewElementDefinition` is given as a `String`, normalize it to an object with `name` property.\n\t\tviewElementDefinition = { name: viewElementDefinition };\n\t}\n\n\tlet element;\n\tconst viewWriter = conversionApi.writer;\n\tconst attributes = Object.assign( {}, viewElementDefinition.attributes );\n\n\tif ( viewElementType == 'container' ) {\n\t\telement = viewWriter.createContainerElement( viewElementDefinition.name, attributes );\n\t} else if ( viewElementType == 'attribute' ) {\n\t\tconst options = {\n\t\t\tpriority: viewElementDefinition.priority || ViewAttributeElement.DEFAULT_PRIORITY\n\t\t};\n\n\t\telement = viewWriter.createAttributeElement( viewElementDefinition.name, attributes, options );\n\t} else {\n\t\t// 'ui'.\n\t\telement = viewWriter.createUIElement( viewElementDefinition.name, attributes );\n\t}\n\n\tif ( viewElementDefinition.styles ) {\n\t\tconst keys = Object.keys( viewElementDefinition.styles );\n\n\t\tfor ( const key of keys ) {\n\t\t\tviewWriter.setStyle( key, viewElementDefinition.styles[ key ], element );\n\t\t}\n\t}\n\n\tif ( viewElementDefinition.classes ) {\n\t\tconst classes = viewElementDefinition.classes;\n\n\t\tif ( typeof classes == 'string' ) {\n\t\t\tviewWriter.addClass( classes, element );\n\t\t} else {\n\t\t\tfor ( const className of classes ) {\n\t\t\t\tviewWriter.addClass( className, element );\n\t\t\t}\n\t\t}\n\t}\n\n\treturn element;\n}\n\nfunction getFromAttributeCreator( config ) {\n\tif ( config.model.values ) {\n\t\treturn ( modelAttributeValue, conversionApi ) => {\n\t\t\tconst view = config.view[ modelAttributeValue ];\n\n\t\t\tif ( view ) {\n\t\t\t\treturn view( modelAttributeValue, conversionApi );\n\t\t\t}\n\n\t\t\treturn null;\n\t\t};\n\t} else {\n\t\treturn config.view;\n\t}\n}\n\n// Takes the configuration, adds default parameters if they do not exist and normalizes other parameters to be used in downcast converters\n// for generating a view attribute.\n//\n// @param {Object} view View configuration.\nfunction normalizeToAttributeConfig( view ) {\n\tif ( typeof view == 'string' ) {\n\t\treturn modelAttributeValue => ( { key: view, value: modelAttributeValue } );\n\t} else if ( typeof view == 'object' ) {\n\t\t// { key, value, ... }\n\t\tif ( view.value ) {\n\t\t\treturn () => view;\n\t\t}\n\t\t// { key, ... }\n\t\telse {\n\t\t\treturn modelAttributeValue => ( { key: view.key, value: modelAttributeValue } );\n\t\t}\n\t} else {\n\t\t// function.\n\t\treturn view;\n\t}\n}\n\n// Helper function for `highlight`. Prepares the actual descriptor object using value passed to the converter.\nfunction prepareDescriptor( highlightDescriptor, data, conversionApi ) {\n\t// If passed descriptor is a creator function, call it. If not, just use passed value.\n\tconst descriptor = typeof highlightDescriptor == 'function' ?\n\t\thighlightDescriptor( data, conversionApi ) :\n\t\thighlightDescriptor;\n\n\tif ( !descriptor ) {\n\t\treturn null;\n\t}\n\n\t// Apply default descriptor priority.\n\tif ( !descriptor.priority ) {\n\t\tdescriptor.priority = 10;\n\t}\n\n\t// Default descriptor id is marker name.\n\tif ( !descriptor.id ) {\n\t\tdescriptor.id = data.markerName;\n\t}\n\n\treturn descriptor;\n}\n\n/**\n * An object describing how the marker highlight should be represented in the view.\n *\n * Each text node contained in a highlighted range will be wrapped in a `<span>`\n * {@link module:engine/view/attributeelement~AttributeElement view attribute element} with CSS class(es), attributes and a priority\n * described by this object.\n *\n * Additionally, each {@link module:engine/view/containerelement~ContainerElement container element} can handle displaying the highlight\n * separately by providing the `addHighlight` and `removeHighlight` custom properties. In this case:\n *\n *  * The `HighlightDescriptor` object is passed to the `addHighlight` function upon conversion and should be used to apply the highlight to\n *  the element.\n *  * The descriptor `id` is passed to the `removeHighlight` function upon conversion and should be used to remove the highlight with the\n *  given ID from the element.\n *\n * @typedef {Object} module:engine/conversion/downcasthelpers~HighlightDescriptor\n *\n * @property {String|Array.<String>} classes A CSS class or an array of classes to set. If the descriptor is used to\n * create an {@link module:engine/view/attributeelement~AttributeElement attribute element} over text nodes, these classes will be set\n * on that attribute element. If the descriptor is applied to an element, usually these classes will be set on that element, however,\n * this depends on how the element converts the descriptor.\n *\n * @property {String} [id] Descriptor identifier. If not provided, it defaults to the converted marker's name.\n *\n * @property {Number} [priority] Descriptor priority. If not provided, it defaults to `10`. If the descriptor is used to create\n * an {@link module:engine/view/attributeelement~AttributeElement attribute element}, it will be that element's\n * {@link module:engine/view/attributeelement~AttributeElement#priority priority}. If the descriptor is applied to an element,\n * the priority will be used to determine which descriptor is more important.\n *\n * @property {Object} [attributes] Attributes to set. If the descriptor is used to create\n * an {@link module:engine/view/attributeelement~AttributeElement attribute element} over text nodes, these attributes will be set on that\n * attribute element. If the descriptor is applied to an element, usually these attributes will be set on that element, however,\n * this depends on how the element converts the descriptor.\n */\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/utils/autoparagraphing\n */\n\n/**\n * Fixes all empty roots.\n *\n * @protected\n * @param {module:engine/model/writer~Writer} writer The model writer.\n * @returns {Boolean} `true` if any change has been applied, `false` otherwise.\n */\nexport function autoParagraphEmptyRoots( writer ) {\n\tconst { schema, document } = writer.model;\n\n\tfor ( const rootName of document.getRootNames() ) {\n\t\tconst root = document.getRoot( rootName );\n\n\t\tif ( root.isEmpty && !schema.checkChild( root, '$text' ) ) {\n\t\t\t// If paragraph element is allowed in the root, create paragraph element.\n\t\t\tif ( schema.checkChild( root, 'paragraph' ) ) {\n\t\t\t\twriter.insertElement( 'paragraph', root );\n\n\t\t\t\t// Other roots will get fixed in the next post-fixer round. Those will be triggered\n\t\t\t\t// in the same batch no matter if this method was triggered by the post-fixing or not\n\t\t\t\t// (the above insertElement call will trigger the post-fixers).\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn false;\n}\n\n/**\n * Checks if the given node wrapped with a paragraph would be accepted by the schema in the given position.\n *\n * @protected\n * @param {module:engine/model/position~Position} position The position at which to check.\n * @param {module:engine/model/node~Node|String} nodeOrType The child node or child type to check.\n * @param {module:engine/model/schema~Schema} schema A schema instance used for element validation.\n */\nexport function isParagraphable( position, nodeOrType, schema ) {\n\tconst context = schema.createContext( position );\n\n\t// When paragraph is allowed in this context...\n\tif ( !schema.checkChild( context, 'paragraph' ) ) {\n\t\treturn false;\n\t}\n\n\t// And a node would be allowed in this paragraph...\n\tif ( !schema.checkChild( context.push( 'paragraph' ), nodeOrType ) ) {\n\t\treturn false;\n\t}\n\n\treturn true;\n}\n\n/**\n * Inserts a new paragraph at the given position and returns a position inside that paragraph.\n *\n * @protected\n * @param {module:engine/model/position~Position} position The position where a paragraph should be inserted.\n * @param {module:engine/model/writer~Writer} writer The model writer.\n * @returns {module:engine/model/position~Position} Position inside the created paragraph.\n */\nexport function wrapInParagraph( position, writer ) {\n\tconst paragraph = writer.createElement( 'paragraph' );\n\n\twriter.insert( paragraph, position );\n\n\treturn writer.createPositionAt( paragraph, 0 );\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\nimport Matcher from '../view/matcher';\nimport ConversionHelpers from './conversionhelpers';\n\nimport { cloneDeep } from 'lodash-es';\nimport { logWarning } from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n\nimport priorities from '@ckeditor/ckeditor5-utils/src/priorities';\nimport { isParagraphable, wrapInParagraph } from '../model/utils/autoparagraphing';\n\n/**\n * Contains {@link module:engine/view/view view} to {@link module:engine/model/model model} converters for\n * {@link module:engine/conversion/upcastdispatcher~UpcastDispatcher}.\n *\n * @module engine/conversion/upcasthelpers\n */\n\n/**\n * Upcast conversion helper functions.\n *\n * @extends module:engine/conversion/conversionhelpers~ConversionHelpers\n */\nexport default class UpcastHelpers extends ConversionHelpers {\n\t/**\n\t * View element to model element conversion helper.\n\t *\n\t * This conversion results in creating a model element. For example,\n\t * view `<p>Foo</p>` becomes `<paragraph>Foo</paragraph>` in the model.\n\t *\n\t * Keep in mind that the element will be inserted only if it is allowed\n\t * by {@link module:engine/model/schema~Schema schema} configuration.\n\t *\n\t *\t\teditor.conversion.for( 'upcast' ).elementToElement( {\n\t *\t\t\tview: 'p',\n\t *\t\t\tmodel: 'paragraph'\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'upcast' ).elementToElement( {\n\t *\t\t\tview: 'p',\n\t *\t\t\tmodel: 'paragraph',\n\t *\t\t\tconverterPriority: 'high'\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'upcast' ).elementToElement( {\n\t *\t\t\tview: {\n\t *\t\t\t\tname: 'p',\n\t *\t\t\t\tclasses: 'fancy'\n\t *\t\t\t},\n\t *\t\t\tmodel: 'fancyParagraph'\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'upcast' ).elementToElement( {\n\t * \t\t\tview: {\n\t *\t\t\t\tname: 'p',\n\t *\t\t\t\tclasses: 'heading'\n\t * \t\t\t},\n\t * \t\t\tmodel: ( viewElement, conversionApi ) => {\n\t * \t\t\t\tconst modelWriter = conversionApi.writer;\n\t *\n\t * \t\t\t\treturn modelWriter.createElement( 'heading', { level: viewElement.getAttribute( 'data-level' ) } );\n\t * \t\t\t}\n\t * \t\t} );\n\t *\n\t * See {@link module:engine/conversion/conversion~Conversion#for `conversion.for()`} to learn how to add a converter\n\t * to the conversion process.\n\t *\n\t * @method #elementToElement\n\t * @param {Object} config Conversion configuration.\n\t * @param {module:engine/view/matcher~MatcherPattern} [config.view] Pattern matching all view elements which should be converted. If not\n\t * set, the converter will fire for every view element.\n\t * @param {String|module:engine/model/element~Element|Function} config.model Name of the model element, a model element instance or a\n\t * function that takes a view element and {@link module:engine/conversion/upcastdispatcher~UpcastConversionApi upcast conversion API}\n\t * and returns a model element. The model element will be inserted in the model.\n\t * @param {module:utils/priorities~PriorityString} [config.converterPriority='normal'] Converter priority.\n\t * @returns {module:engine/conversion/upcasthelpers~UpcastHelpers}\n\t */\n\telementToElement( config ) {\n\t\treturn this.add( upcastElementToElement( config ) );\n\t}\n\n\t/**\n\t * View element to model attribute conversion helper.\n\t *\n\t * This conversion results in setting an attribute on a model node. For example, view `<strong>Foo</strong>` becomes\n\t * `Foo` {@link module:engine/model/text~Text model text node} with `bold` attribute set to `true`.\n\t *\n\t * This helper is meant to set a model attribute on all the elements that are inside the converted element:\n\t *\n\t *\t\t<strong>Foo</strong>   -->   <strong><p>Foo</p></strong>   -->   <paragraph><$text bold=\"true\">Foo</$text></paragraph>\n\t *\n\t * Above is a sample of HTML code, that goes through autoparagraphing (first step) and then is converted (second step).\n\t * Even though `<strong>` is over `<p>` element, `bold=\"true\"` was added to the text. See\n\t * {@link module:engine/conversion/upcasthelpers~UpcastHelpers#attributeToAttribute} for comparison.\n\t *\n\t * Keep in mind that the attribute will be set only if it is allowed by {@link module:engine/model/schema~Schema schema} configuration.\n\t *\n\t *\t\teditor.conversion.for( 'upcast' ).elementToAttribute( {\n\t *\t\t\tview: 'strong',\n\t *\t\t\tmodel: 'bold'\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'upcast' ).elementToAttribute( {\n\t *\t\t\tview: 'strong',\n\t *\t\t\tmodel: 'bold',\n\t *\t\t\tconverterPriority: 'high'\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'upcast' ).elementToAttribute( {\n\t *\t\t\tview: {\n\t *\t\t\t\tname: 'span',\n\t *\t\t\t\tclasses: 'bold'\n\t *\t\t\t},\n\t *\t\t\tmodel: 'bold'\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'upcast' ).elementToAttribute( {\n\t *\t\t\tview: {\n\t *\t\t\t\tname: 'span',\n\t *\t\t\t\tclasses: [ 'styled', 'styled-dark' ]\n\t *\t\t\t},\n\t *\t\t\tmodel: {\n\t *\t\t\t\tkey: 'styled',\n\t *\t\t\t\tvalue: 'dark'\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t * \t\teditor.conversion.for( 'upcast' ).elementToAttribute( {\n\t *\t\t\tview: {\n\t *\t\t\t\tname: 'span',\n\t *\t\t\t\tstyles: {\n\t *\t\t\t\t\t'font-size': /[\\s\\S]+/\n\t *\t\t\t\t}\n\t *\t\t\t},\n\t *\t\t\tmodel: {\n\t *\t\t\t\tkey: 'fontSize',\n\t *\t\t\t\tvalue: ( viewElement, conversionApi ) => {\n\t *\t\t\t\t\tconst fontSize = viewElement.getStyle( 'font-size' );\n\t *\t\t\t\t\tconst value = fontSize.substr( 0, fontSize.length - 2 );\n\t *\n\t *\t\t\t\t\tif ( value <= 10 ) {\n\t *\t\t\t\t\t\treturn 'small';\n\t *\t\t\t\t\t} else if ( value > 12 ) {\n\t *\t\t\t\t\t\treturn 'big';\n\t *\t\t\t\t\t}\n\t *\n\t *\t\t\t\t\treturn null;\n\t *\t\t\t\t}\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t * See {@link module:engine/conversion/conversion~Conversion#for `conversion.for()`} to learn how to add a converter\n\t * to the conversion process.\n\t *\n\t * @method #elementToAttribute\n\t * @param {Object} config Conversion configuration.\n\t * @param {module:engine/view/matcher~MatcherPattern} config.view Pattern matching all view elements which should be converted.\n\t * @param {String|Object} config.model Model attribute key or an object with `key` and `value` properties, describing\n\t * the model attribute. `value` property may be set as a function that takes a view element and\n\t * {@link module:engine/conversion/upcastdispatcher~UpcastConversionApi upcast conversion API} and returns the value.\n\t * If `String` is given, the model attribute value will be set to `true`.\n\t * @param {module:utils/priorities~PriorityString} [config.converterPriority='low'] Converter priority.\n\t * @returns {module:engine/conversion/upcasthelpers~UpcastHelpers}\n\t */\n\telementToAttribute( config ) {\n\t\treturn this.add( upcastElementToAttribute( config ) );\n\t}\n\n\t/**\n\t * View attribute to model attribute conversion helper.\n\t *\n\t * This conversion results in setting an attribute on a model node. For example, view `<img src=\"foo.jpg\"></img>` becomes\n\t * `<image source=\"foo.jpg\"></image>` in the model.\n\t *\n\t * This helper is meant to convert view attributes from view elements which got converted to the model, so the view attribute\n\t * is set only on the corresponding model node:\n\t *\n\t *\t\t<div class=\"dark\"><div>foo</div></div>    -->    <div dark=\"true\"><div>foo</div></div>\n\t *\n\t * Above, `class=\"dark\"` attribute is added only to the `<div>` elements that has it. This is in contrary to\n\t * {@link module:engine/conversion/upcasthelpers~UpcastHelpers#elementToAttribute} which sets attributes for\n\t * all the children in the model:\n\t *\n\t *\t\t<strong>Foo</strong>   -->   <strong><p>Foo</p></strong>   -->   <paragraph><$text bold=\"true\">Foo</$text></paragraph>\n\t *\n\t * Above is a sample of HTML code, that goes through autoparagraphing (first step) and then is converted (second step).\n\t * Even though `<strong>` is over `<p>` element, `bold=\"true\"` was added to the text.\n\t *\n\t * Keep in mind that the attribute will be set only if it is allowed by {@link module:engine/model/schema~Schema schema} configuration.\n\t *\n\t *\t\teditor.conversion.for( 'upcast' ).attributeToAttribute( {\n\t *\t\t\tview: 'src',\n\t *\t\t\tmodel: 'source'\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'upcast' ).attributeToAttribute( {\n\t *\t\t\tview: { key: 'src' },\n\t *\t\t\tmodel: 'source'\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'upcast' ).attributeToAttribute( {\n\t *\t\t\tview: { key: 'src' },\n\t *\t\t\tmodel: 'source',\n\t *\t\t\tconverterPriority: 'normal'\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'upcast' ).attributeToAttribute( {\n\t *\t\t\tview: {\n\t *\t\t\t\tkey: 'data-style',\n\t *\t\t\t\tvalue: /[\\s\\S]+/\n\t *\t\t\t},\n\t *\t\t\tmodel: 'styled'\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'upcast' ).attributeToAttribute( {\n\t *\t\t\tview: {\n\t *\t\t\t\tname: 'img',\n\t *\t\t\t\tkey: 'class',\n\t *\t\t\t\tvalue: 'styled-dark'\n\t *\t\t\t},\n\t *\t\t\tmodel: {\n\t *\t\t\t\tkey: 'styled',\n\t *\t\t\t\tvalue: 'dark'\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'upcast' ).attributeToAttribute( {\n\t *\t\t\tview: {\n\t *\t\t\t\tkey: 'class',\n\t *\t\t\t\tvalue: /styled-[\\S]+/\n\t *\t\t\t},\n\t *\t\t\tmodel: {\n\t *\t\t\t\tkey: 'styled'\n\t *\t\t\t\tvalue: ( viewElement, conversionApi ) => {\n\t *\t\t\t\t\tconst regexp = /styled-([\\S]+)/;\n\t *\t\t\t\t\tconst match = viewElement.getAttribute( 'class' ).match( regexp );\n\t *\n\t *\t\t\t\t\treturn match[ 1 ];\n\t *\t\t\t\t}\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t * Converting styles works a bit differently as it requires `view.styles` to be an object and by default\n\t * a model attribute will be set to `true` by such a converter. You can set the model attribute to any value by providing the `value`\n\t * callback that returns the desired value.\n\t *\n\t *\t\t// Default conversion of font-weight style will result in setting bold attribute to true.\n\t *\t\teditor.conversion.for( 'upcast' ).attributeToAttribute( {\n\t *\t\t\tview: {\n\t *\t\t\t\tstyles: {\n\t *\t\t\t\t\t'font-weight': 'bold'\n\t *\t\t\t\t}\n\t *\t\t\t},\n\t *\t\t\tmodel: 'bold'\n\t *\t\t} );\n\t *\n\t *\t\t// This converter will pass any style value to the `lineHeight` model attribute.\n\t *\t\teditor.conversion.for( 'upcast' ).attributeToAttribute( {\n\t *\t\t\tview: {\n\t *\t\t\t\tstyles: {\n\t *\t\t\t\t\t'line-height': /[\\s\\S]+/\n\t *\t\t\t\t}\n\t *\t\t\t},\n\t *\t\t\tmodel: {\n\t *\t\t\t\tkey: 'lineHeight',\n\t *\t\t\t\tvalue: ( viewElement, conversionApi ) => viewElement.getStyle( 'line-height' )\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t * See {@link module:engine/conversion/conversion~Conversion#for `conversion.for()`} to learn how to add a converter\n\t * to the conversion process.\n\t *\n\t * @method #attributeToAttribute\n\t * @param {Object} config Conversion configuration.\n\t * @param {String|Object} config.view Specifies which view attribute will be converted. If a `String` is passed,\n\t * attributes with given key will be converted. If an `Object` is passed, it must have a required `key` property,\n\t * specifying view attribute key, and may have an optional `value` property, specifying view attribute value and optional `name`\n\t * property specifying a view element name from/on which the attribute should be converted. `value` can be given as a `String`,\n\t * a `RegExp` or a function callback, that takes view attribute value as the only parameter and returns `Boolean`.\n\t * @param {String|Object} config.model Model attribute key or an object with `key` and `value` properties, describing\n\t * the model attribute. `value` property may be set as a function that takes a view element and\n\t * {@link module:engine/conversion/upcastdispatcher~UpcastConversionApi upcast conversion API} and returns the value.\n\t * If `String` is given, the model attribute value will be same as view attribute value.\n\t * @param {module:utils/priorities~PriorityString} [config.converterPriority='low'] Converter priority.\n\t * @returns {module:engine/conversion/upcasthelpers~UpcastHelpers}\n\t */\n\tattributeToAttribute( config ) {\n\t\treturn this.add( upcastAttributeToAttribute( config ) );\n\t}\n\n\t/**\n\t * View element to model marker conversion helper.\n\t *\n\t * **Note**: This method was deprecated. Please use {@link #dataToMarker} instead.\n\t *\n\t * This conversion results in creating a model marker. For example, if the marker was stored in a view as an element:\n\t * `<p>Fo<span data-marker=\"comment\" data-comment-id=\"7\"></span>o</p><p>B<span data-marker=\"comment\" data-comment-id=\"7\"></span>ar</p>`,\n\t * after the conversion is done, the marker will be available in\n\t * {@link module:engine/model/model~Model#markers model document markers}.\n\t *\n\t *\t\teditor.conversion.for( 'upcast' ).elementToMarker( {\n\t *\t\t\tview: 'marker-search',\n\t *\t\t\tmodel: 'search'\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'upcast' ).elementToMarker( {\n\t *\t\t\tview: 'marker-search',\n\t *\t\t\tmodel: 'search',\n\t *\t\t\tconverterPriority: 'high'\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'upcast' ).elementToMarker( {\n\t *\t\t\tview: 'marker-search',\n\t *\t\t\tmodel: ( viewElement, conversionApi ) => 'comment:' + viewElement.getAttribute( 'data-comment-id' )\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'upcast' ).elementToMarker( {\n\t *\t\t\tview: {\n\t *\t\t\t\tname: 'span',\n\t *\t\t\t\tattributes: {\n\t *\t\t\t\t\t'data-marker': 'search'\n\t *\t\t\t\t}\n\t *\t\t\t},\n\t *\t\t\tmodel: 'search'\n\t *\t\t} );\n\t *\n\t * See {@link module:engine/conversion/conversion~Conversion#for `conversion.for()`} to learn how to add a converter\n\t * to the conversion process.\n\t *\n\t * @deprecated\n\t * @method #elementToMarker\n\t * @param {Object} config Conversion configuration.\n\t * @param {module:engine/view/matcher~MatcherPattern} config.view Pattern matching all view elements which should be converted.\n\t * @param {String|Function} config.model Name of the model marker, or a function that takes a view element and returns\n\t * a model marker name.\n\t * @param {module:utils/priorities~PriorityString} [config.converterPriority='normal'] Converter priority.\n\t * @returns {module:engine/conversion/upcasthelpers~UpcastHelpers}\n\t */\n\telementToMarker( config ) {\n\t\t/**\n\t\t * The {@link module:engine/conversion/upcasthelpers~UpcastHelpers#elementToMarker `UpcastHelpers#elementToMarker()`}\n\t\t * method was deprecated and will be removed in the near future.\n\t\t * Please use {@link module:engine/conversion/upcasthelpers~UpcastHelpers#dataToMarker `UpcastHelpers#dataToMarker()`} instead.\n\t\t *\n\t\t * @error upcast-helpers-element-to-marker-deprecated\n\t\t */\n\t\tlogWarning( 'upcast-helpers-element-to-marker-deprecated' );\n\n\t\treturn this.add( upcastElementToMarker( config ) );\n\t}\n\n\t/**\n\t * View-to-model marker conversion helper.\n\t *\n\t * Converts view data created by {@link module:engine/conversion/downcasthelpers~DowncastHelpers#markerToData `#markerToData()`}\n\t * back to a model marker.\n\t *\n\t * This converter looks for specific view elements and view attributes that mark marker boundaries. See\n\t * {@link module:engine/conversion/downcasthelpers~DowncastHelpers#markerToData `#markerToData()`} to learn what view data\n\t * is expected by this converter.\n\t *\n\t * The `config.view` property is equal to the marker group name to convert.\n\t *\n\t * By default, this converter creates markers with the `group:name` name convention (to match the default `markerToData` conversion).\n\t *\n\t * The conversion configuration can take a function that will generate a marker name.\n\t * If such function is set as the `config.model` parameter, it is passed the `name` part from the view element or attribute and it is\n\t * expected to return a string with the marker name.\n\t *\n\t * Basic usage:\n\t *\n\t *\t\t// Using the default conversion.\n\t *\t\t// In this case, all markers from the `comment` group will be converted.\n\t *\t\t// The conversion will look for `<comment-start>` and `<comment-end>` tags and\n\t *\t\t// `data-comment-start-before`, `data-comment-start-after`,\n\t *\t\t// `data-comment-end-before` and `data-comment-end-after` attributes.\n\t *\t\teditor.conversion.for( 'upcast' ).dataToMarker( {\n\t *\t\t\tview: 'comment'\n\t *\t\t} );\n\t *\n\t * An example of a model that may be generated by this conversion:\n\t *\n\t *\t\t// View:\n\t *\t\t<p>Foo<comment-start name=\"commentId:uid\"></comment-start>bar</p>\n\t *\t\t<figure data-comment-end-after=\"commentId:uid\" class=\"image\"><img src=\"abc.jpg\" /></figure>\n\t *\n\t *\t\t// Model:\n\t *\t\t<paragraph>Foo[bar</paragraph>\n\t *\t\t<image src=\"abc.jpg\"></image>]\n\t *\n\t * Where `[]` are boundaries of a marker that will receive the `comment:commentId:uid` name.\n\t *\n\t * Other examples of usage:\n\t *\n\t *\t\t// Using a custom function which is the same as the default conversion:\n\t *\t\teditor.conversion.for( 'upcast' ).dataToMarker( {\n\t *\t\t\tview: 'comment',\n\t *\t\t\tmodel: ( name, conversionApi ) => 'comment:' + name,\n\t *\t\t} );\n\t *\n\t *\t\t// Using the converter priority:\n\t *\t\teditor.conversion.for( 'upcast' ).dataToMarker( {\n\t *\t\t\tview: 'comment',\n\t *\t\t\tmodel: ( name, conversionApi ) => 'comment:' + name,\n\t *\t\t\tconverterPriority: 'high'\n\t *\t\t} );\n\t *\n\t * See {@link module:engine/conversion/conversion~Conversion#for `conversion.for()`} to learn how to add a converter\n\t * to the conversion process.\n\t *\n\t * @method #dataToMarker\n\t * @param {Object} config Conversion configuration.\n\t * @param {String} config.view The marker group name to convert.\n\t * @param {Function} [config.model] A function that takes the `name` part from the view element or attribute and\n\t * {@link module:engine/conversion/upcastdispatcher~UpcastConversionApi upcast conversion API} and returns the marker name.\n\t * @param {module:utils/priorities~PriorityString} [config.converterPriority='normal'] Converter priority.\n\t * @returns {module:engine/conversion/upcasthelpers~UpcastHelpers}\n\t */\n\tdataToMarker( config ) {\n\t\treturn this.add( upcastDataToMarker( config ) );\n\t}\n}\n\n/**\n * Function factory, creates a converter that converts {@link module:engine/view/documentfragment~DocumentFragment view document fragment}\n * or all children of {@link module:engine/view/element~Element} into\n * {@link module:engine/model/documentfragment~DocumentFragment model document fragment}.\n * This is the \"entry-point\" converter for upcast (view to model conversion). This converter starts the conversion of all children\n * of passed view document fragment. Those children {@link module:engine/view/node~Node view nodes} are then handled by other converters.\n *\n * This also a \"default\", last resort converter for all view elements that has not been converted by other converters.\n * When a view element is being converted to the model but it does not have converter specified, that view element\n * will be converted to {@link module:engine/model/documentfragment~DocumentFragment model document fragment} and returned.\n *\n * @returns {Function} Universal converter for view {@link module:engine/view/documentfragment~DocumentFragment fragments} and\n * {@link module:engine/view/element~Element elements} that returns\n * {@link module:engine/model/documentfragment~DocumentFragment model fragment} with children of converted view item.\n */\nexport function convertToModelFragment() {\n\treturn ( evt, data, conversionApi ) => {\n\t\t// Second argument in `consumable.consume` is discarded for ViewDocumentFragment but is needed for ViewElement.\n\t\tif ( !data.modelRange && conversionApi.consumable.consume( data.viewItem, { name: true } ) ) {\n\t\t\tconst { modelRange, modelCursor } = conversionApi.convertChildren( data.viewItem, data.modelCursor );\n\n\t\t\tdata.modelRange = modelRange;\n\t\t\tdata.modelCursor = modelCursor;\n\t\t}\n\t};\n}\n\n/**\n * Function factory, creates a converter that converts {@link module:engine/view/text~Text} to {@link module:engine/model/text~Text}.\n *\n * @returns {Function} {@link module:engine/view/text~Text View text} converter.\n */\nexport function convertText() {\n\treturn ( evt, data, { schema, consumable, writer } ) => {\n\t\tlet position = data.modelCursor;\n\n\t\t// When node is already converted then do nothing.\n\t\tif ( !consumable.test( data.viewItem ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !schema.checkChild( position, '$text' ) ) {\n\t\t\tif ( !isParagraphable( position, '$text', schema ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tposition = wrapInParagraph( position, writer );\n\t\t}\n\n\t\tconsumable.consume( data.viewItem );\n\n\t\tconst text = writer.createText( data.viewItem.data );\n\n\t\twriter.insert( text, position );\n\n\t\tdata.modelRange = writer.createRange(\n\t\t\tposition,\n\t\t\tposition.getShiftedBy( text.offsetSize )\n\t\t);\n\t\tdata.modelCursor = data.modelRange.end;\n\t};\n}\n\n/**\n * Function factory, creates a callback function which converts a {@link module:engine/view/selection~Selection\n * view selection} taken from the {@link module:engine/view/document~Document#event:selectionChange} event\n * and sets in on the {@link module:engine/model/document~Document#selection model}.\n *\n * **Note**: because there is no view selection change dispatcher nor any other advanced view selection to model\n * conversion mechanism, the callback should be set directly on view document.\n *\n *\t\tview.document.on( 'selectionChange', convertSelectionChange( modelDocument, mapper ) );\n *\n * @param {module:engine/model/model~Model} model Data model.\n * @param {module:engine/conversion/mapper~Mapper} mapper Conversion mapper.\n * @returns {Function} {@link module:engine/view/document~Document#event:selectionChange} callback function.\n */\nexport function convertSelectionChange( model, mapper ) {\n\treturn ( evt, data ) => {\n\t\tconst viewSelection = data.newSelection;\n\n\t\tconst ranges = [];\n\n\t\tfor ( const viewRange of viewSelection.getRanges() ) {\n\t\t\tranges.push( mapper.toModelRange( viewRange ) );\n\t\t}\n\n\t\tconst modelSelection = model.createSelection( ranges, { backward: viewSelection.isBackward } );\n\n\t\tif ( !modelSelection.isEqual( model.document.selection ) ) {\n\t\t\tmodel.change( writer => {\n\t\t\t\twriter.setSelection( modelSelection );\n\t\t\t} );\n\t\t}\n\t};\n}\n\n// View element to model element conversion helper.\n//\n// See {@link ~UpcastHelpers#elementToElement `.elementToElement()` upcast helper} for examples.\n//\n// @param {Object} config Conversion configuration.\n// @param {module:engine/view/matcher~MatcherPattern} [config.view] Pattern matching all view elements which should be converted. If not\n// set, the converter will fire for every view element.\n// @param {String|module:engine/model/element~Element|Function} config.model Name of the model element, a model element\n// instance or a function that takes a view element and returns a model element. The model element will be inserted in the model.\n// @param {module:utils/priorities~PriorityString} [config.converterPriority='normal'] Converter priority.\n// @returns {Function} Conversion helper.\nfunction upcastElementToElement( config ) {\n\tconfig = cloneDeep( config );\n\n\tconst converter = prepareToElementConverter( config );\n\n\tconst elementName = getViewElementNameFromConfig( config.view );\n\tconst eventName = elementName ? 'element:' + elementName : 'element';\n\n\treturn dispatcher => {\n\t\tdispatcher.on( eventName, converter, { priority: config.converterPriority || 'normal' } );\n\t};\n}\n\n// View element to model attribute conversion helper.\n//\n// See {@link ~UpcastHelpers#elementToAttribute `.elementToAttribute()` upcast helper} for examples.\n//\n// @param {Object} config Conversion configuration.\n// @param {module:engine/view/matcher~MatcherPattern} config.view Pattern matching all view elements which should be converted.\n// @param {String|Object} config.model Model attribute key or an object with `key` and `value` properties, describing\n// the model attribute. `value` property may be set as a function that takes a view element and returns the value.\n// If `String` is given, the model attribute value will be set to `true`.\n// @param {module:utils/priorities~PriorityString} [config.converterPriority='low'] Converter priority.\n// @returns {Function} Conversion helper.\nfunction upcastElementToAttribute( config ) {\n\tconfig = cloneDeep( config );\n\n\tnormalizeModelAttributeConfig( config );\n\n\tconst converter = prepareToAttributeConverter( config, false );\n\n\tconst elementName = getViewElementNameFromConfig( config.view );\n\tconst eventName = elementName ? 'element:' + elementName : 'element';\n\n\treturn dispatcher => {\n\t\tdispatcher.on( eventName, converter, { priority: config.converterPriority || 'low' } );\n\t};\n}\n\n// View attribute to model attribute conversion helper.\n//\n// See {@link ~UpcastHelpers#attributeToAttribute `.attributeToAttribute()` upcast helper} for examples.\n//\n// @param {Object} config Conversion configuration.\n// @param {String|Object} config.view Specifies which view attribute will be converted. If a `String` is passed,\n// attributes with given key will be converted. If an `Object` is passed, it must have a required `key` property,\n// specifying view attribute key, and may have an optional `value` property, specifying view attribute value and optional `name`\n// property specifying a view element name from/on which the attribute should be converted. `value` can be given as a `String`,\n// a `RegExp` or a function callback, that takes view attribute value as the only parameter and returns `Boolean`.\n// @param {String|Object} config.model Model attribute key or an object with `key` and `value` properties, describing\n// the model attribute. `value` property may be set as a function that takes a view element and returns the value.\n// If `String` is given, the model attribute value will be same as view attribute value.\n// @param {module:utils/priorities~PriorityString} [config.converterPriority='low'] Converter priority.\n// @returns {Function} Conversion helper.\nfunction upcastAttributeToAttribute( config ) {\n\tconfig = cloneDeep( config );\n\n\tlet viewKey = null;\n\n\tif ( typeof config.view == 'string' || config.view.key ) {\n\t\tviewKey = normalizeViewAttributeKeyValueConfig( config );\n\t}\n\n\tnormalizeModelAttributeConfig( config, viewKey );\n\n\tconst converter = prepareToAttributeConverter( config, true );\n\n\treturn dispatcher => {\n\t\tdispatcher.on( 'element', converter, { priority: config.converterPriority || 'low' } );\n\t};\n}\n\n// View element to model marker conversion helper.\n//\n// See {@link ~UpcastHelpers#elementToMarker `.elementToMarker()` upcast helper} for examples.\n//\n// @param {Object} config Conversion configuration.\n// @param {module:engine/view/matcher~MatcherPattern} config.view Pattern matching all view elements which should be converted.\n// @param {String|Function} config.model Name of the model marker, or a function that takes a view element and returns\n// a model marker name.\n// @param {module:utils/priorities~PriorityString} [config.converterPriority='normal'] Converter priority.\n// @returns {Function} Conversion helper.\nfunction upcastElementToMarker( config ) {\n\tconfig = cloneDeep( config );\n\n\tnormalizeElementToMarkerConfig( config );\n\n\treturn upcastElementToElement( config );\n}\n\n// View data to model marker conversion helper.\n//\n// See {@link ~UpcastHelpers#dataToMarker} to learn more.\n//\n// @param {Object} config\n// @param {String} config.view\n// @param {Function} [config.model]\n// @param {module:utils/priorities~PriorityString} [config.converterPriority='normal']\n// @returns {Function} Conversion helper.\nfunction upcastDataToMarker( config ) {\n\tconfig = cloneDeep( config );\n\n\t// Default conversion.\n\tif ( !config.model ) {\n\t\tconfig.model = name => {\n\t\t\treturn name ? config.view + ':' + name : config.view;\n\t\t};\n\t}\n\n\tconst converterStart = prepareToElementConverter( normalizeDataToMarkerConfig( config, 'start' ) );\n\tconst converterEnd = prepareToElementConverter( normalizeDataToMarkerConfig( config, 'end' ) );\n\n\treturn dispatcher => {\n\t\tdispatcher.on( 'element:' + config.view + '-start', converterStart, { priority: config.converterPriority || 'normal' } );\n\t\tdispatcher.on( 'element:' + config.view + '-end', converterEnd, { priority: config.converterPriority || 'normal' } );\n\n\t\t// Below is a hack that is needed to properly handle `converterPriority` for both elements and attributes.\n\t\t// Attribute conversion needs to be performed *after* element conversion.\n\t\t// This converter handles both element conversion and attribute conversion, which means that if a single\n\t\t// `config.converterPriority` is used, it will lead to problems. For example, if `'high'` priority is used,\n\t\t// then attribute conversion will be performed before a lot of element upcast converters.\n\t\t// On the other hand we want to support `config.converterPriority` and overwriting conveters.\n\t\t//\n\t\t// To have it work, we need to do some extra processing for priority for attribute converter.\n\t\t// Priority `'low'` value should be the base value and then we will change it depending on `config.converterPriority` value.\n\t\t//\n\t\t// This hack probably would not be needed if attributes are upcasted separately.\n\t\t//\n\t\tconst basePriority = priorities.get( 'low' );\n\t\tconst maxPriority = priorities.get( 'highest' );\n\t\tconst priorityFactor = priorities.get( config.converterPriority ) / maxPriority; // Number in range [ -1, 1 ].\n\n\t\tdispatcher.on( 'element', upcastAttributeToMarker( config ), { priority: basePriority + priorityFactor } );\n\t};\n}\n\n// Function factory, returns a callback function which converts view attributes to a model marker.\n//\n// The converter looks for elements with `data-group-start-before`, `data-group-start-after`, `data-group-end-before`\n// and `data-group-end-after` attributes and inserts `$marker` model elements before/after those elements.\n// `group` part is specified in `config.view`.\n//\n// @param {Object} config\n// @param {String} config.view\n// @param {Function} [config.model]\n// @returns {Function} Marker converter.\nfunction upcastAttributeToMarker( config ) {\n\treturn ( evt, data, conversionApi ) => {\n\t\tconst attrName = `data-${ config.view }`;\n\n\t\t// This converter wants to add a model element, marking a marker, before/after an element (or maybe even group of elements).\n\t\t// To do that, we can use `data.modelRange` which is set on an element (or a group of elements) that has been upcasted.\n\t\t// But, if the processed view element has not been upcasted yet (it does not have been converted), we need to\n\t\t// fire conversion for its children first, then we will have `data.modelRange` available.\n\t\tif ( !data.modelRange ) {\n\t\t\tdata = Object.assign( data, conversionApi.convertChildren( data.viewItem, data.modelCursor ) );\n\t\t}\n\n\t\tif ( conversionApi.consumable.consume( data.viewItem, { attributes: attrName + '-end-after' } ) ) {\n\t\t\taddMarkerElements( data.modelRange.end, data.viewItem.getAttribute( attrName + '-end-after' ).split( ',' ) );\n\t\t}\n\n\t\tif ( conversionApi.consumable.consume( data.viewItem, { attributes: attrName + '-start-after' } ) ) {\n\t\t\taddMarkerElements( data.modelRange.end, data.viewItem.getAttribute( attrName + '-start-after' ).split( ',' ) );\n\t\t}\n\n\t\tif ( conversionApi.consumable.consume( data.viewItem, { attributes: attrName + '-end-before' } ) ) {\n\t\t\taddMarkerElements( data.modelRange.start, data.viewItem.getAttribute( attrName + '-end-before' ).split( ',' ) );\n\t\t}\n\n\t\tif ( conversionApi.consumable.consume( data.viewItem, { attributes: attrName + '-start-before' } ) ) {\n\t\t\taddMarkerElements( data.modelRange.start, data.viewItem.getAttribute( attrName + '-start-before' ).split( ',' ) );\n\t\t}\n\n\t\tfunction addMarkerElements( position, markerViewNames ) {\n\t\t\tfor ( const markerViewName of markerViewNames ) {\n\t\t\t\tconst markerName = config.model( markerViewName, conversionApi );\n\t\t\t\tconst element = conversionApi.writer.createElement( '$marker', { 'data-name': markerName } );\n\n\t\t\t\tconversionApi.writer.insert( element, position );\n\n\t\t\t\tif ( data.modelCursor.isEqual( position ) ) {\n\t\t\t\t\tdata.modelCursor = data.modelCursor.getShiftedBy( 1 );\n\t\t\t\t} else {\n\t\t\t\t\tdata.modelCursor = data.modelCursor._getTransformedByInsertion( position, 1 );\n\t\t\t\t}\n\n\t\t\t\tdata.modelRange = data.modelRange._getTransformedByInsertion( position, 1 )[ 0 ];\n\t\t\t}\n\t\t}\n\t};\n}\n\n// Helper function for from-view-element conversion. Checks if `config.view` directly specifies converted view element's name\n// and if so, returns it.\n//\n// @param {Object} config Conversion view config.\n// @returns {String|null} View element name or `null` if name is not directly set.\nfunction getViewElementNameFromConfig( viewConfig ) {\n\tif ( typeof viewConfig == 'string' ) {\n\t\treturn viewConfig;\n\t}\n\n\tif ( typeof viewConfig == 'object' && typeof viewConfig.name == 'string' ) {\n\t\treturn viewConfig.name;\n\t}\n\n\treturn null;\n}\n\n// Helper for to-model-element conversion. Takes a config object and returns a proper converter function.\n//\n// @param {Object} config Conversion configuration.\n// @returns {Function} View to model converter.\nfunction prepareToElementConverter( config ) {\n\tconst matcher = new Matcher( config.view );\n\n\treturn ( evt, data, conversionApi ) => {\n\t\tconst matcherResult = matcher.match( data.viewItem );\n\n\t\tif ( !matcherResult ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst match = matcherResult.match;\n\n\t\t// Force consuming element's name.\n\t\tmatch.name = true;\n\n\t\tif ( !conversionApi.consumable.test( data.viewItem, match ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst modelElement = getModelElement( config.model, data.viewItem, conversionApi );\n\n\t\tif ( !modelElement ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !conversionApi.safeInsert( modelElement, data.modelCursor ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconversionApi.consumable.consume( data.viewItem, match );\n\t\tconversionApi.convertChildren( data.viewItem, modelElement );\n\t\tconversionApi.updateConversionResult( modelElement, data );\n\t};\n}\n\n// Helper function for upcasting-to-element converter. Takes the model configuration, the converted view element\n// and a writer instance and returns a model element instance to be inserted in the model.\n//\n// @param {String|Function|module:engine/model/element~Element} model Model conversion configuration.\n// @param {module:engine/view/node~Node} input The converted view node.\n// @param {module:engine/conversion/upcastdispatcher~UpcastConversionApi} conversionApi The upcast conversion API.\nfunction getModelElement( model, input, conversionApi ) {\n\tif ( model instanceof Function ) {\n\t\treturn model( input, conversionApi );\n\t} else {\n\t\treturn conversionApi.writer.createElement( model );\n\t}\n}\n\n// Helper function view-attribute-to-model-attribute helper. Normalizes `config.view` which was set as `String` or\n// as an `Object` with `key`, `value` and `name` properties. Normalized `config.view` has is compatible with\n// {@link module:engine/view/matcher~MatcherPattern}.\n//\n// @param {Object} config Conversion config.\n// @returns {String} Key of the converted view attribute.\nfunction normalizeViewAttributeKeyValueConfig( config ) {\n\tif ( typeof config.view == 'string' ) {\n\t\tconfig.view = { key: config.view };\n\t}\n\n\tconst key = config.view.key;\n\tlet normalized;\n\n\tif ( key == 'class' || key == 'style' ) {\n\t\tconst keyName = key == 'class' ? 'classes' : 'styles';\n\n\t\tnormalized = {\n\t\t\t[ keyName ]: config.view.value\n\t\t};\n\t} else {\n\t\tconst value = typeof config.view.value == 'undefined' ? /[\\s\\S]*/ : config.view.value;\n\n\t\tnormalized = {\n\t\t\tattributes: {\n\t\t\t\t[ key ]: value\n\t\t\t}\n\t\t};\n\t}\n\n\tif ( config.view.name ) {\n\t\tnormalized.name = config.view.name;\n\t}\n\n\tconfig.view = normalized;\n\n\treturn key;\n}\n\n// Helper function that normalizes `config.model` in from-model-attribute conversion. `config.model` can be set\n// as a `String`, an `Object` with only `key` property or an `Object` with `key` and `value` properties. Normalized\n// `config.model` is an `Object` with `key` and `value` properties.\n//\n// @param {Object} config Conversion config.\n// @param {String} viewAttributeKeyToCopy Key of the converted view attribute. If it is set, model attribute value\n// will be equal to view attribute value.\nfunction normalizeModelAttributeConfig( config, viewAttributeKeyToCopy = null ) {\n\tconst defaultModelValue = viewAttributeKeyToCopy === null ? true : viewElement => viewElement.getAttribute( viewAttributeKeyToCopy );\n\n\tconst key = typeof config.model != 'object' ? config.model : config.model.key;\n\tconst value = typeof config.model != 'object' || typeof config.model.value == 'undefined' ? defaultModelValue : config.model.value;\n\n\tconfig.model = { key, value };\n}\n\n// Helper for to-model-attribute conversion. Takes the model attribute name and conversion configuration and returns\n// a proper converter function.\n//\n// @param {String} modelAttributeKey The key of the model attribute to set on a model node.\n// @param {Object|Array.<Object>} config Conversion configuration. It is possible to provide multiple configurations in an array.\n// @param {Boolean} shallow If set to `true` the attribute will be set only on top-level nodes. Otherwise, it will be set\n// on all elements in the range.\nfunction prepareToAttributeConverter( config, shallow ) {\n\tconst matcher = new Matcher( config.view );\n\n\treturn ( evt, data, conversionApi ) => {\n\t\tconst match = matcher.match( data.viewItem );\n\n\t\t// If there is no match, this callback should not do anything.\n\t\tif ( !match ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst modelKey = config.model.key;\n\t\tconst modelValue = typeof config.model.value == 'function' ?\n\t\t\tconfig.model.value( data.viewItem, conversionApi ) : config.model.value;\n\n\t\t// Do not convert if attribute building function returned falsy value.\n\t\tif ( modelValue === null ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( onlyViewNameIsDefined( config.view, data.viewItem ) ) {\n\t\t\tmatch.match.name = true;\n\t\t} else {\n\t\t\t// Do not test or consume `name` consumable.\n\t\t\tdelete match.match.name;\n\t\t}\n\n\t\t// Try to consume appropriate values from consumable values list.\n\t\tif ( !conversionApi.consumable.test( data.viewItem, match.match ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Since we are converting to attribute we need an range on which we will set the attribute.\n\t\t// If the range is not created yet, we will create it.\n\t\tif ( !data.modelRange ) {\n\t\t\t// Convert children and set conversion result as a current data.\n\t\t\tdata = Object.assign( data, conversionApi.convertChildren( data.viewItem, data.modelCursor ) );\n\t\t}\n\n\t\t// Set attribute on current `output`. `Schema` is checked inside this helper function.\n\t\tconst attributeWasSet = setAttributeOn( data.modelRange, { key: modelKey, value: modelValue }, shallow, conversionApi );\n\n\t\tif ( attributeWasSet ) {\n\t\t\tconversionApi.consumable.consume( data.viewItem, match.match );\n\t\t}\n\t};\n}\n\n// Helper function that checks if element name should be consumed in attribute converters.\n//\n// @param {Object} config Conversion view config.\n// @returns {Boolean}\nfunction onlyViewNameIsDefined( viewConfig, viewItem ) {\n\t// https://github.com/ckeditor/ckeditor5-engine/issues/1786\n\tconst configToTest = typeof viewConfig == 'function' ? viewConfig( viewItem ) : viewConfig;\n\n\tif ( typeof configToTest == 'object' && !getViewElementNameFromConfig( configToTest ) ) {\n\t\treturn false;\n\t}\n\n\treturn !configToTest.classes && !configToTest.attributes && !configToTest.styles;\n}\n\n// Helper function for to-model-attribute converter. Sets model attribute on given range. Checks {@link module:engine/model/schema~Schema}\n// to ensure proper model structure.\n//\n// @param {module:engine/model/range~Range} modelRange Model range on which attribute should be set.\n// @param {Object} modelAttribute Model attribute to set.\n// @param {module:engine/conversion/upcastdispatcher~UpcastConversionApi} conversionApi Conversion API.\n// @param {Boolean} shallow If set to `true` the attribute will be set only on top-level nodes. Otherwise, it will be set\n// on all elements in the range.\n// @returns {Boolean} `true` if attribute was set on at least one node from given `modelRange`.\nfunction setAttributeOn( modelRange, modelAttribute, shallow, conversionApi ) {\n\tlet result = false;\n\n\t// Set attribute on each item in range according to Schema.\n\tfor ( const node of Array.from( modelRange.getItems( { shallow } ) ) ) {\n\t\tif ( conversionApi.schema.checkAttribute( node, modelAttribute.key ) ) {\n\t\t\tconversionApi.writer.setAttribute( modelAttribute.key, modelAttribute.value, node );\n\n\t\t\tresult = true;\n\t\t}\n\t}\n\n\treturn result;\n}\n\n// Helper function for upcasting-to-marker conversion. Takes the config in a format requested by `upcastElementToMarker()`\n// function and converts it to a format that is supported by `upcastElementToElement()` function.\n//\n// @param {Object} config Conversion configuration.\nfunction normalizeElementToMarkerConfig( config ) {\n\tconst oldModel = config.model;\n\n\tconfig.model = ( viewElement, conversionApi ) => {\n\t\tconst markerName = typeof oldModel == 'string' ? oldModel : oldModel( viewElement, conversionApi );\n\n\t\treturn conversionApi.writer.createElement( '$marker', { 'data-name': markerName } );\n\t};\n}\n\n// Helper function for upcasting-to-marker conversion. Takes the config in a format requested by `upcastDataToMarker()`\n// function and converts it to a format that is supported by `upcastElementToElement()` function.\n//\n// @param {Object} config Conversion configuration.\nfunction normalizeDataToMarkerConfig( config, type ) {\n\tconst configForElements = {};\n\n\t// Upcast <markerGroup-start> and <markerGroup-end> elements.\n\tconfigForElements.view = config.view + '-' + type;\n\n\tconfigForElements.model = ( viewElement, conversionApi ) => {\n\t\tconst viewName = viewElement.getAttribute( 'name' );\n\t\tconst markerName = config.model( viewName, conversionApi );\n\n\t\treturn conversionApi.writer.createElement( '$marker', { 'data-name': markerName } );\n\t};\n\n\treturn configForElements;\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/controller/editingcontroller\n */\n\nimport RootEditableElement from '../view/rooteditableelement';\nimport View from '../view/view';\nimport Mapper from '../conversion/mapper';\nimport DowncastDispatcher from '../conversion/downcastdispatcher';\nimport { clearAttributes, convertCollapsedSelection, convertRangeSelection, insertText, remove } from '../conversion/downcasthelpers';\n\nimport ObservableMixin from '@ckeditor/ckeditor5-utils/src/observablemixin';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\nimport { convertSelectionChange } from '../conversion/upcasthelpers';\n\n// @if CK_DEBUG_ENGINE // const { dumpTrees, initDocumentDumping } = require( '../dev-utils/utils' );\n\n/**\n * Controller for the editing pipeline. The editing pipeline controls {@link ~EditingController#model model} rendering,\n * including selection handling. It also creates the {@link ~EditingController#view view} which builds a\n * browser-independent virtualization over the DOM elements. The editing controller also attaches default converters.\n *\n * @mixes module:utils/observablemixin~ObservableMixin\n */\nexport default class EditingController {\n\t/**\n\t * Creates an editing controller instance.\n\t *\n\t * @param {module:engine/model/model~Model} model Editing model.\n\t * @param {module:engine/view/stylesmap~StylesProcessor} stylesProcessor The styles processor instance.\n\t */\n\tconstructor( model, stylesProcessor ) {\n\t\t/**\n\t\t * Editor model.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/model/model~Model}\n\t\t */\n\t\tthis.model = model;\n\n\t\t/**\n\t\t * Editing view controller.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/view~View}\n\t\t */\n\t\tthis.view = new View( stylesProcessor );\n\n\t\t/**\n\t\t * Mapper which describes the model-view binding.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/conversion/mapper~Mapper}\n\t\t */\n\t\tthis.mapper = new Mapper();\n\n\t\t/**\n\t\t * Downcast dispatcher that converts changes from the model to {@link #view the editing view}.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/conversion/downcastdispatcher~DowncastDispatcher} #downcastDispatcher\n\t\t */\n\t\tthis.downcastDispatcher = new DowncastDispatcher( {\n\t\t\tmapper: this.mapper,\n\t\t\tschema: model.schema\n\t\t} );\n\n\t\tconst doc = this.model.document;\n\t\tconst selection = doc.selection;\n\t\tconst markers = this.model.markers;\n\n\t\t// When plugins listen on model changes (on selection change, post fixers, etc.) and change the view as a result of\n\t\t// model's change, they might trigger view rendering before the conversion is completed (e.g. before the selection\n\t\t// is converted). We disable rendering for the length of the outermost model change() block to prevent that.\n\t\t//\n\t\t// See https://github.com/ckeditor/ckeditor5-engine/issues/1528\n\t\tthis.listenTo( this.model, '_beforeChanges', () => {\n\t\t\tthis.view._disableRendering( true );\n\t\t}, { priority: 'highest' } );\n\n\t\tthis.listenTo( this.model, '_afterChanges', () => {\n\t\t\tthis.view._disableRendering( false );\n\t\t}, { priority: 'lowest' } );\n\n\t\t// Whenever model document is changed, convert those changes to the view (using model.Document#differ).\n\t\t// Do it on 'low' priority, so changes are converted after other listeners did their job.\n\t\t// Also convert model selection.\n\t\tthis.listenTo( doc, 'change', () => {\n\t\t\tthis.view.change( writer => {\n\t\t\t\tthis.downcastDispatcher.convertChanges( doc.differ, markers, writer );\n\t\t\t\tthis.downcastDispatcher.convertSelection( selection, markers, writer );\n\t\t\t} );\n\t\t}, { priority: 'low' } );\n\n\t\t// Convert selection from the view to the model when it changes in the view.\n\t\tthis.listenTo( this.view.document, 'selectionChange', convertSelectionChange( this.model, this.mapper ) );\n\n\t\t// Attach default model converters.\n\t\tthis.downcastDispatcher.on( 'insert:$text', insertText(), { priority: 'lowest' } );\n\t\tthis.downcastDispatcher.on( 'remove', remove(), { priority: 'low' } );\n\n\t\t// Attach default model selection converters.\n\t\tthis.downcastDispatcher.on( 'selection', clearAttributes(), { priority: 'low' } );\n\t\tthis.downcastDispatcher.on( 'selection', convertRangeSelection(), { priority: 'low' } );\n\t\tthis.downcastDispatcher.on( 'selection', convertCollapsedSelection(), { priority: 'low' } );\n\n\t\t// Binds {@link module:engine/view/document~Document#roots view roots collection} to\n\t\t// {@link module:engine/model/document~Document#roots model roots collection} so creating\n\t\t// model root automatically creates corresponding view root.\n\t\tthis.view.document.roots.bindTo( this.model.document.roots ).using( root => {\n\t\t\t// $graveyard is a special root that has no reflection in the view.\n\t\t\tif ( root.rootName == '$graveyard' ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tconst viewRoot = new RootEditableElement( this.view.document, root.name );\n\n\t\t\tviewRoot.rootName = root.rootName;\n\t\t\tthis.mapper.bindElements( root, viewRoot );\n\n\t\t\treturn viewRoot;\n\t\t} );\n\n\t\t// @if CK_DEBUG_ENGINE // initDocumentDumping( this.model.document );\n\t\t// @if CK_DEBUG_ENGINE // initDocumentDumping( this.view.document );\n\n\t\t// @if CK_DEBUG_ENGINE // dumpTrees( this.model.document, this.model.document.version );\n\t\t// @if CK_DEBUG_ENGINE // dumpTrees( this.view.document, this.model.document.version );\n\n\t\t// @if CK_DEBUG_ENGINE // this.model.document.on( 'change', () => {\n\t\t// @if CK_DEBUG_ENGINE //\tdumpTrees( this.view.document, this.model.document.version );\n\t\t// @if CK_DEBUG_ENGINE // }, { priority: 'lowest' } );\n\t}\n\n\t/**\n\t * Removes all event listeners attached to the `EditingController`. Destroys all objects created\n\t * by `EditingController` that need to be destroyed.\n\t */\n\tdestroy() {\n\t\tthis.view.destroy();\n\t\tthis.stopListening();\n\t}\n}\n\nmix( EditingController, ObservableMixin );\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module core/commandcollection\n */\n\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n\n/**\n * Collection of commands. Its instance is available in {@link module:core/editor/editor~Editor#commands `editor.commands`}.\n */\nexport default class CommandCollection {\n\t/**\n\t * Creates collection instance.\n\t */\n\tconstructor() {\n\t\t/**\n\t\t * Command map.\n\t\t *\n\t\t * @private\n\t\t * @member {Map}\n\t\t */\n\t\tthis._commands = new Map();\n\t}\n\n\t/**\n\t * Registers a new command.\n\t *\n\t * @param {String} commandName The name of the command.\n\t * @param {module:core/command~Command} command\n\t */\n\tadd( commandName, command ) {\n\t\tthis._commands.set( commandName, command );\n\t}\n\n\t/**\n\t * Retrieves a command from the collection.\n\t *\n\t * @param {String} commandName The name of the command.\n\t * @returns {module:core/command~Command}\n\t */\n\tget( commandName ) {\n\t\treturn this._commands.get( commandName );\n\t}\n\n\t/**\n\t * Executes a command.\n\t *\n\t * @param {String} commandName The name of the command.\n\t * @param {*} [...commandParams] Command parameters.\n\t * @returns {*} The value returned by the {@link module:core/command~Command#execute `command.execute()`}.\n\t */\n\texecute( commandName, ...args ) {\n\t\tconst command = this.get( commandName );\n\n\t\tif ( !command ) {\n\t\t\t/**\n\t\t\t * Command does not exist.\n\t\t\t *\n\t\t\t * @error commandcollection-command-not-found\n\t\t\t * @param {String} commandName Name of the command.\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'commandcollection-command-not-found', this, { commandName } );\n\t\t}\n\n\t\treturn command.execute( ...args );\n\t}\n\n\t/**\n\t * Returns iterator of command names.\n\t *\n\t * @returns {Iterable.<String>}\n\t */\n\t* names() {\n\t\tyield* this._commands.keys();\n\t}\n\n\t/**\n\t * Returns iterator of command instances.\n\t *\n\t * @returns {Iterable.<module:core/command~Command>}\n\t */\n\t* commands() {\n\t\tyield* this._commands.values();\n\t}\n\n\t/**\n\t * Iterable interface.\n\t *\n\t * Returns `[ commandName, commandInstance ]` pairs.\n\t *\n\t * @returns {Iterable.<Array>}\n\t */\n\t[ Symbol.iterator ]() {\n\t\treturn this._commands[ Symbol.iterator ]();\n\t}\n\n\t/**\n\t * Destroys all collection commands.\n\t */\n\tdestroy() {\n\t\tfor ( const command of this.commands() ) {\n\t\t\tcommand.destroy();\n\t\t}\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/conversion/viewconsumable\n */\n\nimport { isArray } from 'lodash-es';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n\n/**\n * Class used for handling consumption of view {@link module:engine/view/element~Element elements},\n * {@link module:engine/view/text~Text text nodes} and {@link module:engine/view/documentfragment~DocumentFragment document fragments}.\n * Element's name and its parts (attributes, classes and styles) can be consumed separately. Consuming an element's name\n * does not consume its attributes, classes and styles.\n * To add items for consumption use {@link module:engine/conversion/viewconsumable~ViewConsumable#add add method}.\n * To test items use {@link module:engine/conversion/viewconsumable~ViewConsumable#test test method}.\n * To consume items use {@link module:engine/conversion/viewconsumable~ViewConsumable#consume consume method}.\n * To revert already consumed items use {@link module:engine/conversion/viewconsumable~ViewConsumable#revert revert method}.\n *\n *\t\tviewConsumable.add( element, { name: true } ); // Adds element's name as ready to be consumed.\n *\t\tviewConsumable.add( textNode ); // Adds text node for consumption.\n *\t\tviewConsumable.add( docFragment ); // Adds document fragment for consumption.\n *\t\tviewConsumable.test( element, { name: true }  ); // Tests if element's name can be consumed.\n *\t\tviewConsumable.test( textNode ); // Tests if text node can be consumed.\n *\t\tviewConsumable.test( docFragment ); // Tests if document fragment can be consumed.\n *\t\tviewConsumable.consume( element, { name: true }  ); // Consume element's name.\n *\t\tviewConsumable.consume( textNode ); // Consume text node.\n *\t\tviewConsumable.consume( docFragment ); // Consume document fragment.\n *\t\tviewConsumable.revert( element, { name: true }  ); // Revert already consumed element's name.\n *\t\tviewConsumable.revert( textNode ); // Revert already consumed text node.\n *\t\tviewConsumable.revert( docFragment ); // Revert already consumed document fragment.\n */\nexport default class ViewConsumable {\n\t/**\n\t * Creates new ViewConsumable.\n\t */\n\tconstructor() {\n\t\t/**\n\t\t * Map of consumable elements. If {@link module:engine/view/element~Element element} is used as a key,\n\t\t * {@link module:engine/conversion/viewconsumable~ViewElementConsumables ViewElementConsumables} instance is stored as value.\n\t\t * For {@link module:engine/view/text~Text text nodes} and\n\t\t * {@link module:engine/view/documentfragment~DocumentFragment document fragments} boolean value is stored as value.\n\t\t *\n\t\t * @protected\n\t\t * @member {Map.<module:engine/conversion/viewconsumable~ViewElementConsumables|Boolean>}\n\t\t*/\n\t\tthis._consumables = new Map();\n\t}\n\n\t/**\n\t * Adds {@link module:engine/view/element~Element view element}, {@link module:engine/view/text~Text text node} or\n\t * {@link module:engine/view/documentfragment~DocumentFragment document fragment} as ready to be consumed.\n\t *\n\t *\t\tviewConsumable.add( p, { name: true } ); // Adds element's name to consume.\n\t *\t\tviewConsumable.add( p, { attributes: 'name' } ); // Adds element's attribute.\n\t *\t\tviewConsumable.add( p, { classes: 'foobar' } ); // Adds element's class.\n\t *\t\tviewConsumable.add( p, { styles: 'color' } ); // Adds element's style\n\t *\t\tviewConsumable.add( p, { attributes: 'name', styles: 'color' } ); // Adds attribute and style.\n\t *\t\tviewConsumable.add( p, { classes: [ 'baz', 'bar' ] } ); // Multiple consumables can be provided.\n\t *\t\tviewConsumable.add( textNode ); // Adds text node to consume.\n\t *\t\tviewConsumable.add( docFragment ); // Adds document fragment to consume.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `viewconsumable-invalid-attribute` when `class` or `style`\n\t * attribute is provided - it should be handled separately by providing actual style/class.\n\t *\n\t *\t\tviewConsumable.add( p, { attributes: 'style' } ); // This call will throw an exception.\n\t *\t\tviewConsumable.add( p, { styles: 'color' } ); // This is properly handled style.\n\t *\n\t * @param {module:engine/view/element~Element|module:engine/view/text~Text|module:engine/view/documentfragment~DocumentFragment} element\n\t * @param {Object} [consumables] Used only if first parameter is {@link module:engine/view/element~Element view element} instance.\n\t * @param {Boolean} consumables.name If set to true element's name will be included.\n\t * @param {String|Array.<String>} consumables.attributes Attribute name or array of attribute names.\n\t * @param {String|Array.<String>} consumables.classes Class name or array of class names.\n\t * @param {String|Array.<String>} consumables.styles Style name or array of style names.\n\t */\n\tadd( element, consumables ) {\n\t\tlet elementConsumables;\n\n\t\t// For text nodes and document fragments just mark them as consumable.\n\t\tif ( element.is( '$text' ) || element.is( 'documentFragment' ) ) {\n\t\t\tthis._consumables.set( element, true );\n\n\t\t\treturn;\n\t\t}\n\n\t\t// For elements create new ViewElementConsumables or update already existing one.\n\t\tif ( !this._consumables.has( element ) ) {\n\t\t\telementConsumables = new ViewElementConsumables( element );\n\t\t\tthis._consumables.set( element, elementConsumables );\n\t\t} else {\n\t\t\telementConsumables = this._consumables.get( element );\n\t\t}\n\n\t\telementConsumables.add( consumables );\n\t}\n\n\t/**\n\t * Tests if {@link module:engine/view/element~Element view element}, {@link module:engine/view/text~Text text node} or\n\t * {@link module:engine/view/documentfragment~DocumentFragment document fragment} can be consumed.\n\t * It returns `true` when all items included in method's call can be consumed. Returns `false` when\n\t * first already consumed item is found and `null` when first non-consumable item is found.\n\t *\n\t *\t\tviewConsumable.test( p, { name: true } ); // Tests element's name.\n\t *\t\tviewConsumable.test( p, { attributes: 'name' } ); // Tests attribute.\n\t *\t\tviewConsumable.test( p, { classes: 'foobar' } ); // Tests class.\n\t *\t\tviewConsumable.test( p, { styles: 'color' } ); // Tests style.\n\t *\t\tviewConsumable.test( p, { attributes: 'name', styles: 'color' } ); // Tests attribute and style.\n\t *\t\tviewConsumable.test( p, { classes: [ 'baz', 'bar' ] } ); // Multiple consumables can be tested.\n\t *\t\tviewConsumable.test( textNode ); // Tests text node.\n\t *\t\tviewConsumable.test( docFragment ); // Tests document fragment.\n\t *\n\t * Testing classes and styles as attribute will test if all added classes/styles can be consumed.\n\t *\n\t *\t\tviewConsumable.test( p, { attributes: 'class' } ); // Tests if all added classes can be consumed.\n\t *\t\tviewConsumable.test( p, { attributes: 'style' } ); // Tests if all added styles can be consumed.\n\t *\n\t * @param {module:engine/view/element~Element|module:engine/view/text~Text|module:engine/view/documentfragment~DocumentFragment} element\n\t * @param {Object} [consumables] Used only if first parameter is {@link module:engine/view/element~Element view element} instance.\n\t * @param {Boolean} consumables.name If set to true element's name will be included.\n\t * @param {String|Array.<String>} consumables.attributes Attribute name or array of attribute names.\n\t * @param {String|Array.<String>} consumables.classes Class name or array of class names.\n\t * @param {String|Array.<String>} consumables.styles Style name or array of style names.\n\t * @returns {Boolean|null} Returns `true` when all items included in method's call can be consumed. Returns `false`\n\t * when first already consumed item is found and `null` when first non-consumable item is found.\n\t */\n\ttest( element, consumables ) {\n\t\tconst elementConsumables = this._consumables.get( element );\n\n\t\tif ( elementConsumables === undefined ) {\n\t\t\treturn null;\n\t\t}\n\n\t\t// For text nodes and document fragments return stored boolean value.\n\t\tif ( element.is( '$text' ) || element.is( 'documentFragment' ) ) {\n\t\t\treturn elementConsumables;\n\t\t}\n\n\t\t// For elements test consumables object.\n\t\treturn elementConsumables.test( consumables );\n\t}\n\n\t/**\n\t * Consumes {@link module:engine/view/element~Element view element}, {@link module:engine/view/text~Text text node} or\n\t * {@link module:engine/view/documentfragment~DocumentFragment document fragment}.\n\t * It returns `true` when all items included in method's call can be consumed, otherwise returns `false`.\n\t *\n\t *\t\tviewConsumable.consume( p, { name: true } ); // Consumes element's name.\n\t *\t\tviewConsumable.consume( p, { attributes: 'name' } ); // Consumes element's attribute.\n\t *\t\tviewConsumable.consume( p, { classes: 'foobar' } ); // Consumes element's class.\n\t *\t\tviewConsumable.consume( p, { styles: 'color' } ); // Consumes element's style.\n\t *\t\tviewConsumable.consume( p, { attributes: 'name', styles: 'color' } ); // Consumes attribute and style.\n\t *\t\tviewConsumable.consume( p, { classes: [ 'baz', 'bar' ] } ); // Multiple consumables can be consumed.\n\t *\t\tviewConsumable.consume( textNode ); // Consumes text node.\n\t *\t\tviewConsumable.consume( docFragment ); // Consumes document fragment.\n\t *\n\t * Consuming classes and styles as attribute will test if all added classes/styles can be consumed.\n\t *\n\t *\t\tviewConsumable.consume( p, { attributes: 'class' } ); // Consume only if all added classes can be consumed.\n\t *\t\tviewConsumable.consume( p, { attributes: 'style' } ); // Consume only if all added styles can be consumed.\n\t *\n\t * @param {module:engine/view/element~Element|module:engine/view/text~Text|module:engine/view/documentfragment~DocumentFragment} element\n\t * @param {Object} [consumables] Used only if first parameter is {@link module:engine/view/element~Element view element} instance.\n\t * @param {Boolean} consumables.name If set to true element's name will be included.\n\t * @param {String|Array.<String>} consumables.attributes Attribute name or array of attribute names.\n\t * @param {String|Array.<String>} consumables.classes Class name or array of class names.\n\t * @param {String|Array.<String>} consumables.styles Style name or array of style names.\n\t * @returns {Boolean} Returns `true` when all items included in method's call can be consumed,\n\t * otherwise returns `false`.\n\t */\n\tconsume( element, consumables ) {\n\t\tif ( this.test( element, consumables ) ) {\n\t\t\tif ( element.is( '$text' ) || element.is( 'documentFragment' ) ) {\n\t\t\t\t// For text nodes and document fragments set value to false.\n\t\t\t\tthis._consumables.set( element, false );\n\t\t\t} else {\n\t\t\t\t// For elements - consume consumables object.\n\t\t\t\tthis._consumables.get( element ).consume( consumables );\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * Reverts {@link module:engine/view/element~Element view element}, {@link module:engine/view/text~Text text node} or\n\t * {@link module:engine/view/documentfragment~DocumentFragment document fragment} so they can be consumed once again.\n\t * Method does not revert items that were never previously added for consumption, even if they are included in\n\t * method's call.\n\t *\n\t *\t\tviewConsumable.revert( p, { name: true } ); // Reverts element's name.\n\t *\t\tviewConsumable.revert( p, { attributes: 'name' } ); // Reverts element's attribute.\n\t *\t\tviewConsumable.revert( p, { classes: 'foobar' } ); // Reverts element's class.\n\t *\t\tviewConsumable.revert( p, { styles: 'color' } ); // Reverts element's style.\n\t *\t\tviewConsumable.revert( p, { attributes: 'name', styles: 'color' } ); // Reverts attribute and style.\n\t *\t\tviewConsumable.revert( p, { classes: [ 'baz', 'bar' ] } ); // Multiple names can be reverted.\n\t *\t\tviewConsumable.revert( textNode ); // Reverts text node.\n\t *\t\tviewConsumable.revert( docFragment ); // Reverts document fragment.\n\t *\n\t * Reverting classes and styles as attribute will revert all classes/styles that were previously added for\n\t * consumption.\n\t *\n\t *\t\tviewConsumable.revert( p, { attributes: 'class' } ); // Reverts all classes added for consumption.\n\t *\t\tviewConsumable.revert( p, { attributes: 'style' } ); // Reverts all styles added for consumption.\n\t *\n\t * @param {module:engine/view/element~Element|module:engine/view/text~Text|module:engine/view/documentfragment~DocumentFragment} element\n\t * @param {Object} [consumables] Used only if first parameter is {@link module:engine/view/element~Element view element} instance.\n\t * @param {Boolean} consumables.name If set to true element's name will be included.\n\t * @param {String|Array.<String>} consumables.attributes Attribute name or array of attribute names.\n\t * @param {String|Array.<String>} consumables.classes Class name or array of class names.\n\t * @param {String|Array.<String>} consumables.styles Style name or array of style names.\n\t */\n\trevert( element, consumables ) {\n\t\tconst elementConsumables = this._consumables.get( element );\n\n\t\tif ( elementConsumables !== undefined ) {\n\t\t\tif ( element.is( '$text' ) || element.is( 'documentFragment' ) ) {\n\t\t\t\t// For text nodes and document fragments - set consumable to true.\n\t\t\t\tthis._consumables.set( element, true );\n\t\t\t} else {\n\t\t\t\t// For elements - revert items from consumables object.\n\t\t\t\telementConsumables.revert( consumables );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Creates consumable object from {@link module:engine/view/element~Element view element}. Consumable object will include\n\t * element's name and all its attributes, classes and styles.\n\t *\n\t * @static\n\t * @param {module:engine/view/element~Element} element\n\t * @returns {Object} consumables\n\t */\n\tstatic consumablesFromElement( element ) {\n\t\tconst consumables = {\n\t\t\telement,\n\t\t\tname: true,\n\t\t\tattributes: [],\n\t\t\tclasses: [],\n\t\t\tstyles: []\n\t\t};\n\n\t\tconst attributes = element.getAttributeKeys();\n\n\t\tfor ( const attribute of attributes ) {\n\t\t\t// Skip classes and styles - will be added separately.\n\t\t\tif ( attribute == 'style' || attribute == 'class' ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconsumables.attributes.push( attribute );\n\t\t}\n\n\t\tconst classes = element.getClassNames();\n\n\t\tfor ( const className of classes ) {\n\t\t\tconsumables.classes.push( className );\n\t\t}\n\n\t\tconst styles = element.getStyleNames();\n\n\t\tfor ( const style of styles ) {\n\t\t\tconsumables.styles.push( style );\n\t\t}\n\n\t\treturn consumables;\n\t}\n\n\t/**\n\t * Creates {@link module:engine/conversion/viewconsumable~ViewConsumable ViewConsumable} instance from\n\t * {@link module:engine/view/node~Node node} or {@link module:engine/view/documentfragment~DocumentFragment document fragment}.\n\t * Instance will contain all elements, child nodes, attributes, styles and classes added for consumption.\n\t *\n\t * @static\n\t * @param {module:engine/view/node~Node|module:engine/view/documentfragment~DocumentFragment} from View node or document fragment\n\t * from which `ViewConsumable` will be created.\n\t * @param {module:engine/conversion/viewconsumable~ViewConsumable} [instance] If provided, given `ViewConsumable` instance will be used\n\t * to add all consumables. It will be returned instead of a new instance.\n\t */\n\tstatic createFrom( from, instance ) {\n\t\tif ( !instance ) {\n\t\t\tinstance = new ViewConsumable( from );\n\t\t}\n\n\t\tif ( from.is( '$text' ) ) {\n\t\t\tinstance.add( from );\n\n\t\t\treturn instance;\n\t\t}\n\n\t\t// Add `from` itself, if it is an element.\n\t\tif ( from.is( 'element' ) ) {\n\t\t\tinstance.add( from, ViewConsumable.consumablesFromElement( from ) );\n\t\t}\n\n\t\tif ( from.is( 'documentFragment' ) ) {\n\t\t\tinstance.add( from );\n\t\t}\n\n\t\tfor ( const child of from.getChildren() ) {\n\t\t\tinstance = ViewConsumable.createFrom( child, instance );\n\t\t}\n\n\t\treturn instance;\n\t}\n}\n\n/**\n * This is a private helper-class for {@link module:engine/conversion/viewconsumable~ViewConsumable}.\n * It represents and manipulates consumable parts of a single {@link module:engine/view/element~Element}.\n *\n * @private\n */\nclass ViewElementConsumables {\n\t/**\n\t * Creates ViewElementConsumables instance.\n\t *\n\t * @param {module:engine/view/node~Node|module:engine/view/documentfragment~DocumentFragment} from View node or document fragment\n\t * from which `ViewElementConsumables` is being created.\n\t */\n\tconstructor( from ) {\n\t\t/**\n\t\t * @readonly\n\t\t * @member {module:engine/view/node~Node|module:engine/view/documentfragment~DocumentFragment}\n\t\t */\n\t\tthis.element = from;\n\n\t\t/**\n\t\t * Flag indicating if name of the element can be consumed.\n\t\t *\n\t\t * @private\n\t\t * @member {Boolean}\n\t\t */\n\t\tthis._canConsumeName = null;\n\n\t\t/**\n\t\t * Contains maps of element's consumables: attributes, classes and styles.\n\t\t *\n\t\t * @private\n\t\t * @member {Object}\n\t\t */\n\t\tthis._consumables = {\n\t\t\tattributes: new Map(),\n\t\t\tstyles: new Map(),\n\t\t\tclasses: new Map()\n\t\t};\n\t}\n\n\t/**\n\t * Adds consumable parts of the {@link module:engine/view/element~Element view element}.\n\t * Element's name itself can be marked to be consumed (when element's name is consumed its attributes, classes and\n\t * styles still could be consumed):\n\t *\n\t *\t\tconsumables.add( { name: true } );\n\t *\n\t * Attributes classes and styles:\n\t *\n\t *\t\tconsumables.add( { attributes: 'title', classes: 'foo', styles: 'color' } );\n\t *\t\tconsumables.add( { attributes: [ 'title', 'name' ], classes: [ 'foo', 'bar' ] );\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `viewconsumable-invalid-attribute` when `class` or `style`\n\t * attribute is provided - it should be handled separately by providing `style` and `class` in consumables object.\n\t *\n\t * @param {Object} consumables Object describing which parts of the element can be consumed.\n\t * @param {Boolean} consumables.name If set to `true` element's name will be added as consumable.\n\t * @param {String|Array.<String>} consumables.attributes Attribute name or array of attribute names to add as consumable.\n\t * @param {String|Array.<String>} consumables.classes Class name or array of class names to add as consumable.\n\t * @param {String|Array.<String>} consumables.styles Style name or array of style names to add as consumable.\n\t */\n\tadd( consumables ) {\n\t\tif ( consumables.name ) {\n\t\t\tthis._canConsumeName = true;\n\t\t}\n\n\t\tfor ( const type in this._consumables ) {\n\t\t\tif ( type in consumables ) {\n\t\t\t\tthis._add( type, consumables[ type ] );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Tests if parts of the {@link module:engine/view/node~Node view node} can be consumed.\n\t *\n\t * Element's name can be tested:\n\t *\n\t *\t\tconsumables.test( { name: true } );\n\t *\n\t * Attributes classes and styles:\n\t *\n\t *\t\tconsumables.test( { attributes: 'title', classes: 'foo', styles: 'color' } );\n\t *\t\tconsumables.test( { attributes: [ 'title', 'name' ], classes: [ 'foo', 'bar' ] );\n\t *\n\t * @param {Object} consumables Object describing which parts of the element should be tested.\n\t * @param {Boolean} consumables.name If set to `true` element's name will be tested.\n\t * @param {String|Array.<String>} consumables.attributes Attribute name or array of attribute names to test.\n\t * @param {String|Array.<String>} consumables.classes Class name or array of class names to test.\n\t * @param {String|Array.<String>} consumables.styles Style name or array of style names to test.\n\t * @returns {Boolean|null} `true` when all tested items can be consumed, `null` when even one of the items\n\t * was never marked for consumption and `false` when even one of the items was already consumed.\n\t */\n\ttest( consumables ) {\n\t\t// Check if name can be consumed.\n\t\tif ( consumables.name && !this._canConsumeName ) {\n\t\t\treturn this._canConsumeName;\n\t\t}\n\n\t\tfor ( const type in this._consumables ) {\n\t\t\tif ( type in consumables ) {\n\t\t\t\tconst value = this._test( type, consumables[ type ] );\n\n\t\t\t\tif ( value !== true ) {\n\t\t\t\t\treturn value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Return true only if all can be consumed.\n\t\treturn true;\n\t}\n\n\t/**\n\t * Consumes parts of {@link module:engine/view/element~Element view element}. This function does not check if consumable item\n\t * is already consumed - it consumes all consumable items provided.\n\t * Element's name can be consumed:\n\t *\n\t *\t\tconsumables.consume( { name: true } );\n\t *\n\t * Attributes classes and styles:\n\t *\n\t *\t\tconsumables.consume( { attributes: 'title', classes: 'foo', styles: 'color' } );\n\t *\t\tconsumables.consume( { attributes: [ 'title', 'name' ], classes: [ 'foo', 'bar' ] );\n\t *\n\t * @param {Object} consumables Object describing which parts of the element should be consumed.\n\t * @param {Boolean} consumables.name If set to `true` element's name will be consumed.\n\t * @param {String|Array.<String>} consumables.attributes Attribute name or array of attribute names to consume.\n\t * @param {String|Array.<String>} consumables.classes Class name or array of class names to consume.\n\t * @param {String|Array.<String>} consumables.styles Style name or array of style names to consume.\n\t */\n\tconsume( consumables ) {\n\t\tif ( consumables.name ) {\n\t\t\tthis._canConsumeName = false;\n\t\t}\n\n\t\tfor ( const type in this._consumables ) {\n\t\t\tif ( type in consumables ) {\n\t\t\t\tthis._consume( type, consumables[ type ] );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Revert already consumed parts of {@link module:engine/view/element~Element view Element}, so they can be consumed once again.\n\t * Element's name can be reverted:\n\t *\n\t *\t\tconsumables.revert( { name: true } );\n\t *\n\t * Attributes classes and styles:\n\t *\n\t *\t\tconsumables.revert( { attributes: 'title', classes: 'foo', styles: 'color' } );\n\t *\t\tconsumables.revert( { attributes: [ 'title', 'name' ], classes: [ 'foo', 'bar' ] );\n\t *\n\t * @param {Object} consumables Object describing which parts of the element should be reverted.\n\t * @param {Boolean} consumables.name If set to `true` element's name will be reverted.\n\t * @param {String|Array.<String>} consumables.attributes Attribute name or array of attribute names to revert.\n\t * @param {String|Array.<String>} consumables.classes Class name or array of class names to revert.\n\t * @param {String|Array.<String>} consumables.styles Style name or array of style names to revert.\n\t */\n\trevert( consumables ) {\n\t\tif ( consumables.name ) {\n\t\t\tthis._canConsumeName = true;\n\t\t}\n\n\t\tfor ( const type in this._consumables ) {\n\t\t\tif ( type in consumables ) {\n\t\t\t\tthis._revert( type, consumables[ type ] );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Helper method that adds consumables of a given type: attribute, class or style.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `viewconsumable-invalid-attribute` when `class` or `style`\n\t * type is provided - it should be handled separately by providing actual style/class type.\n\t *\n\t * @private\n\t * @param {String} type Type of the consumable item: `attributes`, `classes` or `styles`.\n\t * @param {String|Array.<String>} item Consumable item or array of items.\n\t */\n\t_add( type, item ) {\n\t\tconst items = isArray( item ) ? item : [ item ];\n\t\tconst consumables = this._consumables[ type ];\n\n\t\tfor ( const name of items ) {\n\t\t\tif ( type === 'attributes' && ( name === 'class' || name === 'style' ) ) {\n\t\t\t\t/**\n\t\t\t\t * Class and style attributes should be handled separately in\n\t\t\t\t * {@link module:engine/conversion/viewconsumable~ViewConsumable#add `ViewConsumable#add()`}.\n\t\t\t\t *\n\t\t\t\t * What you have done is trying to use:\n\t\t\t\t *\n\t\t\t\t *\t\tconsumables.add( { attributes: [ 'class', 'style' ] } );\n\t\t\t\t *\n\t\t\t\t * While each class and style should be registered separately:\n\t\t\t\t *\n\t\t\t\t *\t\tconsumables.add( { classes: 'some-class', styles: 'font-weight' } );\n\t\t\t\t *\n\t\t\t\t * @error viewconsumable-invalid-attribute\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError( 'viewconsumable-invalid-attribute', this );\n\t\t\t}\n\n\t\t\tconsumables.set( name, true );\n\n\t\t\tif ( type === 'styles' ) {\n\t\t\t\tfor ( const alsoName of this.element.document.stylesProcessor.getRelatedStyles( name ) ) {\n\t\t\t\t\tconsumables.set( alsoName, true );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Helper method that tests consumables of a given type: attribute, class or style.\n\t *\n\t * @private\n\t * @param {String} type Type of the consumable item: `attributes`, `classes` or `styles`.\n\t * @param {String|Array.<String>} item Consumable item or array of items.\n\t * @returns {Boolean|null} Returns `true` if all items can be consumed, `null` when one of the items cannot be\n\t * consumed and `false` when one of the items is already consumed.\n\t */\n\t_test( type, item ) {\n\t\tconst items = isArray( item ) ? item : [ item ];\n\t\tconst consumables = this._consumables[ type ];\n\n\t\tfor ( const name of items ) {\n\t\t\tif ( type === 'attributes' && ( name === 'class' || name === 'style' ) ) {\n\t\t\t\tconst consumableName = name == 'class' ? 'classes' : 'styles';\n\n\t\t\t\t// Check all classes/styles if class/style attribute is tested.\n\t\t\t\tconst value = this._test( consumableName, [ ...this._consumables[ consumableName ].keys() ] );\n\n\t\t\t\tif ( value !== true ) {\n\t\t\t\t\treturn value;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst value = consumables.get( name );\n\t\t\t\t// Return null if attribute is not found.\n\t\t\t\tif ( value === undefined ) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tif ( !value ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Helper method that consumes items of a given type: attribute, class or style.\n\t *\n\t * @private\n\t * @param {String} type Type of the consumable item: `attributes`, `classes` or `styles`.\n\t * @param {String|Array.<String>} item Consumable item or array of items.\n\t */\n\t_consume( type, item ) {\n\t\tconst items = isArray( item ) ? item : [ item ];\n\t\tconst consumables = this._consumables[ type ];\n\n\t\tfor ( const name of items ) {\n\t\t\tif ( type === 'attributes' && ( name === 'class' || name === 'style' ) ) {\n\t\t\t\tconst consumableName = name == 'class' ? 'classes' : 'styles';\n\n\t\t\t\t// If class or style is provided for consumption - consume them all.\n\t\t\t\tthis._consume( consumableName, [ ...this._consumables[ consumableName ].keys() ] );\n\t\t\t} else {\n\t\t\t\tconsumables.set( name, false );\n\n\t\t\t\tif ( type == 'styles' ) {\n\t\t\t\t\tfor ( const toConsume of this.element.document.stylesProcessor.getRelatedStyles( name ) ) {\n\t\t\t\t\t\tconsumables.set( toConsume, false );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Helper method that reverts items of a given type: attribute, class or style.\n\t *\n\t * @private\n\t * @param {String} type Type of the consumable item: `attributes`, `classes` or , `styles`.\n\t * @param {String|Array.<String>} item Consumable item or array of items.\n\t */\n\t_revert( type, item ) {\n\t\tconst items = isArray( item ) ? item : [ item ];\n\t\tconst consumables = this._consumables[ type ];\n\n\t\tfor ( const name of items ) {\n\t\t\tif ( type === 'attributes' && ( name === 'class' || name === 'style' ) ) {\n\t\t\t\tconst consumableName = name == 'class' ? 'classes' : 'styles';\n\n\t\t\t\t// If class or style is provided for reverting - revert them all.\n\t\t\t\tthis._revert( consumableName, [ ...this._consumables[ consumableName ].keys() ] );\n\t\t\t} else {\n\t\t\t\tconst value = consumables.get( name );\n\n\t\t\t\tif ( value === false ) {\n\t\t\t\t\tconsumables.set( name, true );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/schema\n */\n\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport ObservableMixin from '@ckeditor/ckeditor5-utils/src/observablemixin';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\n\nimport Range from './range';\nimport Position from './position';\nimport Element from './element';\nimport Text from './text';\nimport TreeWalker from './treewalker';\n\n/**\n * The model's schema. It defines allowed and disallowed structures of nodes as well as nodes' attributes.\n * The schema is usually defined by features and based on them the editing framework and features\n * make decisions how to change and process the model.\n *\n * The instance of schema is available in {@link module:engine/model/model~Model#schema `editor.model.schema`}.\n *\n * Read more about the schema in:\n *\n * * {@glink framework/guides/architecture/editing-engine#schema Schema} section of the\n * {@glink framework/guides/architecture/editing-engine Introduction to the Editing engine architecture}.\n * * {@glink framework/guides/deep-dive/schema Schema deep dive} guide.\n *\n * @mixes module:utils/observablemixin~ObservableMixin\n */\nexport default class Schema {\n\t/**\n\t * Creates schema instance.\n\t */\n\tconstructor() {\n\t\tthis._sourceDefinitions = {};\n\n\t\t/**\n\t\t * A dictionary containing attribute properties.\n\t\t *\n\t\t * @private\n\t\t * @member {Object.<String,String>}\n\t\t */\n\t\tthis._attributeProperties = {};\n\n\t\tthis.decorate( 'checkChild' );\n\t\tthis.decorate( 'checkAttribute' );\n\n\t\tthis.on( 'checkAttribute', ( evt, args ) => {\n\t\t\targs[ 0 ] = new SchemaContext( args[ 0 ] );\n\t\t}, { priority: 'highest' } );\n\n\t\tthis.on( 'checkChild', ( evt, args ) => {\n\t\t\targs[ 0 ] = new SchemaContext( args[ 0 ] );\n\t\t\targs[ 1 ] = this.getDefinition( args[ 1 ] );\n\t\t}, { priority: 'highest' } );\n\t}\n\n\t/**\n\t * Registers schema item. Can only be called once for every item name.\n\t *\n\t *\t\tschema.register( 'paragraph', {\n\t *\t\t\tinheritAllFrom: '$block'\n\t *\t\t} );\n\t *\n\t * @param {String} itemName\n\t * @param {module:engine/model/schema~SchemaItemDefinition} definition\n\t */\n\tregister( itemName, definition ) {\n\t\tif ( this._sourceDefinitions[ itemName ] ) {\n\t\t\t/**\n\t\t\t * A single item cannot be registered twice in the schema.\n\t\t\t *\n\t\t\t * This situation may happen when:\n\t\t\t *\n\t\t\t * * Two or more plugins called {@link #register `register()`} with the same name. This will usually mean that\n\t\t\t * there is a collision between plugins which try to use the same element in the model. Unfortunately,\n\t\t\t * the only way to solve this is by modifying one of these plugins to use a unique model element name.\n\t\t\t * * A single plugin was loaded twice. This happens when it is installed by npm/yarn in two versions\n\t\t\t * and usually means one or more of the following issues:\n\t\t\t *     * a version mismatch (two of your dependencies require two different versions of this plugin),\n\t\t\t *     * incorrect imports (this plugin is somehow imported twice in a way which confuses webpack),\n\t\t\t *     * mess in `node_modules/` (`rm -rf node_modules/` may help).\n\t\t\t *\n\t\t\t * **Note:** Check the logged `itemName` to better understand which plugin was duplicated/conflicting.\n\t\t\t *\n\t\t\t * @param itemName The name of the model element that is being registered twice.\n\t\t\t * @error schema-cannot-register-item-twice\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'schema-cannot-register-item-twice',\n\t\t\t\tthis,\n\t\t\t\t{\n\t\t\t\t\titemName\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tthis._sourceDefinitions[ itemName ] = [\n\t\t\tObject.assign( {}, definition )\n\t\t];\n\n\t\tthis._clearCache();\n\t}\n\n\t/**\n\t * Extends a {@link #register registered} item's definition.\n\t *\n\t * Extending properties such as `allowIn` will add more items to the existing properties,\n\t * while redefining properties such as `isBlock` will override the previously defined ones.\n\t *\n\t *\t\tschema.register( 'foo', {\n\t *\t\t\tallowIn: '$root',\n\t *\t\t\tisBlock: true;\n\t *\t\t} );\n\t *\t\tschema.extend( 'foo', {\n\t *\t\t\tallowIn: 'blockQuote',\n\t *\t\t\tisBlock: false\n\t *\t\t} );\n\t *\n\t *\t\tschema.getDefinition( 'foo' );\n\t *\t\t//\t{\n\t *\t\t//\t\tallowIn: [ '$root', 'blockQuote' ],\n\t *\t\t// \t\tisBlock: false\n\t *\t\t//\t}\n\t *\n\t * @param {String} itemName\n\t * @param {module:engine/model/schema~SchemaItemDefinition} definition\n\t */\n\textend( itemName, definition ) {\n\t\tif ( !this._sourceDefinitions[ itemName ] ) {\n\t\t\t/**\n\t\t\t * Cannot extend an item which was not registered yet.\n\t\t\t *\n\t\t\t * This error happens when a plugin tries to extend the schema definition of an item which was not\n\t\t\t * {@link #register registered} yet.\n\t\t\t *\n\t\t\t * @param itemName The name of the model element which is being extended.\n\t\t\t * @error schema-cannot-extend-missing-item\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'schema-cannot-extend-missing-item', this, {\n\t\t\t\titemName\n\t\t\t} );\n\t\t}\n\n\t\tthis._sourceDefinitions[ itemName ].push( Object.assign( {}, definition ) );\n\n\t\tthis._clearCache();\n\t}\n\n\t/**\n\t * Returns data of all registered items.\n\t *\n\t * This method should normally be used for reflection purposes (e.g. defining a clone of a certain element,\n\t * checking a list of all block elements, etc).\n\t * Use specific methods (such as {@link #checkChild `checkChild()`} or {@link #isLimit `isLimit()`})\n\t * in other cases.\n\t *\n\t * @returns {Object.<String,module:engine/model/schema~SchemaCompiledItemDefinition>}\n\t */\n\tgetDefinitions() {\n\t\tif ( !this._compiledDefinitions ) {\n\t\t\tthis._compile();\n\t\t}\n\n\t\treturn this._compiledDefinitions;\n\t}\n\n\t/**\n\t * Returns a definition of the given item or `undefined` if an item is not registered.\n\t *\n\t * This method should normally be used for reflection purposes (e.g. defining a clone of a certain element,\n\t * checking a list of all block elements, etc).\n\t * Use specific methods (such as {@link #checkChild `checkChild()`} or {@link #isLimit `isLimit()`})\n\t * in other cases.\n\t *\n\t * @param {module:engine/model/item~Item|module:engine/model/schema~SchemaContextItem|String} item\n\t * @returns {module:engine/model/schema~SchemaCompiledItemDefinition}\n\t */\n\tgetDefinition( item ) {\n\t\tlet itemName;\n\n\t\tif ( typeof item == 'string' ) {\n\t\t\titemName = item;\n\t\t} else if ( item.is && ( item.is( '$text' ) || item.is( '$textProxy' ) ) ) {\n\t\t\titemName = '$text';\n\t\t}\n\t\t// Element or module:engine/model/schema~SchemaContextItem.\n\t\telse {\n\t\t\titemName = item.name;\n\t\t}\n\n\t\treturn this.getDefinitions()[ itemName ];\n\t}\n\n\t/**\n\t * Returns `true` if the given item is registered in the schema.\n\t *\n\t *\t\tschema.isRegistered( 'paragraph' ); // -> true\n\t *\t\tschema.isRegistered( editor.model.document.getRoot() ); // -> true\n\t *\t\tschema.isRegistered( 'foo' ); // -> false\n\t *\n\t * @param {module:engine/model/item~Item|module:engine/model/schema~SchemaContextItem|String} item\n\t */\n\tisRegistered( item ) {\n\t\treturn !!this.getDefinition( item );\n\t}\n\n\t/**\n\t * Returns `true` if the given item is defined to be\n\t * a block by the {@link module:engine/model/schema~SchemaItemDefinition}'s `isBlock` property.\n\t *\n\t *\t\tschema.isBlock( 'paragraph' ); // -> true\n\t *\t\tschema.isBlock( '$root' ); // -> false\n\t *\n\t *\t\tconst paragraphElement = writer.createElement( 'paragraph' );\n\t *\t\tschema.isBlock( paragraphElement ); // -> true\n\t *\n\t * See the {@glink framework/guides/deep-dive/schema#block-elements Block elements} section of the Schema deep dive\n\t * guide for more details.\n\t *\n\t * @param {module:engine/model/item~Item|module:engine/model/schema~SchemaContextItem|String} item\n\t */\n\tisBlock( item ) {\n\t\tconst def = this.getDefinition( item );\n\n\t\treturn !!( def && def.isBlock );\n\t}\n\n\t/**\n\t * Returns `true` if the given item should be treated as a limit element.\n\t *\n\t * It considers an item to be a limit element if its\n\t * {@link module:engine/model/schema~SchemaItemDefinition}'s\n\t * {@link module:engine/model/schema~SchemaItemDefinition#isLimit `isLimit`} or\n\t * {@link module:engine/model/schema~SchemaItemDefinition#isObject `isObject`} property\n\t * was set to `true`.\n\t *\n\t *\t\tschema.isLimit( 'paragraph' ); // -> false\n\t *\t\tschema.isLimit( '$root' ); // -> true\n\t *\t\tschema.isLimit( editor.model.document.getRoot() ); // -> true\n\t *\t\tschema.isLimit( 'image' ); // -> true\n\t *\n\t * See the {@glink framework/guides/deep-dive/schema#limit-elements Limit elements} section of the Schema deep dive\n\t * guide for more details.\n\t *\n\t * @param {module:engine/model/item~Item|module:engine/model/schema~SchemaContextItem|String} item\n\t */\n\tisLimit( item ) {\n\t\tconst def = this.getDefinition( item );\n\n\t\tif ( !def ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn !!( def.isLimit || def.isObject );\n\t}\n\n\t/**\n\t * Returns `true` if the given item should be treated as an object element.\n\t *\n\t * It considers an item to be an object element if its\n\t * {@link module:engine/model/schema~SchemaItemDefinition}'s\n\t * {@link module:engine/model/schema~SchemaItemDefinition#isObject `isObject`} property\n\t * was set to `true`.\n\t *\n\t *\t\tschema.isObject( 'paragraph' ); // -> false\n\t *\t\tschema.isObject( 'image' ); // -> true\n\t *\n\t *\t\tconst imageElement = writer.createElement( 'image' );\n\t *\t\tschema.isObject( imageElement ); // -> true\n\t *\n\t * See the {@glink framework/guides/deep-dive/schema#object-elements Object elements} section of the Schema deep dive\n\t * guide for more details.\n\t *\n\t * @param {module:engine/model/item~Item|module:engine/model/schema~SchemaContextItem|String} item\n\t */\n\tisObject( item ) {\n\t\tconst def = this.getDefinition( item );\n\n\t\tif ( !def ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Note: Check out the implementation of #isLimit(), #isSelectable(), and #isContent()\n\t\t// to understand why these three constitute an object.\n\t\treturn !!( def.isObject || ( def.isLimit && def.isSelectable && def.isContent ) );\n\t}\n\n\t/**\n\t * Returns `true` if the given item is defined to be\n\t * an inline element by the {@link module:engine/model/schema~SchemaItemDefinition}'s `isInline` property.\n\t *\n\t *\t\tschema.isInline( 'paragraph' ); // -> false\n\t *\t\tschema.isInline( 'softBreak' ); // -> true\n\t *\n\t *\t\tconst text = writer.createText( 'foo' );\n\t *\t\tschema.isInline( text ); // -> true\n\t *\n\t * See the {@glink framework/guides/deep-dive/schema#inline-elements Inline elements} section of the Schema deep dive\n\t * guide for more details.\n\t *\n\t * @param {module:engine/model/item~Item|module:engine/model/schema~SchemaContextItem|String} item\n\t */\n\tisInline( item ) {\n\t\tconst def = this.getDefinition( item );\n\n\t\treturn !!( def && def.isInline );\n\t}\n\n\t/**\n\t * Returns `true` if the given item is defined to be\n\t * a selectable element by the {@link module:engine/model/schema~SchemaItemDefinition}'s `isSelectable` property.\n\t *\n\t *\t\tschema.isSelectable( 'paragraph' ); // -> false\n\t *\t\tschema.isSelectable( 'heading1' ); // -> false\n\t *\t\tschema.isSelectable( 'image' ); // -> true\n\t *\t\tschema.isSelectable( 'tableCell' ); // -> true\n\t *\n\t *\t\tconst text = writer.createText( 'foo' );\n\t *\t\tschema.isSelectable( text ); // -> false\n\t *\n\t * See the {@glink framework/guides/deep-dive/schema#selectable-elements Selectable elements} section of the Schema deep dive}\n\t * guide for more details.\n\t *\n\t * @param {module:engine/model/item~Item|module:engine/model/schema~SchemaContextItem|String} item\n\t */\n\tisSelectable( item ) {\n\t\tconst def = this.getDefinition( item );\n\n\t\tif ( !def ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn !!( def.isSelectable || def.isObject );\n\t}\n\n\t/**\n\t * Returns `true` if the given item is defined to be\n\t * a content by the {@link module:engine/model/schema~SchemaItemDefinition}'s `isContent` property.\n\t *\n\t *\t\tschema.isContent( 'paragraph' ); // -> false\n\t *\t\tschema.isContent( 'heading1' ); // -> false\n\t *\t\tschema.isContent( 'image' ); // -> true\n\t *\t\tschema.isContent( 'horizontalLine' ); // -> true\n\t *\n\t *\t\tconst text = writer.createText( 'foo' );\n\t *\t\tschema.isContent( text ); // -> true\n\t *\n\t * See the {@glink framework/guides/deep-dive/schema#content-elements Content elements} section of the Schema deep dive}\n\t * guide for more details.\n\t *\n\t * @param {module:engine/model/item~Item|module:engine/model/schema~SchemaContextItem|String} item\n\t */\n\tisContent( item ) {\n\t\tconst def = this.getDefinition( item );\n\n\t\tif ( !def ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn !!( def.isContent || def.isObject );\n\t}\n\n\t/**\n\t * Checks whether the given node (`child`) can be a child of the given context.\n\t *\n\t *\t\tschema.checkChild( model.document.getRoot(), paragraph ); // -> false\n\t *\n\t *\t\tschema.register( 'paragraph', {\n\t *\t\t\tallowIn: '$root'\n\t *\t\t} );\n\t *\t\tschema.checkChild( model.document.getRoot(), paragraph ); // -> true\n\t *\n\t * Note: When verifying whether the given node can be a child of the given context, the\n\t * schema also verifies the entire context &mdash; from its root to its last element. Therefore, it is possible\n\t * for `checkChild()` to return `false` even though the context's last element can contain the checked child.\n\t * It happens if one of the context's elements does not allow its child.\n\t *\n\t * @fires checkChild\n\t * @param {module:engine/model/schema~SchemaContextDefinition} context The context in which the child will be checked.\n\t * @param {module:engine/model/node~Node|String} def The child to check.\n\t */\n\tcheckChild( context, def ) {\n\t\t// Note: context and child are already normalized here to a SchemaContext and SchemaCompiledItemDefinition.\n\t\tif ( !def ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn this._checkContextMatch( def, context );\n\t}\n\n\t/**\n\t * Checks whether the given attribute can be applied in the given context (on the last\n\t * item of the context).\n\t *\n\t *\t\tschema.checkAttribute( textNode, 'bold' ); // -> false\n\t *\n\t *\t\tschema.extend( '$text', {\n\t *\t\t\tallowAttributes: 'bold'\n\t *\t\t} );\n\t *\t\tschema.checkAttribute( textNode, 'bold' ); // -> true\n\t *\n\t * @fires checkAttribute\n\t * @param {module:engine/model/schema~SchemaContextDefinition} context The context in which the attribute will be checked.\n\t * @param {String} attributeName\n\t */\n\tcheckAttribute( context, attributeName ) {\n\t\tconst def = this.getDefinition( context.last );\n\n\t\tif ( !def ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn def.allowAttributes.includes( attributeName );\n\t}\n\n\t/**\n\t * Checks whether the given element (`elementToMerge`) can be merged with the specified base element (`positionOrBaseElement`).\n\t *\n\t * In other words &mdash; whether `elementToMerge`'s children {@link #checkChild are allowed} in the `positionOrBaseElement`.\n\t *\n\t * This check ensures that elements merged with {@link module:engine/model/writer~Writer#merge `Writer#merge()`}\n\t * will be valid.\n\t *\n\t * Instead of elements, you can pass the instance of the {@link module:engine/model/position~Position} class as the\n\t * `positionOrBaseElement`. It means that the elements before and after the position will be checked whether they can be merged.\n\t *\n\t * @param {module:engine/model/position~Position|module:engine/model/element~Element} positionOrBaseElement The position or base\n\t * element to which the `elementToMerge` will be merged.\n\t * @param {module:engine/model/element~Element} elementToMerge The element to merge. Required if `positionOrBaseElement` is an element.\n\t * @returns {Boolean}\n\t */\n\tcheckMerge( positionOrBaseElement, elementToMerge = null ) {\n\t\tif ( positionOrBaseElement instanceof Position ) {\n\t\t\tconst nodeBefore = positionOrBaseElement.nodeBefore;\n\t\t\tconst nodeAfter = positionOrBaseElement.nodeAfter;\n\n\t\t\tif ( !( nodeBefore instanceof Element ) ) {\n\t\t\t\t/**\n\t\t\t\t * The node before the merge position must be an element.\n\t\t\t\t *\n\t\t\t\t * @error schema-check-merge-no-element-before\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError(\n\t\t\t\t\t'schema-check-merge-no-element-before',\n\t\t\t\t\tthis\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif ( !( nodeAfter instanceof Element ) ) {\n\t\t\t\t/**\n\t\t\t\t * The node after the merge position must be an element.\n\t\t\t\t *\n\t\t\t\t * @error schema-check-merge-no-element-after\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError(\n\t\t\t\t\t'schema-check-merge-no-element-after',\n\t\t\t\t\tthis\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn this.checkMerge( nodeBefore, nodeAfter );\n\t\t}\n\n\t\tfor ( const child of elementToMerge.getChildren() ) {\n\t\t\tif ( !this.checkChild( positionOrBaseElement, child ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Allows registering a callback to the {@link #checkChild} method calls.\n\t *\n\t * Callbacks allow you to implement rules which are not otherwise possible to achieve\n\t * by using the declarative API of {@link module:engine/model/schema~SchemaItemDefinition}.\n\t * For example, by using this method you can disallow elements in specific contexts.\n\t *\n\t * This method is a shorthand for using the {@link #event:checkChild} event. For even better control,\n\t * you can use that event instead.\n\t *\n\t * Example:\n\t *\n\t *\t\t// Disallow heading1 directly inside a blockQuote.\n\t *\t\tschema.addChildCheck( ( context, childDefinition ) => {\n\t *\t\t\tif ( context.endsWith( 'blockQuote' ) && childDefinition.name == 'heading1' ) {\n\t *\t\t\t\treturn false;\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t * Which translates to:\n\t *\n\t *\t\tschema.on( 'checkChild', ( evt, args ) => {\n\t *\t\t\tconst context = args[ 0 ];\n\t *\t\t\tconst childDefinition = args[ 1 ];\n\t *\n\t *\t\t\tif ( context.endsWith( 'blockQuote' ) && childDefinition && childDefinition.name == 'heading1' ) {\n\t *\t\t\t\t// Prevent next listeners from being called.\n\t *\t\t\t\tevt.stop();\n\t *\t\t\t\t// Set the checkChild()'s return value.\n\t *\t\t\t\tevt.return = false;\n\t *\t\t\t}\n\t *\t\t}, { priority: 'high' } );\n\t *\n\t * @param {Function} callback The callback to be called. It is called with two parameters:\n\t * {@link module:engine/model/schema~SchemaContext} (context) instance and\n\t * {@link module:engine/model/schema~SchemaCompiledItemDefinition} (child-to-check definition).\n\t * The callback may return `true/false` to override `checkChild()`'s return value. If it does not return\n\t * a boolean value, the default algorithm (or other callbacks) will define `checkChild()`'s return value.\n\t */\n\taddChildCheck( callback ) {\n\t\tthis.on( 'checkChild', ( evt, [ ctx, childDef ] ) => {\n\t\t\t// checkChild() was called with a non-registered child.\n\t\t\t// In 99% cases such check should return false, so not to overcomplicate all callbacks\n\t\t\t// don't even execute them.\n\t\t\tif ( !childDef ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst retValue = callback( ctx, childDef );\n\n\t\t\tif ( typeof retValue == 'boolean' ) {\n\t\t\t\tevt.stop();\n\t\t\t\tevt.return = retValue;\n\t\t\t}\n\t\t}, { priority: 'high' } );\n\t}\n\n\t/**\n\t * Allows registering a callback to the {@link #checkAttribute} method calls.\n\t *\n\t * Callbacks allow you to implement rules which are not otherwise possible to achieve\n\t * by using the declarative API of {@link module:engine/model/schema~SchemaItemDefinition}.\n\t * For example, by using this method you can disallow attribute if node to which it is applied\n\t * is contained within some other element (e.g. you want to disallow `bold` on `$text` within `heading1`).\n\t *\n\t * This method is a shorthand for using the {@link #event:checkAttribute} event. For even better control,\n\t * you can use that event instead.\n\t *\n\t * Example:\n\t *\n\t *\t\t// Disallow bold on $text inside heading1.\n\t *\t\tschema.addAttributeCheck( ( context, attributeName ) => {\n\t *\t\t\tif ( context.endsWith( 'heading1 $text' ) && attributeName == 'bold' ) {\n\t *\t\t\t\treturn false;\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t * Which translates to:\n\t *\n\t *\t\tschema.on( 'checkAttribute', ( evt, args ) => {\n\t *\t\t\tconst context = args[ 0 ];\n\t *\t\t\tconst attributeName = args[ 1 ];\n\t *\n\t *\t\t\tif ( context.endsWith( 'heading1 $text' ) && attributeName == 'bold' ) {\n\t *\t\t\t\t// Prevent next listeners from being called.\n\t *\t\t\t\tevt.stop();\n\t *\t\t\t\t// Set the checkAttribute()'s return value.\n\t *\t\t\t\tevt.return = false;\n\t *\t\t\t}\n\t *\t\t}, { priority: 'high' } );\n\t *\n\t * @param {Function} callback The callback to be called. It is called with two parameters:\n\t * {@link module:engine/model/schema~SchemaContext} (context) instance and attribute name.\n\t * The callback may return `true/false` to override `checkAttribute()`'s return value. If it does not return\n\t * a boolean value, the default algorithm (or other callbacks) will define `checkAttribute()`'s return value.\n\t */\n\taddAttributeCheck( callback ) {\n\t\tthis.on( 'checkAttribute', ( evt, [ ctx, attributeName ] ) => {\n\t\t\tconst retValue = callback( ctx, attributeName );\n\n\t\t\tif ( typeof retValue == 'boolean' ) {\n\t\t\t\tevt.stop();\n\t\t\t\tevt.return = retValue;\n\t\t\t}\n\t\t}, { priority: 'high' } );\n\t}\n\n\t/**\n\t * This method allows assigning additional metadata to the model attributes. For example,\n\t * {@link module:engine/model/schema~AttributeProperties `AttributeProperties#isFormatting` property} is\n\t * used to mark formatting attributes (like `bold` or `italic`).\n\t *\n\t *\t\t// Mark bold as a formatting attribute.\n\t *\t\tschema.setAttributeProperties( 'bold', {\n\t *\t\t\tisFormatting: true\n\t *\t\t} );\n\t *\n\t *\t\t// Override code not to be considered a formatting markup.\n\t *\t\tschema.setAttributeProperties( 'code', {\n\t *\t\t\tisFormatting: false\n\t *\t\t} );\n\t *\n\t * Properties are not limited to members defined in the\n\t * {@link module:engine/model/schema~AttributeProperties `AttributeProperties` type} and you can also use custom properties:\n\t *\n\t *\t\tschema.setAttributeProperties( 'blockQuote', {\n\t *\t\t\tcustomProperty: 'value'\n\t *\t\t} );\n\t *\n\t * Subsequent calls with the same attribute will extend its custom properties:\n\t *\n\t *\t\tschema.setAttributeProperties( 'blockQuote', {\n\t *\t\t\tone: 1\n\t *\t\t} );\n\t *\n\t *\t\tschema.setAttributeProperties( 'blockQuote', {\n\t *\t\t\ttwo: 2\n\t *\t\t} );\n\t *\n\t *\t\tconsole.log( schema.getAttributeProperties( 'blockQuote' ) );\n\t *\t\t// Logs: { one: 1, two: 2 }\n\t *\n\t * @param {String} attributeName A name of the attribute to receive the properties.\n\t * @param {module:engine/model/schema~AttributeProperties} properties A dictionary of properties.\n\t */\n\tsetAttributeProperties( attributeName, properties ) {\n\t\tthis._attributeProperties[ attributeName ] = Object.assign( this.getAttributeProperties( attributeName ), properties );\n\t}\n\n\t/**\n\t * Returns properties associated with a given model attribute. See {@link #setAttributeProperties `setAttributeProperties()`}.\n\t *\n\t * @param {String} attributeName A name of the attribute.\n\t * @returns {module:engine/model/schema~AttributeProperties}\n\t */\n\tgetAttributeProperties( attributeName ) {\n\t\treturn this._attributeProperties[ attributeName ] || {};\n\t}\n\n\t/**\n\t * Returns the lowest {@link module:engine/model/schema~Schema#isLimit limit element} containing the entire\n\t * selection/range/position or the root otherwise.\n\t *\n\t * @param {module:engine/model/selection~Selection|module:engine/model/documentselection~DocumentSelection|\n\t * module:engine/model/range~Range|module:engine/model/position~Position} selectionOrRangeOrPosition\n\t * The selection/range/position to check.\n\t * @returns {module:engine/model/element~Element} The lowest limit element containing\n\t * the entire `selectionOrRangeOrPosition`.\n\t */\n\tgetLimitElement( selectionOrRangeOrPosition ) {\n\t\tlet element;\n\n\t\tif ( selectionOrRangeOrPosition instanceof Position ) {\n\t\t\telement = selectionOrRangeOrPosition.parent;\n\t\t} else {\n\t\t\tconst ranges = selectionOrRangeOrPosition instanceof Range ?\n\t\t\t\t[ selectionOrRangeOrPosition ] :\n\t\t\t\tArray.from( selectionOrRangeOrPosition.getRanges() );\n\n\t\t\t// Find the common ancestor for all selection's ranges.\n\t\t\telement = ranges\n\t\t\t\t.reduce( ( element, range ) => {\n\t\t\t\t\tconst rangeCommonAncestor = range.getCommonAncestor();\n\n\t\t\t\t\tif ( !element ) {\n\t\t\t\t\t\treturn rangeCommonAncestor;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn element.getCommonAncestor( rangeCommonAncestor, { includeSelf: true } );\n\t\t\t\t}, null );\n\t\t}\n\n\t\twhile ( !this.isLimit( element ) ) {\n\t\t\tif ( element.parent ) {\n\t\t\t\telement = element.parent;\n\t\t\t} else {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn element;\n\t}\n\n\t/**\n\t * Checks whether the attribute is allowed in selection:\n\t *\n\t * * if the selection is not collapsed, then checks if the attribute is allowed on any of nodes in that range,\n\t * * if the selection is collapsed, then checks if on the selection position there's a text with the\n\t * specified attribute allowed.\n\t *\n\t * @param {module:engine/model/selection~Selection|module:engine/model/documentselection~DocumentSelection} selection\n\t * Selection which will be checked.\n\t * @param {String} attribute The name of the attribute to check.\n\t * @returns {Boolean}\n\t */\n\tcheckAttributeInSelection( selection, attribute ) {\n\t\tif ( selection.isCollapsed ) {\n\t\t\tconst firstPosition = selection.getFirstPosition();\n\t\t\tconst context = [\n\t\t\t\t...firstPosition.getAncestors(),\n\t\t\t\tnew Text( '', selection.getAttributes() )\n\t\t\t];\n\n\t\t\t// Check whether schema allows for a text with the attribute in the selection.\n\t\t\treturn this.checkAttribute( context, attribute );\n\t\t} else {\n\t\t\tconst ranges = selection.getRanges();\n\n\t\t\t// For all ranges, check nodes in them until you find a node that is allowed to have the attribute.\n\t\t\tfor ( const range of ranges ) {\n\t\t\t\tfor ( const value of range ) {\n\t\t\t\t\tif ( this.checkAttribute( value.item, attribute ) ) {\n\t\t\t\t\t\t// If we found a node that is allowed to have the attribute, return true.\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// If we haven't found such node, return false.\n\t\treturn false;\n\t}\n\n\t/**\n\t * Transforms the given set of ranges into a set of ranges where the given attribute is allowed (and can be applied).\n\t *\n\t * @param {Array.<module:engine/model/range~Range>} ranges Ranges to be validated.\n\t * @param {String} attribute The name of the attribute to check.\n\t * @returns {Iterable.<module:engine/model/range~Range>} Ranges in which the attribute is allowed.\n\t */\n\t* getValidRanges( ranges, attribute ) {\n\t\tranges = convertToMinimalFlatRanges( ranges );\n\n\t\tfor ( const range of ranges ) {\n\t\t\tyield* this._getValidRangesForRange( range, attribute );\n\t\t}\n\t}\n\n\t/**\n\t * Basing on given `position`, finds and returns a {@link module:engine/model/range~Range range} which is\n\t * nearest to that `position` and is a correct range for selection.\n\t *\n\t * The correct selection range might be collapsed when it is located in a position where the text node can be placed.\n\t * Non-collapsed range is returned when selection can be placed around element marked as an \"object\" in\n\t * the {@link module:engine/model/schema~Schema schema}.\n\t *\n\t * Direction of searching for the nearest correct selection range can be specified as:\n\t *\n\t * * `both` - searching will be performed in both ways,\n\t * * `forward` - searching will be performed only forward,\n\t * * `backward` - searching will be performed only backward.\n\t *\n\t * When valid selection range cannot be found, `null` is returned.\n\t *\n\t * @param {module:engine/model/position~Position} position Reference position where new selection range should be looked for.\n\t * @param {'both'|'forward'|'backward'} [direction='both'] Search direction.\n\t * @returns {module:engine/model/range~Range|null} Nearest selection range or `null` if one cannot be found.\n\t */\n\tgetNearestSelectionRange( position, direction = 'both' ) {\n\t\t// Return collapsed range if provided position is valid.\n\t\tif ( this.checkChild( position, '$text' ) ) {\n\t\t\treturn new Range( position );\n\t\t}\n\n\t\tlet backwardWalker, forwardWalker;\n\n\t\t// Never leave a limit element.\n\t\tconst limitElement = position.getAncestors().reverse().find( item => this.isLimit( item ) ) || position.root;\n\n\t\tif ( direction == 'both' || direction == 'backward' ) {\n\t\t\tbackwardWalker = new TreeWalker( {\n\t\t\t\tboundaries: Range._createIn( limitElement ),\n\t\t\t\tstartPosition: position,\n\t\t\t\tdirection: 'backward'\n\t\t\t} );\n\t\t}\n\n\t\tif ( direction == 'both' || direction == 'forward' ) {\n\t\t\tforwardWalker = new TreeWalker( {\n\t\t\t\tboundaries: Range._createIn( limitElement ),\n\t\t\t\tstartPosition: position\n\t\t\t} );\n\t\t}\n\n\t\tfor ( const data of combineWalkers( backwardWalker, forwardWalker ) ) {\n\t\t\tconst type = ( data.walker == backwardWalker ? 'elementEnd' : 'elementStart' );\n\t\t\tconst value = data.value;\n\n\t\t\tif ( value.type == type && this.isObject( value.item ) ) {\n\t\t\t\treturn Range._createOn( value.item );\n\t\t\t}\n\n\t\t\tif ( this.checkChild( value.nextPosition, '$text' ) ) {\n\t\t\t\treturn new Range( value.nextPosition );\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Tries to find position ancestors that allow to insert a given node.\n\t * It starts searching from the given position and goes node by node to the top of the model tree\n\t * as long as a {@link module:engine/model/schema~Schema#isLimit limit element}, an\n\t * {@link module:engine/model/schema~Schema#isObject object element} or a topmost ancestor is not reached.\n\t *\n\t * @param {module:engine/model/position~Position} position The position that the search will start from.\n\t * @param {module:engine/model/node~Node|String} node The node for which an allowed parent should be found or its name.\n\t * @returns {module:engine/model/element~Element|null} element Allowed parent or null if nothing was found.\n\t */\n\tfindAllowedParent( position, node ) {\n\t\tlet parent = position.parent;\n\n\t\twhile ( parent ) {\n\t\t\tif ( this.checkChild( parent, node ) ) {\n\t\t\t\treturn parent;\n\t\t\t}\n\n\t\t\t// Do not split limit elements.\n\t\t\tif ( this.isLimit( parent ) ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tparent = parent.parent;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Removes attributes disallowed by the schema.\n\t *\n\t * @param {Iterable.<module:engine/model/node~Node>} nodes Nodes that will be filtered.\n\t * @param {module:engine/model/writer~Writer} writer\n\t */\n\tremoveDisallowedAttributes( nodes, writer ) {\n\t\tfor ( const node of nodes ) {\n\t\t\t// When node is a `Text` it has no children, so just filter it out.\n\t\t\tif ( node.is( '$text' ) ) {\n\t\t\t\tremoveDisallowedAttributeFromNode( this, node, writer );\n\t\t\t}\n\t\t\t// In a case of `Element` iterates through positions between nodes inside this element\n\t\t\t// and filter out node before the current position, or position parent when position\n\t\t\t// is at start of an element. Using positions prevent from omitting merged nodes\n\t\t\t// see https://github.com/ckeditor/ckeditor5-engine/issues/1789.\n\t\t\telse {\n\t\t\t\tconst rangeInNode = Range._createIn( node );\n\t\t\t\tconst positionsInRange = rangeInNode.getPositions();\n\n\t\t\t\tfor ( const position of positionsInRange ) {\n\t\t\t\t\tconst item = position.nodeBefore || position.parent;\n\n\t\t\t\t\tremoveDisallowedAttributeFromNode( this, item, writer );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Creates an instance of the schema context.\n\t *\n\t * @param {module:engine/model/schema~SchemaContextDefinition} context\n\t * @returns {module:engine/model/schema~SchemaContext}\n\t */\n\tcreateContext( context ) {\n\t\treturn new SchemaContext( context );\n\t}\n\n\t/**\n\t * @private\n\t */\n\t_clearCache() {\n\t\tthis._compiledDefinitions = null;\n\t}\n\n\t/**\n\t * @private\n\t */\n\t_compile() {\n\t\tconst compiledDefinitions = {};\n\t\tconst sourceRules = this._sourceDefinitions;\n\t\tconst itemNames = Object.keys( sourceRules );\n\n\t\tfor ( const itemName of itemNames ) {\n\t\t\tcompiledDefinitions[ itemName ] = compileBaseItemRule( sourceRules[ itemName ], itemName );\n\t\t}\n\n\t\tfor ( const itemName of itemNames ) {\n\t\t\tcompileAllowContentOf( compiledDefinitions, itemName );\n\t\t}\n\n\t\tfor ( const itemName of itemNames ) {\n\t\t\tcompileAllowWhere( compiledDefinitions, itemName );\n\t\t}\n\n\t\tfor ( const itemName of itemNames ) {\n\t\t\tcompileAllowAttributesOf( compiledDefinitions, itemName );\n\t\t\tcompileInheritPropertiesFrom( compiledDefinitions, itemName );\n\t\t}\n\n\t\tfor ( const itemName of itemNames ) {\n\t\t\tcleanUpAllowIn( compiledDefinitions, itemName );\n\t\t\tcleanUpAllowAttributes( compiledDefinitions, itemName );\n\t\t}\n\n\t\tthis._compiledDefinitions = compiledDefinitions;\n\t}\n\n\t/**\n\t * @private\n\t * @param {module:engine/model/schema~SchemaCompiledItemDefinition} def\n\t * @param {module:engine/model/schema~SchemaContext} context\n\t * @param {Number} contextItemIndex\n\t */\n\t_checkContextMatch( def, context, contextItemIndex = context.length - 1 ) {\n\t\tconst contextItem = context.getItem( contextItemIndex );\n\n\t\tif ( def.allowIn.includes( contextItem.name ) ) {\n\t\t\tif ( contextItemIndex == 0 ) {\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\tconst parentRule = this.getDefinition( contextItem );\n\n\t\t\t\treturn this._checkContextMatch( parentRule, context, contextItemIndex - 1 );\n\t\t\t}\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t/**\n\t * Takes a flat range and an attribute name. Traverses the range recursively and deeply to find and return all ranges\n\t * inside the given range on which the attribute can be applied.\n\t *\n\t * This is a helper function for {@link ~Schema#getValidRanges}.\n\t *\n\t * @private\n\t * @param {module:engine/model/range~Range} range The range to process.\n\t * @param {String} attribute The name of the attribute to check.\n\t * @returns {Iterable.<module:engine/model/range~Range>} Ranges in which the attribute is allowed.\n\t */\n\t* _getValidRangesForRange( range, attribute ) {\n\t\tlet start = range.start;\n\t\tlet end = range.start;\n\n\t\tfor ( const item of range.getItems( { shallow: true } ) ) {\n\t\t\tif ( item.is( 'element' ) ) {\n\t\t\t\tyield* this._getValidRangesForRange( Range._createIn( item ), attribute );\n\t\t\t}\n\n\t\t\tif ( !this.checkAttribute( item, attribute ) ) {\n\t\t\t\tif ( !start.isEqual( end ) ) {\n\t\t\t\t\tyield new Range( start, end );\n\t\t\t\t}\n\n\t\t\t\tstart = Position._createAfter( item );\n\t\t\t}\n\n\t\t\tend = Position._createAfter( item );\n\t\t}\n\n\t\tif ( !start.isEqual( end ) ) {\n\t\t\tyield new Range( start, end );\n\t\t}\n\t}\n}\n\nmix( Schema, ObservableMixin );\n\n/**\n * Event fired when the {@link #checkChild} method is called. It allows plugging in\n * additional behavior, for example implementing rules which cannot be defined using the declarative\n * {@link module:engine/model/schema~SchemaItemDefinition} interface.\n *\n * **Note:** The {@link #addChildCheck} method is a more handy way to register callbacks. Internally,\n * it registers a listener to this event but comes with a simpler API and it is the recommended choice\n * in most of the cases.\n *\n * The {@link #checkChild} method fires an event because it is\n * {@link module:utils/observablemixin~ObservableMixin#decorate decorated} with it. Thanks to that you can\n * use this event in various ways, but the most important use case is overriding standard behavior of the\n * `checkChild()` method. Let's see a typical listener template:\n *\n *\t\tschema.on( 'checkChild', ( evt, args ) => {\n *\t\t\tconst context = args[ 0 ];\n *\t\t\tconst childDefinition = args[ 1 ];\n *\t\t}, { priority: 'high' } );\n *\n * The listener is added with a `high` priority to be executed before the default method is really called. The `args` callback\n * parameter contains arguments passed to `checkChild( context, child )`. However, the `context` parameter is already\n * normalized to a {@link module:engine/model/schema~SchemaContext} instance and `child` to a\n * {@link module:engine/model/schema~SchemaCompiledItemDefinition} instance, so you do not have to worry about\n * the various ways how `context` and `child` may be passed to `checkChild()`.\n *\n * **Note:** `childDefinition` may be `undefined` if `checkChild()` was called with a non-registered element.\n *\n * So, in order to implement a rule \"disallow `heading1` in `blockQuote`\", you can add such a listener:\n *\n *\t\tschema.on( 'checkChild', ( evt, args ) => {\n *\t\t\tconst context = args[ 0 ];\n *\t\t\tconst childDefinition = args[ 1 ];\n *\n *\t\t\tif ( context.endsWith( 'blockQuote' ) && childDefinition && childDefinition.name == 'heading1' ) {\n *\t\t\t\t// Prevent next listeners from being called.\n *\t\t\t\tevt.stop();\n *\t\t\t\t// Set the checkChild()'s return value.\n *\t\t\t\tevt.return = false;\n *\t\t\t}\n *\t\t}, { priority: 'high' } );\n *\n * Allowing elements in specific contexts will be a far less common use case, because it is normally handled by the\n * `allowIn` rule from {@link module:engine/model/schema~SchemaItemDefinition}. But if you have a complex scenario\n * where `listItem` should be allowed only in element `foo` which must be in element `bar`, then this would be the way:\n *\n *\t\tschema.on( 'checkChild', ( evt, args ) => {\n *\t\t\tconst context = args[ 0 ];\n *\t\t\tconst childDefinition = args[ 1 ];\n *\n *\t\t\tif ( context.endsWith( 'bar foo' ) && childDefinition.name == 'listItem' ) {\n *\t\t\t\t// Prevent next listeners from being called.\n *\t\t\t\tevt.stop();\n *\t\t\t\t// Set the checkChild()'s return value.\n *\t\t\t\tevt.return = true;\n *\t\t\t}\n *\t\t}, { priority: 'high' } );\n *\n * @event checkChild\n * @param {Array} args The `checkChild()`'s arguments.\n */\n\n/**\n * Event fired when the {@link #checkAttribute} method is called. It allows plugging in\n * additional behavior, for example implementing rules which cannot be defined using the declarative\n * {@link module:engine/model/schema~SchemaItemDefinition} interface.\n *\n * **Note:** The {@link #addAttributeCheck} method is a more handy way to register callbacks. Internally,\n * it registers a listener to this event but comes with a simpler API and it is the recommended choice\n * in most of the cases.\n *\n * The {@link #checkAttribute} method fires an event because it is\n * {@link module:utils/observablemixin~ObservableMixin#decorate decorated} with it. Thanks to that you can\n * use this event in various ways, but the most important use case is overriding the standard behavior of the\n * `checkAttribute()` method. Let's see a typical listener template:\n *\n *\t\tschema.on( 'checkAttribute', ( evt, args ) => {\n *\t\t\tconst context = args[ 0 ];\n *\t\t\tconst attributeName = args[ 1 ];\n *\t\t}, { priority: 'high' } );\n *\n * The listener is added with a `high` priority to be executed before the default method is really called. The `args` callback\n * parameter contains arguments passed to `checkAttribute( context, attributeName )`. However, the `context` parameter is already\n * normalized to a {@link module:engine/model/schema~SchemaContext} instance, so you do not have to worry about\n * the various ways how `context` may be passed to `checkAttribute()`.\n *\n * So, in order to implement a rule \"disallow `bold` in a text which is in a `heading1`, you can add such a listener:\n *\n *\t\tschema.on( 'checkAttribute', ( evt, args ) => {\n *\t\t\tconst context = args[ 0 ];\n *\t\t\tconst attributeName = args[ 1 ];\n *\n *\t\t\tif ( context.endsWith( 'heading1 $text' ) && attributeName == 'bold' ) {\n *\t\t\t\t// Prevent next listeners from being called.\n *\t\t\t\tevt.stop();\n *\t\t\t\t// Set the checkAttribute()'s return value.\n *\t\t\t\tevt.return = false;\n *\t\t\t}\n *\t\t}, { priority: 'high' } );\n *\n * Allowing attributes in specific contexts will be a far less common use case, because it is normally handled by the\n * `allowAttributes` rule from {@link module:engine/model/schema~SchemaItemDefinition}. But if you have a complex scenario\n * where `bold` should be allowed only in element `foo` which must be in element `bar`, then this would be the way:\n *\n *\t\tschema.on( 'checkAttribute', ( evt, args ) => {\n *\t\t\tconst context = args[ 0 ];\n *\t\t\tconst attributeName = args[ 1 ];\n *\n *\t\t\tif ( context.endsWith( 'bar foo $text' ) && attributeName == 'bold' ) {\n *\t\t\t\t// Prevent next listeners from being called.\n *\t\t\t\tevt.stop();\n *\t\t\t\t// Set the checkAttribute()'s return value.\n *\t\t\t\tevt.return = true;\n *\t\t\t}\n *\t\t}, { priority: 'high' } );\n *\n * @event checkAttribute\n * @param {Array} args The `checkAttribute()`'s arguments.\n */\n\n/**\n * A definition of a {@link module:engine/model/schema~Schema schema} item.\n *\n * You can define the following rules:\n *\n * * {@link ~SchemaItemDefinition#allowIn `allowIn`} &ndash; Defines in which other items this item will be allowed.\n * * {@link ~SchemaItemDefinition#allowAttributes `allowAttributes`} &ndash; Defines allowed attributes of the given item.\n * * {@link ~SchemaItemDefinition#allowContentOf `allowContentOf`} &ndash; Inherits \"allowed children\" from other items.\n * * {@link ~SchemaItemDefinition#allowWhere `allowWhere`} &ndash; Inherits \"allowed in\" from other items.\n * * {@link ~SchemaItemDefinition#allowAttributesOf `allowAttributesOf`} &ndash; Inherits attributes from other items.\n * * {@link ~SchemaItemDefinition#inheritTypesFrom `inheritTypesFrom`} &ndash; Inherits `is*` properties of other items.\n * * {@link ~SchemaItemDefinition#inheritAllFrom `inheritAllFrom`} &ndash;\n * A shorthand for `allowContentOf`, `allowWhere`, `allowAttributesOf`, `inheritTypesFrom`.\n *\n * # The `is*` properties\n *\n * There are a couple commonly used `is*` properties. Their role is to assign additional semantics to schema items.\n * You can define more properties but you will also need to implement support for them in the existing editor features.\n *\n * * {@link ~SchemaItemDefinition#isBlock `isBlock`} &ndash; Whether this item is paragraph-like.\n * Generally speaking, content is usually made out of blocks like paragraphs, list items, images, headings, etc.\n * * {@link ~SchemaItemDefinition#isInline `isInline`} &ndash; Whether an item is \"text-like\" and should be treated as an inline node.\n * Examples of inline elements: `$text`, `softBreak` (`<br>`), etc.\n * * {@link ~SchemaItemDefinition#isLimit `isLimit`} &ndash; It can be understood as whether this element\n * should not be split by <kbd>Enter</kbd>. Examples of limit elements: `$root`, table cell, image caption, etc.\n * In other words, all actions that happen inside a limit element are limited to its content.\n * All objects are treated as limit elements, too.\n * * {@link ~SchemaItemDefinition#isObject `isObject`} &ndash; Whether an item is \"self-contained\" and should be treated as a whole.\n * Examples of object elements: `image`, `table`, `video`, etc. An object is also a limit, so\n * {@link module:engine/model/schema~Schema#isLimit `isLimit()`} returns `true` for object elements automatically.\n *\n * Read more about the meaning of these types in the\n * {@glink framework/guides/deep-dive/schema#defining-additional-semantics dedicated section of the Schema deep dive} guide.\n *\n * # Generic items\n *\n * There are three basic generic items: `$root`, `$block` and `$text`.\n * They are defined as follows:\n *\n *\t\tthis.schema.register( '$root', {\n *\t\t\tisLimit: true\n *\t\t} );\n *\t\tthis.schema.register( '$block', {\n *\t\t\tallowIn: '$root',\n *\t\t\tisBlock: true\n *\t\t} );\n *\t\tthis.schema.register( '$text', {\n *\t\t\tallowIn: '$block',\n *\t\t\tisInline: true\n *\t\t} );\n *\n * They reflect typical editor content that is contained within one root, consists of several blocks\n * (paragraphs, lists items, headings, images) which, in turn, may contain text inside.\n *\n * By inheriting from the generic items you can define new items which will get extended by other editor features.\n * Read more about generic types in the {@glink framework/guides/deep-dive/schema Schema deep dive} guide.\n *\n * # Example definitions\n *\n * Allow `paragraph` in roots and block quotes:\n *\n *\t\tschema.register( 'paragraph', {\n *\t\t\tallowIn: [ '$root', 'blockQuote' ],\n *\t\t\tisBlock: true\n *\t\t} );\n *\n * Allow `paragraph` everywhere where `$block` is allowed (i.e. in `$root`):\n *\n *\t\tschema.register( 'paragraph', {\n *\t\t\tallowWhere: '$block',\n *\t\t\tisBlock: true\n *\t\t} );\n *\n * Make `image` a block object, which is allowed everywhere where `$block` is.\n * Also, allow `src` and `alt` attributes in it:\n *\n *\t\tschema.register( 'image', {\n *\t\t\tallowWhere: '$block',\n *\t\t\tallowAttributes: [ 'src', 'alt' ],\n *\t\t\tisBlock: true,\n *\t\t\tisObject: true\n *\t\t} );\n *\n * Make `caption` allowed in `image` and make it allow all the content of `$block`s (usually, `$text`).\n * Also, mark it as a limit element so it cannot be split:\n *\n *\t\tschema.register( 'caption', {\n *\t\t\tallowIn: 'image',\n *\t\t\tallowContentOf: '$block',\n *\t\t\tisLimit: true\n *\t\t} );\n *\n * Make `listItem` inherit all from `$block` but also allow additional attributes:\n *\n *\t\tschema.register( 'listItem', {\n *\t\t\tinheritAllFrom: '$block',\n *\t\t\tallowAttributes: [ 'listType', 'listIndent' ]\n *\t\t} );\n *\n * Which translates to:\n *\n *\t\tschema.register( 'listItem', {\n *\t\t\tallowWhere: '$block',\n *\t\t\tallowContentOf: '$block',\n *\t\t\tallowAttributesOf: '$block',\n *\t\t\tinheritTypesFrom: '$block',\n *\t\t\tallowAttributes: [ 'listType', 'listIndent' ]\n *\t\t} );\n *\n * # Tips\n *\n * * Check schema definitions of existing features to see how they are defined.\n * * If you want to publish your feature so other developers can use it, try to use\n * generic items as much as possible.\n * * Keep your model clean. Limit it to the actual data and store information in a normalized way.\n * * Remember about defining the `is*` properties. They do not affect the allowed structures, but they can\n * affect how the editor features treat your elements.\n *\n * @typedef {Object} module:engine/model/schema~SchemaItemDefinition\n *\n * @property {String|Array.<String>} allowIn Defines in which other items this item will be allowed.\n * @property {String|Array.<String>} allowAttributes Defines allowed attributes of the given item.\n * @property {String|Array.<String>} allowContentOf Inherits \"allowed children\" from other items.\n * @property {String|Array.<String>} allowWhere Inherits \"allowed in\" from other items.\n * @property {String|Array.<String>} allowAttributesOf Inherits attributes from other items.\n * @property {String|Array.<String>} inheritTypesFrom Inherits `is*` properties of other items.\n * @property {String} inheritAllFrom A shorthand for `allowContentOf`, `allowWhere`, `allowAttributesOf`, `inheritTypesFrom`.\n *\n * @property {Boolean} isBlock\n * Whether this item is paragraph-like. Generally speaking, content is usually made out of blocks\n * like paragraphs, list items, images, headings, etc. All these elements are marked as blocks. A block\n * should not allow another block inside. Note: There is also the `$block` generic item which has `isBlock` set to `true`.\n * Most block type items will inherit from `$block` (through `inheritAllFrom`).\n *\n * Read more about the block elements in the\n * {@glink framework/guides/deep-dive/schema#block-elements Block elements} section of the Schema deep dive} guide.\n *\n * @property {Boolean} isInline\n * Whether an item is \"text-like\" and should be treated as an inline node. Examples of inline elements:\n * `$text`, `softBreak` (`<br>`), etc.\n *\n * Read more about the inline elements in the\n * {@glink framework/guides/deep-dive/schema#inline-elements Inline elements} section of the Schema deep dive} guide.\n *\n * @property {Boolean} isLimit\n * It can be understood as whether this element should not be split by <kbd>Enter</kbd>.\n * Examples of limit elements: `$root`, table cell, image caption, etc. In other words, all actions that happen inside\n * a limit element are limited to its content.\n *\n * Read more about the limit elements in the\n * {@glink framework/guides/deep-dive/schema#limit-elements Limit elements} section of the Schema deep dive} guide.\n *\n * @property {Boolean} isObject\n * Whether an item is \"self-contained\" and should be treated as a whole. Examples of object elements:\n * `image`, `table`, `video`, etc.\n *\n * **Note:** An object is also a limit, so\n * {@link module:engine/model/schema~Schema#isLimit `isLimit()`} returns `true` for object elements automatically.\n *\n * Read more about the object elements in the\n * {@glink framework/guides/deep-dive/schema#object-elements Object elements} section of the Schema deep dive} guide.\n *\n * @property {Boolean} isSelectable\n * `true` when an element should be selectable as a whole by the user. Examples of selectable elements: `image`, `table`, `tableCell`, etc.\n *\n * **Note:** An object is also a selectable element, so\n * {@link module:engine/model/schema~Schema#isSelectable `isSelectable()`} returns `true` for object elements automatically.\n *\n * Read more about selectable elements in the\n * {@glink framework/guides/deep-dive/schema#selectable-elements Selectable elements} section of the Schema deep dive} guide.\n *\n * @property {Boolean} isContent\n * An item is a content when it always finds its way to the editor data output regardless of the number and type of its descendants.\n * Examples of content elements: `$text`, `image`, `table`, etc. (but not `paragraph`, `heading1` or `tableCell`).\n *\n * **Note:** An object is also a content element, so\n * {@link module:engine/model/schema~Schema#isContent `isContent()`} returns `true` for object elements automatically.\n *\n * Read more about content elements in the\n * {@glink framework/guides/deep-dive/schema#content-elements Content elements} section of the Schema deep dive} guide.\n */\n\n/**\n * A simplified version of {@link module:engine/model/schema~SchemaItemDefinition} after\n * compilation by the {@link module:engine/model/schema~Schema schema}.\n * Rules fed to the schema by {@link module:engine/model/schema~Schema#register}\n * and {@link module:engine/model/schema~Schema#extend} methods are defined in the\n * {@link module:engine/model/schema~SchemaItemDefinition} format.\n * Later on, they are compiled to `SchemaCompiledItemDefinition` so when you use e.g.\n * the {@link module:engine/model/schema~Schema#getDefinition} method you get the compiled version.\n *\n * The compiled version contains only the following properties:\n *\n * * The `name` property,\n * * The `is*` properties,\n * * The `allowIn` array,\n * * The `allowAttributes` array.\n *\n * @typedef {Object} module:engine/model/schema~SchemaCompiledItemDefinition\n */\n\n/**\n * A schema context &mdash; a list of ancestors of a given position in the document.\n *\n * Considering such position:\n *\n *\t\t<$root>\n *\t\t\t<blockQuote>\n *\t\t\t\t<paragraph>\n *\t\t\t\t\t^\n *\t\t\t\t</paragraph>\n *\t\t\t</blockQuote>\n *\t\t</$root>\n *\n * The context of this position is its {@link module:engine/model/position~Position#getAncestors lists of ancestors}:\n *\n *\t\t[ rootElement, blockQuoteElement, paragraphElement ]\n *\n * Contexts are used in the {@link module:engine/model/schema~Schema#event:checkChild `Schema#checkChild`} and\n * {@link module:engine/model/schema~Schema#event:checkAttribute `Schema#checkAttribute`} events as a definition\n * of a place in the document where the check occurs. The context instances are created based on the first arguments\n * of the {@link module:engine/model/schema~Schema#checkChild `Schema#checkChild()`} and\n * {@link module:engine/model/schema~Schema#checkAttribute `Schema#checkAttribute()`} methods so when\n * using these methods you need to use {@link module:engine/model/schema~SchemaContextDefinition}s.\n */\nexport class SchemaContext {\n\t/**\n\t * Creates an instance of the context.\n\t *\n\t * @param {module:engine/model/schema~SchemaContextDefinition} context\n\t */\n\tconstructor( context ) {\n\t\tif ( context instanceof SchemaContext ) {\n\t\t\treturn context;\n\t\t}\n\n\t\tif ( typeof context == 'string' ) {\n\t\t\tcontext = [ context ];\n\t\t} else if ( !Array.isArray( context ) ) {\n\t\t\t// `context` is item or position.\n\t\t\t// Position#getAncestors() doesn't accept any parameters but it works just fine here.\n\t\t\tcontext = context.getAncestors( { includeSelf: true } );\n\t\t}\n\n\t\tif ( context[ 0 ] && typeof context[ 0 ] != 'string' && context[ 0 ].is( 'documentFragment' ) ) {\n\t\t\tcontext.shift();\n\t\t}\n\n\t\tthis._items = context.map( mapContextItem );\n\t}\n\n\t/**\n\t * The number of items.\n\t *\n\t * @type {Number}\n\t */\n\tget length() {\n\t\treturn this._items.length;\n\t}\n\n\t/**\n\t * The last item (the lowest node).\n\t *\n\t * @type {module:engine/model/schema~SchemaContextItem}\n\t */\n\tget last() {\n\t\treturn this._items[ this._items.length - 1 ];\n\t}\n\n\t/**\n\t * Iterable interface.\n\t *\n\t * Iterates over all context items.\n\t *\n\t * @returns {Iterable.<module:engine/model/schema~SchemaContextItem>}\n\t */\n\t[ Symbol.iterator ]() {\n\t\treturn this._items[ Symbol.iterator ]();\n\t}\n\n\t/**\n\t * Returns a new schema context instance with an additional item.\n\t *\n\t * Item can be added as:\n\t *\n\t * \t\tconst context = new SchemaContext( [ '$root' ] );\n\t *\n\t * \t\t// An element.\n\t * \t\tconst fooElement = writer.createElement( 'fooElement' );\n\t * \t\tconst newContext = context.push( fooElement ); // [ '$root', 'fooElement' ]\n\t *\n\t * \t\t// A text node.\n\t * \t\tconst text = writer.createText( 'foobar' );\n\t * \t\tconst newContext = context.push( text ); // [ '$root', '$text' ]\n\t *\n\t * \t\t// A string (element name).\n\t * \t\tconst newContext = context.push( 'barElement' ); // [ '$root', 'barElement' ]\n\t *\n\t * **Note** {@link module:engine/model/node~Node} that is already in the model tree will be added as the only item\n\t * (without ancestors).\n\t *\n\t * @param {String|module:engine/model/node~Node|Array<String|module:engine/model/node~Node>} item An item that will be added\n\t * to the current context.\n\t * @returns {module:engine/model/schema~SchemaContext} A new schema context instance with an additional item.\n\t */\n\tpush( item ) {\n\t\tconst ctx = new SchemaContext( [ item ] );\n\n\t\tctx._items = [ ...this._items, ...ctx._items ];\n\n\t\treturn ctx;\n\t}\n\n\t/**\n\t * Gets an item on the given index.\n\t *\n\t * @returns {module:engine/model/schema~SchemaContextItem}\n\t */\n\tgetItem( index ) {\n\t\treturn this._items[ index ];\n\t}\n\n\t/**\n\t * Returns the names of items.\n\t *\n\t * @returns {Iterable.<String>}\n\t */\n\t* getNames() {\n\t\tyield* this._items.map( item => item.name );\n\t}\n\n\t/**\n\t * Checks whether the context ends with the given nodes.\n\t *\n\t *\t\tconst ctx = new SchemaContext( [ rootElement, paragraphElement, textNode ] );\n\t *\n\t *\t\tctx.endsWith( '$text' ); // -> true\n\t *\t\tctx.endsWith( 'paragraph $text' ); // -> true\n\t *\t\tctx.endsWith( '$root' ); // -> false\n\t *\t\tctx.endsWith( 'paragraph' ); // -> false\n\t *\n\t * @param {String} query\n\t * @returns {Boolean}\n\t */\n\tendsWith( query ) {\n\t\treturn Array.from( this.getNames() ).join( ' ' ).endsWith( query );\n\t}\n\n\t/**\n\t * Checks whether the context starts with the given nodes.\n\t *\n\t *\t\tconst ctx = new SchemaContext( [ rootElement, paragraphElement, textNode ] );\n\t *\n\t *\t\tctx.endsWith( '$root' ); // -> true\n\t *\t\tctx.endsWith( '$root paragraph' ); // -> true\n\t *\t\tctx.endsWith( '$text' ); // -> false\n\t *\t\tctx.endsWith( 'paragraph' ); // -> false\n\t *\n\t * @param {String} query\n\t * @returns {Boolean}\n\t */\n\tstartsWith( query ) {\n\t\treturn Array.from( this.getNames() ).join( ' ' ).startsWith( query );\n\t}\n}\n\n/**\n * The definition of a {@link module:engine/model/schema~SchemaContext schema context}.\n *\n * Contexts can be created in multiple ways:\n *\n * * By defining a **node** – in this cases this node and all its ancestors will be used.\n * * By defining a **position** in the document – in this case all its ancestors will be used.\n * * By defining an **array of nodes** – in this case this array defines the entire context.\n * * By defining a **name of node** - in this case node will be \"mocked\". It is not recommended because context\n * will be unrealistic (e.g. attributes of these nodes are not specified). However, at times this may be the only\n * way to define the context (e.g. when checking some hypothetical situation).\n * * By defining an **array of node names** (potentially, mixed with real nodes) – The same as **name of node**\n * but it is possible to create a path.\n * * By defining a {@link module:engine/model/schema~SchemaContext} instance - in this case the same instance as provided\n * will be return.\n *\n * Examples of context definitions passed to the {@link module:engine/model/schema~Schema#checkChild `Schema#checkChild()`}\n * method:\n *\n *\t\t// Assuming that we have a $root > blockQuote > paragraph structure, the following code\n *\t\t// will check node 'foo' in the following context:\n *\t\t// [ rootElement, blockQuoteElement, paragraphElement ]\n *\t\tconst contextDefinition = paragraphElement;\n * \t\tconst childToCheck = 'foo';\n *\t\tschema.checkChild( contextDefinition, childToCheck );\n *\n *\t\t// Also check in [ rootElement, blockQuoteElement, paragraphElement ].\n *\t\tschema.checkChild( model.createPositionAt( paragraphElement, 0 ), 'foo' );\n *\n *\t\t// Check in [ rootElement, paragraphElement ].\n *\t\tschema.checkChild( [ rootElement, paragraphElement ], 'foo' );\n *\n *\t\t// Check only fakeParagraphElement.\n *\t\tschema.checkChild( 'paragraph', 'foo' );\n *\n *\t\t// Check in [ fakeRootElement, fakeBarElement, paragraphElement ].\n *\t\tschema.checkChild( [ '$root', 'bar', paragraphElement ], 'foo' );\n *\n * All these `checkChild()` calls will fire {@link module:engine/model/schema~Schema#event:checkChild `Schema#checkChild`}\n * events in which `args[ 0 ]` is an instance of the context. Therefore, you can write a listener like this:\n *\n *\t\tschema.on( 'checkChild', ( evt, args ) => {\n *\t\t\tconst ctx = args[ 0 ];\n *\n *\t\t\tconsole.log( Array.from( ctx.getNames() ) );\n *\t\t} );\n *\n * Which will log the following:\n *\n *\t\t[ '$root', 'blockQuote', 'paragraph' ]\n *\t\t[ '$root', 'paragraph' ]\n *\t\t[ '$root', 'bar', 'paragraph' ]\n *\n * Note: When using the {@link module:engine/model/schema~Schema#checkAttribute `Schema#checkAttribute()`} method\n * you may want to check whether a text node may have an attribute. A {@link module:engine/model/text~Text} is a\n * correct way to define a context so you can do this:\n *\n *\t\tschema.checkAttribute( textNode, 'bold' );\n *\n * But sometimes you want to check whether a text at a given position might've had some attribute,\n * in which case you can create a context by mixing in an array of elements with a `'$text'` string:\n *\n *\t\t// Check in [ rootElement, paragraphElement, textNode ].\n *\t\tschema.checkChild( [ ...positionInParagraph.getAncestors(), '$text' ], 'bold' );\n *\n * @typedef {module:engine/model/node~Node|module:engine/model/position~Position|module:engine/model/schema~SchemaContext|\n * String|Array.<String|module:engine/model/node~Node>} module:engine/model/schema~SchemaContextDefinition\n */\n\n/**\n * An item of the {@link module:engine/model/schema~SchemaContext schema context}.\n *\n * It contains 3 properties:\n *\n * * `name` – the name of this item,\n * * `* getAttributeKeys()` – a generator of keys of item attributes,\n * * `getAttribute( keyName )` – a method to get attribute values.\n *\n * The context item interface is a highly simplified version of {@link module:engine/model/node~Node} and its role\n * is to expose only the information which schema checks are able to provide (which is the name of the node and\n * node's attributes).\n *\n *\t\tschema.on( 'checkChild', ( evt, args ) => {\n *\t\t\tconst ctx = args[ 0 ];\n *\t\t\tconst firstItem = ctx.getItem( 0 );\n *\n *\t\t\tconsole.log( firstItem.name ); // -> '$root'\n *\t\t\tconsole.log( firstItem.getAttribute( 'foo' ) ); // -> 'bar'\n *\t\t\tconsole.log( Array.from( firstItem.getAttributeKeys() ) ); // -> [ 'foo', 'faa' ]\n *\t\t} );\n *\n * @typedef {Object} module:engine/model/schema~SchemaContextItem\n */\n\n/**\n * A structure containing additional metadata describing the attribute.\n *\n * See {@link module:engine/model/schema~Schema#setAttributeProperties `Schema#setAttributeProperties()`} for usage examples.\n *\n * @typedef {Object} module:engine/model/schema~AttributeProperties\n * @property {Boolean} [isFormatting] Indicates that the attribute should be considered as a visual formatting, like `bold`, `italic` or\n * `fontSize` rather than semantic attribute (such as `src`, `listType`, etc.). For example, it is used by the \"Remove format\" feature.\n * @property {Boolean} [copyOnEnter] Indicates that given text attribute should be copied to the next block when enter is pressed.\n */\n\nfunction compileBaseItemRule( sourceItemRules, itemName ) {\n\tconst itemRule = {\n\t\tname: itemName,\n\n\t\tallowIn: [],\n\t\tallowContentOf: [],\n\t\tallowWhere: [],\n\n\t\tallowAttributes: [],\n\t\tallowAttributesOf: [],\n\n\t\tinheritTypesFrom: []\n\t};\n\n\tcopyTypes( sourceItemRules, itemRule );\n\n\tcopyProperty( sourceItemRules, itemRule, 'allowIn' );\n\tcopyProperty( sourceItemRules, itemRule, 'allowContentOf' );\n\tcopyProperty( sourceItemRules, itemRule, 'allowWhere' );\n\n\tcopyProperty( sourceItemRules, itemRule, 'allowAttributes' );\n\tcopyProperty( sourceItemRules, itemRule, 'allowAttributesOf' );\n\n\tcopyProperty( sourceItemRules, itemRule, 'inheritTypesFrom' );\n\n\tmakeInheritAllWork( sourceItemRules, itemRule );\n\n\treturn itemRule;\n}\n\nfunction compileAllowContentOf( compiledDefinitions, itemName ) {\n\tfor ( const allowContentOfItemName of compiledDefinitions[ itemName ].allowContentOf ) {\n\t\t// The allowContentOf property may point to an unregistered element.\n\t\tif ( compiledDefinitions[ allowContentOfItemName ] ) {\n\t\t\tconst allowedChildren = getAllowedChildren( compiledDefinitions, allowContentOfItemName );\n\n\t\t\tallowedChildren.forEach( allowedItem => {\n\t\t\t\tallowedItem.allowIn.push( itemName );\n\t\t\t} );\n\t\t}\n\t}\n\n\tdelete compiledDefinitions[ itemName ].allowContentOf;\n}\n\nfunction compileAllowWhere( compiledDefinitions, itemName ) {\n\tfor ( const allowWhereItemName of compiledDefinitions[ itemName ].allowWhere ) {\n\t\tconst inheritFrom = compiledDefinitions[ allowWhereItemName ];\n\n\t\t// The allowWhere property may point to an unregistered element.\n\t\tif ( inheritFrom ) {\n\t\t\tconst allowedIn = inheritFrom.allowIn;\n\n\t\t\tcompiledDefinitions[ itemName ].allowIn.push( ...allowedIn );\n\t\t}\n\t}\n\n\tdelete compiledDefinitions[ itemName ].allowWhere;\n}\n\nfunction compileAllowAttributesOf( compiledDefinitions, itemName ) {\n\tfor ( const allowAttributeOfItem of compiledDefinitions[ itemName ].allowAttributesOf ) {\n\t\tconst inheritFrom = compiledDefinitions[ allowAttributeOfItem ];\n\n\t\tif ( inheritFrom ) {\n\t\t\tconst inheritAttributes = inheritFrom.allowAttributes;\n\n\t\t\tcompiledDefinitions[ itemName ].allowAttributes.push( ...inheritAttributes );\n\t\t}\n\t}\n\n\tdelete compiledDefinitions[ itemName ].allowAttributesOf;\n}\n\nfunction compileInheritPropertiesFrom( compiledDefinitions, itemName ) {\n\tconst item = compiledDefinitions[ itemName ];\n\n\tfor ( const inheritPropertiesOfItem of item.inheritTypesFrom ) {\n\t\tconst inheritFrom = compiledDefinitions[ inheritPropertiesOfItem ];\n\n\t\tif ( inheritFrom ) {\n\t\t\tconst typeNames = Object.keys( inheritFrom ).filter( name => name.startsWith( 'is' ) );\n\n\t\t\tfor ( const name of typeNames ) {\n\t\t\t\tif ( !( name in item ) ) {\n\t\t\t\t\titem[ name ] = inheritFrom[ name ];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tdelete item.inheritTypesFrom;\n}\n\n// Remove items which weren't registered (because it may break some checks or we'd need to complicate them).\n// Make sure allowIn doesn't contain repeated values.\nfunction cleanUpAllowIn( compiledDefinitions, itemName ) {\n\tconst itemRule = compiledDefinitions[ itemName ];\n\tconst existingItems = itemRule.allowIn.filter( itemToCheck => compiledDefinitions[ itemToCheck ] );\n\n\titemRule.allowIn = Array.from( new Set( existingItems ) );\n}\n\nfunction cleanUpAllowAttributes( compiledDefinitions, itemName ) {\n\tconst itemRule = compiledDefinitions[ itemName ];\n\n\titemRule.allowAttributes = Array.from( new Set( itemRule.allowAttributes ) );\n}\n\nfunction copyTypes( sourceItemRules, itemRule ) {\n\tfor ( const sourceItemRule of sourceItemRules ) {\n\t\tconst typeNames = Object.keys( sourceItemRule ).filter( name => name.startsWith( 'is' ) );\n\n\t\tfor ( const name of typeNames ) {\n\t\t\titemRule[ name ] = sourceItemRule[ name ];\n\t\t}\n\t}\n}\n\nfunction copyProperty( sourceItemRules, itemRule, propertyName ) {\n\tfor ( const sourceItemRule of sourceItemRules ) {\n\t\tif ( typeof sourceItemRule[ propertyName ] == 'string' ) {\n\t\t\titemRule[ propertyName ].push( sourceItemRule[ propertyName ] );\n\t\t} else if ( Array.isArray( sourceItemRule[ propertyName ] ) ) {\n\t\t\titemRule[ propertyName ].push( ...sourceItemRule[ propertyName ] );\n\t\t}\n\t}\n}\n\nfunction makeInheritAllWork( sourceItemRules, itemRule ) {\n\tfor ( const sourceItemRule of sourceItemRules ) {\n\t\tconst inheritFrom = sourceItemRule.inheritAllFrom;\n\n\t\tif ( inheritFrom ) {\n\t\t\titemRule.allowContentOf.push( inheritFrom );\n\t\t\titemRule.allowWhere.push( inheritFrom );\n\t\t\titemRule.allowAttributesOf.push( inheritFrom );\n\t\t\titemRule.inheritTypesFrom.push( inheritFrom );\n\t\t}\n\t}\n}\n\nfunction getAllowedChildren( compiledDefinitions, itemName ) {\n\tconst itemRule = compiledDefinitions[ itemName ];\n\n\treturn getValues( compiledDefinitions ).filter( def => def.allowIn.includes( itemRule.name ) );\n}\n\nfunction getValues( obj ) {\n\treturn Object.keys( obj ).map( key => obj[ key ] );\n}\n\nfunction mapContextItem( ctxItem ) {\n\tif ( typeof ctxItem == 'string' ) {\n\t\treturn {\n\t\t\tname: ctxItem,\n\n\t\t\t* getAttributeKeys() {},\n\n\t\t\tgetAttribute() {}\n\t\t};\n\t} else {\n\t\treturn {\n\t\t\t// '$text' means text nodes and text proxies.\n\t\t\tname: ctxItem.is( 'element' ) ? ctxItem.name : '$text',\n\n\t\t\t* getAttributeKeys() {\n\t\t\t\tyield* ctxItem.getAttributeKeys();\n\t\t\t},\n\n\t\t\tgetAttribute( key ) {\n\t\t\t\treturn ctxItem.getAttribute( key );\n\t\t\t}\n\t\t};\n\t}\n}\n\n// Generator function returning values from provided walkers, switching between them at each iteration. If only one walker\n// is provided it will return data only from that walker.\n//\n// @param {module:engine/module/treewalker~TreeWalker} [backward] Walker iterating in backward direction.\n// @param {module:engine/module/treewalker~TreeWalker} [forward] Walker iterating in forward direction.\n// @returns {Iterable.<Object>} Object returned at each iteration contains `value` and `walker` (informing which walker returned\n// given value) fields.\nfunction* combineWalkers( backward, forward ) {\n\tlet done = false;\n\n\twhile ( !done ) {\n\t\tdone = true;\n\n\t\tif ( backward ) {\n\t\t\tconst step = backward.next();\n\n\t\t\tif ( !step.done ) {\n\t\t\t\tdone = false;\n\t\t\t\tyield {\n\t\t\t\t\twalker: backward,\n\t\t\t\t\tvalue: step.value\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\tif ( forward ) {\n\t\t\tconst step = forward.next();\n\n\t\t\tif ( !step.done ) {\n\t\t\t\tdone = false;\n\t\t\t\tyield {\n\t\t\t\t\twalker: forward,\n\t\t\t\t\tvalue: step.value\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t}\n}\n\n// Takes an array of non-intersecting ranges. For each of them gets minimal flat ranges covering that range and returns\n// all those minimal flat ranges.\n//\n// @param {Array.<module:engine/model/range~Range>} ranges Ranges to process.\n// @returns {Iterable.<module:engine/model/range~Range>} Minimal flat ranges of given `ranges`.\nfunction* convertToMinimalFlatRanges( ranges ) {\n\tfor ( const range of ranges ) {\n\t\tyield* range.getMinimalFlatRanges();\n\t}\n}\n\nfunction removeDisallowedAttributeFromNode( schema, node, writer ) {\n\tfor ( const attribute of node.getAttributeKeys() ) {\n\t\tif ( !schema.checkAttribute( node, attribute ) ) {\n\t\t\twriter.removeAttribute( attribute, node );\n\t\t}\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/conversion/upcastdispatcher\n */\n\nimport ViewConsumable from './viewconsumable';\nimport ModelRange from '../model/range';\nimport ModelPosition from '../model/position';\nimport { SchemaContext } from '../model/schema';\nimport { isParagraphable, wrapInParagraph } from '../model/utils/autoparagraphing';\n\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport EmitterMixin from '@ckeditor/ckeditor5-utils/src/emittermixin';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\n\n/**\n * Upcast dispatcher is a central point of the view-to-model conversion, which is a process of\n * converting a given {@link module:engine/view/documentfragment~DocumentFragment view document fragment} or\n * {@link module:engine/view/element~Element view element} into a correct model structure.\n *\n * During the conversion process, the dispatcher fires events for all {@link module:engine/view/node~Node view nodes}\n * from the converted view document fragment.\n * Special callbacks called \"converters\" should listen to these events in order to convert the view nodes.\n *\n * The second parameter of the callback is the `data` object with the following properties:\n *\n * * `data.viewItem` contains a {@link module:engine/view/node~Node view node} or a\n * {@link module:engine/view/documentfragment~DocumentFragment view document fragment}\n * that is converted at the moment and might be handled by the callback.\n * * `data.modelRange` is used to point to the result\n * of the current conversion (e.g. the element that is being inserted)\n * and is always a {@link module:engine/model/range~Range} when the conversion succeeds.\n * * `data.modelCursor` is a {@link module:engine/model/position~Position position} on which the converter should insert\n * the newly created items.\n *\n * The third parameter of the callback is an instance of {@link module:engine/conversion/upcastdispatcher~UpcastConversionApi}\n * which provides additional tools for converters.\n *\n * You can read more about conversion in the following guides:\n *\n * * {@glink framework/guides/deep-dive/conversion/conversion-introduction Advanced conversion concepts &mdash; attributes}\n * * {@glink framework/guides/deep-dive/conversion/custom-element-conversion Custom element conversion}\n *\n * Examples of event-based converters:\n *\n *\t\t// A converter for links (<a>).\n *\t\teditor.data.upcastDispatcher.on( 'element:a', ( evt, data, conversionApi ) => {\n *\t\t\tif ( conversionApi.consumable.consume( data.viewItem, { name: true, attributes: [ 'href' ] } ) ) {\n *\t\t\t\t// The <a> element is inline and is represented by an attribute in the model.\n *\t\t\t\t// This is why you need to convert only children.\n *\t\t\t\tconst { modelRange } = conversionApi.convertChildren( data.viewItem, data.modelCursor );\n *\n *\t\t\t\tfor ( let item of modelRange.getItems() ) {\n *\t\t\t\t\tif ( conversionApi.schema.checkAttribute( item, 'linkHref' ) ) {\n *\t\t\t\t\t\tconversionApi.writer.setAttribute( 'linkHref', data.viewItem.getAttribute( 'href' ), item );\n *\t\t\t\t\t}\n *\t\t\t\t}\n *\t\t\t}\n *\t\t} );\n *\n *\t\t// Convert <p> element's font-size style.\n *\t\t// Note: You should use a low-priority observer in order to ensure that\n *\t\t// it is executed after the element-to-element converter.\n *\t\teditor.data.upcastDispatcher.on( 'element:p', ( evt, data, conversionApi ) => {\n *\t\t\tconst { consumable, schema, writer } = conversionApi;\n *\n *\t\t\tif ( !consumable.consume( data.viewItem, { style: 'font-size' } ) ) {\n *\t\t\t\treturn;\n *\t\t\t}\n *\n *\t\t\tconst fontSize = data.viewItem.getStyle( 'font-size' );\n *\n *\t\t\t// Do not go for the model element after data.modelCursor because it might happen\n *\t\t\t// that a single view element was converted to multiple model elements. Get all of them.\n *\t\t\tfor ( const item of data.modelRange.getItems( { shallow: true } ) ) {\n *\t\t\t\tif ( schema.checkAttribute( item, 'fontSize' ) ) {\n *\t\t\t\t\twriter.setAttribute( 'fontSize', fontSize, item );\n *\t\t\t\t}\n *\t\t\t}\n *\t\t}, { priority: 'low' } );\n *\n *\t\t// Convert all elements which have no custom converter into a paragraph (autoparagraphing).\n *\t\teditor.data.upcastDispatcher.on( 'element', ( evt, data, conversionApi ) => {\n *\t\t\t// Check if an element can be converted.\n *\t\t\tif ( !conversionApi.consumable.test( data.viewItem, { name: data.viewItem.name } ) ) {\n *\t\t\t\t// When an element is already consumed by higher priority converters, do nothing.\n *\t\t\t\treturn;\n *\t\t\t}\n *\n *\t\t\tconst paragraph = conversionApi.writer.createElement( 'paragraph' );\n *\n *\t\t\t// Try to safely insert a paragraph at the model cursor - it will find an allowed parent for the current element.\n *\t\t\tif ( !conversionApi.safeInsert( paragraph, data.modelCursor ) ) {\n *\t\t\t\t// When an element was not inserted, it means that you cannot insert a paragraph at this position.\n *\t\t\t\treturn;\n *\t\t\t}\n *\n *\t\t\t// Consume the inserted element.\n *\t\t\tconversionApi.consumable.consume( data.viewItem, { name: data.viewItem.name } ) );\n *\n *\t\t\t// Convert the children to a paragraph.\n *\t\t\tconst { modelRange } = conversionApi.convertChildren( data.viewItem,  paragraph ) );\n *\n *\t\t\t// Update `modelRange` and `modelCursor` in the `data` as a conversion result.\n *\t\t\tconversionApi.updateConversionResult( paragraph, data );\n *\t\t}, { priority: 'low' } );\n *\n * @mixes module:utils/emittermixin~EmitterMixin\n * @fires viewCleanup\n * @fires element\n * @fires text\n * @fires documentFragment\n */\nexport default class UpcastDispatcher {\n\t/**\n\t * Creates an upcast dispatcher that operates using the passed API.\n\t *\n\t * @see module:engine/conversion/upcastdispatcher~UpcastConversionApi\n\t * @param {Object} [conversionApi] Additional properties for an interface that will be passed to events fired\n\t * by the upcast dispatcher.\n\t */\n\tconstructor( conversionApi = {} ) {\n\t\t/**\n\t\t * The list of elements that were created during splitting.\n\t\t *\n\t\t * After the conversion process the list is cleared.\n\t\t *\n\t\t * @private\n\t\t * @type {Map.<module:engine/model/element~Element,Array.<module:engine/model/element~Element>>}\n\t\t */\n\t\tthis._splitParts = new Map();\n\n\t\t/**\n\t\t * The list of cursor parent elements that were created during splitting.\n\t\t *\n\t\t * After the conversion process the list is cleared.\n\t\t *\n\t\t * @private\n\t\t * @type {Map.<module:engine/model/element~Element,Array.<module:engine/model/element~Element>>}\n\t\t */\n\t\tthis._cursorParents = new Map();\n\n\t\t/**\n\t\t * The position in the temporary structure where the converted content is inserted. The structure reflects the context of\n\t\t * the target position where the content will be inserted. This property is built based on the context parameter of the\n\t\t * convert method.\n\t\t *\n\t\t * @private\n\t\t * @type {module:engine/model/position~Position|null}\n\t\t */\n\t\tthis._modelCursor = null;\n\n\t\t/**\n\t\t * An interface passed by the dispatcher to the event callbacks.\n\t\t *\n\t\t * @member {module:engine/conversion/upcastdispatcher~UpcastConversionApi}\n\t\t */\n\t\tthis.conversionApi = Object.assign( {}, conversionApi );\n\n\t\t// The below methods are bound to this `UpcastDispatcher` instance and set on `conversionApi`.\n\t\t// This way only a part of `UpcastDispatcher` API is exposed.\n\t\tthis.conversionApi.convertItem = this._convertItem.bind( this );\n\t\tthis.conversionApi.convertChildren = this._convertChildren.bind( this );\n\t\tthis.conversionApi.safeInsert = this._safeInsert.bind( this );\n\t\tthis.conversionApi.updateConversionResult = this._updateConversionResult.bind( this );\n\t\t// Advanced API - use only if custom position handling is needed.\n\t\tthis.conversionApi.splitToAllowedParent = this._splitToAllowedParent.bind( this );\n\t\tthis.conversionApi.getSplitParts = this._getSplitParts.bind( this );\n\t}\n\n\t/**\n\t * Starts the conversion process. The entry point for the conversion.\n\t *\n\t * @fires element\n\t * @fires text\n\t * @fires documentFragment\n\t * @param {module:engine/view/documentfragment~DocumentFragment|module:engine/view/element~Element} viewItem\n\t * The part of the view to be converted.\n\t * @param {module:engine/model/writer~Writer} writer An instance of the model writer.\n\t * @param {module:engine/model/schema~SchemaContextDefinition} [context=['$root']] Elements will be converted according to this context.\n\t * @returns {module:engine/model/documentfragment~DocumentFragment} Model data that is the result of the conversion process\n\t * wrapped in `DocumentFragment`. Converted marker elements will be set as the document fragment's\n\t * {@link module:engine/model/documentfragment~DocumentFragment#markers static markers map}.\n\t */\n\tconvert( viewItem, writer, context = [ '$root' ] ) {\n\t\tthis.fire( 'viewCleanup', viewItem );\n\n\t\t// Create context tree and set position in the top element.\n\t\t// Items will be converted according to this position.\n\t\tthis._modelCursor = createContextTree( context, writer );\n\n\t\t// Store writer in conversion as a conversion API\n\t\t// to be sure that conversion process will use the same batch.\n\t\tthis.conversionApi.writer = writer;\n\n\t\t// Create consumable values list for conversion process.\n\t\tthis.conversionApi.consumable = ViewConsumable.createFrom( viewItem );\n\n\t\t// Custom data stored by converter for conversion process.\n\t\tthis.conversionApi.store = {};\n\n\t\t// Do the conversion.\n\t\tconst { modelRange } = this._convertItem( viewItem, this._modelCursor );\n\n\t\t// Conversion result is always a document fragment so let's create it.\n\t\tconst documentFragment = writer.createDocumentFragment();\n\n\t\t// When there is a conversion result.\n\t\tif ( modelRange ) {\n\t\t\t// Remove all empty elements that were create while splitting.\n\t\t\tthis._removeEmptyElements();\n\n\t\t\t// Move all items that were converted in context tree to the document fragment.\n\t\t\tfor ( const item of Array.from( this._modelCursor.parent.getChildren() ) ) {\n\t\t\t\twriter.append( item, documentFragment );\n\t\t\t}\n\n\t\t\t// Extract temporary markers elements from model and set as static markers collection.\n\t\t\tdocumentFragment.markers = extractMarkersFromModelFragment( documentFragment, writer );\n\t\t}\n\n\t\t// Clear context position.\n\t\tthis._modelCursor = null;\n\n\t\t// Clear split elements & parents lists.\n\t\tthis._splitParts.clear();\n\t\tthis._cursorParents.clear();\n\n\t\t// Clear conversion API.\n\t\tthis.conversionApi.writer = null;\n\t\tthis.conversionApi.store = null;\n\n\t\t// Return fragment as conversion result.\n\t\treturn documentFragment;\n\t}\n\n\t/**\n\t * @private\n\t * @see module:engine/conversion/upcastdispatcher~UpcastConversionApi#convertItem\n\t */\n\t_convertItem( viewItem, modelCursor ) {\n\t\tconst data = Object.assign( { viewItem, modelCursor, modelRange: null } );\n\n\t\tif ( viewItem.is( 'element' ) ) {\n\t\t\tthis.fire( 'element:' + viewItem.name, data, this.conversionApi );\n\t\t} else if ( viewItem.is( '$text' ) ) {\n\t\t\tthis.fire( 'text', data, this.conversionApi );\n\t\t} else {\n\t\t\tthis.fire( 'documentFragment', data, this.conversionApi );\n\t\t}\n\n\t\t// Handle incorrect conversion result.\n\t\tif ( data.modelRange && !( data.modelRange instanceof ModelRange ) ) {\n\t\t\t/**\n\t\t\t * Incorrect conversion result was dropped.\n\t\t\t *\n\t\t\t * {@link module:engine/model/range~Range Model range} should be a conversion result.\n\t\t\t *\n\t\t\t * @error view-conversion-dispatcher-incorrect-result\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'view-conversion-dispatcher-incorrect-result', this );\n\t\t}\n\n\t\treturn { modelRange: data.modelRange, modelCursor: data.modelCursor };\n\t}\n\n\t/**\n\t * @private\n\t * @see module:engine/conversion/upcastdispatcher~UpcastConversionApi#convertChildren\n\t */\n\t_convertChildren( viewItem, elementOrModelCursor ) {\n\t\tlet nextModelCursor = elementOrModelCursor.is( 'position' ) ?\n\t\t\telementOrModelCursor : ModelPosition._createAt( elementOrModelCursor, 0 );\n\n\t\tconst modelRange = new ModelRange( nextModelCursor );\n\n\t\tfor ( const viewChild of Array.from( viewItem.getChildren() ) ) {\n\t\t\tconst result = this._convertItem( viewChild, nextModelCursor );\n\n\t\t\tif ( result.modelRange instanceof ModelRange ) {\n\t\t\t\tmodelRange.end = result.modelRange.end;\n\t\t\t\tnextModelCursor = result.modelCursor;\n\t\t\t}\n\t\t}\n\n\t\treturn { modelRange, modelCursor: nextModelCursor };\n\t}\n\n\t/**\n\t * @private\n\t * @see module:engine/conversion/upcastdispatcher~UpcastConversionApi#safeInsert\n\t */\n\t_safeInsert( modelElement, position ) {\n\t\t// Find allowed parent for element that we are going to insert.\n\t\t// If current parent does not allow to insert element but one of the ancestors does\n\t\t// then split nodes to allowed parent.\n\t\tconst splitResult = this._splitToAllowedParent( modelElement, position );\n\n\t\t// When there is no split result it means that we can't insert element to model tree, so let's skip it.\n\t\tif ( !splitResult ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Insert element on allowed position.\n\t\tthis.conversionApi.writer.insert( modelElement, splitResult.position );\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * @private\n\t * @see module:engine/conversion/upcastdispatcher~UpcastConversionApi#updateConversionResult\n\t */\n\t_updateConversionResult( modelElement, data ) {\n\t\tconst parts = this._getSplitParts( modelElement );\n\n\t\tconst writer = this.conversionApi.writer;\n\n\t\t// Set conversion result range - only if not set already.\n\t\tif ( !data.modelRange ) {\n\t\t\tdata.modelRange = writer.createRange(\n\t\t\t\twriter.createPositionBefore( modelElement ),\n\t\t\t\twriter.createPositionAfter( parts[ parts.length - 1 ] )\n\t\t\t);\n\t\t}\n\n\t\tconst savedCursorParent = this._cursorParents.get( modelElement );\n\n\t\t// Now we need to check where the `modelCursor` should be.\n\t\tif ( savedCursorParent ) {\n\t\t\t// If we split parent to insert our element then we want to continue conversion in the new part of the split parent.\n\t\t\t//\n\t\t\t// before: <allowed><notAllowed>foo[]</notAllowed></allowed>\n\t\t\t// after:  <allowed><notAllowed>foo</notAllowed> <converted></converted> <notAllowed>[]</notAllowed></allowed>\n\n\t\t\tdata.modelCursor = writer.createPositionAt( savedCursorParent, 0 );\n\t\t} else {\n\t\t\t// Otherwise just continue after inserted element.\n\n\t\t\tdata.modelCursor = data.modelRange.end;\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t * @see module:engine/conversion/upcastdispatcher~UpcastConversionApi#splitToAllowedParent\n\t */\n\t_splitToAllowedParent( node, modelCursor ) {\n\t\tconst { schema, writer } = this.conversionApi;\n\n\t\t// Try to find allowed parent.\n\t\tlet allowedParent = schema.findAllowedParent( modelCursor, node );\n\n\t\tif ( allowedParent ) {\n\t\t\t// When current position parent allows to insert node then return this position.\n\t\t\tif ( allowedParent === modelCursor.parent ) {\n\t\t\t\treturn { position: modelCursor };\n\t\t\t}\n\n\t\t\t// When allowed parent is in context tree (it's outside the converted tree).\n\t\t\tif ( this._modelCursor.parent.getAncestors().includes( allowedParent ) ) {\n\t\t\t\tallowedParent = null;\n\t\t\t}\n\t\t}\n\n\t\tif ( !allowedParent ) {\n\t\t\t// Check if the node wrapped with a paragraph would be accepted by the schema.\n\t\t\tif ( !isParagraphable( modelCursor, node, schema ) ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tposition: wrapInParagraph( modelCursor, writer )\n\t\t\t};\n\t\t}\n\n\t\t// Split element to allowed parent.\n\t\tconst splitResult = this.conversionApi.writer.split( modelCursor, allowedParent );\n\n\t\t// Using the range returned by `model.Writer#split`, we will pair original elements with their split parts.\n\t\t//\n\t\t// The range returned from the writer spans \"over the split\" or, precisely saying, from the end of the original element (the one\n\t\t// that got split) to the beginning of the other part of that element:\n\t\t//\n\t\t// <limit><a><b><c>X[]Y</c></b><a></limit> ->\n\t\t// <limit><a><b><c>X[</c></b></a><a><b><c>]Y</c></b></a>\n\t\t//\n\t\t// After the split there cannot be any full node between the positions in `splitRange`. The positions are touching.\n\t\t// Also, because of how splitting works, it is easy to notice, that \"closing tags\" are in the reverse order than \"opening tags\".\n\t\t// Also, since we split all those elements, each of them has to have the other part.\n\t\t//\n\t\t// With those observations in mind, we will pair the original elements with their split parts by saving \"closing tags\" and matching\n\t\t// them with \"opening tags\" in the reverse order. For that we can use a stack.\n\t\tconst stack = [];\n\n\t\tfor ( const treeWalkerValue of splitResult.range.getWalker() ) {\n\t\t\tif ( treeWalkerValue.type == 'elementEnd' ) {\n\t\t\t\tstack.push( treeWalkerValue.item );\n\t\t\t} else {\n\t\t\t\t// There should not be any text nodes after the element is split, so the only other value is `elementStart`.\n\t\t\t\tconst originalPart = stack.pop();\n\t\t\t\tconst splitPart = treeWalkerValue.item;\n\n\t\t\t\tthis._registerSplitPair( originalPart, splitPart );\n\t\t\t}\n\t\t}\n\n\t\tconst cursorParent = splitResult.range.end.parent;\n\t\tthis._cursorParents.set( node, cursorParent );\n\n\t\treturn {\n\t\t\tposition: splitResult.position,\n\t\t\tcursorParent\n\t\t};\n\t}\n\n\t/**\n\t * Registers that a `splitPart` element is a split part of the `originalPart` element.\n\t *\n\t * The data set by this method is used by {@link #_getSplitParts} and {@link #_removeEmptyElements}.\n\t *\n\t * @private\n\t * @param {module:engine/model/element~Element} originalPart\n\t * @param {module:engine/model/element~Element} splitPart\n\t */\n\t_registerSplitPair( originalPart, splitPart ) {\n\t\tif ( !this._splitParts.has( originalPart ) ) {\n\t\t\tthis._splitParts.set( originalPart, [ originalPart ] );\n\t\t}\n\n\t\tconst list = this._splitParts.get( originalPart );\n\n\t\tthis._splitParts.set( splitPart, list );\n\t\tlist.push( splitPart );\n\t}\n\n\t/**\n\t * @private\n\t * @see module:engine/conversion/upcastdispatcher~UpcastConversionApi#getSplitParts\n\t */\n\t_getSplitParts( element ) {\n\t\tlet parts;\n\n\t\tif ( !this._splitParts.has( element ) ) {\n\t\t\tparts = [ element ];\n\t\t} else {\n\t\t\tparts = this._splitParts.get( element );\n\t\t}\n\n\t\treturn parts;\n\t}\n\n\t/**\n\t * Checks if there are any empty elements created while splitting and removes them.\n\t *\n\t * This method works recursively to re-check empty elements again after at least one element was removed in the initial call,\n\t * as some elements might have become empty after other empty elements were removed from them.\n\t *\n\t * @private\n\t */\n\t_removeEmptyElements() {\n\t\tlet anyRemoved = false;\n\n\t\tfor ( const element of this._splitParts.keys() ) {\n\t\t\tif ( element.isEmpty ) {\n\t\t\t\tthis.conversionApi.writer.remove( element );\n\t\t\t\tthis._splitParts.delete( element );\n\n\t\t\t\tanyRemoved = true;\n\t\t\t}\n\t\t}\n\n\t\tif ( anyRemoved ) {\n\t\t\tthis._removeEmptyElements();\n\t\t}\n\t}\n\n\t/**\n\t * Fired before the first conversion event, at the beginning of the upcast (view-to-model conversion) process.\n\t *\n\t * @event viewCleanup\n\t * @param {module:engine/view/documentfragment~DocumentFragment|module:engine/view/element~Element}\n\t * viewItem A part of the view to be converted.\n\t */\n\n\t/**\n\t * Fired when an {@link module:engine/view/element~Element} is converted.\n\t *\n\t * `element` is a namespace event for a class of events. Names of actually called events follow the pattern of\n\t * `element:<elementName>` where `elementName` is the name of the converted element. This way listeners may listen to\n\t * a conversion of all or just specific elements.\n\t *\n\t * @event element\n\t * @param {module:engine/conversion/upcastdispatcher~UpcastConversionData} data The conversion data. Keep in mind that this object is\n\t * shared by reference between all callbacks that will be called. This means that callbacks can override values if needed, and these\n\t * values will be available in other callbacks.\n\t * @param {module:engine/conversion/upcastdispatcher~UpcastConversionApi} conversionApi Conversion utilities to be used by the\n\t * callback.\n\t */\n\n\t/**\n\t * Fired when a {@link module:engine/view/text~Text} is converted.\n\t *\n\t * @event text\n\t * @see #event:element\n\t */\n\n\t/**\n\t * Fired when a {@link module:engine/view/documentfragment~DocumentFragment} is converted.\n\t *\n\t * @event documentFragment\n\t * @see #event:element\n\t */\n}\n\nmix( UpcastDispatcher, EmitterMixin );\n\n// Traverses given model item and searches elements which marks marker range. Found element is removed from\n// DocumentFragment but path of this element is stored in a Map which is then returned.\n//\n// @param {module:engine/view/documentfragment~DocumentFragment|module:engine/view/node~Node} modelItem Fragment of model.\n// @returns {Map<String, module:engine/model/range~Range>} List of static markers.\nfunction extractMarkersFromModelFragment( modelItem, writer ) {\n\tconst markerElements = new Set();\n\tconst markers = new Map();\n\n\t// Create ModelTreeWalker.\n\tconst range = ModelRange._createIn( modelItem ).getItems();\n\n\t// Walk through DocumentFragment and collect marker elements.\n\tfor ( const item of range ) {\n\t\t// Check if current element is a marker.\n\t\tif ( item.name == '$marker' ) {\n\t\t\tmarkerElements.add( item );\n\t\t}\n\t}\n\n\t// Walk through collected marker elements store its path and remove its from the DocumentFragment.\n\tfor ( const markerElement of markerElements ) {\n\t\tconst markerName = markerElement.getAttribute( 'data-name' );\n\t\tconst currentPosition = writer.createPositionBefore( markerElement );\n\n\t\t// When marker of given name is not stored it means that we have found the beginning of the range.\n\t\tif ( !markers.has( markerName ) ) {\n\t\t\tmarkers.set( markerName, new ModelRange( currentPosition.clone() ) );\n\t\t// Otherwise is means that we have found end of the marker range.\n\t\t} else {\n\t\t\tmarkers.get( markerName ).end = currentPosition.clone();\n\t\t}\n\n\t\t// Remove marker element from DocumentFragment.\n\t\twriter.remove( markerElement );\n\t}\n\n\treturn markers;\n}\n\n// Creates model fragment according to given context and returns position in the bottom (the deepest) element.\nfunction createContextTree( contextDefinition, writer ) {\n\tlet position;\n\n\tfor ( const item of new SchemaContext( contextDefinition ) ) {\n\t\tconst attributes = {};\n\n\t\tfor ( const key of item.getAttributeKeys() ) {\n\t\t\tattributes[ key ] = item.getAttribute( key );\n\t\t}\n\n\t\tconst current = writer.createElement( item.name, attributes );\n\n\t\tif ( position ) {\n\t\t\twriter.append( current, position );\n\t\t}\n\n\t\tposition = ModelPosition._createAt( current, 0 );\n\t}\n\n\treturn position;\n}\n\n/**\n * A set of conversion utilities available as the third parameter of the\n * {@link module:engine/conversion/upcastdispatcher~UpcastDispatcher upcast dispatcher}'s events.\n *\n * @interface module:engine/conversion/upcastdispatcher~UpcastConversionApi\n */\n\n/**\n * Starts the conversion of a given item by firing an appropriate event.\n *\n * Every fired event is passed (as the first parameter) an object with the `modelRange` property. Every event may set and/or\n * modify that property. When all callbacks are done, the final value of the `modelRange` property is returned by this method.\n * The `modelRange` must be a {@link module:engine/model/range~Range model range} or `null` (as set by default).\n *\n * @method #convertItem\n * @fires module:engine/conversion/upcastdispatcher~UpcastDispatcher#event:element\n * @fires module:engine/conversion/upcastdispatcher~UpcastDispatcher#event:text\n * @fires module:engine/conversion/upcastdispatcher~UpcastDispatcher#event:documentFragment\n * @param {module:engine/view/item~Item} viewItem Item to convert.\n * @param {module:engine/model/position~Position} modelCursor The conversion position.\n * @returns {Object} result The conversion result.\n * @returns {module:engine/model/range~Range|null} result.modelRange The model range containing the result of the item conversion,\n * created and modified by callbacks attached to the fired event, or `null` if the conversion result was incorrect.\n * @returns {module:engine/model/position~Position} result.modelCursor The position where the conversion should be continued.\n */\n\n/**\n * Starts the conversion of all children of a given item by firing appropriate events for all the children.\n *\n * @method #convertChildren\n * @fires module:engine/conversion/upcastdispatcher~UpcastDispatcher#event:element\n * @fires module:engine/conversion/upcastdispatcher~UpcastDispatcher#event:text\n * @fires module:engine/conversion/upcastdispatcher~UpcastDispatcher#event:documentFragment\n * @param {module:engine/view/item~Item} viewItem An element whose children should be converted.\n * @param {module:engine/model/position~Position|module:engine/model/element~Element} positionOrElement A position or an element of\n * the conversion.\n * @returns {Object} result The conversion result.\n * @returns {module:engine/model/range~Range} result.modelRange The model range containing the results of the conversion of all children\n * of the given item. When no child was converted, the range is collapsed.\n * @returns {module:engine/model/position~Position} result.modelCursor The position where the conversion should be continued.\n */\n\n/**\n * Safely inserts an element to the document, checking the {@link module:engine/model/schema~Schema schema} to find an allowed parent for\n * an element that you are going to insert, starting from the given position. If the current parent does not allow to insert the element\n * but one of the ancestors does, then splits the nodes to allowed parent.\n *\n * If the schema allows to insert the node in a given position, nothing is split.\n *\n * If it was not possible to find an allowed parent, `false` is returned and nothing is split.\n *\n * Otherwise, ancestors are split.\n *\n * For instance, if `<image>` is not allowed in `<paragraph>` but is allowed in `$root`:\n *\n *\t\t<paragraph>foo[]bar</paragraph>\n *\n *\t\t-> safe insert for `<image>` will split ->\n *\n *\t\t<paragraph>foo</paragraph>[]<paragraph>bar</paragraph>\n *\n * Example usage:\n *\n *\t\tconst myElement = conversionApi.writer.createElement( 'myElement' );\n *\n *\t\tif ( !conversionApi.safeInsert( myElement, data.modelCursor ) ) {\n *\t\t\treturn;\n *\t\t}\n *\n * The split result is saved and {@link #updateConversionResult} should be used to update the\n * {@link module:engine/conversion/upcastdispatcher~UpcastConversionData conversion data}.\n *\n * @method #safeInsert\n * @param {module:engine/model/node~Node} node The node to insert.\n * @param {module:engine/model/position~Position} position The position where an element is going to be inserted.\n * @returns {Boolean} The split result. If it was not possible to find an allowed position, `false` is returned.\n */\n\n/**\n * Updates the conversion result and sets a proper {@link module:engine/conversion/upcastdispatcher~UpcastConversionData#modelRange} and\n * the next {@link module:engine/conversion/upcastdispatcher~UpcastConversionData#modelCursor} after the conversion.\n * Used together with {@link #safeInsert}, it enables you to easily convert elements without worrying if the node was split\n * during the conversion of its children.\n *\n * A usage example in converter code:\n *\n *\t\tconst myElement = conversionApi.writer.createElement( 'myElement' );\n *\n *\t\tif ( !conversionApi.safeInsert( myElement, data.modelCursor ) ) {\n *\t\t\treturn;\n *\t\t}\n *\n *\t\t// Children conversion may split `myElement`.\n *\t\tconversionApi.convertChildren( data.viewItem, myElement );\n *\n *\t\tconversionApi.updateConversionResult( myElement, data );\n *\n * @method #updateConversionResult\n * @param {module:engine/model/element~Element} element\n * @param {module:engine/conversion/upcastdispatcher~UpcastConversionData} data Conversion data.\n * @param {module:engine/conversion/upcastdispatcher~UpcastConversionApi} conversionApi Conversion utilities to be used by the callback.\n */\n\n/**\n * Checks the {@link module:engine/model/schema~Schema schema} to find an allowed parent for an element that is going to be inserted\n * starting from the given position. If the current parent does not allow inserting an element but one of the ancestors does, the method\n * splits nodes to allowed parent.\n *\n * If the schema allows inserting the node in the given position, nothing is split and an object with that position is returned.\n *\n * If it was not possible to find an allowed parent, `null` is returned and nothing is split.\n *\n * Otherwise, ancestors are split and an object with a position and the copy of the split element is returned.\n *\n * For instance, if `<image>` is not allowed in `<paragraph>` but is allowed in `$root`:\n *\n *\t\t<paragraph>foo[]bar</paragraph>\n *\n *\t\t-> split for `<image>` ->\n *\n *\t\t<paragraph>foo</paragraph>[]<paragraph>bar</paragraph>\n *\n * In the example above, the position between `<paragraph>` elements will be returned as `position` and the second `paragraph`\n * as `cursorParent`.\n *\n * **Note:** This is an advanced method. For most cases {@link #safeInsert} and {@link #updateConversionResult} should be used.\n *\n * @method #splitToAllowedParent\n * @param {module:engine/model/position~Position} position The position where the element is going to be inserted.\n * @param {module:engine/model/node~Node} node The node to insert.\n * @returns {Object|null} The split result. If it was not possible to find an allowed position, `null` is returned.\n * @returns {module:engine/model/position~Position} The position between split elements.\n * @returns {module:engine/model/element~Element} [cursorParent] The element inside which the cursor should be placed to\n * continue the conversion. When the element is not defined it means that there was no split.\n */\n\n/**\n * Returns all the split parts of the given `element` that were created during upcasting through using {@link #splitToAllowedParent}.\n * It enables you to easily track these elements and continue processing them after they are split during the conversion of their children.\n *\n *\t\t<paragraph>Foo<image />bar<image />baz</paragraph> ->\n *\t\t<paragraph>Foo</paragraph><image /><paragraph>bar</paragraph><image /><paragraph>baz</paragraph>\n *\n * For a reference to any of above paragraphs, the function will return all three paragraphs (the original element included),\n * sorted in the order of their creation (the original element is the first one).\n *\n * If the given `element` was not split, an array with a single element is returned.\n *\n * A usage example in the converter code:\n *\n *\t\tconst myElement = conversionApi.writer.createElement( 'myElement' );\n *\n *\t\t// Children conversion may split `myElement`.\n *\t\tconversionApi.convertChildren( data.viewItem, data.modelCursor );\n *\n *\t\tconst splitParts = conversionApi.getSplitParts( myElement );\n *\t\tconst lastSplitPart = splitParts[ splitParts.length - 1 ];\n *\n *\t\t// Setting `data.modelRange` basing on split parts:\n *\t\tdata.modelRange = conversionApi.writer.createRange(\n *\t\t\tconversionApi.writer.createPositionBefore( myElement ),\n *\t\t\tconversionApi.writer.createPositionAfter( lastSplitPart )\n *\t\t);\n *\n *\t\t// Setting `data.modelCursor` to continue after the last split element:\n *\t\tdata.modelCursor = conversionApi.writer.createPositionAfter( lastSplitPart );\n *\n * **Tip:** If you are unable to get a reference to the original element (for example because the code is split into multiple converters\n * or even classes) but it has already been converted, you may want to check the first element in `data.modelRange`. This is a common\n * situation if an attribute converter is separated from an element converter.\n *\n * **Note:** This is an advanced method. For most cases {@link #safeInsert} and {@link #updateConversionResult} should be used.\n *\n * @method #getSplitParts\n * @param {module:engine/model/element~Element} element\n * @returns {Array.<module:engine/model/element~Element>}\n */\n\n/**\n * Stores information about what parts of the processed view item are still waiting to be handled. After a piece of view item\n * was converted, an appropriate consumable value should be\n * {@link module:engine/conversion/viewconsumable~ViewConsumable#consume consumed}.\n *\n * @member {module:engine/conversion/viewconsumable~ViewConsumable} #consumable\n */\n\n/**\n * Custom data stored by converters for the conversion process. Custom properties of this object can be defined and use to\n * pass parameters between converters.\n *\n * The difference between this property and the `data` parameter of\n * {@link module:engine/conversion/upcastdispatcher~UpcastDispatcher#event:element} is that the `data` parameters allow you\n * to pass parameters within a single event and `store` within the whole conversion.\n *\n * @member {Object} #store\n */\n\n/**\n * The model's schema instance.\n *\n * @member {module:engine/model/schema~Schema} #schema\n */\n\n/**\n * The {@link module:engine/model/writer~Writer} instance used to manipulate the data during conversion.\n *\n * @member {module:engine/model/writer~Writer} #writer\n */\n\n/**\n * Conversion data.\n *\n * **Note:** Keep in mind that this object is shared by reference between all conversion callbacks that will be called.\n * This means that callbacks can override values if needed, and these values will be available in other callbacks.\n *\n * @typedef {Object} module:engine/conversion/upcastdispatcher~UpcastConversionData\n *\n * @property {module:engine/view/item~Item} viewItem The converted item.\n * @property {module:engine/model/position~Position} modelCursor The position where the converter should start changes.\n * Change this value for the next converter to tell where the conversion should continue.\n * @property {module:engine/model/range~Range} [modelRange] The current state of conversion result. Every change to\n * the converted element should be reflected by setting or modifying this property.\n */\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/dataprocessor/basichtmlwriter\n */\n\n/* globals document */\n\n/**\n * Basic HTML writer. It uses the native `innerHTML` property for basic conversion\n * from a document fragment to an HTML string.\n *\n * @implements module:engine/dataprocessor/htmlwriter~HtmlWriter\n */\nexport default class BasicHtmlWriter {\n\t/**\n\t * Returns an HTML string created from the document fragment.\n\t *\n\t * @param {DocumentFragment} fragment\n\t * @returns {String}\n\t */\n\tgetHtml( fragment ) {\n\t\tconst doc = document.implementation.createHTMLDocument( '' );\n\t\tconst container = doc.createElement( 'div' );\n\t\tcontainer.appendChild( fragment );\n\n\t\treturn container.innerHTML;\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/dataprocessor/htmldataprocessor\n */\n\n/* globals document, DOMParser */\n\nimport BasicHtmlWriter from './basichtmlwriter';\nimport DomConverter from '../view/domconverter';\n\n/**\n * The HTML data processor class.\n * This data processor implementation uses HTML as input and output data.\n *\n * @implements module:engine/dataprocessor/dataprocessor~DataProcessor\n */\nexport default class HtmlDataProcessor {\n\t/**\n\t * Creates a new instance of the HTML data processor class.\n\t *\n\t * @param {module:engine/view/document~Document} document The view document instance.\n\t */\n\tconstructor( document ) {\n\t\t/**\n\t\t * A DOM parser instance used to parse an HTML string to an HTML document.\n\t\t *\n\t\t * @private\n\t\t * @member {DOMParser}\n\t\t */\n\t\tthis._domParser = new DOMParser();\n\n\t\t/**\n\t\t * A DOM converter used to convert DOM elements to view elements.\n\t\t *\n\t\t * @private\n\t\t * @member {module:engine/view/domconverter~DomConverter}\n\t\t */\n\t\tthis._domConverter = new DomConverter( document, { blockFillerMode: 'nbsp' } );\n\n\t\t/**\n\t\t * A basic HTML writer instance used to convert DOM elements to an HTML string.\n\t\t *\n\t\t * @private\n\t\t * @member {module:engine/dataprocessor/basichtmlwriter~BasicHtmlWriter}\n\t\t */\n\t\tthis._htmlWriter = new BasicHtmlWriter();\n\t}\n\n\t/**\n\t * Converts a provided {@link module:engine/view/documentfragment~DocumentFragment document fragment}\n\t * to data format &mdash; in this case to an HTML string.\n\t *\n\t * @param {module:engine/view/documentfragment~DocumentFragment} viewFragment\n\t * @returns {String} HTML string.\n\t */\n\ttoData( viewFragment ) {\n\t\t// Convert view DocumentFragment to DOM DocumentFragment.\n\t\tconst domFragment = this._domConverter.viewToDom( viewFragment, document );\n\n\t\t// Convert DOM DocumentFragment to HTML output.\n\t\treturn this._htmlWriter.getHtml( domFragment );\n\t}\n\n\t/**\n\t * Converts the provided HTML string to a view tree.\n\t *\n\t * @param {String} data An HTML string.\n\t * @returns {module:engine/view/node~Node|module:engine/view/documentfragment~DocumentFragment|null} A converted view element.\n\t */\n\ttoView( data ) {\n\t\t// Convert input HTML data to DOM DocumentFragment.\n\t\tconst domFragment = this._toDom( data );\n\n\t\t// Convert DOM DocumentFragment to view DocumentFragment.\n\t\treturn this._domConverter.domToView( domFragment );\n\t}\n\n\t/**\n\t * Registers a {@link module:engine/view/matcher~MatcherPattern} for view elements whose content should be treated as raw data\n\t * and not processed during the conversion from the DOM to the view elements.\n\t *\n\t * The raw data can be later accessed by a\n\t * {@link module:engine/view/element~Element#getCustomProperty custom property of a view element} called `\"$rawContent\"`.\n\t *\n\t * @param {module:engine/view/matcher~MatcherPattern} pattern Pattern matching all view elements whose content should\n\t * be treated as raw data.\n\t */\n\tregisterRawContentMatcher( pattern ) {\n\t\tthis._domConverter.registerRawContentMatcher( pattern );\n\t}\n\n\t/**\n\t * Converts an HTML string to its DOM representation. Returns a document fragment containing nodes parsed from\n\t * the provided data.\n\t *\n\t * @private\n\t * @param {String} data\n\t * @returns {DocumentFragment}\n\t */\n\t_toDom( data ) {\n\t\tconst document = this._domParser.parseFromString( data, 'text/html' );\n\t\tconst fragment = document.createDocumentFragment();\n\t\tconst nodes = document.body.childNodes;\n\n\t\twhile ( nodes.length > 0 ) {\n\t\t\tfragment.appendChild( nodes[ 0 ] );\n\t\t}\n\n\t\treturn fragment;\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/controller/datacontroller\n */\n\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\nimport ObservableMixin from '@ckeditor/ckeditor5-utils/src/observablemixin';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n\nimport Mapper from '../conversion/mapper';\n\nimport DowncastDispatcher from '../conversion/downcastdispatcher';\nimport { insertText } from '../conversion/downcasthelpers';\n\nimport UpcastDispatcher from '../conversion/upcastdispatcher';\nimport { convertText, convertToModelFragment } from '../conversion/upcasthelpers';\n\nimport ViewDocumentFragment from '../view/documentfragment';\nimport ViewDocument from '../view/document';\nimport ViewDowncastWriter from '../view/downcastwriter';\n\nimport ModelRange from '../model/range';\nimport { autoParagraphEmptyRoots } from '../model/utils/autoparagraphing';\nimport HtmlDataProcessor from '../dataprocessor/htmldataprocessor';\n\n/**\n * Controller for the data pipeline. The data pipeline controls how data is retrieved from the document\n * and set inside it. Hence, the controller features two methods which allow to {@link ~DataController#get get}\n * and {@link ~DataController#set set} data of the {@link ~DataController#model model}\n * using given:\n *\n * * {@link module:engine/dataprocessor/dataprocessor~DataProcessor data processor},\n * * downcast converters,\n * * upcast converters.\n *\n * An instance of the data controller is always available in the {@link module:core/editor/editor~Editor#data `editor.data`}\n * property:\n *\n *\t\teditor.data.get( { rootName: 'customRoot' } ); // -> '<p>Hello!</p>'\n *\n * @mixes module:utils/observablemixin~ObservableMixin\n */\nexport default class DataController {\n\t/**\n\t * Creates a data controller instance.\n\t *\n\t * @param {module:engine/model/model~Model} model Data model.\n\t * @param {module:engine/view/stylesmap~StylesProcessor} stylesProcessor The styles processor instance.\n\t */\n\tconstructor( model, stylesProcessor ) {\n\t\t/**\n\t\t * Data model.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/model/model~Model}\n\t\t */\n\t\tthis.model = model;\n\n\t\t/**\n\t\t * Mapper used for the conversion. It has no permanent bindings, because they are created when getting data and\n\t\t * cleared directly after the data are converted. However, the mapper is defined as a class property, because\n\t\t * it needs to be passed to the `DowncastDispatcher` as a conversion API.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/conversion/mapper~Mapper}\n\t\t */\n\t\tthis.mapper = new Mapper();\n\n\t\t/**\n\t\t * Downcast dispatcher used by the {@link #get get method}. Downcast converters should be attached to it.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/conversion/downcastdispatcher~DowncastDispatcher}\n\t\t */\n\t\tthis.downcastDispatcher = new DowncastDispatcher( {\n\t\t\tmapper: this.mapper,\n\t\t\tschema: model.schema\n\t\t} );\n\t\tthis.downcastDispatcher.on( 'insert:$text', insertText(), { priority: 'lowest' } );\n\n\t\t/**\n\t\t * Upcast dispatcher used by the {@link #set set method}. Upcast converters should be attached to it.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/conversion/upcastdispatcher~UpcastDispatcher}\n\t\t */\n\t\tthis.upcastDispatcher = new UpcastDispatcher( {\n\t\t\tschema: model.schema\n\t\t} );\n\n\t\t/**\n\t\t * The view document used by the data controller.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/document~Document}\n\t\t */\n\t\tthis.viewDocument = new ViewDocument( stylesProcessor );\n\n\t\t/**\n\t\t * Styles processor used during the conversion.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/stylesmap~StylesProcessor}\n\t\t */\n\t\tthis.stylesProcessor = stylesProcessor;\n\n\t\t/**\n\t\t * Data processor used specifically for HTML conversion.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/dataprocessor/htmldataprocessor~HtmlDataProcessor} #htmlProcessor\n\t\t */\n\t\tthis.htmlProcessor = new HtmlDataProcessor( this.viewDocument );\n\n\t\t/**\n\t\t * Data processor used during the conversion.\n\t\t * Same instance as {@link #htmlProcessor} by default. Can be replaced at run time to handle different format, e.g. XML or Markdown.\n\t\t *\n\t\t * @member {module:engine/dataprocessor/dataprocessor~DataProcessor} #processor\n\t\t */\n\t\tthis.processor = this.htmlProcessor;\n\n\t\t/**\n\t\t * The view downcast writer just for data conversion purposes, i.e. to modify\n\t\t * the {@link #viewDocument}.\n\t\t *\n\t\t * @private\n\t\t * @readonly\n\t\t * @member {module:engine/view/downcastwriter~DowncastWriter}\n\t\t */\n\t\tthis._viewWriter = new ViewDowncastWriter( this.viewDocument );\n\n\t\t// Define default converters for text and elements.\n\t\t//\n\t\t// Note that if there is no default converter for the element it will be skipped, for instance `<b>foo</b>` will be\n\t\t// converted to nothing. We therefore add `convertToModelFragment` as a last converter so it converts children of that\n\t\t// element to the document fragment and so `<b>foo</b>` will be converted to `foo` if there is no converter for `<b>`.\n\t\tthis.upcastDispatcher.on( 'text', convertText(), { priority: 'lowest' } );\n\t\tthis.upcastDispatcher.on( 'element', convertToModelFragment(), { priority: 'lowest' } );\n\t\tthis.upcastDispatcher.on( 'documentFragment', convertToModelFragment(), { priority: 'lowest' } );\n\n\t\tthis.decorate( 'init' );\n\t\tthis.decorate( 'set' );\n\n\t\t// Fire the `ready` event when the initialization has completed. Such low-level listener gives possibility\n\t\t// to plug into the initialization pipeline without interrupting the initialization flow.\n\t\tthis.on( 'init', () => {\n\t\t\tthis.fire( 'ready' );\n\t\t}, { priority: 'lowest' } );\n\n\t\t// Fix empty roots after DataController is 'ready' (note that init method could be decorated and stopped).\n\t\t// We need to handle this event because initial data could be empty and post-fixer would not get triggered.\n\t\tthis.on( 'ready', () => {\n\t\t\tthis.model.enqueueChange( 'transparent', autoParagraphEmptyRoots );\n\t\t}, { priority: 'lowest' } );\n\t}\n\n\t/**\n\t * Returns the model's data converted by downcast dispatchers attached to {@link #downcastDispatcher} and\n\t * formatted by the {@link #processor data processor}.\n\t *\n\t * @param {Object} [options] Additional configuration for the retrieved data. `DataController` provides two optional\n\t * properties: `rootName` and `trim`. Other properties of this object are specified by various editor features.\n\t * @param {String} [options.rootName='main'] Root name.\n\t * @param {String} [options.trim='empty'] Whether returned data should be trimmed. This option is set to `empty` by default,\n\t * which means whenever editor content is considered empty, an empty string will be returned. To turn off trimming completely\n\t * use `'none'`. In such cases exact content will be returned (for example `<p>&nbsp;</p>` for an empty editor).\n\t * @returns {String} Output data.\n\t */\n\tget( options = {} ) {\n\t\tconst { rootName = 'main', trim = 'empty' } = options;\n\n\t\tif ( !this._checkIfRootsExists( [ rootName ] ) ) {\n\t\t\t/**\n\t\t\t * Cannot get data from a non-existing root. This error is thrown when {@link #get DataController#get() method}\n\t\t\t * is called with non-existent root name. For example, if there is an editor instance with only `main` root,\n\t\t\t * calling {@link #get} like:\n\t\t\t *\n\t\t\t *\t\tdata.get( { rootName: 'root2' } );\n\t\t\t *\n\t\t\t * will throw this error.\n\t\t\t *\n\t\t\t * @error datacontroller-get-non-existent-root\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'datacontroller-get-non-existent-root', this );\n\t\t}\n\n\t\tconst root = this.model.document.getRoot( rootName );\n\n\t\tif ( trim === 'empty' && !this.model.hasContent( root, { ignoreWhitespaces: true } ) ) {\n\t\t\treturn '';\n\t\t}\n\n\t\treturn this.stringify( root, options );\n\t}\n\n\t/**\n\t * Returns the content of the given {@link module:engine/model/element~Element model's element} or\n\t * {@link module:engine/model/documentfragment~DocumentFragment model document fragment} converted by the downcast converters\n\t * attached to {@link #downcastDispatcher} and formatted by the {@link #processor data processor}.\n\t *\n\t * @param {module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment} modelElementOrFragment\n\t * Element whose content will be stringified.\n\t * @param {Object} [options] Additional configuration passed to the conversion process.\n\t * @returns {String} Output data.\n\t */\n\tstringify( modelElementOrFragment, options ) {\n\t\t// Model -> view.\n\t\tconst viewDocumentFragment = this.toView( modelElementOrFragment, options );\n\n\t\t// View -> data.\n\t\treturn this.processor.toData( viewDocumentFragment );\n\t}\n\n\t/**\n\t * Returns the content of the given {@link module:engine/model/element~Element model element} or\n\t * {@link module:engine/model/documentfragment~DocumentFragment model document fragment} converted by the downcast\n\t * converters attached to {@link #downcastDispatcher} to a\n\t * {@link module:engine/view/documentfragment~DocumentFragment view document fragment}.\n\t *\n\t * @param {module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment} modelElementOrFragment\n\t * Element or document fragment whose content will be converted.\n\t * @param {Object} [options] Additional configuration that will be available through\n\t * {@link module:engine/conversion/downcastdispatcher~DowncastConversionApi#options} during the conversion process.\n\t * @returns {module:engine/view/documentfragment~DocumentFragment} Output view DocumentFragment.\n\t */\n\ttoView( modelElementOrFragment, options ) {\n\t\tconst viewDocument = this.viewDocument;\n\t\tconst viewWriter = this._viewWriter;\n\n\t\t// Clear bindings so the call to this method gives correct results.\n\t\tthis.mapper.clearBindings();\n\n\t\t// First, convert elements.\n\t\tconst modelRange = ModelRange._createIn( modelElementOrFragment );\n\t\tconst viewDocumentFragment = new ViewDocumentFragment( viewDocument );\n\n\t\tthis.mapper.bindElements( modelElementOrFragment, viewDocumentFragment );\n\n\t\t// Make additional options available during conversion process through `conversionApi`.\n\t\tthis.downcastDispatcher.conversionApi.options = options;\n\n\t\t// We have no view controller and rendering to DOM in DataController so view.change() block is not used here.\n\t\tthis.downcastDispatcher.convertInsert( modelRange, viewWriter );\n\n\t\tif ( !modelElementOrFragment.is( 'documentFragment' ) ) {\n\t\t\t// Then, if a document element is converted, convert markers.\n\t\t\t// From all document markers, get those, which \"intersect\" with the converter element.\n\t\t\tconst markers = _getMarkersRelativeToElement( modelElementOrFragment );\n\n\t\t\tfor ( const [ name, range ] of markers ) {\n\t\t\t\tthis.downcastDispatcher.convertMarkerAdd( name, range, viewWriter );\n\t\t\t}\n\t\t}\n\n\t\t// Clean `conversionApi`.\n\t\tdelete this.downcastDispatcher.conversionApi.options;\n\n\t\treturn viewDocumentFragment;\n\t}\n\n\t/**\n\t * Sets initial input data parsed by the {@link #processor data processor} and\n\t * converted by the {@link #upcastDispatcher view-to-model converters}.\n\t * Initial data can be set only to document that {@link module:engine/model/document~Document#version} is equal 0.\n\t *\n\t * **Note** This method is {@link module:utils/observablemixin~ObservableMixin#decorate decorated} which is\n\t * used by e.g. collaborative editing plugin that syncs remote data on init.\n\t *\n\t * When data is passed as a string it is initialized on a default `main` root:\n\t *\n\t *\t\tdataController.init( '<p>Foo</p>' ); // Initializes data on the `main` root.\n\t *\n\t * To initialize data on a different root or multiple roots at once, object containing `rootName` - `data` pairs should be passed:\n\t *\n\t *\t\tdataController.init( { main: '<p>Foo</p>', title: '<h1>Bar</h1>' } ); // Initializes data on the `main` and `title` roots.\n\t *\n\t * @fires init\n\t * @param {String|Object.<String,String>} data Input data as a string or an object containing `rootName` - `data`\n\t * pairs to initialize data on multiple roots at once.\n\t * @returns {Promise} Promise that is resolved after the data is set on the editor.\n\t */\n\tinit( data ) {\n\t\tif ( this.model.document.version ) {\n\t\t\t/**\n\t\t\t * Cannot set initial data to not empty {@link module:engine/model/document~Document}.\n\t\t\t * Initial data should be set once, during {@link module:core/editor/editor~Editor} initialization,\n\t\t\t * when the {@link module:engine/model/document~Document#version} is equal 0.\n\t\t\t *\n\t\t\t * @error datacontroller-init-document-not-empty\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'datacontroller-init-document-not-empty', this );\n\t\t}\n\n\t\tlet initialData = {};\n\t\tif ( typeof data === 'string' ) {\n\t\t\tinitialData.main = data; // Default root is 'main'. To initiate data on a different root, object should be passed.\n\t\t} else {\n\t\t\tinitialData = data;\n\t\t}\n\n\t\tif ( !this._checkIfRootsExists( Object.keys( initialData ) ) ) {\n\t\t\t/**\n\t\t\t * Cannot init data on a non-existing root. This error is thrown when {@link #init DataController#init() method}\n\t\t\t * is called with non-existent root name. For example, if there is an editor instance with only `main` root,\n\t\t\t * calling {@link #init} like:\n\t\t\t *\n\t\t\t * \t\tdata.init( { main: '<p>Foo</p>', root2: '<p>Bar</p>' } );\n\t\t\t *\n\t\t\t * will throw this error.\n\t\t\t *\n\t\t\t * @error datacontroller-init-non-existent-root\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'datacontroller-init-non-existent-root', this );\n\t\t}\n\n\t\tthis.model.enqueueChange( 'transparent', writer => {\n\t\t\tfor ( const rootName of Object.keys( initialData ) ) {\n\t\t\t\tconst modelRoot = this.model.document.getRoot( rootName );\n\t\t\t\twriter.insert( this.parse( initialData[ rootName ], modelRoot ), modelRoot, 0 );\n\t\t\t}\n\t\t} );\n\n\t\treturn Promise.resolve();\n\t}\n\n\t/**\n\t * Sets input data parsed by the {@link #processor data processor} and\n\t * converted by the {@link #upcastDispatcher view-to-model converters}.\n\t * This method can be used any time to replace existing editor data by the new one without clearing the\n\t * {@link module:engine/model/document~Document#history document history}.\n\t *\n\t * This method also creates a batch with all the changes applied. If all you need is to parse data, use\n\t * the {@link #parse} method.\n\t *\n\t * When data is passed as a string it is set on a default `main` root:\n\t *\n\t *\t\tdataController.set( '<p>Foo</p>' ); // Sets data on the `main` root.\n\t *\n\t * To set data on a different root or multiple roots at once, object containing `rootName` - `data` pairs should be passed:\n\t *\n\t *\t\tdataController.set( { main: '<p>Foo</p>', title: '<h1>Bar</h1>' } ); // Sets data on the `main` and `title` roots.\n\t *\n\t * @fires set\n\t * @param {String|Object.<String,String>} data Input data as a string or an object containing `rootName` - `data`\n\t * pairs to set data on multiple roots at once.\n\t */\n\tset( data ) {\n\t\tlet newData = {};\n\n\t\tif ( typeof data === 'string' ) {\n\t\t\tnewData.main = data; // Default root is 'main'. To set data on a different root, object should be passed.\n\t\t} else {\n\t\t\tnewData = data;\n\t\t}\n\n\t\tif ( !this._checkIfRootsExists( Object.keys( newData ) ) ) {\n\t\t\t/**\n\t\t\t * Cannot set data on a non-existing root. This error is thrown when {@link #set DataController#set() method}\n\t\t\t * is called with non-existent root name. For example, if there is an editor instance with only `main` root,\n\t\t\t * calling {@link #set} like:\n\t\t\t *\n\t\t\t * \t\tdata.set( { main: '<p>Foo</p>', root2: '<p>Bar</p>' } );\n\t\t\t *\n\t\t\t * will throw this error.\n\t\t\t *\n\t\t\t * @error datacontroller-set-non-existent-root\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'datacontroller-set-non-existent-root', this );\n\t\t}\n\n\t\tthis.model.enqueueChange( 'transparent', writer => {\n\t\t\twriter.setSelection( null );\n\t\t\twriter.removeSelectionAttribute( this.model.document.selection.getAttributeKeys() );\n\n\t\t\tfor ( const rootName of Object.keys( newData ) ) {\n\t\t\t\t// Save to model.\n\t\t\t\tconst modelRoot = this.model.document.getRoot( rootName );\n\n\t\t\t\twriter.remove( writer.createRangeIn( modelRoot ) );\n\t\t\t\twriter.insert( this.parse( newData[ rootName ], modelRoot ), modelRoot, 0 );\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * Returns the data parsed by the {@link #processor data processor} and then converted by upcast converters\n\t * attached to the {@link #upcastDispatcher}.\n\t *\n\t * @see #set\n\t * @param {String} data Data to parse.\n\t * @param {module:engine/model/schema~SchemaContextDefinition} [context='$root'] Base context in which the view will\n\t * be converted to the model. See: {@link module:engine/conversion/upcastdispatcher~UpcastDispatcher#convert}.\n\t * @returns {module:engine/model/documentfragment~DocumentFragment} Parsed data.\n\t */\n\tparse( data, context = '$root' ) {\n\t\t// data -> view\n\t\tconst viewDocumentFragment = this.processor.toView( data );\n\n\t\t// view -> model\n\t\treturn this.toModel( viewDocumentFragment, context );\n\t}\n\n\t/**\n\t * Returns the result of the given {@link module:engine/view/element~Element view element} or\n\t * {@link module:engine/view/documentfragment~DocumentFragment view document fragment} converted by the\n\t * {@link #upcastDispatcher view-to-model converters}, wrapped by {@link module:engine/model/documentfragment~DocumentFragment}.\n\t *\n\t * When marker elements were converted during the conversion process, it will be set as a document fragment's\n\t * {@link module:engine/model/documentfragment~DocumentFragment#markers static markers map}.\n\t *\n\t * @param {module:engine/view/element~Element|module:engine/view/documentfragment~DocumentFragment} viewElementOrFragment\n\t * Element or document fragment whose content will be converted.\n\t * @param {module:engine/model/schema~SchemaContextDefinition} [context='$root'] Base context in which the view will\n\t * be converted to the model. See: {@link module:engine/conversion/upcastdispatcher~UpcastDispatcher#convert}.\n\t * @returns {module:engine/model/documentfragment~DocumentFragment} Output document fragment.\n\t */\n\ttoModel( viewElementOrFragment, context = '$root' ) {\n\t\treturn this.model.change( writer => {\n\t\t\treturn this.upcastDispatcher.convert( viewElementOrFragment, writer, context );\n\t\t} );\n\t}\n\n\t/**\n\t * Adds a style processor normalization rules.\n\t *\n\t * You can implement your own rules as well as use one of the available processor rules:\n\t *\n\t * * background: {@link module:engine/view/styles/background~addBackgroundRules}\n\t * * border: {@link module:engine/view/styles/border~addBorderRules}\n\t * * margin: {@link module:engine/view/styles/margin~addMarginRules}\n\t * * padding: {@link module:engine/view/styles/padding~addPaddingRules}\n\t *\n\t * @param {Function} callback\n\t */\n\taddStyleProcessorRules( callback ) {\n\t\tcallback( this.stylesProcessor );\n\t}\n\n\t/**\n\t * Registers a {@link module:engine/view/matcher~MatcherPattern} on {@link #htmlProcessor htmlProcessor}\n\t * and {@link #processor processor} for view elements whose content should be treated as a raw data\n\t * and not processed during conversion from DOM to view elements.\n\t *\n\t * The raw data can be later accessed by {@link module:engine/view/element~Element#getCustomProperty view element custom property}\n\t * `\"$rawContent\"`.\n\t *\n\t * @param {module:engine/view/matcher~MatcherPattern} pattern Pattern matching all view elements whose content should\n\t * be treated as a raw data.\n\t */\n\tregisterRawContentMatcher( pattern ) {\n\t\t// No need to register the pattern if both `htmlProcessor` and `processor` are the same instances.\n\t\tif ( this.processor && this.processor !== this.htmlProcessor ) {\n\t\t\tthis.processor.registerRawContentMatcher( pattern );\n\t\t}\n\n\t\tthis.htmlProcessor.registerRawContentMatcher( pattern );\n\t}\n\n\t/**\n\t * Removes all event listeners set by the DataController.\n\t */\n\tdestroy() {\n\t\tthis.stopListening();\n\t}\n\n\t/**\n\t * Checks if all provided root names are existing editor roots.\n\t *\n\t * @private\n\t * @param {Array.<String>} rootNames Root names to check.\n\t * @returns {Boolean} Whether all provided root names are existing editor roots.\n\t */\n\t_checkIfRootsExists( rootNames ) {\n\t\tfor ( const rootName of rootNames ) {\n\t\t\tif ( !this.model.document.getRootNames().includes( rootName ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Event fired once the data initialization has finished.\n\t *\n\t * @event ready\n\t */\n\n\t/**\n\t * Event fired after the {@link #init `init()` method} was run. It can be {@link #listenTo listened to} in order to adjust or modify\n\t * the initialization flow. However, if the `init` event is stopped or prevented, the {@link #event:ready `ready` event}\n\t * should be fired manually.\n\t *\n\t * The `init` event is fired by the decorated {@link #init} method.\n\t * See {@link module:utils/observablemixin~ObservableMixin#decorate} for more information and samples.\n\t *\n\t * @event init\n\t */\n\n\t/**\n\t * Event fired after {@link #set set() method} has been run.\n\t *\n\t * The `set` event is fired by decorated {@link #set} method.\n\t * See {@link module:utils/observablemixin~ObservableMixin#decorate} for more information and samples.\n\t *\n\t * @event set\n\t */\n}\n\nmix( DataController, ObservableMixin );\n\n// Helper function for downcast conversion.\n//\n// Takes a document element (element that is added to a model document) and checks which markers are inside it\n// and which markers are containing it. If the marker is intersecting with element, the intersection is returned.\nfunction _getMarkersRelativeToElement( element ) {\n\tconst result = [];\n\tconst doc = element.root.document;\n\n\tif ( !doc ) {\n\t\treturn [];\n\t}\n\n\tconst elementRange = ModelRange._createIn( element );\n\n\tfor ( const marker of doc.model.markers ) {\n\t\tconst intersection = elementRange.getIntersection( marker.getRange() );\n\n\t\tif ( intersection ) {\n\t\t\tresult.push( [ marker.name, intersection ] );\n\t\t}\n\t}\n\n\treturn result;\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/conversion/conversion\n */\n\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport UpcastHelpers from './upcasthelpers';\nimport DowncastHelpers from './downcasthelpers';\nimport toArray from '@ckeditor/ckeditor5-utils/src/toarray';\n\n/**\n * A utility class that helps add converters to upcast and downcast dispatchers.\n *\n * We recommend reading the {@glink framework/guides/architecture/editing-engine Editing engine architecture} guide first to\n * understand the core concepts of the conversion mechanisms.\n *\n * An instance of the conversion manager is available in the\n * {@link module:core/editor/editor~Editor#conversion `editor.conversion`} property\n * and by default has the following groups of dispatchers (i.e. directions of conversion):\n *\n * * `downcast` (editing and data downcasts)\n * * `editingDowncast`\n * * `dataDowncast`\n * * `upcast`\n *\n * # One-way converters\n *\n * To add a converter to a specific group, use the {@link module:engine/conversion/conversion~Conversion#for `for()`}\n * method:\n *\n *\t\t// Add a converter to editing downcast and data downcast.\n *\t\teditor.conversion.for( 'downcast' ).elementToElement( config ) );\n *\n *\t\t// Add a converter to the data pipepline only:\n *\t\teditor.conversion.for( 'dataDowncast' ).elementToElement( dataConversionConfig ) );\n *\n *\t\t// And a slightly different one for the editing pipeline:\n *\t\teditor.conversion.for( 'editingDowncast' ).elementToElement( editingConversionConfig ) );\n *\n * See {@link module:engine/conversion/conversion~Conversion#for `for()`} method documentation to learn more about\n * available conversion helpers and how to use your custom ones.\n *\n * # Two-way converters\n *\n * Besides using one-way converters via the `for()` method, you can also use other methods available in this\n * class to add two-way converters (upcast and downcast):\n *\n * * {@link module:engine/conversion/conversion~Conversion#elementToElement `elementToElement()`} &ndash;\n * Model element to view element and vice versa.\n * * {@link module:engine/conversion/conversion~Conversion#attributeToElement `attributeToElement()`} &ndash;\n * Model attribute to view element and vice versa.\n * * {@link module:engine/conversion/conversion~Conversion#attributeToAttribute `attributeToAttribute()`} &ndash;\n * Model attribute to view element and vice versa.\n */\nexport default class Conversion {\n\t/**\n\t * Creates a new conversion instance.\n\t *\n\t * @param {module:engine/conversion/downcastdispatcher~DowncastDispatcher|\n\t * Array.<module:engine/conversion/downcastdispatcher~DowncastDispatcher>} downcastDispatchers\n\t * @param {module:engine/conversion/upcastdispatcher~UpcastDispatcher|\n\t * Array.<module:engine/conversion/upcastdispatcher~UpcastDispatcher>} upcastDispatchers\n\t */\n\tconstructor( downcastDispatchers, upcastDispatchers ) {\n\t\t/**\n\t\t * Maps dispatchers group name to ConversionHelpers instances.\n\t\t *\n\t\t * @private\n\t\t * @member {Map.<String,module:engine/conversion/conversionhelpers~ConversionHelpers>}\n\t\t */\n\t\tthis._helpers = new Map();\n\n\t\t// Define default 'downcast' & 'upcast' dispatchers groups. Those groups are always available as two-way converters needs them.\n\t\tthis._downcast = toArray( downcastDispatchers );\n\t\tthis._createConversionHelpers( { name: 'downcast', dispatchers: this._downcast, isDowncast: true } );\n\n\t\tthis._upcast = toArray( upcastDispatchers );\n\t\tthis._createConversionHelpers( { name: 'upcast', dispatchers: this._upcast, isDowncast: false } );\n\t}\n\n\t/**\n\t * Define an alias for registered dispatcher.\n\t *\n\t *\t\tconst conversion = new Conversion(\n\t *\t\t\t[ dataDowncastDispatcher, editingDowncastDispatcher ],\n\t *\t\t\tupcastDispatcher\n\t *\t\t);\n\t *\n\t *\t\tconversion.addAlias( 'dataDowncast', dataDowncastDispatcher );\n\t *\n\t * @param {String} alias An alias of a dispatcher.\n\t * @param {module:engine/conversion/downcastdispatcher~DowncastDispatcher|\n\t * module:engine/conversion/upcastdispatcher~UpcastDispatcher} dispatcher Dispatcher which should have an alias.\n\t */\n\taddAlias( alias, dispatcher ) {\n\t\tconst isDowncast = this._downcast.includes( dispatcher );\n\t\tconst isUpcast = this._upcast.includes( dispatcher );\n\n\t\tif ( !isUpcast && !isDowncast ) {\n\t\t\t/**\n\t\t\t * Trying to register and alias for a dispatcher that nas not been registered.\n\t\t\t *\n\t\t\t * @error conversion-add-alias-dispatcher-not-registered\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'conversion-add-alias-dispatcher-not-registered',\n\t\t\t\tthis\n\t\t\t);\n\t\t}\n\n\t\tthis._createConversionHelpers( { name: alias, dispatchers: [ dispatcher ], isDowncast } );\n\t}\n\n\t/**\n\t * Provides a chainable API to assign converters to conversion dispatchers group.\n\t *\n\t * If the given group name has not been registered, the\n\t * {@link module:utils/ckeditorerror~CKEditorError `conversion-for-unknown-group` error} is thrown.\n\t *\n\t * You can use conversion helpers available directly in the `for()` chain or your custom ones via\n\t * the {@link module:engine/conversion/conversionhelpers~ConversionHelpers#add `add()`} method.\n\t *\n\t * # Using bulit-in conversion helpers\n\t *\n\t * The `for()` chain comes with a set of conversion helpers which you can use like this:\n\t *\n\t *\t\teditor.conversion.for( 'downcast' )\n\t *\t\t\t.elementToElement( config1 )        // Adds an element-to-element downcast converter.\n\t *\t\t\t.attributeToElement( config2 );     // Adds an attribute-to-element downcast converter.\n\t *\n\t *\t\teditor.conversion.for( 'upcast' )\n\t *\t\t\t.elementToAttribute( config3 );     // Adds an element-to-attribute upcast converter.\n\t *\n\t * Refer to the documentation of built-in conversion helpers to learn about their configuration options.\n\t *\n\t * * downcast (model-to-view) conversion helpers:\n\t *\n\t *\t* {@link module:engine/conversion/downcasthelpers~DowncastHelpers#elementToElement `elementToElement()`},\n\t *\t* {@link module:engine/conversion/downcasthelpers~DowncastHelpers#attributeToElement `attributeToElement()`},\n\t *\t* {@link module:engine/conversion/downcasthelpers~DowncastHelpers#attributeToAttribute `attributeToAttribute()`}.\n\t *\t* {@link module:engine/conversion/downcasthelpers~DowncastHelpers#markerToElement `markerToElement()`}.\n\t *\t* {@link module:engine/conversion/downcasthelpers~DowncastHelpers#markerToHighlight `markerToHighlight()`}.\n\t *\n\t * * upcast (view-to-model) conversion helpers:\n\t *\n\t *\t* {@link module:engine/conversion/upcasthelpers~UpcastHelpers#elementToElement `elementToElement()`},\n\t *\t* {@link module:engine/conversion/upcasthelpers~UpcastHelpers#elementToAttribute `elementToAttribute()`},\n\t *\t* {@link module:engine/conversion/upcasthelpers~UpcastHelpers#attributeToAttribute `attributeToAttribute()`}.\n\t *\t* {@link module:engine/conversion/upcasthelpers~UpcastHelpers#elementToMarker `elementToMarker()`}.\n\t *\n\t * # Using custom conversion helpers\n\t *\n\t * If you need to implement a nontypical converter, you can do so by calling:\n\t *\n\t *\t\teditor.conversion.for( direction ).add( customHelper );\n\t *\n\t * The `.add()` method takes exactly one parameter, which is a function. This function should accept one parameter that\n\t * is a dispatcher instance. The function should add an actual converter to the passed dispatcher instance.\n\t *\n\t * Example:\n\t *\n\t *\t\teditor.conversion.for( 'upcast' ).add( dispatcher => {\n\t *\t\t\tdispatcher.on( 'element:a',  ( evt, data, conversionApi ) => {\n\t *\t\t\t\t// Do something with a view <a> element.\n\t *\t\t\t} );\n\t *\t\t} );\n\t *\n\t * Refer to the documentation of {@link module:engine/conversion/upcastdispatcher~UpcastDispatcher}\n\t * and {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher} to learn how to write\n\t * custom converters.\n\t *\n\t * @param {String} groupName The name of dispatchers group to add the converters to.\n\t * @returns {module:engine/conversion/downcasthelpers~DowncastHelpers|module:engine/conversion/upcasthelpers~UpcastHelpers}\n\t */\n\tfor( groupName ) {\n\t\tif ( !this._helpers.has( groupName ) ) {\n\t\t\t/**\n\t\t\t * Trying to add a converter to an unknown dispatchers group.\n\t\t\t *\n\t\t\t * @error conversion-for-unknown-group\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'conversion-for-unknown-group', this );\n\t\t}\n\n\t\treturn this._helpers.get( groupName );\n\t}\n\n\t/**\n\t * Sets up converters between the model and the view that convert a model element to a view element (and vice versa).\n\t * For example, the model `<paragraph>Foo</paragraph>` is `<p>Foo</p>` in the view.\n\t *\n\t *\t\t// A simple conversion from the `paragraph` model element to the `<p>` view element (and vice versa).\n\t *\t\teditor.conversion.elementToElement( { model: 'paragraph', view: 'p' } );\n\t *\n\t *\t\t// Override other converters by specifying a converter definition with a higher priority.\n\t *\t\teditor.conversion.elementToElement( { model: 'paragraph', view: 'div', converterPriority: 'high' } );\n\t *\n\t *\t\t// View specified as an object instead of a string.\n\t *\t\teditor.conversion.elementToElement( {\n\t *\t\t\tmodel: 'fancyParagraph',\n\t *\t\t\tview: {\n\t *\t\t\t\tname: 'p',\n\t *\t\t\t\tclasses: 'fancy'\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t *\t\t// Use `upcastAlso` to define other view elements that should also be converted to a `paragraph` element.\n\t *\t\teditor.conversion.elementToElement( {\n\t *\t\t\tmodel: 'paragraph',\n\t *\t\t\tview: 'p',\n\t *\t\t\tupcastAlso: [\n\t *\t\t\t\t'div',\n\t *\t\t\t\t{\n\t *\t\t\t\t\t// Any element with the `display: block` style.\n\t *\t\t\t\t\tstyles: {\n\t *\t\t\t\t\t\tdisplay: 'block'\n\t *\t\t\t\t\t}\n\t *\t\t\t\t}\n\t *\t\t\t]\n\t *\t\t} );\n\t *\n\t *\t\t// `upcastAlso` set as callback enables a conversion of a wide range of different view elements.\n\t *\t\teditor.conversion.elementToElement( {\n\t *\t\t\tmodel: 'heading',\n\t *\t\t\tview: 'h2',\n\t *\t\t\t// Convert \"headling-like\" paragraphs to headings.\n\t *\t\t\tupcastAlso: viewElement => {\n\t *\t\t\t\tconst fontSize = viewElement.getStyle( 'font-size' );\n\t *\n\t *\t\t\t\tif ( !fontSize ) {\n\t *\t\t\t\t\treturn null;\n\t *\t\t\t\t}\n\t *\n\t *\t\t\t\tconst match = fontSize.match( /(\\d+)\\s*px/ );\n\t *\n\t *\t\t\t\tif ( !match ) {\n\t *\t\t\t\t\treturn null;\n\t *\t\t\t\t}\n\t *\n\t *\t\t\t\tconst size = Number( match[ 1 ] );\n\t *\n\t *\t\t\t\tif ( size > 26 ) {\n\t *\t\t\t\t\t// Returned value can be an object with the matched properties.\n\t *\t\t\t\t\t// These properties will be \"consumed\" during the conversion.\n\t *\t\t\t\t\t// See `engine.view.Matcher~MatcherPattern` and `engine.view.Matcher#match` for more details.\n\t *\n\t *\t\t\t\t\treturn { name: true, styles: [ 'font-size' ] };\n\t *\t\t\t\t}\n\t *\n\t *\t\t\t\treturn null;\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t * `definition.model` is a `String` with a model element name to convert from or to.\n\t * See {@link module:engine/conversion/conversion~ConverterDefinition} to learn about other parameters.\n\t *\n\t * @param {module:engine/conversion/conversion~ConverterDefinition} definition The converter definition.\n\t */\n\telementToElement( definition ) {\n\t\t// Set up downcast converter.\n\t\tthis.for( 'downcast' ).elementToElement( definition );\n\n\t\t// Set up upcast converter.\n\t\tfor ( const { model, view } of _getAllUpcastDefinitions( definition ) ) {\n\t\t\tthis.for( 'upcast' )\n\t\t\t\t.elementToElement( {\n\t\t\t\t\tmodel,\n\t\t\t\t\tview,\n\t\t\t\t\tconverterPriority: definition.converterPriority\n\t\t\t\t} );\n\t\t}\n\t}\n\n\t/**\n\t * Sets up converters between the model and the view that convert a model attribute to a view element (and vice versa).\n\t * For example, a model text node with `\"Foo\"` as data and the `bold` attribute is `<strong>Foo</strong>` in the view.\n\t *\n\t *\t\t// A simple conversion from the `bold=true` attribute to the `<strong>` view element (and vice versa).\n\t *\t\teditor.conversion.attributeToElement( { model: 'bold', view: 'strong' } );\n\t *\n\t *\t\t// Override other converters by specifying a converter definition with a higher priority.\n\t *\t\teditor.conversion.attributeToElement( { model: 'bold', view: 'b', converterPriority: 'high' } );\n\t *\n\t *\t\t// View specified as an object instead of a string.\n\t *\t\teditor.conversion.attributeToElement( {\n\t *\t\t\tmodel: 'bold',\n\t *\t\t\tview: {\n\t *\t\t\t\tname: 'span',\n\t *\t\t\t\tclasses: 'bold'\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t *\t\t// Use `config.model.name` to define the conversion only from a given node type, `$text` in this case.\n\t *\t\t// The same attribute on different elements may then be handled by a different converter.\n\t *\t\teditor.conversion.attributeToElement( {\n\t *\t\t\tmodel: {\n\t *\t\t\t\tkey: 'textDecoration',\n\t *\t\t\t\tvalues: [ 'underline', 'lineThrough' ],\n\t *\t\t\t\tname: '$text'\n\t *\t\t\t},\n\t *\t\t\tview: {\n\t *\t\t\t\tunderline: {\n\t *\t\t\t\t\tname: 'span',\n\t *\t\t\t\t\tstyles: {\n\t *\t\t\t\t\t\t'text-decoration': 'underline'\n\t *\t\t\t\t\t}\n\t *\t\t\t\t},\n\t *\t\t\t\tlineThrough: {\n\t *\t\t\t\t\tname: 'span',\n\t *\t\t\t\t\tstyles: {\n\t *\t\t\t\t\t\t'text-decoration': 'line-through'\n\t *\t\t\t\t\t}\n\t *\t\t\t\t}\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t *\t\t// Use `upcastAlso` to define other view elements that should also be converted to the `bold` attribute.\n\t *\t\teditor.conversion.attributeToElement( {\n\t *\t\t\tmodel: 'bold',\n\t *\t\t\tview: 'strong',\n\t *\t\t\tupcastAlso: [\n\t *\t\t\t\t'b',\n\t *\t\t\t\t{\n\t *\t\t\t\t\tname: 'span',\n\t *\t\t\t\t\tclasses: 'bold'\n\t *\t\t\t\t},\n\t *\t\t\t\t{\n\t *\t\t\t\t\tname: 'span',\n\t *\t\t\t\t\tstyles: {\n\t *\t\t\t\t\t\t'font-weight': 'bold'\n\t *\t\t\t\t\t}\n\t *\t\t\t\t},\n\t *\t\t\t\tviewElement => {\n\t *\t\t\t\t\tconst fontWeight = viewElement.getStyle( 'font-weight' );\n\t *\n\t *\t\t\t\t\tif ( viewElement.is( 'element', 'span' ) && fontWeight && /\\d+/.test() && Number( fontWeight ) > 500 ) {\n\t *\t\t\t\t\t\t// Returned value can be an object with the matched properties.\n\t *\t\t\t\t\t\t// These properties will be \"consumed\" during the conversion.\n\t *\t\t\t\t\t\t// See `engine.view.Matcher~MatcherPattern` and `engine.view.Matcher#match` for more details.\n\t *\n\t *\t\t\t\t\t\treturn {\n\t *\t\t\t\t\t\t\tname: true,\n\t *\t\t\t\t\t\t\tstyles: [ 'font-weight' ]\n\t *\t\t\t\t\t\t};\n\t *\t\t\t\t\t}\n\t *\t\t\t\t}\n\t *\t\t\t]\n\t *\t\t} );\n\t *\n\t *\t\t// Conversion from and to a model attribute key whose value is an enum (`fontSize=big|small`).\n\t *\t\t// `upcastAlso` set as callback enables a conversion of a wide range of different view elements.\n\t *\t\teditor.conversion.attributeToElement( {\n\t *\t\t\tmodel: {\n\t *\t\t\t\tkey: 'fontSize',\n\t *\t\t\t\tvalues: [ 'big', 'small' ]\n\t *\t\t\t},\n\t *\t\t\tview: {\n\t *\t\t\t\tbig: {\n\t *\t\t\t\t\tname: 'span',\n\t *\t\t\t\t\tstyles: {\n\t *\t\t\t\t\t\t'font-size': '1.2em'\n\t *\t\t\t\t\t}\n\t *\t\t\t\t},\n\t *\t\t\t\tsmall: {\n\t *\t\t\t\t\tname: 'span',\n\t *\t\t\t\t\tstyles: {\n\t *\t\t\t\t\t\t'font-size': '0.8em'\n\t *\t\t\t\t\t}\n\t *\t\t\t\t}\n\t *\t\t\t},\n\t *\t\t\tupcastAlso: {\n\t *\t\t\t\tbig: viewElement => {\n\t *\t\t\t\t\tconst fontSize = viewElement.getStyle( 'font-size' );\n\t *\n\t *\t\t\t\t\tif ( !fontSize ) {\n\t *\t\t\t\t\t\treturn null;\n\t *\t\t\t\t\t}\n\t *\n\t *\t\t\t\t\tconst match = fontSize.match( /(\\d+)\\s*px/ );\n\t *\n\t *\t\t\t\t\tif ( !match ) {\n\t *\t\t\t\t\t\treturn null;\n\t *\t\t\t\t\t}\n\t *\n\t *\t\t\t\t\tconst size = Number( match[ 1 ] );\n\t *\n\t *\t\t\t\t\tif ( viewElement.is( 'element', 'span' ) && size > 10 ) {\n\t *\t\t\t\t\t\t// Returned value can be an object with the matched properties.\n\t *\t\t\t\t\t\t// These properties will be \"consumed\" during the conversion.\n\t *\t\t\t\t\t\t// See `engine.view.Matcher~MatcherPattern` and `engine.view.Matcher#match` for more details.\n\t *\n\t *\t\t\t\t\t\treturn { name: true, styles: [ 'font-size' ] };\n\t *\t\t\t\t\t}\n\t *\n\t *\t\t\t\t\treturn null;\n\t *\t\t\t\t},\n\t *\t\t\t\tsmall: viewElement => {\n\t *\t\t\t\t\tconst fontSize = viewElement.getStyle( 'font-size' );\n\t *\n\t *\t\t\t\t\tif ( !fontSize ) {\n\t *\t\t\t\t\t\treturn null;\n\t *\t\t\t\t\t}\n\t *\n\t *\t\t\t\t\tconst match = fontSize.match( /(\\d+)\\s*px/ );\n\t *\n\t *\t\t\t\t\tif ( !match ) {\n\t *\t\t\t\t\t\treturn null;\n\t *\t\t\t\t\t}\n\t *\n\t *\t\t\t\t\tconst size = Number( match[ 1 ] );\n\t *\n\t *\t\t\t\t\tif ( viewElement.is( 'element', 'span' ) && size < 10 ) {\n\t *\t\t\t\t\t\t// Returned value can be an object with the matched properties.\n\t *\t\t\t\t\t\t// These properties will be \"consumed\" during the conversion.\n\t *\t\t\t\t\t\t// See `engine.view.Matcher~MatcherPattern` and `engine.view.Matcher#match` for more details.\n\t *\n\t *\t\t\t\t\t\treturn { name: true, styles: [ 'font-size' ] };\n\t *\t\t\t\t\t}\n\t *\n\t *\t\t\t\t\treturn null;\n\t *\t\t\t\t}\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t * The `definition.model` parameter specifies which model attribute should be converted from or to. It can be a `{ key, value }` object\n\t * describing the attribute key and value to convert or a `String` specifying just the attribute key (then `value` is set to `true`).\n\t * See {@link module:engine/conversion/conversion~ConverterDefinition} to learn about other parameters.\n\t *\n\t * @param {module:engine/conversion/conversion~ConverterDefinition} definition The converter definition.\n\t */\n\tattributeToElement( definition ) {\n\t\t// Set up downcast converter.\n\t\tthis.for( 'downcast' ).attributeToElement( definition );\n\n\t\t// Set up upcast converter.\n\t\tfor ( const { model, view } of _getAllUpcastDefinitions( definition ) ) {\n\t\t\tthis.for( 'upcast' )\n\t\t\t\t.elementToAttribute( {\n\t\t\t\t\tview,\n\t\t\t\t\tmodel,\n\t\t\t\t\tconverterPriority: definition.converterPriority\n\t\t\t\t} );\n\t\t}\n\t}\n\n\t/**\n\t * Sets up converters between the model and the view that convert a model attribute to a view attribute (and vice versa).\n\t * For example, `<image src='foo.jpg'></image>` is converted to `<img src='foo.jpg'></img>` (the same attribute key and value).\n\t * This type of converters is intended to be used with {@link module:engine/model/element~Element model element} nodes.\n\t * To convert text attributes {@link module:engine/conversion/conversion~Conversion#attributeToElement `attributeToElement converter`}\n\t * should be set up.\n\t *\n\t *\t\t// A simple conversion from the `source` model attribute to the `src` view attribute (and vice versa).\n\t *\t\teditor.conversion.attributeToAttribute( { model: 'source', view: 'src' } );\n\t *\n\t *\t\t// Attribute values are strictly specified.\n\t *\t\teditor.conversion.attributeToAttribute( {\n\t *\t\t\tmodel: {\n\t *\t\t\t\tname: 'image',\n\t *\t\t\t\tkey: 'aside',\n\t *\t\t\t\tvalues: [ 'aside' ]\n\t *\t\t\t},\n\t *\t\t\tview: {\n\t *\t\t\t\taside: {\n\t *\t\t\t\t\tname: 'img',\n\t *\t\t\t\t\tkey: 'class',\n\t *\t\t\t\t\tvalue: [ 'aside', 'half-size' ]\n\t *\t\t\t\t}\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t *\t\t// Set the style attribute.\n\t *\t\teditor.conversion.attributeToAttribute( {\n\t *\t\t\tmodel: {\n\t *\t\t\t\tname: 'image',\n\t *\t\t\t\tkey: 'aside',\n\t *\t\t\t\tvalues: [ 'aside' ]\n\t *\t\t\t},\n\t *\t\t\tview: {\n\t *\t\t\t\taside: {\n\t *\t\t\t\t\tname: 'img',\n\t *\t\t\t\t\tkey: 'style',\n\t *\t\t\t\t\tvalue: {\n\t *\t\t\t\t\t\tfloat: 'right',\n\t *\t\t\t\t\t\twidth: '50%',\n\t *\t\t\t\t\t\tmargin: '5px'\n\t *\t\t\t\t\t}\n\t *\t\t\t\t}\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t *\t\t// Conversion from and to a model attribute key whose value is an enum (`align=right|center`).\n\t *\t\t// Use `upcastAlso` to define other view elements that should also be converted to the `align=right` attribute.\n\t *\t\teditor.conversion.attributeToAttribute( {\n\t *\t\t\tmodel: {\n\t *\t\t\t\tkey: 'align',\n\t *\t\t\t\tvalues: [ 'right', 'center' ]\n\t *\t\t\t},\n\t *\t\t\tview: {\n\t *\t\t\t\tright: {\n\t *\t\t\t\t\tkey: 'class',\n\t *\t\t\t\t\tvalue: 'align-right'\n\t *\t\t\t\t},\n\t *\t\t\t\tcenter: {\n\t *\t\t\t\t\tkey: 'class',\n\t *\t\t\t\t\tvalue: 'align-center'\n\t *\t\t\t\t}\n\t *\t\t\t},\n\t *\t\t\tupcastAlso: {\n\t *\t\t\t\tright: {\n\t *\t\t\t\t\tstyles: {\n\t *\t\t\t\t\t\t'text-align': 'right'\n\t *\t\t\t\t\t}\n\t *\t\t\t\t},\n\t *\t\t\t\tcenter: {\n\t *\t\t\t\t\tstyles: {\n\t *\t\t\t\t\t\t'text-align': 'center'\n\t *\t\t\t\t\t}\n\t *\t\t\t\t}\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t * The `definition.model` parameter specifies which model attribute should be converted from and to.\n\t * It can be a `{ key, [ values ], [ name ] }` object or a `String`, which will be treated like `{ key: definition.model }`.\n\t * The `key` property is the model attribute key to convert from and to.\n\t * The `values` are the possible model attribute values. If `values` is not set, the model attribute value will be the same as the\n\t * view attribute value.\n\t * If `name` is set, the conversion will be set up only for model elements with the given name.\n\t *\n\t * The `definition.view` parameter specifies which view attribute should be converted from and to.\n\t * It can be a `{ key, value, [ name ] }` object or a `String`, which will be treated like `{ key: definition.view }`.\n\t * The `key` property is the view attribute key to convert from and to.\n\t * The `value` is the view attribute value to convert from and to. If `definition.value` is not set, the view attribute value will be\n\t * the same as the model attribute value.\n\t * If `key` is `'class'`, `value` can be a `String` or an array of `String`s.\n\t * If `key` is `'style'`, `value` is an object with key-value pairs.\n\t * In other cases, `value` is a `String`.\n\t * If `name` is set, the conversion will be set up only for model elements with the given name.\n\t * If `definition.model.values` is set, `definition.view` is an object that assigns values from `definition.model.values`\n\t * to `{ key, value, [ name ] }` objects.\n\t *\n\t * `definition.upcastAlso` specifies which other matching view elements should also be upcast to the given model configuration.\n\t * If `definition.model.values` is set, `definition.upcastAlso` should be an object assigning values from `definition.model.values`\n\t * to {@link module:engine/view/matcher~MatcherPattern}s or arrays of {@link module:engine/view/matcher~MatcherPattern}s.\n\t *\n\t * **Note:** `definition.model` and `definition.view` form should be mirrored, so the same types of parameters should\n\t * be given in both parameters.\n\t *\n\t * @param {Object} definition The converter definition.\n\t * @param {String|Object} definition.model The model attribute to convert from and to.\n\t * @param {String|Object} definition.view The view attribute to convert from and to.\n\t * @param {module:engine/view/matcher~MatcherPattern|Array.<module:engine/view/matcher~MatcherPattern>} [definition.upcastAlso]\n\t * Any view element matching `definition.upcastAlso` will also be converted to the given model attribute. `definition.upcastAlso`\n\t * is used only if `config.model.values` is specified.\n\t */\n\tattributeToAttribute( definition ) {\n\t\t// Set up downcast converter.\n\t\tthis.for( 'downcast' ).attributeToAttribute( definition );\n\n\t\t// Set up upcast converter.\n\t\tfor ( const { model, view } of _getAllUpcastDefinitions( definition ) ) {\n\t\t\tthis.for( 'upcast' )\n\t\t\t\t.attributeToAttribute( {\n\t\t\t\t\tview,\n\t\t\t\t\tmodel\n\t\t\t\t} );\n\t\t}\n\t}\n\n\t/**\n\t * Creates and caches conversion helpers for given dispatchers group.\n\t *\n\t * @private\n\t * @param {Object} options\n\t * @param {String} options.name Group name.\n\t * @param {Array.<module:engine/conversion/downcastdispatcher~DowncastDispatcher|\n\t * module:engine/conversion/upcastdispatcher~UpcastDispatcher>} options.dispatchers\n\t * @param {Boolean} options.isDowncast\n\t */\n\t_createConversionHelpers( { name, dispatchers, isDowncast } ) {\n\t\tif ( this._helpers.has( name ) ) {\n\t\t\t/**\n\t\t\t * Trying to register a group name that has already been registered.\n\t\t\t *\n\t\t\t * @error conversion-group-exists\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'conversion-group-exists', this );\n\t\t}\n\n\t\tconst helpers = isDowncast ? new DowncastHelpers( dispatchers ) : new UpcastHelpers( dispatchers );\n\n\t\tthis._helpers.set( name, helpers );\n\t}\n}\n\n/**\n * Defines how the model should be converted from and to the view.\n *\n * @typedef {Object} module:engine/conversion/conversion~ConverterDefinition\n *\n * @property {*} [model] The model conversion definition. Describes the model element or model attribute to convert. This parameter differs\n * for different functions that accept `ConverterDefinition`. See the description of the function to learn how to set it.\n * @property {module:engine/view/elementdefinition~ElementDefinition|Object} view The definition of the view element to convert from and\n * to. If `model` describes multiple values, `view` is an object that assigns these values (`view` object keys) to view element definitions\n * (`view` object values).\n * @property {module:engine/view/matcher~MatcherPattern|Array.<module:engine/view/matcher~MatcherPattern>} [upcastAlso]\n * Any view element matching `upcastAlso` will also be converted to the model. If `model` describes multiple values, `upcastAlso`\n * is an object that assigns these values (`upcastAlso` object keys) to {@link module:engine/view/matcher~MatcherPattern}s\n * (`upcastAlso` object values).\n * @property {module:utils/priorities~PriorityString} [converterPriority] The converter priority.\n */\n\n// Helper function that creates a joint array out of an item passed in `definition.view` and items passed in\n// `definition.upcastAlso`.\n//\n// @param {module:engine/conversion/conversion~ConverterDefinition} definition\n// @returns {Array} Array containing view definitions.\nfunction* _getAllUpcastDefinitions( definition ) {\n\tif ( definition.model.values ) {\n\t\tfor ( const value of definition.model.values ) {\n\t\t\tconst model = { key: definition.model.key, value };\n\t\t\tconst view = definition.view[ value ];\n\t\t\tconst upcastAlso = definition.upcastAlso ? definition.upcastAlso[ value ] : undefined;\n\n\t\t\tyield* _getUpcastDefinition( model, view, upcastAlso );\n\t\t}\n\t} else {\n\t\tyield* _getUpcastDefinition( definition.model, definition.view, definition.upcastAlso );\n\t}\n}\n\nfunction* _getUpcastDefinition( model, view, upcastAlso ) {\n\tyield { model, view };\n\n\tif ( upcastAlso ) {\n\t\tfor ( const upcastAlsoItem of toArray( upcastAlso ) ) {\n\t\t\tyield { model, view: upcastAlsoItem };\n\t\t}\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/batch\n */\n\n/**\n * A batch instance groups model changes ({@link module:engine/model/operation/operation~Operation operations}). All operations\n * grouped in a single batch can be reverted together, so you can also think about a batch as of a single undo step. If you want\n * to extend a given undo step, you can add more changes to the batch using {@link module:engine/model/model~Model#enqueueChange}:\n *\n *\t\tmodel.enqueueChange( batch, writer => {\n *\t\t\twriter.insertText( 'foo', paragraph, 'end' );\n *\t\t} );\n *\n * @see module:engine/model/model~Model#enqueueChange\n * @see module:engine/model/model~Model#change\n */\nexport default class Batch {\n\t/**\n\t * Creates a batch instance.\n\t *\n\t * @see module:engine/model/model~Model#enqueueChange\n\t * @see module:engine/model/model~Model#change\n\t * @param {'transparent'|'default'} [type='default'] The type of the batch.\n\t */\n\tconstructor( type = 'default' ) {\n\t\t/**\n\t\t * An array of operations that compose this batch.\n\t\t *\n\t\t * @readonly\n\t\t * @type {Array.<module:engine/model/operation/operation~Operation>}\n\t\t */\n\t\tthis.operations = [];\n\n\t\t/**\n\t\t * The type of the batch.\n\t\t *\n\t\t * It can be one of the following values:\n\t\t * * `'default'` &ndash; All \"normal\" batches. This is the most commonly used type.\n\t\t * * `'transparent'` &ndash; A batch that should be ignored by other features, i.e. an initial batch or collaborative editing\n\t\t * changes.\n\t\t *\n\t\t * @readonly\n\t\t * @type {'transparent'|'default'}\n\t\t */\n\t\tthis.type = type;\n\t}\n\n\t/**\n\t * Returns the base version of this batch, which is equal to the base version of the first operation in the batch.\n\t * If there are no operations in the batch or neither operation has the base version set, it returns `null`.\n\t *\n\t * @readonly\n\t * @type {Number|null}\n\t */\n\tget baseVersion() {\n\t\tfor ( const op of this.operations ) {\n\t\t\tif ( op.baseVersion !== null ) {\n\t\t\t\treturn op.baseVersion;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Adds an operation to the batch instance.\n\t *\n\t * @param {module:engine/model/operation/operation~Operation} operation An operation to add.\n\t * @returns {module:engine/model/operation/operation~Operation} The added operation.\n\t */\n\taddOperation( operation ) {\n\t\toperation.batch = this;\n\t\tthis.operations.push( operation );\n\n\t\treturn operation;\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/operation/operation\n */\n\n/**\n * Abstract base operation class.\n *\n * @abstract\n */\nexport default class Operation {\n\t/**\n\t * Base operation constructor.\n\t *\n\t * @param {Number|null} baseVersion Document {@link module:engine/model/document~Document#version} on which operation\n\t * can be applied or `null` if the operation operates on detached (non-document) tree.\n\t */\n\tconstructor( baseVersion ) {\n\t\t/**\n\t\t * {@link module:engine/model/document~Document#version} on which operation can be applied. If you try to\n\t\t * {@link module:engine/model/model~Model#applyOperation apply} operation with different base version than the\n\t\t * {@link module:engine/model/document~Document#version document version} the\n\t\t * {@link module:utils/ckeditorerror~CKEditorError model-document-applyOperation-wrong-version} error is thrown.\n\t\t *\n\t\t * @member {Number}\n\t\t */\n\t\tthis.baseVersion = baseVersion;\n\n\t\t/**\n\t\t * Defines whether operation is executed on attached or detached {@link module:engine/model/item~Item items}.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Boolean} #isDocumentOperation\n\t\t */\n\t\tthis.isDocumentOperation = this.baseVersion !== null;\n\n\t\t/**\n\t\t * {@link module:engine/model/batch~Batch Batch} to which the operation is added or `null` if the operation is not\n\t\t * added to any batch yet.\n\t\t *\n\t\t * @member {module:engine/model/batch~Batch|null} #batch\n\t\t */\n\t\tthis.batch = null;\n\n\t\t/**\n\t\t * Operation type.\n\t\t *\n\t\t * @readonly\n\t\t * @member {String} #type\n\t\t */\n\n\t\t/**\n\t\t * Creates and returns an operation that has the same parameters as this operation.\n\t\t *\n\t\t * @method #clone\n\t\t * @returns {module:engine/model/operation/operation~Operation} Clone of this operation.\n\t\t */\n\n\t\t/**\n\t\t * Creates and returns a reverse operation. Reverse operation when executed right after\n\t\t * the original operation will bring back tree model state to the point before the original\n\t\t * operation execution. In other words, it reverses changes done by the original operation.\n\t\t *\n\t\t * Keep in mind that tree model state may change since executing the original operation,\n\t\t * so reverse operation will be \"outdated\". In that case you will need to transform it by\n\t\t * all operations that were executed after the original operation.\n\t\t *\n\t\t * @method #getReversed\n\t\t * @returns {module:engine/model/operation/operation~Operation} Reversed operation.\n\t\t */\n\n\t\t/**\n\t\t * Executes the operation - modifications described by the operation properties will be applied to the model tree.\n\t\t *\n\t\t * @protected\n\t\t * @method #_execute\n\t\t */\n\t}\n\n\t/**\n\t * Checks whether the operation's parameters are correct and the operation can be correctly executed. Throws\n\t * an error if operation is not valid.\n\t *\n\t * @protected\n\t * @method #_validate\n\t */\n\t_validate() {\n\t}\n\n\t/**\n\t * Custom toJSON method to solve child-parent circular dependencies.\n\t *\n\t * @method #toJSON\n\t * @returns {Object} Clone of this object with the operation property replaced with string.\n\t */\n\ttoJSON() {\n\t\t// This method creates only a shallow copy, all nested objects should be defined separately.\n\t\t// See https://github.com/ckeditor/ckeditor5-engine/issues/1477.\n\t\tconst json = Object.assign( {}, this );\n\n\t\tjson.__className = this.constructor.className;\n\n\t\t// Remove reference to the parent `Batch` to avoid circular dependencies.\n\t\tdelete json.batch;\n\n\t\t// Only document operations are shared with other clients so it is not necessary to keep this information.\n\t\tdelete json.isDocumentOperation;\n\n\t\treturn json;\n\t}\n\n\t/**\n\t * Name of the operation class used for serialization.\n\t *\n\t * @type {String}\n\t */\n\tstatic get className() {\n\t\treturn 'Operation';\n\t}\n\n\t/**\n\t * Creates Operation object from deserilized object, i.e. from parsed JSON string.\n\t *\n\t * @param {Object} json Deserialized JSON object.\n\t * @param {module:engine/model/document~Document} doc Document on which this operation will be applied.\n\t * @returns {module:engine/model/operation/operation~Operation}\n\t */\n\tstatic fromJSON( json ) {\n\t\treturn new this( json.baseVersion );\n\t}\n\n\t// @if CK_DEBUG_ENGINE // log() {\n\t// @if CK_DEBUG_ENGINE // \tconsole.log( this.toString() );\n\t// @if CK_DEBUG_ENGINE // }\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module module:engine/model/documentfragment\n */\n\nimport NodeList from './nodelist';\nimport Element from './element';\nimport Text from './text';\nimport TextProxy from './textproxy';\nimport isIterable from '@ckeditor/ckeditor5-utils/src/isiterable';\n\n// @if CK_DEBUG_ENGINE // const { stringifyMap } = require( '../dev-utils/utils' );\n\n/**\n * DocumentFragment represents a part of model which does not have a common root but its top-level nodes\n * can be seen as siblings. In other words, it is a detached part of model tree, without a root.\n *\n * DocumentFragment has own {@link module:engine/model/markercollection~MarkerCollection}. Markers from this collection\n * will be set to the {@link module:engine/model/model~Model#markers model markers} by a\n * {@link module:engine/model/writer~Writer#insert} function.\n */\nexport default class DocumentFragment {\n\t/**\n\t * Creates an empty `DocumentFragment`.\n\t *\n\t * **Note:** Constructor of this class shouldn't be used directly in the code.\n\t * Use the {@link module:engine/model/writer~Writer#createDocumentFragment} method instead.\n\t *\n\t * @protected\n\t * @param {module:engine/model/node~Node|Iterable.<module:engine/model/node~Node>} [children]\n\t * Nodes to be contained inside the `DocumentFragment`.\n\t */\n\tconstructor( children ) {\n\t\t/**\n\t\t * DocumentFragment static markers map. This is a list of names and {@link module:engine/model/range~Range ranges}\n\t\t * which will be set as Markers to {@link module:engine/model/model~Model#markers model markers collection}\n\t\t * when DocumentFragment will be inserted to the document.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Map<String,module:engine/model/range~Range>} module:engine/model/documentfragment~DocumentFragment#markers\n\t\t */\n\t\tthis.markers = new Map();\n\n\t\t/**\n\t\t * List of nodes contained inside the document fragment.\n\t\t *\n\t\t * @private\n\t\t * @member {module:engine/model/nodelist~NodeList} module:engine/model/documentfragment~DocumentFragment#_children\n\t\t */\n\t\tthis._children = new NodeList();\n\n\t\tif ( children ) {\n\t\t\tthis._insertChild( 0, children );\n\t\t}\n\t}\n\n\t/**\n\t * Returns an iterator that iterates over all nodes contained inside this document fragment.\n\t *\n\t * @returns {Iterable.<module:engine/model/node~Node>}\n\t */\n\t[ Symbol.iterator ]() {\n\t\treturn this.getChildren();\n\t}\n\n\t/**\n\t * Number of this document fragment's children.\n\t *\n\t * @readonly\n\t * @type {Number}\n\t */\n\tget childCount() {\n\t\treturn this._children.length;\n\t}\n\n\t/**\n\t * Sum of {@link module:engine/model/node~Node#offsetSize offset sizes} of all of this document fragment's children.\n\t *\n\t * @readonly\n\t * @type {Number}\n\t */\n\tget maxOffset() {\n\t\treturn this._children.maxOffset;\n\t}\n\n\t/**\n\t * Is `true` if there are no nodes inside this document fragment, `false` otherwise.\n\t *\n\t * @readonly\n\t * @type {Boolean}\n\t */\n\tget isEmpty() {\n\t\treturn this.childCount === 0;\n\t}\n\n\t/**\n\t * Artificial root of `DocumentFragment`. Returns itself. Added for compatibility reasons.\n\t *\n\t * @readonly\n\t * @type {module:engine/model/documentfragment~DocumentFragment}\n\t */\n\tget root() {\n\t\treturn this;\n\t}\n\n\t/**\n\t * Artificial parent of `DocumentFragment`. Returns `null`. Added for compatibility reasons.\n\t *\n\t * @readonly\n\t * @type {null}\n\t */\n\tget parent() {\n\t\treturn null;\n\t}\n\n\t/**\n\t * Checks whether this object is of the given type.\n\t *\n\t *\t\tdocFrag.is( 'documentFragment' ); // -> true\n\t *\t\tdocFrag.is( 'model:documentFragment' ); // -> true\n\t *\n\t *\t\tdocFrag.is( 'view:documentFragment' ); // -> false\n\t *\t\tdocFrag.is( 'element' ); // -> false\n\t *\t\tdocFrag.is( 'node' ); // -> false\n\t *\n\t * {@link module:engine/model/node~Node#is Check the entire list of model objects} which implement the `is()` method.\n\t *\n\t * @param {String} type\n\t * @returns {Boolean}\n\t */\n\tis( type ) {\n\t\treturn type === 'documentFragment' || type === 'model:documentFragment';\n\t}\n\n\t/**\n\t * Gets the child at the given index. Returns `null` if incorrect index was passed.\n\t *\n\t * @param {Number} index Index of child.\n\t * @returns {module:engine/model/node~Node|null} Child node.\n\t */\n\tgetChild( index ) {\n\t\treturn this._children.getNode( index );\n\t}\n\n\t/**\n\t * Returns an iterator that iterates over all of this document fragment's children.\n\t *\n\t * @returns {Iterable.<module:engine/model/node~Node>}\n\t */\n\tgetChildren() {\n\t\treturn this._children[ Symbol.iterator ]();\n\t}\n\n\t/**\n\t * Returns an index of the given child node. Returns `null` if given node is not a child of this document fragment.\n\t *\n\t * @param {module:engine/model/node~Node} node Child node to look for.\n\t * @returns {Number|null} Child node's index.\n\t */\n\tgetChildIndex( node ) {\n\t\treturn this._children.getNodeIndex( node );\n\t}\n\n\t/**\n\t * Returns the starting offset of given child. Starting offset is equal to the sum of\n\t * {@link module:engine/model/node~Node#offsetSize offset sizes} of all node's siblings that are before it. Returns `null` if\n\t * given node is not a child of this document fragment.\n\t *\n\t * @param {module:engine/model/node~Node} node Child node to look for.\n\t * @returns {Number|null} Child node's starting offset.\n\t */\n\tgetChildStartOffset( node ) {\n\t\treturn this._children.getNodeStartOffset( node );\n\t}\n\n\t/**\n\t * Returns path to a `DocumentFragment`, which is an empty array. Added for compatibility reasons.\n\t *\n\t * @returns {Array}\n\t */\n\tgetPath() {\n\t\treturn [];\n\t}\n\n\t/**\n\t * Returns a descendant node by its path relative to this element.\n\t *\n\t *\t\t// <this>a<b>c</b></this>\n\t *\t\tthis.getNodeByPath( [ 0 ] );     // -> \"a\"\n\t *\t\tthis.getNodeByPath( [ 1 ] );     // -> <b>\n\t *\t\tthis.getNodeByPath( [ 1, 0 ] );  // -> \"c\"\n\t *\n\t * @param {Array.<Number>} relativePath Path of the node to find, relative to this element.\n\t * @returns {module:engine/model/node~Node|module:engine/model/documentfragment~DocumentFragment}\n\t */\n\tgetNodeByPath( relativePath ) {\n\t\tlet node = this; // eslint-disable-line consistent-this\n\n\t\tfor ( const index of relativePath ) {\n\t\t\tnode = node.getChild( node.offsetToIndex( index ) );\n\t\t}\n\n\t\treturn node;\n\t}\n\n\t/**\n\t * Converts offset \"position\" to index \"position\".\n\t *\n\t * Returns index of a node that occupies given offset. If given offset is too low, returns `0`. If given offset is\n\t * too high, returns index after last child}.\n\t *\n\t *\t\tconst textNode = new Text( 'foo' );\n\t *\t\tconst pElement = new Element( 'p' );\n\t *\t\tconst docFrag = new DocumentFragment( [ textNode, pElement ] );\n\t *\t\tdocFrag.offsetToIndex( -1 ); // Returns 0, because offset is too low.\n\t *\t\tdocFrag.offsetToIndex( 0 ); // Returns 0, because offset 0 is taken by `textNode` which is at index 0.\n\t *\t\tdocFrag.offsetToIndex( 1 ); // Returns 0, because `textNode` has `offsetSize` equal to 3, so it occupies offset 1 too.\n\t *\t\tdocFrag.offsetToIndex( 2 ); // Returns 0.\n\t *\t\tdocFrag.offsetToIndex( 3 ); // Returns 1.\n\t *\t\tdocFrag.offsetToIndex( 4 ); // Returns 2. There are no nodes at offset 4, so last available index is returned.\n\t *\n\t * @param {Number} offset Offset to look for.\n\t * @returns {Number} Index of a node that occupies given offset.\n\t */\n\toffsetToIndex( offset ) {\n\t\treturn this._children.offsetToIndex( offset );\n\t}\n\n\t/**\n\t * Converts `DocumentFragment` instance to plain object and returns it.\n\t * Takes care of converting all of this document fragment's children.\n\t *\n\t * @returns {Object} `DocumentFragment` instance converted to plain object.\n\t */\n\ttoJSON() {\n\t\tconst json = [];\n\n\t\tfor ( const node of this._children ) {\n\t\t\tjson.push( node.toJSON() );\n\t\t}\n\n\t\treturn json;\n\t}\n\n\t/**\n\t * Creates a `DocumentFragment` instance from given plain object (i.e. parsed JSON string).\n\t * Converts `DocumentFragment` children to proper nodes.\n\t *\n\t * @param {Object} json Plain object to be converted to `DocumentFragment`.\n\t * @returns {module:engine/model/documentfragment~DocumentFragment} `DocumentFragment` instance created using given plain object.\n\t */\n\tstatic fromJSON( json ) {\n\t\tconst children = [];\n\n\t\tfor ( const child of json ) {\n\t\t\tif ( child.name ) {\n\t\t\t\t// If child has name property, it is an Element.\n\t\t\t\tchildren.push( Element.fromJSON( child ) );\n\t\t\t} else {\n\t\t\t\t// Otherwise, it is a Text node.\n\t\t\t\tchildren.push( Text.fromJSON( child ) );\n\t\t\t}\n\t\t}\n\n\t\treturn new DocumentFragment( children );\n\t}\n\n\t/**\n\t * {@link #_insertChild Inserts} one or more nodes at the end of this document fragment.\n\t *\n\t * @protected\n\t * @param {module:engine/model/item~Item|Iterable.<module:engine/model/item~Item>} items Items to be inserted.\n\t */\n\t_appendChild( items ) {\n\t\tthis._insertChild( this.childCount, items );\n\t}\n\n\t/**\n\t * Inserts one or more nodes at the given index and sets {@link module:engine/model/node~Node#parent parent} of these nodes\n\t * to this document fragment.\n\t *\n\t * @protected\n\t * @param {Number} index Index at which nodes should be inserted.\n\t * @param {module:engine/model/item~Item|Iterable.<module:engine/model/item~Item>} items Items to be inserted.\n\t */\n\t_insertChild( index, items ) {\n\t\tconst nodes = normalize( items );\n\n\t\tfor ( const node of nodes ) {\n\t\t\t// If node that is being added to this element is already inside another element, first remove it from the old parent.\n\t\t\tif ( node.parent !== null ) {\n\t\t\t\tnode._remove();\n\t\t\t}\n\n\t\t\tnode.parent = this;\n\t\t}\n\n\t\tthis._children._insertNodes( index, nodes );\n\t}\n\n\t/**\n\t * Removes one or more nodes starting at the given index\n\t * and sets {@link module:engine/model/node~Node#parent parent} of these nodes to `null`.\n\t *\n\t * @protected\n\t * @param {Number} index Index of the first node to remove.\n\t * @param {Number} [howMany=1] Number of nodes to remove.\n\t * @returns {Array.<module:engine/model/node~Node>} Array containing removed nodes.\n\t */\n\t_removeChildren( index, howMany = 1 ) {\n\t\tconst nodes = this._children._removeNodes( index, howMany );\n\n\t\tfor ( const node of nodes ) {\n\t\t\tnode.parent = null;\n\t\t}\n\n\t\treturn nodes;\n\t}\n\n\t// @if CK_DEBUG_ENGINE // toString() {\n\t// @if CK_DEBUG_ENGINE // \treturn 'documentFragment';\n\t// @if CK_DEBUG_ENGINE // }\n\n\t// @if CK_DEBUG_ENGINE // log() {\n\t// @if CK_DEBUG_ENGINE // \tconsole.log( 'ModelDocumentFragment: ' + this );\n\t// @if CK_DEBUG_ENGINE // }\n\n\t// @if CK_DEBUG_ENGINE // printTree() {\n\t// @if CK_DEBUG_ENGINE //\tlet string = 'ModelDocumentFragment: [';\n\n\t// @if CK_DEBUG_ENGINE //\tfor ( const child of this.getChildren() ) {\n\t// @if CK_DEBUG_ENGINE //\t\tstring += '\\n';\n\n\t// @if CK_DEBUG_ENGINE //\t\tif ( child.is( '$text' ) ) {\n\t// @if CK_DEBUG_ENGINE //\t\t\tconst textAttrs = stringifyMap( child._attrs );\n\n\t// @if CK_DEBUG_ENGINE //\t\t\tstring += '\\t'.repeat( 1 );\n\n\t// @if CK_DEBUG_ENGINE //\t\t\tif ( textAttrs !== '' ) {\n\t// @if CK_DEBUG_ENGINE //\t\t\t\tstring += `<$text${ textAttrs }>` + child.data + '</$text>';\n\t// @if CK_DEBUG_ENGINE //\t\t\t} else {\n\t// @if CK_DEBUG_ENGINE //\t\t\t\tstring += child.data;\n\t// @if CK_DEBUG_ENGINE //\t\t\t}\n\t// @if CK_DEBUG_ENGINE //\t\t} else {\n\t// @if CK_DEBUG_ENGINE //\t\t\tstring += child.printTree( 1 );\n\t// @if CK_DEBUG_ENGINE //\t\t}\n\t// @if CK_DEBUG_ENGINE //\t}\n\n\t// @if CK_DEBUG_ENGINE //\tstring += '\\n]';\n\n\t// @if CK_DEBUG_ENGINE //\treturn string;\n\t// @if CK_DEBUG_ENGINE // }\n\n\t// @if CK_DEBUG_ENGINE // logTree() {\n\t// @if CK_DEBUG_ENGINE // \tconsole.log( this.printTree() );\n\t// @if CK_DEBUG_ENGINE // }\n}\n\n// Converts strings to Text and non-iterables to arrays.\n//\n// @param {String|module:engine/model/item~Item|Iterable.<module:engine/model/item~Item>}\n// @returns {Iterable.<module:engine/model/node~Node>}\nfunction normalize( nodes ) {\n\t// Separate condition because string is iterable.\n\tif ( typeof nodes == 'string' ) {\n\t\treturn [ new Text( nodes ) ];\n\t}\n\n\tif ( !isIterable( nodes ) ) {\n\t\tnodes = [ nodes ];\n\t}\n\n\t// Array.from to enable .map() on non-arrays.\n\treturn Array.from( nodes )\n\t\t.map( node => {\n\t\t\tif ( typeof node == 'string' ) {\n\t\t\t\treturn new Text( node );\n\t\t\t}\n\n\t\t\tif ( node instanceof TextProxy ) {\n\t\t\t\treturn new Text( node.data, node.getAttributes() );\n\t\t\t}\n\n\t\t\treturn node;\n\t\t} );\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/operation/utils\n */\n\nimport Node from '../node';\nimport Text from '../text';\nimport TextProxy from '../textproxy';\nimport Range from '../range';\nimport DocumentFragment from '../documentfragment';\nimport NodeList from '../nodelist';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n\n/**\n * Contains functions used for composing model tree by {@link module:engine/model/operation/operation~Operation operations}.\n * Those functions are built on top of {@link module:engine/model/node~Node node}, and it's child classes', APIs.\n *\n * @protected\n * @namespace utils\n */\n\n/**\n * Inserts given nodes at given position.\n *\n * @protected\n * @function module:engine/model/operation/utils~utils.insert\n * @param {module:engine/model/position~Position} position Position at which nodes should be inserted.\n * @param {module:engine/model/node~NodeSet} nodes Nodes to insert.\n * @returns {module:engine/model/range~Range} Range spanning over inserted elements.\n */\nexport function _insert( position, nodes ) {\n\tnodes = _normalizeNodes( nodes );\n\n\t// We have to count offset before inserting nodes because they can get merged and we would get wrong offsets.\n\tconst offset = nodes.reduce( ( sum, node ) => sum + node.offsetSize, 0 );\n\tconst parent = position.parent;\n\n\t// Insertion might be in a text node, we should split it if that's the case.\n\t_splitNodeAtPosition( position );\n\tconst index = position.index;\n\n\t// Insert nodes at given index. After splitting we have a proper index and insertion is between nodes,\n\t// using basic `Element` API.\n\tparent._insertChild( index, nodes );\n\n\t// Merge text nodes, if possible. Merging is needed only at points where inserted nodes \"touch\" \"old\" nodes.\n\t_mergeNodesAtIndex( parent, index + nodes.length );\n\t_mergeNodesAtIndex( parent, index );\n\n\treturn new Range( position, position.getShiftedBy( offset ) );\n}\n\n/**\n * Removed nodes in given range. Only {@link module:engine/model/range~Range#isFlat flat} ranges are accepted.\n *\n * @protected\n * @function module:engine/model/operation/utils~utils._remove\n * @param {module:engine/model/range~Range} range Range containing nodes to remove.\n * @returns {Array.<module:engine/model/node~Node>}\n */\nexport function _remove( range ) {\n\tif ( !range.isFlat ) {\n\t\t/**\n\t\t * Trying to remove a range which starts and ends in different element.\n\t\t *\n\t\t * @error operation-utils-remove-range-not-flat\n\t\t */\n\t\tthrow new CKEditorError(\n\t\t\t'operation-utils-remove-range-not-flat',\n\t\t\tthis\n\t\t);\n\t}\n\n\tconst parent = range.start.parent;\n\n\t// Range may be inside text nodes, we have to split them if that's the case.\n\t_splitNodeAtPosition( range.start );\n\t_splitNodeAtPosition( range.end );\n\n\t// Remove the text nodes using basic `Element` API.\n\tconst removed = parent._removeChildren( range.start.index, range.end.index - range.start.index );\n\n\t// Merge text nodes, if possible. After some nodes were removed, node before and after removed range will be\n\t// touching at the position equal to the removed range beginning. We check merging possibility there.\n\t_mergeNodesAtIndex( parent, range.start.index );\n\n\treturn removed;\n}\n\n/**\n * Moves nodes in given range to given target position. Only {@link module:engine/model/range~Range#isFlat flat} ranges are accepted.\n *\n * @protected\n * @function module:engine/model/operation/utils~utils.move\n * @param {module:engine/model/range~Range} sourceRange Range containing nodes to move.\n * @param {module:engine/model/position~Position} targetPosition Position to which nodes should be moved.\n * @returns {module:engine/model/range~Range} Range containing moved nodes.\n */\nexport function _move( sourceRange, targetPosition ) {\n\tif ( !sourceRange.isFlat ) {\n\t\t/**\n\t\t * Trying to move a range which starts and ends in different element.\n\t\t *\n\t\t * @error operation-utils-move-range-not-flat\n\t\t */\n\t\tthrow new CKEditorError(\n\t\t\t'operation-utils-move-range-not-flat',\n\t\t\tthis\n\t\t);\n\t}\n\n\tconst nodes = _remove( sourceRange );\n\n\t// We have to fix `targetPosition` because model changed after nodes from `sourceRange` got removed and\n\t// that change might have an impact on `targetPosition`.\n\ttargetPosition = targetPosition._getTransformedByDeletion( sourceRange.start, sourceRange.end.offset - sourceRange.start.offset );\n\n\treturn _insert( targetPosition, nodes );\n}\n\n/**\n * Sets given attribute on nodes in given range. The attributes are only set on top-level nodes of the range, not on its children.\n *\n * @protected\n * @function module:engine/model/operation/utils~utils._setAttribute\n * @param {module:engine/model/range~Range} range Range containing nodes that should have the attribute set. Must be a flat range.\n * @param {String} key Key of attribute to set.\n * @param {*} value Attribute value.\n */\nexport function _setAttribute( range, key, value ) {\n\t// Range might start or end in text nodes, so we have to split them.\n\t_splitNodeAtPosition( range.start );\n\t_splitNodeAtPosition( range.end );\n\n\t// Iterate over all items in the range.\n\tfor ( const item of range.getItems( { shallow: true } ) ) {\n\t\t// Iterator will return `TextProxy` instances but we know that those text proxies will\n\t\t// always represent full text nodes (this is guaranteed thanks to splitting we did before).\n\t\t// So, we can operate on those text proxies' text nodes.\n\t\tconst node = item.is( '$textProxy' ) ? item.textNode : item;\n\n\t\tif ( value !== null ) {\n\t\t\tnode._setAttribute( key, value );\n\t\t} else {\n\t\t\tnode._removeAttribute( key );\n\t\t}\n\n\t\t// After attributes changing it may happen that some text nodes can be merged. Try to merge with previous node.\n\t\t_mergeNodesAtIndex( node.parent, node.index );\n\t}\n\n\t// Try to merge last changed node with it's previous sibling (not covered by the loop above).\n\t_mergeNodesAtIndex( range.end.parent, range.end.index );\n}\n\n/**\n * Normalizes given object or an array of objects to an array of {@link module:engine/model/node~Node nodes}. See\n * {@link module:engine/model/node~NodeSet NodeSet} for details on how normalization is performed.\n *\n * @protected\n * @function module:engine/model/operation/utils~utils.normalizeNodes\n * @param {module:engine/model/node~NodeSet} nodes Objects to normalize.\n * @returns {Array.<module:engine/model/node~Node>} Normalized nodes.\n */\nexport function _normalizeNodes( nodes ) {\n\tconst normalized = [];\n\n\tif ( !( nodes instanceof Array ) ) {\n\t\tnodes = [ nodes ];\n\t}\n\n\t// Convert instances of classes other than Node.\n\tfor ( let i = 0; i < nodes.length; i++ ) {\n\t\tif ( typeof nodes[ i ] == 'string' ) {\n\t\t\tnormalized.push( new Text( nodes[ i ] ) );\n\t\t} else if ( nodes[ i ] instanceof TextProxy ) {\n\t\t\tnormalized.push( new Text( nodes[ i ].data, nodes[ i ].getAttributes() ) );\n\t\t} else if ( nodes[ i ] instanceof DocumentFragment || nodes[ i ] instanceof NodeList ) {\n\t\t\tfor ( const child of nodes[ i ] ) {\n\t\t\t\tnormalized.push( child );\n\t\t\t}\n\t\t} else if ( nodes[ i ] instanceof Node ) {\n\t\t\tnormalized.push( nodes[ i ] );\n\t\t}\n\t\t// Skip unrecognized type.\n\t}\n\n\t// Merge text nodes.\n\tfor ( let i = 1; i < normalized.length; i++ ) {\n\t\tconst node = normalized[ i ];\n\t\tconst prev = normalized[ i - 1 ];\n\n\t\tif ( node instanceof Text && prev instanceof Text && _haveSameAttributes( node, prev ) ) {\n\t\t\t// Doing this instead changing `prev.data` because `data` is readonly.\n\t\t\tnormalized.splice( i - 1, 2, new Text( prev.data + node.data, prev.getAttributes() ) );\n\t\t\ti--;\n\t\t}\n\t}\n\n\treturn normalized;\n}\n\n// Checks if nodes before and after given index in given element are {@link module:engine/model/text~Text text nodes} and\n// merges them into one node if they have same attributes.\n//\n// Merging is done by removing two text nodes and inserting a new text node containing data from both merged text nodes.\n//\n// @private\n// @param {module:engine/model/element~Element} element Parent element of nodes to merge.\n// @param {Number} index Index between nodes to merge.\nfunction _mergeNodesAtIndex( element, index ) {\n\tconst nodeBefore = element.getChild( index - 1 );\n\tconst nodeAfter = element.getChild( index );\n\n\t// Check if both of those nodes are text objects with same attributes.\n\tif ( nodeBefore && nodeAfter && nodeBefore.is( '$text' ) && nodeAfter.is( '$text' ) && _haveSameAttributes( nodeBefore, nodeAfter ) ) {\n\t\t// Append text of text node after index to the before one.\n\t\tconst mergedNode = new Text( nodeBefore.data + nodeAfter.data, nodeBefore.getAttributes() );\n\n\t\t// Remove separate text nodes.\n\t\telement._removeChildren( index - 1, 2 );\n\n\t\t// Insert merged text node.\n\t\telement._insertChild( index - 1, mergedNode );\n\t}\n}\n\n// Checks if given position is in a text node, and if so, splits the text node in two text nodes, each of them\n// containing a part of original text node.\n//\n// @private\n// @param {module:engine/model/position~Position} position Position at which node should be split.\nfunction _splitNodeAtPosition( position ) {\n\tconst textNode = position.textNode;\n\tconst element = position.parent;\n\n\tif ( textNode ) {\n\t\tconst offsetDiff = position.offset - textNode.startOffset;\n\t\tconst index = textNode.index;\n\n\t\telement._removeChildren( index, 1 );\n\n\t\tconst firstPart = new Text( textNode.data.substr( 0, offsetDiff ), textNode.getAttributes() );\n\t\tconst secondPart = new Text( textNode.data.substr( offsetDiff ), textNode.getAttributes() );\n\n\t\telement._insertChild( index, [ firstPart, secondPart ] );\n\t}\n}\n\n// Checks whether two given nodes have same attributes.\n//\n// @private\n// @param {module:engine/model/node~Node} nodeA Node to check.\n// @param {module:engine/model/node~Node} nodeB Node to check.\n// @returns {Boolean} `true` if nodes have same attributes, `false` otherwise.\nfunction _haveSameAttributes( nodeA, nodeB ) {\n\tconst iteratorA = nodeA.getAttributes();\n\tconst iteratorB = nodeB.getAttributes();\n\n\tfor ( const attr of iteratorA ) {\n\t\tif ( attr[ 1 ] !== nodeB.getAttribute( attr[ 0 ] ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\titeratorB.next();\n\t}\n\n\treturn iteratorB.next().done;\n}\n\n/**\n * Value that can be normalized to an array of {@link module:engine/model/node~Node nodes}.\n *\n * Non-arrays are normalized as follows:\n * * {@link module:engine/model/node~Node Node} is left as is,\n * * {@link module:engine/model/textproxy~TextProxy TextProxy} and `String` are normalized to {@link module:engine/model/text~Text Text},\n * * {@link module:engine/model/nodelist~NodeList NodeList} is normalized to an array containing all nodes that are in that node list,\n * * {@link module:engine/model/documentfragment~DocumentFragment DocumentFragment} is normalized to an array containing all of it's\n * * children.\n *\n * Arrays are processed item by item like non-array values and flattened to one array. Normalization always results in\n * a flat array of {@link module:engine/model/node~Node nodes}. Consecutive text nodes (or items normalized to text nodes) will be\n * merged if they have same attributes.\n *\n * @typedef {module:engine/model/node~Node|module:engine/model/textproxy~TextProxy|String|\n * module:engine/model/nodelist~NodeList|module:engine/model/documentfragment~DocumentFragment|Iterable}\n * module:engine/model/node~NodeSet\n */\n","import baseIsEqual from './_baseIsEqual.js';\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\nexport default isEqual;\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/operation/attributeoperation\n */\n\nimport Operation from './operation';\nimport Range from '../range';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport { _setAttribute } from './utils';\nimport { isEqual } from 'lodash-es';\n\n/**\n * Operation to change nodes' attribute.\n *\n * Using this class you can add, remove or change value of the attribute.\n *\n * @extends module:engine/model/operation/operation~Operation\n */\nexport default class AttributeOperation extends Operation {\n\t/**\n\t * Creates an operation that changes, removes or adds attributes.\n\t *\n\t * If only `newValue` is set, attribute will be added on a node. Note that all nodes in operation's range must not\n\t * have an attribute with the same key as the added attribute.\n\t *\n\t * If only `oldValue` is set, then attribute with given key will be removed. Note that all nodes in operation's range\n\t * must have an attribute with that key added.\n\t *\n\t * If both `newValue` and `oldValue` are set, then the operation will change the attribute value. Note that all nodes in\n\t * operation's ranges must already have an attribute with given key and `oldValue` as value\n\t *\n\t * @param {module:engine/model/range~Range} range Range on which the operation should be applied. Must be a flat range.\n\t * @param {String} key Key of an attribute to change or remove.\n\t * @param {*} oldValue Old value of the attribute with given key or `null`, if attribute was not set before.\n\t * @param {*} newValue New value of the attribute with given key or `null`, if operation should remove attribute.\n\t * @param {Number|null} baseVersion Document {@link module:engine/model/document~Document#version} on which operation\n\t * can be applied or `null` if the operation operates on detached (non-document) tree.\n\t */\n\tconstructor( range, key, oldValue, newValue, baseVersion ) {\n\t\tsuper( baseVersion );\n\n\t\t/**\n\t\t * Range on which operation should be applied.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/model/range~Range}\n\t\t */\n\t\tthis.range = range.clone();\n\n\t\t/**\n\t\t * Key of an attribute to change or remove.\n\t\t *\n\t\t * @readonly\n\t\t * @member {String}\n\t\t */\n\t\tthis.key = key;\n\n\t\t/**\n\t\t * Old value of the attribute with given key or `null`, if attribute was not set before.\n\t\t *\n\t\t * @readonly\n\t\t * @member {*}\n\t\t */\n\t\tthis.oldValue = oldValue === undefined ? null : oldValue;\n\n\t\t/**\n\t\t * New value of the attribute with given key or `null`, if operation should remove attribute.\n\t\t *\n\t\t * @readonly\n\t\t * @member {*}\n\t\t */\n\t\tthis.newValue = newValue === undefined ? null : newValue;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tget type() {\n\t\tif ( this.oldValue === null ) {\n\t\t\treturn 'addAttribute';\n\t\t} else if ( this.newValue === null ) {\n\t\t\treturn 'removeAttribute';\n\t\t} else {\n\t\t\treturn 'changeAttribute';\n\t\t}\n\t}\n\n\t/**\n\t * Creates and returns an operation that has the same parameters as this operation.\n\t *\n\t * @returns {module:engine/model/operation/attributeoperation~AttributeOperation} Clone of this operation.\n\t */\n\tclone() {\n\t\treturn new AttributeOperation( this.range, this.key, this.oldValue, this.newValue, this.baseVersion );\n\t}\n\n\t/**\n\t * See {@link module:engine/model/operation/operation~Operation#getReversed `Operation#getReversed()`}.\n\t *\n\t * @returns {module:engine/model/operation/attributeoperation~AttributeOperation}\n\t */\n\tgetReversed() {\n\t\treturn new AttributeOperation( this.range, this.key, this.newValue, this.oldValue, this.baseVersion + 1 );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\ttoJSON() {\n\t\tconst json = super.toJSON();\n\n\t\tjson.range = this.range.toJSON();\n\n\t\treturn json;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\t_validate() {\n\t\tif ( !this.range.isFlat ) {\n\t\t\t/**\n\t\t\t * The range to change is not flat.\n\t\t\t *\n\t\t\t * @error attribute-operation-range-not-flat\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'attribute-operation-range-not-flat', this );\n\t\t}\n\n\t\tfor ( const item of this.range.getItems( { shallow: true } ) ) {\n\t\t\tif ( this.oldValue !== null && !isEqual( item.getAttribute( this.key ), this.oldValue ) ) {\n\t\t\t\t/**\n\t\t\t\t * Changed node has different attribute value than operation's old attribute value.\n\t\t\t\t *\n\t\t\t\t * @error attribute-operation-wrong-old-value\n\t\t\t\t * @param {module:engine/model/item~Item} item\n\t\t\t\t * @param {String} key\n\t\t\t\t * @param {*} value\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError(\n\t\t\t\t\t'attribute-operation-wrong-old-value',\n\t\t\t\t\tthis,\n\t\t\t\t\t{ item, key: this.key, value: this.oldValue }\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif ( this.oldValue === null && this.newValue !== null && item.hasAttribute( this.key ) ) {\n\t\t\t\t/**\n\t\t\t\t * The attribute with given key already exists for the given node.\n\t\t\t\t *\n\t\t\t\t * @error attribute-operation-attribute-exists\n\t\t\t\t * @param {module:engine/model/node~Node} node\n\t\t\t\t * @param {String} key\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError(\n\t\t\t\t\t'attribute-operation-attribute-exists',\n\t\t\t\t\tthis,\n\t\t\t\t\t{ node: item, key: this.key }\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\t_execute() {\n\t\t// If value to set is same as old value, don't do anything.\n\t\tif ( !isEqual( this.oldValue, this.newValue ) ) {\n\t\t\t// Execution.\n\t\t\t_setAttribute( this.range, this.key, this.newValue );\n\t\t}\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get className() {\n\t\treturn 'AttributeOperation';\n\t}\n\n\t/**\n\t * Creates `AttributeOperation` object from deserilized object, i.e. from parsed JSON string.\n\t *\n\t * @param {Object} json Deserialized JSON object.\n\t * @param {module:engine/model/document~Document} document Document on which this operation will be applied.\n\t * @returns {module:engine/model/operation/attributeoperation~AttributeOperation}\n\t */\n\tstatic fromJSON( json, document ) {\n\t\treturn new AttributeOperation( Range.fromJSON( json.range, document ), json.key, json.oldValue, json.newValue, json.baseVersion );\n\t}\n\n\t// @if CK_DEBUG_ENGINE // toString() {\n\t// @if CK_DEBUG_ENGINE // \treturn `AttributeOperation( ${ this.baseVersion } ): ` +\n\t// @if CK_DEBUG_ENGINE //\t\t`\"${ this.key }\": ${ JSON.stringify( this.oldValue ) }` +\n\t// @if CK_DEBUG_ENGINE //\t\t` -> ${ JSON.stringify( this.newValue ) }, ${ this.range }`;\n\t// @if CK_DEBUG_ENGINE // }\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/operation/detachoperation\n */\n\nimport Operation from './operation';\nimport Range from '../range';\nimport { _remove } from './utils';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n\n// @if CK_DEBUG_ENGINE // const ModelRange = require( '../range' ).default;\n\n/**\n * Operation to permanently remove node from detached root.\n * Note this operation is only a local operation and won't be send to the other clients.\n *\n * @extends module:engine/model/operation/operation~Operation\n */\nexport default class DetachOperation extends Operation {\n\t/**\n\t * Creates an insert operation.\n\t *\n\t * @param {module:engine/model/position~Position} sourcePosition\n\t * Position before the first {@link module:engine/model/item~Item model item} to move.\n\t * @param {Number} howMany Offset size of moved range. Moved range will start from `sourcePosition` and end at\n\t * `sourcePosition` with offset shifted by `howMany`.\n\t */\n\tconstructor( sourcePosition, howMany ) {\n\t\tsuper( null );\n\n\t\t/**\n\t\t * Position before the first {@link module:engine/model/item~Item model item} to detach.\n\t\t *\n\t\t * @member {module:engine/model/position~Position} #sourcePosition\n\t\t */\n\t\tthis.sourcePosition = sourcePosition.clone();\n\n\t\t/**\n\t\t * Offset size of moved range.\n\t\t *\n\t\t * @member {Number} #howMany\n\t\t */\n\t\tthis.howMany = howMany;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tget type() {\n\t\treturn 'detach';\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\ttoJSON() {\n\t\tconst json = super.toJSON();\n\n\t\tjson.sourcePosition = this.sourcePosition.toJSON();\n\n\t\treturn json;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\t_validate() {\n\t\tif ( this.sourcePosition.root.document ) {\n\t\t\t/**\n\t\t\t * Cannot detach document node.\n\t\t\t *\n\t\t\t * @error detach-operation-on-document-node\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'detach-operation-on-document-node', this );\n\t\t}\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\t_execute() {\n\t\t_remove( Range._createFromPositionAndShift( this.sourcePosition, this.howMany ) );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get className() {\n\t\treturn 'DetachOperation';\n\t}\n\n\t// @if CK_DEBUG_ENGINE // toString() {\n\t// @if CK_DEBUG_ENGINE // const range = ModelRange._createFromPositionAndShift( this.sourcePosition, this.howMany );\n\t// @if CK_DEBUG_ENGINE //\tconst nodes = Array.from( range.getItems() );\n\t// @if CK_DEBUG_ENGINE //\tconst nodeString = nodes.length > 1 ? `[ ${ nodes.length } ]` : nodes[ 0 ];\n\n\t// @if CK_DEBUG_ENGINE //\treturn `DetachOperation( ${ this.baseVersion } ): ${ nodeString } -> ${ range }`;\n\t// @if CK_DEBUG_ENGINE // }\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/operation/moveoperation\n */\n\nimport Operation from './operation';\nimport Position from '../position';\nimport Range from '../range';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport compareArrays from '@ckeditor/ckeditor5-utils/src/comparearrays';\nimport { _move } from './utils';\n\n// @if CK_DEBUG_ENGINE // const ModelRange = require( '../range' ).default;\n\n/**\n * Operation to move a range of {@link module:engine/model/item~Item model items}\n * to given {@link module:engine/model/position~Position target position}.\n *\n * @extends module:engine/model/operation/operation~Operation\n */\nexport default class MoveOperation extends Operation {\n\t/**\n\t * Creates a move operation.\n\t *\n\t * @param {module:engine/model/position~Position} sourcePosition\n\t * Position before the first {@link module:engine/model/item~Item model item} to move.\n\t * @param {Number} howMany Offset size of moved range. Moved range will start from `sourcePosition` and end at\n\t * `sourcePosition` with offset shifted by `howMany`.\n\t * @param {module:engine/model/position~Position} targetPosition Position at which moved nodes will be inserted.\n\t * @param {Number|null} baseVersion Document {@link module:engine/model/document~Document#version} on which operation\n\t * can be applied or `null` if the operation operates on detached (non-document) tree.\n\t */\n\tconstructor( sourcePosition, howMany, targetPosition, baseVersion ) {\n\t\tsuper( baseVersion );\n\n\t\t/**\n\t\t * Position before the first {@link module:engine/model/item~Item model item} to move.\n\t\t *\n\t\t * @member {module:engine/model/position~Position} module:engine/model/operation/moveoperation~MoveOperation#sourcePosition\n\t\t */\n\t\tthis.sourcePosition = sourcePosition.clone();\n\t\t// `'toNext'` because `sourcePosition` is a bit like a start of the moved range.\n\t\tthis.sourcePosition.stickiness = 'toNext';\n\n\t\t/**\n\t\t * Offset size of moved range.\n\t\t *\n\t\t * @member {Number} module:engine/model/operation/moveoperation~MoveOperation#howMany\n\t\t */\n\t\tthis.howMany = howMany;\n\n\t\t/**\n\t\t * Position at which moved nodes will be inserted.\n\t\t *\n\t\t * @member {module:engine/model/position~Position} module:engine/model/operation/moveoperation~MoveOperation#targetPosition\n\t\t */\n\t\tthis.targetPosition = targetPosition.clone();\n\t\tthis.targetPosition.stickiness = 'toNone';\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tget type() {\n\t\tif ( this.targetPosition.root.rootName == '$graveyard' ) {\n\t\t\treturn 'remove';\n\t\t} else if ( this.sourcePosition.root.rootName == '$graveyard' ) {\n\t\t\treturn 'reinsert';\n\t\t}\n\n\t\treturn 'move';\n\t}\n\n\t/**\n\t * Creates and returns an operation that has the same parameters as this operation.\n\t *\n\t * @returns {module:engine/model/operation/moveoperation~MoveOperation} Clone of this operation.\n\t */\n\tclone() {\n\t\treturn new this.constructor( this.sourcePosition, this.howMany, this.targetPosition, this.baseVersion );\n\t}\n\n\t/**\n\t * Returns the start position of the moved range after it got moved. This may be different than\n\t * {@link module:engine/model/operation/moveoperation~MoveOperation#targetPosition} in some cases, i.e. when a range is moved\n\t * inside the same parent but {@link module:engine/model/operation/moveoperation~MoveOperation#targetPosition targetPosition}\n\t * is after {@link module:engine/model/operation/moveoperation~MoveOperation#sourcePosition sourcePosition}.\n\t *\n\t *\t\t vv              vv\n\t *\t\tabcdefg ===> adefbcg\n\t *\t\t     ^          ^\n\t *\t\t     targetPos\tmovedRangeStart\n\t *\t\t     offset 6\toffset 4\n\t *\n\t * @returns {module:engine/model/position~Position}\n\t */\n\tgetMovedRangeStart() {\n\t\treturn this.targetPosition._getTransformedByDeletion( this.sourcePosition, this.howMany );\n\t}\n\n\t/**\n\t * See {@link module:engine/model/operation/operation~Operation#getReversed `Operation#getReversed()`}.\n\t *\n\t * @returns {module:engine/model/operation/moveoperation~MoveOperation}\n\t */\n\tgetReversed() {\n\t\tconst newTargetPosition = this.sourcePosition._getTransformedByInsertion( this.targetPosition, this.howMany );\n\n\t\treturn new this.constructor( this.getMovedRangeStart(), this.howMany, newTargetPosition, this.baseVersion + 1 );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\t_validate() {\n\t\tconst sourceElement = this.sourcePosition.parent;\n\t\tconst targetElement = this.targetPosition.parent;\n\t\tconst sourceOffset = this.sourcePosition.offset;\n\t\tconst targetOffset = this.targetPosition.offset;\n\n\t\t// Validate whether move operation has correct parameters.\n\t\t// Validation is pretty complex but move operation is one of the core ways to manipulate the document state.\n\t\t// We expect that many errors might be connected with one of scenarios described below.\n\t\tif ( sourceOffset + this.howMany > sourceElement.maxOffset ) {\n\t\t\t/**\n\t\t\t * The nodes which should be moved do not exist.\n\t\t\t *\n\t\t\t * @error move-operation-nodes-do-not-exist\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'move-operation-nodes-do-not-exist', this\n\t\t\t);\n\t\t} else if ( sourceElement === targetElement && sourceOffset < targetOffset && targetOffset < sourceOffset + this.howMany ) {\n\t\t\t/**\n\t\t\t * Trying to move a range of nodes into the middle of that range.\n\t\t\t *\n\t\t\t * @error move-operation-range-into-itself\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'move-operation-range-into-itself', this\n\t\t\t);\n\t\t} else if ( this.sourcePosition.root == this.targetPosition.root ) {\n\t\t\tif ( compareArrays( this.sourcePosition.getParentPath(), this.targetPosition.getParentPath() ) == 'prefix' ) {\n\t\t\t\tconst i = this.sourcePosition.path.length - 1;\n\n\t\t\t\tif ( this.targetPosition.path[ i ] >= sourceOffset && this.targetPosition.path[ i ] < sourceOffset + this.howMany ) {\n\t\t\t\t\t/**\n\t\t\t\t\t * Trying to move a range of nodes into one of nodes from that range.\n\t\t\t\t\t *\n\t\t\t\t\t * @error move-operation-node-into-itself\n\t\t\t\t\t */\n\t\t\t\t\tthrow new CKEditorError(\n\t\t\t\t\t\t'move-operation-node-into-itself', this\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\t_execute() {\n\t\t_move( Range._createFromPositionAndShift( this.sourcePosition, this.howMany ), this.targetPosition );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\ttoJSON() {\n\t\tconst json = super.toJSON();\n\n\t\tjson.sourcePosition = this.sourcePosition.toJSON();\n\t\tjson.targetPosition = this.targetPosition.toJSON();\n\n\t\treturn json;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get className() {\n\t\treturn 'MoveOperation';\n\t}\n\n\t/**\n\t * Creates `MoveOperation` object from deserilized object, i.e. from parsed JSON string.\n\t *\n\t * @param {Object} json Deserialized JSON object.\n\t * @param {module:engine/model/document~Document} document Document on which this operation will be applied.\n\t * @returns {module:engine/model/operation/moveoperation~MoveOperation}\n\t */\n\tstatic fromJSON( json, document ) {\n\t\tconst sourcePosition = Position.fromJSON( json.sourcePosition, document );\n\t\tconst targetPosition = Position.fromJSON( json.targetPosition, document );\n\n\t\treturn new this( sourcePosition, json.howMany, targetPosition, json.baseVersion );\n\t}\n\n\t// @if CK_DEBUG_ENGINE // toString() {\n\t// @if CK_DEBUG_ENGINE // \tconst range = ModelRange._createFromPositionAndShift( this.sourcePosition, this.howMany );\n\n\t// @if CK_DEBUG_ENGINE //\treturn `MoveOperation( ${ this.baseVersion } ): ${ range } -> ${ this.targetPosition }`;\n\t// @if CK_DEBUG_ENGINE // }\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/operation/insertoperation\n */\n\nimport Operation from './operation';\nimport Position from '../position';\nimport NodeList from '../nodelist';\nimport MoveOperation from './moveoperation';\nimport { _insert, _normalizeNodes } from './utils';\nimport Text from '../text';\nimport Element from '../element';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n\n/**\n * Operation to insert one or more nodes at given position in the model.\n *\n * @extends module:engine/model/operation/operation~Operation\n */\nexport default class InsertOperation extends Operation {\n\t/**\n\t * Creates an insert operation.\n\t *\n\t * @param {module:engine/model/position~Position} position Position of insertion.\n\t * @param {module:engine/model/node~NodeSet} nodes The list of nodes to be inserted.\n\t * @param {Number|null} baseVersion Document {@link module:engine/model/document~Document#version} on which operation\n\t * can be applied or `null` if the operation operates on detached (non-document) tree.\n\t */\n\tconstructor( position, nodes, baseVersion ) {\n\t\tsuper( baseVersion );\n\n\t\t/**\n\t\t * Position of insertion.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/model/position~Position} module:engine/model/operation/insertoperation~InsertOperation#position\n\t\t */\n\t\tthis.position = position.clone();\n\t\tthis.position.stickiness = 'toNone';\n\n\t\t/**\n\t\t * List of nodes to insert.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/model/nodelist~NodeList} module:engine/model/operation/insertoperation~InsertOperation#nodeList\n\t\t */\n\t\tthis.nodes = new NodeList( _normalizeNodes( nodes ) );\n\n\t\t/**\n\t\t * Flag deciding how the operation should be transformed. If set to `true`, nodes might get additional attributes\n\t\t * during operational transformation. This happens when the operation insertion position is inside of a range\n\t\t * where attributes have changed.\n\t\t *\n\t\t * @member {Boolean} module:engine/model/operation/insertoperation~InsertOperation#shouldReceiveAttributes\n\t\t */\n\t\tthis.shouldReceiveAttributes = false;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tget type() {\n\t\treturn 'insert';\n\t}\n\n\t/**\n\t * Total offset size of inserted nodes.\n\t *\n\t * @returns {Number}\n\t */\n\tget howMany() {\n\t\treturn this.nodes.maxOffset;\n\t}\n\n\t/**\n\t * Creates and returns an operation that has the same parameters as this operation.\n\t *\n\t * @returns {module:engine/model/operation/insertoperation~InsertOperation} Clone of this operation.\n\t */\n\tclone() {\n\t\tconst nodes = new NodeList( [ ...this.nodes ].map( node => node._clone( true ) ) );\n\t\tconst insert = new InsertOperation( this.position, nodes, this.baseVersion );\n\n\t\tinsert.shouldReceiveAttributes = this.shouldReceiveAttributes;\n\n\t\treturn insert;\n\t}\n\n\t/**\n\t * See {@link module:engine/model/operation/operation~Operation#getReversed `Operation#getReversed()`}.\n\t *\n\t * @returns {module:engine/model/operation/moveoperation~MoveOperation}\n\t */\n\tgetReversed() {\n\t\tconst graveyard = this.position.root.document.graveyard;\n\t\tconst gyPosition = new Position( graveyard, [ 0 ] );\n\n\t\treturn new MoveOperation( this.position, this.nodes.maxOffset, gyPosition, this.baseVersion + 1 );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\t_validate() {\n\t\tconst targetElement = this.position.parent;\n\n\t\tif ( !targetElement || targetElement.maxOffset < this.position.offset ) {\n\t\t\t/**\n\t\t\t * Insertion position is invalid.\n\t\t\t *\n\t\t\t * @error insert-operation-position-invalid\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'insert-operation-position-invalid',\n\t\t\t\tthis\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\t_execute() {\n\t\t// What happens here is that we want original nodes be passed to writer because we want original nodes\n\t\t// to be inserted to the model. But in InsertOperation, we want to keep those nodes as they were added\n\t\t// to the operation, not modified. For example, text nodes can get merged or cropped while Elements can\n\t\t// get children. It is important that InsertOperation has the copy of original nodes in intact state.\n\t\tconst originalNodes = this.nodes;\n\t\tthis.nodes = new NodeList( [ ...originalNodes ].map( node => node._clone( true ) ) );\n\n\t\t_insert( this.position, originalNodes );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\ttoJSON() {\n\t\tconst json = super.toJSON();\n\n\t\tjson.position = this.position.toJSON();\n\t\tjson.nodes = this.nodes.toJSON();\n\n\t\treturn json;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get className() {\n\t\treturn 'InsertOperation';\n\t}\n\n\t/**\n\t * Creates `InsertOperation` object from deserilized object, i.e. from parsed JSON string.\n\t *\n\t * @param {Object} json Deserialized JSON object.\n\t * @param {module:engine/model/document~Document} document Document on which this operation will be applied.\n\t * @returns {module:engine/model/operation/insertoperation~InsertOperation}\n\t */\n\tstatic fromJSON( json, document ) {\n\t\tconst children = [];\n\n\t\tfor ( const child of json.nodes ) {\n\t\t\tif ( child.name ) {\n\t\t\t\t// If child has name property, it is an Element.\n\t\t\t\tchildren.push( Element.fromJSON( child ) );\n\t\t\t} else {\n\t\t\t\t// Otherwise, it is a Text node.\n\t\t\t\tchildren.push( Text.fromJSON( child ) );\n\t\t\t}\n\t\t}\n\n\t\tconst insert = new InsertOperation( Position.fromJSON( json.position, document ), children, json.baseVersion );\n\t\tinsert.shouldReceiveAttributes = json.shouldReceiveAttributes;\n\n\t\treturn insert;\n\t}\n\n\t// @if CK_DEBUG_ENGINE // toString() {\n\t// @if CK_DEBUG_ENGINE // \tconst nodeString = this.nodes.length > 1 ? `[ ${ this.nodes.length } ]` : this.nodes.getNode( 0 );\n\n\t// @if CK_DEBUG_ENGINE //\treturn `InsertOperation( ${ this.baseVersion } ): ${ nodeString } -> ${ this.position }`;\n\t// @if CK_DEBUG_ENGINE // }\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/operation/markeroperation\n */\n\nimport Operation from './operation';\nimport Range from '../range';\n\n/**\n * @extends module:engine/model/operation/operation~Operation\n */\nexport default class MarkerOperation extends Operation {\n\t/**\n\t * @param {String} name Marker name.\n\t * @param {module:engine/model/range~Range} oldRange Marker range before the change.\n\t * @param {module:engine/model/range~Range} newRange Marker range after the change.\n\t * @param {module:engine/model/markercollection~MarkerCollection} markers Marker collection on which change should be executed.\n\t * @param {Boolean} affectsData Specifies whether the marker operation affects the data produced by the data pipeline\n\t * (is persisted in the editor's data).\n\t * @param {Number|null} baseVersion Document {@link module:engine/model/document~Document#version} on which operation\n\t * can be applied or `null` if the operation operates on detached (non-document) tree.\n\t */\n\tconstructor( name, oldRange, newRange, markers, affectsData, baseVersion ) {\n\t\tsuper( baseVersion );\n\n\t\t/**\n\t\t * Marker name.\n\t\t *\n\t\t * @readonly\n\t\t * @member {String}\n\t\t */\n\t\tthis.name = name;\n\n\t\t/**\n\t\t * Marker range before the change.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/model/range~Range}\n\t\t */\n\t\tthis.oldRange = oldRange ? oldRange.clone() : null;\n\n\t\t/**\n\t\t * Marker range after the change.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/model/range~Range}\n\t\t */\n\t\tthis.newRange = newRange ? newRange.clone() : null;\n\n\t\t/**\n\t\t * Specifies whether the marker operation affects the data produced by the data pipeline\n\t\t * (is persisted in the editor's data).\n\t\t *\n\t\t * @readonly\n\t\t * @member {Boolean}\n\t\t */\n\t\tthis.affectsData = affectsData;\n\n\t\t/**\n\t\t * Marker collection on which change should be executed.\n\t\t *\n\t\t * @private\n\t\t * @member {module:engine/model/markercollection~MarkerCollection}\n\t\t */\n\t\tthis._markers = markers;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tget type() {\n\t\treturn 'marker';\n\t}\n\n\t/**\n\t * Creates and returns an operation that has the same parameters as this operation.\n\t *\n\t * @returns {module:engine/model/operation/markeroperation~MarkerOperation} Clone of this operation.\n\t */\n\tclone() {\n\t\treturn new MarkerOperation( this.name, this.oldRange, this.newRange, this._markers, this.affectsData, this.baseVersion );\n\t}\n\n\t/**\n\t * See {@link module:engine/model/operation/operation~Operation#getReversed `Operation#getReversed()`}.\n\t *\n\t * @returns {module:engine/model/operation/markeroperation~MarkerOperation}\n\t */\n\tgetReversed() {\n\t\treturn new MarkerOperation( this.name, this.newRange, this.oldRange, this._markers, this.affectsData, this.baseVersion + 1 );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\t_execute() {\n\t\tconst type = this.newRange ? '_set' : '_remove';\n\n\t\tthis._markers[ type ]( this.name, this.newRange, true, this.affectsData );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\ttoJSON() {\n\t\tconst json = super.toJSON();\n\n\t\tif ( this.oldRange ) {\n\t\t\tjson.oldRange = this.oldRange.toJSON();\n\t\t}\n\n\t\tif ( this.newRange ) {\n\t\t\tjson.newRange = this.newRange.toJSON();\n\t\t}\n\n\t\tdelete json._markers;\n\n\t\treturn json;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get className() {\n\t\treturn 'MarkerOperation';\n\t}\n\n\t/**\n\t * Creates `MarkerOperation` object from deserialized object, i.e. from parsed JSON string.\n\t *\n\t * @param {Object} json Deserialized JSON object.\n\t * @param {module:engine/model/document~Document} document Document on which this operation will be applied.\n\t * @returns {module:engine/model/operation/markeroperation~MarkerOperation}\n\t */\n\tstatic fromJSON( json, document ) {\n\t\treturn new MarkerOperation(\n\t\t\tjson.name,\n\t\t\tjson.oldRange ? Range.fromJSON( json.oldRange, document ) : null,\n\t\t\tjson.newRange ? Range.fromJSON( json.newRange, document ) : null,\n\t\t\tdocument.model.markers,\n\t\t\tjson.affectsData,\n\t\t\tjson.baseVersion\n\t\t);\n\t}\n\n\t// @if CK_DEBUG_ENGINE // toString() {\n\t// @if CK_DEBUG_ENGINE // \treturn `MarkerOperation( ${ this.baseVersion } ): ` +\n\t// @if CK_DEBUG_ENGINE //\t\t`\"${ this.name }\": ${ this.oldRange } -> ${ this.newRange }`;\n\t// @if CK_DEBUG_ENGINE // }\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/operation/renameoperation\n */\n\nimport Operation from './operation';\nimport Element from '../element';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport Position from '../position';\n\n/**\n * Operation to change element's name.\n *\n * Using this class you can change element's name.\n *\n * @extends module:engine/model/operation/operation~Operation\n */\nexport default class RenameOperation extends Operation {\n\t/**\n\t * Creates an operation that changes element's name.\n\t *\n\t * @param {module:engine/model/position~Position} position Position before an element to change.\n\t * @param {String} oldName Current name of the element.\n\t * @param {String} newName New name for the element.\n\t * @param {Number|null} baseVersion Document {@link module:engine/model/document~Document#version} on which operation\n\t * can be applied or `null` if the operation operates on detached (non-document) tree.\n\t */\n\tconstructor( position, oldName, newName, baseVersion ) {\n\t\tsuper( baseVersion );\n\n\t\t/**\n\t\t * Position before an element to change.\n\t\t *\n\t\t * @member {module:engine/model/position~Position} module:engine/model/operation/renameoperation~RenameOperation#position\n\t\t */\n\t\tthis.position = position;\n\t\t// This position sticks to the next node because it is a position before the node that we want to change.\n\t\tthis.position.stickiness = 'toNext';\n\n\t\t/**\n\t\t * Current name of the element.\n\t\t *\n\t\t * @member {String} module:engine/model/operation/renameoperation~RenameOperation#oldName\n\t\t */\n\t\tthis.oldName = oldName;\n\n\t\t/**\n\t\t * New name for the element.\n\t\t *\n\t\t * @member {String} module:engine/model/operation/renameoperation~RenameOperation#newName\n\t\t */\n\t\tthis.newName = newName;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tget type() {\n\t\treturn 'rename';\n\t}\n\n\t/**\n\t * Creates and returns an operation that has the same parameters as this operation.\n\t *\n\t * @returns {module:engine/model/operation/renameoperation~RenameOperation} Clone of this operation.\n\t */\n\tclone() {\n\t\treturn new RenameOperation( this.position.clone(), this.oldName, this.newName, this.baseVersion );\n\t}\n\n\t/**\n\t * See {@link module:engine/model/operation/operation~Operation#getReversed `Operation#getReversed()`}.\n\t *\n\t * @returns {module:engine/model/operation/renameoperation~RenameOperation}\n\t */\n\tgetReversed() {\n\t\treturn new RenameOperation( this.position.clone(), this.newName, this.oldName, this.baseVersion + 1 );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\t_validate() {\n\t\tconst element = this.position.nodeAfter;\n\n\t\tif ( !( element instanceof Element ) ) {\n\t\t\t/**\n\t\t\t * Given position is invalid or node after it is not instance of Element.\n\t\t\t *\n\t\t\t * @error rename-operation-wrong-position\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'rename-operation-wrong-position',\n\t\t\t\tthis\n\t\t\t);\n\t\t} else if ( element.name !== this.oldName ) {\n\t\t\t/**\n\t\t\t * Element to change has different name than operation's old name.\n\t\t\t *\n\t\t\t * @error rename-operation-wrong-name\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'rename-operation-wrong-name',\n\t\t\t\tthis\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\t_execute() {\n\t\tconst element = this.position.nodeAfter;\n\n\t\telement.name = this.newName;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\ttoJSON() {\n\t\tconst json = super.toJSON();\n\n\t\tjson.position = this.position.toJSON();\n\n\t\treturn json;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get className() {\n\t\treturn 'RenameOperation';\n\t}\n\n\t/**\n\t * Creates `RenameOperation` object from deserialized object, i.e. from parsed JSON string.\n\t *\n\t * @param {Object} json Deserialized JSON object.\n\t * @param {module:engine/model/document~Document} document Document on which this operation will be applied.\n\t * @returns {module:engine/model/operation/attributeoperation~AttributeOperation}\n\t */\n\tstatic fromJSON( json, document ) {\n\t\treturn new RenameOperation( Position.fromJSON( json.position, document ), json.oldName, json.newName, json.baseVersion );\n\t}\n\n\t// @if CK_DEBUG_ENGINE // toString() {\n\t// @if CK_DEBUG_ENGINE // \treturn `RenameOperation( ${ this.baseVersion } ): ` +\n\t// @if CK_DEBUG_ENGINE //\t\t`${ this.position }: \"${ this.oldName }\" -> \"${ this.newName }\"`;\n\t// @if CK_DEBUG_ENGINE // }\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/operation/rootattributeoperation\n */\n\nimport Operation from './operation';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n\n/**\n * Operation to change root element's attribute. Using this class you can add, remove or change value of the attribute.\n *\n * This operation is needed, because root elements can't be changed through\n * @link module:engine/model/operation/attributeoperation~AttributeOperation}.\n * It is because {@link module:engine/model/operation/attributeoperation~AttributeOperation}\n * requires a range to change and root element can't\n * be a part of range because every {@link module:engine/model/position~Position} has to be inside a root.\n * {@link module:engine/model/position~Position} can't be created before a root element.\n *\n * @extends module:engine/model/operation/operation~Operation\n */\nexport default class RootAttributeOperation extends Operation {\n\t/**\n\t * Creates an operation that changes, removes or adds attributes on root element.\n\t *\n\t * @see module:engine/model/operation/attributeoperation~AttributeOperation\n\t * @param {module:engine/model/rootelement~RootElement} root Root element to change.\n\t * @param {String} key Key of an attribute to change or remove.\n\t * @param {*} oldValue Old value of the attribute with given key or `null` if adding a new attribute.\n\t * @param {*} newValue New value to set for the attribute. If `null`, then the operation just removes the attribute.\n\t * @param {Number|null} baseVersion Document {@link module:engine/model/document~Document#version} on which operation\n\t * can be applied or `null` if the operation operates on detached (non-document) tree.\n\t */\n\tconstructor( root, key, oldValue, newValue, baseVersion ) {\n\t\tsuper( baseVersion );\n\n\t\t/**\n\t\t * Root element to change.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/model/rootelement~RootElement}\n\t\t */\n\t\tthis.root = root;\n\n\t\t/**\n\t\t * Key of an attribute to change or remove.\n\t\t *\n\t\t * @readonly\n\t\t * @member {String}\n\t\t */\n\t\tthis.key = key;\n\n\t\t/**\n\t\t * Old value of the attribute with given key or `null` if adding a new attribute.\n\t\t *\n\t\t * @readonly\n\t\t * @member {*}\n\t\t */\n\t\tthis.oldValue = oldValue;\n\n\t\t/**\n\t\t * New value to set for the attribute. If `null`, then the operation just removes the attribute.\n\t\t *\n\t\t * @readonly\n\t\t * @member {*}\n\t\t */\n\t\tthis.newValue = newValue;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tget type() {\n\t\tif ( this.oldValue === null ) {\n\t\t\treturn 'addRootAttribute';\n\t\t} else if ( this.newValue === null ) {\n\t\t\treturn 'removeRootAttribute';\n\t\t} else {\n\t\t\treturn 'changeRootAttribute';\n\t\t}\n\t}\n\n\t/**\n\t * Creates and returns an operation that has the same parameters as this operation.\n\t *\n\t * @returns {module:engine/model/operation/rootattributeoperation~RootAttributeOperation} Clone of this operation.\n\t */\n\tclone() {\n\t\treturn new RootAttributeOperation( this.root, this.key, this.oldValue, this.newValue, this.baseVersion );\n\t}\n\n\t/**\n\t * See {@link module:engine/model/operation/operation~Operation#getReversed `Operation#getReversed()`}.\n\t *\n\t * @returns {module:engine/model/operation/rootattributeoperation~RootAttributeOperation}\n\t */\n\tgetReversed() {\n\t\treturn new RootAttributeOperation( this.root, this.key, this.newValue, this.oldValue, this.baseVersion + 1 );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\t_validate() {\n\t\tif ( this.root != this.root.root || this.root.is( 'documentFragment' ) ) {\n\t\t\t/**\n\t\t\t * The element to change is not a root element.\n\t\t\t *\n\t\t\t * @error rootattribute-operation-not-a-root\n\t\t\t * @param {module:engine/model/rootelement~RootElement} root\n\t\t\t * @param {String} key\n\t\t\t * @param {*} value\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'rootattribute-operation-not-a-root',\n\t\t\t\tthis,\n\t\t\t\t{ root: this.root, key: this.key }\n\t\t\t);\n\t\t}\n\n\t\tif ( this.oldValue !== null && this.root.getAttribute( this.key ) !== this.oldValue ) {\n\t\t\t/**\n\t\t\t * The attribute which should be removed does not exists for the given node.\n\t\t\t *\n\t\t\t * @error rootattribute-operation-wrong-old-value\n\t\t\t * @param {module:engine/model/rootelement~RootElement} root\n\t\t\t * @param {String} key\n\t\t\t * @param {*} value\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'rootattribute-operation-wrong-old-value',\n\t\t\t\tthis,\n\t\t\t\t{ root: this.root, key: this.key }\n\t\t\t);\n\t\t}\n\n\t\tif ( this.oldValue === null && this.newValue !== null && this.root.hasAttribute( this.key ) ) {\n\t\t\t/**\n\t\t\t * The attribute with given key already exists for the given node.\n\t\t\t *\n\t\t\t * @error rootattribute-operation-attribute-exists\n\t\t\t * @param {module:engine/model/rootelement~RootElement} root\n\t\t\t * @param {String} key\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'rootattribute-operation-attribute-exists',\n\t\t\t\tthis,\n\t\t\t\t{ root: this.root, key: this.key }\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\t_execute() {\n\t\tif ( this.newValue !== null ) {\n\t\t\tthis.root._setAttribute( this.key, this.newValue );\n\t\t} else {\n\t\t\tthis.root._removeAttribute( this.key );\n\t\t}\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\ttoJSON() {\n\t\tconst json = super.toJSON();\n\n\t\tjson.root = this.root.toJSON();\n\n\t\treturn json;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get className() {\n\t\treturn 'RootAttributeOperation';\n\t}\n\n\t/**\n\t * Creates RootAttributeOperation object from deserilized object, i.e. from parsed JSON string.\n\t *\n\t * @param {Object} json Deserialized JSON object.\n\t * @param {module:engine/model/document~Document} document Document on which this operation will be applied.\n\t * @returns {module:engine/model/operation/rootattributeoperation~RootAttributeOperation}\n\t */\n\tstatic fromJSON( json, document ) {\n\t\tif ( !document.getRoot( json.root ) ) {\n\t\t\t/**\n\t\t\t * Cannot create RootAttributeOperation for document. Root with specified name does not exist.\n\t\t\t *\n\t\t\t * @error rootattribute-operation-fromjson-no-root\n\t\t\t * @param {String} rootName\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'rootattribute-operation-fromjson-no-root', this, { rootName: json.root } );\n\t\t}\n\n\t\treturn new RootAttributeOperation( document.getRoot( json.root ), json.key, json.oldValue, json.newValue, json.baseVersion );\n\t}\n\n\t// @if CK_DEBUG_ENGINE // toString() {\n\t// @if CK_DEBUG_ENGINE // \treturn `RootAttributeOperation( ${ this.baseVersion } ): ` +\n\t// @if CK_DEBUG_ENGINE //\t\t`\"${ this.key }\": ${ JSON.stringify( this.oldValue ) }` +\n\t// @if CK_DEBUG_ENGINE //\t\t` -> ${ JSON.stringify( this.newValue ) }, ${ this.root.rootName }`;\n\t// @if CK_DEBUG_ENGINE // }\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/operation/mergeoperation\n */\n\nimport Operation from './operation';\nimport SplitOperation from './splitoperation';\nimport Position from '../position';\nimport Range from '../range';\nimport { _move } from './utils';\n\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n\n/**\n * Operation to merge two {@link module:engine/model/element~Element elements}.\n *\n * The merged element is the parent of {@link ~MergeOperation#sourcePosition} and it is merged into the parent of\n * {@link ~MergeOperation#targetPosition}. All nodes from the merged element are moved to {@link ~MergeOperation#targetPosition}.\n *\n * The merged element is moved to the graveyard at {@link ~MergeOperation#graveyardPosition}.\n *\n * @extends module:engine/model/operation/operation~Operation\n */\nexport default class MergeOperation extends Operation {\n\t/**\n\t * Creates a merge operation.\n\t *\n\t * @param {module:engine/model/position~Position} sourcePosition Position inside the merged element. All nodes from that\n\t * element after that position will be moved to {@link ~#targetPosition}.\n\t * @param {Number} howMany Summary offset size of nodes which will be moved from the merged element to the new parent.\n\t * @param {module:engine/model/position~Position} targetPosition Position which the nodes from the merged elements will be moved to.\n\t * @param {module:engine/model/position~Position} graveyardPosition Position in graveyard to which the merged element will be moved.\n\t * @param {Number|null} baseVersion Document {@link module:engine/model/document~Document#version} on which operation\n\t * can be applied or `null` if the operation operates on detached (non-document) tree.\n\t */\n\tconstructor( sourcePosition, howMany, targetPosition, graveyardPosition, baseVersion ) {\n\t\tsuper( baseVersion );\n\n\t\t/**\n\t\t * Position inside the merged element. All nodes from that element after that position will be moved to {@link ~#targetPosition}.\n\t\t *\n\t\t * @member {module:engine/model/position~Position} module:engine/model/operation/mergeoperation~MergeOperation#sourcePosition\n\t\t */\n\t\tthis.sourcePosition = sourcePosition.clone();\n\t\t// This is, and should always remain, the first position in its parent.\n\t\tthis.sourcePosition.stickiness = 'toPrevious';\n\n\t\t/**\n\t\t * Summary offset size of nodes which will be moved from the merged element to the new parent.\n\t\t *\n\t\t * @member {Number} module:engine/model/operation/mergeoperation~MergeOperation#howMany\n\t\t */\n\t\tthis.howMany = howMany;\n\n\t\t/**\n\t\t * Position which the nodes from the merged elements will be moved to.\n\t\t *\n\t\t * @member {module:engine/model/position~Position} module:engine/model/operation/mergeoperation~MergeOperation#targetPosition\n\t\t */\n\t\tthis.targetPosition = targetPosition.clone();\n\t\t// Except of a rare scenario in `MergeOperation` x `MergeOperation` transformation,\n\t\t// this is, and should always remain, the last position in its parent.\n\t\tthis.targetPosition.stickiness = 'toNext';\n\n\t\t/**\n\t\t * Position in graveyard to which the merged element will be moved.\n\t\t *\n\t\t * @member {module:engine/model/position~Position} module:engine/model/operation/mergeoperation~MergeOperation#graveyardPosition\n\t\t */\n\t\tthis.graveyardPosition = graveyardPosition.clone();\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tget type() {\n\t\treturn 'merge';\n\t}\n\n\t/**\n\t * Position before the merged element (which will be deleted).\n\t *\n\t * @readonly\n\t * @type {module:engine/model/position~Position}\n\t */\n\tget deletionPosition() {\n\t\treturn new Position( this.sourcePosition.root, this.sourcePosition.path.slice( 0, -1 ) );\n\t}\n\n\t/**\n\t * Artificial range that contains all the nodes from the merged element that will be moved to {@link ~MergeOperation#sourcePosition}.\n\t * The range starts at {@link ~MergeOperation#sourcePosition} and ends in the same parent, at `POSITIVE_INFINITY` offset.\n\t *\n\t * @readonly\n\t * @type {module:engine/model/range~Range}\n\t */\n\tget movedRange() {\n\t\tconst end = this.sourcePosition.getShiftedBy( Number.POSITIVE_INFINITY );\n\n\t\treturn new Range( this.sourcePosition, end );\n\t}\n\n\t/**\n\t * Creates and returns an operation that has the same parameters as this operation.\n\t *\n\t * @returns {module:engine/model/operation/mergeoperation~MergeOperation} Clone of this operation.\n\t */\n\tclone() {\n\t\treturn new this.constructor( this.sourcePosition, this.howMany, this.targetPosition, this.graveyardPosition, this.baseVersion );\n\t}\n\n\t/**\n\t * See {@link module:engine/model/operation/operation~Operation#getReversed `Operation#getReversed()`}.\n\t *\n\t * @returns {module:engine/model/operation/splitoperation~SplitOperation}\n\t */\n\tgetReversed() {\n\t\t// Positions in this method are transformed by this merge operation because the split operation bases on\n\t\t// the context after this merge operation happened (because split operation reverses it).\n\t\t// So we need to acknowledge that the merge operation happened and those positions changed a little.\n\t\tconst targetPosition = this.targetPosition._getTransformedByMergeOperation( this );\n\n\t\tconst path = this.sourcePosition.path.slice( 0, -1 );\n\t\tconst insertionPosition = new Position( this.sourcePosition.root, path )._getTransformedByMergeOperation( this );\n\n\t\tconst split = new SplitOperation( targetPosition, this.howMany, this.graveyardPosition, this.baseVersion + 1 );\n\t\tsplit.insertionPosition = insertionPosition;\n\n\t\treturn split;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\t_validate() {\n\t\tconst sourceElement = this.sourcePosition.parent;\n\t\tconst targetElement = this.targetPosition.parent;\n\n\t\t// Validate whether merge operation has correct parameters.\n\t\tif ( !sourceElement.parent ) {\n\t\t\t/**\n\t\t\t * Merge source position is invalid. The element to be merged must have a parent node.\n\t\t\t *\n\t\t\t * @error merge-operation-source-position-invalid\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'merge-operation-source-position-invalid', this );\n\t\t} else if ( !targetElement.parent ) {\n\t\t\t/**\n\t\t\t * Merge target position is invalid. The element to be merged must have a parent node.\n\t\t\t *\n\t\t\t * @error merge-operation-target-position-invalid\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'merge-operation-target-position-invalid', this );\n\t\t} else if ( this.howMany != sourceElement.maxOffset ) {\n\t\t\t/**\n\t\t\t * Merge operation specifies wrong number of nodes to move.\n\t\t\t *\n\t\t\t * @error merge-operation-how-many-invalid\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'merge-operation-how-many-invalid', this );\n\t\t}\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\t_execute() {\n\t\tconst mergedElement = this.sourcePosition.parent;\n\t\tconst sourceRange = Range._createIn( mergedElement );\n\n\t\t_move( sourceRange, this.targetPosition );\n\t\t_move( Range._createOn( mergedElement ), this.graveyardPosition );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\ttoJSON() {\n\t\tconst json = super.toJSON();\n\n\t\tjson.sourcePosition = json.sourcePosition.toJSON();\n\t\tjson.targetPosition = json.targetPosition.toJSON();\n\t\tjson.graveyardPosition = json.graveyardPosition.toJSON();\n\n\t\treturn json;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get className() {\n\t\treturn 'MergeOperation';\n\t}\n\n\t/**\n\t * Creates `MergeOperation` object from deserilized object, i.e. from parsed JSON string.\n\t *\n\t * @param {Object} json Deserialized JSON object.\n\t * @param {module:engine/model/document~Document} document Document on which this operation will be applied.\n\t * @returns {module:engine/model/operation/mergeoperation~MergeOperation}\n\t */\n\tstatic fromJSON( json, document ) {\n\t\tconst sourcePosition = Position.fromJSON( json.sourcePosition, document );\n\t\tconst targetPosition = Position.fromJSON( json.targetPosition, document );\n\t\tconst graveyardPosition = Position.fromJSON( json.graveyardPosition, document );\n\n\t\treturn new this( sourcePosition, json.howMany, targetPosition, graveyardPosition, json.baseVersion );\n\t}\n\n\t// @if CK_DEBUG_ENGINE // toString() {\n\t// @if CK_DEBUG_ENGINE // \treturn `MergeOperation( ${ this.baseVersion } ): ` +\n\t// @if CK_DEBUG_ENGINE //\t\t`${ this.sourcePosition } -> ${ this.targetPosition }` +\n\t// @if CK_DEBUG_ENGINE //\t\t` ( ${ this.howMany } ), ${ this.graveyardPosition }`;\n\t// @if CK_DEBUG_ENGINE // }\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/operation/splitoperation\n */\n\nimport Operation from './operation';\nimport MergeOperation from './mergeoperation';\nimport Position from '../position';\nimport Range from '../range';\nimport { _insert, _move } from './utils';\n\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n\n/**\n * Operation to split {@link module:engine/model/element~Element an element} at given\n * {@link module:engine/model/operation/splitoperation~SplitOperation#splitPosition split position} into two elements,\n * both containing a part of the element's original content.\n *\n * @extends module:engine/model/operation/operation~Operation\n */\nexport default class SplitOperation extends Operation {\n\t/**\n\t * Creates a split operation.\n\t *\n\t * @param {module:engine/model/position~Position} splitPosition Position at which an element should be split.\n\t * @param {Number} howMany Total offset size of elements that are in the split element after `position`.\n\t * @param {module:engine/model/position~Position|null} graveyardPosition Position in the graveyard root before the element which\n\t * should be used as a parent of the nodes after `position`. If it is not set, a copy of the the `position` parent will be used.\n\t * @param {Number|null} baseVersion Document {@link module:engine/model/document~Document#version} on which operation\n\t * can be applied or `null` if the operation operates on detached (non-document) tree.\n\t */\n\tconstructor( splitPosition, howMany, graveyardPosition, baseVersion ) {\n\t\tsuper( baseVersion );\n\n\t\t/**\n\t\t * Position at which an element should be split.\n\t\t *\n\t\t * @member {module:engine/model/position~Position} module:engine/model/operation/splitoperation~SplitOperation#splitPosition\n\t\t */\n\t\tthis.splitPosition = splitPosition.clone();\n\t\t// Keep position sticking to the next node. This way any new content added at the place where the element is split\n\t\t// will be left in the original element.\n\t\tthis.splitPosition.stickiness = 'toNext';\n\n\t\t/**\n\t\t * Total offset size of elements that are in the split element after `position`.\n\t\t *\n\t\t * @member {Number} module:engine/model/operation/splitoperation~SplitOperation#howMany\n\t\t */\n\t\tthis.howMany = howMany;\n\n\t\t/**\n\t\t * Position at which the clone of split element (or element from graveyard) will be inserted.\n\t\t *\n\t\t * @member {module:engine/model/position~Position} module:engine/model/operation/splitoperation~SplitOperation#insertionPosition\n\t\t */\n\t\tthis.insertionPosition = SplitOperation.getInsertionPosition( splitPosition );\n\t\tthis.insertionPosition.stickiness = 'toNone';\n\n\t\t/**\n\t\t * Position in the graveyard root before the element which should be used as a parent of the nodes after `position`.\n\t\t * If it is not set, a copy of the the `position` parent will be used.\n\t\t *\n\t\t * The default behavior is to clone the split element. Element from graveyard is used during undo.\n\t\t *\n\t\t * @member {module:engine/model/position~Position|null} #graveyardPosition\n\t\t */\n\t\tthis.graveyardPosition = graveyardPosition ? graveyardPosition.clone() : null;\n\n\t\tif ( this.graveyardPosition ) {\n\t\t\tthis.graveyardPosition.stickiness = 'toNext';\n\t\t}\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tget type() {\n\t\treturn 'split';\n\t}\n\n\t/**\n\t * Position inside the new clone of a split element.\n\t *\n\t * This is a position where nodes that are after the split position will be moved to.\n\t *\n\t * @readonly\n\t * @type {module:engine/model/position~Position}\n\t */\n\tget moveTargetPosition() {\n\t\tconst path = this.insertionPosition.path.slice();\n\t\tpath.push( 0 );\n\n\t\treturn new Position( this.insertionPosition.root, path );\n\t}\n\n\t/**\n\t * Artificial range that contains all the nodes from the split element that will be moved to the new element.\n\t * The range starts at {@link ~#splitPosition} and ends in the same parent, at `POSITIVE_INFINITY` offset.\n\t *\n\t * @readonly\n\t * @type {module:engine/model/range~Range}\n\t */\n\tget movedRange() {\n\t\tconst end = this.splitPosition.getShiftedBy( Number.POSITIVE_INFINITY );\n\n\t\treturn new Range( this.splitPosition, end );\n\t}\n\n\t/**\n\t * Creates and returns an operation that has the same parameters as this operation.\n\t *\n\t * @returns {module:engine/model/operation/splitoperation~SplitOperation} Clone of this operation.\n\t */\n\tclone() {\n\t\tconst split = new this.constructor( this.splitPosition, this.howMany, this.graveyardPosition, this.baseVersion );\n\t\tsplit.insertionPosition = this.insertionPosition;\n\n\t\treturn split;\n\t}\n\n\t/**\n\t * See {@link module:engine/model/operation/operation~Operation#getReversed `Operation#getReversed()`}.\n\t *\n\t * @returns {module:engine/model/operation/mergeoperation~MergeOperation}\n\t */\n\tgetReversed() {\n\t\tconst graveyard = this.splitPosition.root.document.graveyard;\n\t\tconst graveyardPosition = new Position( graveyard, [ 0 ] );\n\n\t\treturn new MergeOperation( this.moveTargetPosition, this.howMany, this.splitPosition, graveyardPosition, this.baseVersion + 1 );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\t_validate() {\n\t\tconst element = this.splitPosition.parent;\n\t\tconst offset = this.splitPosition.offset;\n\n\t\t// Validate whether split operation has correct parameters.\n\t\tif ( !element || element.maxOffset < offset ) {\n\t\t\t/**\n\t\t\t * Split position is invalid.\n\t\t\t *\n\t\t\t * @error split-operation-position-invalid\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'split-operation-position-invalid', this );\n\t\t} else if ( !element.parent ) {\n\t\t\t/**\n\t\t\t * Cannot split root element.\n\t\t\t *\n\t\t\t * @error split-operation-split-in-root\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'split-operation-split-in-root', this );\n\t\t} else if ( this.howMany != element.maxOffset - this.splitPosition.offset ) {\n\t\t\t/**\n\t\t\t * Split operation specifies wrong number of nodes to move.\n\t\t\t *\n\t\t\t * @error split-operation-how-many-invalid\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'split-operation-how-many-invalid', this );\n\t\t} else if ( this.graveyardPosition && !this.graveyardPosition.nodeAfter ) {\n\t\t\t/**\n\t\t\t * Graveyard position invalid.\n\t\t\t *\n\t\t\t * @error split-operation-graveyard-position-invalid\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'split-operation-graveyard-position-invalid', this );\n\t\t}\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\t_execute() {\n\t\tconst splitElement = this.splitPosition.parent;\n\n\t\tif ( this.graveyardPosition ) {\n\t\t\t_move( Range._createFromPositionAndShift( this.graveyardPosition, 1 ), this.insertionPosition );\n\t\t} else {\n\t\t\tconst newElement = splitElement._clone();\n\n\t\t\t_insert( this.insertionPosition, newElement );\n\t\t}\n\n\t\tconst sourceRange = new Range(\n\t\t\tPosition._createAt( splitElement, this.splitPosition.offset ),\n\t\t\tPosition._createAt( splitElement, splitElement.maxOffset )\n\t\t);\n\n\t\t_move( sourceRange, this.moveTargetPosition );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\ttoJSON() {\n\t\tconst json = super.toJSON();\n\n\t\tjson.splitPosition = this.splitPosition.toJSON();\n\t\tjson.insertionPosition = this.insertionPosition.toJSON();\n\n\t\tif ( this.graveyardPosition ) {\n\t\t\tjson.graveyardPosition = this.graveyardPosition.toJSON();\n\t\t}\n\n\t\treturn json;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get className() {\n\t\treturn 'SplitOperation';\n\t}\n\n\t/**\n\t * Helper function that returns a default insertion position basing on given `splitPosition`. The default insertion\n\t * position is after the split element.\n\t *\n\t * @param {module:engine/model/position~Position} splitPosition\n\t * @returns {module:engine/model/position~Position}\n\t */\n\tstatic getInsertionPosition( splitPosition ) {\n\t\tconst path = splitPosition.path.slice( 0, -1 );\n\t\tpath[ path.length - 1 ]++;\n\n\t\treturn new Position( splitPosition.root, path );\n\t}\n\n\t/**\n\t * Creates `SplitOperation` object from deserilized object, i.e. from parsed JSON string.\n\t *\n\t * @param {Object} json Deserialized JSON object.\n\t * @param {module:engine/model/document~Document} document Document on which this operation will be applied.\n\t * @returns {module:engine/model/operation/splitoperation~SplitOperation}\n\t */\n\tstatic fromJSON( json, document ) {\n\t\tconst splitPosition = Position.fromJSON( json.splitPosition, document );\n\t\tconst insertionPosition = Position.fromJSON( json.insertionPosition, document );\n\t\tconst graveyardPosition = json.graveyardPosition ? Position.fromJSON( json.graveyardPosition, document ) : null;\n\n\t\tconst split = new this( splitPosition, json.howMany, graveyardPosition, json.baseVersion );\n\t\tsplit.insertionPosition = insertionPosition;\n\n\t\treturn split;\n\t}\n\n\t// @if CK_DEBUG_ENGINE // toString() {\n\t// @if CK_DEBUG_ENGINE // \treturn `SplitOperation( ${ this.baseVersion } ): ${ this.splitPosition } ` +\n\t// @if CK_DEBUG_ENGINE //\t\t`( ${ this.howMany } ) -> ${ this.insertionPosition }` +\n\t// @if CK_DEBUG_ENGINE //\t\t`${ this.graveyardPosition ? ' with ' + this.graveyardPosition : '' }`;\n\t// @if CK_DEBUG_ENGINE // }\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/rootelement\n */\n\nimport Element from './element';\n\n/**\n * Type of {@link module:engine/model/element~Element} that is a root of a model tree.\n * @extends module:engine/model/element~Element\n */\nexport default class RootElement extends Element {\n\t/**\n\t * Creates root element.\n\t *\n\t * @param {module:engine/model/document~Document} document Document that is an owner of this root.\n\t * @param {String} name Node name.\n\t * @param {String} [rootName='main'] Unique root name used to identify this root\n\t * element by {@link module:engine/model/document~Document}.\n\t */\n\tconstructor( document, name, rootName = 'main' ) {\n\t\tsuper( name );\n\n\t\t/**\n\t\t * Document that is an owner of this root.\n\t\t *\n\t\t * @private\n\t\t * @member {module:engine/model/document~Document}\n\t\t */\n\t\tthis._document = document;\n\n\t\t/**\n\t\t * Unique root name used to identify this root element by {@link module:engine/model/document~Document}.\n\t\t *\n\t\t * @readonly\n\t\t * @member {String}\n\t\t */\n\t\tthis.rootName = rootName;\n\t}\n\n\t/**\n\t * {@link module:engine/model/document~Document Document} that owns this root element.\n\t *\n\t * @readonly\n\t * @type {module:engine/model/document~Document|null}\n\t */\n\tget document() {\n\t\treturn this._document;\n\t}\n\n\t/**\n\t * Checks whether this object is of the given.\n\t *\n\t *\t\trootElement.is( 'rootElement' ); // -> true\n\t *\t\trootElement.is( 'element' ); // -> true\n\t *\t\trootElement.is( 'node' ); // -> true\n\t *\t\trootElement.is( 'model:rootElement' ); // -> true\n\t *\t\trootElement.is( 'model:element' ); // -> true\n\t *\t\trootElement.is( 'model:node' ); // -> true\n\t *\n\t *\t\trootElement.is( 'view:element' ); // -> false\n\t *\t\trootElement.is( 'documentFragment' ); // -> false\n\t *\n\t * Assuming that the object being checked is an element, you can also check its\n\t * {@link module:engine/model/element~Element#name name}:\n\t *\n\t *\t\trootElement.is( 'rootElement', '$root' ); // -> same as above\n\t *\n\t * {@link module:engine/model/node~Node#is Check the entire list of model objects} which implement the `is()` method.\n\t *\n\t * @param {String} type Type to check.\n\t * @param {String} [name] Element name.\n\t * @returns {Boolean}\n\t */\n\tis( type, name ) {\n\t\tif ( !name ) {\n\t\t\treturn type === 'rootElement' || type === 'model:rootElement' ||\n\t\t\t\t// From super.is(). This is highly utilised method and cannot call super. See ckeditor/ckeditor5#6529.\n\t\t\t\ttype === 'element' || type === 'model:element' ||\n\t\t\t\ttype === 'node' || type === 'model:node';\n\t\t}\n\n\t\treturn name === this.name && (\n\t\t\ttype === 'rootElement' || type === 'model:rootElement' ||\n\t\t\t// From super.is(). This is highly utilised method and cannot call super. See ckeditor/ckeditor5#6529.\n\t\t\ttype === 'element' || type === 'model:element'\n\t\t);\n\t}\n\n\t/**\n\t * Converts `RootElement` instance to `String` containing it's name.\n\t *\n\t * @returns {String} `RootElement` instance converted to `String`.\n\t */\n\ttoJSON() {\n\t\treturn this.rootName;\n\t}\n\n\t// @if CK_DEBUG_ENGINE // toString() {\n\t// @if CK_DEBUG_ENGINE // \treturn this.rootName;\n\t// @if CK_DEBUG_ENGINE // }\n\n\t// @if CK_DEBUG_ENGINE // log() {\n\t// @if CK_DEBUG_ENGINE // \tconsole.log( 'ModelRootElement: ' + this );\n\t// @if CK_DEBUG_ENGINE // }\n}\n\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/writer\n */\n\nimport AttributeOperation from './operation/attributeoperation';\nimport DetachOperation from './operation/detachoperation';\nimport InsertOperation from './operation/insertoperation';\nimport MarkerOperation from './operation/markeroperation';\nimport MoveOperation from './operation/moveoperation';\nimport RenameOperation from './operation/renameoperation';\nimport RootAttributeOperation from './operation/rootattributeoperation';\nimport SplitOperation from './operation/splitoperation';\nimport MergeOperation from './operation/mergeoperation';\n\nimport DocumentFragment from './documentfragment';\nimport Text from './text';\nimport Element from './element';\nimport RootElement from './rootelement';\nimport Position from './position';\nimport Range from './range.js';\nimport DocumentSelection from './documentselection';\n\nimport toMap from '@ckeditor/ckeditor5-utils/src/tomap';\n\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n\n/**\n * The model can only be modified by using the writer. It should be used whenever you want to create a node, modify\n * child nodes, attributes or text, set the selection's position and its attributes.\n *\n * The instance of the writer is only available in the {@link module:engine/model/model~Model#change `change()`} or\n * {@link module:engine/model/model~Model#enqueueChange `enqueueChange()`}.\n *\n *\t\tmodel.change( writer => {\n *\t\t\twriter.insertText( 'foo', paragraph, 'end' );\n *\t\t} );\n *\n * Note that the writer should never be stored and used outside of the `change()` and\n * `enqueueChange()` blocks.\n *\n * Note that writer's methods do not check the {@link module:engine/model/schema~Schema}. It is possible\n * to create incorrect model structures by using the writer. Read more about in\n * {@glink framework/guides/deep-dive/schema#who-checks-the-schema \"Who checks the schema?\"}.\n *\n * @see module:engine/model/model~Model#change\n * @see module:engine/model/model~Model#enqueueChange\n */\nexport default class Writer {\n\t/**\n\t * Creates a writer instance.\n\t *\n\t * **Note:** It is not recommended to use it directly. Use {@link module:engine/model/model~Model#change `Model#change()`} or\n\t * {@link module:engine/model/model~Model#enqueueChange `Model#enqueueChange()`} instead.\n\t *\n\t * @protected\n\t * @param {module:engine/model/model~Model} model\n\t * @param {module:engine/model/batch~Batch} batch\n\t */\n\tconstructor( model, batch ) {\n\t\t/**\n\t\t * Instance of the model on which this writer operates.\n\t\t *\n\t\t * @readonly\n\t\t * @type {module:engine/model/model~Model}\n\t\t */\n\t\tthis.model = model;\n\n\t\t/**\n\t\t * The batch to which this writer will add changes.\n\t\t *\n\t\t * @readonly\n\t\t * @type {module:engine/model/batch~Batch}\n\t\t */\n\t\tthis.batch = batch;\n\t}\n\n\t/**\n\t * Creates a new {@link module:engine/model/text~Text text node}.\n\t *\n\t *\t\twriter.createText( 'foo' );\n\t *\t\twriter.createText( 'foo', { bold: true } );\n\t *\n\t * @param {String} data Text data.\n\t * @param {Object} [attributes] Text attributes.\n\t * @returns {module:engine/model/text~Text} Created text node.\n\t */\n\tcreateText( data, attributes ) {\n\t\treturn new Text( data, attributes );\n\t}\n\n\t/**\n\t * Creates a new {@link module:engine/model/element~Element element}.\n\t *\n\t *\t\twriter.createElement( 'paragraph' );\n\t *\t\twriter.createElement( 'paragraph', { alignment: 'center' } );\n\t *\n\t * @param {String} name Name of the element.\n\t * @param {Object} [attributes] Elements attributes.\n\t * @returns {module:engine/model/element~Element} Created element.\n\t */\n\tcreateElement( name, attributes ) {\n\t\treturn new Element( name, attributes );\n\t}\n\n\t/**\n\t * Creates a new {@link module:engine/model/documentfragment~DocumentFragment document fragment}.\n\t *\n\t * @returns {module:engine/model/documentfragment~DocumentFragment} Created document fragment.\n\t */\n\tcreateDocumentFragment() {\n\t\treturn new DocumentFragment();\n\t}\n\n\t/**\n\t * Creates a copy of the element and returns it. Created element has the same name and attributes as the original element.\n\t * If clone is deep, the original element's children are also cloned. If not, then empty element is returned.\n\t *\n\t * @param {module:engine/model/element~Element} element The element to clone.\n\t * @param {Boolean} [deep=true] If set to `true` clones element and all its children recursively. When set to `false`,\n\t * element will be cloned without any child.\n\t */\n\tcloneElement( element, deep = true ) {\n\t\treturn element._clone( deep );\n\t}\n\n\t/**\n\t * Inserts item on given position.\n\t *\n\t *\t\tconst paragraph = writer.createElement( 'paragraph' );\n\t *\t\twriter.insert( paragraph, position );\n\t *\n\t * Instead of using position you can use parent and offset:\n\t *\n\t *\t\tconst text = writer.createText( 'foo' );\n\t *\t\twriter.insert( text, paragraph, 5 );\n\t *\n\t * You can also use `end` instead of the offset to insert at the end:\n\t *\n\t *\t\tconst text = writer.createText( 'foo' );\n\t *\t\twriter.insert( text, paragraph, 'end' );\n\t *\n\t * Or insert before or after another element:\n\t *\n\t *\t\tconst paragraph = writer.createElement( 'paragraph' );\n\t *\t\twriter.insert( paragraph, anotherParagraph, 'after' );\n\t *\n\t * These parameters works the same way as {@link #createPositionAt `writer.createPositionAt()`}.\n\t *\n\t * Note that if the item already has parent it will be removed from the previous parent.\n\t *\n\t * Note that you cannot re-insert a node from a document to a different document or a document fragment. In this case,\n\t * `model-writer-insert-forbidden-move` is thrown.\n\t *\n\t * If you want to move {@link module:engine/model/range~Range range} instead of an\n\t * {@link module:engine/model/item~Item item} use {@link module:engine/model/writer~Writer#move `Writer#move()`}.\n\t *\n\t * **Note:** For a paste-like content insertion mechanism see\n\t * {@link module:engine/model/model~Model#insertContent `model.insertContent()`}.\n\t *\n\t * @param {module:engine/model/item~Item|module:engine/model/documentfragment~DocumentFragment} item Item or document\n\t * fragment to insert.\n\t * @param {module:engine/model/item~Item|module:engine/model/position~Position} itemOrPosition\n\t * @param {Number|'end'|'before'|'after'} [offset] Offset or one of the flags. Used only when\n\t * second parameter is a {@link module:engine/model/item~Item model item}.\n\t */\n\tinsert( item, itemOrPosition, offset = 0 ) {\n\t\tthis._assertWriterUsedCorrectly();\n\n\t\tif ( item instanceof Text && item.data == '' ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst position = Position._createAt( itemOrPosition, offset );\n\n\t\t// If item has a parent already.\n\t\tif ( item.parent ) {\n\t\t\t// We need to check if item is going to be inserted within the same document.\n\t\t\tif ( isSameTree( item.root, position.root ) ) {\n\t\t\t\t// If it's we just need to move it.\n\t\t\t\tthis.move( Range._createOn( item ), position );\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// If it isn't the same root.\n\t\t\telse {\n\t\t\t\tif ( item.root.document ) {\n\t\t\t\t\t/**\n\t\t\t\t\t * Cannot move a node from a document to a different tree.\n\t\t\t\t\t * It is forbidden to move a node that was already in a document outside of it.\n\t\t\t\t\t *\n\t\t\t\t\t * @error model-writer-insert-forbidden-move\n\t\t\t\t\t */\n\t\t\t\t\tthrow new CKEditorError(\n\t\t\t\t\t\t'model-writer-insert-forbidden-move',\n\t\t\t\t\t\tthis\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\t// Move between two different document fragments or from document fragment to a document is possible.\n\t\t\t\t\t// In that case, remove the item from it's original parent.\n\t\t\t\t\tthis.remove( item );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst version = position.root.document ? position.root.document.version : null;\n\n\t\tconst insert = new InsertOperation( position, item, version );\n\n\t\tif ( item instanceof Text ) {\n\t\t\tinsert.shouldReceiveAttributes = true;\n\t\t}\n\n\t\tthis.batch.addOperation( insert );\n\t\tthis.model.applyOperation( insert );\n\n\t\t// When element is a DocumentFragment we need to move its markers to Document#markers.\n\t\tif ( item instanceof DocumentFragment ) {\n\t\t\tfor ( const [ markerName, markerRange ] of item.markers ) {\n\t\t\t\t// We need to migrate marker range from DocumentFragment to Document.\n\t\t\t\tconst rangeRootPosition = Position._createAt( markerRange.root, 0 );\n\t\t\t\tconst range = new Range(\n\t\t\t\t\tmarkerRange.start._getCombined( rangeRootPosition, position ),\n\t\t\t\t\tmarkerRange.end._getCombined( rangeRootPosition, position )\n\t\t\t\t);\n\n\t\t\t\tconst options = { range, usingOperation: true, affectsData: true };\n\n\t\t\t\tif ( this.model.markers.has( markerName ) ) {\n\t\t\t\t\tthis.updateMarker( markerName, options );\n\t\t\t\t} else {\n\t\t\t\t\tthis.addMarker( markerName, options );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Creates and inserts text on given position. You can optionally set text attributes:\n\t *\n\t *\t\twriter.insertText( 'foo', position );\n\t *\t\twriter.insertText( 'foo', { bold: true }, position );\n\t *\n\t * Instead of using position you can use parent and offset or define that text should be inserted at the end\n\t * or before or after other node:\n\t *\n\t *\t\t// Inserts 'foo' in paragraph, at offset 5:\n\t *\t\twriter.insertText( 'foo', paragraph, 5 );\n\t *\t\t// Inserts 'foo' at the end of a paragraph:\n\t *\t\twriter.insertText( 'foo', paragraph, 'end' );\n\t *\t\t// Inserts 'foo' after an image:\n\t *\t\twriter.insertText( 'foo', image, 'after' );\n\t *\n\t * These parameters work in the same way as {@link #createPositionAt `writer.createPositionAt()`}.\n\t *\n\t * @param {String} data Text data.\n\t * @param {Object} [attributes] Text attributes.\n\t * @param {module:engine/model/item~Item|module:engine/model/position~Position} itemOrPosition\n\t * @param {Number|'end'|'before'|'after'} [offset] Offset or one of the flags. Used only when\n\t * third parameter is a {@link module:engine/model/item~Item model item}.\n\t */\n\tinsertText( text, attributes, itemOrPosition, offset ) {\n\t\tif ( attributes instanceof DocumentFragment || attributes instanceof Element || attributes instanceof Position ) {\n\t\t\tthis.insert( this.createText( text ), attributes, itemOrPosition );\n\t\t} else {\n\t\t\tthis.insert( this.createText( text, attributes ), itemOrPosition, offset );\n\t\t}\n\t}\n\n\t/**\n\t * Creates and inserts element on given position. You can optionally set attributes:\n\t *\n\t *\t\twriter.insertElement( 'paragraph', position );\n\t *\t\twriter.insertElement( 'paragraph', { alignment: 'center' }, position );\n\t *\n\t * Instead of using position you can use parent and offset or define that text should be inserted at the end\n\t * or before or after other node:\n\t *\n\t *\t\t// Inserts paragraph in the root at offset 5:\n\t *\t\twriter.insertElement( 'paragraph', root, 5 );\n\t *\t\t// Inserts paragraph at the end of a blockquote:\n\t *\t\twriter.insertElement( 'paragraph', blockquote, 'end' );\n\t *\t\t// Inserts after an image:\n\t *\t\twriter.insertElement( 'paragraph', image, 'after' );\n\t *\n\t * These parameters works the same way as {@link #createPositionAt `writer.createPositionAt()`}.\n\t *\n\t * @param {String} name Name of the element.\n\t * @param {Object} [attributes] Elements attributes.\n\t * @param {module:engine/model/item~Item|module:engine/model/position~Position} itemOrPosition\n\t * @param {Number|'end'|'before'|'after'} [offset] Offset or one of the flags. Used only when\n\t * third parameter is a {@link module:engine/model/item~Item model item}.\n\t */\n\tinsertElement( name, attributes, itemOrPosition, offset ) {\n\t\tif ( attributes instanceof DocumentFragment || attributes instanceof Element || attributes instanceof Position ) {\n\t\t\tthis.insert( this.createElement( name ), attributes, itemOrPosition );\n\t\t} else {\n\t\t\tthis.insert( this.createElement( name, attributes ), itemOrPosition, offset );\n\t\t}\n\t}\n\n\t/**\n\t * Inserts item at the end of the given parent.\n\t *\n\t *\t\tconst paragraph = writer.createElement( 'paragraph' );\n\t *\t\twriter.append( paragraph, root );\n\t *\n\t * Note that if the item already has parent it will be removed from the previous parent.\n\t *\n\t * If you want to move {@link module:engine/model/range~Range range} instead of an\n\t * {@link module:engine/model/item~Item item} use {@link module:engine/model/writer~Writer#move `Writer#move()`}.\n\t *\n\t * @param {module:engine/model/item~Item|module:engine/model/documentfragment~DocumentFragment}\n\t * item Item or document fragment to insert.\n\t * @param {module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment} parent\n\t */\n\tappend( item, parent ) {\n\t\tthis.insert( item, parent, 'end' );\n\t}\n\n\t/**\n\t * Creates text node and inserts it at the end of the parent. You can optionally set text attributes:\n\t *\n\t *\t\twriter.appendText( 'foo', paragraph );\n\t *\t\twriter.appendText( 'foo', { bold: true }, paragraph );\n\t *\n\t * @param {String} text Text data.\n\t * @param {Object} [attributes] Text attributes.\n\t * @param {module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment} parent\n\t */\n\tappendText( text, attributes, parent ) {\n\t\tif ( attributes instanceof DocumentFragment || attributes instanceof Element ) {\n\t\t\tthis.insert( this.createText( text ), attributes, 'end' );\n\t\t} else {\n\t\t\tthis.insert( this.createText( text, attributes ), parent, 'end' );\n\t\t}\n\t}\n\n\t/**\n\t * Creates element and inserts it at the end of the parent. You can optionally set attributes:\n\t *\n\t *\t\twriter.appendElement( 'paragraph', root );\n\t *\t\twriter.appendElement( 'paragraph', { alignment: 'center' }, root );\n\t *\n\t * @param {String} name Name of the element.\n\t * @param {Object} [attributes] Elements attributes.\n\t * @param {module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment} parent\n\t */\n\tappendElement( name, attributes, parent ) {\n\t\tif ( attributes instanceof DocumentFragment || attributes instanceof Element ) {\n\t\t\tthis.insert( this.createElement( name ), attributes, 'end' );\n\t\t} else {\n\t\t\tthis.insert( this.createElement( name, attributes ), parent, 'end' );\n\t\t}\n\t}\n\n\t/**\n\t * Sets value of the attribute with given key on a {@link module:engine/model/item~Item model item}\n\t * or on a {@link module:engine/model/range~Range range}.\n\t *\n\t * @param {String} key Attribute key.\n\t * @param {*} value Attribute new value.\n\t * @param {module:engine/model/item~Item|module:engine/model/range~Range} itemOrRange\n\t * Model item or range on which the attribute will be set.\n\t */\n\tsetAttribute( key, value, itemOrRange ) {\n\t\tthis._assertWriterUsedCorrectly();\n\n\t\tif ( itemOrRange instanceof Range ) {\n\t\t\tconst ranges = itemOrRange.getMinimalFlatRanges();\n\n\t\t\tfor ( const range of ranges ) {\n\t\t\t\tsetAttributeOnRange( this, key, value, range );\n\t\t\t}\n\t\t} else {\n\t\t\tsetAttributeOnItem( this, key, value, itemOrRange );\n\t\t}\n\t}\n\n\t/**\n\t * Sets values of attributes on a {@link module:engine/model/item~Item model item}\n\t * or on a {@link module:engine/model/range~Range range}.\n\t *\n\t *\t\twriter.setAttributes( {\n\t *\t\t\tbold: true,\n\t *\t\t\titalic: true\n\t *\t\t}, range );\n\t *\n\t * @param {Object} attributes Attributes keys and values.\n\t * @param {module:engine/model/item~Item|module:engine/model/range~Range} itemOrRange\n\t * Model item or range on which the attributes will be set.\n\t */\n\tsetAttributes( attributes, itemOrRange ) {\n\t\tfor ( const [ key, val ] of toMap( attributes ) ) {\n\t\t\tthis.setAttribute( key, val, itemOrRange );\n\t\t}\n\t}\n\n\t/**\n\t * Removes an attribute with given key from a {@link module:engine/model/item~Item model item}\n\t * or from a {@link module:engine/model/range~Range range}.\n\t *\n\t * @param {String} key Attribute key.\n\t * @param {module:engine/model/item~Item|module:engine/model/range~Range} itemOrRange\n\t * Model item or range from which the attribute will be removed.\n\t */\n\tremoveAttribute( key, itemOrRange ) {\n\t\tthis._assertWriterUsedCorrectly();\n\n\t\tif ( itemOrRange instanceof Range ) {\n\t\t\tconst ranges = itemOrRange.getMinimalFlatRanges();\n\n\t\t\tfor ( const range of ranges ) {\n\t\t\t\tsetAttributeOnRange( this, key, null, range );\n\t\t\t}\n\t\t} else {\n\t\t\tsetAttributeOnItem( this, key, null, itemOrRange );\n\t\t}\n\t}\n\n\t/**\n\t * Removes all attributes from all elements in the range or from the given item.\n\t *\n\t * @param {module:engine/model/item~Item|module:engine/model/range~Range} itemOrRange\n\t * Model item or range from which all attributes will be removed.\n\t */\n\tclearAttributes( itemOrRange ) {\n\t\tthis._assertWriterUsedCorrectly();\n\n\t\tconst removeAttributesFromItem = item => {\n\t\t\tfor ( const attribute of item.getAttributeKeys() ) {\n\t\t\t\tthis.removeAttribute( attribute, item );\n\t\t\t}\n\t\t};\n\n\t\tif ( !( itemOrRange instanceof Range ) ) {\n\t\t\tremoveAttributesFromItem( itemOrRange );\n\t\t} else {\n\t\t\tfor ( const item of itemOrRange.getItems() ) {\n\t\t\t\tremoveAttributesFromItem( item );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Moves all items in the source range to the target position.\n\t *\n\t *\t\twriter.move( sourceRange, targetPosition );\n\t *\n\t * Instead of the target position you can use parent and offset or define that range should be moved to the end\n\t * or before or after chosen item:\n\t *\n\t *\t\t// Moves all items in the range to the paragraph at offset 5:\n\t *\t\twriter.move( sourceRange, paragraph, 5 );\n\t *\t\t// Moves all items in the range to the end of a blockquote:\n\t *\t\twriter.move( sourceRange, blockquote, 'end' );\n\t *\t\t// Moves all items in the range to a position after an image:\n\t *\t\twriter.move( sourceRange, image, 'after' );\n\t *\n\t * These parameters works the same way as {@link #createPositionAt `writer.createPositionAt()`}.\n\t *\n\t * Note that items can be moved only within the same tree. It means that you can move items within the same root\n\t * (element or document fragment) or between {@link module:engine/model/document~Document#roots documents roots},\n\t * but you can not move items from document fragment to the document or from one detached element to another. Use\n\t * {@link module:engine/model/writer~Writer#insert} in such cases.\n\t *\n\t * @param {module:engine/model/range~Range} range Source range.\n\t * @param {module:engine/model/item~Item|module:engine/model/position~Position} itemOrPosition\n\t * @param {Number|'end'|'before'|'after'} [offset] Offset or one of the flags. Used only when\n\t * second parameter is a {@link module:engine/model/item~Item model item}.\n\t */\n\tmove( range, itemOrPosition, offset ) {\n\t\tthis._assertWriterUsedCorrectly();\n\n\t\tif ( !( range instanceof Range ) ) {\n\t\t\t/**\n\t\t\t * Invalid range to move.\n\t\t\t *\n\t\t\t * @error writer-move-invalid-range\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'writer-move-invalid-range', this );\n\t\t}\n\n\t\tif ( !range.isFlat ) {\n\t\t\t/**\n\t\t\t * Range to move is not flat.\n\t\t\t *\n\t\t\t * @error writer-move-range-not-flat\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'writer-move-range-not-flat', this );\n\t\t}\n\n\t\tconst position = Position._createAt( itemOrPosition, offset );\n\n\t\t// Do not move anything if the move target is same as moved range start.\n\t\tif ( position.isEqual( range.start ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If part of the marker is removed, create additional marker operation for undo purposes.\n\t\tthis._addOperationForAffectedMarkers( 'move', range );\n\n\t\tif ( !isSameTree( range.root, position.root ) ) {\n\t\t\t/**\n\t\t\t * Range is going to be moved within not the same document. Please use\n\t\t\t * {@link module:engine/model/writer~Writer#insert insert} instead.\n\t\t\t *\n\t\t\t * @error writer-move-different-document\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'writer-move-different-document', this );\n\t\t}\n\n\t\tconst version = range.root.document ? range.root.document.version : null;\n\t\tconst operation = new MoveOperation( range.start, range.end.offset - range.start.offset, position, version );\n\n\t\tthis.batch.addOperation( operation );\n\t\tthis.model.applyOperation( operation );\n\t}\n\n\t/**\n\t * Removes given model {@link module:engine/model/item~Item item} or {@link module:engine/model/range~Range range}.\n\t *\n\t * @param {module:engine/model/item~Item|module:engine/model/range~Range} itemOrRange Model item or range to remove.\n\t */\n\tremove( itemOrRange ) {\n\t\tthis._assertWriterUsedCorrectly();\n\n\t\tconst rangeToRemove = itemOrRange instanceof Range ? itemOrRange : Range._createOn( itemOrRange );\n\t\tconst ranges = rangeToRemove.getMinimalFlatRanges().reverse();\n\n\t\tfor ( const flat of ranges ) {\n\t\t\t// If part of the marker is removed, create additional marker operation for undo purposes.\n\t\t\tthis._addOperationForAffectedMarkers( 'move', flat );\n\n\t\t\tapplyRemoveOperation( flat.start, flat.end.offset - flat.start.offset, this.batch, this.model );\n\t\t}\n\t}\n\n\t/**\n\t * Merges two siblings at the given position.\n\t *\n\t * Node before and after the position have to be an element. Otherwise `writer-merge-no-element-before` or\n\t * `writer-merge-no-element-after` error will be thrown.\n\t *\n\t * @param {module:engine/model/position~Position} position Position between merged elements.\n\t */\n\tmerge( position ) {\n\t\tthis._assertWriterUsedCorrectly();\n\n\t\tconst nodeBefore = position.nodeBefore;\n\t\tconst nodeAfter = position.nodeAfter;\n\n\t\t// If part of the marker is removed, create additional marker operation for undo purposes.\n\t\tthis._addOperationForAffectedMarkers( 'merge', position );\n\n\t\tif ( !( nodeBefore instanceof Element ) ) {\n\t\t\t/**\n\t\t\t * Node before merge position must be an element.\n\t\t\t *\n\t\t\t * @error writer-merge-no-element-before\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'writer-merge-no-element-before', this );\n\t\t}\n\n\t\tif ( !( nodeAfter instanceof Element ) ) {\n\t\t\t/**\n\t\t\t * Node after merge position must be an element.\n\t\t\t *\n\t\t\t * @error writer-merge-no-element-after\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'writer-merge-no-element-after', this );\n\t\t}\n\n\t\tif ( !position.root.document ) {\n\t\t\tthis._mergeDetached( position );\n\t\t} else {\n\t\t\tthis._merge( position );\n\t\t}\n\t}\n\n\t/**\n\t * Shortcut for {@link module:engine/model/model~Model#createPositionFromPath `Model#createPositionFromPath()`}.\n\t *\n\t * @param {module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment} root Root of the position.\n\t * @param {Array.<Number>} path Position path. See {@link module:engine/model/position~Position#path}.\n\t * @param {module:engine/model/position~PositionStickiness} [stickiness='toNone'] Position stickiness.\n\t * See {@link module:engine/model/position~PositionStickiness}.\n\t * @returns {module:engine/model/position~Position}\n\t */\n\tcreatePositionFromPath( root, path, stickiness ) {\n\t\treturn this.model.createPositionFromPath( root, path, stickiness );\n\t}\n\n\t/**\n\t * Shortcut for {@link module:engine/model/model~Model#createPositionAt `Model#createPositionAt()`}.\n\t *\n\t * @param {module:engine/model/item~Item|module:engine/model/position~Position} itemOrPosition\n\t * @param {Number|'end'|'before'|'after'} [offset] Offset or one of the flags. Used only when\n\t * first parameter is a {@link module:engine/model/item~Item model item}.\n\t * @returns {module:engine/model/position~Position}\n\t */\n\tcreatePositionAt( itemOrPosition, offset ) {\n\t\treturn this.model.createPositionAt( itemOrPosition, offset );\n\t}\n\n\t/**\n\t * Shortcut for {@link module:engine/model/model~Model#createPositionAfter `Model#createPositionAfter()`}.\n\t *\n\t * @param {module:engine/model/item~Item} item Item after which the position should be placed.\n\t * @returns {module:engine/model/position~Position}\n\t */\n\tcreatePositionAfter( item ) {\n\t\treturn this.model.createPositionAfter( item );\n\t}\n\n\t/**\n\t * Shortcut for {@link module:engine/model/model~Model#createPositionBefore `Model#createPositionBefore()`}.\n\t *\n\t * @param {module:engine/model/item~Item} item Item after which the position should be placed.\n\t * @returns {module:engine/model/position~Position}\n\t */\n\tcreatePositionBefore( item ) {\n\t\treturn this.model.createPositionBefore( item );\n\t}\n\n\t/**\n\t * Shortcut for {@link module:engine/model/model~Model#createRange `Model#createRange()`}.\n\t *\n\t * @param {module:engine/model/position~Position} start Start position.\n\t * @param {module:engine/model/position~Position} [end] End position. If not set, range will be collapsed at `start` position.\n\t * @returns {module:engine/model/range~Range}\n\t */\n\tcreateRange( start, end ) {\n\t\treturn this.model.createRange( start, end );\n\t}\n\n\t/**\n\t * Shortcut for {@link module:engine/model/model~Model#createRangeIn `Model#createRangeIn()`}.\n\t *\n\t * @param {module:engine/model/element~Element} element Element which is a parent for the range.\n\t * @returns {module:engine/model/range~Range}\n\t */\n\tcreateRangeIn( element ) {\n\t\treturn this.model.createRangeIn( element );\n\t}\n\n\t/**\n\t * Shortcut for {@link module:engine/model/model~Model#createRangeOn `Model#createRangeOn()`}.\n\t *\n\t * @param {module:engine/model/element~Element} element Element which is a parent for the range.\n\t * @returns {module:engine/model/range~Range}\n\t */\n\tcreateRangeOn( element ) {\n\t\treturn this.model.createRangeOn( element );\n\t}\n\n\t/**\n\t * Shortcut for {@link module:engine/model/model~Model#createSelection `Model#createSelection()`}.\n\t *\n\t * @param {module:engine/model/selection~Selectable} selectable\n\t * @param {Number|'before'|'end'|'after'|'on'|'in'} [placeOrOffset] Sets place or offset of the selection.\n\t * @param {Object} [options]\n\t * @param {Boolean} [options.backward] Sets this selection instance to be backward.\n\t * @returns {module:engine/model/selection~Selection}\n\t */\n\tcreateSelection( selectable, placeOrOffset, options ) {\n\t\treturn this.model.createSelection( selectable, placeOrOffset, options );\n\t}\n\n\t/**\n\t * Performs merge action in a detached tree.\n\t *\n\t * @private\n\t * @param {module:engine/model/position~Position} position Position between merged elements.\n\t */\n\t_mergeDetached( position ) {\n\t\tconst nodeBefore = position.nodeBefore;\n\t\tconst nodeAfter = position.nodeAfter;\n\n\t\tthis.move( Range._createIn( nodeAfter ), Position._createAt( nodeBefore, 'end' ) );\n\t\tthis.remove( nodeAfter );\n\t}\n\n\t/**\n\t * Performs merge action in a non-detached tree.\n\t *\n\t * @private\n\t * @param {module:engine/model/position~Position} position Position between merged elements.\n\t */\n\t_merge( position ) {\n\t\tconst targetPosition = Position._createAt( position.nodeBefore, 'end' );\n\t\tconst sourcePosition = Position._createAt( position.nodeAfter, 0 );\n\n\t\tconst graveyard = position.root.document.graveyard;\n\t\tconst graveyardPosition = new Position( graveyard, [ 0 ] );\n\n\t\tconst version = position.root.document.version;\n\n\t\tconst merge = new MergeOperation( sourcePosition, position.nodeAfter.maxOffset, targetPosition, graveyardPosition, version );\n\n\t\tthis.batch.addOperation( merge );\n\t\tthis.model.applyOperation( merge );\n\t}\n\n\t/**\n\t * Renames the given element.\n\t *\n\t * @param {module:engine/model/element~Element} element The element to rename.\n\t * @param {String} newName New element name.\n\t */\n\trename( element, newName ) {\n\t\tthis._assertWriterUsedCorrectly();\n\n\t\tif ( !( element instanceof Element ) ) {\n\t\t\t/**\n\t\t\t * Trying to rename an object which is not an instance of Element.\n\t\t\t *\n\t\t\t * @error writer-rename-not-element-instance\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'writer-rename-not-element-instance',\n\t\t\t\tthis\n\t\t\t);\n\t\t}\n\n\t\tconst version = element.root.document ? element.root.document.version : null;\n\t\tconst renameOperation = new RenameOperation( Position._createBefore( element ), element.name, newName, version );\n\n\t\tthis.batch.addOperation( renameOperation );\n\t\tthis.model.applyOperation( renameOperation );\n\t}\n\n\t/**\n\t * Splits elements starting from the given position and going to the top of the model tree as long as given\n\t * `limitElement` is reached. When `limitElement` is not defined then only the parent of the given position will be split.\n\t *\n\t * The element needs to have a parent. It cannot be a root element nor a document fragment.\n\t * The `writer-split-element-no-parent` error will be thrown if you try to split an element with no parent.\n\t *\n\t * @param {module:engine/model/position~Position} position Position of split.\n\t * @param {module:engine/model/node~Node} [limitElement] Stop splitting when this element will be reached.\n\t * @returns {Object} result Split result.\n\t * @returns {module:engine/model/position~Position} result.position Position between split elements.\n\t * @returns {module:engine/model/range~Range} result.range Range that stars from the end of the first split element and ends\n\t * at the beginning of the first copy element.\n\t */\n\tsplit( position, limitElement ) {\n\t\tthis._assertWriterUsedCorrectly();\n\n\t\tlet splitElement = position.parent;\n\n\t\tif ( !splitElement.parent ) {\n\t\t\t/**\n\t\t\t * Element with no parent can not be split.\n\t\t\t *\n\t\t\t * @error writer-split-element-no-parent\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'writer-split-element-no-parent', this );\n\t\t}\n\n\t\t// When limit element is not defined lets set splitElement parent as limit.\n\t\tif ( !limitElement ) {\n\t\t\tlimitElement = splitElement.parent;\n\t\t}\n\n\t\tif ( !position.parent.getAncestors( { includeSelf: true } ).includes( limitElement ) ) {\n\t\t\t/**\n\t\t\t * Limit element is not a position ancestor.\n\t\t\t *\n\t\t\t * @error writer-split-invalid-limit-element\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'writer-split-invalid-limit-element', this );\n\t\t}\n\n\t\t// We need to cache elements that will be created as a result of the first split because\n\t\t// we need to create a range from the end of the first split element to the beginning of the\n\t\t// first copy element. This should be handled by LiveRange but it doesn't work on detached nodes.\n\t\tlet firstSplitElement, firstCopyElement;\n\n\t\tdo {\n\t\t\tconst version = splitElement.root.document ? splitElement.root.document.version : null;\n\t\t\tconst howMany = splitElement.maxOffset - position.offset;\n\t\t\tconst split = new SplitOperation( position, howMany, null, version );\n\n\t\t\tthis.batch.addOperation( split );\n\t\t\tthis.model.applyOperation( split );\n\n\t\t\t// Cache result of the first split.\n\t\t\tif ( !firstSplitElement && !firstCopyElement ) {\n\t\t\t\tfirstSplitElement = splitElement;\n\t\t\t\tfirstCopyElement = position.parent.nextSibling;\n\t\t\t}\n\n\t\t\tposition = this.createPositionAfter( position.parent );\n\t\t\tsplitElement = position.parent;\n\t\t} while ( splitElement !== limitElement );\n\n\t\treturn {\n\t\t\tposition,\n\t\t\trange: new Range( Position._createAt( firstSplitElement, 'end' ), Position._createAt( firstCopyElement, 0 ) )\n\t\t};\n\t}\n\n\t/**\n\t * Wraps the given range with the given element or with a new element (if a string was passed).\n\t *\n\t * **Note:** range to wrap should be a \"flat range\" (see {@link module:engine/model/range~Range#isFlat `Range#isFlat`}).\n\t * If not, an error will be thrown.\n\t *\n\t * @param {module:engine/model/range~Range} range Range to wrap.\n\t * @param {module:engine/model/element~Element|String} elementOrString Element or name of element to wrap the range with.\n\t */\n\twrap( range, elementOrString ) {\n\t\tthis._assertWriterUsedCorrectly();\n\n\t\tif ( !range.isFlat ) {\n\t\t\t/**\n\t\t\t * Range to wrap is not flat.\n\t\t\t *\n\t\t\t * @error writer-wrap-range-not-flat\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'writer-wrap-range-not-flat', this );\n\t\t}\n\n\t\tconst element = elementOrString instanceof Element ? elementOrString : new Element( elementOrString );\n\n\t\tif ( element.childCount > 0 ) {\n\t\t\t/**\n\t\t\t * Element to wrap with is not empty.\n\t\t\t *\n\t\t\t * @error writer-wrap-element-not-empty\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'writer-wrap-element-not-empty', this );\n\t\t}\n\n\t\tif ( element.parent !== null ) {\n\t\t\t/**\n\t\t\t * Element to wrap with is already attached to a tree model.\n\t\t\t *\n\t\t\t * @error writer-wrap-element-attached\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'writer-wrap-element-attached', this );\n\t\t}\n\n\t\tthis.insert( element, range.start );\n\n\t\t// Shift the range-to-wrap because we just inserted an element before that range.\n\t\tconst shiftedRange = new Range( range.start.getShiftedBy( 1 ), range.end.getShiftedBy( 1 ) );\n\n\t\tthis.move( shiftedRange, Position._createAt( element, 0 ) );\n\t}\n\n\t/**\n\t * Unwraps children of the given element – all its children are moved before it and then the element is removed.\n\t * Throws error if you try to unwrap an element which does not have a parent.\n\t *\n\t * @param {module:engine/model/element~Element} element Element to unwrap.\n\t */\n\tunwrap( element ) {\n\t\tthis._assertWriterUsedCorrectly();\n\n\t\tif ( element.parent === null ) {\n\t\t\t/**\n\t\t\t * Trying to unwrap an element which has no parent.\n\t\t\t *\n\t\t\t * @error writer-unwrap-element-no-parent\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'writer-unwrap-element-no-parent', this );\n\t\t}\n\n\t\tthis.move( Range._createIn( element ), this.createPositionAfter( element ) );\n\t\tthis.remove( element );\n\t}\n\n\t/**\n\t * Adds a {@link module:engine/model/markercollection~Marker marker}. Marker is a named range, which tracks\n\t * changes in the document and updates its range automatically, when model tree changes.\n\t *\n\t * As the first parameter you can set marker name.\n\t *\n\t * The required `options.usingOperation` parameter lets you decide if the marker should be managed by operations or not. See\n\t * {@link module:engine/model/markercollection~Marker marker class description} to learn about the difference between\n\t * markers managed by operations and not-managed by operations.\n\t *\n\t * The `options.affectsData` parameter, which defaults to `false`, allows you to define if a marker affects the data. It should be\n\t * `true` when the marker change changes the data returned by the\n\t * {@link module:core/editor/utils/dataapimixin~DataApi#getData `editor.getData()`} method.\n\t * When set to `true` it fires the {@link module:engine/model/document~Document#event:change:data `change:data`} event.\n\t * When set to `false` it fires the {@link module:engine/model/document~Document#event:change `change`} event.\n\t *\n\t * Create marker directly base on marker's name:\n\t *\n\t *\t\taddMarker( markerName, { range, usingOperation: false } );\n\t *\n\t * Create marker using operation:\n\t *\n\t *\t\taddMarker( markerName, { range, usingOperation: true } );\n\t *\n\t * Create marker that affects the editor data:\n\t *\n\t *\t\taddMarker( markerName, { range, usingOperation: false, affectsData: true } );\n\t *\n\t * Note: For efficiency reasons, it's best to create and keep as little markers as possible.\n\t *\n\t * @see module:engine/model/markercollection~Marker\n\t * @param {String} name Name of a marker to create - must be unique.\n\t * @param {Object} options\n\t * @param {Boolean} options.usingOperation Flag indicating that the marker should be added by MarkerOperation.\n\t * See {@link module:engine/model/markercollection~Marker#managedUsingOperations}.\n\t * @param {module:engine/model/range~Range} options.range Marker range.\n\t * @param {Boolean} [options.affectsData=false] Flag indicating that the marker changes the editor data.\n\t * @returns {module:engine/model/markercollection~Marker} Marker that was set.\n\t */\n\taddMarker( name, options ) {\n\t\tthis._assertWriterUsedCorrectly();\n\n\t\tif ( !options || typeof options.usingOperation != 'boolean' ) {\n\t\t\t/**\n\t\t\t * The `options.usingOperation` parameter is required when adding a new marker.\n\t\t\t *\n\t\t\t * @error writer-addmarker-no-usingoperation\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'writer-addmarker-no-usingoperation', this );\n\t\t}\n\n\t\tconst usingOperation = options.usingOperation;\n\t\tconst range = options.range;\n\t\tconst affectsData = options.affectsData === undefined ? false : options.affectsData;\n\n\t\tif ( this.model.markers.has( name ) ) {\n\t\t\t/**\n\t\t\t * Marker with provided name already exists.\n\t\t\t *\n\t\t\t * @error writer-addmarker-marker-exists\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'writer-addmarker-marker-exists', this );\n\t\t}\n\n\t\tif ( !range ) {\n\t\t\t/**\n\t\t\t * Range parameter is required when adding a new marker.\n\t\t\t *\n\t\t\t * @error writer-addmarker-no-range\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'writer-addmarker-no-range', this );\n\t\t}\n\n\t\tif ( !usingOperation ) {\n\t\t\treturn this.model.markers._set( name, range, usingOperation, affectsData );\n\t\t}\n\n\t\tapplyMarkerOperation( this, name, null, range, affectsData );\n\n\t\treturn this.model.markers.get( name );\n\t}\n\n\t/**\n\t * Adds, updates or refreshes a {@link module:engine/model/markercollection~Marker marker}. Marker is a named range, which tracks\n\t * changes in the document and updates its range automatically, when model tree changes. Still, it is possible to change the\n\t * marker's range directly using this method.\n\t *\n\t * As the first parameter you can set marker name or instance. If none of them is provided, new marker, with a unique\n\t * name is created and returned.\n\t *\n\t * As the second parameter you can set the new marker data or leave this parameter as empty which will just refresh\n\t * the marker by triggering downcast conversion for it. Refreshing the marker is useful when you want to change\n\t * the marker {@link module:engine/view/element~Element view element} without changing any marker data.\n\t *\n\t * \t\tlet isCommentActive = false;\n\t *\n\t * \t\tmodel.conversion.markerToHighlight( {\n\t * \t\t\tmodel: 'comment',\n\t *\t\t\tview: data => {\n\t *\t\t\t\tconst classes = [ 'comment-marker' ];\n\t *\n\t *\t\t\t\tif ( isCommentActive ) {\n\t *\t\t\t\t\tclasses.push( 'comment-marker--active' );\n\t *\t\t\t\t}\n\t *\n\t *\t\t\t\treturn { classes };\n\t *\t\t\t}\n\t * \t\t} );\n\t *\n\t * \t\t// Change the property that indicates if marker is displayed as active or not.\n\t * \t\tisCommentActive = true;\n\t *\n\t * \t\t// And refresh the marker to convert it with additional class.\n\t * \t\tmodel.change( writer => writer.updateMarker( 'comment' ) );\n\t *\n\t * The `options.usingOperation` parameter lets you change if the marker should be managed by operations or not. See\n\t * {@link module:engine/model/markercollection~Marker marker class description} to learn about the difference between\n\t * markers managed by operations and not-managed by operations. It is possible to change this option for an existing marker.\n\t *\n\t * The `options.affectsData` parameter, which defaults to `false`, allows you to define if a marker affects the data. It should be\n\t * `true` when the marker change changes the data returned by\n\t * the {@link module:core/editor/utils/dataapimixin~DataApi#getData `editor.getData()`} method.\n\t * When set to `true` it fires the {@link module:engine/model/document~Document#event:change:data `change:data`} event.\n\t * When set to `false` it fires the {@link module:engine/model/document~Document#event:change `change`} event.\n\t *\n\t * Update marker directly base on marker's name:\n\t *\n\t *\t\tupdateMarker( markerName, { range } );\n\t *\n\t * Update marker using operation:\n\t *\n\t *\t\tupdateMarker( marker, { range, usingOperation: true } );\n\t *\t\tupdateMarker( markerName, { range, usingOperation: true } );\n\t *\n\t * Change marker's option (start using operations to manage it):\n\t *\n\t *\t\tupdateMarker( marker, { usingOperation: true } );\n\t *\n\t * Change marker's option (inform the engine, that the marker does not affect the data anymore):\n\t *\n\t *\t\tupdateMarker( markerName, { affectsData: false } );\n\t *\n\t * @see module:engine/model/markercollection~Marker\n\t * @param {String|module:engine/model/markercollection~Marker} markerOrName Name of a marker to update, or a marker instance.\n\t * @param {Object} [options] If options object is not defined then marker will be refreshed by triggering\n\t * downcast conversion for this marker with the same data.\n\t * @param {module:engine/model/range~Range} [options.range] Marker range to update.\n\t * @param {Boolean} [options.usingOperation] Flag indicated whether the marker should be added by MarkerOperation.\n\t * See {@link module:engine/model/markercollection~Marker#managedUsingOperations}.\n\t * @param {Boolean} [options.affectsData] Flag indicating that the marker changes the editor data.\n\t */\n\tupdateMarker( markerOrName, options ) {\n\t\tthis._assertWriterUsedCorrectly();\n\n\t\tconst markerName = typeof markerOrName == 'string' ? markerOrName : markerOrName.name;\n\t\tconst currentMarker = this.model.markers.get( markerName );\n\n\t\tif ( !currentMarker ) {\n\t\t\t/**\n\t\t\t * Marker with provided name does not exists.\n\t\t\t *\n\t\t\t * @error writer-updatemarker-marker-not-exists\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'writer-updatemarker-marker-not-exists', this );\n\t\t}\n\n\t\tif ( !options ) {\n\t\t\tthis.model.markers._refresh( currentMarker );\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst hasUsingOperationDefined = typeof options.usingOperation == 'boolean';\n\t\tconst affectsDataDefined = typeof options.affectsData == 'boolean';\n\n\t\t// Use previously defined marker's affectsData if the property is not provided.\n\t\tconst affectsData = affectsDataDefined ? options.affectsData : currentMarker.affectsData;\n\n\t\tif ( !hasUsingOperationDefined && !options.range && !affectsDataDefined ) {\n\t\t\t/**\n\t\t\t * One of the options is required - provide range, usingOperations or affectsData.\n\t\t\t *\n\t\t\t * @error writer-updatemarker-wrong-options\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'writer-updatemarker-wrong-options', this );\n\t\t}\n\n\t\tconst currentRange = currentMarker.getRange();\n\t\tconst updatedRange = options.range ? options.range : currentRange;\n\n\t\tif ( hasUsingOperationDefined && options.usingOperation !== currentMarker.managedUsingOperations ) {\n\t\t\t// The marker type is changed so it's necessary to create proper operations.\n\t\t\tif ( options.usingOperation ) {\n\t\t\t\t// If marker changes to a managed one treat this as synchronizing existing marker.\n\t\t\t\t// Create `MarkerOperation` with `oldRange` set to `null`, so reverse operation will remove the marker.\n\t\t\t\tapplyMarkerOperation( this, markerName, null, updatedRange, affectsData );\n\t\t\t} else {\n\t\t\t\t// If marker changes to a marker that do not use operations then we need to create additional operation\n\t\t\t\t// that removes that marker first.\n\t\t\t\tapplyMarkerOperation( this, markerName, currentRange, null, affectsData );\n\n\t\t\t\t// Although not managed the marker itself should stay in model and its range should be preserver or changed to passed range.\n\t\t\t\tthis.model.markers._set( markerName, updatedRange, undefined, affectsData );\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\t// Marker's type doesn't change so update it accordingly.\n\t\tif ( currentMarker.managedUsingOperations ) {\n\t\t\tapplyMarkerOperation( this, markerName, currentRange, updatedRange, affectsData );\n\t\t} else {\n\t\t\tthis.model.markers._set( markerName, updatedRange, undefined, affectsData );\n\t\t}\n\t}\n\n\t/**\n\t * Removes given {@link module:engine/model/markercollection~Marker marker} or marker with given name.\n\t * The marker is removed accordingly to how it has been created, so if the marker was created using operation,\n\t * it will be destroyed using operation.\n\t *\n\t * @param {module:engine/model/markercollection~Marker|String} markerOrName Marker or marker name to remove.\n\t */\n\tremoveMarker( markerOrName ) {\n\t\tthis._assertWriterUsedCorrectly();\n\n\t\tconst name = typeof markerOrName == 'string' ? markerOrName : markerOrName.name;\n\n\t\tif ( !this.model.markers.has( name ) ) {\n\t\t\t/**\n\t\t\t * Trying to remove marker which does not exist.\n\t\t\t *\n\t\t\t * @error writer-removemarker-no-marker\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'writer-removemarker-no-marker', this );\n\t\t}\n\n\t\tconst marker = this.model.markers.get( name );\n\n\t\tif ( !marker.managedUsingOperations ) {\n\t\t\tthis.model.markers._remove( name );\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst oldRange = marker.getRange();\n\n\t\tapplyMarkerOperation( this, name, oldRange, null, marker.affectsData );\n\t}\n\n\t/**\n\t * Sets the document's selection (ranges and direction) to the specified location based on the given\n\t * {@link module:engine/model/selection~Selectable selectable} or creates an empty selection if no arguments were passed.\n\t *\n\t *\t\t// Sets selection to the given range.\n\t *\t\tconst range = writer.createRange( start, end );\n\t *\t\twriter.setSelection( range );\n\t *\n\t *\t\t// Sets selection to given ranges.\n\t *\t\tconst ranges = [ writer.createRange( start1, end2 ), writer.createRange( star2, end2 ) ];\n\t *\t\twriter.setSelection( ranges );\n\t *\n\t *\t\t// Sets selection to other selection.\n\t *\t\tconst otherSelection = writer.createSelection();\n\t *\t\twriter.setSelection( otherSelection );\n\t *\n\t *\t\t// Sets selection to the given document selection.\n\t *\t\tconst documentSelection = model.document.selection;\n\t *\t\twriter.setSelection( documentSelection );\n\t *\n\t *\t\t// Sets collapsed selection at the given position.\n\t *\t\tconst position = writer.createPosition( root, path );\n\t *\t\twriter.setSelection( position );\n\t *\n\t *\t\t// Sets collapsed selection at the position of the given node and an offset.\n\t *\t\twriter.setSelection( paragraph, offset );\n\t *\n\t * Creates a range inside an {@link module:engine/model/element~Element element} which starts before the first child of\n \t * that element and ends after the last child of that element.\n\t *\n\t *\t\twriter.setSelection( paragraph, 'in' );\n\t *\n\t * Creates a range on an {@link module:engine/model/item~Item item} which starts before the item and ends just after the item.\n\t *\n\t *\t\twriter.setSelection( paragraph, 'on' );\n\t *\n\t *\t\t// Removes all selection's ranges.\n\t *\t\twriter.setSelection( null );\n\t *\n\t * `Writer#setSelection()` allow passing additional options (`backward`) as the last argument.\n\t *\n\t *\t\t// Sets selection as backward.\n\t *\t\twriter.setSelection( range, { backward: true } );\n\t *\n\t * Throws `writer-incorrect-use` error when the writer is used outside the `change()` block.\n\t *\n\t * @param {module:engine/model/selection~Selectable} selectable\n\t * @param {Number|'before'|'end'|'after'|'on'|'in'} [placeOrOffset] Sets place or offset of the selection.\n\t * @param {Object} [options]\n\t * @param {Boolean} [options.backward] Sets this selection instance to be backward.\n\t */\n\tsetSelection( selectable, placeOrOffset, options ) {\n\t\tthis._assertWriterUsedCorrectly();\n\n\t\tthis.model.document.selection._setTo( selectable, placeOrOffset, options );\n\t}\n\n\t/**\n\t * Moves {@link module:engine/model/documentselection~DocumentSelection#focus} to the specified location.\n\t *\n\t * The location can be specified in the same form as\n\t * {@link #createPositionAt `writer.createPositionAt()`} parameters.\n\t *\n\t * @param {module:engine/model/item~Item|module:engine/model/position~Position} itemOrPosition\n\t * @param {Number|'end'|'before'|'after'} [offset=0] Offset or one of the flags. Used only when\n\t * first parameter is a {@link module:engine/model/item~Item model item}.\n\t */\n\tsetSelectionFocus( itemOrPosition, offset ) {\n\t\tthis._assertWriterUsedCorrectly();\n\n\t\tthis.model.document.selection._setFocus( itemOrPosition, offset );\n\t}\n\n\t/**\n\t * Sets attribute(s) on the selection. If attribute with the same key already is set, it's value is overwritten.\n\t *\n\t * Using key and value pair:\n\t *\n\t * \twriter.setSelectionAttribute( 'italic', true );\n\t *\n\t * Using key-value object:\n\t *\n\t * \twriter.setSelectionAttribute( { italic: true, bold: false } );\n\t *\n\t * Using iterable object:\n\t *\n\t * \twriter.setSelectionAttribute( new Map( [ [ 'italic', true ] ] ) );\n\t *\n\t * @param {String|Object|Iterable.<*>} keyOrObjectOrIterable Key of the attribute to set\n\t * or object / iterable of key => value attribute pairs.\n\t * @param {*} [value] Attribute value.\n\t */\n\tsetSelectionAttribute( keyOrObjectOrIterable, value ) {\n\t\tthis._assertWriterUsedCorrectly();\n\n\t\tif ( typeof keyOrObjectOrIterable === 'string' ) {\n\t\t\tthis._setSelectionAttribute( keyOrObjectOrIterable, value );\n\t\t} else {\n\t\t\tfor ( const [ key, value ] of toMap( keyOrObjectOrIterable ) ) {\n\t\t\t\tthis._setSelectionAttribute( key, value );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Removes attribute(s) with given key(s) from the selection.\n\t *\n\t * Remove one attribute:\n\t *\n\t *\t\twriter.removeSelectionAttribute( 'italic' );\n\t *\n\t * Remove multiple attributes:\n\t *\n\t *\t\twriter.removeSelectionAttribute( [ 'italic', 'bold' ] );\n\t *\n\t * @param {String|Iterable.<String>} keyOrIterableOfKeys Key of the attribute to remove or an iterable of attribute keys to remove.\n\t */\n\tremoveSelectionAttribute( keyOrIterableOfKeys ) {\n\t\tthis._assertWriterUsedCorrectly();\n\n\t\tif ( typeof keyOrIterableOfKeys === 'string' ) {\n\t\t\tthis._removeSelectionAttribute( keyOrIterableOfKeys );\n\t\t} else {\n\t\t\tfor ( const key of keyOrIterableOfKeys ) {\n\t\t\t\tthis._removeSelectionAttribute( key );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Temporarily changes the {@link module:engine/model/documentselection~DocumentSelection#isGravityOverridden gravity}\n\t * of the selection from left to right.\n\t *\n\t * The gravity defines from which direction the selection inherits its attributes. If it's the default left gravity,\n\t * then the selection (after being moved by the user) inherits attributes from its left-hand side.\n\t * This method allows to temporarily override this behavior by forcing the gravity to the right.\n\t *\n\t * For the following model fragment:\n\t *\n\t *\t\t<$text bold=\"true\" linkHref=\"url\">bar[]</$text><$text bold=\"true\">biz</$text>\n\t *\n\t * * Default gravity: selection will have the `bold` and `linkHref` attributes.\n\t * * Overridden gravity: selection will have `bold` attribute.\n\t *\n\t * **Note**: It returns an unique identifier which is required to restore the gravity. It guarantees the symmetry\n\t * of the process.\n\t *\n\t * @returns {String} The unique id which allows restoring the gravity.\n\t */\n\toverrideSelectionGravity() {\n\t\treturn this.model.document.selection._overrideGravity();\n\t}\n\n\t/**\n\t * Restores {@link ~Writer#overrideSelectionGravity} gravity to default.\n\t *\n\t * Restoring the gravity is only possible using the unique identifier returned by\n\t * {@link ~Writer#overrideSelectionGravity}. Note that the gravity remains overridden as long as won't be restored\n\t * the same number of times it was overridden.\n\t *\n\t * @param {String} uid The unique id returned by {@link ~Writer#overrideSelectionGravity}.\n\t */\n\trestoreSelectionGravity( uid ) {\n\t\tthis.model.document.selection._restoreGravity( uid );\n\t}\n\n\t/**\n\t * @private\n\t * @param {String} key Key of the attribute to remove.\n\t * @param {*} value Attribute value.\n\t */\n\t_setSelectionAttribute( key, value ) {\n\t\tconst selection = this.model.document.selection;\n\n\t\t// Store attribute in parent element if the selection is collapsed in an empty node.\n\t\tif ( selection.isCollapsed && selection.anchor.parent.isEmpty ) {\n\t\t\tconst storeKey = DocumentSelection._getStoreAttributeKey( key );\n\n\t\t\tthis.setAttribute( storeKey, value, selection.anchor.parent );\n\t\t}\n\n\t\tselection._setAttribute( key, value );\n\t}\n\n\t/**\n\t * @private\n\t * @param {String} key Key of the attribute to remove.\n\t */\n\t_removeSelectionAttribute( key ) {\n\t\tconst selection = this.model.document.selection;\n\n\t\t// Remove stored attribute from parent element if the selection is collapsed in an empty node.\n\t\tif ( selection.isCollapsed && selection.anchor.parent.isEmpty ) {\n\t\t\tconst storeKey = DocumentSelection._getStoreAttributeKey( key );\n\n\t\t\tthis.removeAttribute( storeKey, selection.anchor.parent );\n\t\t}\n\n\t\tselection._removeAttribute( key );\n\t}\n\n\t/**\n\t * Throws `writer-detached-writer-tries-to-modify-model` error when the writer is used outside of the `change()` block.\n\t *\n\t * @private\n\t */\n\t_assertWriterUsedCorrectly() {\n\t\t/**\n\t\t * Trying to use a writer outside a {@link module:engine/model/model~Model#change `change()`} or\n\t\t * {@link module:engine/model/model~Model#enqueueChange `enqueueChange()`} blocks.\n\t\t *\n\t\t * The writer can only be used inside these blocks which ensures that the model\n\t\t * can only be changed during such \"sessions\".\n\t\t *\n\t\t * @error writer-incorrect-use\n\t\t */\n\t\tif ( this.model._currentWriter !== this ) {\n\t\t\tthrow new CKEditorError( 'writer-incorrect-use', this );\n\t\t}\n\t}\n\n\t/**\n\t * For given action `type` and `positionOrRange` where the action happens, this function finds all affected markers\n\t * and applies a marker operation with the new marker range equal to the current range. Thanks to this, the marker range\n\t * can be later correctly processed during undo.\n\t *\n\t * @private\n\t * @param {'move'|'merge'} type Writer action type.\n\t * @param {module:engine/model/position~Position|module:engine/model/range~Range} positionOrRange Position or range\n\t * where the writer action happens.\n\t */\n\t_addOperationForAffectedMarkers( type, positionOrRange ) {\n\t\tfor ( const marker of this.model.markers ) {\n\t\t\tif ( !marker.managedUsingOperations ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst markerRange = marker.getRange();\n\t\t\tlet isAffected = false;\n\n\t\t\tif ( type === 'move' ) {\n\t\t\t\tisAffected =\n\t\t\t\t\tpositionOrRange.containsPosition( markerRange.start ) ||\n\t\t\t\t\tpositionOrRange.start.isEqual( markerRange.start ) ||\n\t\t\t\t\tpositionOrRange.containsPosition( markerRange.end ) ||\n\t\t\t\t\tpositionOrRange.end.isEqual( markerRange.end );\n\t\t\t} else {\n\t\t\t\t// if type === 'merge'.\n\t\t\t\tconst elementBefore = positionOrRange.nodeBefore;\n\t\t\t\tconst elementAfter = positionOrRange.nodeAfter;\n\n\t\t\t\t//               Start:  <p>Foo[</p><p>Bar]</p>\n\t\t\t\t//         After merge:  <p>Foo[Bar]</p>\n\t\t\t\t// After undoing split:  <p>Foo</p><p>[Bar]</p>     <-- incorrect, needs remembering for undo.\n\t\t\t\t//\n\t\t\t\tconst affectedInLeftElement = markerRange.start.parent == elementBefore && markerRange.start.isAtEnd;\n\n\t\t\t\t//               Start:  <p>[Foo</p><p>]Bar</p>\n\t\t\t\t//         After merge:  <p>[Foo]Bar</p>\n\t\t\t\t// After undoing split:  <p>[Foo]</p><p>Bar</p>     <-- incorrect, needs remembering for undo.\n\t\t\t\t//\n\t\t\t\tconst affectedInRightElement = markerRange.end.parent == elementAfter && markerRange.end.offset == 0;\n\n\t\t\t\t//               Start:  <p>[Foo</p>]<p>Bar</p>\n\t\t\t\t//         After merge:  <p>[Foo]Bar</p>\n\t\t\t\t// After undoing split:  <p>[Foo]</p><p>Bar</p>     <-- incorrect, needs remembering for undo.\n\t\t\t\t//\n\t\t\t\tconst affectedAfterLeftElement = markerRange.end.nodeAfter == elementAfter;\n\n\t\t\t\t//               Start:  <p>Foo</p>[<p>Bar]</p>\n\t\t\t\t//         After merge:  <p>Foo[Bar]</p>\n\t\t\t\t// After undoing split:  <p>Foo</p><p>[Bar]</p>     <-- incorrect, needs remembering for undo.\n\t\t\t\t//\n\t\t\t\tconst affectedBeforeRightElement = markerRange.start.nodeAfter == elementAfter;\n\n\t\t\t\tisAffected = affectedInLeftElement || affectedInRightElement || affectedAfterLeftElement || affectedBeforeRightElement;\n\t\t\t}\n\n\t\t\tif ( isAffected ) {\n\t\t\t\tthis.updateMarker( marker.name, { range: markerRange } );\n\t\t\t}\n\t\t}\n\t}\n}\n\n// Sets given attribute to each node in given range. When attribute value is null then attribute will be removed.\n//\n// Because attribute operation needs to have the same attribute value on the whole range, this function splits\n// the range into smaller parts.\n//\n// Given `range` must be flat.\n//\n// @private\n// @param {module:engine/model/writer~Writer} writer\n// @param {String} key Attribute key.\n// @param {*} value Attribute new value.\n// @param {module:engine/model/range~Range} range Model range on which the attribute will be set.\nfunction setAttributeOnRange( writer, key, value, range ) {\n\tconst model = writer.model;\n\tconst doc = model.document;\n\n\t// Position of the last split, the beginning of the new range.\n\tlet lastSplitPosition = range.start;\n\n\t// Currently position in the scanning range. Because we need value after the position, it is not a current\n\t// position of the iterator but the previous one (we need to iterate one more time to get the value after).\n\tlet position;\n\n\t// Value before the currently position.\n\tlet valueBefore;\n\n\t// Value after the currently position.\n\tlet valueAfter;\n\n\tfor ( const val of range.getWalker( { shallow: true } ) ) {\n\t\tvalueAfter = val.item.getAttribute( key );\n\n\t\t// At the first run of the iterator the position in undefined. We also do not have a valueBefore, but\n\t\t// because valueAfter may be null, valueBefore may be equal valueAfter ( undefined == null ).\n\t\tif ( position && valueBefore != valueAfter ) {\n\t\t\t// if valueBefore == value there is nothing to change, so we add operation only if these values are different.\n\t\t\tif ( valueBefore != value ) {\n\t\t\t\taddOperation();\n\t\t\t}\n\n\t\t\tlastSplitPosition = position;\n\t\t}\n\n\t\tposition = val.nextPosition;\n\t\tvalueBefore = valueAfter;\n\t}\n\n\t// Because position in the loop is not the iterator position (see let position comment), the last position in\n\t// the while loop will be last but one position in the range. We need to check the last position manually.\n\tif ( position instanceof Position && position != lastSplitPosition && valueBefore != value ) {\n\t\taddOperation();\n\t}\n\n\tfunction addOperation() {\n\t\tconst range = new Range( lastSplitPosition, position );\n\t\tconst version = range.root.document ? doc.version : null;\n\t\tconst operation = new AttributeOperation( range, key, valueBefore, value, version );\n\n\t\twriter.batch.addOperation( operation );\n\t\tmodel.applyOperation( operation );\n\t}\n}\n\n// Sets given attribute to the given node. When attribute value is null then attribute will be removed.\n//\n// @private\n// @param {module:engine/model/writer~Writer} writer\n// @param {String} key Attribute key.\n// @param {*} value Attribute new value.\n// @param {module:engine/model/item~Item} item Model item on which the attribute will be set.\nfunction setAttributeOnItem( writer, key, value, item ) {\n\tconst model = writer.model;\n\tconst doc = model.document;\n\tconst previousValue = item.getAttribute( key );\n\tlet range, operation;\n\n\tif ( previousValue != value ) {\n\t\tconst isRootChanged = item.root === item;\n\n\t\tif ( isRootChanged ) {\n\t\t\t// If we change attributes of root element, we have to use `RootAttributeOperation`.\n\t\t\tconst version = item.document ? doc.version : null;\n\n\t\t\toperation = new RootAttributeOperation( item, key, previousValue, value, version );\n\t\t} else {\n\t\t\trange = new Range( Position._createBefore( item ), writer.createPositionAfter( item ) );\n\n\t\t\tconst version = range.root.document ? doc.version : null;\n\n\t\t\toperation = new AttributeOperation( range, key, previousValue, value, version );\n\t\t}\n\n\t\twriter.batch.addOperation( operation );\n\t\tmodel.applyOperation( operation );\n\t}\n}\n\n// Creates and applies marker operation to {@link module:engine/model/operation/operation~Operation operation}.\n//\n// @private\n// @param {module:engine/model/writer~Writer} writer\n// @param {String} name Marker name.\n// @param {module:engine/model/range~Range} oldRange Marker range before the change.\n// @param {module:engine/model/range~Range} newRange Marker range after the change.\n// @param {Boolean} affectsData\nfunction applyMarkerOperation( writer, name, oldRange, newRange, affectsData ) {\n\tconst model = writer.model;\n\tconst doc = model.document;\n\n\tconst operation = new MarkerOperation( name, oldRange, newRange, model.markers, affectsData, doc.version );\n\n\twriter.batch.addOperation( operation );\n\tmodel.applyOperation( operation );\n}\n\n// Creates `MoveOperation` or `DetachOperation` that removes `howMany` nodes starting from `position`.\n// The operation will be applied on given model instance and added to given operation instance.\n//\n// @private\n// @param {module:engine/model/position~Position} position Position from which nodes are removed.\n// @param {Number} howMany Number of nodes to remove.\n// @param {Batch} batch Batch to which the operation will be added.\n// @param {module:engine/model/model~Model} model Model instance on which operation will be applied.\nfunction applyRemoveOperation( position, howMany, batch, model ) {\n\tlet operation;\n\n\tif ( position.root.document ) {\n\t\tconst doc = model.document;\n\t\tconst graveyardPosition = new Position( doc.graveyard, [ 0 ] );\n\n\t\toperation = new MoveOperation( position, howMany, graveyardPosition, doc.version );\n\t} else {\n\t\toperation = new DetachOperation( position, howMany );\n\t}\n\n\tbatch.addOperation( operation );\n\tmodel.applyOperation( operation );\n}\n\n// Returns `true` if both root elements are the same element or both are documents root elements.\n//\n// Elements in the same tree can be moved (for instance you can move element form one documents root to another, or\n// within the same document fragment), but when element supposed to be moved from document fragment to the document, or\n// to another document it should be removed and inserted to avoid problems with OT. This is because features like undo or\n// collaboration may track changes on the document but ignore changes on detached fragments and should not get\n// unexpected `move` operation.\nfunction isSameTree( rootA, rootB ) {\n\t// If it is the same root this is the same tree.\n\tif ( rootA === rootB ) {\n\t\treturn true;\n\t}\n\n\t// If both roots are documents root it is operation within the document what we still treat as the same tree.\n\tif ( rootA instanceof RootElement && rootB instanceof RootElement ) {\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/differ\n */\n\nimport Position from './position';\nimport Range from './range';\n\n/**\n * Calculates the difference between two model states.\n *\n * Receives operations that are to be applied on the model document. Marks parts of the model document tree which\n * are changed and saves the state of these elements before the change. Then, it compares saved elements with the\n * changed elements, after all changes are applied on the model document. Calculates the diff between saved\n * elements and new ones and returns a change set.\n */\nexport default class Differ {\n\t/**\n\t * Creates a `Differ` instance.\n\t *\n\t * @param {module:engine/model/markercollection~MarkerCollection} markerCollection Model's marker collection.\n\t */\n\tconstructor( markerCollection ) {\n\t\t/**\n\t\t * Reference to the model's marker collection.\n\t\t *\n\t\t * @private\n\t\t * @type {module:engine/model/markercollection~MarkerCollection}\n\t\t */\n\t\tthis._markerCollection = markerCollection;\n\n\t\t/**\n\t\t * A map that stores changes that happened in a given element.\n\t\t *\n\t\t * The keys of the map are references to the model elements.\n\t\t * The values of the map are arrays with changes that were done on this element.\n\t\t *\n\t\t * @private\n\t\t * @type {Map}\n\t\t */\n\t\tthis._changesInElement = new Map();\n\n\t\t/**\n\t\t * A map that stores \"element's children snapshots\". A snapshot is representing children of a given element before\n\t\t * the first change was applied on that element. Snapshot items are objects with two properties: `name`,\n\t\t * containing the element name (or `'$text'` for a text node) and `attributes` which is a map of the node's attributes.\n\t\t *\n\t\t * @private\n\t\t * @type {Map}\n\t\t */\n\t\tthis._elementSnapshots = new Map();\n\n\t\t/**\n\t\t * A map that stores all changed markers.\n\t\t *\n\t\t * The keys of the map are marker names.\n\t\t * The values of the map are objects with the `oldRange` and `newRange` properties. They store the marker range\n\t\t * state before and after the change.\n\t\t *\n\t\t * @private\n\t\t * @type {Map}\n\t\t */\n\t\tthis._changedMarkers = new Map();\n\n\t\t/**\n\t\t * Stores the number of changes that were processed. Used to order the changes chronologically. It is important\n\t\t * when changes are sorted.\n\t\t *\n\t\t * @private\n\t\t * @type {Number}\n\t\t */\n\t\tthis._changeCount = 0;\n\n\t\t/**\n\t\t * For efficiency purposes, `Differ` stores the change set returned by the differ after {@link #getChanges} call.\n\t\t * Cache is reset each time a new operation is buffered. If the cache has not been reset, {@link #getChanges} will\n\t\t * return the cached value instead of calculating it again.\n\t\t *\n\t\t * This property stores those changes that did not take place in graveyard root.\n\t\t *\n\t\t * @private\n\t\t * @type {Array.<Object>|null}\n\t\t */\n\t\tthis._cachedChanges = null;\n\n\t\t/**\n\t\t * For efficiency purposes, `Differ` stores the change set returned by the differ after the {@link #getChanges} call.\n\t\t * The cache is reset each time a new operation is buffered. If the cache has not been reset, {@link #getChanges} will\n\t\t * return the cached value instead of calculating it again.\n\t\t *\n\t\t * This property stores all changes evaluated by `Differ`, including those that took place in the graveyard.\n\t\t *\n\t\t * @private\n\t\t * @type {Array.<Object>|null}\n\t\t */\n\t\tthis._cachedChangesWithGraveyard = null;\n\t}\n\n\t/**\n\t * Informs whether there are any changes buffered in `Differ`.\n\t *\n\t * @readonly\n\t * @type {Boolean}\n\t */\n\tget isEmpty() {\n\t\treturn this._changesInElement.size == 0 && this._changedMarkers.size == 0;\n\t}\n\n\t/**\n\t * Marks given `item` in differ to be \"refreshed\". It means that the item will be marked as removed and inserted in the differ changes\n\t * set, so it will be effectively re-converted when differ changes will be handled by a dispatcher.\n\t *\n\t * @param {module:engine/model/item~Item} item Item to refresh.\n\t */\n\trefreshItem( item ) {\n\t\tif ( this._isInInsertedElement( item.parent ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._markRemove( item.parent, item.startOffset, item.offsetSize );\n\t\tthis._markInsert( item.parent, item.startOffset, item.offsetSize );\n\n\t\tconst range = Range._createOn( item );\n\n\t\tfor ( const marker of this._markerCollection.getMarkersIntersectingRange( range ) ) {\n\t\t\tconst markerRange = marker.getRange();\n\n\t\t\tthis.bufferMarkerChange( marker.name, markerRange, markerRange, marker.affectsData );\n\t\t}\n\n\t\t// Clear cache after each buffered operation as it is no longer valid.\n\t\tthis._cachedChanges = null;\n\t}\n\n\t/**\n\t * Buffers the given operation. An operation has to be buffered before it is executed.\n\t *\n\t * Operation type is checked and it is checked which nodes it will affect. These nodes are then stored in `Differ`\n\t * in the state before the operation is executed.\n\t *\n\t * @param {module:engine/model/operation/operation~Operation} operation An operation to buffer.\n\t */\n\tbufferOperation( operation ) {\n\t\t// Below we take an operation, check its type, then use its parameters in marking (private) methods.\n\t\t// The general rule is to not mark elements inside inserted element. All inserted elements are re-rendered.\n\t\t// Marking changes in them would cause a \"double\" changing then.\n\t\t//\n\t\tswitch ( operation.type ) {\n\t\t\tcase 'insert': {\n\t\t\t\tif ( this._isInInsertedElement( operation.position.parent ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis._markInsert( operation.position.parent, operation.position.offset, operation.nodes.maxOffset );\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'addAttribute':\n\t\t\tcase 'removeAttribute':\n\t\t\tcase 'changeAttribute': {\n\t\t\t\tfor ( const item of operation.range.getItems( { shallow: true } ) ) {\n\t\t\t\t\tif ( this._isInInsertedElement( item.parent ) ) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._markAttribute( item );\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'remove':\n\t\t\tcase 'move':\n\t\t\tcase 'reinsert': {\n\t\t\t\t// When range is moved to the same position then not mark it as a change.\n\t\t\t\t// See: https://github.com/ckeditor/ckeditor5-engine/issues/1664.\n\t\t\t\tif (\n\t\t\t\t\toperation.sourcePosition.isEqual( operation.targetPosition ) ||\n\t\t\t\t\toperation.sourcePosition.getShiftedBy( operation.howMany ).isEqual( operation.targetPosition )\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst sourceParentInserted = this._isInInsertedElement( operation.sourcePosition.parent );\n\t\t\t\tconst targetParentInserted = this._isInInsertedElement( operation.targetPosition.parent );\n\n\t\t\t\tif ( !sourceParentInserted ) {\n\t\t\t\t\tthis._markRemove( operation.sourcePosition.parent, operation.sourcePosition.offset, operation.howMany );\n\t\t\t\t}\n\n\t\t\t\tif ( !targetParentInserted ) {\n\t\t\t\t\tthis._markInsert( operation.targetPosition.parent, operation.getMovedRangeStart().offset, operation.howMany );\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'rename': {\n\t\t\t\tif ( this._isInInsertedElement( operation.position.parent ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis._markRemove( operation.position.parent, operation.position.offset, 1 );\n\t\t\t\tthis._markInsert( operation.position.parent, operation.position.offset, 1 );\n\n\t\t\t\tconst range = Range._createFromPositionAndShift( operation.position, 1 );\n\n\t\t\t\tfor ( const marker of this._markerCollection.getMarkersIntersectingRange( range ) ) {\n\t\t\t\t\tconst markerRange = marker.getRange();\n\n\t\t\t\t\tthis.bufferMarkerChange( marker.name, markerRange, markerRange, marker.affectsData );\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'split': {\n\t\t\t\tconst splitElement = operation.splitPosition.parent;\n\n\t\t\t\t// Mark that children of the split element were removed.\n\t\t\t\tif ( !this._isInInsertedElement( splitElement ) ) {\n\t\t\t\t\tthis._markRemove( splitElement, operation.splitPosition.offset, operation.howMany );\n\t\t\t\t}\n\n\t\t\t\t// Mark that the new element (split copy) was inserted.\n\t\t\t\tif ( !this._isInInsertedElement( operation.insertionPosition.parent ) ) {\n\t\t\t\t\tthis._markInsert( operation.insertionPosition.parent, operation.insertionPosition.offset, 1 );\n\t\t\t\t}\n\n\t\t\t\t// If the split took the element from the graveyard, mark that the element from the graveyard was removed.\n\t\t\t\tif ( operation.graveyardPosition ) {\n\t\t\t\t\tthis._markRemove( operation.graveyardPosition.parent, operation.graveyardPosition.offset, 1 );\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'merge': {\n\t\t\t\t// Mark that the merged element was removed.\n\t\t\t\tconst mergedElement = operation.sourcePosition.parent;\n\n\t\t\t\tif ( !this._isInInsertedElement( mergedElement.parent ) ) {\n\t\t\t\t\tthis._markRemove( mergedElement.parent, mergedElement.startOffset, 1 );\n\t\t\t\t}\n\n\t\t\t\t// Mark that the merged element was inserted into graveyard.\n\t\t\t\tconst graveyardParent = operation.graveyardPosition.parent;\n\n\t\t\t\tthis._markInsert( graveyardParent, operation.graveyardPosition.offset, 1 );\n\n\t\t\t\t// Mark that children of merged element were inserted at new parent.\n\t\t\t\tconst mergedIntoElement = operation.targetPosition.parent;\n\n\t\t\t\tif ( !this._isInInsertedElement( mergedIntoElement ) ) {\n\t\t\t\t\tthis._markInsert( mergedIntoElement, operation.targetPosition.offset, mergedElement.maxOffset );\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\t// Clear cache after each buffered operation as it is no longer valid.\n\t\tthis._cachedChanges = null;\n\t}\n\n\t/**\n\t * Buffers a marker change.\n\t *\n\t * @param {String} markerName The name of the marker that changed.\n\t * @param {module:engine/model/range~Range|null} oldRange Marker range before the change or `null` if the marker has just\n\t * been created.\n\t * @param {module:engine/model/range~Range|null} newRange Marker range after the change or `null` if the marker was removed.\n\t * @param {Boolean} affectsData Flag indicating whether marker affects the editor data.\n\t */\n\tbufferMarkerChange( markerName, oldRange, newRange, affectsData ) {\n\t\tconst buffered = this._changedMarkers.get( markerName );\n\n\t\tif ( !buffered ) {\n\t\t\tthis._changedMarkers.set( markerName, {\n\t\t\t\toldRange,\n\t\t\t\tnewRange,\n\t\t\t\taffectsData\n\t\t\t} );\n\t\t} else {\n\t\t\tbuffered.newRange = newRange;\n\t\t\tbuffered.affectsData = affectsData;\n\n\t\t\tif ( buffered.oldRange == null && buffered.newRange == null ) {\n\t\t\t\t// The marker is going to be removed (`newRange == null`) but it did not exist before the first buffered change\n\t\t\t\t// (`buffered.oldRange == null`). In this case, do not keep the marker in buffer at all.\n\t\t\t\tthis._changedMarkers.delete( markerName );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Returns all markers that should be removed as a result of buffered changes.\n\t *\n\t * @returns {Array.<Object>} Markers to remove. Each array item is an object containing the `name` and `range` properties.\n\t */\n\tgetMarkersToRemove() {\n\t\tconst result = [];\n\n\t\tfor ( const [ name, change ] of this._changedMarkers ) {\n\t\t\tif ( change.oldRange != null ) {\n\t\t\t\tresult.push( { name, range: change.oldRange } );\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * Returns all markers which should be added as a result of buffered changes.\n\t *\n\t * @returns {Array.<Object>} Markers to add. Each array item is an object containing the `name` and `range` properties.\n\t */\n\tgetMarkersToAdd() {\n\t\tconst result = [];\n\n\t\tfor ( const [ name, change ] of this._changedMarkers ) {\n\t\t\tif ( change.newRange != null ) {\n\t\t\t\tresult.push( { name, range: change.newRange } );\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * Returns all markers which changed.\n\t *\n\t * @returns {Array.<Object>}\n\t */\n\tgetChangedMarkers() {\n\t\treturn Array.from( this._changedMarkers ).map( item => (\n\t\t\t{\n\t\t\t\tname: item[ 0 ],\n\t\t\t\tdata: {\n\t\t\t\t\toldRange: item[ 1 ].oldRange,\n\t\t\t\t\tnewRange: item[ 1 ].newRange\n\t\t\t\t}\n\t\t\t}\n\t\t) );\n\t}\n\n\t/**\n\t * Checks whether some of the buffered changes affect the editor data.\n\t *\n\t * Types of changes which affect the editor data:\n\t *\n\t * * model structure changes,\n\t * * attribute changes,\n\t * * changes of markers which were defined as `affectingData`.\n\t *\n\t * @returns {Boolean}\n\t */\n\thasDataChanges() {\n\t\tfor ( const [ , change ] of this._changedMarkers ) {\n\t\t\tif ( change.affectsData ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\t// If markers do not affect the data, check whether there are some changes in elements.\n\t\treturn this._changesInElement.size > 0;\n\t}\n\n\t/**\n\t * Calculates the diff between the old model tree state (the state before the first buffered operations since the last {@link #reset}\n\t * call) and the new model tree state (actual one). It should be called after all buffered operations are executed.\n\t *\n\t * The diff set is returned as an array of diff items, each describing a change done on the model. The items are sorted by\n\t * the position on which the change happened. If a position {@link module:engine/model/position~Position#isBefore is before}\n\t * another one, it will be on an earlier index in the diff set.\n\t *\n\t * Because calculating the diff is a costly operation, the result is cached. If no new operation was buffered since the\n\t * previous {@link #getChanges} call, the next call will return the cached value.\n\t *\n\t * @param {Object} options Additional options.\n\t * @param {Boolean} [options.includeChangesInGraveyard=false] If set to `true`, also changes that happened\n\t * in the graveyard root will be returned. By default, changes in the graveyard root are not returned.\n\t * @returns {Array.<Object>} Diff between the old and the new model tree state.\n\t */\n\tgetChanges( options = { includeChangesInGraveyard: false } ) {\n\t\t// If there are cached changes, just return them instead of calculating changes again.\n\t\tif ( this._cachedChanges ) {\n\t\t\tif ( options.includeChangesInGraveyard ) {\n\t\t\t\treturn this._cachedChangesWithGraveyard.slice();\n\t\t\t} else {\n\t\t\t\treturn this._cachedChanges.slice();\n\t\t\t}\n\t\t}\n\n\t\t// Will contain returned results.\n\t\tlet diffSet = [];\n\n\t\t// Check all changed elements.\n\t\tfor ( const element of this._changesInElement.keys() ) {\n\t\t\t// Get changes for this element and sort them.\n\t\t\tconst changes = this._changesInElement.get( element ).sort( ( a, b ) => {\n\t\t\t\tif ( a.offset === b.offset ) {\n\t\t\t\t\tif ( a.type != b.type ) {\n\t\t\t\t\t\t// If there are multiple changes at the same position, \"remove\" change should be first.\n\t\t\t\t\t\t// If the order is different, for example, we would first add some nodes and then removed them\n\t\t\t\t\t\t// (instead of the nodes that we should remove).\n\t\t\t\t\t\treturn a.type == 'remove' ? -1 : 1;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\n\t\t\t\treturn a.offset < b.offset ? -1 : 1;\n\t\t\t} );\n\n\t\t\t// Get children of this element before any change was applied on it.\n\t\t\tconst snapshotChildren = this._elementSnapshots.get( element );\n\t\t\t// Get snapshot of current element's children.\n\t\t\tconst elementChildren = _getChildrenSnapshot( element.getChildren() );\n\n\t\t\t// Generate actions basing on changes done on element.\n\t\t\tconst actions = _generateActionsFromChanges( snapshotChildren.length, changes );\n\n\t\t\tlet i = 0; // Iterator in `elementChildren` array -- iterates through current children of element.\n\t\t\tlet j = 0; // Iterator in `snapshotChildren` array -- iterates through old children of element.\n\n\t\t\t// Process every action.\n\t\t\tfor ( const action of actions ) {\n\t\t\t\tif ( action === 'i' ) {\n\t\t\t\t\t// Generate diff item for this element and insert it into the diff set.\n\t\t\t\t\tdiffSet.push( this._getInsertDiff( element, i, elementChildren[ i ].name ) );\n\n\t\t\t\t\ti++;\n\t\t\t\t} else if ( action === 'r' ) {\n\t\t\t\t\t// Generate diff item for this element and insert it into the diff set.\n\t\t\t\t\tdiffSet.push( this._getRemoveDiff( element, i, snapshotChildren[ j ].name ) );\n\n\t\t\t\t\tj++;\n\t\t\t\t} else if ( action === 'a' ) {\n\t\t\t\t\t// Take attributes from saved and current children.\n\t\t\t\t\tconst elementAttributes = elementChildren[ i ].attributes;\n\t\t\t\t\tconst snapshotAttributes = snapshotChildren[ j ].attributes;\n\t\t\t\t\tlet range;\n\n\t\t\t\t\tif ( elementChildren[ i ].name == '$text' ) {\n\t\t\t\t\t\trange = new Range( Position._createAt( element, i ), Position._createAt( element, i + 1 ) );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst index = element.offsetToIndex( i );\n\t\t\t\t\t\trange = new Range( Position._createAt( element, i ), Position._createAt( element.getChild( index ), 0 ) );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Generate diff items for this change (there might be multiple attributes changed and\n\t\t\t\t\t// there is a single diff for each of them) and insert them into the diff set.\n\t\t\t\t\tdiffSet.push( ...this._getAttributesDiff( range, snapshotAttributes, elementAttributes ) );\n\n\t\t\t\t\ti++;\n\t\t\t\t\tj++;\n\t\t\t\t} else {\n\t\t\t\t\t// `action` is 'equal'. Child not changed.\n\t\t\t\t\ti++;\n\t\t\t\t\tj++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Then, sort the changes by the position (change at position before other changes is first).\n\t\tdiffSet.sort( ( a, b ) => {\n\t\t\t// If the change is in different root, we don't care much, but we'd like to have all changes in given\n\t\t\t// root \"together\" in the array. So let's just sort them by the root name. It does not matter which root\n\t\t\t// will be processed first.\n\t\t\tif ( a.position.root != b.position.root ) {\n\t\t\t\treturn a.position.root.rootName < b.position.root.rootName ? -1 : 1;\n\t\t\t}\n\n\t\t\t// If change happens at the same position...\n\t\t\tif ( a.position.isEqual( b.position ) ) {\n\t\t\t\t// Keep chronological order of operations.\n\t\t\t\treturn a.changeCount - b.changeCount;\n\t\t\t}\n\n\t\t\t// If positions differ, position \"on the left\" should be earlier in the result.\n\t\t\treturn a.position.isBefore( b.position ) ? -1 : 1;\n\t\t} );\n\n\t\t// Glue together multiple changes (mostly on text nodes).\n\t\tfor ( let i = 1, prevIndex = 0; i < diffSet.length; i++ ) {\n\t\t\tconst prevDiff = diffSet[ prevIndex ];\n\t\t\tconst thisDiff = diffSet[ i ];\n\n\t\t\t// Glue remove changes if they happen on text on same position.\n\t\t\tconst isConsecutiveTextRemove =\n\t\t\t\tprevDiff.type == 'remove' && thisDiff.type == 'remove' &&\n\t\t\t\tprevDiff.name == '$text' && thisDiff.name == '$text' &&\n\t\t\t\tprevDiff.position.isEqual( thisDiff.position );\n\n\t\t\t// Glue insert changes if they happen on text on consecutive fragments.\n\t\t\tconst isConsecutiveTextAdd =\n\t\t\t\tprevDiff.type == 'insert' && thisDiff.type == 'insert' &&\n\t\t\t\tprevDiff.name == '$text' && thisDiff.name == '$text' &&\n\t\t\t\tprevDiff.position.parent == thisDiff.position.parent &&\n\t\t\t\tprevDiff.position.offset + prevDiff.length == thisDiff.position.offset;\n\n\t\t\t// Glue attribute changes if they happen on consecutive fragments and have same key, old value and new value.\n\t\t\tconst isConsecutiveAttributeChange =\n\t\t\t\tprevDiff.type == 'attribute' && thisDiff.type == 'attribute' &&\n\t\t\t\tprevDiff.position.parent == thisDiff.position.parent &&\n\t\t\t\tprevDiff.range.isFlat && thisDiff.range.isFlat &&\n\t\t\t\tprevDiff.position.offset + prevDiff.length == thisDiff.position.offset &&\n\t\t\t\tprevDiff.attributeKey == thisDiff.attributeKey &&\n\t\t\t\tprevDiff.attributeOldValue == thisDiff.attributeOldValue &&\n\t\t\t\tprevDiff.attributeNewValue == thisDiff.attributeNewValue;\n\n\t\t\tif ( isConsecutiveTextRemove || isConsecutiveTextAdd || isConsecutiveAttributeChange ) {\n\t\t\t\tprevDiff.length++;\n\n\t\t\t\tif ( isConsecutiveAttributeChange ) {\n\t\t\t\t\tprevDiff.range.end = prevDiff.range.end.getShiftedBy( 1 );\n\t\t\t\t}\n\n\t\t\t\tdiffSet[ i ] = null;\n\t\t\t} else {\n\t\t\t\tprevIndex = i;\n\t\t\t}\n\t\t}\n\n\t\tdiffSet = diffSet.filter( v => v );\n\n\t\t// Remove `changeCount` property from diff items. It is used only for sorting and is internal thing.\n\t\tfor ( const item of diffSet ) {\n\t\t\tdelete item.changeCount;\n\n\t\t\tif ( item.type == 'attribute' ) {\n\t\t\t\tdelete item.position;\n\t\t\t\tdelete item.length;\n\t\t\t}\n\t\t}\n\n\t\tthis._changeCount = 0;\n\n\t\t// Cache changes.\n\t\tthis._cachedChangesWithGraveyard = diffSet.slice();\n\t\tthis._cachedChanges = diffSet.filter( _changesInGraveyardFilter );\n\n\t\tif ( options.includeChangesInGraveyard ) {\n\t\t\treturn this._cachedChangesWithGraveyard;\n\t\t} else {\n\t\t\treturn this._cachedChanges;\n\t\t}\n\t}\n\n\t/**\n\t * Resets `Differ`. Removes all buffered changes.\n\t */\n\treset() {\n\t\tthis._changesInElement.clear();\n\t\tthis._elementSnapshots.clear();\n\t\tthis._changedMarkers.clear();\n\t\tthis._cachedChanges = null;\n\t}\n\n\t/**\n\t * Saves and handles an insert change.\n\t *\n\t * @private\n\t * @param {module:engine/model/element~Element} parent\n\t * @param {Number} offset\n\t * @param {Number} howMany\n\t */\n\t_markInsert( parent, offset, howMany ) {\n\t\tconst changeItem = { type: 'insert', offset, howMany, count: this._changeCount++ };\n\n\t\tthis._markChange( parent, changeItem );\n\t}\n\n\t/**\n\t * Saves and handles a remove change.\n\t *\n\t * @private\n\t * @param {module:engine/model/element~Element} parent\n\t * @param {Number} offset\n\t * @param {Number} howMany\n\t */\n\t_markRemove( parent, offset, howMany ) {\n\t\tconst changeItem = { type: 'remove', offset, howMany, count: this._changeCount++ };\n\n\t\tthis._markChange( parent, changeItem );\n\n\t\tthis._removeAllNestedChanges( parent, offset, howMany );\n\t}\n\n\t/**\n\t * Saves and handles an attribute change.\n\t *\n\t * @private\n\t * @param {module:engine/model/item~Item} item\n\t */\n\t_markAttribute( item ) {\n\t\tconst changeItem = { type: 'attribute', offset: item.startOffset, howMany: item.offsetSize, count: this._changeCount++ };\n\n\t\tthis._markChange( item.parent, changeItem );\n\t}\n\n\t/**\n\t * Saves and handles a model change.\n\t *\n\t * @private\n\t * @param {module:engine/model/element~Element} parent\n\t * @param {Object} changeItem\n\t */\n\t_markChange( parent, changeItem ) {\n\t\t// First, make a snapshot of this parent's children (it will be made only if it was not made before).\n\t\tthis._makeSnapshot( parent );\n\n\t\t// Then, get all changes that already were done on the element (empty array if this is the first change).\n\t\tconst changes = this._getChangesForElement( parent );\n\n\t\t// Then, look through all the changes, and transform them or the new change.\n\t\tthis._handleChange( changeItem, changes );\n\n\t\t// Add the new change.\n\t\tchanges.push( changeItem );\n\n\t\t// Remove incorrect changes. During transformation some change might be, for example, included in another.\n\t\t// In that case, the change will have `howMany` property set to `0` or less. We need to remove those changes.\n\t\tfor ( let i = 0; i < changes.length; i++ ) {\n\t\t\tif ( changes[ i ].howMany < 1 ) {\n\t\t\t\tchanges.splice( i, 1 );\n\n\t\t\t\ti--;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Gets an array of changes that have already been saved for a given element.\n\t *\n\t * @private\n\t * @param {module:engine/model/element~Element} element\n\t * @returns {Array.<Object>}\n\t */\n\t_getChangesForElement( element ) {\n\t\tlet changes;\n\n\t\tif ( this._changesInElement.has( element ) ) {\n\t\t\tchanges = this._changesInElement.get( element );\n\t\t} else {\n\t\t\tchanges = [];\n\n\t\t\tthis._changesInElement.set( element, changes );\n\t\t}\n\n\t\treturn changes;\n\t}\n\n\t/**\n\t * Saves a children snapshot for a given element.\n\t *\n\t * @private\n\t * @param {module:engine/model/element~Element} element\n\t */\n\t_makeSnapshot( element ) {\n\t\tif ( !this._elementSnapshots.has( element ) ) {\n\t\t\tthis._elementSnapshots.set( element, _getChildrenSnapshot( element.getChildren() ) );\n\t\t}\n\t}\n\n\t/**\n\t * For a given newly saved change, compares it with a change already done on the element and modifies the incoming\n\t * change and/or the old change.\n\t *\n\t * @private\n\t * @param {Object} inc Incoming (new) change.\n\t * @param {Array.<Object>} changes An array containing all the changes done on that element.\n\t */\n\t_handleChange( inc, changes ) {\n\t\t// We need a helper variable that will store how many nodes are to be still handled for this change item.\n\t\t// `nodesToHandle` (how many nodes still need to be handled) and `howMany` (how many nodes were affected)\n\t\t// needs to be differentiated.\n\t\t//\n\t\t// This comes up when there are multiple changes that are affected by `inc` change item.\n\t\t//\n\t\t// For example: assume two insert changes: `{ offset: 2, howMany: 1 }` and `{ offset: 5, howMany: 1 }`.\n\t\t// Assume that `inc` change is remove `{ offset: 2, howMany: 2, nodesToHandle: 2 }`.\n\t\t//\n\t\t// Then, we:\n\t\t// - \"forget\" about first insert change (it is \"eaten\" by remove),\n\t\t// - because of that, at the end we will want to remove only one node (`nodesToHandle = 1`),\n\t\t// - but still we have to change offset of the second insert change from `5` to `3`!\n\t\t//\n\t\t// So, `howMany` does not change throughout items transformation and keeps information about how many nodes were affected,\n\t\t// while `nodesToHandle` means how many nodes need to be handled after the change item is transformed by other changes.\n\t\tinc.nodesToHandle = inc.howMany;\n\n\t\tfor ( const old of changes ) {\n\t\t\tconst incEnd = inc.offset + inc.howMany;\n\t\t\tconst oldEnd = old.offset + old.howMany;\n\n\t\t\tif ( inc.type == 'insert' ) {\n\t\t\t\tif ( old.type == 'insert' ) {\n\t\t\t\t\tif ( inc.offset <= old.offset ) {\n\t\t\t\t\t\told.offset += inc.howMany;\n\t\t\t\t\t} else if ( inc.offset < oldEnd ) {\n\t\t\t\t\t\told.howMany += inc.nodesToHandle;\n\t\t\t\t\t\tinc.nodesToHandle = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( old.type == 'remove' ) {\n\t\t\t\t\tif ( inc.offset < old.offset ) {\n\t\t\t\t\t\told.offset += inc.howMany;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( old.type == 'attribute' ) {\n\t\t\t\t\tif ( inc.offset <= old.offset ) {\n\t\t\t\t\t\told.offset += inc.howMany;\n\t\t\t\t\t} else if ( inc.offset < oldEnd ) {\n\t\t\t\t\t\t// This case is more complicated, because attribute change has to be split into two.\n\t\t\t\t\t\t// Example (assume that uppercase and lowercase letters mean different attributes):\n\t\t\t\t\t\t//\n\t\t\t\t\t\t// initial state:\t\tabcxyz\n\t\t\t\t\t\t// attribute change:\taBCXYz\n\t\t\t\t\t\t// incoming insert:\t\taBCfooXYz\n\t\t\t\t\t\t//\n\t\t\t\t\t\t// Change ranges cannot intersect because each item has to be described exactly (it was either\n\t\t\t\t\t\t// not changed, inserted, removed, or its attribute was changed). That's why old attribute\n\t\t\t\t\t\t// change has to be split and both parts has to be handled separately from now on.\n\t\t\t\t\t\tconst howMany = old.howMany;\n\n\t\t\t\t\t\told.howMany = inc.offset - old.offset;\n\n\t\t\t\t\t\t// Add the second part of attribute change to the beginning of processed array so it won't\n\t\t\t\t\t\t// be processed again in this loop.\n\t\t\t\t\t\tchanges.unshift( {\n\t\t\t\t\t\t\ttype: 'attribute',\n\t\t\t\t\t\t\toffset: incEnd,\n\t\t\t\t\t\t\thowMany: howMany - old.howMany,\n\t\t\t\t\t\t\tcount: this._changeCount++\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( inc.type == 'remove' ) {\n\t\t\t\tif ( old.type == 'insert' ) {\n\t\t\t\t\tif ( incEnd <= old.offset ) {\n\t\t\t\t\t\told.offset -= inc.howMany;\n\t\t\t\t\t} else if ( incEnd <= oldEnd ) {\n\t\t\t\t\t\tif ( inc.offset < old.offset ) {\n\t\t\t\t\t\t\tconst intersectionLength = incEnd - old.offset;\n\n\t\t\t\t\t\t\told.offset = inc.offset;\n\n\t\t\t\t\t\t\told.howMany -= intersectionLength;\n\t\t\t\t\t\t\tinc.nodesToHandle -= intersectionLength;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\told.howMany -= inc.nodesToHandle;\n\t\t\t\t\t\t\tinc.nodesToHandle = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif ( inc.offset <= old.offset ) {\n\t\t\t\t\t\t\tinc.nodesToHandle -= old.howMany;\n\t\t\t\t\t\t\told.howMany = 0;\n\t\t\t\t\t\t} else if ( inc.offset < oldEnd ) {\n\t\t\t\t\t\t\tconst intersectionLength = oldEnd - inc.offset;\n\n\t\t\t\t\t\t\told.howMany -= intersectionLength;\n\t\t\t\t\t\t\tinc.nodesToHandle -= intersectionLength;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( old.type == 'remove' ) {\n\t\t\t\t\tif ( incEnd <= old.offset ) {\n\t\t\t\t\t\told.offset -= inc.howMany;\n\t\t\t\t\t} else if ( inc.offset < old.offset ) {\n\t\t\t\t\t\tinc.nodesToHandle += old.howMany;\n\t\t\t\t\t\told.howMany = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( old.type == 'attribute' ) {\n\t\t\t\t\tif ( incEnd <= old.offset ) {\n\t\t\t\t\t\told.offset -= inc.howMany;\n\t\t\t\t\t} else if ( inc.offset < old.offset ) {\n\t\t\t\t\t\tconst intersectionLength = incEnd - old.offset;\n\n\t\t\t\t\t\told.offset = inc.offset;\n\t\t\t\t\t\told.howMany -= intersectionLength;\n\t\t\t\t\t} else if ( inc.offset < oldEnd ) {\n\t\t\t\t\t\tif ( incEnd <= oldEnd ) {\n\t\t\t\t\t\t\t// On first sight in this case we don't need to split attribute operation into two.\n\t\t\t\t\t\t\t// However the changes set is later converted to actions (see `_generateActionsFromChanges`).\n\t\t\t\t\t\t\t// For that reason, no two changes may intersect.\n\t\t\t\t\t\t\t// So we cannot have an attribute change that \"contains\" remove change.\n\t\t\t\t\t\t\t// Attribute change needs to be split.\n\t\t\t\t\t\t\tconst howMany = old.howMany;\n\n\t\t\t\t\t\t\told.howMany = inc.offset - old.offset;\n\n\t\t\t\t\t\t\tconst howManyAfter = howMany - old.howMany - inc.nodesToHandle;\n\n\t\t\t\t\t\t\t// Add the second part of attribute change to the beginning of processed array so it won't\n\t\t\t\t\t\t\t// be processed again in this loop.\n\t\t\t\t\t\t\tchanges.unshift( {\n\t\t\t\t\t\t\t\ttype: 'attribute',\n\t\t\t\t\t\t\t\toffset: inc.offset,\n\t\t\t\t\t\t\t\thowMany: howManyAfter,\n\t\t\t\t\t\t\t\tcount: this._changeCount++\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\told.howMany -= oldEnd - inc.offset;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( inc.type == 'attribute' ) {\n\t\t\t\t// In case of attribute change, `howMany` should be kept same as `nodesToHandle`. It's not an error.\n\t\t\t\tif ( old.type == 'insert' ) {\n\t\t\t\t\tif ( inc.offset < old.offset && incEnd > old.offset ) {\n\t\t\t\t\t\tif ( incEnd > oldEnd ) {\n\t\t\t\t\t\t\t// This case is similar to a case described when incoming change was insert and old change was attribute.\n\t\t\t\t\t\t\t// See comment above.\n\t\t\t\t\t\t\t//\n\t\t\t\t\t\t\t// This time incoming change is attribute. We need to split incoming change in this case too.\n\t\t\t\t\t\t\t// However this time, the second part of the attribute change needs to be processed further\n\t\t\t\t\t\t\t// because there might be other changes that it collides with.\n\t\t\t\t\t\t\tconst attributePart = {\n\t\t\t\t\t\t\t\ttype: 'attribute',\n\t\t\t\t\t\t\t\toffset: oldEnd,\n\t\t\t\t\t\t\t\thowMany: incEnd - oldEnd,\n\t\t\t\t\t\t\t\tcount: this._changeCount++\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\tthis._handleChange( attributePart, changes );\n\n\t\t\t\t\t\t\tchanges.push( attributePart );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tinc.nodesToHandle = old.offset - inc.offset;\n\t\t\t\t\t\tinc.howMany = inc.nodesToHandle;\n\t\t\t\t\t} else if ( inc.offset >= old.offset && inc.offset < oldEnd ) {\n\t\t\t\t\t\tif ( incEnd > oldEnd ) {\n\t\t\t\t\t\t\tinc.nodesToHandle = incEnd - oldEnd;\n\t\t\t\t\t\t\tinc.offset = oldEnd;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tinc.nodesToHandle = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( old.type == 'remove' ) {\n\t\t\t\t\t// This is a case when attribute change \"contains\" remove change.\n\t\t\t\t\t// The attribute change needs to be split into two because changes cannot intersect.\n\t\t\t\t\tif ( inc.offset < old.offset && incEnd > old.offset ) {\n\t\t\t\t\t\tconst attributePart = {\n\t\t\t\t\t\t\ttype: 'attribute',\n\t\t\t\t\t\t\toffset: old.offset,\n\t\t\t\t\t\t\thowMany: incEnd - old.offset,\n\t\t\t\t\t\t\tcount: this._changeCount++\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tthis._handleChange( attributePart, changes );\n\n\t\t\t\t\t\tchanges.push( attributePart );\n\n\t\t\t\t\t\tinc.nodesToHandle = old.offset - inc.offset;\n\t\t\t\t\t\tinc.howMany = inc.nodesToHandle;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( old.type == 'attribute' ) {\n\t\t\t\t\t// There are only two conflicting scenarios possible here:\n\t\t\t\t\tif ( inc.offset >= old.offset && incEnd <= oldEnd ) {\n\t\t\t\t\t\t// `old` change includes `inc` change, or they are the same.\n\t\t\t\t\t\tinc.nodesToHandle = 0;\n\t\t\t\t\t\tinc.howMany = 0;\n\t\t\t\t\t\tinc.offset = 0;\n\t\t\t\t\t} else if ( inc.offset <= old.offset && incEnd >= oldEnd ) {\n\t\t\t\t\t\t// `inc` change includes `old` change.\n\t\t\t\t\t\told.howMany = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tinc.howMany = inc.nodesToHandle;\n\t\tdelete inc.nodesToHandle;\n\t}\n\n\t/**\n\t * Returns an object with a single insert change description.\n\t *\n\t * @private\n\t * @param {module:engine/model/element~Element} parent The element in which the change happened.\n\t * @param {Number} offset The offset at which change happened.\n\t * @param {String} name The name of the removed element or `'$text'` for a character.\n\t * @returns {Object} The diff item.\n\t */\n\t_getInsertDiff( parent, offset, name ) {\n\t\treturn {\n\t\t\ttype: 'insert',\n\t\t\tposition: Position._createAt( parent, offset ),\n\t\t\tname,\n\t\t\tlength: 1,\n\t\t\tchangeCount: this._changeCount++\n\t\t};\n\t}\n\n\t/**\n\t * Returns an object with a single remove change description.\n\t *\n\t * @private\n\t * @param {module:engine/model/element~Element} parent The element in which change happened.\n\t * @param {Number} offset The offset at which change happened.\n\t * @param {String} name The name of the removed element or `'$text'` for a character.\n\t * @returns {Object} The diff item.\n\t */\n\t_getRemoveDiff( parent, offset, name ) {\n\t\treturn {\n\t\t\ttype: 'remove',\n\t\t\tposition: Position._createAt( parent, offset ),\n\t\t\tname,\n\t\t\tlength: 1,\n\t\t\tchangeCount: this._changeCount++\n\t\t};\n\t}\n\n\t/**\n\t * Returns an array of objects where each one is a single attribute change description.\n\t *\n\t * @private\n\t * @param {module:engine/model/range~Range} range The range where the change happened.\n\t * @param {Map} oldAttributes A map, map iterator or compatible object that contains attributes before the change.\n\t * @param {Map} newAttributes A map, map iterator or compatible object that contains attributes after the change.\n\t * @returns {Array.<Object>} An array containing one or more diff items.\n\t */\n\t_getAttributesDiff( range, oldAttributes, newAttributes ) {\n\t\t// Results holder.\n\t\tconst diffs = [];\n\n\t\t// Clone new attributes as we will be performing changes on this object.\n\t\tnewAttributes = new Map( newAttributes );\n\n\t\t// Look through old attributes.\n\t\tfor ( const [ key, oldValue ] of oldAttributes ) {\n\t\t\t// Check what is the new value of the attribute (or if it was removed).\n\t\t\tconst newValue = newAttributes.has( key ) ? newAttributes.get( key ) : null;\n\n\t\t\t// If values are different (or attribute was removed)...\n\t\t\tif ( newValue !== oldValue ) {\n\t\t\t\t// Add diff item.\n\t\t\t\tdiffs.push( {\n\t\t\t\t\ttype: 'attribute',\n\t\t\t\t\tposition: range.start,\n\t\t\t\t\trange: range.clone(),\n\t\t\t\t\tlength: 1,\n\t\t\t\t\tattributeKey: key,\n\t\t\t\t\tattributeOldValue: oldValue,\n\t\t\t\t\tattributeNewValue: newValue,\n\t\t\t\t\tchangeCount: this._changeCount++\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\t// Prevent returning two diff items for the same change.\n\t\t\tnewAttributes.delete( key );\n\t\t}\n\n\t\t// Look through new attributes that weren't handled above.\n\t\tfor ( const [ key, newValue ] of newAttributes ) {\n\t\t\t// Each of them is a new attribute. Add diff item.\n\t\t\tdiffs.push( {\n\t\t\t\ttype: 'attribute',\n\t\t\t\tposition: range.start,\n\t\t\t\trange: range.clone(),\n\t\t\t\tlength: 1,\n\t\t\t\tattributeKey: key,\n\t\t\t\tattributeOldValue: null,\n\t\t\t\tattributeNewValue: newValue,\n\t\t\t\tchangeCount: this._changeCount++\n\t\t\t} );\n\t\t}\n\n\t\treturn diffs;\n\t}\n\n\t/**\n\t * Checks whether given element or any of its parents is an element that is buffered as an inserted element.\n\t *\n\t * @private\n\t * @param {module:engine/model/element~Element} element Element to check.\n\t * @returns {Boolean}\n\t */\n\t_isInInsertedElement( element ) {\n\t\tconst parent = element.parent;\n\n\t\tif ( !parent ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst changes = this._changesInElement.get( parent );\n\t\tconst offset = element.startOffset;\n\n\t\tif ( changes ) {\n\t\t\tfor ( const change of changes ) {\n\t\t\t\tif ( change.type == 'insert' && offset >= change.offset && offset < change.offset + change.howMany ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this._isInInsertedElement( parent );\n\t}\n\n\t/**\n\t * Removes deeply all buffered changes that are registered in elements from range specified by `parent`, `offset`\n\t * and `howMany`.\n\t *\n\t * @private\n\t * @param {module:engine/model/element~Element} parent\n\t * @param {Number} offset\n\t * @param {Number} howMany\n\t */\n\t_removeAllNestedChanges( parent, offset, howMany ) {\n\t\tconst range = new Range( Position._createAt( parent, offset ), Position._createAt( parent, offset + howMany ) );\n\n\t\tfor ( const item of range.getItems( { shallow: true } ) ) {\n\t\t\tif ( item.is( 'element' ) ) {\n\t\t\t\tthis._elementSnapshots.delete( item );\n\t\t\t\tthis._changesInElement.delete( item );\n\n\t\t\t\tthis._removeAllNestedChanges( item, 0, item.maxOffset );\n\t\t\t}\n\t\t}\n\t}\n}\n\n// Returns an array that is a copy of passed child list with the exception that text nodes are split to one or more\n// objects, each representing one character and attributes set on that character.\nfunction _getChildrenSnapshot( children ) {\n\tconst snapshot = [];\n\n\tfor ( const child of children ) {\n\t\tif ( child.is( '$text' ) ) {\n\t\t\tfor ( let i = 0; i < child.data.length; i++ ) {\n\t\t\t\tsnapshot.push( {\n\t\t\t\t\tname: '$text',\n\t\t\t\t\tattributes: new Map( child.getAttributes() )\n\t\t\t\t} );\n\t\t\t}\n\t\t} else {\n\t\t\tsnapshot.push( {\n\t\t\t\tname: child.name,\n\t\t\t\tattributes: new Map( child.getAttributes() )\n\t\t\t} );\n\t\t}\n\t}\n\n\treturn snapshot;\n}\n\n// Generates array of actions for given changes set.\n// It simulates what `diff` function does.\n// Generated actions are:\n// - 'e' for 'equal' - when item at that position did not change,\n// - 'i' for 'insert' - when item at that position was inserted,\n// - 'r' for 'remove' - when item at that position was removed,\n// - 'a' for 'attribute' - when item at that position has it attributes changed.\n//\n// Example (assume that uppercase letters have bold attribute, compare with function code):\n//\n// children before:\tfooBAR\n// children after:\tfoxybAR\n//\n// changes: type: remove, offset: 1, howMany: 1\n//\t\t\ttype: insert, offset: 2, howMany: 2\n//\t\t\ttype: attribute, offset: 4, howMany: 1\n//\n// expected actions: equal (f), remove (o), equal (o), insert (x), insert (y), attribute (b), equal (A), equal (R)\n//\n// steps taken by th script:\n//\n// 1. change = \"type: remove, offset: 1, howMany: 1\"; offset = 0; oldChildrenHandled = 0\n//    1.1 between this change and the beginning is one not-changed node, fill with one equal action, one old child has been handled\n//    1.2 this change removes one node, add one remove action\n//    1.3 change last visited `offset` to 1\n//    1.4 since an old child has been removed, one more old child has been handled\n//    1.5 actions at this point are: equal, remove\n//\n// 2. change = \"type: insert, offset: 2, howMany: 2\"; offset = 1; oldChildrenHandled = 2\n//    2.1 between this change and previous change is one not-changed node, add equal action, another one old children has been handled\n//    2.2 this change inserts two nodes, add two insert actions\n//    2.3 change last visited offset to the end of the inserted range, that is 4\n//    2.4 actions at this point are: equal, remove, equal, insert, insert\n//\n// 3. change = \"type: attribute, offset: 4, howMany: 1\"; offset = 4, oldChildrenHandled = 3\n//    3.1 between this change and previous change are no not-changed nodes\n//    3.2 this change changes one node, add one attribute action\n//    3.3 change last visited `offset` to the end of change range, that is 5\n//    3.4 since an old child has been changed, one more old child has been handled\n//    3.5 actions at this point are: equal, remove, equal, insert, insert, attribute\n//\n// 4. after loop oldChildrenHandled = 4, oldChildrenLength = 6 (fooBAR is 6 characters)\n//    4.1 fill up with two equal actions\n//\n// The result actions are: equal, remove, equal, insert, insert, attribute, equal, equal.\nfunction _generateActionsFromChanges( oldChildrenLength, changes ) {\n\tconst actions = [];\n\n\tlet offset = 0;\n\tlet oldChildrenHandled = 0;\n\n\t// Go through all buffered changes.\n\tfor ( const change of changes ) {\n\t\t// First, fill \"holes\" between changes with \"equal\" actions.\n\t\tif ( change.offset > offset ) {\n\t\t\tfor ( let i = 0; i < change.offset - offset; i++ ) {\n\t\t\t\tactions.push( 'e' );\n\t\t\t}\n\n\t\t\toldChildrenHandled += change.offset - offset;\n\t\t}\n\n\t\t// Then, fill up actions accordingly to change type.\n\t\tif ( change.type == 'insert' ) {\n\t\t\tfor ( let i = 0; i < change.howMany; i++ ) {\n\t\t\t\tactions.push( 'i' );\n\t\t\t}\n\n\t\t\t// The last handled offset is after inserted range.\n\t\t\toffset = change.offset + change.howMany;\n\t\t} else if ( change.type == 'remove' ) {\n\t\t\tfor ( let i = 0; i < change.howMany; i++ ) {\n\t\t\t\tactions.push( 'r' );\n\t\t\t}\n\n\t\t\t// The last handled offset is at the position where the nodes were removed.\n\t\t\toffset = change.offset;\n\t\t\t// We removed `howMany` old nodes, update `oldChildrenHandled`.\n\t\t\toldChildrenHandled += change.howMany;\n\t\t} else {\n\t\t\tactions.push( ...'a'.repeat( change.howMany ).split( '' ) );\n\n\t\t\t// The last handled offset is at the position after the changed range.\n\t\t\toffset = change.offset + change.howMany;\n\t\t\t// We changed `howMany` old nodes, update `oldChildrenHandled`.\n\t\t\toldChildrenHandled += change.howMany;\n\t\t}\n\t}\n\n\t// Fill \"equal\" actions at the end of actions set. Use `oldChildrenHandled` to see how many children\n\t// has not been changed / removed at the end of their parent.\n\tif ( oldChildrenHandled < oldChildrenLength ) {\n\t\tfor ( let i = 0; i < oldChildrenLength - oldChildrenHandled - offset; i++ ) {\n\t\t\tactions.push( 'e' );\n\t\t}\n\t}\n\n\treturn actions;\n}\n\n// Filter callback for Array.filter that filters out change entries that are in graveyard.\nfunction _changesInGraveyardFilter( entry ) {\n\tconst posInGy = entry.position && entry.position.root.rootName == '$graveyard';\n\tconst rangeInGy = entry.range && entry.range.root.rootName == '$graveyard';\n\n\treturn !posInGy && !rangeInGy;\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/history\n */\n\n/**\n * `History` keeps the track of all the operations applied to the {@link module:engine/model/document~Document document}.\n */\nexport default class History {\n\t/**\n\t * Creates an empty History instance.\n\t */\n\tconstructor() {\n\t\t/**\n\t\t * Operations added to the history.\n\t\t *\n\t\t * @protected\n\t\t * @member {Array.<module:engine/model/operation/operation~Operation>} module:engine/model/history~History#_operations\n\t\t */\n\t\tthis._operations = [];\n\n\t\t/**\n\t\t * Holds an information which {@link module:engine/model/operation/operation~Operation operation} undoes which\n\t\t * {@link module:engine/model/operation/operation~Operation operation}.\n\t\t *\n\t\t * Keys of the map are \"undoing operations\", that is operations that undone some other operations. For each key, the\n\t\t * value is an operation that has been undone by the \"undoing operation\".\n\t\t *\n\t\t * @private\n\t\t * @member {Map} module:engine/model/history~History#_undoPairs\n\t\t */\n\t\tthis._undoPairs = new Map();\n\n\t\t/**\n\t\t * Holds all undone operations.\n\t\t *\n\t\t * @private\n\t\t * @member {Set.<module:engine/model/operation/operation~Operation>} module:engine/model/history~History#_undoneOperations\n\t\t */\n\t\tthis._undoneOperations = new Set();\n\t}\n\n\t/**\n\t * Adds an operation to the history.\n\t *\n\t * @param {module:engine/model/operation/operation~Operation} operation Operation to add.\n\t */\n\taddOperation( operation ) {\n\t\tif ( this._operations.includes( operation ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._operations.push( operation );\n\t}\n\n\t/**\n\t * Returns operations added to the history.\n\t *\n\t * @param {Number} [from=Number.NEGATIVE_INFINITY] Base version from which operations should be returned (inclusive).\n\t * Defaults to `Number.NEGATIVE_INFINITY`, which means that operations from the first one will be returned.\n\t * @param {Number} [to=Number.POSITIVE_INFINITY] Base version up to which operations should be returned (exclusive).\n\t * Defaults to `Number.POSITIVE_INFINITY` which means that operations up to the last one will be returned.\n\t * @returns {Array.<module:engine/model/operation/operation~Operation>} Operations added to the history.\n\t */\n\tgetOperations( from = Number.NEGATIVE_INFINITY, to = Number.POSITIVE_INFINITY ) {\n\t\tconst operations = [];\n\n\t\tfor ( const operation of this._operations ) {\n\t\t\tif ( operation.baseVersion >= from && operation.baseVersion < to ) {\n\t\t\t\toperations.push( operation );\n\t\t\t}\n\t\t}\n\n\t\treturn operations;\n\t}\n\n\t/**\n\t * Returns operation from the history that bases on given `baseVersion`.\n\t *\n\t * @param {Number} baseVersion Base version of the operation to get.\n\t * @returns {module:engine/model/operation/operation~Operation|undefined} Operation with given base version or `undefined` if\n\t * there is no such operation in history.\n\t */\n\tgetOperation( baseVersion ) {\n\t\tfor ( const operation of this._operations ) {\n\t\t\tif ( operation.baseVersion == baseVersion ) {\n\t\t\t\treturn operation;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Marks in history that one operation is an operation that is undoing the other operation. By marking operation this way,\n\t * history is keeping more context information about operations, which helps in operational transformation.\n\t *\n\t * @param {module:engine/model/operation/operation~Operation} undoneOperation Operation which is undone by `undoingOperation`.\n\t * @param {module:engine/model/operation/operation~Operation} undoingOperation Operation which undoes `undoneOperation`.\n\t */\n\tsetOperationAsUndone( undoneOperation, undoingOperation ) {\n\t\tthis._undoPairs.set( undoingOperation, undoneOperation );\n\t\tthis._undoneOperations.add( undoneOperation );\n\t}\n\n\t/**\n\t * Checks whether given `operation` is undoing any other operation.\n\t *\n\t * @param {module:engine/model/operation/operation~Operation} operation Operation to check.\n\t * @returns {Boolean} `true` if given `operation` is undoing any other operation, `false` otherwise.\n\t */\n\tisUndoingOperation( operation ) {\n\t\treturn this._undoPairs.has( operation );\n\t}\n\n\t/**\n\t * Checks whether given `operation` has been undone by any other operation.\n\t *\n\t * @param {module:engine/model/operation/operation~Operation} operation Operation to check.\n\t * @returns {Boolean} `true` if given `operation` has been undone any other operation, `false` otherwise.\n\t */\n\tisUndoneOperation( operation ) {\n\t\treturn this._undoneOperations.has( operation );\n\t}\n\n\t/**\n\t * For given `undoingOperation`, returns the operation which has been undone by it.\n\t *\n\t * @param {module:engine/model/operation/operation~Operation} undoingOperation\n\t * @returns {module:engine/model/operation/operation~Operation|undefined} Operation that has been undone by given\n\t * `undoingOperation` or `undefined` if given `undoingOperation` is not undoing any other operation.\n\t */\n\tgetUndoneOperation( undoingOperation ) {\n\t\treturn this._undoPairs.get( undoingOperation );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * Set of utils to handle unicode characters.\n *\n * @module utils/unicode\n */\n\n/**\n * Checks whether given `character` is a combining mark.\n *\n * @param {String} character Character to check.\n * @returns {Boolean}\n */\nexport function isCombiningMark( character ) {\n\t// eslint-disable-next-line no-misleading-character-class\n\treturn !!character && character.length == 1 && /[\\u0300-\\u036f\\u1ab0-\\u1aff\\u1dc0-\\u1dff\\u20d0-\\u20ff\\ufe20-\\ufe2f]/.test( character );\n}\n\n/**\n * Checks whether given `character` is a high half of surrogate pair.\n *\n * Using UTF-16 terminology, a surrogate pair denotes UTF-16 character using two UTF-8 characters. The surrogate pair\n * consist of high surrogate pair character followed by low surrogate pair character.\n *\n * @param {String} character Character to check.\n * @returns {Boolean}\n */\nexport function isHighSurrogateHalf( character ) {\n\treturn !!character && character.length == 1 && /[\\ud800-\\udbff]/.test( character );\n}\n\n/**\n * Checks whether given `character` is a low half of surrogate pair.\n *\n * Using UTF-16 terminology, a surrogate pair denotes UTF-16 character using two UTF-8 characters. The surrogate pair\n * consist of high surrogate pair character followed by low surrogate pair character.\n *\n * @param {String} character Character to check.\n * @returns {Boolean}\n */\nexport function isLowSurrogateHalf( character ) {\n\treturn !!character && character.length == 1 && /[\\udc00-\\udfff]/.test( character );\n}\n\n/**\n * Checks whether given offset in a string is inside a surrogate pair (between two surrogate halves).\n *\n * @param {String} string String to check.\n * @param {Number} offset Offset to check.\n * @returns {Boolean}\n */\nexport function isInsideSurrogatePair( string, offset ) {\n\treturn isHighSurrogateHalf( string.charAt( offset - 1 ) ) && isLowSurrogateHalf( string.charAt( offset ) );\n}\n\n/**\n * Checks whether given offset in a string is between base character and combining mark or between two combining marks.\n *\n * @param {String} string String to check.\n * @param {Number} offset Offset to check.\n * @returns {Boolean}\n */\nexport function isInsideCombinedSymbol( string, offset ) {\n\treturn isCombiningMark( string.charAt( offset ) );\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/document\n */\n\nimport Differ from './differ';\nimport RootElement from './rootelement';\nimport History from './history';\nimport DocumentSelection from './documentselection';\nimport Collection from '@ckeditor/ckeditor5-utils/src/collection';\nimport EmitterMixin from '@ckeditor/ckeditor5-utils/src/emittermixin';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\nimport { isInsideSurrogatePair, isInsideCombinedSymbol } from '@ckeditor/ckeditor5-utils/src/unicode';\nimport { clone } from 'lodash-es';\n\n// @if CK_DEBUG_ENGINE // const { logDocument } = require( '../dev-utils/utils' );\n\nconst graveyardName = '$graveyard';\n\n/**\n * Data model's document. It contains the model's structure, its selection and the history of changes.\n *\n * Read more about working with the model in\n * {@glink framework/guides/architecture/editing-engine#model introduction to the the editing engine's architecture}.\n *\n * Usually, the document contains just one {@link module:engine/model/document~Document#roots root element}, so\n * you can retrieve it by just calling {@link module:engine/model/document~Document#getRoot} without specifying its name:\n *\n *\t\tmodel.document.getRoot(); // -> returns the main root\n *\n * However, the document may contain multiple roots – e.g. when the editor has multiple editable areas\n * (e.g. a title and a body of a message).\n *\n * @mixes module:utils/emittermixin~EmitterMixin\n */\nexport default class Document {\n\t/**\n\t * Creates an empty document instance with no {@link #roots} (other than\n\t * the {@link #graveyard graveyard root}).\n\t */\n\tconstructor( model ) {\n\t\t/**\n\t\t * The {@link module:engine/model/model~Model model} that the document is a part of.\n\t\t *\n\t\t * @readonly\n\t\t * @type {module:engine/model/model~Model}\n\t\t */\n\t\tthis.model = model;\n\n\t\t/**\n\t\t * The document version. It starts from `0` and every operation increases the version number. It is used to ensure that\n\t\t * operations are applied on a proper document version.\n\t\t *\n\t\t * If the {@link module:engine/model/operation/operation~Operation#baseVersion base version} does not match the document version,\n\t\t * a {@link module:utils/ckeditorerror~CKEditorError model-document-applyoperation-wrong-version} error is thrown.\n\t\t *\n\t\t * @type {Number}\n\t\t */\n\t\tthis.version = 0;\n\n\t\t/**\n\t\t * The document's history.\n\t\t *\n\t\t * @readonly\n\t\t * @type {module:engine/model/history~History}\n\t\t */\n\t\tthis.history = new History( this );\n\n\t\t/**\n\t\t * The selection in this document.\n\t\t *\n\t\t * @readonly\n\t\t * @type {module:engine/model/documentselection~DocumentSelection}\n\t\t */\n\t\tthis.selection = new DocumentSelection( this );\n\n\t\t/**\n\t\t * A list of roots that are owned and managed by this document. Use {@link #createRoot} and\n\t\t * {@link #getRoot} to manipulate it.\n\t\t *\n\t\t * @readonly\n\t\t * @type {module:utils/collection~Collection}\n\t\t */\n\t\tthis.roots = new Collection( { idProperty: 'rootName' } );\n\n\t\t/**\n\t\t * The model differ object. Its role is to buffer changes done on the model document and then calculate a diff of those changes.\n\t\t *\n\t\t * @readonly\n\t\t * @type {module:engine/model/differ~Differ}\n\t\t */\n\t\tthis.differ = new Differ( model.markers );\n\n\t\t/**\n\t\t * Post-fixer callbacks registered to the model document.\n\t\t *\n\t\t * @private\n\t\t * @type {Set.<Function>}\n\t\t */\n\t\tthis._postFixers = new Set();\n\n\t\t/**\n\t\t * A boolean indicates whether the selection has changed until\n\t\t *\n\t\t * @private\n\t\t * @type {Boolean}\n\t\t */\n\t\tthis._hasSelectionChangedFromTheLastChangeBlock = false;\n\n\t\t// Graveyard tree root. Document always have a graveyard root, which stores removed nodes.\n\t\tthis.createRoot( '$root', graveyardName );\n\n\t\t// First, if the operation is a document operation check if it's base version is correct.\n\t\tthis.listenTo( model, 'applyOperation', ( evt, args ) => {\n\t\t\tconst operation = args[ 0 ];\n\n\t\t\tif ( operation.isDocumentOperation && operation.baseVersion !== this.version ) {\n\t\t\t\t/**\n\t\t\t\t * Only operations with matching versions can be applied.\n\t\t\t\t *\n\t\t\t\t * @error model-document-applyoperation-wrong-version\n\t\t\t\t * @param {module:engine/model/operation/operation~Operation} operation\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError( 'model-document-applyoperation-wrong-version', this, { operation } );\n\t\t\t}\n\t\t}, { priority: 'highest' } );\n\n\t\t// Then, still before an operation is applied on model, buffer the change in differ.\n\t\tthis.listenTo( model, 'applyOperation', ( evt, args ) => {\n\t\t\tconst operation = args[ 0 ];\n\n\t\t\tif ( operation.isDocumentOperation ) {\n\t\t\t\tthis.differ.bufferOperation( operation );\n\t\t\t}\n\t\t}, { priority: 'high' } );\n\n\t\t// After the operation is applied, bump document's version and add the operation to the history.\n\t\tthis.listenTo( model, 'applyOperation', ( evt, args ) => {\n\t\t\tconst operation = args[ 0 ];\n\n\t\t\tif ( operation.isDocumentOperation ) {\n\t\t\t\tthis.version++;\n\t\t\t\tthis.history.addOperation( operation );\n\t\t\t}\n\t\t}, { priority: 'low' } );\n\n\t\t// Listen to selection changes. If selection changed, mark it.\n\t\tthis.listenTo( this.selection, 'change', () => {\n\t\t\tthis._hasSelectionChangedFromTheLastChangeBlock = true;\n\t\t} );\n\n\t\t// Buffer marker changes.\n\t\t// This is not covered in buffering operations because markers may change outside of them (when they\n\t\t// are modified using `model.markers` collection, not through `MarkerOperation`).\n\t\tthis.listenTo( model.markers, 'update', ( evt, marker, oldRange, newRange ) => {\n\t\t\t// Whenever marker is updated, buffer that change.\n\t\t\tthis.differ.bufferMarkerChange( marker.name, oldRange, newRange, marker.affectsData );\n\n\t\t\tif ( oldRange === null ) {\n\t\t\t\t// If this is a new marker, add a listener that will buffer change whenever marker changes.\n\t\t\t\tmarker.on( 'change', ( evt, oldRange ) => {\n\t\t\t\t\tthis.differ.bufferMarkerChange( marker.name, oldRange, marker.getRange(), marker.affectsData );\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * The graveyard tree root. A document always has a graveyard root that stores removed nodes.\n\t *\n\t * @readonly\n\t * @member {module:engine/model/rootelement~RootElement}\n\t */\n\tget graveyard() {\n\t\treturn this.getRoot( graveyardName );\n\t}\n\n\t/**\n\t * Creates a new root.\n\t *\n\t * @param {String} [elementName='$root'] The element name. Defaults to `'$root'` which also has some basic schema defined\n\t * (`$block`s are allowed inside the `$root`). Make sure to define a proper schema if you use a different name.\n\t * @param {String} [rootName='main'] A unique root name.\n\t * @returns {module:engine/model/rootelement~RootElement} The created root.\n\t */\n\tcreateRoot( elementName = '$root', rootName = 'main' ) {\n\t\tif ( this.roots.get( rootName ) ) {\n\t\t\t/**\n\t\t\t * A root with the specified name already exists.\n\t\t\t *\n\t\t\t * @error model-document-createroot-name-exists\n\t\t\t * @param {module:engine/model/document~Document} doc\n\t\t\t * @param {String} name\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'model-document-createroot-name-exists', this, { name: rootName } );\n\t\t}\n\n\t\tconst root = new RootElement( this, elementName, rootName );\n\t\tthis.roots.add( root );\n\n\t\treturn root;\n\t}\n\n\t/**\n\t * Removes all event listeners set by the document instance.\n\t */\n\tdestroy() {\n\t\tthis.selection.destroy();\n\t\tthis.stopListening();\n\t}\n\n\t/**\n\t * Returns a root by its name.\n\t *\n\t * @param {String} [name='main'] A unique root name.\n\t * @returns {module:engine/model/rootelement~RootElement|null} The root registered under a given name or `null` when\n\t * there is no root with the given name.\n\t */\n\tgetRoot( name = 'main' ) {\n\t\treturn this.roots.get( name );\n\t}\n\n\t/**\n\t * Returns an array with names of all roots (without the {@link #graveyard}) added to the document.\n\t *\n\t * @returns {Array.<String>} Roots names.\n\t */\n\tgetRootNames() {\n\t\treturn Array.from( this.roots, root => root.rootName ).filter( name => name != graveyardName );\n\t}\n\n\t/**\n\t * Used to register a post-fixer callback. A post-fixer mechanism guarantees that the features\n\t * will operate on a correct model state.\n\t *\n\t * An execution of a feature may lead to an incorrect document tree state. The callbacks are used to fix the document tree after\n\t * it has changed. Post-fixers are fired just after all changes from the outermost change block were applied but\n\t * before the {@link module:engine/model/document~Document#event:change change event} is fired. If a post-fixer callback made\n\t * a change, it should return `true`. When this happens, all post-fixers are fired again to check if something else should\n\t * not be fixed in the new document tree state.\n\t *\n\t * As a parameter, a post-fixer callback receives a {@link module:engine/model/writer~Writer writer} instance connected with the\n\t * executed changes block. Thanks to that, all changes done by the callback will be added to the same\n\t * {@link module:engine/model/batch~Batch batch} (and undo step) as the original changes. This makes post-fixer changes transparent\n\t * for the user.\n\t *\n\t * An example of a post-fixer is a callback that checks if all the data were removed from the editor. If so, the\n\t * callback should add an empty paragraph so that the editor is never empty:\n\t *\n\t *\t\tdocument.registerPostFixer( writer => {\n\t *\t\t\tconst changes = document.differ.getChanges();\n\t *\n\t *\t\t\t// Check if the changes lead to an empty root in the editor.\n\t *\t\t\tfor ( const entry of changes ) {\n\t *\t\t\t\tif ( entry.type == 'remove' && entry.position.root.isEmpty ) {\n\t *\t\t\t\t\twriter.insertElement( 'paragraph', entry.position.root, 0 );\n\t *\n\t *\t\t\t\t\t// It is fine to return early, even if multiple roots would need to be fixed.\n\t *\t\t\t\t\t// All post-fixers will be fired again, so if there are more empty roots, those will be fixed, too.\n\t *\t\t\t\t\treturn true;\n\t *\t\t\t\t}\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t * @param {Function} postFixer\n\t */\n\tregisterPostFixer( postFixer ) {\n\t\tthis._postFixers.add( postFixer );\n\t}\n\n\t/**\n\t * A custom `toJSON()` method to solve child-parent circular dependencies.\n\t *\n\t * @returns {Object} A clone of this object with the document property changed to a string.\n\t */\n\ttoJSON() {\n\t\tconst json = clone( this );\n\n\t\t// Due to circular references we need to remove parent reference.\n\t\tjson.selection = '[engine.model.DocumentSelection]';\n\t\tjson.model = '[engine.model.Model]';\n\n\t\treturn json;\n\t}\n\n\t/**\n\t * Check if there were any changes done on document, and if so, call post-fixers,\n\t * fire `change` event for features and conversion and then reset the differ.\n\t * Fire `change:data` event when at least one operation or buffered marker changes the data.\n\t *\n\t * @protected\n\t * @fires change\n\t * @fires change:data\n\t * @param {module:engine/model/writer~Writer} writer The writer on which post-fixers will be called.\n\t */\n\t_handleChangeBlock( writer ) {\n\t\tif ( this._hasDocumentChangedFromTheLastChangeBlock() ) {\n\t\t\tthis._callPostFixers( writer );\n\n\t\t\t// Refresh selection attributes according to the final position in the model after the change.\n\t\t\tthis.selection.refresh();\n\n\t\t\tif ( this.differ.hasDataChanges() ) {\n\t\t\t\tthis.fire( 'change:data', writer.batch );\n\t\t\t} else {\n\t\t\t\tthis.fire( 'change', writer.batch );\n\t\t\t}\n\n\t\t\t// Theoretically, it is not necessary to refresh selection after change event because\n\t\t\t// post-fixers are the last who should change the model, but just in case...\n\t\t\tthis.selection.refresh();\n\n\t\t\tthis.differ.reset();\n\t\t}\n\n\t\tthis._hasSelectionChangedFromTheLastChangeBlock = false;\n\t}\n\n\t/**\n\t * Returns whether there is a buffered change or if the selection has changed from the last\n\t * {@link module:engine/model/model~Model#enqueueChange `enqueueChange()` block}\n\t * or {@link module:engine/model/model~Model#change `change()` block}.\n\t *\n\t * @protected\n\t * @returns {Boolean} Returns `true` if document has changed from the last `change()` or `enqueueChange()` block.\n\t */\n\t_hasDocumentChangedFromTheLastChangeBlock() {\n\t\treturn !this.differ.isEmpty || this._hasSelectionChangedFromTheLastChangeBlock;\n\t}\n\n\t/**\n\t * Returns the default root for this document which is either the first root that was added to the document using\n\t * {@link #createRoot} or the {@link #graveyard graveyard root} if no other roots were created.\n\t *\n\t * @protected\n\t * @returns {module:engine/model/rootelement~RootElement} The default root for this document.\n\t */\n\t_getDefaultRoot() {\n\t\tfor ( const root of this.roots ) {\n\t\t\tif ( root !== this.graveyard ) {\n\t\t\t\treturn root;\n\t\t\t}\n\t\t}\n\n\t\treturn this.graveyard;\n\t}\n\n\t/**\n\t * Returns the default range for this selection. The default range is a collapsed range that starts and ends\n\t * at the beginning of this selection's document {@link #_getDefaultRoot default root}.\n\t *\n\t * @protected\n\t * @returns {module:engine/model/range~Range}\n\t */\n\t_getDefaultRange() {\n\t\tconst defaultRoot = this._getDefaultRoot();\n\t\tconst model = this.model;\n\t\tconst schema = model.schema;\n\n\t\t// Find the first position where the selection can be put.\n\t\tconst position = model.createPositionFromPath( defaultRoot, [ 0 ] );\n\t\tconst nearestRange = schema.getNearestSelectionRange( position );\n\n\t\t// If valid selection range is not found - return range collapsed at the beginning of the root.\n\t\treturn nearestRange || model.createRange( position );\n\t}\n\n\t/**\n\t * Checks whether a given {@link module:engine/model/range~Range range} is a valid range for\n\t * the {@link #selection document's selection}.\n\t *\n\t * @private\n\t * @param {module:engine/model/range~Range} range A range to check.\n\t * @returns {Boolean} `true` if `range` is valid, `false` otherwise.\n\t */\n\t_validateSelectionRange( range ) {\n\t\treturn validateTextNodePosition( range.start ) && validateTextNodePosition( range.end );\n\t}\n\n\t/**\n\t * Performs post-fixer loops. Executes post-fixer callbacks as long as none of them has done any changes to the model.\n\t *\n\t * @private\n\t * @param {module:engine/model/writer~Writer} writer The writer on which post-fixer callbacks will be called.\n\t */\n\t_callPostFixers( writer ) {\n\t\tlet wasFixed = false;\n\n\t\tdo {\n\t\t\tfor ( const callback of this._postFixers ) {\n\t\t\t\t// Ensure selection attributes are up to date before each post-fixer.\n\t\t\t\t// https://github.com/ckeditor/ckeditor5-engine/issues/1673.\n\t\t\t\t//\n\t\t\t\t// It might be good to refresh the selection after each operation but at the moment it leads\n\t\t\t\t// to losing attributes for composition or and spell checking\n\t\t\t\t// https://github.com/ckeditor/ckeditor5-typing/issues/188\n\t\t\t\tthis.selection.refresh();\n\n\t\t\t\twasFixed = callback( writer );\n\n\t\t\t\tif ( wasFixed ) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t} while ( wasFixed );\n\t}\n\n\t/**\n\t * Fired after each {@link module:engine/model/model~Model#enqueueChange `enqueueChange()` block} or the outermost\n\t * {@link module:engine/model/model~Model#change `change()` block} was executed and the document was changed\n\t * during that block's execution.\n\t *\n\t * The changes which this event will cover include:\n\t *\n\t * * document structure changes,\n\t * * selection changes,\n\t * * marker changes.\n\t *\n\t * If you want to be notified about all these changes, then simply listen to this event like this:\n\t *\n\t *\t\tmodel.document.on( 'change', () => {\n\t *\t\t\tconsole.log( 'The document has changed!' );\n\t *\t\t} );\n\t *\n\t * If, however, you only want to be notified about the data changes, then use the\n\t * {@link module:engine/model/document~Document#event:change:data change:data} event,\n\t * which is fired for document structure changes and marker changes (which affects the data).\n\t *\n\t *\t\tmodel.document.on( 'change:data', () => {\n\t *\t\t\tconsole.log( 'The data has changed!' );\n\t *\t\t} );\n\t *\n\t * @event change\n\t * @param {module:engine/model/batch~Batch} batch The batch that was used in the executed changes block.\n\t */\n\n\t/**\n\t * It is a narrower version of the {@link #event:change} event. It is fired for changes which\n\t * affect the editor data. This is:\n\t *\n\t * * document structure changes,\n\t * * marker changes (which affects the data).\n\t *\n\t * If you want to be notified about the data changes, then listen to this event:\n\t *\n\t *\t\tmodel.document.on( 'change:data', () => {\n\t *\t\t\tconsole.log( 'The data has changed!' );\n\t *\t\t} );\n\t *\n\t * If you would like to listen to all document changes, then check out the\n\t * {@link module:engine/model/document~Document#event:change change} event.\n\t *\n\t * @event change:data\n\t * @param {module:engine/model/batch~Batch} batch The batch that was used in the executed changes block.\n\t */\n\n\t// @if CK_DEBUG_ENGINE // log( version = null ) {\n\t// @if CK_DEBUG_ENGINE // \tversion = version === null ? this.version : version;\n\t// @if CK_DEBUG_ENGINE // \tlogDocument( this, version );\n\t// @if CK_DEBUG_ENGINE // }\n}\n\nmix( Document, EmitterMixin );\n\n// Checks whether given range boundary position is valid for document selection, meaning that is not between\n// unicode surrogate pairs or base character and combining marks.\nfunction validateTextNodePosition( rangeBoundary ) {\n\tconst textNode = rangeBoundary.textNode;\n\n\tif ( textNode ) {\n\t\tconst data = textNode.data;\n\t\tconst offset = rangeBoundary.offset - textNode.startOffset;\n\n\t\treturn !isInsideSurrogatePair( data, offset ) && !isInsideCombinedSymbol( data, offset );\n\t}\n\n\treturn true;\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/markercollection\n */\n\nimport LiveRange from './liverange';\nimport EmitterMixin from '@ckeditor/ckeditor5-utils/src/emittermixin';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\n\n/**\n * The collection of all {@link module:engine/model/markercollection~Marker markers} attached to the document.\n * It lets you {@link module:engine/model/markercollection~MarkerCollection#get get} markers or track them using\n * {@link module:engine/model/markercollection~MarkerCollection#event:update} event.\n *\n * To create, change or remove makers use {@link module:engine/model/writer~Writer model writers'} methods:\n * {@link module:engine/model/writer~Writer#addMarker} or {@link module:engine/model/writer~Writer#removeMarker}. Since\n * the writer is the only proper way to change the data model it is not possible to change markers directly using this\n * collection. All markers created by the writer will be automatically added to this collection.\n *\n * By default there is one marker collection available as {@link module:engine/model/model~Model#markers model property}.\n *\n * @see module:engine/model/markercollection~Marker\n */\nexport default class MarkerCollection {\n\t/**\n\t * Creates a markers collection.\n\t */\n\tconstructor() {\n\t\t/**\n\t\t * Stores {@link ~Marker markers} added to the collection.\n\t\t *\n\t\t * @private\n\t\t * @member {Map} #_markers\n\t\t */\n\t\tthis._markers = new Map();\n\t}\n\n\t/**\n\t * Iterable interface.\n\t *\n\t * Iterates over all {@link ~Marker markers} added to the collection.\n\t *\n\t * @returns {Iterable}\n\t */\n\t[ Symbol.iterator ]() {\n\t\treturn this._markers.values();\n\t}\n\n\t/**\n\t * Checks if marker with given `markerName` is in the collection.\n\t *\n\t * @param {String} markerName Marker name.\n\t * @returns {Boolean} `true` if marker with given `markerName` is in the collection, `false` otherwise.\n\t */\n\thas( markerName ) {\n\t\treturn this._markers.has( markerName );\n\t}\n\n\t/**\n\t * Returns {@link ~Marker marker} with given `markerName`.\n\t *\n\t * @param {String} markerName Name of marker to get.\n\t * @returns {module:engine/model/markercollection~Marker|null} Marker with given name or `null` if such marker was\n\t * not added to the collection.\n\t */\n\tget( markerName ) {\n\t\treturn this._markers.get( markerName ) || null;\n\t}\n\n\t/**\n\t * Creates and adds a {@link ~Marker marker} to the `MarkerCollection` with given name on given\n\t * {@link module:engine/model/range~Range range}.\n\t *\n\t * If `MarkerCollection` already had a marker with given name (or {@link ~Marker marker} was passed), the marker in\n\t * collection is updated and {@link module:engine/model/markercollection~MarkerCollection#event:update} event is fired\n\t * but only if there was a change (marker range or {@link module:engine/model/markercollection~Marker#managedUsingOperations}\n\t * flag has changed.\n\t *\n\t * @protected\n\t * @fires module:engine/model/markercollection~MarkerCollection#event:update\n\t * @param {String|module:engine/model/markercollection~Marker} markerOrName Name of marker to set or marker instance to update.\n\t * @param {module:engine/model/range~Range} range Marker range.\n\t * @param {Boolean} [managedUsingOperations=false] Specifies whether the marker is managed using operations.\n\t * @param {Boolean} [affectsData=false] Specifies whether the marker affects the data produced by the data pipeline\n\t * (is persisted in the editor's data).\n\t * @returns {module:engine/model/markercollection~Marker} `Marker` instance which was added or updated.\n\t */\n\t_set( markerOrName, range, managedUsingOperations = false, affectsData = false ) {\n\t\tconst markerName = markerOrName instanceof Marker ? markerOrName.name : markerOrName;\n\n\t\tif ( markerName.includes( ',' ) ) {\n\t\t\t/**\n\t\t\t * Marker name cannot contain the \",\" character.\n\t\t\t *\n\t\t\t * @error markercollection-incorrect-marker-name\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'markercollection-incorrect-marker-name', this );\n\t\t}\n\n\t\tconst oldMarker = this._markers.get( markerName );\n\n\t\tif ( oldMarker ) {\n\t\t\tconst oldRange = oldMarker.getRange();\n\t\t\tlet hasChanged = false;\n\n\t\t\tif ( !oldRange.isEqual( range ) ) {\n\t\t\t\toldMarker._attachLiveRange( LiveRange.fromRange( range ) );\n\t\t\t\thasChanged = true;\n\t\t\t}\n\n\t\t\tif ( managedUsingOperations != oldMarker.managedUsingOperations ) {\n\t\t\t\toldMarker._managedUsingOperations = managedUsingOperations;\n\t\t\t\thasChanged = true;\n\t\t\t}\n\n\t\t\tif ( typeof affectsData === 'boolean' && affectsData != oldMarker.affectsData ) {\n\t\t\t\toldMarker._affectsData = affectsData;\n\t\t\t\thasChanged = true;\n\t\t\t}\n\n\t\t\tif ( hasChanged ) {\n\t\t\t\tthis.fire( 'update:' + markerName, oldMarker, oldRange, range );\n\t\t\t}\n\n\t\t\treturn oldMarker;\n\t\t}\n\n\t\tconst liveRange = LiveRange.fromRange( range );\n\t\tconst marker = new Marker( markerName, liveRange, managedUsingOperations, affectsData );\n\n\t\tthis._markers.set( markerName, marker );\n\t\tthis.fire( 'update:' + markerName, marker, null, range );\n\n\t\treturn marker;\n\t}\n\n\t/**\n\t * Removes given {@link ~Marker marker} or a marker with given name from the `MarkerCollection`.\n\t *\n\t * @protected\n\t * @fires module:engine/model/markercollection~MarkerCollection#event:update\n\t * @param {String} markerOrName Marker or name of a marker to remove.\n\t * @returns {Boolean} `true` if marker was found and removed, `false` otherwise.\n\t */\n\t_remove( markerOrName ) {\n\t\tconst markerName = markerOrName instanceof Marker ? markerOrName.name : markerOrName;\n\t\tconst oldMarker = this._markers.get( markerName );\n\n\t\tif ( oldMarker ) {\n\t\t\tthis._markers.delete( markerName );\n\t\t\tthis.fire( 'update:' + markerName, oldMarker, oldMarker.getRange(), null );\n\n\t\t\tthis._destroyMarker( oldMarker );\n\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * Fires an {@link module:engine/model/markercollection~MarkerCollection#event:update} event for the given {@link ~Marker marker}\n\t * but does not change the marker. Useful to force {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher downcast\n\t * conversion} for the marker.\n\t *\n\t * @protected\n\t * @fires module:engine/model/markercollection~MarkerCollection#event:update\n\t * @param {String} markerOrName Marker or name of a marker to refresh.\n\t */\n\t_refresh( markerOrName ) {\n\t\tconst markerName = markerOrName instanceof Marker ? markerOrName.name : markerOrName;\n\t\tconst marker = this._markers.get( markerName );\n\n\t\tif ( !marker ) {\n\t\t\t/**\n\t\t\t * Marker with provided name does not exists.\n\t\t\t *\n\t\t\t * @error markercollection-refresh-marker-not-exists\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'markercollection-refresh-marker-not-exists', this );\n\t\t}\n\n\t\tconst range = marker.getRange();\n\n\t\tthis.fire( 'update:' + markerName, marker, range, range, marker.managedUsingOperations, marker.affectsData );\n\t}\n\n\t/**\n\t * Returns iterator that iterates over all markers, which ranges contain given {@link module:engine/model/position~Position position}.\n\t *\n\t * @param {module:engine/model/position~Position} position\n\t * @returns {Iterable.<module:engine/model/markercollection~Marker>}\n\t */\n\t* getMarkersAtPosition( position ) {\n\t\tfor ( const marker of this ) {\n\t\t\tif ( marker.getRange().containsPosition( position ) ) {\n\t\t\t\tyield marker;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Returns iterator that iterates over all markers, which intersects with given {@link module:engine/model/range~Range range}.\n\t *\n\t * @param {module:engine/model/range~Range} range\n\t * @returns {Iterable.<module:engine/model/markercollection~Marker>}\n\t */\n\t* getMarkersIntersectingRange( range ) {\n\t\tfor ( const marker of this ) {\n\t\t\tif ( marker.getRange().getIntersection( range ) !== null ) {\n\t\t\t\tyield marker;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Destroys marker collection and all markers inside it.\n\t */\n\tdestroy() {\n\t\tfor ( const marker of this._markers.values() ) {\n\t\t\tthis._destroyMarker( marker );\n\t\t}\n\n\t\tthis._markers = null;\n\n\t\tthis.stopListening();\n\t}\n\n\t/**\n\t * Iterates over all markers that starts with given `prefix`.\n\t *\n\t *\t\tconst markerFooA = markersCollection.set( 'foo:a', rangeFooA );\n\t *\t\tconst markerFooB = markersCollection.set( 'foo:b', rangeFooB );\n\t *\t\tconst markerBarA = markersCollection.set( 'bar:a', rangeBarA );\n\t *\t\tconst markerFooBarA = markersCollection.set( 'foobar:a', rangeFooBarA );\n\t *\t\tArray.from( markersCollection.getMarkersGroup( 'foo' ) ); // [ markerFooA, markerFooB ]\n\t *\t\tArray.from( markersCollection.getMarkersGroup( 'a' ) ); // []\n\t *\n\t * @param prefix\n\t * @returns {Iterable.<module:engine/model/markercollection~Marker>}\n\t */\n\t* getMarkersGroup( prefix ) {\n\t\tfor ( const marker of this._markers.values() ) {\n\t\t\tif ( marker.name.startsWith( prefix + ':' ) ) {\n\t\t\t\tyield marker;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Destroys the marker.\n\t *\n\t * @private\n\t * @param {module:engine/model/markercollection~Marker} marker Marker to destroy.\n\t */\n\t_destroyMarker( marker ) {\n\t\tmarker.stopListening();\n\t\tmarker._detachLiveRange();\n\t}\n\n\t/**\n\t * Fired whenever marker is added, updated or removed from `MarkerCollection`.\n\t *\n\t * @event update\n\t * @param {module:engine/model/markercollection~Marker} marker Updated Marker.\n\t * @param {module:engine/model/range~Range|null} oldRange Marker range before the update. When is not defined it\n\t * means that marker is just added.\n\t * @param {module:engine/model/range~Range|null} newRange Marker range after update. When is not defined it\n\t * means that marker is just removed.\n\t */\n}\n\nmix( MarkerCollection, EmitterMixin );\n\n/**\n * `Marker` is a continuous parts of model (like a range), is named and represent some kind of information about marked\n * part of model document. In contrary to {@link module:engine/model/node~Node nodes}, which are building blocks of\n * model document tree, markers are not stored directly in document tree but in\n * {@link module:engine/model/model~Model#markers model markers' collection}. Still, they are document data, by giving\n * additional meaning to the part of a model document between marker start and marker end.\n *\n * In this sense, markers are similar to adding and converting attributes on nodes. The difference is that attribute is\n * connected with a given node (e.g. a character is bold no matter if it gets moved or content around it changes).\n * Markers on the other hand are continuous ranges and are characterized by their start and end position. This means that\n * any character in the marker is marked by the marker. For example, if a character is moved outside of marker it stops being\n * \"special\" and the marker is shrunk. Similarly, when a character is moved into the marker from other place in document\n * model, it starts being \"special\" and the marker is enlarged.\n *\n * Another upside of markers is that finding marked part of document is fast and easy. Using attributes to mark some nodes\n * and then trying to find that part of document would require traversing whole document tree. Marker gives instant access\n * to the range which it is marking at the moment.\n *\n * Markers are built from a name and a range.\n *\n * Range of the marker is updated automatically when document changes, using\n * {@link module:engine/model/liverange~LiveRange live range} mechanism.\n *\n * Name is used to group and identify markers. Names have to be unique, but markers can be grouped by\n * using common prefixes, separated with `:`, for example: `user:john` or `search:3`. That's useful in term of creating\n * namespaces for custom elements (e.g. comments, highlights). You can use this prefixes in\n * {@link module:engine/model/markercollection~MarkerCollection#event:update} listeners to listen on changes in a group of markers.\n * For instance: `model.markers.on( 'update:user', callback );` will be called whenever any `user:*` markers changes.\n *\n * There are two types of markers.\n *\n * 1. Markers managed directly, without using operations. They are added directly by {@link module:engine/model/writer~Writer}\n * to the {@link module:engine/model/markercollection~MarkerCollection} without any additional mechanism. They can be used\n * as bookmarks or visual markers. They are great for showing results of the find, or select link when the focus is in the input.\n *\n * 1. Markers managed using operations. These markers are also stored in {@link module:engine/model/markercollection~MarkerCollection}\n * but changes in these markers is managed the same way all other changes in the model structure - using operations.\n * Therefore, they are handled in the undo stack and synchronized between clients if the collaboration plugin is enabled.\n * This type of markers is useful for solutions like spell checking or comments.\n *\n * Both type of them should be added / updated by {@link module:engine/model/writer~Writer#addMarker}\n * and removed by {@link module:engine/model/writer~Writer#removeMarker} methods.\n *\n *\t\tmodel.change( ( writer ) => {\n * \t\t\tconst marker = writer.addMarker( name, { range, usingOperation: true } );\n *\n * \t\t\t// ...\n *\n * \t\t\twriter.removeMarker( marker );\n *\t\t} );\n *\n * See {@link module:engine/model/writer~Writer} to find more examples.\n *\n * Since markers need to track change in the document, for efficiency reasons, it is best to create and keep as little\n * markers as possible and remove them as soon as they are not needed anymore.\n *\n * Markers can be downcasted and upcasted.\n *\n * Markers downcast happens on {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:addMarker} and\n * {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:removeMarker} events.\n * Use {@link module:engine/conversion/downcasthelpers downcast converters} or attach a custom converter to mentioned events.\n * For {@link module:engine/controller/datacontroller~DataController data pipeline}, marker should be downcasted to an element.\n * Then, it can be upcasted back to a marker. Again, use {@link module:engine/conversion/upcasthelpers upcast converters} or\n * attach a custom converter to {@link module:engine/conversion/upcastdispatcher~UpcastDispatcher#event:element}.\n *\n * `Marker` instances are created and destroyed only by {@link ~MarkerCollection MarkerCollection}.\n */\nclass Marker {\n\t/**\n\t * Creates a marker instance.\n\t *\n\t * @param {String} name Marker name.\n\t * @param {module:engine/model/liverange~LiveRange} liveRange Range marked by the marker.\n\t * @param {Boolean} managedUsingOperations Specifies whether the marker is managed using operations.\n\t * @param {Boolean} affectsData Specifies whether the marker affects the data produced by the data pipeline\n\t * (is persisted in the editor's data).\n\t */\n\tconstructor( name, liveRange, managedUsingOperations, affectsData ) {\n\t\t/**\n\t\t * Marker's name.\n\t\t *\n\t\t * @readonly\n\t\t * @type {String}\n\t\t */\n\t\tthis.name = name;\n\n\t\t/**\n\t\t * Range marked by the marker.\n\t\t *\n\t\t * @protected\n\t\t * @member {module:engine/model/liverange~LiveRange}\n\t\t */\n\t\tthis._liveRange = this._attachLiveRange( liveRange );\n\n\t\t/**\n\t\t * Flag indicates if the marker is managed using operations or not.\n\t\t *\n\t\t * @private\n\t\t * @member {Boolean}\n\t\t */\n\t\tthis._managedUsingOperations = managedUsingOperations;\n\n\t\t/**\n\t\t * Specifies whether the marker affects the data produced by the data pipeline\n\t\t * (is persisted in the editor's data).\n\t\t *\n\t\t * @private\n\t\t * @member {Boolean}\n\t\t */\n\t\tthis._affectsData = affectsData;\n\t}\n\n\t/**\n\t * A value indicating if the marker is managed using operations.\n\t * See {@link ~Marker marker class description} to learn more about marker types.\n\t * See {@link module:engine/model/writer~Writer#addMarker}.\n\t *\n\t * @returns {Boolean}\n\t */\n\tget managedUsingOperations() {\n\t\tif ( !this._liveRange ) {\n\t\t\tthrow new CKEditorError( 'marker-destroyed', this );\n\t\t}\n\n\t\treturn this._managedUsingOperations;\n\t}\n\n\t/**\n\t * A value indicating if the marker changes the data.\n\t *\n\t * @returns {Boolean}\n\t */\n\tget affectsData() {\n\t\tif ( !this._liveRange ) {\n\t\t\tthrow new CKEditorError( 'marker-destroyed', this );\n\t\t}\n\n\t\treturn this._affectsData;\n\t}\n\n\t/**\n\t * Returns current marker start position.\n\t *\n\t * @returns {module:engine/model/position~Position}\n\t */\n\tgetStart() {\n\t\tif ( !this._liveRange ) {\n\t\t\tthrow new CKEditorError( 'marker-destroyed', this );\n\t\t}\n\n\t\treturn this._liveRange.start.clone();\n\t}\n\n\t/**\n\t * Returns current marker end position.\n\t *\n\t * @returns {module:engine/model/position~Position}\n\t */\n\tgetEnd() {\n\t\tif ( !this._liveRange ) {\n\t\t\tthrow new CKEditorError( 'marker-destroyed', this );\n\t\t}\n\n\t\treturn this._liveRange.end.clone();\n\t}\n\n\t/**\n\t * Returns a range that represents the current state of the marker.\n\t *\n\t * Keep in mind that returned value is a {@link module:engine/model/range~Range Range}, not a\n\t * {@link module:engine/model/liverange~LiveRange LiveRange}. This means that it is up-to-date and relevant only\n\t * until next model document change. Do not store values returned by this method. Instead, store {@link ~Marker#name}\n\t * and get `Marker` instance from {@link module:engine/model/markercollection~MarkerCollection MarkerCollection} every\n\t * time there is a need to read marker properties. This will guarantee that the marker has not been removed and\n\t * that it's data is up-to-date.\n\t *\n\t * @returns {module:engine/model/range~Range}\n\t */\n\tgetRange() {\n\t\tif ( !this._liveRange ) {\n\t\t\tthrow new CKEditorError( 'marker-destroyed', this );\n\t\t}\n\n\t\treturn this._liveRange.toRange();\n\t}\n\n\t/**\n\t * Checks whether this object is of the given.\n\t *\n\t *\t\tmarker.is( 'marker' ); // -> true\n\t *\t\tmarker.is( 'model:marker' ); // -> true\n\t *\n\t *\t\tmarker.is( 'view:element' ); // -> false\n\t *\t\tmarker.is( 'documentSelection' ); // -> false\n\t *\n\t * {@link module:engine/model/node~Node#is Check the entire list of model objects} which implement the `is()` method.\n\t *\n\t * @param {String} type\n\t * @returns {Boolean}\n\t */\n\tis( type ) {\n\t\treturn type === 'marker' || type === 'model:marker';\n\t}\n\n\t/**\n\t * Binds new live range to the marker and detach the old one if is attached.\n\t *\n\t * @protected\n\t * @param {module:engine/model/liverange~LiveRange} liveRange Live range to attach\n\t * @returns {module:engine/model/liverange~LiveRange} Attached live range.\n\t */\n\t_attachLiveRange( liveRange ) {\n\t\tif ( this._liveRange ) {\n\t\t\tthis._detachLiveRange();\n\t\t}\n\n\t\t// Delegating does not work with namespaces. Alternatively, we could delegate all events (using `*`).\n\t\tliveRange.delegate( 'change:range' ).to( this );\n\t\tliveRange.delegate( 'change:content' ).to( this );\n\n\t\tthis._liveRange = liveRange;\n\n\t\treturn liveRange;\n\t}\n\n\t/**\n\t * Unbinds and destroys currently attached live range.\n\t *\n\t * @protected\n\t */\n\t_detachLiveRange() {\n\t\tthis._liveRange.stopDelegating( 'change:range', this );\n\t\tthis._liveRange.stopDelegating( 'change:content', this );\n\t\tthis._liveRange.detach();\n\t\tthis._liveRange = null;\n\t}\n\n\t/**\n\t * Fired whenever {@link ~Marker#_liveRange marker range} is changed due to changes on {@link module:engine/model/document~Document}.\n\t * This is a delegated {@link module:engine/model/liverange~LiveRange#event:change:range LiveRange change:range event}.\n\t *\n\t * When marker is removed from {@link module:engine/model/markercollection~MarkerCollection MarkerCollection},\n\t * all event listeners listening to it should be removed. It is best to do it on\n\t * {@link module:engine/model/markercollection~MarkerCollection#event:update MarkerCollection update event}.\n\t *\n\t * @see module:engine/model/liverange~LiveRange#event:change:range\n\t * @event change:range\n\t * @param {module:engine/model/range~Range} oldRange\n\t * @param {Object} data\n\t */\n\n\t/**\n\t * Fired whenever change on {@link module:engine/model/document~Document} is done inside {@link ~Marker#_liveRange marker range}.\n\t * This is a delegated {@link module:engine/model/liverange~LiveRange#event:change:content LiveRange change:content event}.\n\t *\n\t * When marker is removed from {@link module:engine/model/markercollection~MarkerCollection MarkerCollection},\n\t * all event listeners listening to it should be removed. It is best to do it on\n\t * {@link module:engine/model/markercollection~MarkerCollection#event:update MarkerCollection update event}.\n\t *\n\t * @see module:engine/model/liverange~LiveRange#event:change:content\n\t * @event change:content\n\t * @param {module:engine/model/range~Range} oldRange\n\t * @param {Object} data\n\t */\n}\n\nmix( Marker, EmitterMixin );\n\n/**\n * Cannot use a {@link module:engine/model/markercollection~MarkerCollection#destroy destroyed marker} instance.\n *\n * @error marker-destroyed\n */\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/operation/nooperation\n */\n\nimport Operation from './operation';\n\n/**\n * Operation which is doing nothing (\"empty operation\", \"do-nothing operation\", \"noop\"). This is an operation,\n * which when executed does not change the tree model. It still has some parameters defined for transformation purposes.\n *\n * In most cases this operation is a result of transforming operations. When transformation returns\n * {@link module:engine/model/operation/nooperation~NoOperation} it means that changes done by the transformed operation\n * have already been applied.\n *\n * @extends module:engine/model/operation/operation~Operation\n */\nexport default class NoOperation extends Operation {\n\tget type() {\n\t\treturn 'noop';\n\t}\n\n\t/**\n\t * Creates and returns an operation that has the same parameters as this operation.\n\t *\n\t * @returns {module:engine/model/operation/nooperation~NoOperation} Clone of this operation.\n\t */\n\tclone() {\n\t\treturn new NoOperation( this.baseVersion );\n\t}\n\n\t/**\n\t * See {@link module:engine/model/operation/operation~Operation#getReversed `Operation#getReversed()`}.\n\t *\n\t * @returns {module:engine/model/operation/nooperation~NoOperation}\n\t */\n\tgetReversed() {\n\t\treturn new NoOperation( this.baseVersion + 1 );\n\t}\n\n\t_execute() {\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get className() {\n\t\treturn 'NoOperation';\n\t}\n\n\t// @if CK_DEBUG_ENGINE // toString() {\n\t// @if CK_DEBUG_ENGINE // \treturn `NoOperation( ${ this.baseVersion } )`;\n\t// @if CK_DEBUG_ENGINE // }\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/operation/operationfactory\n */\n\nimport AttributeOperation from '../operation/attributeoperation';\nimport InsertOperation from '../operation/insertoperation';\nimport MarkerOperation from '../operation/markeroperation';\nimport MoveOperation from '../operation/moveoperation';\nimport NoOperation from '../operation/nooperation';\nimport Operation from '../operation/operation';\nimport RenameOperation from '../operation/renameoperation';\nimport RootAttributeOperation from '../operation/rootattributeoperation';\nimport SplitOperation from '../operation/splitoperation';\nimport MergeOperation from '../operation/mergeoperation';\n\nconst operations = {};\noperations[ AttributeOperation.className ] = AttributeOperation;\noperations[ InsertOperation.className ] = InsertOperation;\noperations[ MarkerOperation.className ] = MarkerOperation;\noperations[ MoveOperation.className ] = MoveOperation;\noperations[ NoOperation.className ] = NoOperation;\noperations[ Operation.className ] = Operation;\noperations[ RenameOperation.className ] = RenameOperation;\noperations[ RootAttributeOperation.className ] = RootAttributeOperation;\noperations[ SplitOperation.className ] = SplitOperation;\noperations[ MergeOperation.className ] = MergeOperation;\n\n/**\n * A factory class for creating operations.\n *\n * @abstract\n */\nexport default class OperationFactory {\n\t/**\n\t * Creates an operation instance from a JSON object (parsed JSON string).\n\t *\n\t * @param {Object} json Deserialized JSON object.\n\t * @param {module:engine/model/document~Document} document Document on which this operation will be applied.\n\t * @returns {module:engine/model/operation/operation~Operation}\n\t */\n\tstatic fromJSON( json, document ) {\n\t\treturn operations[ json.__className ].fromJSON( json, document );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/liveposition\n */\n\nimport Position from './position';\nimport EmitterMixin from '@ckeditor/ckeditor5-utils/src/emittermixin';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n\n/**\n * `LivePosition` is a type of {@link module:engine/model/position~Position Position}\n * that updates itself as {@link module:engine/model/document~Document document}\n * is changed through operations. It may be used as a bookmark.\n *\n * **Note:** Contrary to {@link module:engine/model/position~Position}, `LivePosition` works only in roots that are\n * {@link module:engine/model/rootelement~RootElement}.\n * If {@link module:engine/model/documentfragment~DocumentFragment} is passed, error will be thrown.\n *\n * **Note:** Be very careful when dealing with `LivePosition`. Each `LivePosition` instance bind events that might\n * have to be unbound.\n * Use {@link module:engine/model/liveposition~LivePosition#detach} whenever you don't need `LivePosition` anymore.\n *\n * @extends module:engine/model/position~Position\n */\nexport default class LivePosition extends Position {\n\t/**\n\t * Creates a live position.\n\t *\n\t * @see module:engine/model/position~Position\n\t * @param {module:engine/model/rootelement~RootElement} root\n\t * @param {Array.<Number>} path\n\t * @param {module:engine/model/position~PositionStickiness} [stickiness]\n\t */\n\tconstructor( root, path, stickiness = 'toNone' ) {\n\t\tsuper( root, path, stickiness );\n\n\t\tif ( !this.root.is( 'rootElement' ) ) {\n\t\t\t/**\n\t\t\t * LivePosition's root has to be an instance of RootElement.\n\t\t\t *\n\t\t\t * @error model-liveposition-root-not-rootelement\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'model-liveposition-root-not-rootelement', root );\n\t\t}\n\n\t\tbindWithDocument.call( this );\n\t}\n\n\t/**\n\t * Unbinds all events previously bound by `LivePosition`. Use it whenever you don't need `LivePosition` instance\n\t * anymore (i.e. when leaving scope in which it was declared or before re-assigning variable that was\n\t * referring to it).\n\t */\n\tdetach() {\n\t\tthis.stopListening();\n\t}\n\n\t/**\n\t * Checks whether this object is of the given.\n\t *\n\t *\t\tlivePosition.is( 'position' ); // -> true\n\t *\t\tlivePosition.is( 'model:position' ); // -> true\n\t *\t\tlivePosition.is( 'liveposition' ); // -> true\n\t *\t\tlivePosition.is( 'model:livePosition' ); // -> true\n\t *\n\t *\t\tlivePosition.is( 'view:position' ); // -> false\n\t *\t\tlivePosition.is( 'documentSelection' ); // -> false\n\t *\n\t * {@link module:engine/model/node~Node#is Check the entire list of model objects} which implement the `is()` method.\n\t *\n\t * @param {String} type\n\t * @returns {Boolean}\n\t */\n\tis( type ) {\n\t\treturn type === 'livePosition' || type === 'model:livePosition' ||\n\t\t\t// From super.is(). This is highly utilised method and cannot call super. See ckeditor/ckeditor5#6529.\n\t\t\ttype == 'position' || type === 'model:position';\n\t}\n\n\t/**\n\t * Creates a {@link module:engine/model/position~Position position instance}, which is equal to this live position.\n\t *\n\t * @returns {module:engine/model/position~Position}\n\t */\n\ttoPosition() {\n\t\treturn new Position( this.root, this.path.slice(), this.stickiness );\n\t}\n\n\t/**\n\t * Creates a `LivePosition` instance that is equal to position.\n\t *\n\t * @param {module:engine/model/position~Position} position\n\t * @param {module:engine/model/position~PositionStickiness} [stickiness]\n\t * @returns {module:engine/model/position~Position}\n\t */\n\tstatic fromPosition( position, stickiness ) {\n\t\treturn new this( position.root, position.path.slice(), stickiness ? stickiness : position.stickiness );\n\t}\n\n\t/**\n\t * @static\n\t * @protected\n\t * @method module:engine/model/liveposition~LivePosition._createAfter\n\t * @see module:engine/model/position~Position._createAfter\n\t * @param {module:engine/model/node~Node} node\n\t * @param {module:engine/model/position~PositionStickiness} [stickiness='toNone']\n\t * @returns {module:engine/model/liveposition~LivePosition}\n\t */\n\n\t/**\n\t * @static\n\t * @protected\n\t * @method module:engine/model/liveposition~LivePosition._createBefore\n\t * @see module:engine/model/position~Position._createBefore\n\t * @param {module:engine/model/node~Node} node\n\t * @param {module:engine/model/position~PositionStickiness} [stickiness='toNone']\n\t * @returns {module:engine/model/liveposition~LivePosition}\n\t */\n\n\t/**\n\t * @static\n\t * @protected\n\t * @method module:engine/model/liveposition~LivePosition._createAt\n\t * @see module:engine/model/position~Position._createAt\n\t * @param {module:engine/model/item~Item|module:engine/model/position~Position} itemOrPosition\n\t * @param {Number|'end'|'before'|'after'} [offset]\n\t * @param {module:engine/model/position~PositionStickiness} [stickiness='toNone']\n\t * @returns {module:engine/model/liveposition~LivePosition}\n\t */\n\n\t/**\n\t * Fired when `LivePosition` instance is changed due to changes on {@link module:engine/model/document~Document}.\n\t *\n\t * @event module:engine/model/liveposition~LivePosition#change\n\t * @param {module:engine/model/position~Position} oldPosition Position equal to this live position before it got changed.\n\t */\n}\n\n// Binds this `LivePosition` to the {@link module:engine/model/document~Document document} that owns\n// this position's {@link module:engine/model/position~Position#root root}.\n//\n// @private\nfunction bindWithDocument() {\n\tthis.listenTo(\n\t\tthis.root.document.model,\n\t\t'applyOperation',\n\t\t( event, args ) => {\n\t\t\tconst operation = args[ 0 ];\n\n\t\t\tif ( !operation.isDocumentOperation ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttransform.call( this, operation );\n\t\t},\n\t\t{ priority: 'low' }\n\t);\n}\n\n// Updates this position accordingly to the updates applied to the model. Bases on change events.\n//\n// @private\n// @param {module:engine/model/operation/operation~Operation} operation Executed operation.\nfunction transform( operation ) {\n\tconst result = this.getTransformedByOperation( operation );\n\n\tif ( !this.isEqual( result ) ) {\n\t\tconst oldPosition = this.toPosition();\n\n\t\tthis.path = result.path;\n\t\tthis.root = result.root;\n\n\t\tthis.fire( 'change', oldPosition );\n\t}\n}\n\nmix( LivePosition, EmitterMixin );\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/utils/insertcontent\n */\n\nimport Position from '../position';\nimport LivePosition from '../liveposition';\nimport Element from '../element';\nimport Range from '../range';\nimport DocumentSelection from '../documentselection';\nimport Selection from '../selection';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n\n/**\n * Inserts content into the editor (specified selection) as one would expect the paste functionality to work.\n *\n * It takes care of removing the selected content, splitting elements (if needed), inserting elements and merging elements appropriately.\n *\n * Some examples:\n *\n * \t\t<p>x^</p> + <p>y</p> => <p>x</p><p>y</p> => <p>xy[]</p>\n * \t\t<p>x^y</p> + <p>z</p> => <p>x</p>^<p>y</p> + <p>z</p> => <p>x</p><p>z</p><p>y</p> => <p>xz[]y</p>\n * \t\t<p>x^y</p> + <img /> => <p>x</p>^<p>y</p> + <img /> => <p>x</p><img /><p>y</p>\n * \t\t<p>x</p><p>^</p><p>z</p> + <p>y</p> => <p>x</p><p>y[]</p><p>z</p> (no merging)\n * \t\t<p>x</p>[<img />]<p>z</p> + <p>y</p> => <p>x</p>^<p>z</p> + <p>y</p> => <p>x</p><p>y[]</p><p>z</p>\n *\n * If an instance of {@link module:engine/model/selection~Selection} is passed as `selectable` it will be modified\n * to the insertion selection (equal to a range to be selected after insertion).\n *\n * If `selectable` is not passed, the content will be inserted using the current selection of the model document.\n *\n * **Note:** Use {@link module:engine/model/model~Model#insertContent} instead of this function.\n * This function is only exposed to be reusable in algorithms which change the {@link module:engine/model/model~Model#insertContent}\n * method's behavior.\n *\n * @param {module:engine/model/model~Model} model The model in context of which the insertion\n * should be performed.\n * @param {module:engine/model/documentfragment~DocumentFragment|module:engine/model/item~Item} content The content to insert.\n * @param {module:engine/model/selection~Selectable} [selectable=model.document.selection]\n * Selection into which the content should be inserted.\n * @param {Number|'before'|'end'|'after'|'on'|'in'} [placeOrOffset] Sets place or offset of the selection.\n * @returns {module:engine/model/range~Range} Range which contains all the performed changes. This is a range that, if removed,\n * would return the model to the state before the insertion. If no changes were preformed by `insertContent`, returns a range collapsed\n * at the insertion position.\n */\nexport default function insertContent( model, content, selectable, placeOrOffset ) {\n\treturn model.change( writer => {\n\t\tlet selection;\n\n\t\tif ( !selectable ) {\n\t\t\tselection = model.document.selection;\n\t\t} else if ( selectable instanceof Selection || selectable instanceof DocumentSelection ) {\n\t\t\tselection = selectable;\n\t\t} else {\n\t\t\tselection = writer.createSelection( selectable, placeOrOffset );\n\t\t}\n\n\t\tif ( !selection.isCollapsed ) {\n\t\t\tmodel.deleteContent( selection, { doNotAutoparagraph: true } );\n\t\t}\n\n\t\tconst insertion = new Insertion( model, writer, selection.anchor );\n\n\t\tlet nodesToInsert;\n\n\t\tif ( content.is( 'documentFragment' ) ) {\n\t\t\tnodesToInsert = content.getChildren();\n\t\t} else {\n\t\t\tnodesToInsert = [ content ];\n\t\t}\n\n\t\tinsertion.handleNodes( nodesToInsert );\n\n\t\tconst newRange = insertion.getSelectionRange();\n\n\t\t/* istanbul ignore else */\n\t\tif ( newRange ) {\n\t\t\tif ( selection instanceof DocumentSelection ) {\n\t\t\t\twriter.setSelection( newRange );\n\t\t\t} else {\n\t\t\t\tselection.setTo( newRange );\n\t\t\t}\n\t\t} else {\n\t\t\t// We are not testing else because it's a safe check for unpredictable edge cases:\n\t\t\t// an insertion without proper range to select.\n\t\t\t//\n\t\t\t// @if CK_DEBUG // console.warn( 'Cannot determine a proper selection range after insertion.' );\n\t\t}\n\n\t\tconst affectedRange = insertion.getAffectedRange() || model.createRange( selection.anchor );\n\n\t\tinsertion.destroy();\n\n\t\treturn affectedRange;\n\t} );\n}\n\n/**\n * Utility class for performing content insertion.\n *\n * @private\n */\nclass Insertion {\n\tconstructor( model, writer, position ) {\n\t\t/**\n\t\t * The model in context of which the insertion should be performed.\n\t\t *\n\t\t * @member {module:engine/model~Model} #model\n\t\t */\n\t\tthis.model = model;\n\n\t\t/**\n\t\t * Batch to which operations will be added.\n\t\t *\n\t\t * @member {module:engine/controller/writer~Batch} #writer\n\t\t */\n\t\tthis.writer = writer;\n\n\t\t/**\n\t\t * The position at which (or near which) the next node will be inserted.\n\t\t *\n\t\t * @member {module:engine/model/position~Position} #position\n\t\t */\n\t\tthis.position = position;\n\n\t\t/**\n\t\t * Elements with which the inserted elements can be merged.\n\t\t *\n\t\t *\t\t<p>x^</p><p>y</p> + <p>z</p> (can merge to <p>x</p>)\n\t\t *\t\t<p>x</p><p>^y</p> + <p>z</p> (can merge to <p>y</p>)\n\t\t *\t\t<p>x^y</p> + <p>z</p> (can merge to <p>xy</p> which will be split during the action,\n\t\t *\t\t\t\t\t\t\t\tso both its pieces will be added to this set)\n\t\t *\n\t\t *\n\t\t * @member {Set} #canMergeWith\n\t\t */\n\t\tthis.canMergeWith = new Set( [ this.position.parent ] );\n\n\t\t/**\n\t\t * Schema of the model.\n\t\t *\n\t\t * @member {module:engine/model/schema~Schema} #schema\n\t\t */\n\t\tthis.schema = model.schema;\n\n\t\t/**\n\t\t * The temporary DocumentFragment used for grouping multiple nodes for single insert operation.\n\t\t *\n\t\t * @private\n\t\t * @type {module:engine/model/documentfragment~DocumentFragment}\n\t\t */\n\t\tthis._documentFragment = writer.createDocumentFragment();\n\n\t\t/**\n\t\t * The current position in the temporary DocumentFragment.\n\t\t *\n\t\t * @private\n\t\t * @type {module:engine/model/position~Position}\n\t\t */\n\t\tthis._documentFragmentPosition = writer.createPositionAt( this._documentFragment, 0 );\n\n\t\t/**\n\t\t * The reference to the first inserted node.\n\t\t *\n\t\t * @private\n\t\t * @type {module:engine/model/node~Node}\n\t\t */\n\t\tthis._firstNode = null;\n\n\t\t/**\n\t\t * The reference to the last inserted node.\n\t\t *\n\t\t * @private\n\t\t * @type {module:engine/model/node~Node}\n\t\t */\n\t\tthis._lastNode = null;\n\n\t\t/**\n\t\t * The array of nodes that should be cleaned of not allowed attributes.\n\t\t *\n\t\t * @private\n\t\t * @type {Array.<module:engine/model/node~Node>}\n\t\t */\n\t\tthis._filterAttributesOf = [];\n\n\t\t/**\n\t\t * Beginning of the affected range. See {@link module:engine/model/utils/insertcontent~Insertion#getAffectedRange}.\n\t\t *\n\t\t * @private\n\t\t * @member {module:engine/model/liveposition~LivePosition|null} #_affectedStart\n\t\t */\n\t\tthis._affectedStart = null;\n\n\t\t/**\n\t\t * End of the affected range. See {@link module:engine/model/utils/insertcontent~Insertion#getAffectedRange}.\n\t\t *\n\t\t * @private\n\t\t * @member {module:engine/model/liveposition~LivePosition|null} #_affectedEnd\n\t\t */\n\t\tthis._affectedEnd = null;\n\t}\n\n\t/**\n\t * Handles insertion of a set of nodes.\n\t *\n\t * @param {Iterable.<module:engine/model/node~Node>} nodes Nodes to insert.\n\t */\n\thandleNodes( nodes ) {\n\t\tfor ( const node of Array.from( nodes ) ) {\n\t\t\tthis._handleNode( node );\n\t\t}\n\n\t\t// Insert nodes collected in temporary DocumentFragment.\n\t\tthis._insertPartialFragment();\n\n\t\t// After the content was inserted we may try to merge it with its next sibling if the selection was in it initially.\n\t\t// Merging with the previous sibling was performed just after inserting the first node to the document.\n\t\tthis._mergeOnRight();\n\n\t\t// TMP this will become a post-fixer.\n\t\tthis.schema.removeDisallowedAttributes( this._filterAttributesOf, this.writer );\n\t\tthis._filterAttributesOf = [];\n\t}\n\n\t/**\n\t * Returns range to be selected after insertion.\n\t * Returns `null` if there is no valid range to select after insertion.\n\t *\n\t * @returns {module:engine/model/range~Range|null}\n\t */\n\tgetSelectionRange() {\n\t\tif ( this.nodeToSelect ) {\n\t\t\treturn Range._createOn( this.nodeToSelect );\n\t\t}\n\n\t\treturn this.model.schema.getNearestSelectionRange( this.position );\n\t}\n\n\t/**\n\t * Returns a range which contains all the performed changes. This is a range that, if removed, would return the model to the state\n\t * before the insertion. Returns `null` if no changes were done.\n\t *\n\t * @returns {module:engine/model/range~Range|null}\n\t */\n\tgetAffectedRange() {\n\t\tif ( !this._affectedStart ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn new Range( this._affectedStart, this._affectedEnd );\n\t}\n\n\t/**\n\t * Destroys `Insertion` instance.\n\t */\n\tdestroy() {\n\t\tif ( this._affectedStart ) {\n\t\t\tthis._affectedStart.detach();\n\t\t}\n\n\t\tif ( this._affectedEnd ) {\n\t\t\tthis._affectedEnd.detach();\n\t\t}\n\t}\n\n\t/**\n\t * Handles insertion of a single node.\n\t *\n\t * @private\n\t * @param {module:engine/model/node~Node} node\n\t */\n\t_handleNode( node ) {\n\t\t// Let's handle object in a special way.\n\t\t// * They should never be merged with other elements.\n\t\t// * If they are not allowed in any of the selection ancestors, they could be either autoparagraphed or totally removed.\n\t\tif ( this.schema.isObject( node ) ) {\n\t\t\tthis._handleObject( node );\n\n\t\t\treturn;\n\t\t}\n\n\t\t// Try to find a place for the given node.\n\t\t// Split the position.parent's branch up to a point where the node can be inserted.\n\t\t// If it isn't allowed in the whole branch, then of course don't split anything.\n\t\tconst isAllowed = this._checkAndSplitToAllowedPosition( node );\n\n\t\tif ( !isAllowed ) {\n\t\t\tthis._handleDisallowedNode( node );\n\n\t\t\treturn;\n\t\t}\n\n\t\t// Add node to the current temporary DocumentFragment.\n\t\tthis._appendToFragment( node );\n\n\t\t// Store the first and last nodes for easy access for merging with sibling nodes.\n\t\tif ( !this._firstNode ) {\n\t\t\tthis._firstNode = node;\n\t\t}\n\n\t\tthis._lastNode = node;\n\t}\n\n\t/**\n\t * Inserts the temporary DocumentFragment into the model.\n\t *\n\t * @private\n\t */\n\t_insertPartialFragment() {\n\t\tif ( this._documentFragment.isEmpty ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst livePosition = LivePosition.fromPosition( this.position, 'toNext' );\n\n\t\tthis._setAffectedBoundaries( this.position );\n\n\t\t// If the very first node of the whole insertion process is inserted, insert it separately for OT reasons (undo).\n\t\t// Note: there can be multiple calls to `_insertPartialFragment()` during one insertion process.\n\t\t// Note: only the very first node can be merged so we have to do separate operation only for it.\n\t\tif ( this._documentFragment.getChild( 0 ) == this._firstNode ) {\n\t\t\tthis.writer.insert( this._firstNode, this.position );\n\n\t\t\t// We must merge the first node just after inserting it to avoid problems with OT.\n\t\t\t// (See: https://github.com/ckeditor/ckeditor5/pull/8773#issuecomment-760945652).\n\t\t\tthis._mergeOnLeft();\n\n\t\t\tthis.position = livePosition.toPosition();\n\t\t}\n\n\t\t// Insert the remaining nodes from document fragment.\n\t\tif ( !this._documentFragment.isEmpty ) {\n\t\t\tthis.writer.insert( this._documentFragment, this.position );\n\t\t}\n\n\t\tthis._documentFragmentPosition = this.writer.createPositionAt( this._documentFragment, 0 );\n\n\t\tthis.position = livePosition.toPosition();\n\t\tlivePosition.detach();\n\t}\n\n\t/**\n\t * @private\n\t * @param {module:engine/model/element~Element} node The object element.\n\t */\n\t_handleObject( node ) {\n\t\t// Try finding it a place in the tree.\n\t\tif ( this._checkAndSplitToAllowedPosition( node ) ) {\n\t\t\tthis._appendToFragment( node );\n\t\t}\n\t\t// Try autoparagraphing.\n\t\telse {\n\t\t\tthis._tryAutoparagraphing( node );\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t * @param {module:engine/model/node~Node} node The disallowed node which needs to be handled.\n\t */\n\t_handleDisallowedNode( node ) {\n\t\t// If the node is an element, try inserting its children (strip the parent).\n\t\tif ( node.is( 'element' ) ) {\n\t\t\tthis.handleNodes( node.getChildren() );\n\t\t}\n\t\t// If text is not allowed, try autoparagraphing it.\n\t\telse {\n\t\t\tthis._tryAutoparagraphing( node );\n\t\t}\n\t}\n\n\t/**\n\t * Append a node to the temporary DocumentFragment.\n\t *\n\t * @private\n\t * @param {module:engine/model/node~Node} node The node to insert.\n\t */\n\t_appendToFragment( node ) {\n\t\t/* istanbul ignore if */\n\t\tif ( !this.schema.checkChild( this.position, node ) ) {\n\t\t\t// Algorithm's correctness check. We should never end up here but it's good to know that we did.\n\t\t\t// Note that it would often be a silent issue if we insert node in a place where it's not allowed.\n\n\t\t\t/**\n\t\t\t * Given node cannot be inserted on the given position.\n\t\t\t *\n\t\t\t * @error insertcontent-wrong-position\n\t\t\t * @param {module:engine/model/node~Node} node Node to insert.\n\t\t\t * @param {module:engine/model/position~Position} position Position to insert the node at.\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'insertcontent-wrong-position',\n\t\t\t\tthis,\n\t\t\t\t{ node, position: this.position }\n\t\t\t);\n\t\t}\n\n\t\tthis.writer.insert( node, this._documentFragmentPosition );\n\t\tthis._documentFragmentPosition = this._documentFragmentPosition.getShiftedBy( node.offsetSize );\n\n\t\t// The last inserted object should be selected because we can't put a collapsed selection after it.\n\t\tif ( this.schema.isObject( node ) && !this.schema.checkChild( this.position, '$text' ) ) {\n\t\t\tthis.nodeToSelect = node;\n\t\t} else {\n\t\t\tthis.nodeToSelect = null;\n\t\t}\n\n\t\tthis._filterAttributesOf.push( node );\n\t}\n\n\t/**\n\t * Sets `_affectedStart` and `_affectedEnd` to the given `position`. Should be used before a change is done during insertion process to\n\t * mark the affected range.\n\t *\n\t * This method is used before inserting a node or splitting a parent node. `_affectedStart` and `_affectedEnd` are also changed\n\t * during merging, but the logic there is more complicated so it is left out of this function.\n\t *\n\t * @private\n\t * @param {module:engine/model/position~Position} position\n\t */\n\t_setAffectedBoundaries( position ) {\n\t\t// Set affected boundaries stickiness so that those position will \"expand\" when something is inserted in between them:\n\t\t// <paragraph>Foo][bar</paragraph> -> <paragraph>Foo]xx[bar</paragraph>\n\t\t// This is why it cannot be a range but two separate positions.\n\t\tif ( !this._affectedStart ) {\n\t\t\tthis._affectedStart = LivePosition.fromPosition( position, 'toPrevious' );\n\t\t}\n\n\t\t// If `_affectedEnd` is before the new boundary position, expand `_affectedEnd`. This can happen if first inserted node was\n\t\t// inserted into the parent but the next node is moved-out of that parent:\n\t\t// (1) <paragraph>Foo][</paragraph> -> <paragraph>Foo]xx[</paragraph>\n\t\t// (2) <paragraph>Foo]xx[</paragraph> -> <paragraph>Foo]xx</paragraph><widget></widget>[\n\t\tif ( !this._affectedEnd || this._affectedEnd.isBefore( position ) ) {\n\t\t\tif ( this._affectedEnd ) {\n\t\t\t\tthis._affectedEnd.detach();\n\t\t\t}\n\n\t\t\tthis._affectedEnd = LivePosition.fromPosition( position, 'toNext' );\n\t\t}\n\t}\n\n\t/**\n\t * Merges the previous sibling of the first node if it should be merged.\n\t *\n\t * After the content was inserted we may try to merge it with its siblings.\n\t * This should happen only if the selection was in those elements initially.\n\t *\n\t * @private\n\t */\n\t_mergeOnLeft() {\n\t\tconst node = this._firstNode;\n\n\t\tif ( !( node instanceof Element ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !this._canMergeLeft( node ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst mergePosLeft = LivePosition._createBefore( node );\n\t\tmergePosLeft.stickiness = 'toNext';\n\n\t\tconst livePosition = LivePosition.fromPosition( this.position, 'toNext' );\n\n\t\t// If `_affectedStart` is sames as merge position, it means that the element \"marked\" by `_affectedStart` is going to be\n\t\t// removed and its contents will be moved. This won't transform `LivePosition` so `_affectedStart` needs to be moved\n\t\t// by hand to properly reflect affected range. (Due to `_affectedStart` and `_affectedEnd` stickiness, the \"range\" is\n\t\t// shown as `][`).\n\t\t//\n\t\t// Example - insert `<paragraph>Abc</paragraph><paragraph>Xyz</paragraph>` at the end of `<paragraph>Foo^</paragraph>`:\n\t\t//\n\t\t// <paragraph>Foo</paragraph><paragraph>Bar</paragraph>   -->\n\t\t// <paragraph>Foo</paragraph>]<paragraph>Abc</paragraph><paragraph>Xyz</paragraph>[<paragraph>Bar</paragraph>   -->\n\t\t// <paragraph>Foo]Abc</paragraph><paragraph>Xyz</paragraph>[<paragraph>Bar</paragraph>\n\t\t//\n\t\t// Note, that if we are here then something must have been inserted, so `_affectedStart` and `_affectedEnd` have to be set.\n\t\tif ( this._affectedStart.isEqual( mergePosLeft ) ) {\n\t\t\tthis._affectedStart.detach();\n\t\t\tthis._affectedStart = LivePosition._createAt( mergePosLeft.nodeBefore, 'end', 'toPrevious' );\n\t\t}\n\n\t\t// We need to update the references to the first and last nodes if they will be merged into the previous sibling node\n\t\t// because the reference would point to the removed node.\n\t\t//\n\t\t// <p>A^A</p> + <p>X</p>\n\t\t//\n\t\t// <p>A</p>^<p>A</p>\n\t\t// <p>A</p><p>X</p><p>A</p>\n\t\t// <p>AX</p><p>A</p>\n\t\t// <p>AXA</p>\n\t\tif ( this._firstNode === this._lastNode ) {\n\t\t\tthis._firstNode = mergePosLeft.nodeBefore;\n\t\t\tthis._lastNode = mergePosLeft.nodeBefore;\n\t\t}\n\n\t\tthis.writer.merge( mergePosLeft );\n\n\t\t// If only one element (the merged one) is in the \"affected range\", also move the affected range end appropriately.\n\t\t//\n\t\t// Example - insert `<paragraph>Abc</paragraph>` at the of `<paragraph>Foo^</paragraph>`:\n\t\t//\n\t\t// <paragraph>Foo</paragraph><paragraph>Bar</paragraph>   -->\n\t\t// <paragraph>Foo</paragraph>]<paragraph>Abc</paragraph>[<paragraph>Bar</paragraph>   -->\n\t\t// <paragraph>Foo]Abc</paragraph>[<paragraph>Bar</paragraph>   -->\n\t\t// <paragraph>Foo]Abc[</paragraph><paragraph>Bar</paragraph>\n\t\tif ( mergePosLeft.isEqual( this._affectedEnd ) && this._firstNode === this._lastNode ) {\n\t\t\tthis._affectedEnd.detach();\n\t\t\tthis._affectedEnd = LivePosition._createAt( mergePosLeft.nodeBefore, 'end', 'toNext' );\n\t\t}\n\n\t\tthis.position = livePosition.toPosition();\n\t\tlivePosition.detach();\n\n\t\t// After merge elements that were marked by _insert() to be filtered might be gone so\n\t\t// we need to mark the new container.\n\t\tthis._filterAttributesOf.push( this.position.parent );\n\n\t\tmergePosLeft.detach();\n\t}\n\n\t/**\n\t * Merges the next sibling of the last node if it should be merged.\n\t *\n\t * After the content was inserted we may try to merge it with its siblings.\n\t * This should happen only if the selection was in those elements initially.\n\t *\n\t * @private\n\t */\n\t_mergeOnRight() {\n\t\tconst node = this._lastNode;\n\n\t\tif ( !( node instanceof Element ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !this._canMergeRight( node ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst mergePosRight = LivePosition._createAfter( node );\n\t\tmergePosRight.stickiness = 'toNext';\n\n\t\t/* istanbul ignore if */\n\t\tif ( !this.position.isEqual( mergePosRight ) ) {\n\t\t\t// Algorithm's correctness check. We should never end up here but it's good to know that we did.\n\t\t\t// At this point the insertion position should be after the node we'll merge. If it isn't,\n\t\t\t// it should need to be secured as in the left merge case.\n\t\t\t/**\n\t\t\t * An internal error occurred when merging inserted content with its siblings.\n\t\t\t * The insertion position should equal the merge position.\n\t\t\t *\n\t\t\t * If you encountered this error, report it back to the CKEditor 5 team\n\t\t\t * with as many details as possible regarding the content being inserted and the insertion position.\n\t\t\t *\n\t\t\t * @error insertcontent-invalid-insertion-position\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'insertcontent-invalid-insertion-position', this );\n\t\t}\n\n\t\t// Move the position to the previous node, so it isn't moved to the graveyard on merge.\n\t\t// <p>x</p>[]<p>y</p> => <p>x[]</p><p>y</p>\n\t\tthis.position = Position._createAt( mergePosRight.nodeBefore, 'end' );\n\n\t\t// Explanation of setting position stickiness to `'toPrevious'`:\n\t\t// OK:  <p>xx[]</p> + <p>yy</p> => <p>xx[]yy</p> (when sticks to previous)\n\t\t// NOK: <p>xx[]</p> + <p>yy</p> => <p>xxyy[]</p> (when sticks to next)\n\t\tconst livePosition = LivePosition.fromPosition( this.position, 'toPrevious' );\n\n\t\t// See comment in `_mergeOnLeft()` on moving `_affectedStart`.\n\t\tif ( this._affectedEnd.isEqual( mergePosRight ) ) {\n\t\t\tthis._affectedEnd.detach();\n\t\t\tthis._affectedEnd = LivePosition._createAt( mergePosRight.nodeBefore, 'end', 'toNext' );\n\t\t}\n\n\t\t// We need to update the references to the first and last nodes if they will be merged into the previous sibling node\n\t\t// because the reference would point to the removed node.\n\t\t//\n\t\t// <p>A^A</p> + <p>X</p>\n\t\t//\n\t\t// <p>A</p>^<p>A</p>\n\t\t// <p>A</p><p>X</p><p>A</p>\n\t\t// <p>AX</p><p>A</p>\n\t\t// <p>AXA</p>\n\t\tif ( this._firstNode === this._lastNode ) {\n\t\t\tthis._firstNode = mergePosRight.nodeBefore;\n\t\t\tthis._lastNode = mergePosRight.nodeBefore;\n\t\t}\n\n\t\tthis.writer.merge( mergePosRight );\n\n\t\t// See comment in `_mergeOnLeft()` on moving `_affectedStart`.\n\t\tif ( mergePosRight.getShiftedBy( -1 ).isEqual( this._affectedStart ) && this._firstNode === this._lastNode ) {\n\t\t\tthis._affectedStart.detach();\n\t\t\tthis._affectedStart = LivePosition._createAt( mergePosRight.nodeBefore, 0, 'toPrevious' );\n\t\t}\n\n\t\tthis.position = livePosition.toPosition();\n\t\tlivePosition.detach();\n\n\t\t// After merge elements that were marked by _insert() to be filtered might be gone so\n\t\t// we need to mark the new container.\n\t\tthis._filterAttributesOf.push( this.position.parent );\n\n\t\tmergePosRight.detach();\n\t}\n\n\t/**\n\t * Checks whether specified node can be merged with previous sibling element.\n\t *\n\t * @private\n\t * @param {module:engine/model/node~Node} node The node which could potentially be merged.\n\t * @returns {Boolean}\n\t */\n\t_canMergeLeft( node ) {\n\t\tconst previousSibling = node.previousSibling;\n\n\t\treturn ( previousSibling instanceof Element ) &&\n\t\t\tthis.canMergeWith.has( previousSibling ) &&\n\t\t\tthis.model.schema.checkMerge( previousSibling, node );\n\t}\n\n\t/**\n\t * Checks whether specified node can be merged with next sibling element.\n\t *\n\t * @private\n\t * @param {module:engine/model/node~Node} node The node which could potentially be merged.\n\t * @returns {Boolean}\n\t */\n\t_canMergeRight( node ) {\n\t\tconst nextSibling = node.nextSibling;\n\n\t\treturn ( nextSibling instanceof Element ) &&\n\t\t\tthis.canMergeWith.has( nextSibling ) &&\n\t\t\tthis.model.schema.checkMerge( node, nextSibling );\n\t}\n\n\t/**\n\t * Tries wrapping the node in a new paragraph and inserting it this way.\n\t *\n\t * @private\n\t * @param {module:engine/model/node~Node} node The node which needs to be autoparagraphed.\n\t */\n\t_tryAutoparagraphing( node ) {\n\t\tconst paragraph = this.writer.createElement( 'paragraph' );\n\n\t\t// Do not autoparagraph if the paragraph won't be allowed there,\n\t\t// cause that would lead to an infinite loop. The paragraph would be rejected in\n\t\t// the next _handleNode() call and we'd be here again.\n\t\tif ( this._getAllowedIn( paragraph, this.position.parent ) && this.schema.checkChild( paragraph, node ) ) {\n\t\t\tparagraph._appendChild( node );\n\t\t\tthis._handleNode( paragraph );\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t * @param {module:engine/model/node~Node} node\n\t * @returns {Boolean} Whether an allowed position was found.\n\t * `false` is returned if the node isn't allowed at any position up in the tree, `true` if was.\n\t */\n\t_checkAndSplitToAllowedPosition( node ) {\n\t\tconst allowedIn = this._getAllowedIn( node, this.position.parent );\n\n\t\tif ( !allowedIn ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Insert nodes collected in temporary DocumentFragment if the position parent needs change to process further nodes.\n\t\tif ( allowedIn != this.position.parent ) {\n\t\t\tthis._insertPartialFragment();\n\t\t}\n\n\t\twhile ( allowedIn != this.position.parent ) {\n\t\t\t// If a parent which we'd need to leave is a limit element, break.\n\t\t\tif ( this.schema.isLimit( this.position.parent ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif ( this.position.isAtStart ) {\n\t\t\t\t// If insertion position is at the beginning of the parent, move it out instead of splitting.\n\t\t\t\t// <p>^Foo</p> -> ^<p>Foo</p>\n\t\t\t\tconst parent = this.position.parent;\n\n\t\t\t\tthis.position = this.writer.createPositionBefore( parent );\n\n\t\t\t\t// Special case – parent is empty (<p>^</p>).\n\t\t\t\t//\n\t\t\t\t// 1. parent.isEmpty\n\t\t\t\t// We can remove the element after moving insertion position out of it.\n\t\t\t\t//\n\t\t\t\t// 2. parent.parent === allowedIn\n\t\t\t\t// However parent should remain in place when allowed element is above limit element in document tree.\n\t\t\t\t// For example there shouldn't be allowed to remove empty paragraph from tableCell, when is pasted\n\t\t\t\t// content allowed in $root.\n\t\t\t\tif ( parent.isEmpty && parent.parent === allowedIn ) {\n\t\t\t\t\tthis.writer.remove( parent );\n\t\t\t\t}\n\t\t\t} else if ( this.position.isAtEnd ) {\n\t\t\t\t// If insertion position is at the end of the parent, move it out instead of splitting.\n\t\t\t\t// <p>Foo^</p> -> <p>Foo</p>^\n\t\t\t\tthis.position = this.writer.createPositionAfter( this.position.parent );\n\t\t\t} else {\n\t\t\t\tconst tempPos = this.writer.createPositionAfter( this.position.parent );\n\n\t\t\t\tthis._setAffectedBoundaries( this.position );\n\t\t\t\tthis.writer.split( this.position );\n\n\t\t\t\tthis.position = tempPos;\n\n\t\t\t\tthis.canMergeWith.add( this.position.nodeAfter );\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Gets the element in which the given node is allowed. It checks the passed element and all its ancestors.\n\t *\n\t * @private\n\t * @param {module:engine/model/node~Node} node The node to check.\n\t * @param {module:engine/model/element~Element} element The element in which the node's correctness should be checked.\n\t * @returns {module:engine/model/element~Element|null}\n\t */\n\t_getAllowedIn( node, element ) {\n\t\tif ( this.schema.checkChild( element, node ) ) {\n\t\t\treturn element;\n\t\t}\n\n\t\tif ( element.parent ) {\n\t\t\treturn this._getAllowedIn( node, element.parent );\n\t\t}\n\n\t\treturn null;\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/utils/deletecontent\n */\n\nimport LivePosition from '../liveposition';\nimport Range from '../range';\nimport DocumentSelection from '../documentselection';\n\n/**\n * Deletes content of the selection and merge siblings. The resulting selection is always collapsed.\n *\n * **Note:** Use {@link module:engine/model/model~Model#deleteContent} instead of this function.\n * This function is only exposed to be reusable in algorithms\n * which change the {@link module:engine/model/model~Model#deleteContent}\n * method's behavior.\n *\n * @param {module:engine/model/model~Model} model The model in context of which the insertion\n * should be performed.\n * @param {module:engine/model/selection~Selection|module:engine/model/documentselection~DocumentSelection} selection\n * Selection of which the content should be deleted.\n * @param {Object} [options]\n * @param {Boolean} [options.leaveUnmerged=false] Whether to merge elements after removing the content of the selection.\n *\n * For example `<heading>x[x</heading><paragraph>y]y</paragraph>` will become:\n *\n * * `<heading>x^y</heading>` with the option disabled (`leaveUnmerged == false`)\n * * `<heading>x^</heading><paragraph>y</paragraph>` with enabled (`leaveUnmerged == true`).\n *\n * Note: {@link module:engine/model/schema~Schema#isObject object} and {@link module:engine/model/schema~Schema#isLimit limit}\n * elements will not be merged.\n *\n * @param {Boolean} [options.doNotResetEntireContent=false] Whether to skip replacing the entire content with a\n * paragraph when the entire content was selected.\n *\n * For example `<heading>[x</heading><paragraph>y]</paragraph>` will become:\n *\n * * `<paragraph>^</paragraph>` with the option disabled (`doNotResetEntireContent == false`)\n * * `<heading>^</heading>` with enabled (`doNotResetEntireContent == true`).\n *\n * @param {Boolean} [options.doNotAutoparagraph=false] Whether to create a paragraph if after content deletion selection is moved\n * to a place where text cannot be inserted.\n *\n * For example `<paragraph>x</paragraph>[<image src=\"foo.jpg\"></image>]` will become:\n *\n * * `<paragraph>x</paragraph><paragraph>[]</paragraph>` with the option disabled (`doNotAutoparagraph == false`)\n * * `<paragraph>x</paragraph>[]` with the option enabled (`doNotAutoparagraph == true`).\n *\n * If you use this option you need to make sure to handle invalid selections yourself or leave\n * them to the selection post-fixer (may not always work).\n *\n * **Note:** if there is no valid position for the selection, the paragraph will always be created:\n *\n * `[<image src=\"foo.jpg\"></image>]` -> `<paragraph>[]</paragraph>`.\n */\nexport default function deleteContent( model, selection, options = {} ) {\n\tif ( selection.isCollapsed ) {\n\t\treturn;\n\t}\n\n\tconst selRange = selection.getFirstRange();\n\n\t// If the selection is already removed, don't do anything.\n\tif ( selRange.root.rootName == '$graveyard' ) {\n\t\treturn;\n\t}\n\n\tconst schema = model.schema;\n\n\tmodel.change( writer => {\n\t\t// 1. Replace the entire content with paragraph.\n\t\t// See: https://github.com/ckeditor/ckeditor5-engine/issues/1012#issuecomment-315017594.\n\t\tif ( !options.doNotResetEntireContent && shouldEntireContentBeReplacedWithParagraph( schema, selection ) ) {\n\t\t\treplaceEntireContentWithParagraph( writer, selection, schema );\n\n\t\t\treturn;\n\t\t}\n\n\t\t// Get the live positions for the range adjusted to span only blocks selected from the user perspective.\n\t\tconst [ startPosition, endPosition ] = getLivePositionsForSelectedBlocks( selRange );\n\n\t\t// 2. Remove the content if there is any.\n\t\tif ( !startPosition.isTouching( endPosition ) ) {\n\t\t\twriter.remove( writer.createRange( startPosition, endPosition ) );\n\t\t}\n\n\t\t// 3. Merge elements in the right branch to the elements in the left branch.\n\t\t// The only reasonable (in terms of data and selection correctness) case in which we need to do that is:\n\t\t//\n\t\t// <heading type=1>Fo[</heading><paragraph>]ar</paragraph> => <heading type=1>Fo^ar</heading>\n\t\t//\n\t\t// However, the algorithm supports also merging deeper structures (up to the depth of the shallower branch),\n\t\t// as it's hard to imagine what should actually be the default behavior. Usually, specific features will\n\t\t// want to override that behavior anyway.\n\t\tif ( !options.leaveUnmerged ) {\n\t\t\tmergeBranches( writer, startPosition, endPosition );\n\n\t\t\t// TMP this will be replaced with a postfixer.\n\t\t\t// We need to check and strip disallowed attributes in all nested nodes because after merge\n\t\t\t// some attributes could end up in a path where are disallowed.\n\t\t\t//\n\t\t\t// e.g. bold is disallowed for <H1>\n\t\t\t// <h1>Fo{o</h1><p>b}a<b>r</b><p> -> <h1>Fo{}a<b>r</b><h1> -> <h1>Fo{}ar<h1>.\n\t\t\tschema.removeDisallowedAttributes( startPosition.parent.getChildren(), writer );\n\t\t}\n\n\t\tcollapseSelectionAt( writer, selection, startPosition );\n\n\t\t// 4. Add a paragraph to set selection in it.\n\t\t// Check if a text is allowed in the new container. If not, try to create a new paragraph (if it's allowed here).\n\t\t// If autoparagraphing is off, we assume that you know what you do so we leave the selection wherever it was.\n\t\tif ( !options.doNotAutoparagraph && shouldAutoparagraph( schema, startPosition ) ) {\n\t\t\tinsertParagraph( writer, startPosition, selection );\n\t\t}\n\n\t\tstartPosition.detach();\n\t\tendPosition.detach();\n\t} );\n}\n\n// Returns the live positions for the range adjusted to span only blocks selected from the user perspective. Example:\n//\n//     <heading1>[foo</heading1>\n//     <paragraph>bar</paragraph>\n//     <heading1>]abc</heading1>  <-- this block is not considered as selected\n//\n// This is the same behavior as in Selection#getSelectedBlocks() \"special case\".\nfunction getLivePositionsForSelectedBlocks( range ) {\n\tconst model = range.root.document.model;\n\n\tconst startPosition = range.start;\n\tlet endPosition = range.end;\n\n\t// If the end of selection is at the start position of last block in the selection, then\n\t// shrink it to not include that trailing block. Note that this should happen only for not empty selection.\n\tif ( model.hasContent( range, { ignoreMarkers: true } ) ) {\n\t\tconst endBlock = getParentBlock( endPosition );\n\n\t\tif ( endBlock && endPosition.isTouching( model.createPositionAt( endBlock, 0 ) ) ) {\n\t\t\t// Create forward selection as a probe to find a valid position after excluding last block from the range.\n\t\t\tconst selection = model.createSelection( range );\n\n\t\t\t// Modify the forward selection in backward direction to shrink it and remove first position of following block from it.\n\t\t\t// This is how modifySelection works and here we are making use of it.\n\t\t\tmodel.modifySelection( selection, { direction: 'backward' } );\n\n\t\t\tendPosition = selection.getLastPosition();\n\t\t}\n\t}\n\n\treturn [\n\t\tLivePosition.fromPosition( startPosition, 'toPrevious' ),\n\t\tLivePosition.fromPosition( endPosition, 'toNext' )\n\t];\n}\n\n// Finds the lowest element in position's ancestors which is a block.\n// Returns null if a limit element is encountered before reaching a block element.\nfunction getParentBlock( position ) {\n\tconst element = position.parent;\n\tconst schema = element.root.document.model.schema;\n\tconst ancestors = element.getAncestors( { parentFirst: true, includeSelf: true } );\n\n\tfor ( const element of ancestors ) {\n\t\tif ( schema.isLimit( element ) ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif ( schema.isBlock( element ) ) {\n\t\t\treturn element;\n\t\t}\n\t}\n}\n\n// This function is a result of reaching the Ballmer's peak for just the right amount of time.\n// Even I had troubles documenting it after a while and after reading it again I couldn't believe that it really works.\nfunction mergeBranches( writer, startPosition, endPosition ) {\n\tconst model = writer.model;\n\n\t// Verify if there is a need and possibility to merge.\n\tif ( !checkShouldMerge( writer.model.schema, startPosition, endPosition ) ) {\n\t\treturn;\n\t}\n\n\t// If the start element on the common ancestor level is empty, and the end element on the same level is not empty\n\t// then merge those to the right element so that it's properties are preserved (name, attributes).\n\t// Because of OT merging is used instead of removing elements.\n\t//\n\t// Merge left:\n\t//     <heading1>foo[</heading1>    ->  <heading1>foo[]bar</heading1>\n\t//     <paragraph>]bar</paragraph>  ->               --^\n\t//\n\t// Merge right:\n\t//     <heading1>[</heading1>       ->\n\t//     <paragraph>]bar</paragraph>  ->  <paragraph>[]bar</paragraph>\n\t//\n\t// Merge left:\n\t//     <blockQuote>                     ->  <blockQuote>\n\t//         <heading1>foo[</heading1>    ->      <heading1>foo[]bar</heading1>\n\t//         <paragraph>]bar</paragraph>  ->                   --^\n\t//     </blockQuote>                    ->  </blockQuote>\n\t//\n\t// Merge right:\n\t//     <blockQuote>                     ->  <blockQuote>\n\t//         <heading1>[</heading1>       ->\n\t//         <paragraph>]bar</paragraph>  ->      <paragraph>[]bar</paragraph>\n\t//     </blockQuote>                    ->  </blockQuote>\n\n\t// Merging should not go deeper than common ancestor.\n\tconst [ startAncestor, endAncestor ] = getAncestorsJustBelowCommonAncestor( startPosition, endPosition );\n\n\t// Branches can't be merged if one of the positions is directly inside a common ancestor.\n\t//\n\t// Example:\n\t//     <blockQuote>\n\t//         <paragraph>[foo</paragraph>]\n\t//         <table> ... </table>\n\t//     <blockQuote>\n\t//\n\tif ( !startAncestor || !endAncestor ) {\n\t\treturn;\n\t}\n\n\tif ( !model.hasContent( startAncestor, { ignoreMarkers: true } ) && model.hasContent( endAncestor, { ignoreMarkers: true } ) ) {\n\t\tmergeBranchesRight( writer, startPosition, endPosition, startAncestor.parent );\n\t} else {\n\t\tmergeBranchesLeft( writer, startPosition, endPosition, startAncestor.parent );\n\t}\n}\n\n// Merging blocks to the left (properties of the left block are preserved).\n// Simple example:\n//     <heading1>foo[</heading1>    ->  <heading1>foo[bar</heading1>]\n//     <paragraph>]bar</paragraph>  ->              --^\n//\n// Nested example:\n//     <blockQuote>                     ->  <blockQuote>\n//         <heading1>foo[</heading1>    ->      <heading1>foo[bar</heading1>\n//     </blockQuote>                    ->  </blockQuote>]    ^\n//     <blockBlock>                     ->                    |\n//         <paragraph>]bar</paragraph>  ->                 ---\n//     </blockBlock>                    ->\n//\nfunction mergeBranchesLeft( writer, startPosition, endPosition, commonAncestor ) {\n\tconst startElement = startPosition.parent;\n\tconst endElement = endPosition.parent;\n\n\t// Merging reached the common ancestor element, stop here.\n\tif ( startElement == commonAncestor || endElement == commonAncestor ) {\n\t\treturn;\n\t}\n\n\t// Remember next positions to merge in next recursive step (also used as modification points pointers).\n\tstartPosition = writer.createPositionAfter( startElement );\n\tendPosition = writer.createPositionBefore( endElement );\n\n\t// Move endElement just after startElement if they aren't siblings.\n\tif ( !endPosition.isEqual( startPosition ) ) {\n\t\t//\n\t\t//     <blockQuote>                     ->  <blockQuote>\n\t\t//         <heading1>foo[</heading1>    ->      <heading1>foo</heading1>[<paragraph>bar</paragraph>\n\t\t//     </blockQuote>                    ->  </blockQuote>                ^\n\t\t//     <blockBlock>                     ->  <blockBlock>                 |\n\t\t//         <paragraph>]bar</paragraph>  ->      ]                     ---\n\t\t//     </blockBlock>                    ->  </blockBlock>\n\t\t//\n\t\twriter.insert( endElement, startPosition );\n\t}\n\n\t// Merge two siblings (nodes on sides of startPosition):\n\t//\n\t//     <blockQuote>                                             ->  <blockQuote>\n\t//         <heading1>foo</heading1>[<paragraph>bar</paragraph>  ->      <heading1>foo[bar</heading1>\n\t//     </blockQuote>                                            ->  </blockQuote>\n\t//     <blockBlock>                                             ->  <blockBlock>\n\t//         ]                                                    ->      ]\n\t//     </blockBlock>                                            ->  </blockBlock>\n\t//\n\t// Or in simple case (without moving elements in above if):\n\t//     <heading1>foo</heading1>[<paragraph>bar</paragraph>]  ->  <heading1>foo[bar</heading1>]\n\t//\n\twriter.merge( startPosition );\n\n\t// Remove empty end ancestors:\n\t//\n\t//     <blockQuote>                      ->  <blockQuote>\n\t//         <heading1>foo[bar</heading1>  ->      <heading1>foo[bar</heading1>\n\t//     </blockQuote>                     ->  </blockQuote>\n\t//     <blockBlock>                      ->\n\t//         ]                             ->  ]\n\t//     </blockBlock>                     ->\n\t//\n\twhile ( endPosition.parent.isEmpty ) {\n\t\tconst parentToRemove = endPosition.parent;\n\n\t\tendPosition = writer.createPositionBefore( parentToRemove );\n\n\t\twriter.remove( parentToRemove );\n\t}\n\n\t// Verify if there is a need and possibility to merge next level.\n\tif ( !checkShouldMerge( writer.model.schema, startPosition, endPosition ) ) {\n\t\treturn;\n\t}\n\n\t// Continue merging next level (blockQuote with blockBlock in the examples above if it would not be empty and got removed).\n\tmergeBranchesLeft( writer, startPosition, endPosition, commonAncestor );\n}\n\n// Merging blocks to the right (properties of the right block are preserved).\n// Simple example:\n//     <heading1>foo[</heading1>    ->            --v\n//     <paragraph>]bar</paragraph>  ->  [<paragraph>foo]bar</paragraph>\n//\n// Nested example:\n//     <blockQuote>                     ->\n//         <heading1>foo[</heading1>    ->              ---\n//     </blockQuote>                    ->                 |\n//     <blockBlock>                     ->  [<blockBlock>  v\n//         <paragraph>]bar</paragraph>  ->      <paragraph>foo]bar</paragraph>\n//     </blockBlock>                    ->  </blockBlock>\n//\nfunction mergeBranchesRight( writer, startPosition, endPosition, commonAncestor ) {\n\tconst startElement = startPosition.parent;\n\tconst endElement = endPosition.parent;\n\n\t// Merging reached the common ancestor element, stop here.\n\tif ( startElement == commonAncestor || endElement == commonAncestor ) {\n\t\treturn;\n\t}\n\n\t// Remember next positions to merge in next recursive step (also used as modification points pointers).\n\tstartPosition = writer.createPositionAfter( startElement );\n\tendPosition = writer.createPositionBefore( endElement );\n\n\t// Move startElement just before endElement if they aren't siblings.\n\tif ( !endPosition.isEqual( startPosition ) ) {\n\t\t//\n\t\t//     <blockQuote>                     ->  <blockQuote>\n\t\t//         <heading1>foo[</heading1>    ->      [                   ---\n\t\t//     </blockQuote>                    ->  </blockQuote>              |\n\t\t//     <blockBlock>                     ->  <blockBlock>               v\n\t\t//         <paragraph>]bar</paragraph>  ->      <heading1>foo</heading1>]<paragraph>bar</paragraph>\n\t\t//     </blockBlock>                    ->  </blockBlock>\n\t\t//\n\t\twriter.insert( startElement, endPosition );\n\t}\n\n\t// Remove empty end ancestors:\n\t//\n\t//     <blockQuote>                                             ->\n\t//         [                                                    ->  [\n\t//     </blockQuote>                                            ->\n\t//     <blockBlock>                                             ->  <blockBlock>\n\t//         <heading1>foo</heading1>]<paragraph>bar</paragraph>  ->      <heading1>foo</heading1>]<paragraph>bar</paragraph>\n\t//     </blockBlock>                                            ->  </blockBlock>\n\t//\n\twhile ( startPosition.parent.isEmpty ) {\n\t\tconst parentToRemove = startPosition.parent;\n\n\t\tstartPosition = writer.createPositionBefore( parentToRemove );\n\n\t\twriter.remove( parentToRemove );\n\t}\n\n\t// Update endPosition after inserting and removing elements.\n\tendPosition = writer.createPositionBefore( endElement );\n\n\t// Merge right two siblings (nodes on sides of endPosition):\n\t//                                                              ->\n\t//     [                                                        ->  [\n\t//                                                              ->\n\t//     <blockBlock>                                             ->  <blockBlock>\n\t//         <heading1>foo</heading1>]<paragraph>bar</paragraph>  ->      <paragraph>foo]bar</paragraph>\n\t//     </blockBlock>                                            ->  </blockBlock>\n\t//\n\t// Or in simple case (without moving elements in above if):\n\t//     [<heading1>foo</heading1>]<paragraph>bar</paragraph>  ->  [<heading1>foo]bar</heading1>\n\t//\n\tmergeRight( writer, endPosition );\n\n\t// Verify if there is a need and possibility to merge next level.\n\tif ( !checkShouldMerge( writer.model.schema, startPosition, endPosition ) ) {\n\t\treturn;\n\t}\n\n\t// Continue merging next level (blockQuote with blockBlock in the examples above if it would not be empty and got removed).\n\tmergeBranchesRight( writer, startPosition, endPosition, commonAncestor );\n}\n\n// There is no right merge operation so we need to simulate it.\nfunction mergeRight( writer, position ) {\n\tconst startElement = position.nodeBefore;\n\tconst endElement = position.nodeAfter;\n\n\tif ( startElement.name != endElement.name ) {\n\t\twriter.rename( startElement, endElement.name );\n\t}\n\n\twriter.clearAttributes( startElement );\n\twriter.setAttributes( Object.fromEntries( endElement.getAttributes() ), startElement );\n\n\twriter.merge( position );\n}\n\n// Verifies if merging is needed and possible. It's not needed if both positions are in the same element\n// and it's not possible if some element is a limit or the range crosses a limit element.\nfunction checkShouldMerge( schema, startPosition, endPosition ) {\n\tconst startElement = startPosition.parent;\n\tconst endElement = endPosition.parent;\n\n\t// If both positions ended up in the same parent, then there's nothing more to merge:\n\t// <$root><p>x[</p><p>]y</p></$root> => <$root><p>xy</p>[]</$root>\n\tif ( startElement == endElement ) {\n\t\treturn false;\n\t}\n\n\t// If one of the positions is a limit element, then there's nothing to merge because we don't want to cross the limit boundaries.\n\tif ( schema.isLimit( startElement ) || schema.isLimit( endElement ) ) {\n\t\treturn false;\n\t}\n\n\t// Check if operations we'll need to do won't need to cross object or limit boundaries.\n\t// E.g., we can't merge endElement into startElement in this case:\n\t// <limit><startElement>x[</startElement></limit><endElement>]</endElement>\n\treturn isCrossingLimitElement( startPosition, endPosition, schema );\n}\n\n// Returns the elements that are the ancestors of the provided positions that are direct children of the common ancestor.\nfunction getAncestorsJustBelowCommonAncestor( positionA, positionB ) {\n\tconst ancestorsA = positionA.getAncestors();\n\tconst ancestorsB = positionB.getAncestors();\n\n\tlet i = 0;\n\n\twhile ( ancestorsA[ i ] && ancestorsA[ i ] == ancestorsB[ i ] ) {\n\t\ti++;\n\t}\n\n\treturn [ ancestorsA[ i ], ancestorsB[ i ] ];\n}\n\nfunction shouldAutoparagraph( schema, position ) {\n\tconst isTextAllowed = schema.checkChild( position, '$text' );\n\tconst isParagraphAllowed = schema.checkChild( position, 'paragraph' );\n\n\treturn !isTextAllowed && isParagraphAllowed;\n}\n\n// Check if parents of two positions can be merged by checking if there are no limit/object\n// boundaries between those two positions.\n//\n// E.g. in <bQ><p>x[]</p></bQ><widget><caption>{}</caption></widget>\n// we'll check <p>, <bQ>, <widget> and <caption>.\n// Usually, widget and caption are marked as objects/limits in the schema, so in this case merging will be blocked.\nfunction isCrossingLimitElement( leftPos, rightPos, schema ) {\n\tconst rangeToCheck = new Range( leftPos, rightPos );\n\n\tfor ( const value of rangeToCheck.getWalker() ) {\n\t\tif ( schema.isLimit( value.item ) ) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n}\n\nfunction insertParagraph( writer, position, selection ) {\n\tconst paragraph = writer.createElement( 'paragraph' );\n\n\twriter.insert( paragraph, position );\n\n\tcollapseSelectionAt( writer, selection, writer.createPositionAt( paragraph, 0 ) );\n}\n\nfunction replaceEntireContentWithParagraph( writer, selection ) {\n\tconst limitElement = writer.model.schema.getLimitElement( selection );\n\n\twriter.remove( writer.createRangeIn( limitElement ) );\n\tinsertParagraph( writer, writer.createPositionAt( limitElement, 0 ), selection );\n}\n\n// We want to replace the entire content with a paragraph when:\n// * the entire content is selected,\n// * selection contains at least two elements,\n// * whether the paragraph is allowed in schema in the common ancestor.\nfunction shouldEntireContentBeReplacedWithParagraph( schema, selection ) {\n\tconst limitElement = schema.getLimitElement( selection );\n\n\tif ( !selection.containsEntireContent( limitElement ) ) {\n\t\treturn false;\n\t}\n\n\tconst range = selection.getFirstRange();\n\n\tif ( range.start.parent == range.end.parent ) {\n\t\treturn false;\n\t}\n\n\treturn schema.checkChild( limitElement, 'paragraph' );\n}\n\n// Helper function that sets the selection. Depending whether given `selection` is a document selection or not,\n// uses a different method to set it.\nfunction collapseSelectionAt( writer, selection, positionOrRange ) {\n\tif ( selection instanceof DocumentSelection ) {\n\t\twriter.setSelection( positionOrRange );\n\t} else {\n\t\tselection.setTo( positionOrRange );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/utils/modifyselection\n */\n\nimport Position from '../position';\nimport TreeWalker from '../treewalker';\nimport Range from '../range';\nimport { isInsideSurrogatePair, isInsideCombinedSymbol } from '@ckeditor/ckeditor5-utils/src/unicode';\nimport DocumentSelection from '../documentselection';\n\nconst wordBoundaryCharacters = ' ,.?!:;\"-()';\n\n/**\n * Modifies the selection. Currently, the supported modifications are:\n *\n * * Extending. The selection focus is moved in the specified `options.direction` with a step specified in `options.unit`.\n * Possible values for `unit` are:\n *  * `'character'` (default) - moves selection by one user-perceived character. In most cases this means moving by one\n *  character in `String` sense. However, unicode also defines \"combing marks\". These are special symbols, that combines\n *  with a symbol before it (\"base character\") to create one user-perceived character. For example, `q̣̇` is a normal\n *  letter `q` with two \"combining marks\": upper dot (`Ux0307`) and lower dot (`Ux0323`). For most actions, i.e. extending\n *  selection by one position, it is correct to include both \"base character\" and all of it's \"combining marks\". That is\n *  why `'character'` value is most natural and common method of modifying selection.\n *  * `'codePoint'` - moves selection by one unicode code point. In contrary to, `'character'` unit, this will insert\n *  selection between \"base character\" and \"combining mark\", because \"combining marks\" have their own unicode code points.\n *  However, for technical reasons, unicode code points with values above `UxFFFF` are represented in native `String` by\n *  two characters, called \"surrogate pairs\". Halves of \"surrogate pairs\" have a meaning only when placed next to each other.\n *  For example `𨭎` is represented in `String` by `\\uD862\\uDF4E`. Both `\\uD862` and `\\uDF4E` do not have any meaning\n *  outside the pair (are rendered as ? when alone). Position between them would be incorrect. In this case, selection\n *  extension will include whole \"surrogate pair\".\n *  * `'word'` - moves selection by a whole word.\n *\n * **Note:** if you extend a forward selection in a backward direction you will in fact shrink it.\n *\n * **Note:** Use {@link module:engine/model/model~Model#modifySelection} instead of this function.\n * This function is only exposed to be reusable in algorithms\n * which change the {@link module:engine/model/model~Model#modifySelection}\n * method's behavior.\n *\n * @param {module:engine/model/model~Model} model The model in context of which\n * the selection modification should be performed.\n * @param {module:engine/model/selection~Selection|module:engine/model/documentselection~DocumentSelection} selection\n * The selection to modify.\n * @param {Object} [options]\n * @param {'forward'|'backward'} [options.direction='forward'] The direction in which the selection should be modified.\n * @param {'character'|'codePoint'|'word'} [options.unit='character'] The unit by which selection should be modified.\n */\nexport default function modifySelection( model, selection, options = {} ) {\n\tconst schema = model.schema;\n\tconst isForward = options.direction != 'backward';\n\tconst unit = options.unit ? options.unit : 'character';\n\n\tconst focus = selection.focus;\n\n\tconst walker = new TreeWalker( {\n\t\tboundaries: getSearchRange( focus, isForward ),\n\t\tsingleCharacters: true,\n\t\tdirection: isForward ? 'forward' : 'backward'\n\t} );\n\n\tconst data = { walker, schema, isForward, unit };\n\n\tlet next;\n\n\twhile ( ( next = walker.next() ) ) {\n\t\tif ( next.done ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst position = tryExtendingTo( data, next.value );\n\n\t\tif ( position ) {\n\t\t\tif ( selection instanceof DocumentSelection ) {\n\t\t\t\tmodel.change( writer => {\n\t\t\t\t\twriter.setSelectionFocus( position );\n\t\t\t\t} );\n\t\t\t} else {\n\t\t\t\tselection.setFocus( position );\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\t}\n}\n\n// Checks whether the selection can be extended to the the walker's next value (next position).\n// @param {{ walker, unit, isForward, schema }} data\n// @param {module:engine/view/treewalker~TreeWalkerValue} value\nfunction tryExtendingTo( data, value ) {\n\tconst { isForward, walker, unit, schema } = data;\n\tconst { type, item, nextPosition } = value;\n\n\t// If found text, we can certainly put the focus in it. Let's just find a correct position\n\t// based on the unit.\n\tif ( type == 'text' ) {\n\t\tif ( data.unit === 'word' ) {\n\t\t\treturn getCorrectWordBreakPosition( walker, isForward );\n\t\t}\n\n\t\treturn getCorrectPosition( walker, unit, isForward );\n\t}\n\n\t// Entering an element.\n\tif ( type == ( isForward ? 'elementStart' : 'elementEnd' ) ) {\n\t\t// If it's a selectable, we can select it now.\n\t\tif ( schema.isSelectable( item ) ) {\n\t\t\treturn Position._createAt( item, isForward ? 'after' : 'before' );\n\t\t}\n\n\t\t// If text allowed on this position, extend to this place.\n\t\tif ( schema.checkChild( nextPosition, '$text' ) ) {\n\t\t\treturn nextPosition;\n\t\t}\n\t}\n\t// Leaving an element.\n\telse {\n\t\t// If leaving a limit element, stop.\n\t\tif ( schema.isLimit( item ) ) {\n\t\t\t// NOTE: Fast-forward the walker until the end.\n\t\t\twalker.skip( () => true );\n\n\t\t\treturn;\n\t\t}\n\n\t\t// If text allowed on this position, extend to this place.\n\t\tif ( schema.checkChild( nextPosition, '$text' ) ) {\n\t\t\treturn nextPosition;\n\t\t}\n\t}\n}\n\n// Finds a correct position by walking in a text node and checking whether selection can be extended to given position\n// or should be extended further.\n//\n// @param {module:engine/model/treewalker~TreeWalker} walker\n// @param {String} unit The unit by which selection should be modified.\nfunction getCorrectPosition( walker, unit ) {\n\tconst textNode = walker.position.textNode;\n\n\tif ( textNode ) {\n\t\tconst data = textNode.data;\n\t\tlet offset = walker.position.offset - textNode.startOffset;\n\n\t\twhile ( isInsideSurrogatePair( data, offset ) || ( unit == 'character' && isInsideCombinedSymbol( data, offset ) ) ) {\n\t\t\twalker.next();\n\n\t\t\toffset = walker.position.offset - textNode.startOffset;\n\t\t}\n\t}\n\n\treturn walker.position;\n}\n\n// Finds a correct position of a word break by walking in a text node and checking whether selection can be extended to given position\n// or should be extended further.\n//\n// @param {module:engine/model/treewalker~TreeWalker} walker\n// @param {Boolean} isForward Is the direction in which the selection should be modified is forward.\nfunction getCorrectWordBreakPosition( walker, isForward ) {\n\tlet textNode = walker.position.textNode;\n\n\tif ( textNode ) {\n\t\tlet offset = walker.position.offset - textNode.startOffset;\n\n\t\twhile ( !isAtWordBoundary( textNode.data, offset, isForward ) && !isAtNodeBoundary( textNode, offset, isForward ) ) {\n\t\t\twalker.next();\n\n\t\t\t// Check of adjacent text nodes with different attributes (like BOLD).\n\t\t\t// Example          : 'foofoo []bar<$text bold=\"true\">bar</$text> bazbaz'\n\t\t\t// should expand to : 'foofoo [bar<$text bold=\"true\">bar</$text>] bazbaz'.\n\t\t\tconst nextNode = isForward ? walker.position.nodeAfter : walker.position.nodeBefore;\n\n\t\t\t// Scan only text nodes. Ignore inline elements (like `<softBreak>`).\n\t\t\tif ( nextNode && nextNode.is( '$text' ) ) {\n\t\t\t\t// Check boundary char of an adjacent text node.\n\t\t\t\tconst boundaryChar = nextNode.data.charAt( isForward ? 0 : nextNode.data.length - 1 );\n\n\t\t\t\t// Go to the next node if the character at the boundary of that node belongs to the same word.\n\t\t\t\tif ( !wordBoundaryCharacters.includes( boundaryChar ) ) {\n\t\t\t\t\t// If adjacent text node belongs to the same word go to it & reset values.\n\t\t\t\t\twalker.next();\n\n\t\t\t\t\ttextNode = walker.position.textNode;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\toffset = walker.position.offset - textNode.startOffset;\n\t\t}\n\t}\n\n\treturn walker.position;\n}\n\nfunction getSearchRange( start, isForward ) {\n\tconst root = start.root;\n\tconst searchEnd = Position._createAt( root, isForward ? 'end' : 0 );\n\n\tif ( isForward ) {\n\t\treturn new Range( start, searchEnd );\n\t} else {\n\t\treturn new Range( searchEnd, start );\n\t}\n}\n\n// Checks if selection is on word boundary.\n//\n// @param {String} data The text node value to investigate.\n// @param {Number} offset Position offset.\n// @param {Boolean} isForward Is the direction in which the selection should be modified is forward.\nfunction isAtWordBoundary( data, offset, isForward ) {\n\t// The offset to check depends on direction.\n\tconst offsetToCheck = offset + ( isForward ? 0 : -1 );\n\n\treturn wordBoundaryCharacters.includes( data.charAt( offsetToCheck ) );\n}\n\n// Checks if selection is on node boundary.\n//\n// @param {module:engine/model/text~Text} textNode The text node to investigate.\n// @param {Number} offset Position offset.\n// @param {Boolean} isForward Is the direction in which the selection should be modified is forward.\nfunction isAtNodeBoundary( textNode, offset, isForward ) {\n\treturn offset === ( isForward ? textNode.endOffset : 0 );\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/utils/getselectedcontent\n */\n\n/**\n * Gets a clone of the selected content.\n *\n * For example, for the following selection:\n *\n * ```html\n * <p>x</p><quote><p>y</p><h>fir[st</h></quote><p>se]cond</p><p>z</p>\n * ```\n *\n * It will return a document fragment with such a content:\n *\n * ```html\n * <quote><h>st</h></quote><p>se</p>\n * ```\n *\n * @param {module:engine/model/model~Model} model The model in context of which\n * the selection modification should be performed.\n * @param {module:engine/model/selection~Selection|module:engine/model/documentselection~DocumentSelection} selection\n * The selection of which content will be returned.\n * @returns {module:engine/model/documentfragment~DocumentFragment}\n */\nexport default function getSelectedContent( model, selection ) {\n\treturn model.change( writer => {\n\t\tconst frag = writer.createDocumentFragment();\n\t\tconst range = selection.getFirstRange();\n\n\t\tif ( !range || range.isCollapsed ) {\n\t\t\treturn frag;\n\t\t}\n\n\t\tconst root = range.start.root;\n\t\tconst commonPath = range.start.getCommonPath( range.end );\n\t\tconst commonParent = root.getNodeByPath( commonPath );\n\n\t\t// ## 1st step\n\t\t//\n\t\t// First, we'll clone a fragment represented by a minimal flat range\n\t\t// containing the original range to be cloned.\n\t\t// E.g. let's consider such a range:\n\t\t//\n\t\t// <p>x</p><quote><p>y</p><h>fir[st</h></quote><p>se]cond</p><p>z</p>\n\t\t//\n\t\t// A minimal flat range containing this one is:\n\t\t//\n\t\t// <p>x</p>[<quote><p>y</p><h>first</h></quote><p>second</p>]<p>z</p>\n\t\t//\n\t\t// We can easily clone this structure, preserving e.g. the <quote> element.\n\t\tlet flatSubtreeRange;\n\n\t\tif ( range.start.parent == range.end.parent ) {\n\t\t\t// The original range is flat, so take it.\n\t\t\tflatSubtreeRange = range;\n\t\t} else {\n\t\t\tflatSubtreeRange = writer.createRange(\n\t\t\t\twriter.createPositionAt( commonParent, range.start.path[ commonPath.length ] ),\n\t\t\t\twriter.createPositionAt( commonParent, range.end.path[ commonPath.length ] + 1 )\n\t\t\t);\n\t\t}\n\n\t\tconst howMany = flatSubtreeRange.end.offset - flatSubtreeRange.start.offset;\n\n\t\t// Clone the whole contents.\n\t\tfor ( const item of flatSubtreeRange.getItems( { shallow: true } ) ) {\n\t\t\tif ( item.is( '$textProxy' ) ) {\n\t\t\t\twriter.appendText( item.data, item.getAttributes(), frag );\n\t\t\t} else {\n\t\t\t\twriter.append( writer.cloneElement( item, true ), frag );\n\t\t\t}\n\t\t}\n\n\t\t// ## 2nd step\n\t\t//\n\t\t// If the original range wasn't flat, then we need to remove the excess nodes from the both ends of the cloned fragment.\n\t\t//\n\t\t// For example, for the range shown in the 1st step comment, we need to remove these pieces:\n\t\t//\n\t\t// <quote>[<p>y</p>]<h>[fir]st</h></quote><p>se[cond]</p>\n\t\t//\n\t\t// So this will be the final copied content:\n\t\t//\n\t\t// <quote><h>st</h></quote><p>se</p>\n\t\t//\n\t\t// In order to do that, we remove content from these two ranges:\n\t\t//\n\t\t// [<quote><p>y</p><h>fir]st</h></quote><p>se[cond</p>]\n\t\tif ( flatSubtreeRange != range ) {\n\t\t\t// Find the position of the original range in the cloned fragment.\n\t\t\tconst newRange = range._getTransformedByMove( flatSubtreeRange.start, writer.createPositionAt( frag, 0 ), howMany )[ 0 ];\n\n\t\t\tconst leftExcessRange = writer.createRange( writer.createPositionAt( frag, 0 ), newRange.start );\n\t\t\tconst rightExcessRange = writer.createRange( newRange.end, writer.createPositionAt( frag, 'end' ) );\n\n\t\t\tremoveRangeContent( rightExcessRange, writer );\n\t\t\tremoveRangeContent( leftExcessRange, writer );\n\t\t}\n\n\t\treturn frag;\n\t} );\n}\n\n// After https://github.com/ckeditor/ckeditor5-engine/issues/690 is fixed,\n// this function will, most likely, be able to rewritten using getMinimalFlatRanges().\nfunction removeRangeContent( range, writer ) {\n\tconst parentsToCheck = [];\n\n\tArray.from( range.getItems( { direction: 'backward' } ) )\n\t\t// We should better store ranges because text proxies will lose integrity\n\t\t// with the text nodes when we'll start removing content.\n\t\t.map( item => writer.createRangeOn( item ) )\n\t\t// Filter only these items which are fully contained in the passed range.\n\t\t//\n\t\t// E.g. for the following range: [<quote><p>y</p><h>fir]st</h>\n\t\t// the walker will return the entire <h> element, when only the \"fir\" item inside it is fully contained.\n\t\t.filter( itemRange => {\n\t\t\t// We should be able to use Range.containsRange, but https://github.com/ckeditor/ckeditor5-engine/issues/691.\n\t\t\tconst contained =\n\t\t\t\t( itemRange.start.isAfter( range.start ) || itemRange.start.isEqual( range.start ) ) &&\n\t\t\t\t( itemRange.end.isBefore( range.end ) || itemRange.end.isEqual( range.end ) );\n\n\t\t\treturn contained;\n\t\t} )\n\t\t.forEach( itemRange => {\n\t\t\tparentsToCheck.push( itemRange.start.parent );\n\n\t\t\twriter.remove( itemRange );\n\t\t} );\n\n\t// Remove ancestors of the removed items if they turned to be empty now\n\t// (their whole content was contained in the range).\n\tparentsToCheck.forEach( parentToCheck => {\n\t\tlet parent = parentToCheck;\n\n\t\twhile ( parent.parent && parent.isEmpty ) {\n\t\t\tconst removeRange = writer.createRangeOn( parent );\n\n\t\t\tparent = parent.parent;\n\n\t\t\twriter.remove( removeRange );\n\t\t}\n\t} );\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/utils/selection-post-fixer\n */\n\nimport Range from '../range';\nimport Position from '../position';\n\n/**\n * Injects selection post-fixer to the model.\n *\n * The role of the selection post-fixer is to ensure that the selection is in a correct place\n * after a {@link module:engine/model/model~Model#change `change()`} block was executed.\n *\n * The correct position means that:\n *\n * * All collapsed selection ranges are in a place where the {@link module:engine/model/schema~Schema}\n * allows a `$text`.\n * * None of the selection's non-collapsed ranges crosses a {@link module:engine/model/schema~Schema#isLimit limit element}\n * boundary (a range must be rooted within one limit element).\n * * Only {@link module:engine/model/schema~Schema#isSelectable selectable elements} can be selected from the outside\n * (e.g. `[<paragraph>foo</paragraph>]` is invalid). This rule applies independently to both selection ends, so this\n * selection is correct: `<paragraph>f[oo</paragraph><image></image>]`.\n *\n * If the position is not correct, the post-fixer will automatically correct it.\n *\n * ## Fixing a non-collapsed selection\n *\n * See as an example a selection that starts in a P1 element and ends inside the text of a TD element\n * (`[` and `]` are range boundaries and `(l)` denotes an element defined as `isLimit=true`):\n *\n *\t\troot\n *\t\t |- element P1\n *\t\t |   |- \"foo\"                                      root\n *\t\t |- element TABLE (l)                   P1         TABLE             P2\n *\t\t |   |- element TR (l)                 f o[o     TR      TR         b a r\n *\t\t |   |   |- element TD (l)                       TD      TD\n *\t\t |   |       |- \"aaa\"                          a]a a    b b b\n *\t\t |   |- element TR (l)\n *\t\t |   |   |- element TD (l)                           ||\n *\t\t |   |       |- \"bbb\"                                ||\n *\t\t |- element P2                                       VV\n *\t\t |   |- \"bar\"\n *\t\t                                                   root\n *\t\t                                        P1         TABLE]            P2\n *\t\t                                       f o[o     TR      TR         b a r\n *\t\t                                                 TD      TD\n *\t\t                                               a a a    b b b\n *\n * In the example above, the TABLE, TR and TD are defined as `isLimit=true` in the schema. The range which is not contained within\n * a single limit element must be expanded to select the outermost limit element. The range end is inside the text node of the TD element.\n * As the TD element is a child of the TR and TABLE elements, where both are defined as `isLimit=true` in the schema, the range must be\n * expanded to select the whole TABLE element.\n *\n * **Note** If the selection contains multiple ranges, the method returns a minimal set of ranges that are not intersecting after expanding\n * them to select `isLimit=true` elements.\n *\n * @param {module:engine/model/model~Model} model\n */\nexport function injectSelectionPostFixer( model ) {\n\tmodel.document.registerPostFixer( writer => selectionPostFixer( writer, model ) );\n}\n\n// The selection post-fixer.\n//\n// @param {module:engine/model/writer~Writer} writer\n// @param {module:engine/model/model~Model} model\nfunction selectionPostFixer( writer, model ) {\n\tconst selection = model.document.selection;\n\tconst schema = model.schema;\n\n\tconst ranges = [];\n\n\tlet wasFixed = false;\n\n\tfor ( const modelRange of selection.getRanges() ) {\n\t\t// Go through all ranges in selection and try fixing each of them.\n\t\t// Those ranges might overlap but will be corrected later.\n\t\tconst correctedRange = tryFixingRange( modelRange, schema );\n\n\t\t// \"Selection fixing\" algorithms sometimes get lost. In consequence, it may happen\n\t\t// that a new range is returned but, in fact, it has the same positions as the original\n\t\t// range anyway. If this range is not discarded, a new selection will be set and that,\n\t\t// for instance, would destroy the selection attributes. Let's make sure that the post-fixer\n\t\t// actually worked first before setting a new selection.\n\t\t//\n\t\t// https://github.com/ckeditor/ckeditor5/issues/6693\n\t\tif ( correctedRange && !correctedRange.isEqual( modelRange ) ) {\n\t\t\tranges.push( correctedRange );\n\t\t\twasFixed = true;\n\t\t} else {\n\t\t\tranges.push( modelRange );\n\t\t}\n\t}\n\n\t// If any of ranges were corrected update the selection.\n\tif ( wasFixed ) {\n\t\twriter.setSelection( mergeIntersectingRanges( ranges ), { backward: selection.isBackward } );\n\t}\n}\n\n// Tries fixing a range if it's incorrect.\n//\n// @param {module:engine/model/range~Range} range\n// @param {module:engine/model/schema~Schema} schema\n// @returns {module:engine/model/range~Range|null} Returns fixed range or null if range is valid.\nfunction tryFixingRange( range, schema ) {\n\tif ( range.isCollapsed ) {\n\t\treturn tryFixingCollapsedRange( range, schema );\n\t}\n\n\treturn tryFixingNonCollapsedRage( range, schema );\n}\n\n// Tries to fix collapsed ranges.\n//\n// * Fixes situation when a range is in a place where $text is not allowed\n//\n// @param {module:engine/model/range~Range} range Collapsed range to fix.\n// @param {module:engine/model/schema~Schema} schema\n// @returns {module:engine/model/range~Range|null} Returns fixed range or null if range is valid.\nfunction tryFixingCollapsedRange( range, schema ) {\n\tconst originalPosition = range.start;\n\n\tconst nearestSelectionRange = schema.getNearestSelectionRange( originalPosition );\n\n\t// This might be null ie when editor data is empty.\n\t// In such cases there is no need to fix the selection range.\n\tif ( !nearestSelectionRange ) {\n\t\treturn null;\n\t}\n\n\tif ( !nearestSelectionRange.isCollapsed ) {\n\t\treturn nearestSelectionRange;\n\t}\n\n\tconst fixedPosition = nearestSelectionRange.start;\n\n\t// Fixed position is the same as original - no need to return corrected range.\n\tif ( originalPosition.isEqual( fixedPosition ) ) {\n\t\treturn null;\n\t}\n\n\treturn new Range( fixedPosition );\n}\n\n// Tries to fix an expanded range.\n//\n// @param {module:engine/model/range~Range} range Expanded range to fix.\n// @param {module:engine/model/schema~Schema} schema\n// @returns {module:engine/model/range~Range|null} Returns fixed range or null if range is valid.\nfunction tryFixingNonCollapsedRage( range, schema ) {\n\tconst { start, end } = range;\n\n\tconst isTextAllowedOnStart = schema.checkChild( start, '$text' );\n\tconst isTextAllowedOnEnd = schema.checkChild( end, '$text' );\n\n\tconst startLimitElement = schema.getLimitElement( start );\n\tconst endLimitElement = schema.getLimitElement( end );\n\n\t// Ranges which both end are inside the same limit element (or root) might needs only minor fix.\n\tif ( startLimitElement === endLimitElement ) {\n\t\t// Range is valid when both position allows to place a text:\n\t\t// - <block>f[oobarba]z</block>\n\t\t// This would be \"fixed\" by a next check but as it will be the same it's better to return null so the selection stays the same.\n\t\tif ( isTextAllowedOnStart && isTextAllowedOnEnd ) {\n\t\t\treturn null;\n\t\t}\n\n\t\t// Range that is on non-limit element (or is partially) must be fixed so it is placed inside the block around $text:\n\t\t// - [<block>foo</block>]    ->    <block>[foo]</block>\n\t\t// - [<block>foo]</block>    ->    <block>[foo]</block>\n\t\t// - <block>f[oo</block>]    ->    <block>f[oo]</block>\n\t\t// - [<block>foo</block><selectable></selectable>]    ->    <block>[foo</block><selectable></selectable>]\n\t\tif ( checkSelectionOnNonLimitElements( start, end, schema ) ) {\n\t\t\tconst isStartBeforeSelectable = start.nodeAfter && schema.isSelectable( start.nodeAfter );\n\t\t\tconst fixedStart = isStartBeforeSelectable ? null : schema.getNearestSelectionRange( start, 'forward' );\n\n\t\t\tconst isEndAfterSelectable = end.nodeBefore && schema.isSelectable( end.nodeBefore );\n\t\t\tconst fixedEnd = isEndAfterSelectable ? null : schema.getNearestSelectionRange( end, 'backward' );\n\n\t\t\t// The schema.getNearestSelectionRange might return null - if that happens use original position.\n\t\t\tconst rangeStart = fixedStart ? fixedStart.start : start;\n\t\t\tconst rangeEnd = fixedEnd ? fixedEnd.end : end;\n\n\t\t\treturn new Range( rangeStart, rangeEnd );\n\t\t}\n\t}\n\n\tconst isStartInLimit = startLimitElement && !startLimitElement.is( 'rootElement' );\n\tconst isEndInLimit = endLimitElement && !endLimitElement.is( 'rootElement' );\n\n\t// At this point we eliminated valid positions on text nodes so if one of range positions is placed inside a limit element\n\t// then the range crossed limit element boundaries and needs to be fixed.\n\tif ( isStartInLimit || isEndInLimit ) {\n\t\tconst bothInSameParent = ( start.nodeAfter && end.nodeBefore ) && start.nodeAfter.parent === end.nodeBefore.parent;\n\n\t\tconst expandStart = isStartInLimit && ( !bothInSameParent || !isSelectable( start.nodeAfter, schema ) );\n\t\tconst expandEnd = isEndInLimit && ( !bothInSameParent || !isSelectable( end.nodeBefore, schema ) );\n\n\t\t// Although we've already found limit element on start/end positions we must find the outer-most limit element.\n\t\t// as limit elements might be nested directly inside (ie table > tableRow > tableCell).\n\t\tlet fixedStart = start;\n\t\tlet fixedEnd = end;\n\n\t\tif ( expandStart ) {\n\t\t\tfixedStart = Position._createBefore( findOutermostLimitAncestor( startLimitElement, schema ) );\n\t\t}\n\n\t\tif ( expandEnd ) {\n\t\t\tfixedEnd = Position._createAfter( findOutermostLimitAncestor( endLimitElement, schema ) );\n\t\t}\n\n\t\treturn new Range( fixedStart, fixedEnd );\n\t}\n\n\t// Range was not fixed at this point so it is valid - ie it was placed around limit element already.\n\treturn null;\n}\n\n// Finds the outer-most ancestor.\n//\n// @param {module:engine/model/node~Node} startingNode\n// @param {module:engine/model/schema~Schema} schema\n// @param {String} expandToDirection Direction of expansion - either 'start' or 'end' of the range.\n// @returns {module:engine/model/node~Node}\nfunction findOutermostLimitAncestor( startingNode, schema ) {\n\tlet isLimitNode = startingNode;\n\tlet parent = isLimitNode;\n\n\t// Find outer most isLimit block as such blocks might be nested (ie. in tables).\n\twhile ( schema.isLimit( parent ) && parent.parent ) {\n\t\tisLimitNode = parent;\n\t\tparent = parent.parent;\n\t}\n\n\treturn isLimitNode;\n}\n\n// Checks whether any of range boundaries is placed around non-limit elements.\n//\n// @param {module:engine/model/position~Position} start\n// @param {module:engine/model/position~Position} end\n// @param {module:engine/model/schema~Schema} schema\n// @returns {Boolean}\nfunction checkSelectionOnNonLimitElements( start, end, schema ) {\n\tconst startIsOnBlock = ( start.nodeAfter && !schema.isLimit( start.nodeAfter ) ) || schema.checkChild( start, '$text' );\n\tconst endIsOnBlock = ( end.nodeBefore && !schema.isLimit( end.nodeBefore ) ) || schema.checkChild( end, '$text' );\n\n\t// We should fix such selection when one of those nodes needs fixing.\n\treturn startIsOnBlock || endIsOnBlock;\n}\n\n// Returns a minimal non-intersecting array of ranges.\n//\n// @param {Array.<module:engine/model/range~Range>} ranges\n// @returns {Array.<module:engine/model/range~Range>}\nfunction mergeIntersectingRanges( ranges ) {\n\tconst nonIntersectingRanges = [];\n\n\t// First range will always be fine.\n\tnonIntersectingRanges.push( ranges.shift() );\n\n\tfor ( const range of ranges ) {\n\t\tconst previousRange = nonIntersectingRanges.pop();\n\n\t\tif ( range.isEqual( previousRange ) ) {\n\t\t\t// Use only one of two identical ranges.\n\t\t\tnonIntersectingRanges.push( previousRange );\n\t\t} else if ( range.isIntersecting( previousRange ) ) {\n\t\t\t// Get the sum of two ranges.\n\t\t\tconst start = previousRange.start.isAfter( range.start ) ? range.start : previousRange.start;\n\t\t\tconst end = previousRange.end.isAfter( range.end ) ? previousRange.end : range.end;\n\n\t\t\tconst merged = new Range( start, end );\n\t\t\tnonIntersectingRanges.push( merged );\n\t\t} else {\n\t\t\tnonIntersectingRanges.push( previousRange );\n\t\t\tnonIntersectingRanges.push( range );\n\t\t}\n\t}\n\n\treturn nonIntersectingRanges;\n}\n\n// Checks if node exists and if it's a selectable.\n//\n// @param {module:engine/model/node~Node} node\n// @param {module:engine/model/schema~Schema} schema\n// @returns {Boolean}\nfunction isSelectable( node, schema ) {\n\treturn node && schema.isSelectable( node );\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/model\n */\n\nimport Batch from './batch';\nimport Writer from './writer';\nimport Schema from './schema';\nimport Document from './document';\nimport MarkerCollection from './markercollection';\nimport ObservableMixin from '@ckeditor/ckeditor5-utils/src/observablemixin';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\nimport ModelElement from './element';\nimport ModelRange from './range';\nimport ModelPosition from './position';\nimport ModelSelection from './selection';\nimport OperationFactory from './operation/operationfactory';\n\nimport insertContent from './utils/insertcontent';\nimport deleteContent from './utils/deletecontent';\nimport modifySelection from './utils/modifyselection';\nimport getSelectedContent from './utils/getselectedcontent';\nimport { injectSelectionPostFixer } from './utils/selection-post-fixer';\nimport { autoParagraphEmptyRoots } from './utils/autoparagraphing';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n\n// @if CK_DEBUG_ENGINE // const { dumpTrees } = require( '../dev-utils/utils' );\n// @if CK_DEBUG_ENGINE // const { OperationReplayer } = require( '../dev-utils/operationreplayer' ).default;\n\n/**\n * Editor's data model. Read about the model in the\n * {@glink framework/guides/architecture/editing-engine engine architecture guide}.\n *\n * @mixes module:utils/observablemixin~ObservableMixin\n */\nexport default class Model {\n\tconstructor() {\n\t\t/**\n\t\t * Model's marker collection.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/model/markercollection~MarkerCollection}\n\t\t */\n\t\tthis.markers = new MarkerCollection();\n\n\t\t/**\n\t\t * Model's document.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/model/document~Document}\n\t\t */\n\t\tthis.document = new Document( this );\n\n\t\t/**\n\t\t * Model's schema.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/model/schema~Schema}\n\t\t */\n\t\tthis.schema = new Schema();\n\n\t\t/**\n\t\t * All callbacks added by {@link module:engine/model/model~Model#change} or\n\t\t * {@link module:engine/model/model~Model#enqueueChange} methods waiting to be executed.\n\t\t *\n\t\t * @private\n\t\t * @type {Array.<Function>}\n\t\t */\n\t\tthis._pendingChanges = [];\n\n\t\t/**\n\t\t * The last created and currently used writer instance.\n\t\t *\n\t\t * @private\n\t\t * @member {module:engine/model/writer~Writer}\n\t\t */\n\t\tthis._currentWriter = null;\n\n\t\t[ 'insertContent', 'deleteContent', 'modifySelection', 'getSelectedContent', 'applyOperation' ]\n\t\t\t.forEach( methodName => this.decorate( methodName ) );\n\n\t\t// Adding operation validation with `highest` priority, so it is called before any other feature would like\n\t\t// to do anything with the operation. If the operation has incorrect parameters it should throw on the earliest occasion.\n\t\tthis.on( 'applyOperation', ( evt, args ) => {\n\t\t\tconst operation = args[ 0 ];\n\n\t\t\toperation._validate();\n\t\t}, { priority: 'highest' } );\n\n\t\t// Register some default abstract entities.\n\t\tthis.schema.register( '$root', {\n\t\t\tisLimit: true\n\t\t} );\n\t\tthis.schema.register( '$block', {\n\t\t\tallowIn: '$root',\n\t\t\tisBlock: true\n\t\t} );\n\t\tthis.schema.register( '$text', {\n\t\t\tallowIn: '$block',\n\t\t\tisInline: true,\n\t\t\tisContent: true\n\t\t} );\n\t\tthis.schema.register( '$clipboardHolder', {\n\t\t\tallowContentOf: '$root',\n\t\t\tisLimit: true\n\t\t} );\n\t\tthis.schema.extend( '$text', { allowIn: '$clipboardHolder' } );\n\n\t\t// An element needed by the `upcastElementToMarker` converter.\n\t\t// This element temporarily represents a marker boundary during the conversion process and is removed\n\t\t// at the end of the conversion. `UpcastDispatcher` or at least `Conversion` class looks like a\n\t\t// better place for this registration but both know nothing about `Schema`.\n\t\tthis.schema.register( '$marker' );\n\t\tthis.schema.addChildCheck( ( context, childDefinition ) => {\n\t\t\tif ( childDefinition.name === '$marker' ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t} );\n\n\t\tinjectSelectionPostFixer( this );\n\n\t\t// Post-fixer which takes care of adding empty paragraph elements to the empty roots.\n\t\tthis.document.registerPostFixer( autoParagraphEmptyRoots );\n\n\t\t// @if CK_DEBUG_ENGINE // this.on( 'applyOperation', () => {\n\t\t// @if CK_DEBUG_ENGINE // \tdumpTrees( this.document, this.document.version );\n\t\t// @if CK_DEBUG_ENGINE // }, { priority: 'lowest' } );\n\t}\n\n\t/**\n\t * The `change()` method is the primary way of changing the model. You should use it to modify all document nodes\n\t * (including detached nodes – i.e. nodes not added to the {@link module:engine/model/model~Model#document model document}),\n\t * the {@link module:engine/model/document~Document#selection document's selection}, and\n\t * {@link module:engine/model/model~Model#markers model markers}.\n\t *\n\t *\t\tmodel.change( writer => {\n\t *\t\t\twriter.insertText( 'foo', paragraph, 'end' );\n\t *\t\t} );\n\t *\n\t * All changes inside the change block use the same {@link module:engine/model/batch~Batch} so they are combined\n\t * into a single undo step.\n\t *\n\t *\t\tmodel.change( writer => {\n\t *\t\t\twriter.insertText( 'foo', paragraph, 'end' ); // foo.\n\t *\n\t *\t\t\tmodel.change( writer => {\n\t *\t\t\t\twriter.insertText( 'bar', paragraph, 'end' ); // foobar.\n\t *\t\t\t} );\n\t *\n\t * \t\t\twriter.insertText( 'bom', paragraph, 'end' ); // foobarbom.\n\t *\t\t} );\n\t *\n\t * The callback of the `change()` block is executed synchronously.\n\t *\n\t * You can also return a value from the change block.\n\t *\n\t *\t\tconst img = model.change( writer => {\n\t *\t\t\treturn writer.createElement( 'img' );\n\t *\t\t} );\n\t *\n\t * @see #enqueueChange\n\t * @param {Function} callback Callback function which may modify the model.\n\t * @returns {*} Value returned by the callback.\n\t */\n\tchange( callback ) {\n\t\ttry {\n\t\t\tif ( this._pendingChanges.length === 0 ) {\n\t\t\t\t// If this is the outermost block, create a new batch and start `_runPendingChanges` execution flow.\n\t\t\t\tthis._pendingChanges.push( { batch: new Batch(), callback } );\n\n\t\t\t\treturn this._runPendingChanges()[ 0 ];\n\t\t\t} else {\n\t\t\t\t// If this is not the outermost block, just execute the callback.\n\t\t\t\treturn callback( this._currentWriter );\n\t\t\t}\n\t\t} catch ( err ) {\n\t\t\t// @if CK_DEBUG // throw err;\n\t\t\t/* istanbul ignore next */\n\t\t\tCKEditorError.rethrowUnexpectedError( err, this );\n\t\t}\n\t}\n\n\t/**\n\t * The `enqueueChange()` method performs similar task as the {@link #change `change()` method}, with two major differences.\n\t *\n\t * First, the callback of `enqueueChange()` is executed when all other enqueued changes are done. It might be executed\n\t * immediately if it is not nested in any other change block, but if it is nested in another (enqueue)change block,\n\t * it will be delayed and executed after the outermost block.\n\t *\n\t *\t\tmodel.change( writer => {\n\t *\t\t\tconsole.log( 1 );\n\t *\n\t *\t\t\tmodel.enqueueChange( writer => {\n\t *\t\t\t\tconsole.log( 2 );\n\t *\t\t\t} );\n\t *\n\t * \t\t\tconsole.log( 3 );\n\t *\t\t} ); // Will log: 1, 3, 2.\n\t *\n\t * In addition to that, the changes enqueued with `enqueueChange()` will be converted separately from the changes\n\t * done in the outer `change()` block.\n\t *\n\t * Second, it lets you define the {@link module:engine/model/batch~Batch} into which you want to add your changes.\n\t * By default, a new batch is created. In the sample above, `change` and `enqueueChange` blocks use a different\n\t * batch (and different {@link module:engine/model/writer~Writer} since each of them operates on the separate batch).\n\t *\n\t * When using the `enqueueChange()` block you can also add some changes to the batch you used before.\n\t *\n\t *\t\tmodel.enqueueChange( batch, writer => {\n\t *\t\t\twriter.insertText( 'foo', paragraph, 'end' );\n\t *\t\t} );\n\t *\n\t * In order to make a nested `enqueueChange()` create a single undo step together with the changes done in the outer `change()`\n\t * block, you can obtain the batch instance from the  {@link module:engine/model/writer~Writer#batch writer} of the outer block.\n\t *\n\t * @param {module:engine/model/batch~Batch|'transparent'|'default'} batchOrType Batch or batch type should be used in the callback.\n\t * If not defined, a new batch will be created.\n\t * @param {Function} callback Callback function which may modify the model.\n\t */\n\tenqueueChange( batchOrType, callback ) {\n\t\ttry {\n\t\t\tif ( typeof batchOrType === 'string' ) {\n\t\t\t\tbatchOrType = new Batch( batchOrType );\n\t\t\t} else if ( typeof batchOrType == 'function' ) {\n\t\t\t\tcallback = batchOrType;\n\t\t\t\tbatchOrType = new Batch();\n\t\t\t}\n\n\t\t\tthis._pendingChanges.push( { batch: batchOrType, callback } );\n\n\t\t\tif ( this._pendingChanges.length == 1 ) {\n\t\t\t\tthis._runPendingChanges();\n\t\t\t}\n\t\t} catch ( err ) {\n\t\t\t// @if CK_DEBUG // throw err;\n\t\t\t/* istanbul ignore next */\n\t\t\tCKEditorError.rethrowUnexpectedError( err, this );\n\t\t}\n\t}\n\n\t/**\n\t * {@link module:utils/observablemixin~ObservableMixin#decorate Decorated} function for applying\n\t * {@link module:engine/model/operation/operation~Operation operations} to the model.\n\t *\n\t * This is a low-level way of changing the model. It is exposed for very specific use cases (like the undo feature).\n\t * Normally, to modify the model, you will want to use {@link module:engine/model/writer~Writer `Writer`}.\n\t * See also {@glink framework/guides/architecture/editing-engine#changing-the-model Changing the model} section\n\t * of the {@glink framework/guides/architecture/editing-engine Editing architecture} guide.\n\t *\n\t * @param {module:engine/model/operation/operation~Operation} operation The operation to apply.\n\t */\n\tapplyOperation( operation ) {\n\t\t// @if CK_DEBUG_ENGINE // console.log( 'Applying ' + operation );\n\n\t\t// @if CK_DEBUG_ENGINE // if ( !this._operationLogs ) {\n\t\t// @if CK_DEBUG_ENGINE //\tthis._operationLogs = [];\n\t\t// @if CK_DEBUG_ENGINE // }\n\n\t\t// @if CK_DEBUG_ENGINE // this._operationLogs.push( JSON.stringify( operation ) );\n\n\t\t// @if CK_DEBUG_ENGINE //if ( !this._appliedOperations ) {\n\t\t// @if CK_DEBUG_ENGINE //\tthis._appliedOperations = [];\n\t\t// @if CK_DEBUG_ENGINE //}\n\n\t\t// @if CK_DEBUG_ENGINE //this._appliedOperations.push( operation );\n\n\t\toperation._execute();\n\t}\n\n\t// @if CK_DEBUG_ENGINE // getAppliedOperation() {\n\t// @if CK_DEBUG_ENGINE //\tif ( !this._appliedOperations ) {\n\t// @if CK_DEBUG_ENGINE //\t\treturn '';\n\t// @if CK_DEBUG_ENGINE //\t}\n\n\t// @if CK_DEBUG_ENGINE //\treturn this._appliedOperations.map( JSON.stringify ).join( '-------' );\n\t// @if CK_DEBUG_ENGINE // }\n\n\t// @if CK_DEBUG_ENGINE // createReplayer( stringifiedOperations ) {\n\t// @if CK_DEBUG_ENGINE //\treturn new OperationReplayer( this, '-------', stringifiedOperations );\n\t// @if CK_DEBUG_ENGINE // }\n\n\t/**\n\t * Inserts content at the position in the editor specified by the selection, as one would expect the paste\n\t * functionality to work.\n\t *\n\t * This is a high-level method. It takes the {@link #schema schema} into consideration when inserting\n\t * the content, clears the given selection's content before inserting nodes and moves the selection\n\t * to its target position at the end of the process.\n\t * It can split elements, merge them, wrap bare text nodes with paragraphs, etc. &mdash; just like the\n\t * pasting feature should do.\n\t *\n\t * For lower-level methods see {@link module:engine/model/writer~Writer `Writer`}.\n\t *\n\t * This method, unlike {@link module:engine/model/writer~Writer `Writer`}'s methods, does not have to be used\n\t * inside a {@link #change `change()` block}.\n\t *\n\t * # Conversion and schema\n\t *\n\t * Inserting elements and text nodes into the model is not enough to make CKEditor 5 render that content\n\t * to the user. CKEditor 5 implements a model-view-controller architecture and what `model.insertContent()` does\n\t * is only adding nodes to the model. Additionally, you need to define\n\t * {@glink framework/guides/architecture/editing-engine#conversion converters} between the model and view\n\t * and define those nodes in the {@glink framework/guides/architecture/editing-engine#schema schema}.\n\t *\n\t * So, while this method may seem similar to CKEditor 4 `editor.insertHtml()` (in fact, both methods\n\t * are used for paste-like content insertion), the CKEditor 5 method cannot be use to insert arbitrary HTML\n\t * unless converters are defined for all elements and attributes in that HTML.\n\t *\n\t * # Examples\n\t *\n\t * Using `insertContent()` with a manually created model structure:\n\t *\n\t *\t\t// Let's create a document fragment containing such content as:\n\t *\t\t//\n\t *\t\t// <paragraph>foo</paragraph>\n\t *\t\t// <blockQuote>\n\t *\t\t//    <paragraph>bar</paragraph>\n\t *\t\t// </blockQuote>\n\t *\t\tconst docFrag = editor.model.change( writer => {\n\t *\t\t\tconst p1 = writer.createElement( 'paragraph' );\n\t *\t\t\tconst p2 = writer.createElement( 'paragraph' );\n\t *\t\t\tconst blockQuote = writer.createElement( 'blockQuote' );\n\t *\t\t\tconst docFrag = writer.createDocumentFragment();\n\t *\n\t *\t\t\twriter.append( p1, docFrag );\n\t *\t\t\twriter.append( blockQuote, docFrag );\n\t *\t\t\twriter.append( p2, blockQuote );\n\t *\t\t\twriter.insertText( 'foo', p1 );\n\t *\t\t\twriter.insertText( 'bar', p2 );\n\t *\n\t *\t\t\treturn docFrag;\n\t *\t\t} );\n\t *\n\t *\t\t// insertContent() does not have to be used in a change() block. It can, though,\n\t *\t\t// so this code could be moved to the callback defined above.\n\t *\t\teditor.model.insertContent( docFrag );\n\t *\n\t * Using `insertContent()` with an HTML string converted to a model document fragment (similar to the pasting mechanism):\n\t *\n\t *\t\t// You can create your own HtmlDataProcessor instance or use editor.data.processor\n\t *\t\t// if you have not overridden the default one (which is the HtmlDataProcessor instance).\n\t *\t\tconst htmlDP = new HtmlDataProcessor( viewDocument );\n\t *\n\t *\t\t// Convert an HTML string to a view document fragment:\n\t *\t\tconst viewFragment = htmlDP.toView( htmlString );\n\t *\n\t *\t\t// Convert the view document fragment to a model document fragment\n\t *\t\t// in the context of $root. This conversion takes the schema into\n\t *\t\t// account so if, for example, the view document fragment contained a bare text node,\n\t *\t\t// this text node cannot be a child of $root, so it will be automatically\n\t *\t\t// wrapped with a <paragraph>. You can define the context yourself (in the second parameter),\n\t *\t\t// and e.g. convert the content like it would happen in a <paragraph>.\n\t *\t\t// Note: The clipboard feature uses a custom context called $clipboardHolder\n\t *\t\t// which has a loosened schema.\n\t *\t\tconst modelFragment = editor.data.toModel( viewFragment );\n\t *\n\t *\t\teditor.model.insertContent( modelFragment );\n\t *\n\t * By default this method will use the document selection but it can also be used with a position, range or selection instance.\n\t *\n\t *\t\t// Insert text at the current document selection position.\n\t *\t\teditor.model.change( writer => {\n\t *\t\t\teditor.model.insertContent( writer.createText( 'x' ) );\n\t *\t\t} );\n\t *\n\t *\t\t// Insert text at a given position - the document selection will not be modified.\n\t *\t\teditor.model.change( writer => {\n\t *\t\t\teditor.model.insertContent( writer.createText( 'x' ), doc.getRoot(), 2 );\n\t *\n\t *\t\t\t// Which is a shorthand for:\n\t *\t\t\teditor.model.insertContent( writer.createText( 'x' ), writer.createPositionAt( doc.getRoot(), 2 ) );\n\t *\t\t} );\n\t *\n\t * If you want the document selection to be moved to the inserted content, use the\n\t * {@link module:engine/model/writer~Writer#setSelection `setSelection()`} method of the writer after inserting\n\t * the content:\n\t *\n\t *\t\teditor.model.change( writer => {\n\t *\t\t\tconst paragraph = writer.createElement( 'paragraph' );\n\t *\n\t *\t\t\t// Insert an empty paragraph at the beginning of the root.\n\t *\t\t\teditor.model.insertContent( paragraph, writer.createPositionAt( editor.model.document.getRoot(), 0 ) );\n\t *\n\t *\t\t\t// Move the document selection to the inserted paragraph.\n\t *\t\t\twriter.setSelection( paragraph, 'in' );\n\t *\t\t} );\n\t *\n\t * If an instance of the {@link module:engine/model/selection~Selection model selection} is passed as `selectable`,\n\t * the new content will be inserted at the passed selection (instead of document selection):\n\t *\n\t *\t\teditor.model.change( writer => {\n\t *\t\t\t// Create a selection in a paragraph that will be used as a place of insertion.\n\t *\t\t\tconst selection = writer.createSelection( paragraph, 'in' );\n\t *\n\t *\t\t\t// Insert the new text at the created selection.\n\t *\t\t\teditor.model.insertContent( writer.createText( 'x' ), selection );\n\t *\n\t *\t\t\t// insertContent() modifies the passed selection instance so it can be used to set the document selection.\n\t *\t\t\t// Note: This is not necessary when you passed the document selection to insertContent().\n\t *\t\t\twriter.setSelection( selection );\n\t *\t\t} );\n\t *\n\t * @fires insertContent\n\t * @param {module:engine/model/documentfragment~DocumentFragment|module:engine/model/item~Item} content The content to insert.\n\t * @param {module:engine/model/selection~Selectable} [selectable=model.document.selection]\n\t * The selection into which the content should be inserted. If not provided the current model document selection will be used.\n\t * @param {Number|'before'|'end'|'after'|'on'|'in'} [placeOrOffset] To be used when a model item was passed as `selectable`.\n\t * This param defines a position in relation to that item.\n\t * @returns {module:engine/model/range~Range} Range which contains all the performed changes. This is a range that, if removed,\n\t * would return the model to the state before the insertion. If no changes were preformed by `insertContent`, returns a range collapsed\n\t * at the insertion position.\n\t */\n\tinsertContent( content, selectable, placeOrOffset ) {\n\t\treturn insertContent( this, content, selectable, placeOrOffset );\n\t}\n\n\t/**\n\t * Deletes content of the selection and merge siblings. The resulting selection is always collapsed.\n\t *\n\t * **Note:** For the sake of predictability, the resulting selection should always be collapsed.\n\t * In cases where a feature wants to modify deleting behavior so selection isn't collapsed\n\t * (e.g. a table feature may want to keep row selection after pressing <kbd>Backspace</kbd>),\n\t * then that behavior should be implemented in the view's listener. At the same time, the table feature\n\t * will need to modify this method's behavior too, e.g. to \"delete contents and then collapse\n\t * the selection inside the last selected cell\" or \"delete the row and collapse selection somewhere near\".\n\t * That needs to be done in order to ensure that other features which use `deleteContent()` will work well with tables.\n\t *\n\t * @fires deleteContent\n\t * @param {module:engine/model/selection~Selection|module:engine/model/documentselection~DocumentSelection} selection\n\t * Selection of which the content should be deleted.\n\t * @param {Object} [options]\n\t * @param {Boolean} [options.leaveUnmerged=false] Whether to merge elements after removing the content of the selection.\n\t *\n\t * For example `<heading1>x[x</heading1><paragraph>y]y</paragraph>` will become:\n\t *\n\t * * `<heading1>x^y</heading1>` with the option disabled (`leaveUnmerged == false`)\n\t * * `<heading1>x^</heading1><paragraph>y</paragraph>` with enabled (`leaveUnmerged == true`).\n\t *\n\t * Note: {@link module:engine/model/schema~Schema#isObject object} and {@link module:engine/model/schema~Schema#isLimit limit}\n\t * elements will not be merged.\n\t *\n\t * @param {Boolean} [options.doNotResetEntireContent=false] Whether to skip replacing the entire content with a\n\t * paragraph when the entire content was selected.\n\t *\n\t * For example `<heading1>[x</heading1><paragraph>y]</paragraph>` will become:\n\t *\n\t * * `<paragraph>^</paragraph>` with the option disabled (`doNotResetEntireContent == false`)\n\t * * `<heading1>^</heading1>` with enabled (`doNotResetEntireContent == true`)\n\t *\n\t * @param {Boolean} [options.doNotAutoparagraph=false] Whether to create a paragraph if after content deletion selection is moved\n\t * to a place where text cannot be inserted.\n\t *\n\t * For example `<paragraph>x</paragraph>[<image src=\"foo.jpg\"></image>]` will become:\n\t *\n\t * * `<paragraph>x</paragraph><paragraph>[]</paragraph>` with the option disabled (`doNotAutoparagraph == false`)\n\t * * `<paragraph>x[]</paragraph>` with the option enabled (`doNotAutoparagraph == true`).\n\t *\n\t * **Note:** if there is no valid position for the selection, the paragraph will always be created:\n\t *\n\t * `[<image src=\"foo.jpg\"></image>]` -> `<paragraph>[]</paragraph>`.\n\t *\n\t * @param {'forward'|'backward'} [options.direction='backward'] The direction in which the content is being consumed.\n\t * Deleting backward corresponds to using the <kbd>Backspace</kbd> key, while deleting content forward corresponds to\n\t * the <kbd>Shift</kbd>+<kbd>Backspace</kbd> keystroke.\n\t */\n\tdeleteContent( selection, options ) {\n\t\tdeleteContent( this, selection, options );\n\t}\n\n\t/**\n\t * Modifies the selection. Currently, the supported modifications are:\n\t *\n\t * * Extending. The selection focus is moved in the specified `options.direction` with a step specified in `options.unit`.\n\t * Possible values for `unit` are:\n\t *  * `'character'` (default) - moves selection by one user-perceived character. In most cases this means moving by one\n\t *  character in `String` sense. However, unicode also defines \"combing marks\". These are special symbols, that combines\n\t *  with a symbol before it (\"base character\") to create one user-perceived character. For example, `q̣̇` is a normal\n\t *  letter `q` with two \"combining marks\": upper dot (`Ux0307`) and lower dot (`Ux0323`). For most actions, i.e. extending\n\t *  selection by one position, it is correct to include both \"base character\" and all of it's \"combining marks\". That is\n\t *  why `'character'` value is most natural and common method of modifying selection.\n\t *  * `'codePoint'` - moves selection by one unicode code point. In contrary to, `'character'` unit, this will insert\n\t *  selection between \"base character\" and \"combining mark\", because \"combining marks\" have their own unicode code points.\n\t *  However, for technical reasons, unicode code points with values above `UxFFFF` are represented in native `String` by\n\t *  two characters, called \"surrogate pairs\". Halves of \"surrogate pairs\" have a meaning only when placed next to each other.\n\t *  For example `𨭎` is represented in `String` by `\\uD862\\uDF4E`. Both `\\uD862` and `\\uDF4E` do not have any meaning\n\t *  outside the pair (are rendered as ? when alone). Position between them would be incorrect. In this case, selection\n\t *  extension will include whole \"surrogate pair\".\n\t *  * `'word'` - moves selection by a whole word.\n\t *\n\t * **Note:** if you extend a forward selection in a backward direction you will in fact shrink it.\n\t *\n\t * @fires modifySelection\n\t * @param {module:engine/model/selection~Selection|module:engine/model/documentselection~DocumentSelection} selection\n\t * The selection to modify.\n\t * @param {Object} [options]\n\t * @param {'forward'|'backward'} [options.direction='forward'] The direction in which the selection should be modified.\n\t * @param {'character'|'codePoint'|'word'} [options.unit='character'] The unit by which selection should be modified.\n\t */\n\tmodifySelection( selection, options ) {\n\t\tmodifySelection( this, selection, options );\n\t}\n\n\t/**\n\t * Gets a clone of the selected content.\n\t *\n\t * For example, for the following selection:\n\t *\n\t * ```html\n\t * <paragraph>x</paragraph>\n\t * <blockQuote>\n\t *\t<paragraph>y</paragraph>\n\t *\t<heading1>fir[st</heading1>\n\t * </blockQuote>\n\t * <paragraph>se]cond</paragraph>\n\t * <paragraph>z</paragraph>\n\t * ```\n\t *\n\t * It will return a document fragment with such a content:\n\t *\n\t * ```html\n\t * <blockQuote>\n\t *\t<heading1>st</heading1>\n\t * </blockQuote>\n\t * <paragraph>se</paragraph>\n\t * ```\n\t *\n\t * @fires getSelectedContent\n\t * @param {module:engine/model/selection~Selection|module:engine/model/documentselection~DocumentSelection} selection\n\t * The selection of which content will be returned.\n\t * @returns {module:engine/model/documentfragment~DocumentFragment}\n\t */\n\tgetSelectedContent( selection ) {\n\t\treturn getSelectedContent( this, selection );\n\t}\n\n\t/**\n\t * Checks whether the given {@link module:engine/model/range~Range range} or\n\t * {@link module:engine/model/element~Element element} has any meaningful content.\n\t *\n\t * Meaningful content is:\n\t *\n\t * * any text node (`options.ignoreWhitespaces` allows controlling whether this text node must also contain\n\t * any non-whitespace characters),\n\t * * or any {@link module:engine/model/schema~Schema#isContent content element},\n\t * * or any {@link module:engine/model/markercollection~Marker marker} which\n\t * {@link module:engine/model/markercollection~Marker#_affectsData affects data}.\n\t *\n\t * This means that a range containing an empty `<paragraph></paragraph>` is not considered to have a meaningful content.\n\t * However, a range containing an `<image></image>` (which would normally be marked in the schema as an object element)\n\t * is considered non-empty.\n\t *\n\t * @param {module:engine/model/range~Range|module:engine/model/element~Element} rangeOrElement Range or element to check.\n\t * @param {Object} [options]\n\t * @param {Boolean} [options.ignoreWhitespaces] Whether text node with whitespaces only should be considered empty.\n\t * @param {Boolean} [options.ignoreMarkers] Whether markers should be ignored.\n\t * @returns {Boolean}\n\t */\n\thasContent( rangeOrElement, options = {} ) {\n\t\tconst range = rangeOrElement instanceof ModelElement ? ModelRange._createIn( rangeOrElement ) : rangeOrElement;\n\n\t\tif ( range.isCollapsed ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst { ignoreWhitespaces = false, ignoreMarkers = false } = options;\n\n\t\t// Check if there are any markers which affects data in this given range.\n\t\tif ( !ignoreMarkers ) {\n\t\t\tfor ( const intersectingMarker of this.markers.getMarkersIntersectingRange( range ) ) {\n\t\t\t\tif ( intersectingMarker.affectsData ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor ( const item of range.getItems() ) {\n\t\t\tif ( this.schema.isContent( item ) ) {\n\t\t\t\tif ( item.is( '$textProxy' ) ) {\n\t\t\t\t\tif ( !ignoreWhitespaces ) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t} else if ( item.data.search( /\\S/ ) !== -1 ) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * Creates a position from the given root and path in that root.\n\t *\n\t * Note: This method is also available as\n\t * {@link module:engine/model/writer~Writer#createPositionFromPath `Writer#createPositionFromPath()`}.\n\t *\n\t * @param {module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment} root Root of the position.\n\t * @param {Array.<Number>} path Position path. See {@link module:engine/model/position~Position#path}.\n\t * @param {module:engine/model/position~PositionStickiness} [stickiness='toNone'] Position stickiness.\n\t * See {@link module:engine/model/position~PositionStickiness}.\n\t * @returns {module:engine/model/position~Position}\n\t */\n\tcreatePositionFromPath( root, path, stickiness ) {\n\t\treturn new ModelPosition( root, path, stickiness );\n\t}\n\n\t/**\n\t * Creates position at the given location. The location can be specified as:\n\t *\n\t * * a {@link module:engine/model/position~Position position},\n\t * * a parent element and offset in that element,\n\t * * a parent element and `'end'` (the position will be set at the end of that element),\n\t * * a {@link module:engine/model/item~Item model item} and `'before'` or `'after'`\n\t * (the position will be set before or after the given model item).\n\t *\n\t * This method is a shortcut to other factory methods such as:\n\t *\n\t * * {@link module:engine/model/model~Model#createPositionBefore `createPositionBefore()`},\n\t * * {@link module:engine/model/model~Model#createPositionAfter `createPositionAfter()`}.\n\t *\n\t * Note: This method is also available as\n\t * {@link module:engine/model/writer~Writer#createPositionAt `Writer#createPositionAt()`},\n\t *\n\t * @param {module:engine/model/item~Item|module:engine/model/position~Position} itemOrPosition\n\t * @param {Number|'end'|'before'|'after'} [offset] Offset or one of the flags. Used only when\n\t * first parameter is a {@link module:engine/model/item~Item model item}.\n\t */\n\tcreatePositionAt( itemOrPosition, offset ) {\n\t\treturn ModelPosition._createAt( itemOrPosition, offset );\n\t}\n\n\t/**\n\t * Creates a new position after the given {@link module:engine/model/item~Item model item}.\n\t *\n\t * Note: This method is also available as\n\t * {@link module:engine/model/writer~Writer#createPositionAfter `Writer#createPositionAfter()`}.\n\t *\n\t * @param {module:engine/model/item~Item} item Item after which the position should be placed.\n\t * @returns {module:engine/model/position~Position}\n\t */\n\tcreatePositionAfter( item ) {\n\t\treturn ModelPosition._createAfter( item );\n\t}\n\n\t/**\n\t * Creates a new position before the given {@link module:engine/model/item~Item model item}.\n\t *\n\t * Note: This method is also available as\n\t * {@link module:engine/model/writer~Writer#createPositionBefore `Writer#createPositionBefore()`}.\n\t *\n\t * @param {module:engine/model/item~Item} item Item before which the position should be placed.\n\t * @returns {module:engine/model/position~Position}\n\t */\n\tcreatePositionBefore( item ) {\n\t\treturn ModelPosition._createBefore( item );\n\t}\n\n\t/**\n\t * Creates a range spanning from the `start` position to the `end` position.\n\t *\n\t * Note: This method is also available as\n\t * {@link module:engine/model/writer~Writer#createRange `Writer#createRange()`}:\n\t *\n\t *\t\tmodel.change( writer => {\n\t *\t\t\tconst range = writer.createRange( start, end );\n\t *\t\t} );\n\t *\n\t * @param {module:engine/model/position~Position} start Start position.\n\t * @param {module:engine/model/position~Position} [end] End position. If not set, the range will be collapsed\n\t * to the `start` position.\n\t * @returns {module:engine/model/range~Range}\n\t */\n\tcreateRange( start, end ) {\n\t\treturn new ModelRange( start, end );\n\t}\n\n\t/**\n\t * Creates a range inside the given element which starts before the first child of\n\t * that element and ends after the last child of that element.\n\t *\n\t * Note: This method is also available as\n\t * {@link module:engine/model/writer~Writer#createRangeIn `Writer#createRangeIn()`}:\n\t *\n\t *\t\tmodel.change( writer => {\n\t *\t\t\tconst range = writer.createRangeIn( paragraph );\n\t *\t\t} );\n\t *\n\t * @param {module:engine/model/element~Element} element Element which is a parent for the range.\n\t * @returns {module:engine/model/range~Range}\n\t */\n\tcreateRangeIn( element ) {\n\t\treturn ModelRange._createIn( element );\n\t}\n\n\t/**\n\t * Creates a range that starts before the given {@link module:engine/model/item~Item model item} and ends after it.\n\t *\n\t * Note: This method is also available on `writer` instance as\n\t * {@link module:engine/model/writer~Writer#createRangeOn `Writer.createRangeOn()`}:\n\t *\n\t *\t\tmodel.change( writer => {\n\t *\t\t\tconst range = writer.createRangeOn( paragraph );\n\t *\t\t} );\n\t *\n\t * @param {module:engine/model/item~Item} item\n\t * @returns {module:engine/model/range~Range}\n\t */\n\tcreateRangeOn( item ) {\n\t\treturn ModelRange._createOn( item );\n\t}\n\n\t/**\n\t * Creates a new selection instance based on the given {@link module:engine/model/selection~Selectable selectable}\n\t * or creates an empty selection if no arguments were passed.\n\t *\n\t * Note: This method is also available as\n\t * {@link module:engine/model/writer~Writer#createSelection `Writer#createSelection()`}.\n\t *\n\t *\t\t// Creates empty selection without ranges.\n\t *\t\tconst selection = writer.createSelection();\n\t *\n\t *\t\t// Creates selection at the given range.\n\t *\t\tconst range = writer.createRange( start, end );\n\t *\t\tconst selection = writer.createSelection( range );\n\t *\n\t *\t\t// Creates selection at the given ranges\n\t *\t\tconst ranges = [ writer.createRange( start1, end2 ), writer.createRange( star2, end2 ) ];\n\t *\t\tconst selection = writer.createSelection( ranges );\n\t *\n\t *\t\t// Creates selection from the other selection.\n\t *\t\t// Note: It doesn't copies selection attributes.\n\t *\t\tconst otherSelection = writer.createSelection();\n\t *\t\tconst selection = writer.createSelection( otherSelection );\n\t *\n\t *\t\t// Creates selection from the given document selection.\n\t *\t\t// Note: It doesn't copies selection attributes.\n\t *\t\tconst documentSelection = model.document.selection;\n\t *\t\tconst selection = writer.createSelection( documentSelection );\n\t *\n\t *\t\t// Creates selection at the given position.\n\t *\t\tconst position = writer.createPositionFromPath( root, path );\n\t *\t\tconst selection = writer.createSelection( position );\n\t *\n\t *\t\t// Creates selection at the given offset in the given element.\n\t *\t\tconst paragraph = writer.createElement( 'paragraph' );\n\t *\t\tconst selection = writer.createSelection( paragraph, offset );\n\t *\n\t *\t\t// Creates a range inside an {@link module:engine/model/element~Element element} which starts before the\n\t *\t\t// first child of that element and ends after the last child of that element.\n\t *\t\tconst selection = writer.createSelection( paragraph, 'in' );\n\t *\n\t *\t\t// Creates a range on an {@link module:engine/model/item~Item item} which starts before the item and ends\n\t *\t\t// just after the item.\n\t *\t\tconst selection = writer.createSelection( paragraph, 'on' );\n\t *\n\t *\t\t// Additional options (`'backward'`) can be specified as the last argument.\n\t *\n\t *\t\t// Creates backward selection.\n\t *\t\tconst selection = writer.createSelection( range, { backward: true } );\n\t *\n\t * @param {module:engine/model/selection~Selectable} selectable\n\t * @param {Number|'before'|'end'|'after'|'on'|'in'} [placeOrOffset] Sets place or offset of the selection.\n\t * @param {Object} [options]\n\t * @param {Boolean} [options.backward] Sets this selection instance to be backward.\n\t * @returns {module:engine/model/selection~Selection}\n\t */\n\tcreateSelection( selectable, placeOrOffset, options ) {\n\t\treturn new ModelSelection( selectable, placeOrOffset, options );\n\t}\n\n\t/**\n\t * Creates a {@link module:engine/model/batch~Batch} instance.\n\t *\n\t * **Note:** In most cases creating a batch instance is not necessary as they are created when using:\n\t *\n\t * * {@link #change `change()`},\n\t * * {@link #enqueueChange `enqueueChange()`}.\n\t *\n\t * @param {'transparent'|'default'} [type='default'] The type of the batch.\n\t * @returns {module:engine/model/batch~Batch}\n\t */\n\tcreateBatch( type ) {\n\t\treturn new Batch( type );\n\t}\n\n\t/**\n\t * Creates an operation instance from a JSON object (parsed JSON string).\n\t *\n\t * This is an alias for {@link module:engine/model/operation/operationfactory~OperationFactory.fromJSON `OperationFactory.fromJSON()`}.\n\t *\n\t * @param {Object} json Deserialized JSON object.\n\t * @returns {module:engine/model/operation/operation~Operation}\n\t */\n\tcreateOperationFromJSON( json ) {\n\t\treturn OperationFactory.fromJSON( json, this.document );\n\t}\n\n\t/**\n\t * Removes all events listeners set by model instance and destroys {@link module:engine/model/document~Document}.\n\t */\n\tdestroy() {\n\t\tthis.document.destroy();\n\t\tthis.stopListening();\n\t}\n\n\t/**\n\t * Common part of {@link module:engine/model/model~Model#change} and {@link module:engine/model/model~Model#enqueueChange}\n\t * which calls callbacks and returns array of values returned by these callbacks.\n\t *\n\t * @private\n\t * @returns {Array.<*>} Array of values returned by callbacks.\n\t */\n\t_runPendingChanges() {\n\t\tconst ret = [];\n\n\t\tthis.fire( '_beforeChanges' );\n\n\t\twhile ( this._pendingChanges.length ) {\n\t\t\t// Create a new writer using batch instance created for this chain of changes.\n\t\t\tconst currentBatch = this._pendingChanges[ 0 ].batch;\n\t\t\tthis._currentWriter = new Writer( this, currentBatch );\n\n\t\t\t// Execute changes callback and gather the returned value.\n\t\t\tconst callbackReturnValue = this._pendingChanges[ 0 ].callback( this._currentWriter );\n\t\t\tret.push( callbackReturnValue );\n\n\t\t\tthis.document._handleChangeBlock( this._currentWriter );\n\n\t\t\tthis._pendingChanges.shift();\n\t\t\tthis._currentWriter = null;\n\t\t}\n\n\t\tthis.fire( '_afterChanges' );\n\n\t\treturn ret;\n\t}\n\n\t/**\n\t * Fired when entering the outermost {@link module:engine/model/model~Model#enqueueChange} or\n\t * {@link module:engine/model/model~Model#change} block.\n\t *\n\t * @protected\n\t * @event _beforeChanges\n\t */\n\n\t/**\n\t * Fired when leaving the outermost {@link module:engine/model/model~Model#enqueueChange} or\n\t * {@link module:engine/model/model~Model#change} block.\n\t *\n\t * @protected\n\t * @event _afterChanges\n\t */\n\n\t/**\n\t * Fired every time any {@link module:engine/model/operation/operation~Operation operation} is applied on the model\n\t * using {@link #applyOperation}.\n\t *\n\t * Note that this event is suitable only for very specific use-cases. Use it if you need to listen to every single operation\n\t * applied on the document. However, in most cases {@link module:engine/model/document~Document#event:change} should\n\t * be used.\n\t *\n\t * A few callbacks are already added to this event by engine internal classes:\n\t *\n\t * * with `highest` priority operation is validated,\n\t * * with `normal` priority operation is executed,\n\t * * with `low` priority the {@link module:engine/model/document~Document} updates its version,\n\t * * with `low` priority {@link module:engine/model/liveposition~LivePosition} and {@link module:engine/model/liverange~LiveRange}\n\t * update themselves.\n\t *\n\t * @event applyOperation\n\t * @param {Array} args Arguments of the `applyOperation` which is an array with a single element - applied\n\t * {@link module:engine/model/operation/operation~Operation operation}.\n\t */\n\n\t/**\n\t * Event fired when {@link #insertContent} method is called.\n\t *\n\t * The {@link #insertContent default action of that method} is implemented as a\n\t * listener to this event so it can be fully customized by the features.\n\t *\n\t * **Note** The `selectable` parameter for the {@link #insertContent} is optional. When `undefined` value is passed the method uses\n\t * `model.document.selection`.\n\t *\n\t * @event insertContent\n\t * @param {Array} args The arguments passed to the original method.\n\t */\n\n\t/**\n\t * Event fired when {@link #deleteContent} method is called.\n\t *\n\t * The {@link #deleteContent default action of that method} is implemented as a\n\t * listener to this event so it can be fully customized by the features.\n\t *\n\t * @event deleteContent\n\t * @param {Array} args The arguments passed to the original method.\n\t */\n\n\t/**\n\t * Event fired when {@link #modifySelection} method is called.\n\t *\n\t * The {@link #modifySelection default action of that method} is implemented as a\n\t * listener to this event so it can be fully customized by the features.\n\t *\n\t * @event modifySelection\n\t * @param {Array} args The arguments passed to the original method.\n\t */\n\n\t/**\n\t * Event fired when {@link #getSelectedContent} method is called.\n\t *\n\t * The {@link #getSelectedContent default action of that method} is implemented as a\n\t * listener to this event so it can be fully customized by the features.\n\t *\n\t * @event getSelectedContent\n\t * @param {Array} args The arguments passed to the original method.\n\t */\n}\n\nmix( Model, ObservableMixin );\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/keystrokehandler\n */\n\nimport DomEmitterMixin from './dom/emittermixin';\nimport { getCode, parseKeystroke } from './keyboard';\n\n/**\n * Keystroke handler allows registering callbacks for given keystrokes.\n *\n * The most frequent use of this class is through the {@link module:core/editor/editor~Editor#keystrokes `editor.keystrokes`}\n * property. It allows listening to keystrokes executed in the editing view:\n *\n *\t\teditor.keystrokes.set( 'Ctrl+A', ( keyEvtData, cancel ) => {\n *\t\t\tconsole.log( 'Ctrl+A has been pressed' );\n *\t\t\tcancel();\n *\t\t} );\n *\n * However, this utility class can be used in various part of the UI. For instance, a certain {@link module:ui/view~View}\n * can use it like this:\n *\n *\t\tclass MyView extends View {\n *\t\t\tconstructor() {\n *\t\t\t\tthis.keystrokes = new KeystrokeHandler();\n *\n * \t\t\t\tthis.keystrokes.set( 'tab', handleTabKey );\n *\t\t\t}\n *\n *\t\t\trender() {\n *\t\t\t\tsuper.render();\n *\n *\t\t\t\tthis.keystrokes.listenTo( this.element );\n *\t\t\t}\n *\t\t}\n *\n * That keystroke handler will listen to `keydown` events fired in this view's main element.\n *\n */\nexport default class KeystrokeHandler {\n\t/**\n\t * Creates an instance of the keystroke handler.\n\t */\n\tconstructor() {\n\t\t/**\n\t\t * Listener used to listen to events for easier keystroke handler destruction.\n\t\t *\n\t\t * @protected\n\t\t * @member {module:utils/dom/emittermixin~Emitter}\n\t\t */\n\t\tthis._listener = Object.create( DomEmitterMixin );\n\t}\n\n\t/**\n\t * Starts listening for `keydown` events from a given emitter.\n\t *\n\t * @param {module:utils/emittermixin~Emitter} emitter\n\t */\n\tlistenTo( emitter ) {\n\t\t// The #_listener works here as a kind of dispatcher. It groups the events coming from the same\n\t\t// keystroke so the listeners can be attached to them with different priorities.\n\t\t//\n\t\t// E.g. all the keystrokes with the `keyCode` of 42 coming from the `emitter` are propagated\n\t\t// as a `_keydown:42` event by the `_listener`. If there's a callback created by the `set`\n\t\t// method for this 42 keystroke, it listens to the `_listener#_keydown:42` event only and interacts\n\t\t// only with other listeners of this particular event, thus making it possible to prioritize\n\t\t// the listeners and safely cancel execution, when needed. Instead of duplicating the Emitter logic,\n\t\t// the KeystrokeHandler re–uses it to do its job.\n\t\tthis._listener.listenTo( emitter, 'keydown', ( evt, keyEvtData ) => {\n\t\t\tthis._listener.fire( '_keydown:' + getCode( keyEvtData ), keyEvtData );\n\t\t} );\n\t}\n\n\t/**\n\t * Registers a handler for the specified keystroke.\n\t *\n\t * @param {String|Array.<String|Number>} keystroke Keystroke defined in a format accepted by\n\t * the {@link module:utils/keyboard~parseKeystroke} function.\n\t * @param {Function} callback A function called with the\n\t * {@link module:engine/view/observer/keyobserver~KeyEventData key event data} object and\n\t * a helper funcion to call both `preventDefault()` and `stopPropagation()` on the underlying event.\n\t * @param {Object} [options={}] Additional options.\n\t * @param {module:utils/priorities~PriorityString|Number} [options.priority='normal'] The priority of the keystroke\n\t * callback. The higher the priority value the sooner the callback will be executed. Keystrokes having the same priority\n\t * are called in the order they were added.\n\t */\n\tset( keystroke, callback, options = {} ) {\n\t\tconst keyCode = parseKeystroke( keystroke );\n\t\tconst priority = options.priority;\n\n\t\t// Execute the passed callback on KeystrokeHandler#_keydown.\n\t\t// TODO: https://github.com/ckeditor/ckeditor5-utils/issues/144\n\t\tthis._listener.listenTo( this._listener, '_keydown:' + keyCode, ( evt, keyEvtData ) => {\n\t\t\tcallback( keyEvtData, () => {\n\t\t\t\t// Stop the event in the DOM: no listener in the web page\n\t\t\t\t// will be triggered by this event.\n\t\t\t\tkeyEvtData.preventDefault();\n\t\t\t\tkeyEvtData.stopPropagation();\n\n\t\t\t\t// Stop the event in the KeystrokeHandler: no more callbacks\n\t\t\t\t// will be executed for this keystroke.\n\t\t\t\tevt.stop();\n\t\t\t} );\n\n\t\t\t// Mark this keystroke as handled by the callback. See: #press.\n\t\t\tevt.return = true;\n\t\t}, { priority } );\n\t}\n\n\t/**\n\t * Triggers a keystroke handler for a specified key combination, if such a keystroke was {@link #set defined}.\n\t *\n\t * @param {module:engine/view/observer/keyobserver~KeyEventData} keyEvtData Key event data.\n\t * @returns {Boolean} Whether the keystroke was handled.\n\t */\n\tpress( keyEvtData ) {\n\t\treturn !!this._listener.fire( '_keydown:' + getCode( keyEvtData ), keyEvtData );\n\t}\n\n\t/**\n\t * Destroys the keystroke handler.\n\t */\n\tdestroy() {\n\t\tthis._listener.stopListening();\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module core/editingkeystrokehandler\n */\n\nimport KeystrokeHandler from '@ckeditor/ckeditor5-utils/src/keystrokehandler';\n\n/**\n * A keystroke handler for editor editing. Its instance is available\n * in {@link module:core/editor/editor~Editor#keystrokes} so plugins\n * can register their keystrokes.\n *\n * E.g. an undo plugin would do this:\n *\n *\t\teditor.keystrokes.set( 'Ctrl+Z', 'undo' );\n *\t\teditor.keystrokes.set( 'Ctrl+Shift+Z', 'redo' );\n *\t\teditor.keystrokes.set( 'Ctrl+Y', 'redo' );\n *\n * @extends module:utils/keystrokehandler~KeystrokeHandler\n */\nexport default class EditingKeystrokeHandler extends KeystrokeHandler {\n\t/**\n\t * Creates an instance of the keystroke handler.\n\t *\n\t * @param {module:core/editor/editor~Editor} editor\n\t */\n\tconstructor( editor ) {\n\t\tsuper();\n\n\t\t/**\n\t\t * The editor instance.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:core/editor/editor~Editor}\n\t\t */\n\t\tthis.editor = editor;\n\t}\n\n\t/**\n\t * Registers a handler for the specified keystroke.\n\t *\n\t * The handler can be specified as a command name or a callback.\n\t *\n\t * @param {String|Array.<String|Number>} keystroke Keystroke defined in a format accepted by\n\t * the {@link module:utils/keyboard~parseKeystroke} function.\n\t * @param {Function|String} callback If a string is passed, then the keystroke will\n\t * {@link module:core/editor/editor~Editor#execute execute a command}.\n\t * If a function, then it will be called with the\n\t * {@link module:engine/view/observer/keyobserver~KeyEventData key event data} object and\n\t * a `cancel()` helper to both `preventDefault()` and `stopPropagation()` of the event.\n\t * @param {Object} [options={}] Additional options.\n\t * @param {module:utils/priorities~PriorityString|Number} [options.priority='normal'] The priority of the keystroke\n\t * callback. The higher the priority value the sooner the callback will be executed. Keystrokes having the same priority\n\t * are called in the order they were added.\n\t */\n\tset( keystroke, callback, options = {} ) {\n\t\tif ( typeof callback == 'string' ) {\n\t\t\tconst commandName = callback;\n\n\t\t\tcallback = ( evtData, cancel ) => {\n\t\t\t\tthis.editor.execute( commandName );\n\t\t\t\tcancel();\n\t\t\t};\n\t\t}\n\n\t\tsuper.set( keystroke, callback, options );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module core/editor/editor\n */\n\nimport Context from '../context';\nimport Config from '@ckeditor/ckeditor5-utils/src/config';\nimport EditingController from '@ckeditor/ckeditor5-engine/src/controller/editingcontroller';\nimport PluginCollection from '../plugincollection';\nimport CommandCollection from '../commandcollection';\nimport DataController from '@ckeditor/ckeditor5-engine/src/controller/datacontroller';\nimport Conversion from '@ckeditor/ckeditor5-engine/src/conversion/conversion';\nimport Model from '@ckeditor/ckeditor5-engine/src/model/model';\nimport EditingKeystrokeHandler from '../editingkeystrokehandler';\n\nimport ObservableMixin from '@ckeditor/ckeditor5-utils/src/observablemixin';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport { StylesProcessor } from '@ckeditor/ckeditor5-engine/src/view/stylesmap';\n\n/**\n * The class representing a basic, generic editor.\n *\n * Check out the list of its subclasses to learn about specific editor implementations.\n *\n * All editor implementations (like {@link module:editor-classic/classiceditor~ClassicEditor} or\n * {@link module:editor-inline/inlineeditor~InlineEditor}) should extend this class. They can add their\n * own methods and properties.\n *\n * When you are implementing a plugin, this editor represents the API\n * which your plugin can expect to get when using its {@link module:core/plugin~Plugin#editor} property.\n *\n * This API should be sufficient in order to implement the \"editing\" part of your feature\n * (schema definition, conversion, commands, keystrokes, etc.).\n * It does not define the editor UI, which is available only if\n * the specific editor implements also the {@link module:core/editor/editorwithui~EditorWithUI} interface\n * (as most editor implementations do).\n *\n * @abstract\n * @mixes module:utils/observablemixin~ObservableMixin\n */\nexport default class Editor {\n\t/**\n\t * Creates a new instance of the editor class.\n\t *\n\t * Usually, not to be used directly. See the static {@link module:core/editor/editor~Editor.create `create()`} method.\n\t *\n\t * @param {Object} [config={}] The editor configuration.\n\t */\n\tconstructor( config = {} ) {\n\t\t/**\n\t\t * The editor context.\n\t\t * When it is not provided through the configuration, the editor creates it.\n\t\t *\n\t\t * @protected\n\t\t * @type {module:core/context~Context}\n\t\t */\n\t\tthis._context = config.context || new Context( { language: config.language } );\n\t\tthis._context._addEditor( this, !config.context );\n\n\t\t// Clone the plugins to make sure that the plugin array will not be shared\n\t\t// between editors and make the watchdog feature work correctly.\n\t\tconst availablePlugins = Array.from( this.constructor.builtinPlugins || [] );\n\n\t\t/**\n\t\t * Stores all configurations specific to this editor instance.\n\t\t *\n\t\t *\t\teditor.config.get( 'image.toolbar' );\n\t\t *\t\t// -> [ 'imageStyle:full', 'imageStyle:side', '|', 'imageTextAlternative' ]\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:utils/config~Config}\n\t\t */\n\t\tthis.config = new Config( config, this.constructor.defaultConfig );\n\t\tthis.config.define( 'plugins', availablePlugins );\n\t\tthis.config.define( this._context._getEditorConfig() );\n\n\t\t/**\n\t\t * The plugins loaded and in use by this editor instance.\n\t\t *\n\t\t *\t\teditor.plugins.get( 'Clipboard' ); // -> An instance of the clipboard plugin.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:core/plugincollection~PluginCollection}\n\t\t */\n\t\tthis.plugins = new PluginCollection( this, availablePlugins, this._context.plugins );\n\n\t\t/**\n\t\t * The locale instance.\n\t\t *\n\t\t * @readonly\n\t\t * @type {module:utils/locale~Locale}\n\t\t */\n\t\tthis.locale = this._context.locale;\n\n\t\t/**\n\t\t * Shorthand for {@link module:utils/locale~Locale#t}.\n\t\t *\n\t\t * @see module:utils/locale~Locale#t\n\t\t * @method #t\n\t\t */\n\t\tthis.t = this.locale.t;\n\n\t\t/**\n\t\t * Commands registered to the editor.\n\t\t *\n\t\t * Use the shorthand {@link #execute `editor.execute()`} method to execute commands:\n\t\t *\n\t\t *\t\t// Execute the bold command:\n\t\t *\t\teditor.execute( 'bold' );\n\t\t *\n\t\t *\t\t// Check the state of the bold command:\n\t\t *\t\teditor.commands.get( 'bold' ).value;\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:core/commandcollection~CommandCollection}\n\t\t */\n\t\tthis.commands = new CommandCollection();\n\n\t\t/**\n\t\t * Indicates the editor life-cycle state.\n\t\t *\n\t\t * The editor is in one of the following states:\n\t\t *\n\t\t * * `initializing` &ndash; During the editor initialization (before\n\t\t * {@link module:core/editor/editor~Editor.create `Editor.create()`}) finished its job.\n\t\t * * `ready` &ndash; After the promise returned by the {@link module:core/editor/editor~Editor.create `Editor.create()`}\n\t\t * method is resolved.\n\t\t * * `destroyed` &ndash; Once the {@link #destroy `editor.destroy()`} method was called.\n\t\t *\n\t\t * @observable\n\t\t * @member {'initializing'|'ready'|'destroyed'} #state\n\t\t */\n\t\tthis.set( 'state', 'initializing' );\n\t\tthis.once( 'ready', () => ( this.state = 'ready' ), { priority: 'high' } );\n\t\tthis.once( 'destroy', () => ( this.state = 'destroyed' ), { priority: 'high' } );\n\n\t\t/**\n\t\t * Defines whether this editor is in read-only mode.\n\t\t *\n\t\t * In read-only mode the editor {@link #commands commands} are disabled so it is not possible\n\t\t * to modify the document by using them. Also, the editable element(s) become non-editable.\n\t\t *\n\t\t * In order to make the editor read-only, you can set this value directly:\n\t\t *\n\t\t *\t\teditor.isReadOnly = true;\n\t\t *\n\t\t * @observable\n\t\t * @member {Boolean} #isReadOnly\n\t\t */\n\t\tthis.set( 'isReadOnly', false );\n\n\t\t/**\n\t\t * The editor's model.\n\t\t *\n\t\t * The central point of the editor's abstract data model.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/model/model~Model}\n\t\t */\n\t\tthis.model = new Model();\n\n\t\tconst stylesProcessor = new StylesProcessor();\n\n\t\t/**\n\t\t * The {@link module:engine/controller/datacontroller~DataController data controller}.\n\t\t * Used e.g. for setting and retrieving the editor data.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/controller/datacontroller~DataController}\n\t\t */\n\t\tthis.data = new DataController( this.model, stylesProcessor );\n\n\t\t/**\n\t\t * The {@link module:engine/controller/editingcontroller~EditingController editing controller}.\n\t\t * Controls user input and rendering the content for editing.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/controller/editingcontroller~EditingController}\n\t\t */\n\t\tthis.editing = new EditingController( this.model, stylesProcessor );\n\t\tthis.editing.view.document.bind( 'isReadOnly' ).to( this );\n\n\t\t/**\n\t\t * Conversion manager through which you can register model-to-view and view-to-model converters.\n\t\t *\n\t\t * See the {@link module:engine/conversion/conversion~Conversion} documentation to learn how to add converters.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/conversion/conversion~Conversion}\n\t\t */\n\t\tthis.conversion = new Conversion( [ this.editing.downcastDispatcher, this.data.downcastDispatcher ], this.data.upcastDispatcher );\n\t\tthis.conversion.addAlias( 'dataDowncast', this.data.downcastDispatcher );\n\t\tthis.conversion.addAlias( 'editingDowncast', this.editing.downcastDispatcher );\n\n\t\t/**\n\t\t * An instance of the {@link module:core/editingkeystrokehandler~EditingKeystrokeHandler}.\n\t\t *\n\t\t * It allows setting simple keystrokes:\n\t\t *\n\t\t *\t\t// Execute the bold command on Ctrl+E:\n\t\t *\t\teditor.keystrokes.set( 'Ctrl+E', 'bold' );\n\t\t *\n\t\t *\t\t// Execute your own callback:\n\t\t *\t\teditor.keystrokes.set( 'Ctrl+E', ( data, cancel ) => {\n\t\t *\t\t\tconsole.log( data.keyCode );\n\t\t *\n\t\t *\t\t\t// Prevent the default (native) action and stop the underlying keydown event\n\t\t *\t\t\t// so no other editor feature will interfere.\n\t\t *\t\t\tcancel();\n\t\t *\t\t} );\n\t\t *\n\t\t * Note: Certain typing-oriented keystrokes (like <kbd>Backspace</kbd> or <kbd>Enter</kbd>) are handled\n\t\t * by a low-level mechanism and trying to listen to them via the keystroke handler will not work reliably.\n\t\t * To handle these specific keystrokes, see the events fired by the\n\t\t * {@link module:engine/view/document~Document editing view document} (`editor.editing.view.document`).\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:core/editingkeystrokehandler~EditingKeystrokeHandler}\n\t\t */\n\t\tthis.keystrokes = new EditingKeystrokeHandler( this );\n\t\tthis.keystrokes.listenTo( this.editing.view.document );\n\t}\n\n\t/**\n\t * Loads and initializes plugins specified in the configuration.\n\t *\n\t * @returns {Promise.<module:core/plugin~LoadedPlugins>} A promise which resolves\n\t * once the initialization is completed, providing an array of loaded plugins.\n\t */\n\tinitPlugins() {\n\t\tconst config = this.config;\n\t\tconst plugins = config.get( 'plugins' );\n\t\tconst removePlugins = config.get( 'removePlugins' ) || [];\n\t\tconst extraPlugins = config.get( 'extraPlugins' ) || [];\n\n\t\treturn this.plugins.init( plugins.concat( extraPlugins ), removePlugins );\n\t}\n\n\t/**\n\t * Destroys the editor instance, releasing all resources used by it.\n\t *\n\t * **Note** The editor cannot be destroyed during the initialization phase so if it is called\n\t * while the editor {@link #state is being initialized}, it will wait for the editor initialization before destroying it.\n\t *\n\t * @fires destroy\n\t * @returns {Promise} A promise that resolves once the editor instance is fully destroyed.\n\t */\n\tdestroy() {\n\t\tlet readyPromise = Promise.resolve();\n\n\t\tif ( this.state == 'initializing' ) {\n\t\t\treadyPromise = new Promise( resolve => this.once( 'ready', resolve ) );\n\t\t}\n\n\t\treturn readyPromise\n\t\t\t.then( () => {\n\t\t\t\tthis.fire( 'destroy' );\n\t\t\t\tthis.stopListening();\n\t\t\t\tthis.commands.destroy();\n\t\t\t} )\n\t\t\t.then( () => this.plugins.destroy() )\n\t\t\t.then( () => {\n\t\t\t\tthis.model.destroy();\n\t\t\t\tthis.data.destroy();\n\t\t\t\tthis.editing.destroy();\n\t\t\t\tthis.keystrokes.destroy();\n\t\t\t} )\n\t\t\t// Remove the editor from the context.\n\t\t\t// When the context was created by this editor, the context will be destroyed.\n\t\t\t.then( () => this._context._removeEditor( this ) );\n\t}\n\n\t/**\n\t * Executes the specified command with given parameters.\n\t *\n\t * Shorthand for:\n\t *\n\t *\t\teditor.commands.get( commandName ).execute( ... );\n\t *\n\t * @param {String} commandName The name of the command to execute.\n\t * @param {*} [...commandParams] Command parameters.\n\t * @returns {*} The value returned by the {@link module:core/commandcollection~CommandCollection#execute `commands.execute()`}.\n\t */\n\texecute( ...args ) {\n\t\ttry {\n\t\t\treturn this.commands.execute( ...args );\n\t\t} catch ( err ) {\n\t\t\t// @if CK_DEBUG // throw err;\n\t\t\t/* istanbul ignore next */\n\t\t\tCKEditorError.rethrowUnexpectedError( err, this );\n\t\t}\n\t}\n\n\t/**\n\t * Focuses the editor.\n\t *\n\t * **Note** To explicitly focus the editing area of the editor, use the\n\t * {@link module:engine/view/view~View#focus `editor.editing.view.focus()`} method of the editing view.\n\t *\n\t * Check out the {@glink framework/guides/deep-dive/ui/focus-tracking#focus-in-the-editor-ui Focus in the editor UI} section\n\t * of the {@glink framework/guides/deep-dive/ui/focus-tracking Deep dive into focus tracking} guide to learn more.\n\t */\n\tfocus() {\n\t\tthis.editing.view.focus();\n\t}\n\n\t/**\n\t * Creates and initializes a new editor instance.\n\t *\n\t * This is an abstract method. Every editor type needs to implement its own initialization logic.\n\t *\n\t * See the `create()` methods of the existing editor types to learn how to use them:\n\t *\n\t * * {@link module:editor-classic/classiceditor~ClassicEditor.create `ClassicEditor.create()`}\n\t * * {@link module:editor-balloon/ballooneditor~BalloonEditor.create `BalloonEditor.create()`}\n\t * * {@link module:editor-decoupled/decouplededitor~DecoupledEditor.create `DecoupledEditor.create()`}\n\t * * {@link module:editor-inline/inlineeditor~InlineEditor.create `InlineEditor.create()`}\n\t *\n\t * @abstract\n\t * @method module:core/editor/editor~Editor.create\n\t */\n}\n\nmix( Editor, ObservableMixin );\n\n/**\n * Fired when the {@link module:engine/controller/datacontroller~DataController#event:ready data} and all additional\n * editor components are ready.\n *\n * Note: This event is most useful for plugin developers. When integrating the editor with your website or\n * application, you do not have to listen to `editor#ready` because when the promise returned by the static\n * {@link module:core/editor/editor~Editor.create `Editor.create()`} event is resolved, the editor is already ready.\n * In fact, since the first moment when the editor instance is available to you is inside `then()`'s callback,\n * you cannot even add a listener to the `editor#ready` event.\n *\n * See also the {@link #state `editor.state`} property.\n *\n * @event ready\n */\n\n/**\n * Fired when this editor instance is destroyed. The editor at this point is not usable and this event should be used to\n * perform the clean-up in any plugin.\n *\n *\n * See also the {@link #state `editor.state`} property.\n *\n * @event destroy\n */\n\n/**\n * This error is thrown when trying to pass a `<textarea>` element to a `create()` function of an editor class.\n *\n * The only editor type which can be initialized on `<textarea>` elements is {@glink builds/guides/overview#classic-editor classic editor}.\n * This editor hides the passed element and inserts its own UI next to it. Other types of editors reuse the passed element as their root\n * editable element and therefore `<textarea>` is not appropriate for them. Use a `<div>` or another text container instead:\n *\n *\t\t<div id=\"editor\">\n *\t\t\t<p>Initial content.</p>\n *\t\t</div>\n *\n * @error editor-wrong-element\n */\n\n/**\n * An array of plugins built into this editor class.\n *\n * It is used in CKEditor 5 builds to provide a list of plugins which are later automatically initialized\n * during the editor initialization.\n *\n * They will be automatically initialized by the editor, unless listed in `config.removePlugins` and\n * unless `config.plugins` is passed.\n *\n *\t\t// Build some plugins into the editor class first.\n *\t\tClassicEditor.builtinPlugins = [ FooPlugin, BarPlugin ];\n *\n *\t\t// Normally, you need to define config.plugins, but since ClassicEditor.builtinPlugins was\n *\t\t// defined, now you can call create() without any configuration.\n *\t\tClassicEditor\n *\t\t\t.create( sourceElement )\n *\t\t\t.then( editor => {\n *\t\t\t\teditor.plugins.get( FooPlugin ); // -> An instance of the Foo plugin.\n *\t\t\t\teditor.plugins.get( BarPlugin ); // -> An instance of the Bar plugin.\n *\t\t\t} );\n *\n *\t\tClassicEditor\n *\t\t\t.create( sourceElement, {\n *\t\t\t\t// Do not initialize these plugins (note: it is defined by a string):\n *\t\t\t\tremovePlugins: [ 'Foo' ]\n *\t\t\t} )\n *\t\t\t.then( editor => {\n *\t\t\t\teditor.plugins.get( FooPlugin ); // -> Undefined.\n *\t\t\t\teditor.config.get( BarPlugin ); // -> An instance of the Bar plugin.\n *\t\t\t} );\n *\n *\t\tClassicEditor\n *\t\t\t.create( sourceElement, {\n *\t\t\t\t// Load only this plugin. It can also be defined by a string if\n *\t\t\t\t// this plugin was built into the editor class.\n *\t\t\t\tplugins: [ FooPlugin ]\n *\t\t\t} )\n *\t\t\t.then( editor => {\n *\t\t\t\teditor.plugins.get( FooPlugin ); // -> An instance of the Foo plugin.\n *\t\t\t\teditor.config.get( BarPlugin ); // -> Undefined.\n *\t\t\t} );\n *\n * See also {@link module:core/editor/editor~Editor.defaultConfig}.\n *\n * @static\n * @member {Array.<Function>} module:core/editor/editor~Editor.builtinPlugins\n */\n\n/**\n * The default configuration which is built into the editor class.\n *\n * It is used in CKEditor 5 builds to provide the default configuration options which are later used during the editor initialization.\n *\n *\t\tClassicEditor.defaultConfig = {\n *\t\t\tfoo: 1,\n *\t\t\tbar: 2\n *\t\t};\n *\n *\t\tClassicEditor\n *\t\t\t.create( sourceElement )\n *\t\t\t.then( editor => {\n *\t\t\t\teditor.config.get( 'foo' ); // -> 1\n *\t\t\t\teditor.config.get( 'bar' ); // -> 2\n *\t\t\t} );\n *\n *\t\t// The default options can be overridden by the configuration passed to create().\n *\t\tClassicEditor\n *\t\t\t.create( sourceElement, { bar: 3 } )\n *\t\t\t.then( editor => {\n *\t\t\t\teditor.config.get( 'foo' ); // -> 1\n *\t\t\t\teditor.config.get( 'bar' ); // -> 3\n *\t\t\t} );\n *\n * See also {@link module:core/editor/editor~Editor.builtinPlugins}.\n *\n * @static\n * @member {Object} module:core/editor/editor~Editor.defaultConfig\n */\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module core/editor/utils/dataapimixin\n */\n\n/**\n * Implementation of the {@link module:core/editor/utils/dataapimixin~DataApi}.\n *\n * @mixin DataApiMixin\n * @implements module:core/editor/utils/dataapimixin~DataApi\n */\nconst DataApiMixin = {\n\t/**\n\t * @inheritDoc\n\t */\n\tsetData( data ) {\n\t\tthis.data.set( data );\n\t},\n\n\t/**\n\t * @inheritDoc\n\t */\n\tgetData( options ) {\n\t\treturn this.data.get( options );\n\t}\n};\n\nexport default DataApiMixin;\n\n/**\n * Interface defining editor methods for setting and getting data to and from the editor's main root element\n * using the {@link module:core/editor/editor~Editor#data data pipeline}.\n *\n * This interface is not a part of the {@link module:core/editor/editor~Editor} class because one may want to implement\n * an editor with multiple root elements, in which case the methods for setting and getting data will need to be implemented\n * differently.\n *\n * @interface DataApi\n */\n\n/**\n * Sets the data in the editor.\n *\n *\t\teditor.setData( '<p>This is editor!</p>' );\n *\n * By default the editor accepts HTML. This can be controlled by injecting a different data processor.\n * See the {@glink features/markdown Markdown output} guide for more details.\n *\n * Note: Not only is the format of the data configurable, but the type of the `setData()`'s parameter does not\n * have to be a string either. You can e.g. accept an object or a DOM `DocumentFragment` if you consider this\n * the right format for you.\n *\n * @method #setData\n * @param {String} data Input data.\n */\n\n/**\n * Gets the data from the editor.\n *\n *\t\teditor.getData(); // -> '<p>This is editor!</p>'\n *\n * By default the editor outputs HTML. This can be controlled by injecting a different data processor.\n * See the {@glink features/markdown Markdown output} guide for more details.\n *\n * Note: Not only is the format of the data configurable, but the type of the `getData()`'s return value does not\n * have to be a string either. You can e.g. return an object or a DOM `DocumentFragment` if you consider this\n * the right format for you.\n *\n * @method #getData\n * @param {Object} [options] Additional configuration for the retrieved data.\n * Editor features may introduce more configuration options that can be set through this parameter.\n * @param {String} [options.rootName='main'] Root name.\n * @param {String} [options.trim='empty'] Whether returned data should be trimmed. This option is set to `'empty'` by default,\n * which means that whenever editor content is considered empty, an empty string is returned. To turn off trimming\n * use `'none'`. In such cases exact content will be returned (for example `'<p>&nbsp;</p>'` for an empty editor).\n * @returns {String} Output data.\n */\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport setDataInElement from '@ckeditor/ckeditor5-utils/src/dom/setdatainelement';\n\n/**\n * @module core/editor/utils/elementapimixin\n */\n\n/**\n * Implementation of the {@link module:core/editor/utils/elementapimixin~ElementApi}.\n *\n * @mixin ElementApiMixin\n * @implements module:core/editor/utils/elementapimixin~ElementApi\n */\nconst ElementApiMixin = {\n\t/**\n\t * @inheritDoc\n\t */\n\tupdateSourceElement() {\n\t\tif ( !this.sourceElement ) {\n\t\t\t/**\n\t\t\t * Cannot update the source element of a detached editor.\n\t\t\t *\n\t\t\t * The {@link ~ElementApi#updateSourceElement `updateSourceElement()`} method cannot be called if you did not\n\t\t\t * pass an element to `Editor.create()`.\n\t\t\t *\n\t\t\t * @error editor-missing-sourceelement\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'editor-missing-sourceelement',\n\t\t\t\tthis\n\t\t\t);\n\t\t}\n\n\t\tsetDataInElement( this.sourceElement, this.data.get() );\n\t}\n};\n\nexport default ElementApiMixin;\n\n/**\n * Interface describing an editor that replaced a DOM element (was \"initialized on an element\").\n *\n * Such an editor should provide a method to\n * {@link module:core/editor/utils/elementapimixin~ElementApi#updateSourceElement update the replaced element with the current data}.\n *\n * @interface ElementApi\n */\n\n/**\n * The element on which the editor has been initialized.\n *\n * @readonly\n * @member {HTMLElement} #sourceElement\n */\n\n/**\n * Updates the {@link #sourceElement editor source element}'s content with the data.\n *\n * @method #updateSourceElement\n */\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/dom/setdatainelement\n */\n\n/* globals HTMLTextAreaElement */\n\n/**\n * Sets data in a given element.\n *\n * @param {HTMLElement} el The element in which the data will be set.\n * @param {String} data The data string.\n */\nexport default function setDataInElement( el, data ) {\n\tif ( el instanceof HTMLTextAreaElement ) {\n\t\tel.value = data;\n\t}\n\n\tel.innerHTML = data;\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/componentfactory\n */\n\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n\n/**\n * A helper class implementing the UI component ({@link module:ui/view~View view}) factory.\n *\n * It allows functions producing specific UI components to be registered under their unique names\n * in the factory. A registered component can be then instantiated by providing its name.\n * Note that names are case insensitive.\n *\n *\t\t// The editor provides localization tools for the factory.\n *\t\tconst factory = new ComponentFactory( editor );\n *\n *\t\tfactory.add( 'foo', locale => new FooView( locale ) );\n *\t\tfactory.add( 'bar', locale => new BarView( locale ) );\n *\n *\t\t// An instance of FooView.\n *\t\tconst fooInstance = factory.create( 'foo' );\n *\n *\t\t// Names are case insensitive so this is also allowed:\n *\t\tconst barInstance = factory.create( 'Bar' );\n *\n * The {@link module:core/editor/editor~Editor#locale editor locale} is passed to the factory\n * function when {@link module:ui/componentfactory~ComponentFactory#create} is called.\n */\nexport default class ComponentFactory {\n\t/**\n\t * Creates an instance of the factory.\n\t *\n\t * @constructor\n\t * @param {module:core/editor/editor~Editor} editor The editor instance.\n\t */\n\tconstructor( editor ) {\n\t\t/**\n\t\t * The editor instance that the factory belongs to.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:core/editor/editor~Editor}\n\t\t */\n\t\tthis.editor = editor;\n\n\t\t/**\n\t\t * Registered component factories.\n\t\t *\n\t\t * @private\n\t\t * @member {Map}\n\t\t */\n\t\tthis._components = new Map();\n\t}\n\n\t/**\n\t * Returns an iterator of registered component names. Names are returned in lower case.\n\t *\n\t * @returns {Iterable.<String>}\n\t */\n\t* names() {\n\t\tfor ( const value of this._components.values() ) {\n\t\t\tyield value.originalName;\n\t\t}\n\t}\n\n\t/**\n\t * Registers a component factory function that will be used by the\n\t * {@link #create create} method and called with the\n\t * {@link module:core/editor/editor~Editor#locale editor locale} as an argument,\n\t * allowing localization of the {@link module:ui/view~View view}.\n\t *\n\t * @param {String} name The name of the component.\n\t * @param {Function} callback The callback that returns the component.\n\t */\n\tadd( name, callback ) {\n\t\tthis._components.set( getNormalized( name ), { callback, originalName: name } );\n\t}\n\n\t/**\n\t * Creates an instance of a component registered in the factory under a specific name.\n\t *\n\t * When called, the {@link module:core/editor/editor~Editor#locale editor locale} is passed to\n\t * the previously {@link #add added} factory function, allowing localization of the\n\t * {@link module:ui/view~View view}.\n\t *\n\t * @param {String} name The name of the component.\n\t * @returns {module:ui/view~View} The instantiated component view.\n\t */\n\tcreate( name ) {\n\t\tif ( !this.has( name ) ) {\n\t\t\t/**\n\t\t\t * The required component is not registered in the component factory. Please make sure\n\t\t\t * the provided name is correct and the component has been correctly\n\t\t\t * {@link #add added} to the factory.\n\t\t\t *\n\t\t\t * @error componentfactory-item-missing\n\t\t\t * @param {String} name The name of the missing component.\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'componentfactory-item-missing',\n\t\t\t\tthis,\n\t\t\t\t{ name }\n\t\t\t);\n\t\t}\n\n\t\treturn this._components.get( getNormalized( name ) ).callback( this.editor.locale );\n\t}\n\n\t/**\n\t * Checks if a component of a given name is registered in the factory.\n\t *\n\t * @param {String} name The name of the component.\n\t * @returns {Boolean}\n\t */\n\thas( name ) {\n\t\treturn this._components.has( getNormalized( name ) );\n\t}\n}\n\n//\n// Ensures that the component name used as the key in the internal map is in lower case.\n//\n// @private\n// @param {String} name\n// @returns {String}\nfunction getNormalized( name ) {\n\treturn String( name ).toLowerCase();\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/* global setTimeout, clearTimeout */\n\n/**\n * @module utils/focustracker\n */\n\nimport DomEmitterMixin from './dom/emittermixin';\nimport ObservableMixin from './observablemixin';\nimport CKEditorError from './ckeditorerror';\nimport mix from './mix';\n\n/**\n * Allows observing a group of `HTMLElement`s whether at least one of them is focused.\n *\n * Used by the {@link module:core/editor/editor~Editor} in order to track whether the focus is still within the application,\n * or were used outside of its UI.\n *\n * **Note** `focus` and `blur` listeners use event capturing, so it is only needed to register wrapper `HTMLElement`\n * which contain other `focusable` elements. But note that this wrapper element has to be focusable too\n * (have e.g. `tabindex=\"-1\"`).\n *\n * Check out the {@glink framework/guides/deep-dive/ui/focus-tracking \"Deep dive into focus tracking\" guide} to learn more.\n *\n * @mixes module:utils/dom/emittermixin~EmitterMixin\n * @mixes module:utils/observablemixin~ObservableMixin\n */\nexport default class FocusTracker {\n\tconstructor() {\n\t\t/**\n\t\t * True when one of the registered elements is focused.\n\t\t *\n\t\t * @readonly\n\t\t * @observable\n\t\t * @member {Boolean} #isFocused\n\t\t */\n\t\tthis.set( 'isFocused', false );\n\n\t\t/**\n\t\t * The currently focused element.\n\t\t *\n\t\t * While {@link #isFocused `isFocused`} remains `true`, the focus can\n\t\t * move between different UI elements. This property tracks those\n\t\t * elements and tells which one is currently focused.\n\t\t *\n\t\t * @readonly\n\t\t * @observable\n\t\t * @member {HTMLElement|null} #focusedElement\n\t\t */\n\t\tthis.set( 'focusedElement', null );\n\n\t\t/**\n\t\t * List of registered elements.\n\t\t *\n\t\t * @private\n\t\t * @member {Set.<HTMLElement>}\n\t\t */\n\t\tthis._elements = new Set();\n\n\t\t/**\n\t\t * Event loop timeout.\n\t\t *\n\t\t * @private\n\t\t * @member {Number}\n\t\t */\n\t\tthis._nextEventLoopTimeout = null;\n\t}\n\n\t/**\n\t * Starts tracking the specified element.\n\t *\n\t * @param {HTMLElement} element\n\t */\n\tadd( element ) {\n\t\tif ( this._elements.has( element ) ) {\n\t\t\t/**\n\t\t\t * This element is already tracked by {@link module:utils/focustracker~FocusTracker}.\n\t\t\t *\n\t\t\t * @error focustracker-add-element-already-exist\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'focustracker-add-element-already-exist', this );\n\t\t}\n\n\t\tthis.listenTo( element, 'focus', () => this._focus( element ), { useCapture: true } );\n\t\tthis.listenTo( element, 'blur', () => this._blur(), { useCapture: true } );\n\t\tthis._elements.add( element );\n\t}\n\n\t/**\n\t * Stops tracking the specified element and stops listening on this element.\n\t *\n\t * @param {HTMLElement} element\n\t */\n\tremove( element ) {\n\t\tif ( element === this.focusedElement ) {\n\t\t\tthis._blur( element );\n\t\t}\n\n\t\tif ( this._elements.has( element ) ) {\n\t\t\tthis.stopListening( element );\n\t\t\tthis._elements.delete( element );\n\t\t}\n\t}\n\n\t/**\n\t * Destroys the focus tracker by:\n\t * - Disabling all event listeners attached to tracked elements.\n\t * - Removing all tracked elements that were previously added.\n\t */\n\tdestroy() {\n\t\tthis.stopListening();\n\t}\n\n\t/**\n\t * Stores currently focused element and set {#isFocused} as `true`.\n\t *\n\t * @private\n\t * @param {HTMLElement} element Element which has been focused.\n\t */\n\t_focus( element ) {\n\t\tclearTimeout( this._nextEventLoopTimeout );\n\n\t\tthis.focusedElement = element;\n\t\tthis.isFocused = true;\n\t}\n\n\t/**\n\t * Clears currently focused element and set {@link #isFocused} as `false`.\n\t * This method uses `setTimeout` to change order of fires `blur` and `focus` events.\n\t *\n\t * @private\n\t * @fires blur\n\t */\n\t_blur() {\n\t\tclearTimeout( this._nextEventLoopTimeout );\n\n\t\tthis._nextEventLoopTimeout = setTimeout( () => {\n\t\t\tthis.focusedElement = null;\n\t\t\tthis.isFocused = false;\n\t\t}, 0 );\n\t}\n\n\t/**\n\t * @event focus\n\t */\n\n\t/**\n\t * @event blur\n\t */\n}\n\nmix( FocusTracker, DomEmitterMixin );\nmix( FocusTracker, ObservableMixin );\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module core/editor/editorui\n */\n\n/* globals console */\n\nimport ComponentFactory from '@ckeditor/ckeditor5-ui/src/componentfactory';\nimport FocusTracker from '@ckeditor/ckeditor5-utils/src/focustracker';\n\nimport EmitterMixin from '@ckeditor/ckeditor5-utils/src/emittermixin';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\n\n/**\n * A class providing the minimal interface that is required to successfully bootstrap any editor UI.\n *\n * @mixes module:utils/emittermixin~EmitterMixin\n */\nexport default class EditorUI {\n\t/**\n\t * Creates an instance of the editor UI class.\n\t *\n\t * @param {module:core/editor/editor~Editor} editor The editor instance.\n\t */\n\tconstructor( editor ) {\n\t\t/**\n\t\t * The editor that the UI belongs to.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:core/editor/editor~Editor} #editor\n\t\t */\n\t\tthis.editor = editor;\n\n\t\t/**\n\t\t * An instance of the {@link module:ui/componentfactory~ComponentFactory}, a registry used by plugins\n\t\t * to register factories of specific UI components.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/componentfactory~ComponentFactory} #componentFactory\n\t\t */\n\t\tthis.componentFactory = new ComponentFactory( editor );\n\n\t\t/**\n\t\t * Stores the information about the editor UI focus and propagates it so various plugins and components\n\t\t * are unified as a focus group.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:utils/focustracker~FocusTracker} #focusTracker\n\t\t */\n\t\tthis.focusTracker = new FocusTracker();\n\n\t\t/**\n\t\t * Stores all editable elements used by the editor instance.\n\t\t *\n\t\t * @private\n\t\t * @member {Map.<String,HTMLElement>}\n\t\t */\n\t\tthis._editableElementsMap = new Map();\n\n\t\t// Informs UI components that should be refreshed after layout change.\n\t\tthis.listenTo( editor.editing.view.document, 'layoutChanged', () => this.update() );\n\t}\n\n\t/**\n\t * The main (outermost) DOM element of the editor UI.\n\t *\n\t * For example, in {@link module:editor-classic/classiceditor~ClassicEditor} it is a `<div>` which\n\t * wraps the editable element and the toolbar. In {@link module:editor-inline/inlineeditor~InlineEditor}\n\t * it is the editable element itself (as there is no other wrapper). However, in\n\t * {@link module:editor-decoupled/decouplededitor~DecoupledEditor} it is set to `null` because this editor does not\n\t * come with a single \"main\" HTML element (its editable element and toolbar are separate).\n\t *\n\t * This property can be understood as a shorthand for retrieving the element that a specific editor integration\n\t * considers to be its main DOM element.\n\t *\n\t * @readonly\n\t * @member {HTMLElement|null} #element\n\t */\n\tget element() {\n\t\treturn null;\n\t}\n\n\t/**\n\t * Fires the {@link module:core/editor/editorui~EditorUI#event:update `update`} event.\n\t *\n\t * This method should be called when the editor UI (e.g. positions of its balloons) needs to be updated due to\n\t * some environmental change which CKEditor 5 is not aware of (e.g. resize of a container in which it is used).\n\t */\n\tupdate() {\n\t\tthis.fire( 'update' );\n\t}\n\n\t/**\n\t * Destroys the UI.\n\t */\n\tdestroy() {\n\t\tthis.stopListening();\n\n\t\tthis.focusTracker.destroy();\n\n\t\t// Clean–up the references to the CKEditor instance stored in the native editable DOM elements.\n\t\tfor ( const domElement of this._editableElementsMap.values() ) {\n\t\t\tdomElement.ckeditorInstance = null;\n\t\t}\n\n\t\tthis._editableElementsMap = new Map();\n\t}\n\n\t/**\n\t * Store the native DOM editable element used by the editor under\n\t * a unique name.\n\t *\n\t * @param {String} rootName The unique name of the editable element.\n\t * @param {HTMLElement} domElement The native DOM editable element.\n\t */\n\tsetEditableElement( rootName, domElement ) {\n\t\tthis._editableElementsMap.set( rootName, domElement );\n\n\t\t// Put a reference to the CKEditor instance in the editable native DOM element.\n\t\t// It helps 3rd–party software (browser extensions, other libraries) access and recognize\n\t\t// CKEditor 5 instances (editing roots) and use their API (there is no global editor\n\t\t// instance registry).\n\t\tif ( !domElement.ckeditorInstance ) {\n\t\t\tdomElement.ckeditorInstance = this.editor;\n\t\t}\n\t}\n\n\t/**\n\t * Returns the editable editor element with the given name or null if editable does not exist.\n\t *\n\t * @param {String} [rootName=main] The editable name.\n\t * @returns {HTMLElement|undefined}\n\t */\n\tgetEditableElement( rootName = 'main' ) {\n\t\treturn this._editableElementsMap.get( rootName );\n\t}\n\n\t/**\n\t * Returns array of names of all editor editable elements.\n\t *\n\t * @returns {Iterable.<String>}\n\t */\n\tgetEditableElementsNames() {\n\t\treturn this._editableElementsMap.keys();\n\t}\n\n\t/**\n\t * Stores all editable elements used by the editor instance.\n\t *\n\t * @protected\n\t * @deprecated\n\t * @member {Map.<String,HTMLElement>}\n\t */\n\tget _editableElements() {\n\t\t/**\n\t\t * The {@link module:core/editor/editorui~EditorUI#_editableElements `EditorUI#_editableElements`} property has been\n\t\t * deprecated and will be removed in the near future. Please use {@link #setEditableElement `setEditableElement()`} and\n\t\t * {@link #getEditableElement `getEditableElement()`} methods instead.\n\t\t *\n\t\t * @error editor-ui-deprecated-editable-elements\n\t\t * @param {module:core/editor/editorui~EditorUI} editorUI Editor UI instance the deprecated property belongs to.\n\t\t */\n\t\tconsole.warn(\n\t\t\t'editor-ui-deprecated-editable-elements: ' +\n\t\t\t'The EditorUI#_editableElements property has been deprecated and will be removed in the near future.',\n\t\t\t{ editorUI: this } );\n\n\t\treturn this._editableElementsMap;\n\t}\n\n\t/**\n\t * Fired when the editor UI is ready.\n\t *\n\t * Fired before {@link module:engine/controller/datacontroller~DataController#event:ready}.\n\t *\n\t * @event ready\n\t */\n\n\t/**\n\t * Fired whenever the UI (all related components) should be refreshed.\n\t *\n\t * **Note:**: The event is fired after each {@link module:engine/view/document~Document#event:layoutChanged}.\n\t * It can also be fired manually via the {@link module:core/editor/editorui~EditorUI#update} method.\n\t *\n\t * @event update\n\t */\n}\n\nmix( EditorUI, EmitterMixin );\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/toolbar/normalizetoolbarconfig\n */\n\n/**\n * Normalizes the toolbar configuration (`config.toolbar`), which:\n *\n * * may be defined as an `Array`:\n *\n * \t\ttoolbar: [ 'heading', 'bold', 'italic', 'link', ... ]\n *\n * * or an `Object`:\n *\n *\t\ttoolbar: {\n *\t\t\titems: [ 'heading', 'bold', 'italic', 'link', ... ],\n *\t\t\tremoveItems: [ 'bold' ],\n *\t\t\t...\n *\t\t}\n *\n * * or may not be defined at all (`undefined`)\n *\n * and returns it in the object form.\n *\n * @param {Array|Object|undefined} config The value of `config.toolbar`.\n * @returns {Object} A normalized toolbar config object.\n */\nexport default function normalizeToolbarConfig( config ) {\n\tif ( Array.isArray( config ) ) {\n\t\treturn {\n\t\t\titems: config,\n\t\t\tremoveItems: []\n\t\t};\n\t}\n\n\tif ( !config ) {\n\t\treturn {\n\t\t\titems: [],\n\t\t\tremoveItems: []\n\t\t};\n\t}\n\n\treturn Object.assign( {\n\t\titems: [],\n\t\tremoveItems: []\n\t}, config );\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/placeholder\n */\n\nimport '../../theme/placeholder.css';\n\n// Each document stores information about its placeholder elements and check functions.\nconst documentPlaceholders = new WeakMap();\n\n/**\n * A helper that enables a placeholder on the provided view element (also updates its visibility).\n * The placeholder is a CSS pseudo–element (with a text content) attached to the element.\n *\n * To change the placeholder text, simply call this method again with new options.\n *\n * To disable the placeholder, use {@link module:engine/view/placeholder~disablePlaceholder `disablePlaceholder()`} helper.\n *\n * @param {Object} [options] Configuration options of the placeholder.\n * @param {module:engine/view/view~View} options.view Editing view instance.\n * @param {module:engine/view/element~Element} options.element Element that will gain a placeholder.\n * See `options.isDirectHost` to learn more.\n * @param {String} options.text Placeholder text.\n * @param {Boolean} [options.isDirectHost=true] If set `false`, the placeholder will not be enabled directly\n * in the passed `element` but in one of its children (selected automatically, i.e. a first empty child element).\n * Useful when attaching placeholders to elements that can host other elements (not just text), for instance,\n * editable root elements.\n */\nexport function enablePlaceholder( options ) {\n\tconst { view, element, text, isDirectHost = true } = options;\n\tconst doc = view.document;\n\n\t// Use a single a single post fixer per—document to update all placeholders.\n\tif ( !documentPlaceholders.has( doc ) ) {\n\t\tdocumentPlaceholders.set( doc, new Map() );\n\n\t\t// If a post-fixer callback makes a change, it should return `true` so other post–fixers\n\t\t// can re–evaluate the document again.\n\t\tdoc.registerPostFixer( writer => updateDocumentPlaceholders( doc, writer ) );\n\t}\n\n\t// Store information about the element placeholder under its document.\n\tdocumentPlaceholders.get( doc ).set( element, {\n\t\ttext,\n\t\tisDirectHost\n\t} );\n\n\t// Update the placeholders right away.\n\tview.change( writer => updateDocumentPlaceholders( doc, writer ) );\n}\n\n/**\n * Disables the placeholder functionality from a given element.\n *\n * See {@link module:engine/view/placeholder~enablePlaceholder `enablePlaceholder()`} to learn more.\n *\n * @param {module:engine/view/view~View} view\n * @param {module:engine/view/element~Element} element\n */\nexport function disablePlaceholder( view, element ) {\n\tconst doc = element.document;\n\n\tview.change( writer => {\n\t\tif ( !documentPlaceholders.has( doc ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst placeholders = documentPlaceholders.get( doc );\n\t\tconst config = placeholders.get( element );\n\n\t\twriter.removeAttribute( 'data-placeholder', config.hostElement );\n\t\thidePlaceholder( writer, config.hostElement );\n\n\t\tplaceholders.delete( element );\n\t} );\n}\n\n/**\n * Shows a placeholder in the provided element by changing related attributes and CSS classes.\n *\n * **Note**: This helper will not update the placeholder visibility nor manage the\n * it in any way in the future. What it does is a one–time state change of an element. Use\n * {@link module:engine/view/placeholder~enablePlaceholder `enablePlaceholder()`} and\n * {@link module:engine/view/placeholder~disablePlaceholder `disablePlaceholder()`} for full\n * placeholder functionality.\n *\n * **Note**: This helper will blindly show the placeholder directly in the root editable element if\n * one is passed, which could result in a visual clash if the editable element has some children\n * (for instance, an empty paragraph). Use {@link module:engine/view/placeholder~enablePlaceholder `enablePlaceholder()`}\n * in that case or make sure the correct element is passed to the helper.\n *\n * @param {module:engine/view/downcastwriter~DowncastWriter} writer\n * @param {module:engine/view/element~Element} element\n * @returns {Boolean} `true`, if any changes were made to the `element`.\n */\nexport function showPlaceholder( writer, element ) {\n\tif ( !element.hasClass( 'ck-placeholder' ) ) {\n\t\twriter.addClass( 'ck-placeholder', element );\n\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n\n/**\n * Hides a placeholder in the element by changing related attributes and CSS classes.\n *\n * **Note**: This helper will not update the placeholder visibility nor manage the\n * it in any way in the future. What it does is a one–time state change of an element. Use\n * {@link module:engine/view/placeholder~enablePlaceholder `enablePlaceholder()`} and\n * {@link module:engine/view/placeholder~disablePlaceholder `disablePlaceholder()`} for full\n * placeholder functionality.\n *\n * @param {module:engine/view/downcastwriter~DowncastWriter} writer\n * @param {module:engine/view/element~Element} element\n * @returns {Boolean} `true`, if any changes were made to the `element`.\n */\nexport function hidePlaceholder( writer, element ) {\n\tif ( element.hasClass( 'ck-placeholder' ) ) {\n\t\twriter.removeClass( 'ck-placeholder', element );\n\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n\n/**\n * Checks if a placeholder should be displayed in the element.\n *\n * **Note**: This helper will blindly check the possibility of showing a placeholder directly in the\n * root editable element if one is passed, which may not be the expected result. If an element can\n * host other elements (not just text), most likely one of its children should be checked instead\n * because it will be the final host for the placeholder. Use\n * {@link module:engine/view/placeholder~enablePlaceholder `enablePlaceholder()`} in that case or make\n * sure the correct element is passed to the helper.\n *\n * @param {module:engine/view/element~Element} element\n * @returns {Boolean}\n */\nexport function needsPlaceholder( element ) {\n\tif ( !element.isAttached() ) {\n\t\treturn false;\n\t}\n\n\t// The element is empty only as long as it contains nothing but uiElements.\n\tconst isEmptyish = !Array.from( element.getChildren() )\n\t\t.some( element => !element.is( 'uiElement' ) );\n\n\tconst doc = element.document;\n\n\t// If the element is empty and the document is blurred.\n\tif ( !doc.isFocused && isEmptyish ) {\n\t\treturn true;\n\t}\n\n\tconst viewSelection = doc.selection;\n\tconst selectionAnchor = viewSelection.anchor;\n\n\t// If document is focused and the element is empty but the selection is not anchored inside it.\n\tif ( isEmptyish && selectionAnchor && selectionAnchor.parent !== element ) {\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n\n// Updates all placeholders associated with a document in a post–fixer callback.\n//\n// @private\n// @param { module:engine/view/document~Document} doc\n// @param {module:engine/view/downcastwriter~DowncastWriter} writer\n// @returns {Boolean} True if any changes were made to the view document.\nfunction updateDocumentPlaceholders( doc, writer ) {\n\tconst placeholders = documentPlaceholders.get( doc );\n\tlet wasViewModified = false;\n\n\tfor ( const [ element, config ] of placeholders ) {\n\t\tif ( updatePlaceholder( writer, element, config ) ) {\n\t\t\twasViewModified = true;\n\t\t}\n\t}\n\n\treturn wasViewModified;\n}\n\n// Updates a single placeholder in a post–fixer callback.\n//\n// @private\n// @param {module:engine/view/downcastwriter~DowncastWriter} writer\n// @param {module:engine/view/element~Element} element\n// @param {Object} config Configuration of the placeholder\n// @param {String} config.text\n// @param {Boolean} config.isDirectHost\n// @returns {Boolean} True if any changes were made to the view document.\nfunction updatePlaceholder( writer, element, config ) {\n\tconst { text, isDirectHost } = config;\n\n\tconst hostElement = isDirectHost ? element : getChildPlaceholderHostSubstitute( element );\n\tlet wasViewModified = false;\n\n\t// When not a direct host, it could happen that there is no child element\n\t// capable of displaying a placeholder.\n\tif ( !hostElement ) {\n\t\treturn false;\n\t}\n\n\t// Cache the host element. It will be necessary for disablePlaceholder() to know\n\t// which element should have class and attribute removed because, depending on\n\t// the config.isDirectHost value, it could be the element or one of its descendants.\n\tconfig.hostElement = hostElement;\n\n\t// This may be necessary when updating the placeholder text to something else.\n\tif ( hostElement.getAttribute( 'data-placeholder' ) !== text ) {\n\t\twriter.setAttribute( 'data-placeholder', text, hostElement );\n\t\twasViewModified = true;\n\t}\n\n\tif ( needsPlaceholder( hostElement ) ) {\n\t\tif ( showPlaceholder( writer, hostElement ) ) {\n\t\t\twasViewModified = true;\n\t\t}\n\t} else if ( hidePlaceholder( writer, hostElement ) ) {\n\t\twasViewModified = true;\n\t}\n\n\treturn wasViewModified;\n}\n\n// Gets a child element capable of displaying a placeholder if a parent element can host more\n// than just text (for instance, when it is a root editable element). The child element\n// can then be used in other placeholder helpers as a substitute of its parent.\n//\n// @private\n// @param {module:engine/view/element~Element} parent\n// @returns {module:engine/view/element~Element|null}\nfunction getChildPlaceholderHostSubstitute( parent ) {\n\tif ( parent.childCount === 1 ) {\n\t\tconst firstChild = parent.getChild( 0 );\n\n\t\tif ( firstChild.is( 'element' ) && !firstChild.is( 'uiElement' ) ) {\n\t\t\treturn firstChild;\n\t\t}\n\t}\n\n\treturn null;\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/elementreplacer\n */\n\n/**\n * Utility class allowing to hide existing HTML elements or replace them with given ones in a way that doesn't remove\n * the original elements from the DOM.\n */\nexport default class ElementReplacer {\n\tconstructor() {\n\t\t/**\n\t\t * The elements replaced by {@link #replace} and their replacements.\n\t\t *\n\t\t * @private\n\t\t * @member {Array.<Object>}\n\t\t */\n\t\tthis._replacedElements = [];\n\t}\n\n\t/**\n\t * Hides the `element` and, if specified, inserts the the given element next to it.\n\t *\n\t * The effect of this method can be reverted by {@link #restore}.\n\t *\n\t * @param {HTMLElement} element The element to replace.\n\t * @param {HTMLElement} [newElement] The replacement element. If not passed, then the `element` will just be hidden.\n\t */\n\treplace( element, newElement ) {\n\t\tthis._replacedElements.push( { element, newElement } );\n\n\t\telement.style.display = 'none';\n\n\t\tif ( newElement ) {\n\t\t\telement.parentNode.insertBefore( newElement, element.nextSibling );\n\t\t}\n\t}\n\n\t/**\n\t * Restores what {@link #replace} did.\n\t */\n\trestore() {\n\t\tthis._replacedElements.forEach( ( { element, newElement } ) => {\n\t\t\telement.style.display = '';\n\n\t\t\tif ( newElement ) {\n\t\t\t\tnewElement.remove();\n\t\t\t}\n\t\t} );\n\n\t\tthis._replacedElements = [];\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module editor-classic/classiceditorui\n */\n\nimport EditorUI from '@ckeditor/ckeditor5-core/src/editor/editorui';\nimport enableToolbarKeyboardFocus from '@ckeditor/ckeditor5-ui/src/toolbar/enabletoolbarkeyboardfocus';\nimport normalizeToolbarConfig from '@ckeditor/ckeditor5-ui/src/toolbar/normalizetoolbarconfig';\nimport { enablePlaceholder } from '@ckeditor/ckeditor5-engine/src/view/placeholder';\nimport ElementReplacer from '@ckeditor/ckeditor5-utils/src/elementreplacer';\n\n/**\n * The classic editor UI class.\n *\n * @extends module:core/editor/editorui~EditorUI\n */\nexport default class ClassicEditorUI extends EditorUI {\n\t/**\n\t * Creates an instance of the classic editor UI class.\n\t *\n\t * @param {module:core/editor/editor~Editor} editor The editor instance.\n\t * @param {module:ui/editorui/editoruiview~EditorUIView} view The view of the UI.\n\t */\n\tconstructor( editor, view ) {\n\t\tsuper( editor );\n\n\t\t/**\n\t\t * The main (top–most) view of the editor UI.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/editorui/editoruiview~EditorUIView} #view\n\t\t */\n\t\tthis.view = view;\n\n\t\t/**\n\t\t * A normalized `config.toolbar` object.\n\t\t *\n\t\t * @private\n\t\t * @member {Object}\n\t\t */\n\t\tthis._toolbarConfig = normalizeToolbarConfig( editor.config.get( 'toolbar' ) );\n\n\t\t/**\n\t\t * The element replacer instance used to hide the editor's source element.\n\t\t *\n\t\t * @protected\n\t\t * @member {module:utils/elementreplacer~ElementReplacer}\n\t\t */\n\t\tthis._elementReplacer = new ElementReplacer();\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tget element() {\n\t\treturn this.view.element;\n\t}\n\n\t/**\n\t * Initializes the UI.\n\t *\n\t * @param {HTMLElement|null} replacementElement The DOM element that will be the source for the created editor.\n\t */\n\tinit( replacementElement ) {\n\t\tconst editor = this.editor;\n\t\tconst view = this.view;\n\t\tconst editingView = editor.editing.view;\n\t\tconst editable = view.editable;\n\t\tconst editingRoot = editingView.document.getRoot();\n\n\t\t// The editable UI and editing root should share the same name. Then name is used\n\t\t// to recognize the particular editable, for instance in ARIA attributes.\n\t\teditable.name = editingRoot.rootName;\n\n\t\tview.render();\n\n\t\t// The editable UI element in DOM is available for sure only after the editor UI view has been rendered.\n\t\t// But it can be available earlier if a DOM element has been passed to BalloonEditor.create().\n\t\tconst editableElement = editable.element;\n\n\t\t// Register the editable UI view in the editor. A single editor instance can aggregate multiple\n\t\t// editable areas (roots) but the classic editor has only one.\n\t\tthis.setEditableElement( editable.name, editableElement );\n\n\t\t// Let the global focus tracker know that the editable UI element is focusable and\n\t\t// belongs to the editor. From now on, the focus tracker will sustain the editor focus\n\t\t// as long as the editable is focused (e.g. the user is typing).\n\t\tthis.focusTracker.add( editableElement );\n\n\t\t// Let the editable UI element respond to the changes in the global editor focus\n\t\t// tracker. It has been added to the same tracker a few lines above but, in reality, there are\n\t\t// many focusable areas in the editor, like balloons, toolbars or dropdowns and as long\n\t\t// as they have focus, the editable should act like it is focused too (although technically\n\t\t// it isn't), e.g. by setting the proper CSS class, visually announcing focus to the user.\n\t\t// Doing otherwise will result in editable focus styles disappearing, once e.g. the\n\t\t// toolbar gets focused.\n\t\tview.editable.bind( 'isFocused' ).to( this.focusTracker );\n\n\t\t// Bind the editable UI element to the editing view, making it an end– and entry–point\n\t\t// of the editor's engine. This is where the engine meets the UI.\n\t\teditingView.attachDomRoot( editableElement );\n\n\t\t// If an element containing the initial data of the editor was provided, replace it with\n\t\t// an editor instance's UI in DOM until the editor is destroyed. For instance, a <textarea>\n\t\t// can be such element.\n\t\tif ( replacementElement ) {\n\t\t\tthis._elementReplacer.replace( replacementElement, this.element );\n\t\t}\n\n\t\tthis._initPlaceholder();\n\t\tthis._initToolbar();\n\t\tthis.fire( 'ready' );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tdestroy() {\n\t\tconst view = this.view;\n\t\tconst editingView = this.editor.editing.view;\n\n\t\tthis._elementReplacer.restore();\n\t\teditingView.detachDomRoot( view.editable.name );\n\t\tview.destroy();\n\n\t\tsuper.destroy();\n\t}\n\n\t/**\n\t * Initializes the editor toolbar.\n\t *\n\t * @private\n\t */\n\t_initToolbar() {\n\t\tconst editor = this.editor;\n\t\tconst view = this.view;\n\t\tconst editingView = editor.editing.view;\n\n\t\t// Set–up the sticky panel with toolbar.\n\t\tview.stickyPanel.bind( 'isActive' ).to( this.focusTracker, 'isFocused' );\n\t\tview.stickyPanel.limiterElement = view.element;\n\n\t\tif ( this._toolbarConfig.viewportTopOffset ) {\n\t\t\tview.stickyPanel.viewportTopOffset = this._toolbarConfig.viewportTopOffset;\n\t\t}\n\n\t\tview.toolbar.fillFromConfig( this._toolbarConfig, this.componentFactory );\n\n\t\tenableToolbarKeyboardFocus( {\n\t\t\torigin: editingView,\n\t\t\toriginFocusTracker: this.focusTracker,\n\t\t\toriginKeystrokeHandler: editor.keystrokes,\n\t\t\ttoolbar: view.toolbar\n\t\t} );\n\t}\n\n\t/**\n\t * Enable the placeholder text on the editing root, if any was configured.\n\t *\n\t * @private\n\t */\n\t_initPlaceholder() {\n\t\tconst editor = this.editor;\n\t\tconst editingView = editor.editing.view;\n\t\tconst editingRoot = editingView.document.getRoot();\n\t\tconst sourceElement = editor.sourceElement;\n\n\t\tconst placeholderText = editor.config.get( 'placeholder' ) ||\n\t\t\tsourceElement && sourceElement.tagName.toLowerCase() === 'textarea' && sourceElement.getAttribute( 'placeholder' );\n\n\t\tif ( placeholderText ) {\n\t\t\tenablePlaceholder( {\n\t\t\t\tview: editingView,\n\t\t\t\telement: editingRoot,\n\t\t\t\ttext: placeholderText,\n\t\t\t\tisDirectHost: false\n\t\t\t} );\n\t\t}\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/toolbar/enabletoolbarkeyboardfocus\n */\n\n/**\n * Enables focus/blur toolbar navigation using `Alt+F10` and `Esc` keystrokes.\n *\n * @param {Object} options Options of the utility.\n * @param {*} options.origin A view to which the focus will return when `Esc` is pressed and\n * `options.toolbar` is focused.\n * @param {module:utils/keystrokehandler~KeystrokeHandler} options.originKeystrokeHandler A keystroke\n * handler to register `Alt+F10` keystroke.\n * @param {module:utils/focustracker~FocusTracker} options.originFocusTracker A focus tracker\n * for `options.origin`.\n * @param {module:ui/toolbar/toolbarview~ToolbarView} options.toolbar A toolbar which is to gain\n * focus when `Alt+F10` is pressed.\n * @param {Function} [options.beforeFocus] A callback executed before the `options.toolbar` gains focus\n * upon the `Alt+F10` keystroke.\n * @param {Function} [options.afterBlur] A callback executed after `options.toolbar` loses focus upon\n * `Esc` keystroke but before the focus goes back to `options.origin`.\n */\nexport default function enableToolbarKeyboardFocus( {\n\torigin,\n\toriginKeystrokeHandler,\n\toriginFocusTracker,\n\ttoolbar,\n\tbeforeFocus,\n\tafterBlur\n} ) {\n\t// Because toolbar items can get focus, the overall state of the toolbar must\n\t// also be tracked.\n\toriginFocusTracker.add( toolbar.element );\n\n\t// Focus the toolbar on the keystroke, if not already focused.\n\toriginKeystrokeHandler.set( 'Alt+F10', ( data, cancel ) => {\n\t\tif ( originFocusTracker.isFocused && !toolbar.focusTracker.isFocused ) {\n\t\t\tif ( beforeFocus ) {\n\t\t\t\tbeforeFocus();\n\t\t\t}\n\n\t\t\ttoolbar.focus();\n\n\t\t\tcancel();\n\t\t}\n\t} );\n\n\t// Blur the toolbar and bring the focus back to origin.\n\ttoolbar.keystrokes.set( 'Esc', ( data, cancel ) => {\n\t\tif ( toolbar.focusTracker.isFocused ) {\n\t\t\torigin.focus();\n\n\t\t\tif ( afterBlur ) {\n\t\t\t\tafterBlur();\n\t\t\t}\n\n\t\t\tcancel();\n\t\t}\n\t} );\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/viewcollection\n */\n\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport Collection from '@ckeditor/ckeditor5-utils/src/collection';\n\n/**\n * Collects {@link module:ui/view~View} instances.\n *\n *\t\tconst parentView = new ParentView( locale );\n *\t\tconst collection = new ViewCollection( locale );\n *\n *\t\tcollection.setParent( parentView.element );\n *\n *\t\tconst viewA = new ChildView( locale );\n *\t\tconst viewB = new ChildView( locale );\n *\n * View collection renders and manages view {@link module:ui/view~View#element elements}:\n *\n *\t\tcollection.add( viewA );\n *\t\tcollection.add( viewB );\n *\n *\t\tconsole.log( parentView.element.firsChild ); // -> viewA.element\n *\t\tconsole.log( parentView.element.lastChild ); // -> viewB.element\n *\n * It {@link module:ui/viewcollection~ViewCollection#delegate propagates} DOM events too:\n *\n *\t\t// Delegate #click and #keydown events from viewA and viewB to the parentView.\n *\t\tcollection.delegate( 'click' ).to( parentView );\n *\n *\t\tparentView.on( 'click', ( evt ) => {\n *\t\t\tconsole.log( `${ evt.source } has been clicked.` );\n *\t\t} );\n *\n *\t\t// This event will be delegated to the parentView.\n *\t\tviewB.fire( 'click' );\n *\n * **Note**: A view collection can be used directly in the {@link module:ui/template~TemplateDefinition definition}\n * of a {@link module:ui/template~Template template}.\n *\n * @extends module:utils/collection~Collection\n * @mixes module:utils/observablemixin~ObservableMixin\n */\nexport default class ViewCollection extends Collection {\n\t/**\n\t * Creates a new instance of the {@link module:ui/viewcollection~ViewCollection}.\n\t *\n\t * @param {Iterable.<module:ui/view~View>} [initialItems] The initial items of the collection.\n\t */\n\tconstructor( initialItems = [] ) {\n\t\tsuper( initialItems, {\n\t\t\t// An #id Number attribute should be legal and not break the `ViewCollection` instance.\n\t\t\t// https://github.com/ckeditor/ckeditor5-ui/issues/93\n\t\t\tidProperty: 'viewUid'\n\t\t} );\n\n\t\t// Handle {@link module:ui/view~View#element} in DOM when a new view is added to the collection.\n\t\tthis.on( 'add', ( evt, view, index ) => {\n\t\t\tthis._renderViewIntoCollectionParent( view, index );\n\t\t} );\n\n\t\t// Handle {@link module:ui/view~View#element} in DOM when a view is removed from the collection.\n\t\tthis.on( 'remove', ( evt, view ) => {\n\t\t\tif ( view.element && this._parentElement ) {\n\t\t\t\tview.element.remove();\n\t\t\t}\n\t\t} );\n\n\t\t/**\n\t\t * A parent element within which child views are rendered and managed in DOM.\n\t\t *\n\t\t * @protected\n\t\t * @member {HTMLElement}\n\t\t */\n\t\tthis._parentElement = null;\n\t}\n\n\t/**\n\t * Destroys the view collection along with child views.\n\t * See the view {@link module:ui/view~View#destroy} method.\n\t */\n\tdestroy() {\n\t\tthis.map( view => view.destroy() );\n\t}\n\n\t/**\n\t * Sets the parent HTML element of this collection. When parent is set, {@link #add adding} and\n\t * {@link #remove removing} views in the collection synchronizes their\n\t * {@link module:ui/view~View#element elements} in the parent element.\n\t *\n\t * @param {HTMLElement} element A new parent element.\n\t */\n\tsetParent( elementOrDocFragment ) {\n\t\tthis._parentElement = elementOrDocFragment;\n\n\t\t// Take care of the initial collection items passed to the constructor.\n\t\tfor ( const view of this ) {\n\t\t\tthis._renderViewIntoCollectionParent( view );\n\t\t}\n\t}\n\n\t/**\n\t * Delegates selected events coming from within views in the collection to any\n\t * {@link module:utils/emittermixin~Emitter}.\n\t *\n\t * For the following views and collection:\n\t *\n\t *\t\tconst viewA = new View();\n\t *\t\tconst viewB = new View();\n\t *\t\tconst viewC = new View();\n\t *\n\t *\t\tconst views = parentView.createCollection();\n\t *\n\t *\t\tviews.delegate( 'eventX' ).to( viewB );\n\t *\t\tviews.delegate( 'eventX', 'eventY' ).to( viewC );\n\t *\n\t *\t\tviews.add( viewA );\n\t *\n\t * the `eventX` is delegated (fired by) `viewB` and `viewC` along with `customData`:\n\t *\n\t *\t\tviewA.fire( 'eventX', customData );\n\t *\n\t * and `eventY` is delegated (fired by) `viewC` along with `customData`:\n\t *\n\t *\t\tviewA.fire( 'eventY', customData );\n\t *\n\t * See {@link module:utils/emittermixin~Emitter#delegate}.\n\t *\n\t * @param {...String} events {@link module:ui/view~View} event names to be delegated to another\n\t * {@link module:utils/emittermixin~Emitter}.\n\t * @returns {Object}\n\t * @returns {Function} return.to A function which accepts the destination of\n\t * {@link module:utils/emittermixin~Emitter#delegate delegated} events.\n\t */\n\tdelegate( ...events ) {\n\t\tif ( !events.length || !isStringArray( events ) ) {\n\t\t\t/**\n\t\t\t * All event names must be strings.\n\t\t\t *\n\t\t\t * @error ui-viewcollection-delegate-wrong-events\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'ui-viewcollection-delegate-wrong-events',\n\t\t\t\tthis\n\t\t\t);\n\t\t}\n\n\t\treturn {\n\t\t\t/**\n\t\t\t * Selects destination for {@link module:utils/emittermixin~Emitter#delegate} events.\n\t\t\t *\n\t\t\t * @memberOf module:ui/viewcollection~ViewCollection#delegate\n\t\t\t * @function module:ui/viewcollection~ViewCollection#delegate.to\n\t\t\t * @param {module:utils/emittermixin~Emitter} dest An `Emitter` instance which is\n\t\t\t * the destination for delegated events.\n\t\t\t */\n\t\t\tto: dest => {\n\t\t\t\t// Activate delegating on existing views in this collection.\n\t\t\t\tfor ( const view of this ) {\n\t\t\t\t\tfor ( const evtName of events ) {\n\t\t\t\t\t\tview.delegate( evtName ).to( dest );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Activate delegating on future views in this collection.\n\t\t\t\tthis.on( 'add', ( evt, view ) => {\n\t\t\t\t\tfor ( const evtName of events ) {\n\t\t\t\t\t\tview.delegate( evtName ).to( dest );\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t\t// Deactivate delegating when view is removed from this collection.\n\t\t\t\tthis.on( 'remove', ( evt, view ) => {\n\t\t\t\t\tfor ( const evtName of events ) {\n\t\t\t\t\t\tview.stopDelegating( evtName, dest );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\t\t};\n\t}\n\n\t/**\n\t * This method {@link module:ui/view~View#render renders} a new view added to the collection.\n\t *\n\t * If the {@link #_parentElement parent element} of the collection is set, this method also adds\n\t * the view's {@link module:ui/view~View#element} as a child of the parent in DOM at a specified index.\n\t *\n\t * **Note**: If index is not specified, the view's element is pushed as the last child\n\t * of the parent element.\n\t *\n\t * @private\n\t * @param {module:ui/view~View} view A new view added to the collection.\n\t * @param {Number} [index] An index the view holds in the collection. When not specified,\n\t * the view is added at the end.\n\t */\n\t_renderViewIntoCollectionParent( view, index ) {\n\t\tif ( !view.isRendered ) {\n\t\t\tview.render();\n\t\t}\n\n\t\tif ( view.element && this._parentElement ) {\n\t\t\tthis._parentElement.insertBefore( view.element, this._parentElement.children[ index ] );\n\t\t}\n\t}\n\n\t/**\n\t * Removes a child view from the collection. If the {@link #setParent parent element} of the\n\t * collection has been set, the {@link module:ui/view~View#element element} of the view is also removed\n\t * in DOM, reflecting the order of the collection.\n\t *\n\t * See the {@link #add} method.\n\t *\n\t * @method #remove\n\t * @param {module:ui/view~View|Number|String} subject The view to remove, its id or index in the collection.\n\t * @returns {Object} The removed view.\n\t */\n}\n\n// Check if all entries of the array are of `String` type.\n//\n// @private\n// @param {Array} arr An array to be checked.\n// @returns {Boolean}\nfunction isStringArray( arr ) {\n\treturn arr.every( a => typeof a == 'string' );\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/template\n */\n\n/* global document */\n\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\nimport EmitterMixin from '@ckeditor/ckeditor5-utils/src/emittermixin';\nimport View from './view';\nimport ViewCollection from './viewcollection';\nimport isNode from '@ckeditor/ckeditor5-utils/src/dom/isnode';\nimport { isObject, cloneDeepWith } from 'lodash-es';\nimport toArray from '@ckeditor/ckeditor5-utils/src/toarray';\n\nconst xhtmlNs = 'http://www.w3.org/1999/xhtml';\n\n/**\n * A basic Template class. It renders a DOM HTML element or text from a\n * {@link module:ui/template~TemplateDefinition definition} and supports element attributes, children,\n * bindings to {@link module:utils/observablemixin~Observable observables} and DOM event propagation.\n *\n * A simple template can look like this:\n *\n *\t\tconst bind = Template.bind( observable, emitter );\n *\n *\t\tnew Template( {\n *\t\t\ttag: 'p',\n *\t\t\tattributes: {\n *\t\t\t\tclass: 'foo',\n *\t\t\t\tstyle: {\n *\t\t\t\t\tbackgroundColor: 'yellow'\n *\t\t\t\t}\n *\t\t\t},\n *\t\t\ton: {\n *\t\t\t\tclick: bind.to( 'clicked' )\n *\t\t\t},\n *\t\t\tchildren: [\n *\t\t\t\t'A paragraph.'\n *\t\t\t]\n *\t\t} ).render();\n *\n * and it will render the following HTML element:\n *\n *\t\t<p class=\"foo\" style=\"background-color: yellow;\">A paragraph.</p>\n *\n * Additionally, the `observable` will always fire `clicked` upon clicking `<p>` in the DOM.\n *\n * See {@link module:ui/template~TemplateDefinition} to know more about templates and complex\n * template definitions.\n *\n* @mixes module:utils/emittermixin~EmitterMixin\n */\nexport default class Template {\n\t/**\n\t * Creates an instance of the {@link ~Template} class.\n\t *\n\t * @param {module:ui/template~TemplateDefinition} def The definition of the template.\n\t */\n\tconstructor( def ) {\n\t\tObject.assign( this, normalize( clone( def ) ) );\n\n\t\t/**\n\t\t * Indicates whether this particular Template instance has been\n\t\t * {@link #render rendered}.\n\t\t *\n\t\t * @readonly\n\t\t * @protected\n\t\t * @member {Boolean}\n\t\t */\n\t\tthis._isRendered = false;\n\n\t\t/**\n\t\t * The tag (`tagName`) of this template, e.g. `div`. It also indicates that the template\n\t\t * renders to an HTML element.\n\t\t *\n\t\t * @member {String} #tag\n\t\t */\n\n\t\t/**\n\t\t * The text of the template. It also indicates that the template renders to a DOM text node.\n\t\t *\n\t\t * @member {Array.<String|module:ui/template~TemplateValueSchema>} #text\n\t\t */\n\n\t\t/**\n\t\t * The attributes of the template, e.g. `{ id: [ 'ck-id' ] }`, corresponding with\n\t\t * the attributes of an HTML element.\n\t\t *\n\t\t * **Note**: This property only makes sense when {@link #tag} is defined.\n\t\t *\n\t\t * @member {Object} #attributes\n\t\t */\n\n\t\t/**\n\t\t * The children of the template. They can be either:\n\t\t * * independent instances of {@link ~Template} (sub–templates),\n\t\t * * native DOM Nodes.\n\t\t *\n\t\t * **Note**: This property only makes sense when {@link #tag} is defined.\n\t\t *\n\t\t * @member {Array.<module:ui/template~Template|Node>} #children\n\t\t */\n\n\t\t/**\n\t\t * The DOM event listeners of the template.\n\t\t *\n\t\t * @member {Object} #eventListeners\n\t\t */\n\n\t\t/**\n\t\t * The data used by the {@link #revert} method to restore a node to its original state.\n\t\t *\n\t\t * See: {@link #apply}.\n\t\t *\n\t\t * @readonly\n\t\t * @protected\n\t\t * @member {module:ui/template~RenderData}\n\t\t */\n\t\tthis._revertData = null;\n\t}\n\n\t/**\n\t * Renders a DOM Node (an HTML element or text) out of the template.\n\t *\n\t *\t\tconst domNode = new Template( { ... } ).render();\n\t *\n\t * See: {@link #apply}.\n\t *\n\t * @returns {HTMLElement|Text}\n\t */\n\trender() {\n\t\tconst node = this._renderNode( {\n\t\t\tintoFragment: true\n\t\t} );\n\n\t\tthis._isRendered = true;\n\n\t\treturn node;\n\t}\n\n\t/**\n\t * Applies the template to an existing DOM Node, either HTML element or text.\n\t *\n\t * **Note:** No new DOM nodes will be created. Applying extends:\n\t *\n\t * {@link module:ui/template~TemplateDefinition attributes},\n\t * {@link module:ui/template~TemplateDefinition event listeners}, and\n\t * `textContent` of {@link module:ui/template~TemplateDefinition children} only.\n\t *\n\t * **Note:** Existing `class` and `style` attributes are extended when a template\n\t * is applied to an HTML element, while other attributes and `textContent` are overridden.\n\t *\n\t * **Note:** The process of applying a template can be easily reverted using the\n\t * {@link module:ui/template~Template#revert} method.\n\t *\n\t *\t\tconst element = document.createElement( 'div' );\n\t *\t\tconst observable = new Model( { divClass: 'my-div' } );\n\t *\t\tconst emitter = Object.create( EmitterMixin );\n\t *\t\tconst bind = Template.bind( observable, emitter );\n\t *\n\t *\t\tnew Template( {\n\t *\t\t\tattributes: {\n\t *\t\t\t\tid: 'first-div',\n\t *\t\t\t\tclass: bind.to( 'divClass' )\n\t *\t\t\t},\n\t *\t\t\ton: {\n\t *\t\t\t\tclick: bind( 'elementClicked' ) // Will be fired by the observable.\n\t *\t\t\t},\n\t *\t\t\tchildren: [\n\t *\t\t\t\t'Div text.'\n\t *\t\t\t]\n\t *\t\t} ).apply( element );\n\t *\n\t *\t\tconsole.log( element.outerHTML ); // -> '<div id=\"first-div\" class=\"my-div\"></div>'\n\t *\n\t * @see module:ui/template~Template#render\n\t * @see module:ui/template~Template#revert\n\t * @param {Node} node Root node for the template to apply.\n\t */\n\tapply( node ) {\n\t\tthis._revertData = getEmptyRevertData();\n\n\t\tthis._renderNode( {\n\t\t\tnode,\n\t\t\tisApplying: true,\n\t\t\trevertData: this._revertData\n\t\t} );\n\n\t\treturn node;\n\t}\n\n\t/**\n\t * Reverts a template {@link module:ui/template~Template#apply applied} to a DOM node.\n\t *\n\t * @param {Node} node The root node for the template to revert. In most of the cases, it is the\n\t * same node used by {@link module:ui/template~Template#apply}.\n\t */\n\trevert( node ) {\n\t\tif ( !this._revertData ) {\n\t\t\t/**\n\t\t\t * Attempting to revert a template which has not been applied yet.\n\t\t\t *\n\t\t\t * @error ui-template-revert-not-applied\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'ui-template-revert-not-applied',\n\t\t\t\t[ this, node ]\n\t\t\t);\n\t\t}\n\n\t\tthis._revertTemplateFromNode( node, this._revertData );\n\t}\n\n\t/**\n\t * Returns an iterator which traverses the template in search of {@link module:ui/view~View}\n\t * instances and returns them one by one.\n\t *\n\t *\t\tconst viewFoo = new View();\n\t *\t\tconst viewBar = new View();\n\t *\t\tconst viewBaz = new View();\n\t *\t\tconst template = new Template( {\n\t *\t\t\ttag: 'div',\n\t *\t\t\tchildren: [\n\t *\t\t\t\tviewFoo,\n\t *\t\t\t\t{\n\t *\t\t\t\t\ttag: 'div',\n\t *\t\t\t\t\tchildren: [\n\t *\t\t\t\t\t\tviewBar\n\t *\t\t\t\t\t]\n\t *\t\t\t\t},\n\t *\t\t\t\tviewBaz\n\t *\t\t\t]\n\t *\t\t} );\n\t *\n\t *\t\t// Logs: viewFoo, viewBar, viewBaz\n\t *\t\tfor ( const view of template.getViews() ) {\n\t *\t\t\tconsole.log( view );\n\t *\t\t}\n\t *\n\t * @returns {Iterable.<module:ui/view~View>}\n\t */\n\t* getViews() {\n\t\tfunction* search( def ) {\n\t\t\tif ( def.children ) {\n\t\t\t\tfor ( const child of def.children ) {\n\t\t\t\t\tif ( isView( child ) ) {\n\t\t\t\t\t\tyield child;\n\t\t\t\t\t} else if ( isTemplate( child ) ) {\n\t\t\t\t\t\tyield* search( child );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tyield* search( this );\n\t}\n\n\t/**\n\t * An entry point to the interface which binds DOM nodes to\n\t * {@link module:utils/observablemixin~Observable observables}.\n\t * There are two types of bindings:\n\t *\n\t * * HTML element attributes or text `textContent` synchronized with attributes of an\n\t * {@link module:utils/observablemixin~Observable}. Learn more about {@link module:ui/template~BindChain#to}\n\t * and {@link module:ui/template~BindChain#if}.\n\t *\n\t *\t\tconst bind = Template.bind( observable, emitter );\n\t *\n\t *\t\tnew Template( {\n\t *\t\t\tattributes: {\n\t *\t\t\t\t// Binds the element \"class\" attribute to observable#classAttribute.\n\t *\t\t\t\tclass: bind.to( 'classAttribute' )\n\t *\t\t\t}\n\t *\t\t} ).render();\n\t *\n\t * * DOM events fired on HTML element propagated through\n\t * {@link module:utils/observablemixin~Observable}. Learn more about {@link module:ui/template~BindChain#to}.\n\t *\n\t *\t\tconst bind = Template.bind( observable, emitter );\n\t *\n\t *\t\tnew Template( {\n\t *\t\t\ton: {\n\t *\t\t\t\t// Will be fired by the observable.\n\t *\t\t\t\tclick: bind( 'elementClicked' )\n\t *\t\t\t}\n\t *\t\t} ).render();\n\t *\n\t * Also see {@link module:ui/view~View#bindTemplate}.\n\t *\n\t * @param {module:utils/observablemixin~Observable} observable An observable which provides boundable attributes.\n\t * @param {module:utils/emittermixin~Emitter} emitter An emitter that listens to observable attribute\n\t * changes or DOM Events (depending on the kind of the binding). Usually, a {@link module:ui/view~View} instance.\n\t * @returns {module:ui/template~BindChain}\n\t */\n\tstatic bind( observable, emitter ) {\n\t\treturn {\n\t\t\tto( eventNameOrFunctionOrAttribute, callback ) {\n\t\t\t\treturn new TemplateToBinding( {\n\t\t\t\t\teventNameOrFunction: eventNameOrFunctionOrAttribute,\n\t\t\t\t\tattribute: eventNameOrFunctionOrAttribute,\n\t\t\t\t\tobservable, emitter, callback\n\t\t\t\t} );\n\t\t\t},\n\n\t\t\tif( attribute, valueIfTrue, callback ) {\n\t\t\t\treturn new TemplateIfBinding( {\n\t\t\t\t\tobservable, emitter, attribute, valueIfTrue, callback\n\t\t\t\t} );\n\t\t\t}\n\t\t};\n\t}\n\n\t/**\n\t * Extends an existing {@link module:ui/template~Template} instance with some additional content\n\t * from another {@link module:ui/template~TemplateDefinition}.\n\t *\n\t *\t\tconst bind = Template.bind( observable, emitter );\n\t *\n\t *\t\tconst template = new Template( {\n\t *\t\t\ttag: 'p',\n\t *\t\t\tattributes: {\n\t *\t\t\t\tclass: 'a',\n\t *\t\t\t\tdata-x: bind.to( 'foo' )\n\t *\t\t\t},\n\t *\t\t\tchildren: [\n\t *\t\t\t\t{\n\t *\t\t\t\t\ttag: 'span',\n\t *\t\t\t\t\tattributes: {\n\t *\t\t\t\t\t\tclass: 'b'\n\t *\t\t\t\t\t},\n\t *\t\t\t\t\tchildren: [\n\t *\t\t\t\t\t\t'Span'\n\t *\t\t\t\t\t]\n\t *\t\t\t\t}\n\t *\t\t\t]\n\t *\t\t } );\n\t *\n\t *\t\t// Instance-level extension.\n\t *\t\tTemplate.extend( template, {\n\t *\t\t\tattributes: {\n\t *\t\t\t\tclass: 'b',\n\t *\t\t\t\tdata-x: bind.to( 'bar' )\n\t *\t\t\t},\n\t *\t\t\tchildren: [\n\t *\t\t\t\t{\n\t *\t\t\t\t\tattributes: {\n\t *\t\t\t\t\t\tclass: 'c'\n\t *\t\t\t\t\t}\n\t *\t\t\t\t}\n\t *\t\t\t]\n\t *\t\t} );\n\t *\n\t *\t\t// Child extension.\n\t *\t\tTemplate.extend( template.children[ 0 ], {\n\t *\t\t\tattributes: {\n\t *\t\t\t\tclass: 'd'\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t * the `outerHTML` of `template.render()` is:\n\t *\n\t *\t\t<p class=\"a b\" data-x=\"{ observable.foo } { observable.bar }\">\n\t *\t\t\t<span class=\"b c d\">Span</span>\n\t *\t\t</p>\n\t *\n\t * @param {module:ui/template~Template} template An existing template instance to be extended.\n\t * @param {module:ui/template~TemplateDefinition} def Additional definition to be applied to a template.\n\t */\n\tstatic extend( template, def ) {\n\t\tif ( template._isRendered ) {\n\t\t\t/**\n\t\t\t * Extending a template after rendering may not work as expected. To make sure\n\t\t\t * the {@link module:ui/template~Template.extend extending} works for an element,\n\t\t\t * make sure it happens before {@link #render} is called.\n\t\t\t *\n\t\t\t * @error template-extend-render\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'template-extend-render',\n\t\t\t\t[ this, template ]\n\t\t\t);\n\t\t}\n\n\t\textendTemplate( template, normalize( clone( def ) ) );\n\t}\n\n\t/**\n\t * Renders a DOM Node (either an HTML element or text) out of the template.\n\t *\n\t * @protected\n\t * @param {module:ui/template~RenderData} data Rendering data.\n\t */\n\t_renderNode( data ) {\n\t\tlet isInvalid;\n\n\t\tif ( data.node ) {\n\t\t\t// When applying, a definition cannot have \"tag\" and \"text\" at the same time.\n\t\t\tisInvalid = this.tag && this.text;\n\t\t} else {\n\t\t\t// When rendering, a definition must have either \"tag\" or \"text\": XOR( this.tag, this.text ).\n\t\t\tisInvalid = this.tag ? this.text : !this.text;\n\t\t}\n\n\t\tif ( isInvalid ) {\n\t\t\t/**\n\t\t\t * Node definition cannot have the \"tag\" and \"text\" properties at the same time.\n\t\t\t * Node definition must have either \"tag\" or \"text\" when rendering a new Node.\n\t\t\t *\n\t\t\t * @error ui-template-wrong-syntax\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'ui-template-wrong-syntax',\n\t\t\t\tthis\n\t\t\t);\n\t\t}\n\n\t\tif ( this.text ) {\n\t\t\treturn this._renderText( data );\n\t\t} else {\n\t\t\treturn this._renderElement( data );\n\t\t}\n\t}\n\n\t/**\n\t * Renders an HTML element out of the template.\n\t *\n\t * @protected\n\t * @param {module:ui/template~RenderData} data Rendering data.\n\t */\n\t_renderElement( data ) {\n\t\tlet node = data.node;\n\n\t\tif ( !node ) {\n\t\t\tnode = data.node = document.createElementNS( this.ns || xhtmlNs, this.tag );\n\t\t}\n\n\t\tthis._renderAttributes( data );\n\t\tthis._renderElementChildren( data );\n\t\tthis._setUpListeners( data );\n\n\t\treturn node;\n\t}\n\n\t/**\n\t * Renders a text node out of {@link module:ui/template~Template#text}.\n\t *\n\t * @protected\n\t * @param {module:ui/template~RenderData} data Rendering data.\n\t */\n\t_renderText( data ) {\n\t\tlet node = data.node;\n\n\t\t// Save the original textContent to revert it in #revert().\n\t\tif ( node ) {\n\t\t\tdata.revertData.text = node.textContent;\n\t\t} else {\n\t\t\tnode = data.node = document.createTextNode( '' );\n\t\t}\n\n\t\t// Check if this Text Node is bound to Observable. Cases:\n\t\t//\n\t\t//\t\ttext: [ Template.bind( ... ).to( ... ) ]\n\t\t//\n\t\t//\t\ttext: [\n\t\t//\t\t\t'foo',\n\t\t//\t\t\tTemplate.bind( ... ).to( ... ),\n\t\t//\t\t\t...\n\t\t//\t\t]\n\t\t//\n\t\tif ( hasTemplateBinding( this.text ) ) {\n\t\t\tthis._bindToObservable( {\n\t\t\t\tschema: this.text,\n\t\t\t\tupdater: getTextUpdater( node ),\n\t\t\t\tdata\n\t\t\t} );\n\t\t}\n\t\t// Simply set text. Cases:\n\t\t//\n\t\t//\t\ttext: [ 'all', 'are', 'static' ]\n\t\t//\n\t\t//\t\ttext: [ 'foo' ]\n\t\t//\n\t\telse {\n\t\t\tnode.textContent = this.text.join( '' );\n\t\t}\n\n\t\treturn node;\n\t}\n\n\t/**\n\t * Renders HTML element attributes out of {@link module:ui/template~Template#attributes}.\n\t *\n\t * @protected\n\t * @param {module:ui/template~RenderData} data Rendering data.\n\t */\n\t_renderAttributes( data ) {\n\t\tlet attrName, attrValue, domAttrValue, attrNs;\n\n\t\tif ( !this.attributes ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst node = data.node;\n\t\tconst revertData = data.revertData;\n\n\t\tfor ( attrName in this.attributes ) {\n\t\t\t// Current attribute value in DOM.\n\t\t\tdomAttrValue = node.getAttribute( attrName );\n\n\t\t\t// The value to be set.\n\t\t\tattrValue = this.attributes[ attrName ];\n\n\t\t\t// Save revert data.\n\t\t\tif ( revertData ) {\n\t\t\t\trevertData.attributes[ attrName ] = domAttrValue;\n\t\t\t}\n\n\t\t\t// Detect custom namespace:\n\t\t\t//\n\t\t\t//\t\tclass: {\n\t\t\t//\t\t\tns: 'abc',\n\t\t\t//\t\t\tvalue: Template.bind( ... ).to( ... )\n\t\t\t//\t\t}\n\t\t\t//\n\t\t\tattrNs = ( isObject( attrValue[ 0 ] ) && attrValue[ 0 ].ns ) ? attrValue[ 0 ].ns : null;\n\n\t\t\t// Activate binding if one is found. Cases:\n\t\t\t//\n\t\t\t//\t\tclass: [\n\t\t\t//\t\t\tTemplate.bind( ... ).to( ... )\n\t\t\t//\t\t]\n\t\t\t//\n\t\t\t//\t\tclass: [\n\t\t\t//\t\t\t'bar',\n\t\t\t//\t\t\tTemplate.bind( ... ).to( ... ),\n\t\t\t//\t\t\t'baz'\n\t\t\t//\t\t]\n\t\t\t//\n\t\t\t//\t\tclass: {\n\t\t\t//\t\t\tns: 'abc',\n\t\t\t//\t\t\tvalue: Template.bind( ... ).to( ... )\n\t\t\t//\t\t}\n\t\t\t//\n\t\t\tif ( hasTemplateBinding( attrValue ) ) {\n\t\t\t\t// Normalize attributes with additional data like namespace:\n\t\t\t\t//\n\t\t\t\t//\t\tclass: {\n\t\t\t\t//\t\t\tns: 'abc',\n\t\t\t\t//\t\t\tvalue: [ ... ]\n\t\t\t\t//\t\t}\n\t\t\t\t//\n\t\t\t\tconst valueToBind = attrNs ? attrValue[ 0 ].value : attrValue;\n\n\t\t\t\t// Extend the original value of attributes like \"style\" and \"class\",\n\t\t\t\t// don't override them.\n\t\t\t\tif ( revertData && shouldExtend( attrName ) ) {\n\t\t\t\t\tvalueToBind.unshift( domAttrValue );\n\t\t\t\t}\n\n\t\t\t\tthis._bindToObservable( {\n\t\t\t\t\tschema: valueToBind,\n\t\t\t\t\tupdater: getAttributeUpdater( node, attrName, attrNs ),\n\t\t\t\t\tdata\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\t// Style attribute could be an Object so it needs to be parsed in a specific way.\n\t\t\t//\n\t\t\t//\t\tstyle: {\n\t\t\t//\t\t\twidth: '100px',\n\t\t\t//\t\t\theight: Template.bind( ... ).to( ... )\n\t\t\t//\t\t}\n\t\t\t//\n\t\t\telse if ( attrName == 'style' && typeof attrValue[ 0 ] !== 'string' ) {\n\t\t\t\tthis._renderStyleAttribute( attrValue[ 0 ], data );\n\t\t\t}\n\n\t\t\t// Otherwise simply set the static attribute:\n\t\t\t//\n\t\t\t//\t\tclass: [ 'foo' ]\n\t\t\t//\n\t\t\t//\t\tclass: [ 'all', 'are', 'static' ]\n\t\t\t//\n\t\t\t//\t\tclass: [\n\t\t\t//\t\t\t{\n\t\t\t//\t\t\t\tns: 'abc',\n\t\t\t//\t\t\t\tvalue: [ 'foo' ]\n\t\t\t//\t\t\t}\n\t\t\t//\t\t]\n\t\t\t//\n\t\t\telse {\n\t\t\t\t// Extend the original value of attributes like \"style\" and \"class\",\n\t\t\t\t// don't override them.\n\t\t\t\tif ( revertData && domAttrValue && shouldExtend( attrName ) ) {\n\t\t\t\t\tattrValue.unshift( domAttrValue );\n\t\t\t\t}\n\n\t\t\t\tattrValue = attrValue\n\t\t\t\t\t// Retrieve \"values\" from:\n\t\t\t\t\t//\n\t\t\t\t\t//\t\tclass: [\n\t\t\t\t\t//\t\t\t{\n\t\t\t\t\t//\t\t\t\tns: 'abc',\n\t\t\t\t\t//\t\t\t\tvalue: [ ... ]\n\t\t\t\t\t//\t\t\t}\n\t\t\t\t\t//\t\t]\n\t\t\t\t\t//\n\t\t\t\t\t.map( val => val ? ( val.value || val ) : val )\n\t\t\t\t\t// Flatten the array.\n\t\t\t\t\t.reduce( ( prev, next ) => prev.concat( next ), [] )\n\t\t\t\t\t// Convert into string.\n\t\t\t\t\t.reduce( arrayValueReducer, '' );\n\n\t\t\t\tif ( !isFalsy( attrValue ) ) {\n\t\t\t\t\tnode.setAttributeNS( attrNs, attrName, attrValue );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Renders the `style` attribute of an HTML element based on\n\t * {@link module:ui/template~Template#attributes}.\n\t *\n\t * A style attribute is an {Object} with static values:\n\t *\n\t *\t\tattributes: {\n\t *\t\t\tstyle: {\n\t *\t\t\t\tcolor: 'red'\n\t *\t\t\t}\n\t *\t\t}\n\t *\n\t * or values bound to {@link module:ui/model~Model} properties:\n\t *\n\t *\t\tattributes: {\n\t *\t\t\tstyle: {\n\t *\t\t\t\tcolor: bind.to( ... )\n\t *\t\t\t}\n\t *\t\t}\n\t *\n\t * Note: The `style` attribute is rendered without setting the namespace. It does not seem to be\n\t * needed.\n\t *\n\t * @private\n\t * @param {Object} styles Styles located in `attributes.style` of {@link module:ui/template~TemplateDefinition}.\n\t * @param {module:ui/template~RenderData} data Rendering data.\n\t */\n\t_renderStyleAttribute( styles, data ) {\n\t\tconst node = data.node;\n\n\t\tfor ( const styleName in styles ) {\n\t\t\tconst styleValue = styles[ styleName ];\n\n\t\t\t// Cases:\n\t\t\t//\n\t\t\t//\t\tstyle: {\n\t\t\t//\t\t\tcolor: bind.to( 'attribute' )\n\t\t\t//\t\t}\n\t\t\t//\n\t\t\tif ( hasTemplateBinding( styleValue ) ) {\n\t\t\t\tthis._bindToObservable( {\n\t\t\t\t\tschema: [ styleValue ],\n\t\t\t\t\tupdater: getStyleUpdater( node, styleName ),\n\t\t\t\t\tdata\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\t// Cases:\n\t\t\t//\n\t\t\t//\t\tstyle: {\n\t\t\t//\t\t\tcolor: 'red'\n\t\t\t//\t\t}\n\t\t\t//\n\t\t\telse {\n\t\t\t\tnode.style[ styleName ] = styleValue;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Recursively renders HTML element's children from {@link module:ui/template~Template#children}.\n\t *\n\t * @protected\n\t * @param {module:ui/template~RenderData} data Rendering data.\n\t */\n\t_renderElementChildren( data ) {\n\t\tconst node = data.node;\n\t\tconst container = data.intoFragment ? document.createDocumentFragment() : node;\n\t\tconst isApplying = data.isApplying;\n\t\tlet childIndex = 0;\n\n\t\tfor ( const child of this.children ) {\n\t\t\tif ( isViewCollection( child ) ) {\n\t\t\t\tif ( !isApplying ) {\n\t\t\t\t\tchild.setParent( node );\n\n\t\t\t\t\t// Note: ViewCollection renders its children.\n\t\t\t\t\tfor ( const view of child ) {\n\t\t\t\t\t\tcontainer.appendChild( view.element );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if ( isView( child ) ) {\n\t\t\t\tif ( !isApplying ) {\n\t\t\t\t\tif ( !child.isRendered ) {\n\t\t\t\t\t\tchild.render();\n\t\t\t\t\t}\n\n\t\t\t\t\tcontainer.appendChild( child.element );\n\t\t\t\t}\n\t\t\t} else if ( isNode( child ) ) {\n\t\t\t\tcontainer.appendChild( child );\n\t\t\t} else {\n\t\t\t\tif ( isApplying ) {\n\t\t\t\t\tconst revertData = data.revertData;\n\t\t\t\t\tconst childRevertData = getEmptyRevertData();\n\n\t\t\t\t\trevertData.children.push( childRevertData );\n\n\t\t\t\t\tchild._renderNode( {\n\t\t\t\t\t\tnode: container.childNodes[ childIndex++ ],\n\t\t\t\t\t\tisApplying: true,\n\t\t\t\t\t\trevertData: childRevertData\n\t\t\t\t\t} );\n\t\t\t\t} else {\n\t\t\t\t\tcontainer.appendChild( child.render() );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ( data.intoFragment ) {\n\t\t\tnode.appendChild( container );\n\t\t}\n\t}\n\n\t/**\n\t * Activates `on` event listeners from the {@link module:ui/template~TemplateDefinition}\n\t * on an HTML element.\n\t *\n\t * @protected\n\t * @param {module:ui/template~RenderData} data Rendering data.\n\t */\n\t_setUpListeners( data ) {\n\t\tif ( !this.eventListeners ) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor ( const key in this.eventListeners ) {\n\t\t\tconst revertBindings = this.eventListeners[ key ].map( schemaItem => {\n\t\t\t\tconst [ domEvtName, domSelector ] = key.split( '@' );\n\n\t\t\t\treturn schemaItem.activateDomEventListener( domEvtName, domSelector, data );\n\t\t\t} );\n\n\t\t\tif ( data.revertData ) {\n\t\t\t\tdata.revertData.bindings.push( revertBindings );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * For a given {@link module:ui/template~TemplateValueSchema} containing {@link module:ui/template~TemplateBinding}\n\t * activates the binding and sets its initial value.\n\t *\n\t * Note: {@link module:ui/template~TemplateValueSchema} can be for HTML element attributes or\n\t * text node `textContent`.\n\t *\n\t * @protected\n\t * @param {Object} options Binding options.\n\t * @param {module:ui/template~TemplateValueSchema} options.schema\n\t * @param {Function} options.updater A function which updates the DOM (like attribute or text).\n\t * @param {module:ui/template~RenderData} options.data Rendering data.\n\t */\n\t_bindToObservable( { schema, updater, data } ) {\n\t\tconst revertData = data.revertData;\n\n\t\t// Set initial values.\n\t\tsyncValueSchemaValue( schema, updater, data );\n\n\t\tconst revertBindings = schema\n\t\t\t// Filter \"falsy\" (false, undefined, null, '') value schema components out.\n\t\t\t.filter( item => !isFalsy( item ) )\n\t\t\t// Filter inactive bindings from schema, like static strings ('foo'), numbers (42), etc.\n\t\t\t.filter( item => item.observable )\n\t\t\t// Once only the actual binding are left, let the emitter listen to observable change:attribute event.\n\t\t\t// TODO: Reduce the number of listeners attached as many bindings may listen\n\t\t\t// to the same observable attribute.\n\t\t\t.map( templateBinding => templateBinding.activateAttributeListener( schema, updater, data ) );\n\n\t\tif ( revertData ) {\n\t\t\trevertData.bindings.push( revertBindings );\n\t\t}\n\t}\n\n\t/**\n\t * Reverts {@link module:ui/template~RenderData#revertData template data} from a node to\n\t * return it to the original state.\n\t *\n\t * @protected\n\t * @param {HTMLElement|Text} node A node to be reverted.\n\t * @param {Object} revertData An object that stores information about what changes have been made by\n\t * {@link #apply} to the node. See {@link module:ui/template~RenderData#revertData} for more information.\n\t */\n\t_revertTemplateFromNode( node, revertData ) {\n\t\tfor ( const binding of revertData.bindings ) {\n\t\t\t// Each binding may consist of several observable+observable#attribute.\n\t\t\t// like the following has 2:\n\t\t\t//\n\t\t\t//\t\tclass: [\n\t\t\t//\t\t\t'x',\n\t\t\t//\t\t\tbind.to( 'foo' ),\n\t\t\t//\t\t\t'y',\n\t\t\t//\t\t\tbind.to( 'bar' )\n\t\t\t//\t\t]\n\t\t\t//\n\t\t\tfor ( const revertBinding of binding ) {\n\t\t\t\trevertBinding();\n\t\t\t}\n\t\t}\n\n\t\tif ( revertData.text ) {\n\t\t\tnode.textContent = revertData.text;\n\n\t\t\treturn;\n\t\t}\n\n\t\tfor ( const attrName in revertData.attributes ) {\n\t\t\tconst attrValue = revertData.attributes[ attrName ];\n\n\t\t\t// When the attribute has **not** been set before #apply().\n\t\t\tif ( attrValue === null ) {\n\t\t\t\tnode.removeAttribute( attrName );\n\t\t\t} else {\n\t\t\t\tnode.setAttribute( attrName, attrValue );\n\t\t\t}\n\t\t}\n\n\t\tfor ( let i = 0; i < revertData.children.length; ++i ) {\n\t\t\tthis._revertTemplateFromNode( node.childNodes[ i ], revertData.children[ i ] );\n\t\t}\n\t}\n}\n\nmix( Template, EmitterMixin );\n\n/**\n * Describes a binding created by the {@link module:ui/template~Template.bind} interface.\n *\n * @protected\n */\nexport class TemplateBinding {\n\t/**\n\t * Creates an instance of the {@link module:ui/template~TemplateBinding} class.\n\t *\n\t * @param {module:ui/template~TemplateDefinition} def The definition of the binding.\n\t */\n\tconstructor( def ) {\n\t\tObject.assign( this, def );\n\n\t\t/**\n\t\t * An observable instance of the binding. It either:\n\t\t *\n\t\t * * provides the attribute with the value,\n\t\t * * or passes the event when a corresponding DOM event is fired.\n\t\t *\n\t\t * @member {module:utils/observablemixin~ObservableMixin} module:ui/template~TemplateBinding#observable\n\t\t */\n\n\t\t/**\n\t\t * An {@link module:utils/emittermixin~Emitter} used by the binding to:\n\t\t *\n\t\t * * listen to the attribute change in the {@link module:ui/template~TemplateBinding#observable},\n\t\t * * or listen to the event in the DOM.\n\t\t *\n\t\t * @member {module:utils/emittermixin~EmitterMixin} module:ui/template~TemplateBinding#emitter\n\t\t */\n\n\t\t/**\n\t\t * The name of the {@link module:ui/template~TemplateBinding#observable observed attribute}.\n\t\t *\n\t\t * @member {String} module:ui/template~TemplateBinding#attribute\n\t\t */\n\n\t\t/**\n\t\t * A custom function to process the value of the {@link module:ui/template~TemplateBinding#attribute}.\n\t\t *\n\t\t * @member {Function} [module:ui/template~TemplateBinding#callback]\n\t\t */\n\t}\n\n\t/**\n\t * Returns the value of the binding. It is the value of the {@link module:ui/template~TemplateBinding#attribute} in\n\t * {@link module:ui/template~TemplateBinding#observable}. The value may be processed by the\n\t * {@link module:ui/template~TemplateBinding#callback}, if such has been passed to the binding.\n\t *\n\t * @param {Node} [node] A native DOM node, passed to the custom {@link module:ui/template~TemplateBinding#callback}.\n\t * @returns {*} The value of {@link module:ui/template~TemplateBinding#attribute} in\n\t * {@link module:ui/template~TemplateBinding#observable}.\n\t */\n\tgetValue( node ) {\n\t\tconst value = this.observable[ this.attribute ];\n\n\t\treturn this.callback ? this.callback( value, node ) : value;\n\t}\n\n\t/**\n\t * Activates the listener which waits for changes of the {@link module:ui/template~TemplateBinding#attribute} in\n\t * {@link module:ui/template~TemplateBinding#observable}, then updates the DOM with the aggregated\n\t * value of {@link module:ui/template~TemplateValueSchema}.\n\t *\n\t * @param {module:ui/template~TemplateValueSchema} schema A full schema to generate an attribute or text in the DOM.\n\t * @param {Function} updater A DOM updater function used to update the native DOM attribute or text.\n\t * @param {module:ui/template~RenderData} data Rendering data.\n\t * @returns {Function} A function to sever the listener binding.\n\t */\n\tactivateAttributeListener( schema, updater, data ) {\n\t\tconst callback = () => syncValueSchemaValue( schema, updater, data );\n\n\t\tthis.emitter.listenTo( this.observable, 'change:' + this.attribute, callback );\n\n\t\t// Allows revert of the listener.\n\t\treturn () => {\n\t\t\tthis.emitter.stopListening( this.observable, 'change:' + this.attribute, callback );\n\t\t};\n\t}\n}\n\n/**\n * Describes either:\n *\n * * a binding to an {@link module:utils/observablemixin~Observable},\n * * or a native DOM event binding.\n *\n * It is created by the {@link module:ui/template~BindChain#to} method.\n *\n * @protected\n */\nexport class TemplateToBinding extends TemplateBinding {\n\t/**\n\t * Activates the listener for the native DOM event, which when fired, is propagated by\n\t * the {@link module:ui/template~TemplateBinding#emitter}.\n\t *\n\t * @param {String} domEvtName The name of the native DOM event.\n\t * @param {String} domSelector The selector in the DOM to filter delegated events.\n\t * @param {module:ui/template~RenderData} data Rendering data.\n\t * @returns {Function} A function to sever the listener binding.\n\t */\n\tactivateDomEventListener( domEvtName, domSelector, data ) {\n\t\tconst callback = ( evt, domEvt ) => {\n\t\t\tif ( !domSelector || domEvt.target.matches( domSelector ) ) {\n\t\t\t\tif ( typeof this.eventNameOrFunction == 'function' ) {\n\t\t\t\t\tthis.eventNameOrFunction( domEvt );\n\t\t\t\t} else {\n\t\t\t\t\tthis.observable.fire( this.eventNameOrFunction, domEvt );\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tthis.emitter.listenTo( data.node, domEvtName, callback );\n\n\t\t// Allows revert of the listener.\n\t\treturn () => {\n\t\t\tthis.emitter.stopListening( data.node, domEvtName, callback );\n\t\t};\n\t}\n}\n\n/**\n * Describes a binding to {@link module:utils/observablemixin~ObservableMixin} created by the {@link module:ui/template~BindChain#if}\n * method.\n *\n * @protected\n */\nexport class TemplateIfBinding extends TemplateBinding {\n\t/**\n\t * @inheritDoc\n\t */\n\tgetValue( node ) {\n\t\tconst value = super.getValue( node );\n\n\t\treturn isFalsy( value ) ? false : ( this.valueIfTrue || true );\n\t}\n\n\t/**\n\t * The value of the DOM attribute or text to be set if the {@link module:ui/template~TemplateBinding#attribute} in\n\t * {@link module:ui/template~TemplateBinding#observable} is `true`.\n\t *\n\t * @member {String} [module:ui/template~TemplateIfBinding#valueIfTrue]\n\t */\n}\n\n// Checks whether given {@link module:ui/template~TemplateValueSchema} contains a\n// {@link module:ui/template~TemplateBinding}.\n//\n// @param {module:ui/template~TemplateValueSchema} schema\n// @returns {Boolean}\nfunction hasTemplateBinding( schema ) {\n\tif ( !schema ) {\n\t\treturn false;\n\t}\n\n\t// Normalize attributes with additional data like namespace:\n\t//\n\t//\t\tclass: {\n\t//\t\t\tns: 'abc',\n\t//\t\t\tvalue: [ ... ]\n\t//\t\t}\n\t//\n\tif ( schema.value ) {\n\t\tschema = schema.value;\n\t}\n\n\tif ( Array.isArray( schema ) ) {\n\t\treturn schema.some( hasTemplateBinding );\n\t} else if ( schema instanceof TemplateBinding ) {\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n\n// Assembles the value using {@link module:ui/template~TemplateValueSchema} and stores it in a form of\n// an Array. Each entry of the Array corresponds to one of {@link module:ui/template~TemplateValueSchema}\n// items.\n//\n// @param {module:ui/template~TemplateValueSchema} schema\n// @param {Node} node DOM Node updated when {@link module:utils/observablemixin~ObservableMixin} changes.\n// @returns {Array}\nfunction getValueSchemaValue( schema, node ) {\n\treturn schema.map( schemaItem => {\n\t\t// Process {@link module:ui/template~TemplateBinding} bindings.\n\t\tif ( schemaItem instanceof TemplateBinding ) {\n\t\t\treturn schemaItem.getValue( node );\n\t\t}\n\n\t\t// All static values like strings, numbers, and \"falsy\" values (false, null, undefined, '', etc.) just pass.\n\t\treturn schemaItem;\n\t} );\n}\n\n// A function executed each time the bound Observable attribute changes, which updates the DOM with a value\n// constructed from {@link module:ui/template~TemplateValueSchema}.\n//\n// @param {module:ui/template~TemplateValueSchema} schema\n// @param {Function} updater A function which updates the DOM (like attribute or text).\n// @param {Node} node DOM Node updated when {@link module:utils/observablemixin~ObservableMixin} changes.\nfunction syncValueSchemaValue( schema, updater, { node } ) {\n\tlet value = getValueSchemaValue( schema, node );\n\n\t// Check if schema is a single Template.bind.if, like:\n\t//\n\t//\t\tclass: Template.bind.if( 'foo' )\n\t//\n\tif ( schema.length == 1 && schema[ 0 ] instanceof TemplateIfBinding ) {\n\t\tvalue = value[ 0 ];\n\t} else {\n\t\tvalue = value.reduce( arrayValueReducer, '' );\n\t}\n\n\tif ( isFalsy( value ) ) {\n\t\tupdater.remove();\n\t} else {\n\t\tupdater.set( value );\n\t}\n}\n\n// Returns an object consisting of `set` and `remove` functions, which\n// can be used in the context of DOM Node to set or reset `textContent`.\n// @see module:ui/view~View#_bindToObservable\n//\n// @param {Node} node DOM Node to be modified.\n// @returns {Object}\nfunction getTextUpdater( node ) {\n\treturn {\n\t\tset( value ) {\n\t\t\tnode.textContent = value;\n\t\t},\n\n\t\tremove() {\n\t\t\tnode.textContent = '';\n\t\t}\n\t};\n}\n\n// Returns an object consisting of `set` and `remove` functions, which\n// can be used in the context of DOM Node to set or reset an attribute.\n// @see module:ui/view~View#_bindToObservable\n//\n// @param {Node} node DOM Node to be modified.\n// @param {String} attrName Name of the attribute to be modified.\n// @param {String} [ns=null] Namespace to use.\n// @returns {Object}\nfunction getAttributeUpdater( el, attrName, ns ) {\n\treturn {\n\t\tset( value ) {\n\t\t\tel.setAttributeNS( ns, attrName, value );\n\t\t},\n\n\t\tremove() {\n\t\t\tel.removeAttributeNS( ns, attrName );\n\t\t}\n\t};\n}\n\n// Returns an object consisting of `set` and `remove` functions, which\n// can be used in the context of CSSStyleDeclaration to set or remove a style.\n// @see module:ui/view~View#_bindToObservable\n//\n// @param {Node} node DOM Node to be modified.\n// @param {String} styleName Name of the style to be modified.\n// @returns {Object}\nfunction getStyleUpdater( el, styleName ) {\n\treturn {\n\t\tset( value ) {\n\t\t\tel.style[ styleName ] = value;\n\t\t},\n\n\t\tremove() {\n\t\t\tel.style[ styleName ] = null;\n\t\t}\n\t};\n}\n\n// Clones definition of the template.\n//\n// @param {module:ui/template~TemplateDefinition} def\n// @returns {module:ui/template~TemplateDefinition}\nfunction clone( def ) {\n\tconst clone = cloneDeepWith( def, value => {\n\t\t// Don't clone the `Template.bind`* bindings because of the references to Observable\n\t\t// and DomEmitterMixin instances inside, which would also be traversed and cloned by greedy\n\t\t// cloneDeepWith algorithm. There's no point in cloning Observable/DomEmitterMixins\n\t\t// along with the definition.\n\t\t//\n\t\t// Don't clone Template instances if provided as a child. They're simply #render()ed\n\t\t// and nothing should interfere.\n\t\t//\n\t\t// Also don't clone View instances if provided as a child of the Template. The template\n\t\t// instance will be extracted from the View during the normalization and there's no need\n\t\t// to clone it.\n\t\tif ( value && ( value instanceof TemplateBinding || isTemplate( value ) || isView( value ) || isViewCollection( value ) ) ) {\n\t\t\treturn value;\n\t\t}\n\t} );\n\n\treturn clone;\n}\n\n// Normalizes given {@link module:ui/template~TemplateDefinition}.\n//\n// See:\n//  * {@link normalizeAttributes}\n//  * {@link normalizeListeners}\n//  * {@link normalizePlainTextDefinition}\n//  * {@link normalizeTextDefinition}\n//\n// @param {module:ui/template~TemplateDefinition} def\n// @returns {module:ui/template~TemplateDefinition} Normalized definition.\nfunction normalize( def ) {\n\tif ( typeof def == 'string' ) {\n\t\tdef = normalizePlainTextDefinition( def );\n\t} else if ( def.text ) {\n\t\tnormalizeTextDefinition( def );\n\t}\n\n\tif ( def.on ) {\n\t\tdef.eventListeners = normalizeListeners( def.on );\n\n\t\t// Template mixes EmitterMixin, so delete #on to avoid collision.\n\t\tdelete def.on;\n\t}\n\n\tif ( !def.text ) {\n\t\tif ( def.attributes ) {\n\t\t\tnormalizeAttributes( def.attributes );\n\t\t}\n\n\t\tconst children = [];\n\n\t\tif ( def.children ) {\n\t\t\tif ( isViewCollection( def.children ) ) {\n\t\t\t\tchildren.push( def.children );\n\t\t\t} else {\n\t\t\t\tfor ( const child of def.children ) {\n\t\t\t\t\tif ( isTemplate( child ) || isView( child ) || isNode( child ) ) {\n\t\t\t\t\t\tchildren.push( child );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tchildren.push( new Template( child ) );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tdef.children = children;\n\t}\n\n\treturn def;\n}\n\n// Normalizes \"attributes\" section of {@link module:ui/template~TemplateDefinition}.\n//\n//\t\tattributes: {\n//\t\t\ta: 'bar',\n//\t\t\tb: {@link module:ui/template~TemplateBinding},\n//\t\t\tc: {\n//\t\t\t\tvalue: 'bar'\n//\t\t\t}\n//\t\t}\n//\n// becomes\n//\n//\t\tattributes: {\n//\t\t\ta: [ 'bar' ],\n//\t\t\tb: [ {@link module:ui/template~TemplateBinding} ],\n//\t\t\tc: {\n//\t\t\t\tvalue: [ 'bar' ]\n//\t\t\t}\n//\t\t}\n//\n// @param {Object} attributes\nfunction normalizeAttributes( attributes ) {\n\tfor ( const a in attributes ) {\n\t\tif ( attributes[ a ].value ) {\n\t\t\tattributes[ a ].value = toArray( attributes[ a ].value );\n\t\t}\n\n\t\tarrayify( attributes, a );\n\t}\n}\n\n// Normalizes \"on\" section of {@link module:ui/template~TemplateDefinition}.\n//\n//\t\ton: {\n//\t\t\ta: 'bar',\n//\t\t\tb: {@link module:ui/template~TemplateBinding},\n//\t\t\tc: [ {@link module:ui/template~TemplateBinding}, () => { ... } ]\n//\t\t}\n//\n// becomes\n//\n//\t\ton: {\n//\t\t\ta: [ 'bar' ],\n//\t\t\tb: [ {@link module:ui/template~TemplateBinding} ],\n//\t\t\tc: [ {@link module:ui/template~TemplateBinding}, () => { ... } ]\n//\t\t}\n//\n// @param {Object} listeners\n// @returns {Object} Object containing normalized listeners.\nfunction normalizeListeners( listeners ) {\n\tfor ( const l in listeners ) {\n\t\tarrayify( listeners, l );\n\t}\n\n\treturn listeners;\n}\n\n// Normalizes \"string\" {@link module:ui/template~TemplateDefinition}.\n//\n//\t\t\"foo\"\n//\n// becomes\n//\n//\t\t{ text: [ 'foo' ] },\n//\n// @param {String} def\n// @returns {module:ui/template~TemplateDefinition} Normalized template definition.\nfunction normalizePlainTextDefinition( def ) {\n\treturn {\n\t\ttext: [ def ]\n\t};\n}\n\n// Normalizes text {@link module:ui/template~TemplateDefinition}.\n//\n//\t\tchildren: [\n//\t\t\t{ text: 'def' },\n//\t\t\t{ text: {@link module:ui/template~TemplateBinding} }\n//\t\t]\n//\n// becomes\n//\n//\t\tchildren: [\n//\t\t\t{ text: [ 'def' ] },\n//\t\t\t{ text: [ {@link module:ui/template~TemplateBinding} ] }\n//\t\t]\n//\n// @param {module:ui/template~TemplateDefinition} def\nfunction normalizeTextDefinition( def ) {\n\tdef.text = toArray( def.text );\n}\n\n// Wraps an entry in Object in an Array, if not already one.\n//\n//\t\t{\n//\t\t\tx: 'y',\n//\t\t\ta: [ 'b' ]\n//\t\t}\n//\n// becomes\n//\n//\t\t{\n//\t\t\tx: [ 'y' ],\n//\t\t\ta: [ 'b' ]\n//\t\t}\n//\n// @param {Object} obj\n// @param {String} key\nfunction arrayify( obj, key ) {\n\tobj[ key ] = toArray( obj[ key ] );\n}\n\n// A helper which concatenates the value avoiding unwanted\n// leading white spaces.\n//\n// @param {String} prev\n// @param {String} cur\n// @returns {String}\nfunction arrayValueReducer( prev, cur ) {\n\tif ( isFalsy( cur ) ) {\n\t\treturn prev;\n\t} else if ( isFalsy( prev ) ) {\n\t\treturn cur;\n\t} else {\n\t\treturn `${ prev } ${ cur }`;\n\t}\n}\n\n// Extends one object defined in the following format:\n//\n//\t\t{\n//\t\t\tkey1: [Array1],\n//\t\t\tkey2: [Array2],\n//\t\t\t...\n//\t\t\tkeyN: [ArrayN]\n//\t\t}\n//\n// with another object of the same data format.\n//\n// @param {Object} obj Base object.\n// @param {Object} ext Object extending base.\n// @returns {String}\nfunction extendObjectValueArray( obj, ext ) {\n\tfor ( const a in ext ) {\n\t\tif ( obj[ a ] ) {\n\t\t\tobj[ a ].push( ...ext[ a ] );\n\t\t} else {\n\t\t\tobj[ a ] = ext[ a ];\n\t\t}\n\t}\n}\n\n// A helper for {@link module:ui/template~Template#extend}. Recursively extends {@link module:ui/template~Template} instance\n// with content from {@link module:ui/template~TemplateDefinition}. See {@link module:ui/template~Template#extend} to learn more.\n//\n// @param {module:ui/template~Template} def A template instance to be extended.\n// @param {module:ui/template~TemplateDefinition} def A definition which is to extend the template instance.\n// @param {Object} Error context.\nfunction extendTemplate( template, def ) {\n\tif ( def.attributes ) {\n\t\tif ( !template.attributes ) {\n\t\t\ttemplate.attributes = {};\n\t\t}\n\n\t\textendObjectValueArray( template.attributes, def.attributes );\n\t}\n\n\tif ( def.eventListeners ) {\n\t\tif ( !template.eventListeners ) {\n\t\t\ttemplate.eventListeners = {};\n\t\t}\n\n\t\textendObjectValueArray( template.eventListeners, def.eventListeners );\n\t}\n\n\tif ( def.text ) {\n\t\ttemplate.text.push( ...def.text );\n\t}\n\n\tif ( def.children && def.children.length ) {\n\t\tif ( template.children.length != def.children.length ) {\n\t\t\t/**\n\t\t\t * The number of children in extended definition does not match.\n\t\t\t *\n\t\t\t * @error ui-template-extend-children-mismatch\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'ui-template-extend-children-mismatch',\n\t\t\t\ttemplate\n\t\t\t);\n\t\t}\n\n\t\tlet childIndex = 0;\n\n\t\tfor ( const childDef of def.children ) {\n\t\t\textendTemplate( template.children[ childIndex++ ], childDef );\n\t\t}\n\t}\n}\n\n// Checks if value is \"falsy\".\n// Note: 0 (Number) is not \"falsy\" in this context.\n//\n// @private\n// @param {*} value Value to be checked.\nfunction isFalsy( value ) {\n\treturn !value && value !== 0;\n}\n\n// Checks if the item is an instance of {@link module:ui/view~View}\n//\n// @private\n// @param {*} value Value to be checked.\nfunction isView( item ) {\n\treturn item instanceof View;\n}\n\n// Checks if the item is an instance of {@link module:ui/template~Template}\n//\n// @private\n// @param {*} value Value to be checked.\nfunction isTemplate( item ) {\n\treturn item instanceof Template;\n}\n\n// Checks if the item is an instance of {@link module:ui/viewcollection~ViewCollection}\n//\n// @private\n// @param {*} value Value to be checked.\nfunction isViewCollection( item ) {\n\treturn item instanceof ViewCollection;\n}\n\n// Creates an empty skeleton for {@link module:ui/template~Template#revert}\n// data.\n//\n// @private\nfunction getEmptyRevertData() {\n\treturn {\n\t\tchildren: [],\n\t\tbindings: [],\n\t\tattributes: {}\n\t};\n}\n\n// Checks whether an attribute should be extended when\n// {@link module:ui/template~Template#apply} is called.\n//\n// @private\n// @param {String} attrName Attribute name to check.\nfunction shouldExtend( attrName ) {\n\treturn attrName == 'class' || attrName == 'style';\n}\n\n/**\n * A definition of the {@link module:ui/template~Template}. It describes what kind of\n * node a template will render (HTML element or text), attributes of an element, DOM event\n * listeners and children.\n *\n * Also see:\n * * {@link module:ui/template~TemplateValueSchema} to learn about HTML element attributes,\n * * {@link module:ui/template~TemplateListenerSchema} to learn about DOM event listeners.\n *\n * A sample definition on an HTML element can look like this:\n *\n *\t\tnew Template( {\n *\t\t\ttag: 'p',\n *\t\t\tchildren: [\n *\t\t\t\t{\n *\t\t\t\t\ttag: 'span',\n *\t\t\t\t\tattributes: { ... },\n *\t\t\t\t\tchildren: [ ... ],\n *\t\t\t\t},\n *\t\t\t\t{\n *\t\t\t\t\ttext: 'static–text'\n *\t\t\t\t},\n *\t\t\t\t'also-static–text',\n *\t\t\t],\n *\t\t\tattributes: {\n *\t\t\t\tclass: {@link module:ui/template~TemplateValueSchema},\n *\t\t\t\tid: {@link module:ui/template~TemplateValueSchema},\n *\t\t\t\tstyle: {@link module:ui/template~TemplateValueSchema}\n *\n *\t\t\t\t// ...\n *\t\t\t},\n *\t\t\ton: {\n *\t\t\t\t'click': {@link module:ui/template~TemplateListenerSchema}\n *\n *\t\t\t\t// Document.querySelector format is also accepted.\n *\t\t\t\t'keyup@a.some-class': {@link module:ui/template~TemplateListenerSchema}\n *\n *\t\t\t\t// ...\n *\t\t\t}\n *\t\t} );\n *\n * A {@link module:ui/view~View}, another {@link module:ui/template~Template} or a native DOM node\n * can also become a child of a template. When a view is passed, its {@link module:ui/view~View#element} is used:\n *\n *\t\tconst view = new SomeView();\n *\t\tconst childTemplate = new Template( { ... } );\n *\t\tconst childNode = document.createElement( 'b' );\n *\n *\t\tnew Template( {\n *\t\t\ttag: 'p',\n *\n *\t\t\tchildren: [\n *\t\t\t\t// view#element will be added as a child of this <p>.\n *\t\t\t\tview,\n *\n * \t\t\t\t// The output of childTemplate.render() will be added here.\n *\t\t\t\tchildTemplate,\n *\n *\t\t\t\t// Native DOM nodes are included directly in the rendered output.\n *\t\t\t\tchildNode\n *\t\t\t]\n *\t\t} );\n *\n * An entire {@link module:ui/viewcollection~ViewCollection} can be used as a child in the definition:\n *\n *\t\tconst collection = new ViewCollection();\n *\t\tcollection.add( someView );\n *\n *\t\tnew Template( {\n *\t\t\ttag: 'p',\n *\n *\t\t\tchildren: collection\n *\t\t} );\n *\n * @typedef module:ui/template~TemplateDefinition\n * @type Object\n *\n * @property {String} tag See the template {@link module:ui/template~Template#tag} property.\n *\n * @property {Array.<module:ui/template~TemplateDefinition>} [children]\n * See the template {@link module:ui/template~Template#children} property.\n *\n * @property {Object.<String, module:ui/template~TemplateValueSchema>} [attributes]\n * See the template {@link module:ui/template~Template#attributes} property.\n *\n * @property {String|module:ui/template~TemplateValueSchema|Array.<String|module:ui/template~TemplateValueSchema>} [text]\n * See the template {@link module:ui/template~Template#text} property.\n *\n * @property {Object.<String, module:ui/template~TemplateListenerSchema>} [on]\n * See the template {@link module:ui/template~Template#eventListeners} property.\n */\n\n/**\n * Describes a value of an HTML element attribute or `textContent`. It allows combining multiple\n * data sources like static values and {@link module:utils/observablemixin~Observable} attributes.\n *\n * Also see:\n * * {@link module:ui/template~TemplateDefinition} to learn where to use it,\n * * {@link module:ui/template~Template.bind} to learn how to configure\n * {@link module:utils/observablemixin~Observable} attribute bindings,\n * * {@link module:ui/template~Template#render} to learn how to render a template,\n * * {@link module:ui/template~BindChain#to `to()`} and {@link module:ui/template~BindChain#if `if()`}\n * methods to learn more about bindings.\n *\n * Attribute values can be described in many different ways:\n *\n *\t\t// Bind helper will create bindings to attributes of the observable.\n *\t\tconst bind = Template.bind( observable, emitter );\n *\n *\t\tnew Template( {\n *\t\t\ttag: 'p',\n *\t\t\tattributes: {\n *\t\t\t\t// A plain string schema.\n *\t\t\t\t'class': 'static-text',\n *\n *\t\t\t\t// An object schema, binds to the \"foo\" attribute of the\n *\t\t\t\t// observable and follows its value.\n *\t\t\t\t'class': bind.to( 'foo' ),\n *\n *\t\t\t\t// An array schema, combines the above.\n *\t\t\t\t'class': [\n *\t\t\t\t\t'static-text',\n *\t\t\t\t\tbind.to( 'bar', () => { ... } ),\n *\n * \t\t\t\t\t// Bindings can also be conditional.\n *\t\t\t\t\tbind.if( 'baz', 'class-when-baz-is-true' )\n *\t\t\t\t],\n *\n *\t\t\t\t// An array schema, with a custom namespace, e.g. useful for creating SVGs.\n *\t\t\t\t'class': {\n *\t\t\t\t\tns: 'http://ns.url',\n *\t\t\t\t\tvalue: [\n *\t\t\t\t\t\tbind.if( 'baz', 'value-when-true' ),\n *\t\t\t\t\t\t'static-text'\n *\t\t\t\t\t]\n *\t\t\t\t},\n *\n *\t\t\t\t// An object schema, specific for styles.\n *\t\t\t\tstyle: {\n *\t\t\t\t\tcolor: 'red',\n *\t\t\t\t\tbackgroundColor: bind.to( 'qux', () => { ... } )\n *\t\t\t\t}\n *\t\t\t}\n *\t\t} );\n *\n * Text nodes can also have complex values:\n *\n *\t\tconst bind = Template.bind( observable, emitter );\n *\n *\t\t// Will render a \"foo\" text node.\n *\t\tnew Template( {\n *\t\t\ttext: 'foo'\n *\t\t} );\n *\n *\t\t// Will render a \"static text: {observable.foo}\" text node.\n *\t\t// The text of the node will be updated as the \"foo\" attribute changes.\n *\t\tnew Template( {\n *\t\t\ttext: [\n *\t\t\t\t'static text: ',\n *\t\t\t\tbind.to( 'foo', () => { ... } )\n *\t\t\t]\n *\t\t} );\n *\n * @typedef module:ui/template~TemplateValueSchema\n * @type {Object|String|Array}\n */\n\n/**\n * Describes an event listener attached to an HTML element. Such listener can propagate DOM events\n * through an {@link module:utils/observablemixin~Observable} instance, execute custom callbacks\n * or both, if necessary.\n *\n * Also see:\n * * {@link module:ui/template~TemplateDefinition} to learn more about template definitions,\n * * {@link module:ui/template~BindChain#to `to()`} method to learn more about bindings.\n *\n * Check out different ways of attaching event listeners below:\n *\n *\t\t// Bind helper will propagate events through the observable.\n *\t\tconst bind = Template.bind( observable, emitter );\n *\n *\t\tnew Template( {\n *\t\t\ttag: 'p',\n *\t\t\ton: {\n *\t\t\t\t// An object schema. The observable will fire the \"clicked\" event upon DOM \"click\".\n *\t\t\t\tclick: bind.to( 'clicked' )\n *\n *\t\t\t\t// An object schema. It will work for \"click\" event on \"a.foo\" children only.\n *\t\t\t\t'click@a.foo': bind.to( 'clicked' )\n *\n *\t\t\t\t// An array schema, makes the observable propagate multiple events.\n *\t\t\t\tclick: [\n *\t\t\t\t\tbind.to( 'clicked' ),\n *\t\t\t\t\tbind.to( 'executed' )\n *\t\t\t\t],\n *\n *\t\t\t\t// An array schema with a custom callback.\n *\t\t\t\t'click@a.foo': {\n *\t\t\t\t\tbind.to( 'clicked' ),\n *\t\t\t\t\tbind.to( evt => {\n *\t\t\t\t\t\tconsole.log( `${ evt.target } has been clicked!` );\n *\t\t\t\t\t} }\n *\t\t\t\t}\n *\t\t\t}\n *\t\t} );\n *\n * @typedef module:ui/template~TemplateListenerSchema\n * @type {Object|String|Array}\n */\n\n/**\n * The return value of {@link ~Template.bind `Template.bind()`}. It provides `to()` and `if()`\n * methods to create the {@link module:utils/observablemixin~Observable observable} attribute and event bindings.\n *\n * @interface module:ui/template~BindChain\n */\n\n/**\n * Binds an {@link module:utils/observablemixin~Observable observable} to either:\n *\n * * an HTML element attribute or a text node `textContent`, so it remains in sync with the observable\n * attribute as it changes,\n * * or an HTML element DOM event, so the DOM events are propagated through an observable.\n *\n * Some common use cases of `to()` bindings are presented below:\n *\n *\t\tconst bind = Template.bind( observable, emitter );\n *\n *\t\tnew Template( {\n *\t\t\ttag: 'p',\n *\t\t\tattributes: {\n *\t\t\t\t// class=\"...\" attribute gets bound to `observable#a`\n *\t\t\t\tclass: bind.to( 'a' )\n *\t\t\t},\n *\t\t\tchildren: [\n *\t\t\t\t// <p>...</p> gets bound to observable#b; always `toUpperCase()`.\n *\t\t\t\t{\n *\t\t\t\t\ttext: bind.to( 'b', ( value, node ) => value.toUpperCase() )\n *\t\t\t\t}\n *\t\t\t],\n *\t\t\ton: {\n *\t\t\t\tclick: [\n *\t\t\t\t\t// An observable will fire \"clicked\" upon \"click\" in the DOM.\n *\t\t\t\t\tbind.to( 'clicked' ),\n *\n *\t\t\t\t\t// A custom callback will be executed upon \"click\" in the DOM.\n *\t\t\t\t\tbind.to( () => {\n *\t\t\t\t\t\t...\n *\t\t\t\t\t} )\n *\t\t\t\t]\n *\t\t\t}\n *\t\t} ).render();\n *\n * Learn more about using `to()` in the {@link module:ui/template~TemplateValueSchema} and\n * {@link module:ui/template~TemplateListenerSchema}.\n *\n * @method #to\n * @param {String|Function} eventNameOrFunctionOrAttribute An attribute name of\n * {@link module:utils/observablemixin~Observable} or a DOM event name or an event callback.\n * @param {Function} [callback] Allows for processing of the value. Accepts `Node` and `value` as arguments.\n * @returns {module:ui/template~TemplateBinding}\n */\n\n/**\n * Binds an {@link module:utils/observablemixin~Observable observable} to an HTML element attribute or a text\n * node `textContent` so it remains in sync with the observable attribute as it changes.\n *\n * Unlike {@link module:ui/template~BindChain#to}, it controls the presence of the attribute or `textContent`\n * depending on the \"falseness\" of an {@link module:utils/observablemixin~Observable} attribute.\n *\n *\t\tconst bind = Template.bind( observable, emitter );\n *\n *\t\tnew Template( {\n *\t\t\ttag: 'input',\n *\t\t\tattributes: {\n *\t\t\t\t// <input checked> when `observable#a` is not undefined/null/false/''\n *\t\t\t\t// <input> when `observable#a` is undefined/null/false\n *\t\t\t\tchecked: bind.if( 'a' )\n *\t\t\t},\n *\t\t\tchildren: [\n *\t\t\t\t{\n *\t\t\t\t\t// <input>\"b-is-not-set\"</input> when `observable#b` is undefined/null/false/''\n *\t\t\t\t\t// <input></input> when `observable#b` is not \"falsy\"\n *\t\t\t\t\ttext: bind.if( 'b', 'b-is-not-set', ( value, node ) => !value )\n *\t\t\t\t}\n *\t\t\t]\n *\t\t} ).render();\n *\n * Learn more about using `if()` in the {@link module:ui/template~TemplateValueSchema}.\n *\n * @method #if\n * @param {String} attribute An attribute name of {@link module:utils/observablemixin~Observable} used in the binding.\n * @param {String} [valueIfTrue] Value set when the {@link module:utils/observablemixin~Observable} attribute is not\n * undefined/null/false/'' (empty string).\n * @param {Function} [callback] Allows for processing of the value. Accepts `Node` and `value` as arguments.\n * @returns {module:ui/template~TemplateBinding}\n */\n\n/**\n * The {@link module:ui/template~Template#_renderNode} configuration.\n *\n * @private\n * @interface module:ui/template~RenderData\n */\n\n/**\n * Tells {@link module:ui/template~Template#_renderNode} to render\n * children into `DocumentFragment` first and then append the fragment\n * to the parent element. It is a speed optimization.\n *\n * @member {Boolean} #intoFragment\n */\n\n/**\n * A node which is being rendered.\n *\n * @member {HTMLElement|Text} #node\n */\n\n/**\n * Indicates whether the {@module:ui/template~RenderNodeOptions#node} has\n * been provided by {@module:ui/template~Template#apply}.\n *\n * @member {Boolean} #isApplying\n */\n\n/**\n * An object storing the data that helps {@module:ui/template~Template#revert}\n * bringing back an element to its initial state, i.e. before\n * {@module:ui/template~Template#apply} was called.\n *\n * @member {Object} #revertData\n */\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/view\n */\n\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport ViewCollection from './viewcollection';\nimport Template from './template';\nimport DomEmitterMixin from '@ckeditor/ckeditor5-utils/src/dom/emittermixin';\nimport ObservableMixin from '@ckeditor/ckeditor5-utils/src/observablemixin';\nimport Collection from '@ckeditor/ckeditor5-utils/src/collection';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\nimport isIterable from '@ckeditor/ckeditor5-utils/src/isiterable';\n\nimport '../theme/globals/globals.css';\n\n/**\n * The basic view class, which represents an HTML element created out of a\n * {@link module:ui/view~View#template}. Views are building blocks of the user interface and handle\n * interaction\n *\n * Views {@link module:ui/view~View#registerChild aggregate} children in\n * {@link module:ui/view~View#createCollection collections} and manage the life cycle of DOM\n * listeners e.g. by handling rendering and destruction.\n *\n * See the {@link module:ui/template~TemplateDefinition} syntax to learn more about shaping view\n * elements, attributes and listeners.\n *\n *\t\tclass SampleView extends View {\n *\t\t\tconstructor( locale ) {\n *\t\t\t\tsuper( locale );\n *\n *\t\t\t\tconst bind = this.bindTemplate;\n *\n *\t\t\t\t// Views define their interface (state) using observable attributes.\n *\t\t\t\tthis.set( 'elementClass', 'bar' );\n *\n *\t\t\t\tthis.setTemplate( {\n *\t\t\t\t\ttag: 'p',\n *\n *\t\t\t\t\t// The element of the view can be defined with its children.\n *\t\t\t\t\tchildren: [\n *\t\t\t\t\t\t'Hello',\n *\t\t\t\t\t\t{\n *\t\t\t\t\t\t\ttag: 'b',\n *\t\t\t\t\t\t\tchildren: [ 'world!' ]\n *\t\t\t\t\t\t}\n *\t\t\t\t\t],\n *\t\t\t\t\tattributes: {\n *\t\t\t\t\t\tclass: [\n *\t\t\t\t\t\t\t'foo',\n *\n *\t\t\t\t\t\t\t// Observable attributes control the state of the view in DOM.\n *\t\t\t\t\t\t\tbind.to( 'elementClass' )\n *\t\t\t\t\t\t]\n *\t\t\t\t\t},\n *\t\t\t\t\ton: {\n *\t\t\t\t\t\t// Views listen to DOM events and propagate them.\n *\t\t\t\t\t\tclick: bind.to( 'clicked' )\n *\t\t\t\t\t}\n *\t\t\t\t} );\n *\t\t\t}\n *\t\t}\n *\n *\t\tconst view = new SampleView( locale );\n *\n *\t\tview.render();\n *\n *\t\t// Append <p class=\"foo bar\">Hello<b>world</b></p> to the <body>\n *\t\tdocument.body.appendChild( view.element );\n *\n *\t\t// Change the class attribute to <p class=\"foo baz\">Hello<b>world</b></p>\n *\t\tview.elementClass = 'baz';\n *\n *\t\t// Respond to the \"click\" event in DOM by executing a custom action.\n *\t\tview.on( 'clicked', () => {\n *\t\t\tconsole.log( 'The view has been clicked!' );\n *\t\t} );\n *\n * @mixes module:utils/observablemixin~ObservableMixin\n */\nexport default class View {\n\t/**\n\t * Creates an instance of the {@link module:ui/view~View} class.\n\t *\n\t * Also see {@link #render}.\n\t *\n\t * @param {module:utils/locale~Locale} [locale] The localization services instance.\n\t */\n\tconstructor( locale ) {\n\t\t/**\n\t\t * An HTML element of the view. `null` until {@link #render rendered}\n\t\t * from the {@link #template}.\n\t\t *\n\t\t *\t\tclass SampleView extends View {\n\t\t *\t\t\tconstructor() {\n\t\t *\t\t\t\tsuper();\n\t\t *\n\t\t *\t\t\t\t// A template instance the #element will be created from.\n\t\t *\t\t\t\tthis.setTemplate( {\n\t\t *\t\t\t\t\ttag: 'p'\n\t\t *\n\t\t *\t\t\t\t\t// ...\n\t\t *\t\t\t\t} );\n\t\t *\t\t\t}\n\t\t *\t\t}\n\t\t *\n\t\t *\t\tconst view = new SampleView();\n\t\t *\n\t\t *\t\t// Renders the #template.\n\t\t *\t\tview.render();\n\t\t *\n\t\t *\t\t// Append the HTML element of the view to <body>.\n\t\t *\t\tdocument.body.appendChild( view.element );\n\t\t *\n\t\t * **Note**: The element of the view can also be assigned directly:\n\t\t *\n\t\t *\t\tview.element = document.querySelector( '#my-container' );\n\t\t *\n\t\t * @member {HTMLElement}\n\t\t */\n\t\tthis.element = null;\n\n\t\t/**\n\t\t * Set `true` when the view has already been {@link module:ui/view~View#render rendered}.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Boolean} #isRendered\n\t\t */\n\t\tthis.isRendered = false;\n\n\t\t/**\n\t\t * A set of tools to localize the user interface.\n\t\t *\n\t\t * Also see {@link module:core/editor/editor~Editor#locale}.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:utils/locale~Locale}\n\t\t */\n\t\tthis.locale = locale;\n\n\t\t/**\n\t\t * Shorthand for {@link module:utils/locale~Locale#t}.\n\t\t *\n\t\t * Note: If {@link #locale} instance hasn't been passed to the view this method may not\n\t\t * be available.\n\t\t *\n\t\t * @see module:utils/locale~Locale#t\n\t\t * @method\n\t\t */\n\t\tthis.t = locale && locale.t;\n\n\t\t/**\n\t\t * Collections registered with {@link #createCollection}.\n\t\t *\n\t\t * @protected\n\t\t * @member {Set.<module:ui/viewcollection~ViewCollection>}\n\t\t */\n\t\tthis._viewCollections = new Collection();\n\n\t\t/**\n\t\t * A collection of view instances, which have been added directly\n\t\t * into the {@link module:ui/template~Template#children}.\n\t\t *\n\t\t * @protected\n\t\t * @member {module:ui/viewcollection~ViewCollection}\n\t\t */\n\t\tthis._unboundChildren = this.createCollection();\n\n\t\t// Pass parent locale to its children.\n\t\tthis._viewCollections.on( 'add', ( evt, collection ) => {\n\t\t\tcollection.locale = locale;\n\t\t} );\n\n\t\t/**\n\t\t * Template of this view. It provides the {@link #element} representing\n\t\t * the view in DOM, which is {@link #render rendered}.\n\t\t *\n\t\t * @member {module:ui/template~Template} #template\n\t\t */\n\n\t\t/**\n\t\t * Cached {@link module:ui/template~BindChain bind chain} object created by the\n\t\t * {@link #template}. See {@link #bindTemplate}.\n\t\t *\n\t\t * @private\n\t\t * @member {Object} #_bindTemplate\n\t\t */\n\n\t\tthis.decorate( 'render' );\n\t}\n\n\t/**\n\t * Shorthand for {@link module:ui/template~Template.bind}, a binding\n\t * {@link module:ui/template~BindChain interface} pre–configured for the view instance.\n\t *\n\t * It provides {@link module:ui/template~BindChain#to `to()`} and\n\t * {@link module:ui/template~BindChain#if `if()`} methods that initialize bindings with\n\t * observable attributes and attach DOM listeners.\n\t *\n\t *\t\tclass SampleView extends View {\n\t *\t\t\tconstructor( locale ) {\n\t *\t\t\t\tsuper( locale );\n\t *\n\t *\t\t\t\tconst bind = this.bindTemplate;\n\t *\n\t *\t\t\t\t// These {@link module:utils/observablemixin~Observable observable} attributes will control\n\t *\t\t\t\t// the state of the view in DOM.\n\t *\t\t\t\tthis.set( {\n\t *\t\t\t\t\telementClass: 'foo',\n\t *\t\t\t\t \tisEnabled: true\n\t *\t\t\t\t } );\n\t *\n\t *\t\t\t\tthis.setTemplate( {\n\t *\t\t\t\t\ttag: 'p',\n\t *\n\t *\t\t\t\t\tattributes: {\n\t *\t\t\t\t\t\t// The class HTML attribute will follow elementClass\n\t *\t\t\t\t\t\t// and isEnabled view attributes.\n\t *\t\t\t\t\t\tclass: [\n\t *\t\t\t\t\t\t\tbind.to( 'elementClass' )\n\t *\t\t\t\t\t\t\tbind.if( 'isEnabled', 'present-when-enabled' )\n\t *\t\t\t\t\t\t]\n\t *\t\t\t\t\t},\n\t *\n\t *\t\t\t\t\ton: {\n\t *\t\t\t\t\t\t// The view will fire the \"clicked\" event upon clicking <p> in DOM.\n\t *\t\t\t\t\t\tclick: bind.to( 'clicked' )\n\t *\t\t\t\t\t}\n\t *\t\t\t\t} );\n\t *\t\t\t}\n\t *\t\t}\n\t *\n\t * @method #bindTemplate\n\t */\n\tget bindTemplate() {\n\t\tif ( this._bindTemplate ) {\n\t\t\treturn this._bindTemplate;\n\t\t}\n\n\t\treturn ( this._bindTemplate = Template.bind( this, this ) );\n\t}\n\n\t/**\n\t * Creates a new collection of views, which can be used as\n\t * {@link module:ui/template~Template#children} of this view.\n\t *\n\t *\t\tclass SampleView extends View {\n\t *\t\t\tconstructor( locale ) {\n\t *\t\t\t\tsuper( locale );\n\t *\n\t *\t\t\t\tconst child = new ChildView( locale );\n\t *\t\t\t\tthis.items = this.createCollection( [ child ] );\n \t *\n\t *\t\t\t\tthis.setTemplate( {\n\t *\t\t\t\t\ttag: 'p',\n\t *\n\t *\t\t\t\t\t// `items` collection will render here.\n\t *\t\t\t\t\tchildren: this.items\n\t *\t\t\t\t} );\n\t *\t\t\t}\n\t *\t\t}\n\t *\n\t *\t\tconst view = new SampleView( locale );\n\t *\t\tview.render();\n\t *\n\t *\t\t// It will append <p><child#element></p> to the <body>.\n\t *\t\tdocument.body.appendChild( view.element );\n\t *\n\t * @param {Iterable.<module:ui/view~View>} [views] Initial views of the collection.\n\t * @returns {module:ui/viewcollection~ViewCollection} A new collection of view instances.\n\t */\n\tcreateCollection( views ) {\n\t\tconst collection = new ViewCollection( views );\n\n\t\tthis._viewCollections.add( collection );\n\n\t\treturn collection;\n\t}\n\n\t/**\n\t * Registers a new child view under the view instance. Once registered, a child\n\t * view is managed by its parent, including {@link #render rendering}\n\t * and {@link #destroy destruction}.\n\t *\n\t * To revert this, use {@link #deregisterChild}.\n\t *\n\t *\t\tclass SampleView extends View {\n\t *\t\t\tconstructor( locale ) {\n\t *\t\t\t\tsuper( locale );\n\t *\n\t *\t\t\t\tthis.childA = new SomeChildView( locale );\n\t *\t\t\t\tthis.childB = new SomeChildView( locale );\n\t *\n\t *\t\t\t\tthis.setTemplate( { tag: 'p' } );\n\t *\n\t *\t\t\t\t// Register the children.\n\t *\t\t\t\tthis.registerChild( [ this.childA, this.childB ] );\n\t *\t\t\t}\n\t *\n\t *\t\t\trender() {\n\t *\t\t\t\tsuper.render();\n\t *\n\t *\t\t\t\tthis.element.appendChild( this.childA.element );\n\t *\t\t\t\tthis.element.appendChild( this.childB.element );\n\t *\t\t\t}\n\t *\t\t}\n\t *\n\t *\t\tconst view = new SampleView( locale );\n\t *\n\t *\t\tview.render();\n\t *\n\t *\t\t// Will append <p><childA#element><b></b><childB#element></p>.\n\t *\t\tdocument.body.appendChild( view.element );\n\t *\n\t * **Note**: There's no need to add child views if they're already referenced in the\n\t * {@link #template}:\n\t *\n\t *\t\tclass SampleView extends View {\n\t *\t\t\tconstructor( locale ) {\n\t *\t\t\t\tsuper( locale );\n\t *\n\t *\t\t\t\tthis.childA = new SomeChildView( locale );\n\t *\t\t\t\tthis.childB = new SomeChildView( locale );\n\t *\n\t *\t\t\t\tthis.setTemplate( {\n\t *\t\t\t\t\ttag: 'p',\n\t *\n \t *\t\t\t\t\t// These children will be added automatically. There's no\n \t *\t\t\t\t\t// need to call {@link #registerChild} for any of them.\n\t *\t\t\t\t\tchildren: [ this.childA, this.childB ]\n\t *\t\t\t\t} );\n\t *\t\t\t}\n\t *\n\t *\t\t\t// ...\n\t *\t\t}\n\t *\n\t * @param {module:ui/view~View|Iterable.<module:ui/view~View>} children Children views to be registered.\n\t */\n\tregisterChild( children ) {\n\t\tif ( !isIterable( children ) ) {\n\t\t\tchildren = [ children ];\n\t\t}\n\n\t\tfor ( const child of children ) {\n\t\t\tthis._unboundChildren.add( child );\n\t\t}\n\t}\n\n\t/**\n\t * The opposite of {@link #registerChild}. Removes a child view from this view instance.\n\t * Once removed, the child is no longer managed by its parent, e.g. it can safely\n\t * become a child of another parent view.\n\t *\n\t * @see #registerChild\n\t * @param {module:ui/view~View|Iterable.<module:ui/view~View>} children Child views to be removed.\n\t */\n\tderegisterChild( children ) {\n\t\tif ( !isIterable( children ) ) {\n\t\t\tchildren = [ children ];\n\t\t}\n\n\t\tfor ( const child of children ) {\n\t\t\tthis._unboundChildren.remove( child );\n\t\t}\n\t}\n\n\t/**\n\t * Sets the {@link #template} of the view with with given definition.\n\t *\n\t * A shorthand for:\n\t *\n\t *\t\tview.setTemplate( definition );\n\t *\n\t * @param {module:ui/template~TemplateDefinition} definition Definition of view's template.\n\t */\n\tsetTemplate( definition ) {\n\t\tthis.template = new Template( definition );\n\t}\n\n\t/**\n\t * {@link module:ui/template~Template.extend Extends} the {@link #template} of the view with\n\t * with given definition.\n\t *\n\t * A shorthand for:\n\t *\n\t *\t\tTemplate.extend( view.template, definition );\n\t *\n\t * **Note**: Is requires the {@link #template} to be already set. See {@link #setTemplate}.\n\t *\n\t * @param {module:ui/template~TemplateDefinition} definition Definition which\n\t * extends the {@link #template}.\n\t */\n\textendTemplate( definition ) {\n\t\tTemplate.extend( this.template, definition );\n\t}\n\n\t/**\n\t * Recursively renders the view.\n\t *\n\t * Once the view is rendered:\n\t * * the {@link #element} becomes an HTML element out of {@link #template},\n\t * * the {@link #isRendered} flag is set `true`.\n\t *\n\t * **Note**: The children of the view:\n\t * * defined directly in the {@link #template}\n\t * * residing in collections created by the {@link #createCollection} method,\n\t * * and added by {@link #registerChild}\n\t * are also rendered in the process.\n\t *\n\t * In general, `render()` method is the right place to keep the code which refers to the\n\t * {@link #element} and should be executed at the very beginning of the view's life cycle.\n\t *\n\t * It is possible to {@link module:ui/template~Template.extend} the {@link #template} before\n\t * the view is rendered. To allow an early customization of the view (e.g. by its parent),\n\t * such references should be done in `render()`.\n\t *\n\t *\t\tclass SampleView extends View {\n\t *\t\t\tconstructor() {\n\t *\t\t\t\tthis.setTemplate( {\n\t *\t\t\t\t\t// ...\n\t *\t\t\t\t} );\n\t *\t\t\t},\n\t *\n\t *\t\t\trender() {\n\t *\t\t\t\t// View#element becomes available.\n\t *\t\t\t\tsuper.render();\n\t *\n\t *\t\t\t\t// The \"scroll\" listener depends on #element.\n\t *\t\t\t\tthis.listenTo( window, 'scroll', () => {\n\t *\t\t\t\t\t// A reference to #element would render the #template and make it non-extendable.\n\t *\t\t\t\t\tif ( window.scrollY > 0 ) {\n\t *\t\t\t\t\t\tthis.element.scrollLeft = 100;\n\t *\t\t\t\t\t} else {\n\t *\t\t\t\t\t\tthis.element.scrollLeft = 0;\n\t *\t\t\t\t\t}\n\t *\t\t\t\t} );\n\t *\t\t\t}\n\t *\t\t}\n\t *\n\t *\t\tconst view = new SampleView();\n\t *\n\t *\t\t// Let's customize the view before it gets rendered.\n\t *\t\tview.extendTemplate( {\n\t *\t\t\tattributes: {\n\t *\t\t\t\tclass: [\n\t *\t\t\t\t\t'additional-class'\n\t *\t\t\t\t]\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t *\t\t// Late rendering allows customization of the view.\n\t *\t\tview.render();\n\t */\n\trender() {\n\t\tif ( this.isRendered ) {\n\t\t\t/**\n\t\t\t * This View has already been rendered.\n\t\t\t *\n\t\t\t * @error ui-view-render-already-rendered\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'ui-view-render-already-rendered', this );\n\t\t}\n\n\t\t// Render #element of the view.\n\t\tif ( this.template ) {\n\t\t\tthis.element = this.template.render();\n\n\t\t\t// Auto–register view children from #template.\n\t\t\tthis.registerChild( this.template.getViews() );\n\t\t}\n\n\t\tthis.isRendered = true;\n\t}\n\n\t/**\n\t * Recursively destroys the view instance and child views added by {@link #registerChild} and\n\t * residing in collections created by the {@link #createCollection}.\n\t *\n\t * Destruction disables all event listeners:\n\t * * created on the view, e.g. `view.on( 'event', () => {} )`,\n\t * * defined in the {@link #template} for DOM events.\n\t */\n\tdestroy() {\n\t\tthis.stopListening();\n\n\t\tthis._viewCollections.map( c => c.destroy() );\n\n\t\t// Template isn't obligatory for views.\n\t\tif ( this.template && this.template._revertData ) {\n\t\t\tthis.template.revert( this.element );\n\t\t}\n\t}\n\n\t/**\n\t * Event fired by the {@link #render} method. Actual rendering is executed as a listener to\n\t * this event with the default priority.\n\t *\n\t * See {@link module:utils/observablemixin~ObservableMixin#decorate} for more information and samples.\n\t *\n\t * @event render\n\t */\n}\n\nmix( View, DomEmitterMixin );\nmix( View, ObservableMixin );\n","import baseGetTag from './_baseGetTag.js';\nimport isArray from './isArray.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar stringTag = '[object String]';\n\n/**\n * Checks if `value` is classified as a `String` primitive or object.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a string, else `false`.\n * @example\n *\n * _.isString('abc');\n * // => true\n *\n * _.isString(1);\n * // => false\n */\nfunction isString(value) {\n  return typeof value == 'string' ||\n    (!isArray(value) && isObjectLike(value) && baseGetTag(value) == stringTag);\n}\n\nexport default isString;\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/editorui/bodycollection\n */\n\n/* globals document */\n\nimport Template from '../template';\nimport ViewCollection from '../viewcollection';\n\nimport createElement from '@ckeditor/ckeditor5-utils/src/dom/createelement';\n\n/**\n * This is a special {@link module:ui/viewcollection~ViewCollection} dedicated to elements that are detached\n * from the DOM structure of the editor, like panels, icons, etc.\n *\n * The body collection is available in the {@link module:ui/editorui/editoruiview~EditorUIView#body `editor.ui.view.body`} property.\n * Any plugin can add a {@link module:ui/view~View view} to this collection.\n * These views will render in a container placed directly in the `<body>` element.\n * The editor will detach and destroy this collection when the editor will be {@link module:core/editor/editor~Editor#destroy destroyed}.\n *\n * If you need to control the life cycle of the body collection on your own, you can create your own instance of this class.\n *\n * A body collection will render itself automatically in the DOM body element as soon as you call {@link ~BodyCollection#attachToDom}.\n * If you create multiple body collections, this class will create a special wrapper element in the DOM to limit the number of\n * elements created directly in the body and remove it when the last body collection will be\n * {@link ~BodyCollection#detachFromDom detached}.\n *\n * @extends module:ui/viewcollection~ViewCollection\n */\nexport default class BodyCollection extends ViewCollection {\n\t/**\n\t * Creates a new instance of the {@link module:ui/editorui/bodycollection~BodyCollection}.\n\t *\n\t * @param {module:utils/locale~Locale} locale The {@link module:core/editor/editor~Editor editor's locale} instance.\n\t * @param {Iterable.<module:ui/view~View>} [initialItems] The initial items of the collection.\n\t */\n\tconstructor( locale, initialItems = [] ) {\n\t\tsuper( initialItems );\n\n\t\t/**\n\t\t * The {@link module:core/editor/editor~Editor#locale editor's locale} instance.\n\t\t * See the view {@link module:ui/view~View#locale locale} property.\n\t\t *\n\t\t * @member {module:utils/locale~Locale}\n\t\t */\n\t\tthis.locale = locale;\n\t}\n\n\t/**\n\t * Attaches the body collection to the DOM body element. You need to execute this method to render the content of\n\t * the body collection.\n\t */\n\tattachToDom() {\n\t\t/**\n\t\t * The element holding elements of the body region.\n\t\t *\n\t\t * @protected\n\t\t * @member {HTMLElement} #_bodyCollectionContainer\n\t\t */\n\t\tthis._bodyCollectionContainer = new Template( {\n\t\t\ttag: 'div',\n\t\t\tattributes: {\n\t\t\t\tclass: [\n\t\t\t\t\t'ck',\n\t\t\t\t\t'ck-reset_all',\n\t\t\t\t\t'ck-body',\n\t\t\t\t\t'ck-rounded-corners'\n\t\t\t\t],\n\t\t\t\tdir: this.locale.uiLanguageDirection\n\t\t\t},\n\t\t\tchildren: this\n\t\t} ).render();\n\n\t\tlet wrapper = document.querySelector( '.ck-body-wrapper' );\n\n\t\tif ( !wrapper ) {\n\t\t\twrapper = createElement( document, 'div', { class: 'ck-body-wrapper' } );\n\t\t\tdocument.body.appendChild( wrapper );\n\t\t}\n\n\t\twrapper.appendChild( this._bodyCollectionContainer );\n\t}\n\n\t/**\n\t * Detaches the collection from the DOM structure. Use this method when you do not need to use the body collection\n\t * anymore to clean-up the DOM structure.\n\t */\n\tdetachFromDom() {\n\t\tsuper.destroy();\n\n\t\tif ( this._bodyCollectionContainer ) {\n\t\t\tthis._bodyCollectionContainer.remove();\n\t\t}\n\n\t\tconst wrapper = document.querySelector( '.ck-body-wrapper' );\n\n\t\tif ( wrapper && wrapper.childElementCount == 0 ) {\n\t\t\twrapper.remove();\n\t\t}\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/dom/createelement\n */\n\nimport isIterable from '../isiterable';\nimport { isString } from 'lodash-es';\n\n/**\n * Creates element with attributes and children.\n *\n *\t\tcreateElement( document, 'p' ); // <p>\n *\t\tcreateElement( document, 'p', { class: 'foo' } ); // <p class=\"foo\">\n *\t\tcreateElement( document, 'p', null, 'foo' ); // <p>foo</p>\n *\t\tcreateElement( document, 'p', null, [ 'foo', createElement( document, 'img' ) ] ); // <p>foo<img></p>\n *\n * @param {Document} doc Document used to create element.\n * @param {String} name Name of the element.\n * @param {Object} [attributes] Object keys will become attributes keys and object values will became attributes values.\n * @param {Node|String|Array.<Node|String>} [children] Child or array of children. Strings will be automatically turned\n * into Text nodes.\n * @returns {Element} Created element.\n */\nexport default function createElement( doc, name, attributes = {}, children = [] ) {\n\tconst namespace = attributes && attributes.xmlns;\n\tconst element = namespace ? doc.createElementNS( namespace, name ) : doc.createElement( name );\n\n\tfor ( const key in attributes ) {\n\t\telement.setAttribute( key, attributes[ key ] );\n\t}\n\n\tif ( isString( children ) || !isIterable( children ) ) {\n\t\tchildren = [ children ];\n\t}\n\n\tfor ( let child of children ) {\n\t\tif ( isString( child ) ) {\n\t\t\tchild = doc.createTextNode( child );\n\t\t}\n\n\t\telement.appendChild( child );\n\t}\n\n\treturn element;\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/editorui/editoruiview\n */\n\nimport View from '../view';\nimport BodyCollection from './bodycollection';\n\nimport '../../theme/components/editorui/editorui.css';\n\n/**\n * The editor UI view class. Base class for the editor main views.\n *\n * @extends module:ui/view~View\n */\nexport default class EditorUIView extends View {\n\t/**\n\t * Creates an instance of the editor UI view class.\n\t *\n\t * @param {module:utils/locale~Locale} [locale] The locale instance.\n\t */\n\tconstructor( locale ) {\n\t\tsuper( locale );\n\n\t\t/**\n\t\t * Collection of the child views, detached from the DOM\n\t\t * structure of the editor, like panels, icons etc.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/viewcollection~ViewCollection} #body\n\t\t */\n\t\tthis.body = new BodyCollection( locale );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\trender() {\n\t\tsuper.render();\n\n\t\tthis.body.attachToDom();\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tdestroy() {\n\t\tthis.body.detachFromDom();\n\n\t\treturn super.destroy();\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/label/labelview\n */\n\nimport View from '../view';\nimport uid from '@ckeditor/ckeditor5-utils/src/uid';\n\nimport '../../theme/components/label/label.css';\n\n/**\n * The label view class.\n *\n * @extends module:ui/view~View\n */\nexport default class LabelView extends View {\n\t/**\n\t * @inheritDoc\n\t */\n\tconstructor( locale ) {\n\t\tsuper( locale );\n\n\t\t/**\n\t\t * The text of the label.\n\t\t *\n\t\t * @observable\n\t\t * @member {String} #text\n\t\t */\n\t\tthis.set( 'text' );\n\n\t\t/**\n\t\t * The `for` attribute of the label (i.e. to pair with an `<input>` element).\n\t\t *\n\t\t * @observable\n\t\t * @member {String} #for\n\t\t */\n\t\tthis.set( 'for' );\n\n\t\t/**\n\t\t * An unique id of the label. It can be used by other UI components to reference\n\t\t * the label, for instance, using the `aria-describedby` DOM attribute.\n\t\t *\n\t\t * @member {String} #id\n\t\t */\n\t\tthis.id = `ck-editor__label_${ uid() }`;\n\n\t\tconst bind = this.bindTemplate;\n\n\t\tthis.setTemplate( {\n\t\t\ttag: 'label',\n\t\t\tattributes: {\n\t\t\t\tclass: [\n\t\t\t\t\t'ck',\n\t\t\t\t\t'ck-label'\n\t\t\t\t],\n\t\t\t\tid: this.id,\n\t\t\t\tfor: bind.to( 'for' )\n\t\t\t},\n\t\t\tchildren: [\n\t\t\t\t{\n\t\t\t\t\ttext: bind.to( 'text' )\n\t\t\t\t}\n\t\t\t]\n\t\t} );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/editorui/boxed/boxededitoruiview\n */\n\nimport EditorUIView from '../../editorui/editoruiview';\nimport LabelView from '../../label/labelview';\n\n/**\n * The boxed editor UI view class. This class represents an editor interface\n * consisting of a toolbar and an editable area, enclosed within a box.\n *\n * @extends module:ui/editorui/editoruiview~EditorUIView\n */\nexport default class BoxedEditorUIView extends EditorUIView {\n\t/**\n\t * Creates an instance of the boxed editor UI view class.\n\t *\n\t * @param {module:utils/locale~Locale} locale The locale instance..\n\t */\n\tconstructor( locale ) {\n\t\tsuper( locale );\n\n\t\t/**\n\t\t * Collection of the child views located in the top (`.ck-editor__top`)\n\t\t * area of the UI.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/viewcollection~ViewCollection}\n\t\t */\n\t\tthis.top = this.createCollection();\n\n\t\t/**\n\t\t * Collection of the child views located in the main (`.ck-editor__main`)\n\t\t * area of the UI.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/viewcollection~ViewCollection}\n\t\t */\n\t\tthis.main = this.createCollection();\n\n\t\t/**\n\t\t * Voice label of the UI.\n\t\t *\n\t\t * @protected\n\t\t * @readonly\n\t\t * @member {module:ui/view~View} #_voiceLabelView\n\t\t */\n\t\tthis._voiceLabelView = this._createVoiceLabel();\n\n\t\tthis.setTemplate( {\n\t\t\ttag: 'div',\n\n\t\t\tattributes: {\n\t\t\t\tclass: [\n\t\t\t\t\t'ck',\n\t\t\t\t\t'ck-reset',\n\t\t\t\t\t'ck-editor',\n\t\t\t\t\t'ck-rounded-corners'\n\t\t\t\t],\n\t\t\t\trole: 'application',\n\t\t\t\tdir: locale.uiLanguageDirection,\n\t\t\t\tlang: locale.uiLanguage,\n\t\t\t\t'aria-labelledby': this._voiceLabelView.id\n\t\t\t},\n\n\t\t\tchildren: [\n\t\t\t\tthis._voiceLabelView,\n\t\t\t\t{\n\t\t\t\t\ttag: 'div',\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\tclass: [\n\t\t\t\t\t\t\t'ck',\n\t\t\t\t\t\t\t'ck-editor__top',\n\t\t\t\t\t\t\t'ck-reset_all'\n\t\t\t\t\t\t],\n\t\t\t\t\t\trole: 'presentation'\n\t\t\t\t\t},\n\t\t\t\t\tchildren: this.top\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttag: 'div',\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\tclass: [\n\t\t\t\t\t\t\t'ck',\n\t\t\t\t\t\t\t'ck-editor__main'\n\t\t\t\t\t\t],\n\t\t\t\t\t\trole: 'presentation'\n\t\t\t\t\t},\n\t\t\t\t\tchildren: this.main\n\t\t\t\t}\n\t\t\t]\n\t\t} );\n\t}\n\n\t/**\n\t * Creates a voice label view instance.\n\t *\n\t * @private\n\t * @returns {module:ui/label/labelview~LabelView}\n\t */\n\t_createVoiceLabel() {\n\t\tconst t = this.t;\n\t\tconst voiceLabel = new LabelView();\n\n\t\tvoiceLabel.text = t( 'Rich Text Editor' );\n\n\t\tvoiceLabel.extendTemplate( {\n\t\t\tattributes: {\n\t\t\t\tclass: 'ck-voice-label'\n\t\t\t}\n\t\t} );\n\n\t\treturn voiceLabel;\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/editableui/inline/inlineeditableuiview\n */\n\nimport EditableUIView from '../../editableui/editableuiview';\n\n/**\n * The inline editable UI class implementing an inline {@link module:ui/editableui/editableuiview~EditableUIView}.\n *\n * @extends module:ui/editableui/editableuiview~EditableUIView\n */\nexport default class InlineEditableUIView extends EditableUIView {\n\t/**\n\t * Creates an instance of the InlineEditableUIView class.\n\t *\n\t * @param {module:utils/locale~Locale} [locale] The locale instance.\n\t * @param {module:engine/view/view~View} editingView The editing view instance the editable is related to.\n\t * @param {HTMLElement} [editableElement] The editable element. If not specified, the\n\t * {@link module:ui/editableui/editableuiview~EditableUIView}\n\t * will create it. Otherwise, the existing element will be used.\n\t */\n\tconstructor( locale, editingView, editableElement ) {\n\t\tsuper( locale, editingView, editableElement );\n\n\t\tthis.extendTemplate( {\n\t\t\tattributes: {\n\t\t\t\trole: 'textbox',\n\t\t\t\tclass: 'ck-editor__editable_inline'\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\trender() {\n\t\tsuper.render();\n\n\t\tconst editingView = this._editingView;\n\t\tconst t = this.t;\n\n\t\teditingView.change( writer => {\n\t\t\tconst viewRoot = editingView.document.getRoot( this.name );\n\n\t\t\twriter.setAttribute( 'aria-label', t( 'Rich Text Editor, %0', this.name ), viewRoot );\n\t\t} );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/editableui/editableuiview\n */\n\nimport View from '../view';\n\n/**\n * The editable UI view class.\n *\n * @extends module:ui/view~View\n */\nexport default class EditableUIView extends View {\n\t/**\n\t * Creates an instance of EditableUIView class.\n\t *\n\t * @param {module:utils/locale~Locale} [locale] The locale instance.\n\t * @param {module:engine/view/view~View} editingView The editing view instance the editable is related to.\n\t * @param {HTMLElement} [editableElement] The editable element. If not specified, this view\n\t * should create it. Otherwise, the existing element should be used.\n\t */\n\tconstructor( locale, editingView, editableElement ) {\n\t\tsuper( locale );\n\n\t\tthis.setTemplate( {\n\t\t\ttag: 'div',\n\t\t\tattributes: {\n\t\t\t\tclass: [\n\t\t\t\t\t'ck',\n\t\t\t\t\t'ck-content',\n\t\t\t\t\t'ck-editor__editable',\n\t\t\t\t\t'ck-rounded-corners'\n\t\t\t\t],\n\t\t\t\tlang: locale.contentLanguage,\n\t\t\t\tdir: locale.contentLanguageDirection\n\t\t\t}\n\t\t} );\n\n\t\t/**\n\t\t * The name of the editable UI view.\n\t\t *\n\t\t * @member {String} #name\n\t\t */\n\t\tthis.name = null;\n\n\t\t/**\n\t\t * Controls whether the editable is focused, i.e. the user is typing in it.\n\t\t *\n\t\t * @observable\n\t\t * @member {Boolean} #isFocused\n\t\t */\n\t\tthis.set( 'isFocused', false );\n\n\t\t/**\n\t\t * The element which is the main editable element (usually the one with `contentEditable=\"true\"`).\n\t\t *\n\t\t * @private\n\t\t * @type {HTMLElement}\n\t\t */\n\t\tthis._editableElement = editableElement;\n\n\t\t/**\n\t\t * Whether an external {@link #_editableElement} was passed into the constructor, which also means\n\t\t * the view will not render its {@link #template}.\n\t\t *\n\t\t * @private\n\t\t * @type {Boolean}\n\t\t */\n\t\tthis._hasExternalElement = !!this._editableElement;\n\n\t\t/**\n\t\t * The editing view instance the editable is related to. Editable uses the editing\n\t\t * view to dynamically modify its certain DOM attributes after {@link #render rendering}.\n\t\t *\n\t\t * **Note**: The DOM attributes are performed by the editing view and not UI\n\t\t * {@link module:ui/view~View#bindTemplate template bindings} because once rendered,\n\t\t * the editable DOM element must remain under the full control of the engine to work properly.\n\t\t *\n\t\t * @protected\n\t\t * @type {module:engine/view/view~View}\n\t\t */\n\t\tthis._editingView = editingView;\n\t}\n\n\t/**\n\t * Renders the view by either applying the {@link #template} to the existing\n\t * {@link #_editableElement} or assigning {@link #element} as {@link #_editableElement}.\n\t */\n\trender() {\n\t\tsuper.render();\n\n\t\tif ( this._hasExternalElement ) {\n\t\t\tthis.template.apply( this.element = this._editableElement );\n\t\t} else {\n\t\t\tthis._editableElement = this.element;\n\t\t}\n\n\t\tthis.on( 'change:isFocused', () => this._updateIsFocusedClasses() );\n\t\tthis._updateIsFocusedClasses();\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tdestroy() {\n\t\tif ( this._hasExternalElement ) {\n\t\t\tthis.template.revert( this._editableElement );\n\t\t}\n\n\t\tsuper.destroy();\n\t}\n\n\t/**\n\t * Updates the `ck-focused` and `ck-blurred` CSS classes on the {@link #element} according to\n\t * the {@link #isFocused} property value using the {@link #_editingView editing view} API.\n\t *\n\t * @private\n\t */\n\t_updateIsFocusedClasses() {\n\t\tconst editingView = this._editingView;\n\n\t\tif ( editingView.isRenderingInProgress ) {\n\t\t\tupdateAfterRender( this );\n\t\t} else {\n\t\t\tupdate( this );\n\t\t}\n\n\t\tfunction update( view ) {\n\t\t\teditingView.change( writer => {\n\t\t\t\tconst viewRoot = editingView.document.getRoot( view.name );\n\n\t\t\t\twriter.addClass( view.isFocused ? 'ck-focused' : 'ck-blurred', viewRoot );\n\t\t\t\twriter.removeClass( view.isFocused ? 'ck-blurred' : 'ck-focused', viewRoot );\n\t\t\t} );\n\t\t}\n\n\t\t// In a case of a multi-root editor, a callback will be attached more than once (one callback for each root).\n\t\t// While executing one callback the `isRenderingInProgress` observable is changing what causes executing another\n\t\t// callback and render is called inside the already pending render.\n\t\t// We need to be sure that callback is executed only when the value has changed from `true` to `false`.\n\t\t// See https://github.com/ckeditor/ckeditor5/issues/1676.\n\t\tfunction updateAfterRender( view ) {\n\t\t\teditingView.once( 'change:isRenderingInProgress', ( evt, name, value ) => {\n\t\t\t\tif ( !value ) {\n\t\t\t\t\tupdate( view );\n\t\t\t\t} else {\n\t\t\t\t\tupdateAfterRender( view );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/dom/tounit\n */\n\n/**\n * Returns a helper function, which adds a desired trailing\n * `unit` to the passed value.\n *\n * @param {String} unit An unit like \"px\" or \"em\".\n * @returns {module:utils/dom/tounit~helper}\n */\nexport default function toUnit( unit ) {\n\t/**\n\t * A function, which adds a pre–defined trailing `unit`\n\t * to the passed `value`.\n\t *\n\t * @function helper\n \t * @param {*} value A value to be given the unit.\n \t * @returns {String} A value with the trailing unit.\n\t */\n\treturn value => value + unit;\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/panel/sticky/stickypanelview\n */\n\nimport global from '@ckeditor/ckeditor5-utils/src/dom/global';\nimport View from '../../view';\nimport Template from '../../template';\nimport toUnit from '@ckeditor/ckeditor5-utils/src/dom/tounit';\n\nimport '../../../theme/components/panel/stickypanel.css';\n\nconst toPx = toUnit( 'px' );\n\n/**\n * The sticky panel view class.\n */\nexport default class StickyPanelView extends View {\n\t/**\n\t * @inheritDoc\n\t */\n\tconstructor( locale ) {\n\t\tsuper( locale );\n\n\t\tconst bind = this.bindTemplate;\n\n\t\t/**\n\t\t * Controls whether the sticky panel should be active.\n\t\t *\n\t\t * @readonly\n\t\t * @observable\n\t\t * @member {Boolean} #isActive\n\t\t */\n\t\tthis.set( 'isActive', false );\n\n\t\t/**\n\t\t * Controls whether the sticky panel is in the \"sticky\" state.\n\t\t *\n\t\t * @readonly\n\t\t * @observable\n\t\t * @member {Boolean} #isSticky\n\t\t */\n\t\tthis.set( 'isSticky', false );\n\n\t\t/**\n\t\t * The limiter element for the sticky panel instance. Its bounding rect limits\n\t\t * the \"stickyness\" of the panel, i.e. when the panel reaches the bottom\n\t\t * edge of the limiter, it becomes sticky to that edge and does not float\n\t\t * off the limiter. It is mandatory for the panel to work properly and once\n\t\t * set, it cannot be changed.\n\t\t *\n\t\t * @readonly\n\t\t * @observable\n\t\t * @member {HTMLElement} #limiterElement\n\t\t */\n\t\tthis.set( 'limiterElement', null );\n\n\t\t/**\n\t\t * The offset from the bottom edge of {@link #limiterElement}\n\t\t * which stops the panel from stickying any further to prevent limiter's content\n\t\t * from being completely covered.\n\t\t *\n\t\t * @readonly\n\t\t * @observable\n\t\t * @default 50\n\t\t * @member {Number} #limiterBottomOffset\n\t\t */\n\t\tthis.set( 'limiterBottomOffset', 50 );\n\n\t\t/**\n\t\t * The offset from the top edge of the web browser's viewport which makes the\n\t\t * panel become sticky. The default value is `0`, which means the panel becomes\n\t\t * sticky when it's upper edge touches the top of the page viewport.\n\t\t *\n\t\t * This attribute is useful when the web page has UI elements positioned to the top\n\t\t * either using `position: fixed` or `position: sticky`, which would cover the\n\t\t * sticky panel or vice–versa (depending on the `z-index` hierarchy).\n\t\t *\n\t\t * @readonly\n\t\t * @observable\n\t\t * @default 0\n\t\t * @member {Number} #viewportTopOffset\n\t\t */\n\t\tthis.set( 'viewportTopOffset', 0 );\n\n\t\t/**\n\t\t * Controls the `margin-left` CSS style of the panel.\n\t\t *\n\t\t * @protected\n\t\t * @readonly\n\t\t * @observable\n\t\t * @member {String} #_marginLeft\n\t\t */\n\t\tthis.set( '_marginLeft', null );\n\n\t\t/**\n\t\t * Set `true` if the sticky panel reached the bottom edge of the\n\t\t * {@link #limiterElement}.\n\t\t *\n\t\t * @protected\n\t\t * @readonly\n\t\t * @observable\n\t\t * @member {Boolean} #_isStickyToTheLimiter\n\t\t */\n\t\tthis.set( '_isStickyToTheLimiter', false );\n\n\t\t/**\n\t\t * Set `true` if the sticky panel uses the {@link #viewportTopOffset},\n\t\t * i.e. not {@link #_isStickyToTheLimiter} and the {@link #viewportTopOffset}\n\t\t * is not `0`.\n\t\t *\n\t\t * @protected\n\t\t * @readonly\n\t\t * @observable\n\t\t * @member {Boolean} #_hasViewportTopOffset\n\t\t */\n\t\tthis.set( '_hasViewportTopOffset', false );\n\n\t\t/**\n\t\t * Collection of the child views which creates balloon panel contents.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/viewcollection~ViewCollection}\n\t\t */\n\t\tthis.content = this.createCollection();\n\n\t\t/**\n\t\t * The DOM bounding client rect of the {@link module:ui/view~View#element} of the panel.\n\t\t *\n\t\t * @protected\n\t\t * @member {Object} #_panelRect\n\t\t */\n\n\t\t/**\n\t\t * The DOM bounding client rect of the {@link #limiterElement}\n\t\t * of the panel.\n\t\t *\n\t\t * @protected\n\t\t * @member {Object} #_limiterRect\n\t\t */\n\n\t\t/**\n\t\t * A dummy element which visually fills the space as long as the\n\t\t * actual panel is sticky. It prevents flickering of the UI.\n\t\t *\n\t\t * @protected\n\t\t * @property {HTMLElement}\n\t\t */\n\t\tthis._contentPanelPlaceholder = new Template( {\n\t\t\ttag: 'div',\n\t\t\tattributes: {\n\t\t\t\tclass: [\n\t\t\t\t\t'ck',\n\t\t\t\t\t'ck-sticky-panel__placeholder'\n\t\t\t\t],\n\t\t\t\tstyle: {\n\t\t\t\t\tdisplay: bind.to( 'isSticky', isSticky => isSticky ? 'block' : 'none' ),\n\t\t\t\t\theight: bind.to( 'isSticky', isSticky => {\n\t\t\t\t\t\treturn isSticky ? toPx( this._panelRect.height ) : null;\n\t\t\t\t\t} )\n\t\t\t\t}\n\t\t\t}\n\t\t} ).render();\n\n\t\t/**\n\t\t * The panel which accepts children into {@link #content} collection.\n\t\t * Also an element which is positioned when {@link #isSticky}.\n\t\t *\n\t\t * @protected\n\t\t * @property {HTMLElement}\n\t\t */\n\t\tthis._contentPanel = new Template( {\n\t\t\ttag: 'div',\n\n\t\t\tattributes: {\n\t\t\t\tclass: [\n\t\t\t\t\t'ck',\n\t\t\t\t\t'ck-sticky-panel__content',\n\t\t\t\t\t// Toggle class of the panel when \"sticky\" state changes in the view.\n\t\t\t\t\tbind.if( 'isSticky', 'ck-sticky-panel__content_sticky' ),\n\t\t\t\t\tbind.if( '_isStickyToTheLimiter', 'ck-sticky-panel__content_sticky_bottom-limit' )\n\t\t\t\t],\n\t\t\t\tstyle: {\n\t\t\t\t\twidth: bind.to( 'isSticky', isSticky => {\n\t\t\t\t\t\treturn isSticky ? toPx( this._contentPanelPlaceholder.getBoundingClientRect().width ) : null;\n\t\t\t\t\t} ),\n\n\t\t\t\t\ttop: bind.to( '_hasViewportTopOffset', _hasViewportTopOffset => {\n\t\t\t\t\t\treturn _hasViewportTopOffset ? toPx( this.viewportTopOffset ) : null;\n\t\t\t\t\t} ),\n\n\t\t\t\t\tbottom: bind.to( '_isStickyToTheLimiter', _isStickyToTheLimiter => {\n\t\t\t\t\t\treturn _isStickyToTheLimiter ? toPx( this.limiterBottomOffset ) : null;\n\t\t\t\t\t} ),\n\n\t\t\t\t\tmarginLeft: bind.to( '_marginLeft' )\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tchildren: this.content\n\t\t} ).render();\n\n\t\tthis.setTemplate( {\n\t\t\ttag: 'div',\n\t\t\tattributes: {\n\t\t\t\tclass: [\n\t\t\t\t\t'ck',\n\t\t\t\t\t'ck-sticky-panel'\n\t\t\t\t]\n\t\t\t},\n\t\t\tchildren: [\n\t\t\t\tthis._contentPanelPlaceholder,\n\t\t\t\tthis._contentPanel\n\t\t\t]\n\t\t} );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\trender() {\n\t\tsuper.render();\n\n\t\t// Check if the panel should go into the sticky state immediately.\n\t\tthis._checkIfShouldBeSticky();\n\n\t\t// Update sticky state of the panel as the window is being scrolled.\n\t\tthis.listenTo( global.window, 'scroll', () => {\n\t\t\tthis._checkIfShouldBeSticky();\n\t\t} );\n\n\t\t// Synchronize with `model.isActive` because sticking an inactive panel is pointless.\n\t\tthis.listenTo( this, 'change:isActive', () => {\n\t\t\tthis._checkIfShouldBeSticky();\n\t\t} );\n\t}\n\n\t/**\n\t * Analyzes the environment to decide whether the panel should\n\t * be sticky or not.\n\t *\n\t * @protected\n\t */\n\t_checkIfShouldBeSticky() {\n\t\tconst panelRect = this._panelRect = this._contentPanel.getBoundingClientRect();\n\t\tlet limiterRect;\n\n\t\tif ( !this.limiterElement ) {\n\t\t\tthis.isSticky = false;\n\t\t} else {\n\t\t\tlimiterRect = this._limiterRect = this.limiterElement.getBoundingClientRect();\n\n\t\t\t// The panel must be active to become sticky.\n\t\t\tthis.isSticky = this.isActive &&\n\t\t\t\t// The limiter's top edge must be beyond the upper edge of the visible viewport (+the viewportTopOffset).\n\t\t\t\tlimiterRect.top < this.viewportTopOffset &&\n\t\t\t\t// The model#limiterElement's height mustn't be smaller than the panel's height and model#limiterBottomOffset.\n\t\t\t\t// There's no point in entering the sticky mode if the model#limiterElement is very, very small, because\n\t\t\t\t// it would immediately set model#_isStickyToTheLimiter true and, given model#limiterBottomOffset, the panel\n\t\t\t\t// would be positioned before the model#limiterElement.\n\t\t\t\tthis._panelRect.height + this.limiterBottomOffset < limiterRect.height;\n\t\t}\n\n\t\t// Stick the panel to the top edge of the viewport simulating CSS position:sticky.\n\t\t// TODO: Possibly replaced by CSS in the future http://caniuse.com/#feat=css-sticky\n\t\tif ( this.isSticky ) {\n\t\t\tthis._isStickyToTheLimiter =\n\t\t\t\tlimiterRect.bottom < panelRect.height + this.limiterBottomOffset + this.viewportTopOffset;\n\t\t\tthis._hasViewportTopOffset = !this._isStickyToTheLimiter && !!this.viewportTopOffset;\n\t\t\tthis._marginLeft = this._isStickyToTheLimiter ? null : toPx( -global.window.scrollX );\n\t\t}\n\t\t// Detach the panel from the top edge of the viewport.\n\t\telse {\n\t\t\tthis._isStickyToTheLimiter = false;\n\t\t\tthis._hasViewportTopOffset = false;\n\t\t\tthis._marginLeft = null;\n\t\t}\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/focuscycler\n */\n\nimport global from '@ckeditor/ckeditor5-utils/src/dom/global';\n\n/**\n * A utility class that helps cycling over focusable {@link module:ui/view~View views} in a\n * {@link module:ui/viewcollection~ViewCollection} when the focus is tracked by the\n * {@link module:utils/focustracker~FocusTracker} instance. It helps implementing keyboard\n * navigation in HTML forms, toolbars, lists and the like.\n *\n * To work properly it requires:\n * * a collection of focusable (HTML `tabindex` attribute) views that implement the `focus()` method,\n * * an associated focus tracker to determine which view is focused.\n *\n * A simple cycler setup can look like this:\n *\n *\t\tconst focusables = new ViewCollection();\n *\t\tconst focusTracker = new FocusTracker();\n *\n *\t\t// Add focusable views to the focus tracker.\n *\t\tfocusTracker.add( ... );\n *\n * Then, the cycler can be used manually:\n *\n *\t\tconst cycler = new FocusCycler( { focusables, focusTracker } );\n *\n *\t\t// Will focus the first focusable view in #focusables.\n *\t\tcycler.focusFirst();\n *\n *\t\t// Will log the next focusable item in #focusables.\n *\t\tconsole.log( cycler.next );\n *\n * Alternatively, it can work side by side with the {@link module:utils/keystrokehandler~KeystrokeHandler}:\n *\n *\t\tconst keystrokeHandler = new KeystrokeHandler();\n *\n *\t\t// Activate the keystroke handler.\n *\t\tkeystrokeHandler.listenTo( sourceOfEvents );\n *\n *\t\tconst cycler = new FocusCycler( {\n *\t\t\tfocusables, focusTracker, keystrokeHandler,\n *\t\t\tactions: {\n *\t\t\t\t// When arrowup of arrowleft is detected by the #keystrokeHandler,\n *\t\t\t\t// focusPrevious() will be called on the cycler.\n *\t\t\t\tfocusPrevious: [ 'arrowup', 'arrowleft' ],\n *\t\t\t}\n *\t\t} );\n *\n * Check out the {@glink framework/guides/deep-dive/ui/focus-tracking \"Deep dive into focus tracking\" guide} to learn more.\n */\nexport default class FocusCycler {\n\t/**\n\t * Creates an instance of the focus cycler utility.\n\t *\n\t * @param {Object} options Configuration options.\n\t * @param {module:utils/collection~Collection|Object} options.focusables\n\t * @param {module:utils/focustracker~FocusTracker} options.focusTracker\n\t * @param {module:utils/keystrokehandler~KeystrokeHandler} [options.keystrokeHandler]\n\t * @param {Object} [options.actions]\n\t */\n\tconstructor( options ) {\n\t\tObject.assign( this, options );\n\n\t\t/**\n\t\t * A {@link module:ui/view~View view} collection that the cycler operates on.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:utils/collection~Collection} #focusables\n\t\t */\n\n\t\t/**\n\t\t * A focus tracker instance that the cycler uses to determine the current focus\n\t\t * state in {@link #focusables}.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:utils/focustracker~FocusTracker} #focusTracker\n\t\t */\n\n\t\t/**\n\t\t * An instance of the {@link module:utils/keystrokehandler~KeystrokeHandler}\n\t\t * which can respond to certain keystrokes and cycle the focus.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:utils/keystrokehandler~KeystrokeHandler} #keystrokeHandler\n\t\t */\n\n\t\t/**\n\t\t * Actions that the cycler can take when a keystroke is pressed. Requires\n\t\t * `options.keystrokeHandler` to be passed and working. When an action is\n\t\t * performed, `preventDefault` and `stopPropagation` will be called on the event\n\t\t * the keystroke fired in the DOM.\n\t\t *\n\t\t *\t\tactions: {\n\t\t *\t\t\t// Will call #focusPrevious() when arrowleft or arrowup is pressed.\n\t\t *\t\t\tfocusPrevious: [ 'arrowleft', 'arrowup' ],\n\t\t *\n\t\t *\t\t\t// Will call #focusNext() when arrowdown is pressed.\n\t\t *\t\t\tfocusNext: 'arrowdown'\n\t\t *\t\t}\n\t\t *\n\t\t * @readonly\n\t\t * @member {Object} #actions\n\t\t */\n\n\t\tif ( options.actions && options.keystrokeHandler ) {\n\t\t\tfor ( const methodName in options.actions ) {\n\t\t\t\tlet actions = options.actions[ methodName ];\n\n\t\t\t\tif ( typeof actions == 'string' ) {\n\t\t\t\t\tactions = [ actions ];\n\t\t\t\t}\n\n\t\t\t\tfor ( const keystroke of actions ) {\n\t\t\t\t\toptions.keystrokeHandler.set( keystroke, ( data, cancel ) => {\n\t\t\t\t\t\tthis[ methodName ]();\n\t\t\t\t\t\tcancel();\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Returns the first focusable view in {@link #focusables}.\n\t * Returns `null` if there is none.\n\t *\n\t * @readonly\n\t * @member {module:ui/view~View|null} #first\n\t */\n\tget first() {\n\t\treturn this.focusables.find( isFocusable ) || null;\n\t}\n\n\t/**\n\t * Returns the last focusable view in {@link #focusables}.\n\t * Returns `null` if there is none.\n\t *\n\t * @readonly\n\t * @member {module:ui/view~View|null} #last\n\t */\n\tget last() {\n\t\treturn this.focusables.filter( isFocusable ).slice( -1 )[ 0 ] || null;\n\t}\n\n\t/**\n\t * Returns the next focusable view in {@link #focusables} based on {@link #current}.\n\t * Returns `null` if there is none.\n\t *\n\t * @readonly\n\t * @member {module:ui/view~View|null} #next\n\t */\n\tget next() {\n\t\treturn this._getFocusableItem( 1 );\n\t}\n\n\t/**\n\t * Returns the previous focusable view in {@link #focusables} based on {@link #current}.\n\t * Returns `null` if there is none.\n\t *\n\t * @readonly\n\t * @member {module:ui/view~View|null} #previous\n\t */\n\tget previous() {\n\t\treturn this._getFocusableItem( -1 );\n\t}\n\n\t/**\n\t * An index of the view in the {@link #focusables} which is focused according\n\t * to {@link #focusTracker}. Returns `null` when there is no such view.\n\t *\n\t * @readonly\n\t * @member {Number|null} #current\n\t */\n\tget current() {\n\t\tlet index = null;\n\n\t\t// There's no focused view in the focusables.\n\t\tif ( this.focusTracker.focusedElement === null ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tthis.focusables.find( ( view, viewIndex ) => {\n\t\t\tconst focused = view.element === this.focusTracker.focusedElement;\n\n\t\t\tif ( focused ) {\n\t\t\t\tindex = viewIndex;\n\t\t\t}\n\n\t\t\treturn focused;\n\t\t} );\n\n\t\treturn index;\n\t}\n\n\t/**\n\t * Focuses the {@link #first} item in {@link #focusables}.\n\t */\n\tfocusFirst() {\n\t\tthis._focus( this.first );\n\t}\n\n\t/**\n\t * Focuses the {@link #last} item in {@link #focusables}.\n\t */\n\tfocusLast() {\n\t\tthis._focus( this.last );\n\t}\n\n\t/**\n\t * Focuses the {@link #next} item in {@link #focusables}.\n\t */\n\tfocusNext() {\n\t\tthis._focus( this.next );\n\t}\n\n\t/**\n\t * Focuses the {@link #previous} item in {@link #focusables}.\n\t */\n\tfocusPrevious() {\n\t\tthis._focus( this.previous );\n\t}\n\n\t/**\n\t * Focuses the given view if it exists.\n\t *\n\t * @protected\n\t * @param {module:ui/view~View} view\n\t */\n\t_focus( view ) {\n\t\tif ( view ) {\n\t\t\tview.focus();\n\t\t}\n\t}\n\n\t/**\n\t * Returns the next or previous focusable view in {@link #focusables} with respect\n\t * to {@link #current}.\n\t *\n\t * @protected\n\t * @param {Number} step Either `1` for checking forward from {@link #current} or\n\t * `-1` for checking backwards.\n\t * @returns {module:ui/view~View|null}\n\t */\n\t_getFocusableItem( step ) {\n\t\t// Cache for speed.\n\t\tconst current = this.current;\n\t\tconst collectionLength = this.focusables.length;\n\n\t\tif ( !collectionLength ) {\n\t\t\treturn null;\n\t\t}\n\n\t\t// Start from the beginning if no view is focused.\n\t\t// https://github.com/ckeditor/ckeditor5-ui/issues/206\n\t\tif ( current === null ) {\n\t\t\treturn this[ step === 1 ? 'first' : 'last' ];\n\t\t}\n\n\t\t// Cycle in both directions.\n\t\tlet index = ( current + collectionLength + step ) % collectionLength;\n\n\t\tdo {\n\t\t\tconst view = this.focusables.get( index );\n\n\t\t\t// TODO: Check if view is visible.\n\t\t\tif ( isFocusable( view ) ) {\n\t\t\t\treturn view;\n\t\t\t}\n\n\t\t\t// Cycle in both directions.\n\t\t\tindex = ( index + collectionLength + step ) % collectionLength;\n\t\t} while ( index !== current );\n\n\t\treturn null;\n\t}\n}\n\n// Checks whether a view is focusable.\n//\n// @private\n// @param {module:ui/view~View} view A view to be checked.\n// @returns {Boolean}\nfunction isFocusable( view ) {\n\treturn !!( view.focus && global.window.getComputedStyle( view.element ).display != 'none' );\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/toolbar/toolbarseparatorview\n */\n\nimport View from '../view';\n\n/**\n * The toolbar separator view class.\n *\n * @extends module:ui/view~View\n */\nexport default class ToolbarSeparatorView extends View {\n\t/**\n\t * @inheritDoc\n\t */\n\tconstructor( locale ) {\n\t\tsuper( locale );\n\n\t\tthis.setTemplate( {\n\t\t\ttag: 'span',\n\t\t\tattributes: {\n\t\t\t\tclass: [\n\t\t\t\t\t'ck',\n\t\t\t\t\t'ck-toolbar__separator'\n\t\t\t\t]\n\t\t\t}\n\t\t} );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/toolbar/toolbarlinebreakview\n */\n\nimport View from '../view';\n\n/**\n * The toolbar line break view class.\n *\n * @extends module:ui/view~View\n */\nexport default class ToolbarLineBreakView extends View {\n\t/**\n\t * @inheritDoc\n\t */\n\tconstructor( locale ) {\n\t\tsuper( locale );\n\n\t\tthis.setTemplate( {\n\t\t\ttag: 'span',\n\t\t\tattributes: {\n\t\t\t\tclass: [\n\t\t\t\t\t'ck',\n\t\t\t\t\t'ck-toolbar__line-break'\n\t\t\t\t]\n\t\t\t}\n\t\t} );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/dom/resizeobserver\n */\n\n/* globals setTimeout, clearTimeout */\n\nimport mix from '../mix';\nimport global from './global';\nimport Rect from './rect';\nimport DomEmitterMixin from './emittermixin';\n\nconst RESIZE_CHECK_INTERVAL = 100;\n\n/**\n * A helper class which instances allow performing custom actions when native DOM elements are resized.\n *\n *\t\tconst editableElement = editor.editing.view.getDomRoot();\n *\n *\t\tconst observer = new ResizeObserver( editableElement, entry => {\n *\t\t\tconsole.log( 'The editable element has been resized in DOM.' );\n *\t\t\tconsole.log( entry.target ); // -> editableElement\n *\t\t\tconsole.log( entry.contentRect.width ); // -> e.g. '423px'\n *\t\t} );\n *\n * By default, it uses the [native DOM resize observer](https://developer.mozilla.org/en-US/docs/Web/API/ResizeObserver)\n * under the hood and in browsers that do not support the native API yet, a polyfilled observer is\n * used instead.\n */\nexport default class ResizeObserver {\n\t/**\n\t * Creates an instance of the `ResizeObserver` class.\n\t *\n\t * @param {HTMLElement} element A DOM element that is to be observed for resizing. Note that\n\t * the element must be visible (i.e. not detached from DOM) for the observer to work.\n\t * @param {Function} callback A function called when the observed element was resized. It passes\n\t * the [`ResizeObserverEntry`](https://developer.mozilla.org/en-US/docs/Web/API/ResizeObserverEntry)\n\t * object with information about the resize event.\n\t */\n\tconstructor( element, callback ) {\n\t\t// **Note**: For the maximum performance, this class ensures only a single instance of the native\n\t\t// (or polyfilled) observer is used no matter how many instances of this class were created.\n\t\tif ( !ResizeObserver._observerInstance ) {\n\t\t\tResizeObserver._createObserver();\n\t\t}\n\n\t\t/**\n\t\t * The element observer by this observer.\n\t\t *\n\t\t * @readonly\n\t\t * @private\n\t\t * @member {HTMLElement}\n\t\t */\n\t\tthis._element = element;\n\n\t\t/**\n\t\t * The callback executed each time {@link #_element} is resized.\n\t\t *\n\t\t * @readonly\n\t\t * @private\n\t\t * @member {Function}\n\t\t */\n\t\tthis._callback = callback;\n\n\t\tResizeObserver._addElementCallback( element, callback );\n\t\tResizeObserver._observerInstance.observe( element );\n\t}\n\n\t/**\n\t * Destroys the observer which disables the `callback` passed to the {@link #constructor}.\n\t */\n\tdestroy() {\n\t\tResizeObserver._deleteElementCallback( this._element, this._callback );\n\t}\n\n\t/**\n\t * Registers a new resize callback for the DOM element.\n\t *\n\t * @private\n\t * @static\n\t * @param {HTMLElement} element\n\t * @param {Function} callback\n\t */\n\tstatic _addElementCallback( element, callback ) {\n\t\tif ( !ResizeObserver._elementCallbacks ) {\n\t\t\tResizeObserver._elementCallbacks = new Map();\n\t\t}\n\n\t\tlet callbacks = ResizeObserver._elementCallbacks.get( element );\n\n\t\tif ( !callbacks ) {\n\t\t\tcallbacks = new Set();\n\t\t\tResizeObserver._elementCallbacks.set( element, callbacks );\n\t\t}\n\n\t\tcallbacks.add( callback );\n\t}\n\n\t/**\n\t * Removes a resize callback from the DOM element. If no callbacks are left\n\t * for the element, it removes the element from the native observer.\n\t *\n\t * @private\n\t * @static\n\t * @param {HTMLElement} element\n\t * @param {Function} callback\n\t */\n\tstatic _deleteElementCallback( element, callback ) {\n\t\tconst callbacks = ResizeObserver._getElementCallbacks( element );\n\n\t\t// Remove the element callback. Check if exist first in case someone\n\t\t// called destroy() twice.\n\t\tif ( callbacks ) {\n\t\t\tcallbacks.delete( callback );\n\n\t\t\t// If no callbacks left for the element, also remove the element.\n\t\t\tif ( !callbacks.size ) {\n\t\t\t\tResizeObserver._elementCallbacks.delete( element );\n\t\t\t\tResizeObserver._observerInstance.unobserve( element );\n\t\t\t}\n\t\t}\n\n\t\tif ( ResizeObserver._elementCallbacks && !ResizeObserver._elementCallbacks.size ) {\n\t\t\tResizeObserver._observerInstance = null;\n\t\t\tResizeObserver._elementCallbacks = null;\n\t\t}\n\t}\n\n\t/**\n\t * Returns are registered resize callbacks for the DOM element.\n\t *\n\t * @private\n\t * @static\n\t * @param {HTMLElement} element\n\t * @returns {Set.<HTMLElement>|null}\n\t */\n\tstatic _getElementCallbacks( element ) {\n\t\tif ( !ResizeObserver._elementCallbacks ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn ResizeObserver._elementCallbacks.get( element );\n\t}\n\n\t/**\n\t * Creates the single native observer shared across all `ResizeObserver` instances.\n\t * If the browser does not support the native API, it creates a polyfill.\n\t *\n\t * @private\n\t * @static\n\t */\n\tstatic _createObserver() {\n\t\tlet ObserverConstructor;\n\n\t\t// TODO: One day, the `ResizeObserver` API will be supported in all modern web browsers.\n\t\t// When it happens, this module will no longer make sense and should be removed and\n\t\t// the native implementation should be used across the project to save bytes.\n\t\t// Check out https://caniuse.com/#feat=resizeobserver.\n\t\tif ( typeof global.window.ResizeObserver === 'function' ) {\n\t\t\tObserverConstructor = global.window.ResizeObserver;\n\t\t} else {\n\t\t\tObserverConstructor = ResizeObserverPolyfill;\n\t\t}\n\n\t\tResizeObserver._observerInstance = new ObserverConstructor( entries => {\n\t\t\tfor ( const entry of entries ) {\n\t\t\t\tconst callbacks = ResizeObserver._getElementCallbacks( entry.target );\n\n\t\t\t\tif ( callbacks ) {\n\t\t\t\t\tfor ( const callback of callbacks ) {\n\t\t\t\t\t\tcallback( entry );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n}\n\n/**\n * The single native observer instance (or polyfill in browsers that do not support the API)\n * shared across all {@link module:utils/dom/resizeobserver~ResizeObserver} instances.\n *\n * @static\n * @protected\n * @readonly\n * @property {Object|null} module:utils/dom/resizeobserver~ResizeObserver#_observerInstance\n */\nResizeObserver._observerInstance = null;\n\n/**\n * A mapping of native DOM elements and their callbacks shared across all\n * {@link module:utils/dom/resizeobserver~ResizeObserver} instances.\n *\n * @static\n * @private\n * @readonly\n * @property {Map.<HTMLElement,Set>|null} module:utils/dom/resizeobserver~ResizeObserver#_elementCallbacks\n */\nResizeObserver._elementCallbacks = null;\n\n/**\n * A polyfill class for the native [`ResizeObserver`](https://developer.mozilla.org/en-US/docs/Web/API/ResizeObserver).\n *\n * @private\n * @mixes module:utils/domemittermixin~DomEmitterMixin\n */\nclass ResizeObserverPolyfill {\n\t/**\n\t * Creates an instance of the {@link module:utils/dom/resizeobserver~ResizeObserverPolyfill} class.\n\t *\n\t * It synchronously reacts to resize of the window to check if observed elements' geometry changed.\n\t *\n\t * Additionally, the polyfilled observer uses a timeout to check if observed elements' geometry has changed\n\t * in some other way (dynamic layouts, scrollbars showing up, etc.), so its response can also be asynchronous.\n\t *\n\t * @param {Function} callback A function called when any observed element was resized. Refer to the\n\t * native [`ResizeObserver`](https://developer.mozilla.org/en-US/docs/Web/API/ResizeObserver) API to\n\t * learn more.\n\t */\n\tconstructor( callback ) {\n\t\t/**\n\t\t * A function called when any observed {@link #_elements element} was resized.\n\t\t *\n\t\t * @readonly\n\t\t * @protected\n\t\t * @member {Function}\n\t\t */\n\t\tthis._callback = callback;\n\n\t\t/**\n\t\t * DOM elements currently observed by the observer instance.\n\t\t *\n\t\t * @readonly\n\t\t * @protected\n\t\t * @member {Set}\n\t\t */\n\t\tthis._elements = new Set();\n\n\t\t/**\n\t\t * Cached DOM {@link #_elements elements} bounding rects to compare to upon the next check.\n\t\t *\n\t\t * @readonly\n\t\t * @protected\n\t\t * @member {Map.<HTMLElement,module:utils/dom/rect~Rect>}\n\t\t */\n\t\tthis._previousRects = new Map();\n\n\t\t/**\n\t\t * An UID of the current timeout upon which the observed elements rects\n\t\t * will be compared to the {@link #_previousRects previous rects} from the past.\n\t\t *\n\t\t * @readonly\n\t\t * @protected\n\t\t * @member {Map.<HTMLElement,module:utils/dom/rect~Rect>}\n\t\t */\n\t\tthis._periodicCheckTimeout = null;\n\t}\n\n\t/**\n\t * Starts observing a DOM element.\n\t *\n\t * Learn more in the\n\t * [native method documentation](https://developer.mozilla.org/en-US/docs/Web/API/ResizeObserver/observe).\n\t *\n\t * @param {HTMLElement} element\n\t */\n\tobserve( element ) {\n\t\tthis._elements.add( element );\n\n\t\tthis._checkElementRectsAndExecuteCallback();\n\n\t\tif ( this._elements.size === 1 ) {\n\t\t\tthis._startPeriodicCheck();\n\t\t}\n\t}\n\n\t/**\n\t * Stops observing a DOM element.\n\t *\n\t * Learn more in the\n\t * [native method documentation](https://developer.mozilla.org/en-US/docs/Web/API/ResizeObserver/unobserve).\n\t *\n\t * @param {HTMLElement} element\n\t */\n\tunobserve( element ) {\n\t\tthis._elements.delete( element );\n\t\tthis._previousRects.delete( element );\n\n\t\tif ( !this._elements.size ) {\n\t\t\tthis._stopPeriodicCheck();\n\t\t}\n\t}\n\n\t/**\n\t * When called, the observer calls the {@link #_callback resize callback} for all observed\n\t * {@link #_elements elements} but also starts checking periodically for changes in the elements' geometry.\n\t * If some are detected, {@link #_callback resize callback} is called for relevant elements that were resized.\n\t *\n\t * @protected\n\t */\n\t_startPeriodicCheck() {\n\t\tconst periodicCheck = () => {\n\t\t\tthis._checkElementRectsAndExecuteCallback();\n\t\t\tthis._periodicCheckTimeout = setTimeout( periodicCheck, RESIZE_CHECK_INTERVAL );\n\t\t};\n\n\t\tthis.listenTo( global.window, 'resize', () => {\n\t\t\tthis._checkElementRectsAndExecuteCallback();\n\t\t} );\n\n\t\tthis._periodicCheckTimeout = setTimeout( periodicCheck, RESIZE_CHECK_INTERVAL );\n\t}\n\n\t/**\n\t * Stops checking for changes in all observed {@link #_elements elements} geometry.\n\t *\n\t * @protected\n\t */\n\t_stopPeriodicCheck() {\n\t\tclearTimeout( this._periodicCheckTimeout );\n\t\tthis.stopListening();\n\t\tthis._previousRects.clear();\n\t}\n\n\t/**\n\t * Checks if the geometry of any of the {@link #_elements element} has changed. If so, executes\n\t * the {@link #_callback resize callback} with element geometry data.\n\t *\n\t * @protected\n\t */\n\t_checkElementRectsAndExecuteCallback() {\n\t\tconst entries = [];\n\n\t\tfor ( const element of this._elements ) {\n\t\t\tif ( this._hasRectChanged( element ) ) {\n\t\t\t\tentries.push( {\n\t\t\t\t\ttarget: element,\n\t\t\t\t\tcontentRect: this._previousRects.get( element )\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\n\t\tif ( entries.length ) {\n\t\t\tthis._callback( entries );\n\t\t}\n\t}\n\n\t/**\n\t * Compares the DOM element geometry to the {@link #_previousRects cached geometry} from the past.\n\t * Returns `true` if geometry has changed or the element is checked for the first time.\n\t *\n\t * @protected\n\t * @param {HTMLElement} element\n\t * @returns {Boolean}\n\t */\n\t_hasRectChanged( element ) {\n\t\tif ( !element.ownerDocument.body.contains( element ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst currentRect = new Rect( element );\n\t\tconst previousRect = this._previousRects.get( element );\n\n\t\t// The first check should always yield true despite no Previous rect to compare to.\n\t\t// The native ResizeObserver does that and... that makes sense. Sort of.\n\t\tconst hasChanged = !previousRect || !previousRect.isEqual( currentRect );\n\n\t\tthis._previousRects.set( element, currentRect );\n\n\t\treturn hasChanged;\n\t}\n}\n\nmix( ResizeObserverPolyfill, DomEmitterMixin );\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/dropdown/dropdownpanelview\n */\n\nimport View from '../view';\n\n/**\n * The dropdown panel view class.\n *\n * See {@link module:ui/dropdown/dropdownview~DropdownView} to learn about the common usage.\n *\n * @extends module:ui/view~View\n */\nexport default class DropdownPanelView extends View {\n\t/**\n\t * @inheritDoc\n\t */\n\tconstructor( locale ) {\n\t\tsuper( locale );\n\n\t\tconst bind = this.bindTemplate;\n\n\t\t/**\n\t\t * Controls whether the panel is visible.\n\t\t *\n\t\t * @observable\n\t\t * @member {Boolean} #isVisible\n\t\t */\n\t\tthis.set( 'isVisible', false );\n\n\t\t/**\n\t\t * The position of the panel, relative to the parent.\n\t\t *\n\t\t * This property is reflected in the CSS class set to {@link #element} that controls\n\t\t * the position of the panel.\n\t\t *\n\t\t * @observable\n\t\t * @default 'se'\n\t\t * @member {'s'|'se'|'sw'|'sme'|'smw'|'n'|'ne'|'nw'|'nme'|'nmw'} #position\n\t\t */\n\t\tthis.set( 'position', 'se' );\n\n\t\t/**\n\t\t * Collection of the child views in this panel.\n\t\t *\n\t\t * A common child type is the {@link module:ui/list/listview~ListView} and {@link module:ui/toolbar/toolbarview~ToolbarView}.\n\t\t * See {@link module:ui/dropdown/utils~addListToDropdown} and\n\t\t * {@link module:ui/dropdown/utils~addToolbarToDropdown} to learn more about child views of dropdowns.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/viewcollection~ViewCollection}\n\t\t */\n\t\tthis.children = this.createCollection();\n\n\t\tthis.setTemplate( {\n\t\t\ttag: 'div',\n\n\t\t\tattributes: {\n\t\t\t\tclass: [\n\t\t\t\t\t'ck',\n\t\t\t\t\t'ck-reset',\n\t\t\t\t\t'ck-dropdown__panel',\n\t\t\t\t\tbind.to( 'position', value => `ck-dropdown__panel_${ value }` ),\n\t\t\t\t\tbind.if( 'isVisible', 'ck-dropdown__panel-visible' )\n\t\t\t\t]\n\t\t\t},\n\n\t\t\tchildren: this.children,\n\n\t\t\ton: {\n\t\t\t\t// Drag and drop in the panel should not break the selection in the editor.\n\t\t\t\t// https://github.com/ckeditor/ckeditor5-ui/issues/228\n\t\t\t\tselectstart: bind.to( evt => evt.preventDefault() )\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * Focuses the view element or first item in view collection on opening dropdown's panel.\n\t *\n\t * See also {@link module:ui/dropdown/dropdownpanelfocusable~DropdownPanelFocusable}.\n\t */\n\tfocus() {\n\t\tif ( this.children.length ) {\n\t\t\tthis.children.first.focus();\n\t\t}\n\t}\n\n\t/**\n\t * Focuses the view element or last item in view collection on opening dropdown's panel.\n\t *\n\t * See also {@link module:ui/dropdown/dropdownpanelfocusable~DropdownPanelFocusable}.\n\t */\n\tfocusLast() {\n\t\tif ( this.children.length ) {\n\t\t\tconst lastChild = this.children.last;\n\n\t\t\tif ( typeof lastChild.focusLast === 'function' ) {\n\t\t\t\tlastChild.focusLast();\n\t\t\t} else {\n\t\t\t\tlastChild.focus();\n\t\t\t}\n\t\t}\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/dom/position\n */\n\nimport global from './global';\nimport Rect from './rect';\nimport getPositionedAncestor from './getpositionedancestor';\nimport getBorderWidths from './getborderwidths';\nimport { isFunction } from 'lodash-es';\n\n/**\n * Calculates the `position: absolute` coordinates of a given element so it can be positioned with respect to the\n * target in the visually most efficient way, taking various restrictions like viewport or limiter geometry\n * into consideration.\n *\n *\t\t// The element which is to be positioned.\n *\t\tconst element = document.body.querySelector( '#toolbar' );\n *\n *\t\t// A target to which the element is positioned relatively.\n *\t\tconst target = document.body.querySelector( '#container' );\n *\n *\t\t// Finding the optimal coordinates for the positioning.\n *\t\tconst { left, top, name } = getOptimalPosition( {\n *\t\t\telement: element,\n *\t\t\ttarget: target,\n *\n * \t\t\t// The algorithm will chose among these positions to meet the requirements such\n * \t\t\t// as \"limiter\" element or \"fitInViewport\", set below. The positions are considered\n * \t\t\t// in the order of the array.\n *\t\t\tpositions: [\n *\t\t\t\t//\n *\t\t\t \t//\t[ Target ]\n *\t\t\t\t//\t+-----------------+\n *\t\t\t\t//\t|     Element     |\n *\t\t\t\t//\t+-----------------+\n *\t\t\t\t//\n *\t\t\t\ttargetRect => ( {\n *\t\t\t\t\ttop: targetRect.bottom,\n *\t\t\t\t\tleft: targetRect.left,\n *\t\t\t\t\tname: 'mySouthEastPosition'\n *\t\t\t\t} ),\n *\n *\t\t\t\t//\n *\t\t\t\t//\t+-----------------+\n *\t\t\t\t//\t|     Element     |\n *\t\t\t\t//\t+-----------------+\n *\t\t\t\t//\t[ Target ]\n *\t\t\t\t//\n *\t\t\t\t( targetRect, elementRect ) => ( {\n *\t\t\t\t\ttop: targetRect.top - elementRect.height,\n *\t\t\t\t\tleft: targetRect.left,\n *\t\t\t\t\tname: 'myNorthEastPosition'\n *\t\t\t\t} )\n *\t\t\t],\n *\n *\t\t\t// Find a position such guarantees the element remains within visible boundaries of <body>.\n *\t\t\tlimiter: document.body,\n *\n *\t\t\t// Find a position such guarantees the element remains within visible boundaries of the browser viewport.\n *\t\t\tfitInViewport: true\n *\t\t} );\n *\n *\t\t// The best position which fits into document.body and the viewport. May be useful\n *\t\t// to set proper class on the `element`.\n *\t\tconsole.log( name ); // -> \"myNorthEastPosition\"\n *\n *\t\t// Using the absolute coordinates which has been found to position the element\n *\t\t// as in the diagram depicting the \"myNorthEastPosition\" position.\n *\t\telement.style.top = top;\n *\t\telement.style.left = left;\n *\n * @param {module:utils/dom/position~Options} options Positioning options object.\n * @returns {module:utils/dom/position~Position}\n */\nexport function getOptimalPosition( { element, target, positions, limiter, fitInViewport } ) {\n\t// If the {@link module:utils/dom/position~Options#target} is a function, use what it returns.\n\t// https://github.com/ckeditor/ckeditor5-utils/issues/157\n\tif ( isFunction( target ) ) {\n\t\ttarget = target();\n\t}\n\n\t// If the {@link module:utils/dom/position~Options#limiter} is a function, use what it returns.\n\t// https://github.com/ckeditor/ckeditor5-ui/issues/260\n\tif ( isFunction( limiter ) ) {\n\t\tlimiter = limiter();\n\t}\n\n\tconst positionedElementAncestor = getPositionedAncestor( element );\n\tconst elementRect = new Rect( element );\n\tconst targetRect = new Rect( target );\n\n\tlet bestPositionRect;\n\tlet bestPositionName;\n\n\t// If there are no limits, just grab the very first position and be done with that drama.\n\tif ( !limiter && !fitInViewport ) {\n\t\t[ bestPositionName, bestPositionRect ] = getPositionNameAndRect( positions[ 0 ], targetRect, elementRect );\n\t} else {\n\t\tconst limiterRect = limiter && new Rect( limiter ).getVisible();\n\t\tconst viewportRect = fitInViewport && new Rect( global.window );\n\t\tconst bestPosition = getBestPositionNameAndRect( positions, { targetRect, elementRect, limiterRect, viewportRect } );\n\n\t\t// If there's no best position found, i.e. when all intersections have no area because\n\t\t// rects have no width or height, then just use the first available position.\n\t\t[ bestPositionName, bestPositionRect ] = bestPosition || getPositionNameAndRect( positions[ 0 ], targetRect, elementRect );\n\t}\n\n\tlet absoluteRectCoordinates = getAbsoluteRectCoordinates( bestPositionRect );\n\n\tif ( positionedElementAncestor ) {\n\t\tabsoluteRectCoordinates = shiftRectCoordinatesDueToPositionedAncestor( absoluteRectCoordinates, positionedElementAncestor );\n\t}\n\n\treturn {\n\t\tleft: absoluteRectCoordinates.left,\n\t\ttop: absoluteRectCoordinates.top,\n\t\tname: bestPositionName\n\t};\n}\n\n// For given position function, returns a corresponding `Rect` instance.\n//\n// @private\n// @param {Function} position A function returning {@link module:utils/dom/position~Position}.\n// @param {utils/dom/rect~Rect} targetRect A rect of the target.\n// @param {utils/dom/rect~Rect} elementRect A rect of positioned element.\n// @returns {Array|null} An array containing position name and its Rect (or null if position should be ignored).\nfunction getPositionNameAndRect( position, targetRect, elementRect ) {\n\tconst positionData = position( targetRect, elementRect );\n\n\tif ( !positionData ) {\n\t\treturn null;\n\t}\n\n\tconst { left, top, name } = positionData;\n\n\treturn [ name, elementRect.clone().moveTo( left, top ) ];\n}\n\n// For a given array of positioning functions, returns such that provides the best\n// fit of the `elementRect` into the `limiterRect` and `viewportRect`.\n//\n// @private\n//\n// @param {Object} options\n// @param {module:utils/dom/position~Options#positions} positions Functions returning {@link module:utils/dom/position~Position}\n// to be checked, in the order of preference.\n// @param {Object} options\n// @param {utils/dom/rect~Rect} options.targetRect A rect of the {@link module:utils/dom/position~Options#target}.\n// @param {utils/dom/rect~Rect} options.elementRect A rect of positioned {@link module:utils/dom/position~Options#element}.\n// @param {utils/dom/rect~Rect} options.limiterRect A rect of the {@link module:utils/dom/position~Options#limiter}.\n// @param {utils/dom/rect~Rect} options.viewportRect A rect of the viewport.\n//\n// @returns {Array} An array containing the name of the position and it's rect.\nfunction getBestPositionNameAndRect( positions, options ) {\n\tconst { elementRect, viewportRect } = options;\n\n\t// This is when element is fully visible.\n\tconst elementRectArea = elementRect.getArea();\n\n\t// Let's calculate intersection areas for positions. It will end early if best match is found.\n\tconst processedPositions = processPositionsToAreas( positions, options );\n\n\t// First let's check all positions that fully fit in the viewport.\n\tif ( viewportRect ) {\n\t\tconst processedPositionsInViewport = processedPositions.filter( ( { viewportIntersectArea } ) => {\n\t\t\treturn viewportIntersectArea === elementRectArea;\n\t\t} );\n\n\t\t// Try to find best position from those which fit completely in viewport.\n\t\tconst bestPositionData = getBestOfProcessedPositions( processedPositionsInViewport, elementRectArea );\n\n\t\tif ( bestPositionData ) {\n\t\t\treturn bestPositionData;\n\t\t}\n\t}\n\n\t// Either there is no viewportRect or there is no position that fits completely in the viewport.\n\treturn getBestOfProcessedPositions( processedPositions, elementRectArea );\n}\n\n// For a given array of positioning functions, calculates intersection areas for them.\n//\n// Note: If some position fully fits into the `limiterRect`, it will be returned early, without further consideration\n// of other positions.\n//\n// @private\n//\n// @param {module:utils/dom/position~Options#positions} positions Functions returning {@link module:utils/dom/position~Position}\n// to be checked, in the order of preference.\n// @param {Object} options\n// @param {utils/dom/rect~Rect} options.targetRect A rect of the {@link module:utils/dom/position~Options#target}.\n// @param {utils/dom/rect~Rect} options.elementRect A rect of positioned {@link module:utils/dom/position~Options#element}.\n// @param {utils/dom/rect~Rect} options.limiterRect A rect of the {@link module:utils/dom/position~Options#limiter}.\n// @param {utils/dom/rect~Rect} options.viewportRect A rect of the viewport.\n//\n// @returns {Array.<Object>} Array of positions with calculated intersection areas. Each item is an object containing:\n// * {String} positionName Name of position.\n// * {utils/dom/rect~Rect} positionRect Rect of position.\n// * {Number} limiterIntersectArea Area of intersection of the position with limiter part that is in the viewport.\n// * {Number} viewportIntersectArea Area of intersection of the position with viewport.\nfunction processPositionsToAreas( positions, { targetRect, elementRect, limiterRect, viewportRect } ) {\n\tconst processedPositions = [];\n\n\t// This is when element is fully visible.\n\tconst elementRectArea = elementRect.getArea();\n\n\tfor ( const position of positions ) {\n\t\tconst positionData = getPositionNameAndRect( position, targetRect, elementRect );\n\n\t\tif ( !positionData ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tconst [ positionName, positionRect ] = positionData;\n\t\tlet limiterIntersectArea = 0;\n\t\tlet viewportIntersectArea = 0;\n\n\t\tif ( limiterRect ) {\n\t\t\tif ( viewportRect ) {\n\t\t\t\t// Consider only the part of the limiter which is visible in the viewport. So the limiter is getting limited.\n\t\t\t\tconst limiterViewportIntersectRect = limiterRect.getIntersection( viewportRect );\n\n\t\t\t\tif ( limiterViewportIntersectRect ) {\n\t\t\t\t\t// If the limiter is within the viewport, then check the intersection between that part of the\n\t\t\t\t\t// limiter and actual position.\n\t\t\t\t\tlimiterIntersectArea = limiterViewportIntersectRect.getIntersectionArea( positionRect );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tlimiterIntersectArea = limiterRect.getIntersectionArea( positionRect );\n\t\t\t}\n\t\t}\n\n\t\tif ( viewportRect ) {\n\t\t\tviewportIntersectArea = viewportRect.getIntersectionArea( positionRect );\n\t\t}\n\n\t\tconst processedPosition = {\n\t\t\tpositionName,\n\t\t\tpositionRect,\n\t\t\tlimiterIntersectArea,\n\t\t\tviewportIntersectArea\n\t\t};\n\n\t\t// If a such position is found that element is fully contained by the limiter then, obviously,\n\t\t// there will be no better one, so finishing.\n\t\tif ( limiterIntersectArea === elementRectArea ) {\n\t\t\treturn [ processedPosition ];\n\t\t}\n\n\t\tprocessedPositions.push( processedPosition );\n\t}\n\n\treturn processedPositions;\n}\n\n// For a given array of processed position data (with calculated Rects for positions and intersection areas)\n// returns such that provides the best fit of the `elementRect` into the `limiterRect` and `viewportRect` at the same time.\n//\n// **Note**: It will return early if some position fully fits into the `limiterRect`.\n//\n// @private\n// @param {Array.<Object>} Array of positions with calculated intersection areas (in order of preference).\n// Each item is an object containing:\n//\n//\t* {String} positionName Name of position.\n//\t* {utils/dom/rect~Rect} positionRect Rect of position.\n//\t* {Number} limiterIntersectArea Area of intersection of the position with limiter part that is in the viewport.\n//\t* {Number} viewportIntersectArea Area of intersection of the position with viewport.\n//\n// @param {Number} elementRectArea Area of positioned {@link module:utils/dom/position~Options#element}.\n// @returns {Array|null} An array containing the name of the position and it's rect, or null if not found.\nfunction getBestOfProcessedPositions( processedPositions, elementRectArea ) {\n\tlet maxFitFactor = 0;\n\tlet bestPositionRect;\n\tlet bestPositionName;\n\n\tfor ( const { positionName, positionRect, limiterIntersectArea, viewportIntersectArea } of processedPositions ) {\n\t\t// If a such position is found that element is fully container by the limiter then, obviously,\n\t\t// there will be no better one, so finishing.\n\t\tif ( limiterIntersectArea === elementRectArea ) {\n\t\t\treturn [ positionName, positionRect ];\n\t\t}\n\n\t\t// To maximize both viewport and limiter intersection areas we use distance on viewportIntersectArea\n\t\t// and limiterIntersectArea plane (without sqrt because we are looking for max value).\n\t\tconst fitFactor = viewportIntersectArea ** 2 + limiterIntersectArea ** 2;\n\n\t\tif ( fitFactor > maxFitFactor ) {\n\t\t\tmaxFitFactor = fitFactor;\n\t\t\tbestPositionRect = positionRect;\n\t\t\tbestPositionName = positionName;\n\t\t}\n\t}\n\n\treturn bestPositionRect ? [ bestPositionName, bestPositionRect ] : null;\n}\n\n// For a given absolute Rect coordinates object and a positioned element ancestor, it returns an object with\n// new Rect coordinates that make up for the position and the scroll of the ancestor.\n//\n// This is necessary because while Rects (and DOMRects) are relative to the browser's viewport, their coordinates\n// are used in real–life to position elements with `position: absolute`, which are scoped by any positioned\n// (and scrollable) ancestors.\n//\n// @private\n//\n// @param {Object} absoluteRectCoordinates An object with absolute rect coordinates.\n// @param {Object} absoluteRectCoordinates.top\n// @param {Object} absoluteRectCoordinates.left\n// @param {HTMLElement} positionedElementAncestor An ancestor element that should be considered.\n//\n// @returns {Object} An object corresponding to `absoluteRectCoordinates` input but with values shifted\n// to make up for the positioned element ancestor.\nfunction shiftRectCoordinatesDueToPositionedAncestor( { left, top }, positionedElementAncestor ) {\n\tconst ancestorPosition = getAbsoluteRectCoordinates( new Rect( positionedElementAncestor ) );\n\tconst ancestorBorderWidths = getBorderWidths( positionedElementAncestor );\n\n\t// (https://github.com/ckeditor/ckeditor5-ui-default/issues/126)\n\t// If there's some positioned ancestor of the panel, then its `Rect` must be taken into\n\t// consideration. `Rect` is always relative to the viewport while `position: absolute` works\n\t// with respect to that positioned ancestor.\n\tleft -= ancestorPosition.left;\n\ttop -= ancestorPosition.top;\n\n\t// (https://github.com/ckeditor/ckeditor5-utils/issues/139)\n\t// If there's some positioned ancestor of the panel, not only its position must be taken into\n\t// consideration (see above) but also its internal scrolls. Scroll have an impact here because `Rect`\n\t// is relative to the viewport (it doesn't care about scrolling), while `position: absolute`\n\t// must compensate that scrolling.\n\tleft += positionedElementAncestor.scrollLeft;\n\ttop += positionedElementAncestor.scrollTop;\n\n\t// (https://github.com/ckeditor/ckeditor5-utils/issues/139)\n\t// If there's some positioned ancestor of the panel, then its `Rect` includes its CSS `borderWidth`\n\t// while `position: absolute` positioning does not consider it.\n\t// E.g. `{ position: absolute, top: 0, left: 0 }` means upper left corner of the element,\n\t// not upper-left corner of its border.\n\tleft -= ancestorBorderWidths.left;\n\ttop -= ancestorBorderWidths.top;\n\n\treturn { left, top };\n}\n\n// DOMRect (also Rect) works in a scroll–independent geometry but `position: absolute` doesn't.\n// This function converts Rect to `position: absolute` coordinates.\n//\n// @private\n// @param {utils/dom/rect~Rect} rect A rect to be converted.\n// @returns {Object} Object containing `left` and `top` properties, in absolute coordinates.\nfunction getAbsoluteRectCoordinates( { left, top } ) {\n\tconst { scrollX, scrollY } = global.window;\n\n\treturn {\n\t\tleft: left + scrollX,\n\t\ttop: top + scrollY\n\t};\n}\n\n/**\n * The `getOptimalPosition()` helper options.\n *\n * @interface module:utils/dom/position~Options\n */\n\n/**\n * Element that is to be positioned.\n *\n * @member {HTMLElement} #element\n */\n\n/**\n * Target with respect to which the `element` is to be positioned.\n *\n * @member {HTMLElement|Range|ClientRect|Rect|Function} #target\n */\n\n/**\n * An array of functions which return {@link module:utils/dom/position~Position} relative\n * to the `target`, in the order of preference.\n *\n * **Note**: If a function returns `null`, it is ignored by the `getOptimalPosition()`.\n *\n * @member {Array.<Function>} #positions\n */\n\n/**\n * When set, the algorithm will chose position which fits the most in the\n * limiter's bounding rect.\n *\n * @member {HTMLElement|Range|ClientRect|Rect|Function} #limiter\n */\n\n/**\n * When set, the algorithm will chose such a position which fits `element`\n * the most inside visible viewport.\n *\n * @member {Boolean} #fitInViewport\n */\n\n/**\n * An object describing a position in `position: absolute` coordinate\n * system, along with position name.\n *\n * @typedef {Object} module:utils/dom/position~Position\n *\n * @property {Number} top Top position offset.\n * @property {Number} left Left position offset.\n * @property {String} name Name of the position.\n */\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/dropdown/dropdownview\n */\n\nimport View from '../view';\nimport KeystrokeHandler from '@ckeditor/ckeditor5-utils/src/keystrokehandler';\n\nimport '../../theme/components/dropdown/dropdown.css';\n\nimport { getOptimalPosition } from '@ckeditor/ckeditor5-utils/src/dom/position';\n\n/**\n * The dropdown view class. It manages the dropdown button and dropdown panel.\n *\n * In most cases, the easiest way to create a dropdown is by using the {@link module:ui/dropdown/utils~createDropdown}\n * util:\n *\n *\t\tconst dropdown = createDropdown( locale );\n *\n *\t\t// Configure dropdown's button properties:\n *\t\tdropdown.buttonView.set( {\n *\t\t\tlabel: 'A dropdown',\n *\t\t\twithText: true\n *\t\t} );\n *\n *\t\tdropdown.render();\n *\n *\t\tdropdown.panelView.element.textContent = 'Content of the panel';\n *\n *\t\t// Will render a dropdown with a panel containing a \"Content of the panel\" text.\n *\t\tdocument.body.appendChild( dropdown.element );\n *\n * If you want to add a richer content to the dropdown panel, you can use the {@link module:ui/dropdown/utils~addListToDropdown}\n * and {@link module:ui/dropdown/utils~addToolbarToDropdown} helpers. See more examples in\n * {@link module:ui/dropdown/utils~createDropdown} documentation.\n *\n * If you want to create a completely custom dropdown, then you can compose it manually:\n *\n *\t\tconst button = new DropdownButtonView( locale );\n *\t\tconst panel = new DropdownPanelView( locale );\n *\t\tconst dropdown = new DropdownView( locale, button, panel );\n *\n *\t\tbutton.set( {\n *\t\t\tlabel: 'A dropdown',\n *\t\t\twithText: true\n *\t\t} );\n *\n *\t\tdropdown.render();\n *\n *\t\tpanel.element.textContent = 'Content of the panel';\n *\n *\t\t// Will render a dropdown with a panel containing a \"Content of the panel\" text.\n *\t\tdocument.body.appendChild( dropdown.element );\n *\n * However, dropdown created this way will contain little behavior. You will need to implement handlers for actions\n * such as {@link module:ui/bindings/clickoutsidehandler~clickOutsideHandler clicking outside an open dropdown}\n * (which should close it) and support for arrow keys inside the panel. Therefore, unless you really know what\n * you do and you really need to do it, it is recommended to use the {@link module:ui/dropdown/utils~createDropdown} helper.\n *\n * @extends module:ui/view~View\n */\nexport default class DropdownView extends View {\n\t/**\n\t * Creates an instance of the dropdown.\n\t *\n\t * Also see {@link #render}.\n\t *\n\t * @param {module:utils/locale~Locale} [locale] The localization services instance.\n\t * @param {module:ui/dropdown/button/dropdownbutton~DropdownButton} buttonView\n\t * @param {module:ui/dropdown/dropdownpanelview~DropdownPanelView} panelView\n\t */\n\tconstructor( locale, buttonView, panelView ) {\n\t\tsuper( locale );\n\n\t\tconst bind = this.bindTemplate;\n\n\t\t/**\n\t\t * Button of the dropdown view. Clicking the button opens the {@link #panelView}.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/button/buttonview~ButtonView} #buttonView\n\t\t */\n\t\tthis.buttonView = buttonView;\n\n\t\t/**\n\t\t * Panel of the dropdown. It opens when the {@link #buttonView} is\n\t\t * {@link module:ui/button/buttonview~ButtonView#event:execute executed} (i.e. clicked).\n\t\t *\n\t\t * Child views can be added to the panel's `children` collection:\n\t\t *\n\t\t *\t\tdropdown.panelView.children.add( childView );\n\t\t *\n\t\t * See {@link module:ui/dropdown/dropdownpanelview~DropdownPanelView#children} and\n\t\t * {@link module:ui/viewcollection~ViewCollection#add}.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/dropdown/dropdownpanelview~DropdownPanelView} #panelView\n\t\t */\n\t\tthis.panelView = panelView;\n\n\t\t/**\n\t\t * Controls whether the dropdown view is open, i.e. shows or hides the {@link #panelView panel}.\n\t\t *\n\t\t * @observable\n\t\t * @member {Boolean} #isOpen\n\t\t */\n\t\tthis.set( 'isOpen', false );\n\n\t\t/**\n\t\t * Controls whether the dropdown is enabled, i.e. it can be clicked and execute an action.\n\t\t *\n\t\t * See {@link module:ui/button/buttonview~ButtonView#isEnabled}.\n\t\t *\n\t\t * @observable\n\t\t * @member {Boolean} #isEnabled\n\t\t */\n\t\tthis.set( 'isEnabled', true );\n\n\t\t/**\n\t\t * (Optional) The additional CSS class set on the dropdown {@link #element}.\n\t\t *\n\t\t * @observable\n\t\t * @member {String} #class\n\t\t */\n\t\tthis.set( 'class' );\n\n\t\t/**\n\t\t * (Optional) The `id` attribute of the dropdown (i.e. to pair with a `<label>` element).\n\t\t *\n\t\t * @observable\n\t\t * @member {String} #id\n\t\t */\n\t\tthis.set( 'id' );\n\n\t\t/**\n\t\t * The position of the panel, relative to the dropdown.\n\t\t *\n\t\t * **Note**: When `'auto'`, the panel will use one of the remaining positions to stay\n\t\t * in the viewport, visible to the user. The positions correspond directly to\n\t\t * {@link module:ui/dropdown/dropdownview~DropdownView.defaultPanelPositions default panel positions}.\n\t\t *\n\t\t * **Note**: This value has an impact on the\n\t\t * {@link module:ui/dropdown/dropdownpanelview~DropdownPanelView#position} property\n\t\t * each time the panel becomes {@link #isOpen open}.\n\t\t *\n\t\t * @observable\n\t\t * @default 'auto'\n\t\t * @member {'auto'|'s'|'se'|'sw'|'sme'|'smw'|'n'|'ne'|'nw'|'nme'|'nmw'} #panelPosition\n\t\t */\n\t\tthis.set( 'panelPosition', 'auto' );\n\n\t\t/**\n\t\t * Instance of the {@link module:utils/keystrokehandler~KeystrokeHandler}. It manages\n\t\t * keystrokes of the dropdown:\n\t\t *\n\t\t * * <kbd>▼</kbd> opens the dropdown,\n\t\t * * <kbd>◀</kbd> and <kbd>Esc</kbd> closes the dropdown.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:utils/keystrokehandler~KeystrokeHandler}\n\t\t */\n\t\tthis.keystrokes = new KeystrokeHandler();\n\n\t\tthis.setTemplate( {\n\t\t\ttag: 'div',\n\n\t\t\tattributes: {\n\t\t\t\tclass: [\n\t\t\t\t\t'ck',\n\t\t\t\t\t'ck-dropdown',\n\t\t\t\t\tbind.to( 'class' ),\n\t\t\t\t\tbind.if( 'isEnabled', 'ck-disabled', value => !value )\n\t\t\t\t],\n\t\t\t\tid: bind.to( 'id' ),\n\t\t\t\t'aria-describedby': bind.to( 'ariaDescribedById' )\n\t\t\t},\n\n\t\t\tchildren: [\n\t\t\t\tbuttonView,\n\t\t\t\tpanelView\n\t\t\t]\n\t\t} );\n\n\t\tbuttonView.extendTemplate( {\n\t\t\tattributes: {\n\t\t\t\tclass: [\n\t\t\t\t\t'ck-dropdown__button'\n\t\t\t\t]\n\t\t\t}\n\t\t} );\n\n\t\t/**\n\t\t * A child {@link module:ui/list/listview~ListView list view} of the dropdown located\n\t\t * in its {@link module:ui/dropdown/dropdownview~DropdownView#panelView panel}.\n\t\t *\n\t\t * **Note**: Only supported when dropdown has list view added using {@link module:ui/dropdown/utils~addListToDropdown}.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/list/listview~ListView} #listView\n\t\t */\n\n\t\t/**\n\t\t * A child toolbar of the dropdown located in the\n\t\t * {@link module:ui/dropdown/dropdownview~DropdownView#panelView panel}.\n\t\t *\n\t\t * **Note**: Only supported when dropdown has list view added using {@link module:ui/dropdown/utils~addToolbarToDropdown}.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/toolbar/toolbarview~ToolbarView} #toolbarView\n\t\t */\n\n\t\t/**\n\t\t * Fired when the toolbar button or list item is executed.\n\t\t *\n\t\t * For {@link #listView} It fires when a child of some {@link module:ui/list/listitemview~ListItemView}\n\t\t * fired `execute`.\n\t\t *\n\t\t * For {@link #toolbarView} It fires when one of the buttons has been\n\t\t * {@link module:ui/button/buttonview~ButtonView#event:execute executed}.\n\t\t *\n\t\t * **Note**: Only supported when dropdown has list view added using {@link module:ui/dropdown/utils~addListToDropdown}\n\t\t * or {@link module:ui/dropdown/utils~addToolbarToDropdown}.\n\t\t *\n\t\t * @event execute\n\t\t */\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\trender() {\n\t\tsuper.render();\n\n\t\t// Toggle the dropdown when its button has been clicked.\n\t\tthis.listenTo( this.buttonView, 'open', () => {\n\t\t\tthis.isOpen = !this.isOpen;\n\t\t} );\n\n\t\t// Toggle the visibility of the panel when the dropdown becomes open.\n\t\tthis.panelView.bind( 'isVisible' ).to( this, 'isOpen' );\n\n\t\t// Let the dropdown control the position of the panel. The position must\n\t\t// be updated every time the dropdown is open.\n\t\tthis.on( 'change:isOpen', () => {\n\t\t\tif ( !this.isOpen ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// If \"auto\", find the best position of the panel to fit into the viewport.\n\t\t\t// Otherwise, simply assign the static position.\n\t\t\tif ( this.panelPosition === 'auto' ) {\n\t\t\t\tthis.panelView.position = DropdownView._getOptimalPosition( {\n\t\t\t\t\telement: this.panelView.element,\n\t\t\t\t\ttarget: this.buttonView.element,\n\t\t\t\t\tfitInViewport: true,\n\t\t\t\t\tpositions: this._panelPositions\n\t\t\t\t} ).name;\n\t\t\t} else {\n\t\t\t\tthis.panelView.position = this.panelPosition;\n\t\t\t}\n\t\t} );\n\n\t\t// Listen for keystrokes coming from within #element.\n\t\tthis.keystrokes.listenTo( this.element );\n\n\t\tconst closeDropdown = ( data, cancel ) => {\n\t\t\tif ( this.isOpen ) {\n\t\t\t\tthis.buttonView.focus();\n\t\t\t\tthis.isOpen = false;\n\t\t\t\tcancel();\n\t\t\t}\n\t\t};\n\n\t\t// Open the dropdown panel using the arrow down key, just like with return or space.\n\t\tthis.keystrokes.set( 'arrowdown', ( data, cancel ) => {\n\t\t\t// Don't open if the dropdown is disabled or already open.\n\t\t\tif ( this.buttonView.isEnabled && !this.isOpen ) {\n\t\t\t\tthis.isOpen = true;\n\t\t\t\tcancel();\n\t\t\t}\n\t\t} );\n\n\t\t// Block the right arrow key (until nested dropdowns are implemented).\n\t\tthis.keystrokes.set( 'arrowright', ( data, cancel ) => {\n\t\t\tif ( this.isOpen ) {\n\t\t\t\tcancel();\n\t\t\t}\n\t\t} );\n\n\t\t// Close the dropdown using the arrow left/escape key.\n\t\tthis.keystrokes.set( 'arrowleft', closeDropdown );\n\t\tthis.keystrokes.set( 'esc', closeDropdown );\n\t}\n\n\t/**\n\t * Focuses the {@link #buttonView}.\n\t */\n\tfocus() {\n\t\tthis.buttonView.focus();\n\t}\n\n\t/**\n\t * Returns {@link #panelView panel} positions to be used by the\n\t * {@link module:utils/dom/position~getOptimalPosition `getOptimalPosition()`}\n\t * utility considering the direction of the language the UI of the editor is displayed in.\n\t *\n\t * @type {module:utils/dom/position~Options#positions}\n\t * @private\n\t */\n\tget _panelPositions() {\n\t\tconst {\n\t\t\tsouth, north,\n\t\t\tsouthEast, southWest,\n\t\t\tnorthEast, northWest,\n\t\t\tsouthMiddleEast, southMiddleWest,\n\t\t\tnorthMiddleEast, northMiddleWest\n\t\t} = DropdownView.defaultPanelPositions;\n\n\t\tif ( this.locale.uiLanguageDirection !== 'rtl' ) {\n\t\t\treturn [\n\t\t\t\tsouthEast, southWest, southMiddleEast, southMiddleWest, south,\n\t\t\t\tnorthEast, northWest, northMiddleEast, northMiddleWest, north\n\t\t\t];\n\t\t} else {\n\t\t\treturn [\n\t\t\t\tsouthWest, southEast, southMiddleWest, southMiddleEast, south,\n\t\t\t\tnorthWest, northEast, northMiddleWest, northMiddleEast, north\n\t\t\t];\n\t\t}\n\t}\n}\n\n/**\n * A set of positioning functions used by the dropdown view to determine\n * the optimal position (i.e. fitting into the browser viewport) of its\n * {@link module:ui/dropdown/dropdownview~DropdownView#panelView panel} when\n * {@link module:ui/dropdown/dropdownview~DropdownView#panelPosition} is set to 'auto'`.\n *\n * The available positioning functions are as follow:\n *\n * **South**\n *\n * * `south`\n *\n *\t\t\t[ Button ]\n *\t\t+-----------------+\n *\t\t|      Panel      |\n *\t\t+-----------------+\n *\n * * `southEast`\n *\n *\t\t[ Button ]\n *\t\t+-----------------+\n *\t\t|      Panel      |\n *\t\t+-----------------+\n *\n * * `southWest`\n *\n *\t\t         [ Button ]\n *\t\t+-----------------+\n *\t\t|      Panel      |\n *\t\t+-----------------+\n *\n * * `southMiddleEast`\n *\n *\t\t  [ Button ]\n *\t\t+-----------------+\n *\t\t|      Panel      |\n *\t\t+-----------------+\n *\n * * `southMiddleWest`\n *\n *\t\t       [ Button ]\n *\t\t+-----------------+\n *\t\t|      Panel      |\n *\t\t+-----------------+\n *\n * **North**\n *\n * * `north`\n *\n *\t\t+-----------------+\n *\t\t|      Panel      |\n *\t\t+-----------------+\n *\t\t    [ Button ]\n *\n * * `northEast`\n *\n *\t\t+-----------------+\n *\t\t|      Panel      |\n *\t\t+-----------------+\n *\t\t[ Button ]\n *\n * * `northWest`\n *\n *\t\t+-----------------+\n *\t\t|      Panel      |\n *\t\t+-----------------+\n *\t\t         [ Button ]\n *\n * * `northMiddleEast`\n *\n *\t\t+-----------------+\n *\t\t|      Panel      |\n *\t\t+-----------------+\n *\t\t  [ Button ]\n *\n * * `northMiddleWest`\n *\n *\t\t+-----------------+\n *\t\t|      Panel      |\n *\t\t+-----------------+\n *\t\t       [ Button ]\n *\n * Positioning functions are compatible with {@link module:utils/dom/position~Position}.\n *\n * The name that position function returns will be reflected in dropdown panel's class that\n * controls its placement. See {@link module:ui/dropdown/dropdownview~DropdownView#panelPosition}\n * to learn more.\n *\n * @member {Object} module:ui/dropdown/dropdownview~DropdownView.defaultPanelPositions\n */\nDropdownView.defaultPanelPositions = {\n\tsouth: ( buttonRect, panelRect ) => {\n\t\treturn {\n\t\t\ttop: buttonRect.bottom,\n\t\t\tleft: buttonRect.left - ( panelRect.width - buttonRect.width ) / 2,\n\t\t\tname: 's'\n\t\t};\n\t},\n\tsouthEast: buttonRect => {\n\t\treturn {\n\t\t\ttop: buttonRect.bottom,\n\t\t\tleft: buttonRect.left,\n\t\t\tname: 'se'\n\t\t};\n\t},\n\tsouthWest: ( buttonRect, panelRect ) => {\n\t\treturn {\n\t\t\ttop: buttonRect.bottom,\n\t\t\tleft: buttonRect.left - panelRect.width + buttonRect.width,\n\t\t\tname: 'sw'\n\t\t};\n\t},\n\tsouthMiddleEast: ( buttonRect, panelRect ) => {\n\t\treturn {\n\t\t\ttop: buttonRect.bottom,\n\t\t\tleft: buttonRect.left - ( panelRect.width - buttonRect.width ) / 4,\n\t\t\tname: 'sme'\n\t\t};\n\t},\n\tsouthMiddleWest: ( buttonRect, panelRect ) => {\n\t\treturn {\n\t\t\ttop: buttonRect.bottom,\n\t\t\tleft: buttonRect.left - ( panelRect.width - buttonRect.width ) * 3 / 4,\n\t\t\tname: 'smw'\n\t\t};\n\t},\n\tnorth: ( buttonRect, panelRect ) => {\n\t\treturn {\n\t\t\ttop: buttonRect.top - panelRect.height,\n\t\t\tleft: buttonRect.left - ( panelRect.width - buttonRect.width ) / 2,\n\t\t\tname: 'n'\n\t\t};\n\t},\n\tnorthEast: ( buttonRect, panelRect ) => {\n\t\treturn {\n\t\t\ttop: buttonRect.top - panelRect.height,\n\t\t\tleft: buttonRect.left,\n\t\t\tname: 'ne'\n\t\t};\n\t},\n\tnorthWest: ( buttonRect, panelRect ) => {\n\t\treturn {\n\t\t\ttop: buttonRect.top - panelRect.height,\n\t\t\tleft: buttonRect.left - panelRect.width + buttonRect.width,\n\t\t\tname: 'nw'\n\t\t};\n\t},\n\tnorthMiddleEast: ( buttonRect, panelRect ) => {\n\t\treturn {\n\t\t\ttop: buttonRect.top - panelRect.height,\n\t\t\tleft: buttonRect.left - ( panelRect.width - buttonRect.width ) / 4,\n\t\t\tname: 'nme'\n\t\t};\n\t},\n\tnorthMiddleWest: ( buttonRect, panelRect ) => {\n\t\treturn {\n\t\t\ttop: buttonRect.top - panelRect.height,\n\t\t\tleft: buttonRect.left - ( panelRect.width - buttonRect.width ) * 3 / 4,\n\t\t\tname: 'nmw'\n\t\t};\n\t}\n};\n\n/**\n * A function used to calculate the optimal position for the dropdown panel.\n *\n * @protected\n * @member {Function} module:ui/dropdown/dropdownview~DropdownView._getOptimalPosition\n */\nDropdownView._getOptimalPosition = getOptimalPosition;\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/dom/getpositionedancestor\n */\n\nimport global from './global';\n\n/**\n * For a given element, returns the nearest ancestor element which CSS position is not \"static\".\n *\n * @param {HTMLElement} element The native DOM element to be checked.\n * @returns {HTMLElement|null}\n */\nexport default function getPositionedAncestor( element ) {\n\tif ( !element || !element.parentNode ) {\n\t\treturn null;\n\t}\n\n\tif ( element.offsetParent === global.document.body ) {\n\t\treturn null;\n\t}\n\n\treturn element.offsetParent;\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/* global DOMParser */\n\n/**\n * @module ui/icon/iconview\n */\n\nimport View from '../view';\n\nimport '../../theme/components/icon/icon.css';\n\n/**\n * The icon view class.\n *\n * @extends module:ui/view~View\n */\nexport default class IconView extends View {\n\t/**\n\t * @inheritDoc\n\t */\n\tconstructor() {\n\t\tsuper();\n\n\t\tconst bind = this.bindTemplate;\n\n\t\t/**\n\t\t * The SVG source of the icon.\n\t\t *\n\t\t * @observable\n\t\t * @member {String} #content\n\t\t */\n\t\tthis.set( 'content', '' );\n\n\t\t/**\n\t\t * This attribute specifies the boundaries to which the\n\t\t * icon content should stretch.\n\t\t *\n\t\t * @observable\n\t\t * @default '0 0 20 20'\n\t\t * @member {String} #viewBox\n\t\t */\n\t\tthis.set( 'viewBox', '0 0 20 20' );\n\n\t\t/**\n\t\t * The fill color of the child `path.ck-icon__fill`.\n\t\t *\n\t\t * @observable\n\t\t * @default ''\n\t\t * @member {String} #fillColor\n\t\t */\n\t\tthis.set( 'fillColor', '' );\n\n\t\tthis.setTemplate( {\n\t\t\ttag: 'svg',\n\t\t\tns: 'http://www.w3.org/2000/svg',\n\t\t\tattributes: {\n\t\t\t\tclass: [\n\t\t\t\t\t'ck',\n\t\t\t\t\t'ck-icon'\n\t\t\t\t],\n\t\t\t\tviewBox: bind.to( 'viewBox' )\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\trender() {\n\t\tsuper.render();\n\n\t\tthis._updateXMLContent();\n\t\tthis._colorFillPaths();\n\n\t\t// This is a hack for lack of innerHTML binding.\n\t\t// See: https://github.com/ckeditor/ckeditor5-ui/issues/99.\n\t\tthis.on( 'change:content', () => {\n\t\t\tthis._updateXMLContent();\n\t\t\tthis._colorFillPaths();\n\t\t} );\n\n\t\tthis.on( 'change:fillColor', () => {\n\t\t\tthis._colorFillPaths();\n\t\t} );\n\t}\n\n\t/**\n\t * Updates the {@link #element} with the value of {@link #content}.\n\t *\n\t * @private\n\t */\n\t_updateXMLContent() {\n\t\tif ( this.content ) {\n\t\t\tconst parsed = new DOMParser().parseFromString( this.content.trim(), 'image/svg+xml' );\n\t\t\tconst svg = parsed.querySelector( 'svg' );\n\t\t\tconst viewBox = svg.getAttribute( 'viewBox' );\n\n\t\t\tif ( viewBox ) {\n\t\t\t\tthis.viewBox = viewBox;\n\t\t\t}\n\n\t\t\tthis.element.innerHTML = '';\n\n\t\t\twhile ( svg.childNodes.length > 0 ) {\n\t\t\t\tthis.element.appendChild( svg.childNodes[ 0 ] );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Fills all child `path.ck-icon__fill` with the `#fillColor`.\n\t *\n\t * @private\n\t */\n\t_colorFillPaths() {\n\t\tif ( this.fillColor ) {\n\t\t\tthis.element.querySelectorAll( '.ck-icon__fill' ).forEach( path => {\n\t\t\t\tpath.style.fill = this.fillColor;\n\t\t\t} );\n\t\t}\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/tooltip/tooltipview\n */\n\nimport View from '../view';\n\nimport '../../theme/components/tooltip/tooltip.css';\n\n/**\n * The tooltip view class.\n *\n * @extends module:ui/view~View\n */\nexport default class TooltipView extends View {\n\t/**\n\t * @inheritDoc\n\t */\n\tconstructor( locale ) {\n\t\tsuper( locale );\n\n\t\t/**\n\t\t * The text of the tooltip visible to the user.\n\t\t *\n\t\t * @observable\n\t\t * @member {String} #text\n\t\t */\n\t\tthis.set( 'text', '' );\n\n\t\t/**\n\t\t * The position of the tooltip (south, south-west, south-east, or north).\n\t\t *\n\t\t *\t\t+-----------+\n\t\t *\t\t|   north   |\n\t\t *\t\t+-----------+\n\t\t *\t\t      V\n\t\t *\t\t  [element]\n\t\t *\n\t\t *\t\t  [element]\n\t\t *\t\t      ^\n\t\t *\t\t+-----------+\n\t\t *\t\t|   south   |\n\t\t *\t\t+-----------+\n\t\t *\n\t\t *                +----------+\n\t\t *    [element] < |   east   |\n\t\t *                +----------+\n\t\t *\n\t\t *    +----------+\n\t\t *    |   west   | > [element]\n\t\t *    +----------+\n\t\t *\n\t\t *\t\t         [element]\n\t\t *\t\t             ^\n\t\t *\t\t+--------------+\n\t\t *\t\t|  south west  |\n\t\t *\t\t+--------------+\n\t\t *\n\t\t *\t  [element]\n\t\t *\t\t  ^\n\t\t *\t\t+--------------+\n\t\t *\t\t|  south east  |\n\t\t *\t\t+--------------+\n\n\t\t * @observable\n\t\t * @default 's'\n\t\t * @member {'s'|'n'|'e'|'w'|'sw'|'se'} #position\n\t\t */\n\t\tthis.set( 'position', 's' );\n\n\t\tconst bind = this.bindTemplate;\n\n\t\tthis.setTemplate( {\n\t\t\ttag: 'span',\n\t\t\tattributes: {\n\t\t\t\tclass: [\n\t\t\t\t\t'ck',\n\t\t\t\t\t'ck-tooltip',\n\t\t\t\t\tbind.to( 'position', position => 'ck-tooltip_' + position ),\n\t\t\t\t\tbind.if( 'text', 'ck-hidden', value => !value.trim() )\n\t\t\t\t]\n\t\t\t},\n\t\t\tchildren: [\n\t\t\t\t{\n\t\t\t\t\ttag: 'span',\n\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\tclass: [\n\t\t\t\t\t\t\t'ck',\n\t\t\t\t\t\t\t'ck-tooltip__text'\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\n\t\t\t\t\tchildren: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttext: bind.to( 'text' )\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]\n\t\t} );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/button/buttonview\n */\n\nimport View from '../view';\nimport IconView from '../icon/iconview';\nimport TooltipView from '../tooltip/tooltipview';\n\nimport uid from '@ckeditor/ckeditor5-utils/src/uid';\nimport { getEnvKeystrokeText } from '@ckeditor/ckeditor5-utils/src/keyboard';\n\nimport '../../theme/components/button/button.css';\n\n/**\n * The button view class.\n *\n *\t\tconst view = new ButtonView();\n *\n *\t\tview.set( {\n *\t\t\tlabel: 'A button',\n *\t\t\tkeystroke: 'Ctrl+B',\n *\t\t\ttooltip: true,\n *\t\t\twithText: true\n *\t\t} );\n *\n *\t\tview.render();\n *\n *\t\tdocument.body.append( view.element );\n *\n * @extends module:ui/view~View\n * @implements module:ui/button/button~Button\n */\nexport default class ButtonView extends View {\n\t/**\n\t * @inheritDoc\n\t */\n\tconstructor( locale ) {\n\t\tsuper( locale );\n\n\t\tconst bind = this.bindTemplate;\n\t\tconst ariaLabelUid = uid();\n\n\t\t// Implement the Button interface.\n\t\tthis.set( 'class' );\n\t\tthis.set( 'labelStyle' );\n\t\tthis.set( 'icon' );\n\t\tthis.set( 'isEnabled', true );\n\t\tthis.set( 'isOn', false );\n\t\tthis.set( 'isVisible', true );\n\t\tthis.set( 'isToggleable', false );\n\t\tthis.set( 'keystroke' );\n\t\tthis.set( 'label' );\n\t\tthis.set( 'tabindex', -1 );\n\t\tthis.set( 'tooltip' );\n\t\tthis.set( 'tooltipPosition', 's' );\n\t\tthis.set( 'type', 'button' );\n\t\tthis.set( 'withText', false );\n\t\tthis.set( 'withKeystroke', false );\n\n\t\t/**\n\t\t * Collection of the child views inside of the button {@link #element}.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/viewcollection~ViewCollection}\n\t\t */\n\t\tthis.children = this.createCollection();\n\n\t\t/**\n\t\t * Tooltip of the button view. It is configurable using the {@link #tooltip tooltip attribute}.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/tooltip/tooltipview~TooltipView} #tooltipView\n\t\t */\n\t\tthis.tooltipView = this._createTooltipView();\n\n\t\t/**\n\t\t * Label of the button view. It is configurable using the {@link #label label attribute}.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/view~View} #labelView\n\t\t */\n\t\tthis.labelView = this._createLabelView( ariaLabelUid );\n\n\t\t/**\n\t\t * The icon view of the button. Will be added to {@link #children} when the\n\t\t * {@link #icon icon attribute} is defined.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/icon/iconview~IconView} #iconView\n\t\t */\n\t\tthis.iconView = new IconView();\n\n\t\tthis.iconView.extendTemplate( {\n\t\t\tattributes: {\n\t\t\t\tclass: 'ck-button__icon'\n\t\t\t}\n\t\t} );\n\n\t\t/**\n\t\t * A view displaying the keystroke of the button next to the {@link #labelView label}.\n\t\t * Added to {@link #children} when the {@link #withKeystroke `withKeystroke` attribute}\n\t\t * is defined.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/view/view~View} #keystrokeView\n\t\t */\n\t\tthis.keystrokeView = this._createKeystrokeView();\n\n\t\t/**\n\t\t * Tooltip of the button bound to the template.\n\t\t *\n\t\t * @see #tooltip\n\t\t * @see #_getTooltipString\n\t\t * @private\n\t\t * @observable\n\t\t * @member {Boolean} #_tooltipString\n\t\t */\n\t\tthis.bind( '_tooltipString' ).to(\n\t\t\tthis, 'tooltip',\n\t\t\tthis, 'label',\n\t\t\tthis, 'keystroke',\n\t\t\tthis._getTooltipString.bind( this )\n\t\t);\n\n\t\tthis.setTemplate( {\n\t\t\ttag: 'button',\n\n\t\t\tattributes: {\n\t\t\t\tclass: [\n\t\t\t\t\t'ck',\n\t\t\t\t\t'ck-button',\n\t\t\t\t\tbind.to( 'class' ),\n\t\t\t\t\tbind.if( 'isEnabled', 'ck-disabled', value => !value ),\n\t\t\t\t\tbind.if( 'isVisible', 'ck-hidden', value => !value ),\n\t\t\t\t\tbind.to( 'isOn', value => value ? 'ck-on' : 'ck-off' ),\n\t\t\t\t\tbind.if( 'withText', 'ck-button_with-text' ),\n\t\t\t\t\tbind.if( 'withKeystroke', 'ck-button_with-keystroke' )\n\t\t\t\t],\n\t\t\t\ttype: bind.to( 'type', value => value ? value : 'button' ),\n\t\t\t\ttabindex: bind.to( 'tabindex' ),\n\t\t\t\t'aria-labelledby': `ck-editor__aria-label_${ ariaLabelUid }`,\n\t\t\t\t'aria-disabled': bind.if( 'isEnabled', true, value => !value ),\n\t\t\t\t'aria-pressed': bind.to( 'isOn', value => this.isToggleable ? String( value ) : false )\n\t\t\t},\n\n\t\t\tchildren: this.children,\n\n\t\t\ton: {\n\t\t\t\tmousedown: bind.to( evt => {\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t} ),\n\n\t\t\t\tclick: bind.to( evt => {\n\t\t\t\t\t// We can't make the button disabled using the disabled attribute, because it won't be focusable.\n\t\t\t\t\t// Though, shouldn't this condition be moved to the button controller?\n\t\t\t\t\tif ( this.isEnabled ) {\n\t\t\t\t\t\tthis.fire( 'execute' );\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Prevent the default when button is disabled, to block e.g.\n\t\t\t\t\t\t// automatic form submitting. See ckeditor/ckeditor5-link#74.\n\t\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t} )\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\trender() {\n\t\tsuper.render();\n\n\t\tif ( this.icon ) {\n\t\t\tthis.iconView.bind( 'content' ).to( this, 'icon' );\n\t\t\tthis.children.add( this.iconView );\n\t\t}\n\n\t\tthis.children.add( this.tooltipView );\n\t\tthis.children.add( this.labelView );\n\n\t\tif ( this.withKeystroke ) {\n\t\t\tthis.children.add( this.keystrokeView );\n\t\t}\n\t}\n\n\t/**\n\t * Focuses the {@link #element} of the button.\n\t */\n\tfocus() {\n\t\tthis.element.focus();\n\t}\n\n\t/**\n\t * Creates a {@link module:ui/tooltip/tooltipview~TooltipView} instance and binds it with button\n\t * attributes.\n\t *\n\t * @private\n\t * @returns {module:ui/tooltip/tooltipview~TooltipView}\n\t */\n\t_createTooltipView() {\n\t\tconst tooltipView = new TooltipView();\n\n\t\ttooltipView.bind( 'text' ).to( this, '_tooltipString' );\n\t\ttooltipView.bind( 'position' ).to( this, 'tooltipPosition' );\n\n\t\treturn tooltipView;\n\t}\n\n\t/**\n\t * Creates a label view instance and binds it with button attributes.\n\t *\n\t * @private\n\t * @param {String} ariaLabelUid The aria label UID.\n\t * @returns {module:ui/view~View}\n\t */\n\t_createLabelView( ariaLabelUid ) {\n\t\tconst labelView = new View();\n\t\tconst bind = this.bindTemplate;\n\n\t\tlabelView.setTemplate( {\n\t\t\ttag: 'span',\n\n\t\t\tattributes: {\n\t\t\t\tclass: [\n\t\t\t\t\t'ck',\n\t\t\t\t\t'ck-button__label'\n\t\t\t\t],\n\t\t\t\tstyle: bind.to( 'labelStyle' ),\n\t\t\t\tid: `ck-editor__aria-label_${ ariaLabelUid }`\n\t\t\t},\n\n\t\t\tchildren: [\n\t\t\t\t{\n\t\t\t\t\ttext: this.bindTemplate.to( 'label' )\n\t\t\t\t}\n\t\t\t]\n\t\t} );\n\n\t\treturn labelView;\n\t}\n\n\t/**\n\t * Creates a view that displays a keystroke next to a {@link #labelView label }\n\t * and binds it with button attributes.\n\t *\n\t * @private\n\t * @returns {module:ui/view~View}\n\t */\n\t_createKeystrokeView() {\n\t\tconst keystrokeView = new View();\n\n\t\tkeystrokeView.setTemplate( {\n\t\t\ttag: 'span',\n\n\t\t\tattributes: {\n\t\t\t\tclass: [\n\t\t\t\t\t'ck',\n\t\t\t\t\t'ck-button__keystroke'\n\t\t\t\t]\n\t\t\t},\n\n\t\t\tchildren: [\n\t\t\t\t{\n\t\t\t\t\ttext: this.bindTemplate.to( 'keystroke', text => getEnvKeystrokeText( text ) )\n\t\t\t\t}\n\t\t\t]\n\t\t} );\n\n\t\treturn keystrokeView;\n\t}\n\n\t/**\n\t * Gets the text for the {@link #tooltipView} from the combination of\n\t * {@link #tooltip}, {@link #label} and {@link #keystroke} attributes.\n\t *\n\t * @private\n\t * @see #tooltip\n\t * @see #_tooltipString\n\t * @param {Boolean|String|Function} tooltip Button tooltip.\n\t * @param {String} label Button label.\n\t * @param {String} keystroke Button keystroke.\n\t * @returns {String}\n\t */\n\t_getTooltipString( tooltip, label, keystroke ) {\n\t\tif ( tooltip ) {\n\t\t\tif ( typeof tooltip == 'string' ) {\n\t\t\t\treturn tooltip;\n\t\t\t} else {\n\t\t\t\tif ( keystroke ) {\n\t\t\t\t\tkeystroke = getEnvKeystrokeText( keystroke );\n\t\t\t\t}\n\n\t\t\t\tif ( tooltip instanceof Function ) {\n\t\t\t\t\treturn tooltip( label, keystroke );\n\t\t\t\t} else {\n\t\t\t\t\treturn `${ label }${ keystroke ? ` (${ keystroke })` : '' }`;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn '';\n\t}\n}\n","export default __webpack_public_path__ + \"static/media/dropdown-arrow.4f9f842b.svg\";","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/dropdown/button/dropdownbuttonview\n */\n\nimport ButtonView from '../../button/buttonview';\n\nimport dropdownArrowIcon from '../../../theme/icons/dropdown-arrow.svg';\nimport IconView from '../../icon/iconview';\n\n/**\n * The default dropdown button view class.\n *\n *\t\tconst view = new DropdownButtonView();\n *\n *\t\tview.set( {\n *\t\t\tlabel: 'A button',\n *\t\t\tkeystroke: 'Ctrl+B',\n *\t\t\ttooltip: true\n *\t\t} );\n *\n *\t\tview.render();\n *\n *\t\tdocument.body.append( view.element );\n *\n * Also see the {@link module:ui/dropdown/utils~createDropdown `createDropdown()` util}.\n *\n * @implements module:ui/dropdown/button/dropdownbutton~DropdownButton\n * @extends module:ui/button/buttonview~ButtonView\n */\nexport default class DropdownButtonView extends ButtonView {\n\t/**\n\t * @inheritDoc\n\t */\n\tconstructor( locale ) {\n\t\tsuper( locale );\n\n\t\t/**\n\t\t * An icon that displays arrow to indicate a dropdown button.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/icon/iconview~IconView}\n\t\t */\n\t\tthis.arrowView = this._createArrowView();\n\n\t\tthis.extendTemplate( {\n\t\t\tattributes: {\n\t\t\t\t'aria-haspopup': true\n\t\t\t}\n\t\t} );\n\n\t\t// The DropdownButton interface expects the open event upon which will open the dropdown.\n\t\tthis.delegate( 'execute' ).to( this, 'open' );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\trender() {\n\t\tsuper.render();\n\n\t\tthis.children.add( this.arrowView );\n\t}\n\n\t/**\n\t * Creates a {@link module:ui/icon/iconview~IconView} instance as {@link #arrowView}.\n\t *\n\t * @private\n\t * @returns {module:ui/icon/iconview~IconView}\n\t */\n\t_createArrowView() {\n\t\tconst arrowView = new IconView();\n\n\t\tarrowView.content = dropdownArrowIcon;\n\n\t\tarrowView.extendTemplate( {\n\t\t\tattributes: {\n\t\t\t\tclass: 'ck-dropdown__arrow'\n\t\t\t}\n\t\t} );\n\n\t\treturn arrowView;\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/button/switchbuttonview\n */\n\nimport View from '../view';\nimport ButtonView from './buttonview';\n\nimport '../../theme/components/button/switchbutton.css';\n\n/**\n * The switch button view class.\n *\n *\t\tconst view = new SwitchButtonView();\n *\n *\t\tview.set( {\n *\t\t\twithText: true,\n *\t\t\tlabel: 'Switch me!'\n *\t\t} );\n *\n *\t\tview.render();\n *\n *\t\tdocument.body.append( view.element );\n *\n * @extends module:ui/button/buttonview~ButtonView\n */\nexport default class SwitchButtonView extends ButtonView {\n\t/**\n\t * @inheritDoc\n\t */\n\tconstructor( locale ) {\n\t\tsuper( locale );\n\n\t\tthis.isToggleable = true;\n\n\t\t/**\n\t\t * The toggle switch of the button.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/view~View} #toggleSwitchView\n\t\t */\n\t\tthis.toggleSwitchView = this._createToggleView();\n\n\t\tthis.extendTemplate( {\n\t\t\tattributes: {\n\t\t\t\tclass: 'ck-switchbutton'\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\trender() {\n\t\tsuper.render();\n\n\t\tthis.children.add( this.toggleSwitchView );\n\t}\n\n\t/**\n\t * Creates a toggle child view.\n\t *\n\t * @private\n\t * @returns {module:ui/view~View}\n\t */\n\t_createToggleView() {\n\t\tconst toggleSwitchView = new View();\n\n\t\ttoggleSwitchView.setTemplate( {\n\t\t\ttag: 'span',\n\n\t\t\tattributes: {\n\t\t\t\tclass: [\n\t\t\t\t\t'ck',\n\t\t\t\t\t'ck-button__toggle'\n\t\t\t\t]\n\t\t\t},\n\n\t\t\tchildren: [\n\t\t\t\t{\n\t\t\t\t\ttag: 'span',\n\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\tclass: [\n\t\t\t\t\t\t\t'ck',\n\t\t\t\t\t\t\t'ck-button__toggle__inner'\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t} );\n\n\t\treturn toggleSwitchView;\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/dropdown/utils\n */\n\nimport DropdownPanelView from './dropdownpanelview';\nimport DropdownView from './dropdownview';\nimport DropdownButtonView from './button/dropdownbuttonview';\nimport ToolbarView from '../toolbar/toolbarview';\nimport ListView from '../list/listview';\nimport ListItemView from '../list/listitemview';\nimport ListSeparatorView from '../list/listseparatorview';\nimport ButtonView from '../button/buttonview';\nimport SwitchButtonView from '../button/switchbuttonview';\n\nimport clickOutsideHandler from '../bindings/clickoutsidehandler';\n\nimport '../../theme/components/dropdown/toolbardropdown.css';\nimport '../../theme/components/dropdown/listdropdown.css';\n\n/**\n * A helper for creating dropdowns. It creates an instance of a {@link module:ui/dropdown/dropdownview~DropdownView dropdown},\n * with a {@link module:ui/dropdown/button/dropdownbutton~DropdownButton button},\n * {@link module:ui/dropdown/dropdownpanelview~DropdownPanelView panel} and all standard dropdown's behaviors.\n *\n * # Creating dropdowns\n *\n * By default, the default {@link module:ui/dropdown/button/dropdownbuttonview~DropdownButtonView} class is used as\n * definition of the button:\n *\n *\t\tconst dropdown = createDropdown( model );\n *\n *\t\t// Configure dropdown's button properties:\n *\t\tdropdown.buttonView.set( {\n *\t\t\tlabel: 'A dropdown',\n *\t\t\twithText: true\n *\t\t} );\n *\n *\t\tdropdown.render();\n *\n *\t\t// Will render a dropdown labeled \"A dropdown\" with an empty panel.\n *\t\tdocument.body.appendChild( dropdown.element );\n *\n * You can also provide other button views (they need to implement the\n * {@link module:ui/dropdown/button/dropdownbutton~DropdownButton} interface). For instance, you can use\n * {@link module:ui/dropdown/button/splitbuttonview~SplitButtonView} to create a dropdown with a split button.\n *\n *\t\tconst dropdown = createDropdown( model, SplitButtonView );\n *\n *\t\t// Configure dropdown's button properties:\n *\t\tdropdown.buttonView.set( {\n *\t\t\tlabel: 'A dropdown',\n *\t\t\twithText: true\n *\t\t} );\n *\n *\t\tdropdown.buttonView.on( 'execute', () => {\n *\t\t\t// Add the behavior of the \"action part\" of the split button.\n *\t\t\t// Split button consists of the \"action part\" and \"arrow part\".\n *\t\t\t// The arrow opens the dropdown while the action part can have some other behavior.\n * \t\t} );\n *\n *\t\tdropdown.render();\n *\n *\t\t// Will render a dropdown labeled \"A dropdown\" with an empty panel.\n *\t\tdocument.body.appendChild( dropdown.element );\n *\n * # Adding content to the dropdown's panel\n *\n * The content of the panel can be inserted directly into the `dropdown.panelView.element`:\n *\n *\t\tdropdown.panelView.element.textContent = 'Content of the panel';\n *\n * However, most of the time you will want to add there either a {@link module:ui/list/listview~ListView list of options}\n * or a list of buttons (i.e. a {@link module:ui/toolbar/toolbarview~ToolbarView toolbar}).\n * To simplify the task, you can use, respectively, {@link module:ui/dropdown/utils~addListToDropdown} or\n * {@link module:ui/dropdown/utils~addToolbarToDropdown} utils.\n *\n * @param {module:utils/locale~Locale} locale The locale instance.\n * @param {Function} ButtonClass The dropdown button view class. Needs to implement the\n * {@link module:ui/dropdown/button/dropdownbutton~DropdownButton} interface.\n * @returns {module:ui/dropdown/dropdownview~DropdownView} The dropdown view instance.\n */\nexport function createDropdown( locale, ButtonClass = DropdownButtonView ) {\n\tconst buttonView = new ButtonClass( locale );\n\n\tconst panelView = new DropdownPanelView( locale );\n\tconst dropdownView = new DropdownView( locale, buttonView, panelView );\n\n\tbuttonView.bind( 'isEnabled' ).to( dropdownView );\n\n\tif ( buttonView instanceof DropdownButtonView ) {\n\t\tbuttonView.bind( 'isOn' ).to( dropdownView, 'isOpen' );\n\t} else {\n\t\tbuttonView.arrowView.bind( 'isOn' ).to( dropdownView, 'isOpen' );\n\t}\n\n\taddDefaultBehavior( dropdownView );\n\n\treturn dropdownView;\n}\n\n/**\n * Adds an instance of {@link module:ui/toolbar/toolbarview~ToolbarView} to a dropdown.\n *\n *\t\tconst buttons = [];\n *\n *\t\t// Either create a new ButtonView instance or create existing.\n *\t\tbuttons.push( new ButtonView() );\n *\t\tbuttons.push( editor.ui.componentFactory.create( 'someButton' ) );\n *\n *\t\tconst dropdown = createDropdown( locale );\n *\n *\t\taddToolbarToDropdown( dropdown, buttons );\n *\n *\t\tdropdown.toolbarView.isVertical = true;\n *\n *\t\t// Will render a vertical button dropdown labeled \"A button dropdown\"\n *\t\t// with a button group in the panel containing two buttons.\n *\t\tdropdown.render()\n *\t\tdocument.body.appendChild( dropdown.element );\n *\n * See {@link module:ui/dropdown/utils~createDropdown} and {@link module:ui/toolbar/toolbarview~ToolbarView}.\n *\n * @param {module:ui/dropdown/dropdownview~DropdownView} dropdownView A dropdown instance to which `ToolbarView` will be added.\n * @param {Iterable.<module:ui/button/buttonview~ButtonView>} buttons\n */\nexport function addToolbarToDropdown( dropdownView, buttons ) {\n\tconst locale = dropdownView.locale;\n\tconst t = locale.t;\n\tconst toolbarView = dropdownView.toolbarView = new ToolbarView( locale );\n\n\ttoolbarView.set( 'ariaLabel', t( 'Dropdown toolbar' ) );\n\n\tdropdownView.extendTemplate( {\n\t\tattributes: {\n\t\t\tclass: [ 'ck-toolbar-dropdown' ]\n\t\t}\n\t} );\n\n\tbuttons.map( view => toolbarView.items.add( view ) );\n\n\tdropdownView.panelView.children.add( toolbarView );\n\ttoolbarView.items.delegate( 'execute' ).to( dropdownView );\n}\n\n/**\n * Adds an instance of {@link module:ui/list/listview~ListView} to a dropdown.\n *\n *\t\tconst items = new Collection();\n *\n *\t\titems.add( {\n *\t\t\ttype: 'button',\n *\t\t\tmodel: new Model( {\n *\t\t\t\twithText: true,\n *\t\t\t\tlabel: 'First item',\n *\t\t\t\tlabelStyle: 'color: red'\n *\t\t\t} )\n *\t\t} );\n *\n *\t\titems.add( {\n *\t\t\t type: 'button',\n *\t\t\t model: new Model( {\n *\t\t\t\twithText: true,\n *\t\t\t\tlabel: 'Second item',\n *\t\t\t\tlabelStyle: 'color: green',\n *\t\t\t\tclass: 'foo'\n *\t\t\t} )\n *\t\t} );\n *\n *\t\tconst dropdown = createDropdown( locale );\n *\n *\t\taddListToDropdown( dropdown, items );\n *\n *\t\t// Will render a dropdown with a list in the panel containing two items.\n *\t\tdropdown.render()\n *\t\tdocument.body.appendChild( dropdown.element );\n *\n * The `items` collection passed to this methods controls the presence and attributes of respective\n * {@link module:ui/list/listitemview~ListItemView list items}.\n *\n *\n * See {@link module:ui/dropdown/utils~createDropdown} and {@link module:list/list~List}.\n *\n * @param {module:ui/dropdown/dropdownview~DropdownView} dropdownView A dropdown instance to which `ListVIew` will be added.\n * @param {Iterable.<module:ui/dropdown/utils~ListDropdownItemDefinition>} items\n * A collection of the list item definitions to populate the list.\n */\nexport function addListToDropdown( dropdownView, items ) {\n\tconst locale = dropdownView.locale;\n\tconst listView = dropdownView.listView = new ListView( locale );\n\n\tlistView.items.bindTo( items ).using( ( { type, model } ) => {\n\t\tif ( type === 'separator' ) {\n\t\t\treturn new ListSeparatorView( locale );\n\t\t} else if ( type === 'button' || type === 'switchbutton' ) {\n\t\t\tconst listItemView = new ListItemView( locale );\n\t\t\tlet buttonView;\n\n\t\t\tif ( type === 'button' ) {\n\t\t\t\tbuttonView = new ButtonView( locale );\n\t\t\t} else {\n\t\t\t\tbuttonView = new SwitchButtonView( locale );\n\t\t\t}\n\n\t\t\t// Bind all model properties to the button view.\n\t\t\tbuttonView.bind( ...Object.keys( model ) ).to( model );\n\t\t\tbuttonView.delegate( 'execute' ).to( listItemView );\n\n\t\t\tlistItemView.children.add( buttonView );\n\n\t\t\treturn listItemView;\n\t\t}\n\t} );\n\n\tdropdownView.panelView.children.add( listView );\n\n\tlistView.items.delegate( 'execute' ).to( dropdownView );\n}\n\n// Add a set of default behaviors to dropdown view.\n//\n// @param {module:ui/dropdown/dropdownview~DropdownView} dropdownView\nfunction addDefaultBehavior( dropdownView ) {\n\tcloseDropdownOnBlur( dropdownView );\n\tcloseDropdownOnExecute( dropdownView );\n\tfocusDropdownContentsOnArrows( dropdownView );\n}\n\n// Adds a behavior to a dropdownView that closes opened dropdown when user clicks outside the dropdown.\n//\n// @param {module:ui/dropdown/dropdownview~DropdownView} dropdownView\nfunction closeDropdownOnBlur( dropdownView ) {\n\tdropdownView.on( 'render', () => {\n\t\tclickOutsideHandler( {\n\t\t\temitter: dropdownView,\n\t\t\tactivator: () => dropdownView.isOpen,\n\t\t\tcallback: () => {\n\t\t\t\tdropdownView.isOpen = false;\n\t\t\t},\n\t\t\tcontextElements: [ dropdownView.element ]\n\t\t} );\n\t} );\n}\n\n// Adds a behavior to a dropdownView that closes the dropdown view on \"execute\" event.\n//\n// @param {module:ui/dropdown/dropdownview~DropdownView} dropdownView\nfunction closeDropdownOnExecute( dropdownView ) {\n\t// Close the dropdown when one of the list items has been executed.\n\tdropdownView.on( 'execute', evt => {\n\t\t// Toggling a switch button view should not close the dropdown.\n\t\tif ( evt.source instanceof SwitchButtonView ) {\n\t\t\treturn;\n\t\t}\n\n\t\tdropdownView.isOpen = false;\n\t} );\n}\n\n// Adds a behavior to a dropdownView that focuses the dropdown's panel view contents on keystrokes.\n//\n// @param {module:ui/dropdown/dropdownview~DropdownView} dropdownView\nfunction focusDropdownContentsOnArrows( dropdownView ) {\n\t// If the dropdown panel is already open, the arrow down key should focus the first child of the #panelView.\n\tdropdownView.keystrokes.set( 'arrowdown', ( data, cancel ) => {\n\t\tif ( dropdownView.isOpen ) {\n\t\t\tdropdownView.panelView.focus();\n\t\t\tcancel();\n\t\t}\n\t} );\n\n\t// If the dropdown panel is already open, the arrow up key should focus the last child of the #panelView.\n\tdropdownView.keystrokes.set( 'arrowup', ( data, cancel ) => {\n\t\tif ( dropdownView.isOpen ) {\n\t\t\tdropdownView.panelView.focusLast();\n\t\t\tcancel();\n\t\t}\n\t} );\n}\n\n/**\n * A definition of the list item used by the {@link module:ui/dropdown/utils~addListToDropdown}\n * utility.\n *\n * @typedef {Object} module:ui/dropdown/utils~ListDropdownItemDefinition\n *\n * @property {String} type Either `'separator'`, `'button'` or `'switchbutton'`.\n * @property {module:ui/model~Model} [model] Model of the item (when **not** `'separator'`).\n * Its properties fuel the newly created list item (or its children, depending on the `type`).\n */\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/bindings/clickoutsidehandler\n */\n\n/* global document */\n\n/**\n * Handles clicking **outside** of a specified set of elements, then fires an action.\n *\n * **Note**: Actually, the action is executed upon `mousedown`, not `click`. It prevents\n * certain issues when the user keeps holding the mouse button and the UI cannot react\n * properly.\n *\n * @param {Object} options Configuration options.\n * @param {module:utils/dom/emittermixin~Emitter} options.emitter The emitter to which this behavior\n * should be added.\n * @param {Function} options.activator Function returning a `Boolean`, to determine whether the handler is active.\n * @param {Array.<HTMLElement>} options.contextElements HTML elements that determine the scope of the\n * handler. Clicking any of them or their descendants will **not** fire the callback.\n * @param {Function} options.callback An action executed by the handler.\n */\nexport default function clickOutsideHandler( { emitter, activator, callback, contextElements } ) {\n\temitter.listenTo( document, 'mousedown', ( evt, domEvt ) => {\n\t\tif ( !activator() ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Check if `composedPath` is `undefined` in case the browser does not support native shadow DOM.\n\t\t// Can be removed when all supported browsers support native shadow DOM.\n\t\tconst path = typeof domEvt.composedPath == 'function' ? domEvt.composedPath() : [];\n\n\t\tfor ( const contextElement of contextElements ) {\n\t\t\tif ( contextElement.contains( domEvt.target ) || path.includes( contextElement ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tcallback();\n\t} );\n}\n","export default __webpack_public_path__ + \"static/media/three-vertical-dots.2ba6fa66.svg\";","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/toolbar/toolbarview\n */\n\nimport View from '../view';\nimport FocusTracker from '@ckeditor/ckeditor5-utils/src/focustracker';\nimport FocusCycler from '../focuscycler';\nimport KeystrokeHandler from '@ckeditor/ckeditor5-utils/src/keystrokehandler';\nimport ToolbarSeparatorView from './toolbarseparatorview';\nimport ToolbarLineBreakView from './toolbarlinebreakview';\nimport ResizeObserver from '@ckeditor/ckeditor5-utils/src/dom/resizeobserver';\nimport preventDefault from '../bindings/preventdefault.js';\nimport Rect from '@ckeditor/ckeditor5-utils/src/dom/rect';\nimport global from '@ckeditor/ckeditor5-utils/src/dom/global';\nimport { createDropdown, addToolbarToDropdown } from '../dropdown/utils';\nimport { logWarning } from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport verticalDotsIcon from '@ckeditor/ckeditor5-core/theme/icons/three-vertical-dots.svg';\nimport normalizeToolbarConfig from './normalizetoolbarconfig';\n\nimport '../../theme/components/toolbar/toolbar.css';\n\n/**\n * The toolbar view class.\n *\n * @extends module:ui/view~View\n * @implements module:ui/dropdown/dropdownpanelfocusable~DropdownPanelFocusable\n */\nexport default class ToolbarView extends View {\n\t/**\n\t * Creates an instance of the {@link module:ui/toolbar/toolbarview~ToolbarView} class.\n\t *\n\t * Also see {@link #render}.\n\t *\n\t * @param {module:utils/locale~Locale} locale The localization services instance.\n\t * @param {module:ui/toolbar/toolbarview~ToolbarOptions} [options] Configuration options of the toolbar.\n\t */\n\tconstructor( locale, options ) {\n\t\tsuper( locale );\n\n\t\tconst bind = this.bindTemplate;\n\t\tconst t = this.t;\n\n\t\t/**\n\t\t * A reference to the options object passed to the constructor.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/toolbar/toolbarview~ToolbarOptions}\n\t\t */\n\t\tthis.options = options || {};\n\n\t\t/**\n\t\t * Label used by assistive technologies to describe this toolbar element.\n\t\t *\n\t\t * @default 'Editor toolbar'\n\t\t * @member {String} #ariaLabel\n\t\t */\n\t\tthis.set( 'ariaLabel', t( 'Editor toolbar' ) );\n\n\t\t/**\n\t\t * The maximum width of the toolbar element.\n\t\t *\n\t\t * **Note**: When set to a specific value (e.g. `'200px'`), the value will affect the behavior of the\n\t\t * {@link module:ui/toolbar/toolbarview~ToolbarOptions#shouldGroupWhenFull}\n\t\t * option by changing the number of {@link #items} that will be displayed in the toolbar at a time.\n\t\t *\n\t\t * @observable\n\t\t * @default 'auto'\n\t\t * @member {String} #maxWidth\n\t\t */\n\t\tthis.set( 'maxWidth', 'auto' );\n\n\t\t/**\n\t\t * A collection of toolbar items (buttons, dropdowns, etc.).\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/viewcollection~ViewCollection}\n\t\t */\n\t\tthis.items = this.createCollection();\n\n\t\t/**\n\t\t * Tracks information about the DOM focus in the toolbar.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:utils/focustracker~FocusTracker}\n\t\t */\n\t\tthis.focusTracker = new FocusTracker();\n\n\t\t/**\n\t\t * An instance of the {@link module:utils/keystrokehandler~KeystrokeHandler}\n\t\t * to handle keyboard navigation in the toolbar.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:utils/keystrokehandler~KeystrokeHandler}\n\t\t */\n\t\tthis.keystrokes = new KeystrokeHandler();\n\n\t\t/**\n\t\t * An additional CSS class added to the {@link #element}.\n\t\t *\n\t\t * @observable\n\t\t * @member {String} #class\n\t\t */\n\t\tthis.set( 'class' );\n\n\t\t/**\n\t\t * When set true, makes the toolbar look compact with {@link #element}.\n\t\t *\n\t\t * @observable\n\t\t * @default false\n\t\t * @member {String} #isCompact\n\t\t */\n\t\tthis.set( 'isCompact', false );\n\n\t\t/**\n\t\t * A (child) view containing {@link #items toolbar items}.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/toolbar/toolbarview~ItemsView}\n\t\t */\n\t\tthis.itemsView = new ItemsView( locale );\n\n\t\t/**\n\t\t * A top–level collection aggregating building blocks of the toolbar.\n\t\t *\n\t\t *\t┌───────────────── ToolbarView ─────────────────┐\n\t\t *\t| ┌──────────────── #children ────────────────┐ |\n\t\t *\t| |   ┌──────────── #itemsView ───────────┐   | |\n\t\t *\t| |   | [ item1 ] [ item2 ] ... [ itemN ] |   | |\n\t\t *\t| |   └──────────────────────────────────-┘   | |\n\t\t *\t| └───────────────────────────────────────────┘ |\n\t\t *\t└───────────────────────────────────────────────┘\n\t\t *\n\t\t * By default, it contains the {@link #itemsView} but it can be extended with additional\n\t\t * UI elements when necessary.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/viewcollection~ViewCollection}\n\t\t */\n\t\tthis.children = this.createCollection();\n\t\tthis.children.add( this.itemsView );\n\n\t\t/**\n\t\t * A collection of {@link #items} that take part in the focus cycling\n\t\t * (i.e. navigation using the keyboard). Usually, it contains a subset of {@link #items} with\n\t\t * some optional UI elements that also belong to the toolbar and should be focusable\n\t\t * by the user.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/viewcollection~ViewCollection}\n\t\t */\n\t\tthis.focusables = this.createCollection();\n\n\t\t/**\n\t\t * Controls the orientation of toolbar items. Only available when\n\t\t * {@link module:ui/toolbar/toolbarview~ToolbarOptions#shouldGroupWhenFull dynamic items grouping}\n\t\t * is **disabled**.\n\t\t *\n\t\t * @observable\n\t\t * @member {Boolean} #isVertical\n\t\t */\n\n\t\t/**\n\t\t * Helps cycling over {@link #focusables focusable items} in the toolbar.\n\t\t *\n\t\t * @readonly\n\t\t * @protected\n\t\t * @member {module:ui/focuscycler~FocusCycler}\n\t\t */\n\t\tthis._focusCycler = new FocusCycler( {\n\t\t\tfocusables: this.focusables,\n\t\t\tfocusTracker: this.focusTracker,\n\t\t\tkeystrokeHandler: this.keystrokes,\n\t\t\tactions: {\n\t\t\t\t// Navigate toolbar items backwards using the arrow[left,up] keys.\n\t\t\t\tfocusPrevious: [ 'arrowleft', 'arrowup' ],\n\n\t\t\t\t// Navigate toolbar items forwards using the arrow[right,down] keys.\n\t\t\t\tfocusNext: [ 'arrowright', 'arrowdown' ]\n\t\t\t}\n\t\t} );\n\n\t\tconst classes = [\n\t\t\t'ck',\n\t\t\t'ck-toolbar',\n\t\t\tbind.to( 'class' ),\n\t\t\tbind.if( 'isCompact', 'ck-toolbar_compact' )\n\t\t];\n\n\t\tif ( this.options.shouldGroupWhenFull && this.options.isFloating ) {\n\t\t\tclasses.push( 'ck-toolbar_floating' );\n\t\t}\n\n\t\tthis.setTemplate( {\n\t\t\ttag: 'div',\n\t\t\tattributes: {\n\t\t\t\tclass: classes,\n\t\t\t\trole: 'toolbar',\n\t\t\t\t'aria-label': bind.to( 'ariaLabel' ),\n\t\t\t\tstyle: {\n\t\t\t\t\tmaxWidth: bind.to( 'maxWidth' )\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tchildren: this.children,\n\n\t\t\ton: {\n\t\t\t\t// https://github.com/ckeditor/ckeditor5-ui/issues/206\n\t\t\t\tmousedown: preventDefault( this )\n\t\t\t}\n\t\t} );\n\n\t\t/**\n\t\t * An instance of the active toolbar behavior that shapes its look and functionality.\n\t\t *\n\t\t * See {@link module:ui/toolbar/toolbarview~ToolbarBehavior} to learn more.\n\t\t *\n\t\t * @protected\n\t\t * @readonly\n\t\t * @member {module:ui/toolbar/toolbarview~ToolbarBehavior}\n\t\t */\n\t\tthis._behavior = this.options.shouldGroupWhenFull ? new DynamicGrouping( this ) : new StaticLayout( this );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\trender() {\n\t\tsuper.render();\n\n\t\t// Children added before rendering should be known to the #focusTracker.\n\t\tfor ( const item of this.items ) {\n\t\t\tthis.focusTracker.add( item.element );\n\t\t}\n\n\t\tthis.items.on( 'add', ( evt, item ) => {\n\t\t\tthis.focusTracker.add( item.element );\n\t\t} );\n\n\t\tthis.items.on( 'remove', ( evt, item ) => {\n\t\t\tthis.focusTracker.remove( item.element );\n\t\t} );\n\n\t\t// Start listening for the keystrokes coming from #element.\n\t\tthis.keystrokes.listenTo( this.element );\n\n\t\tthis._behavior.render( this );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tdestroy() {\n\t\tthis._behavior.destroy();\n\n\t\treturn super.destroy();\n\t}\n\n\t/**\n\t * Focuses the first focusable in {@link #focusables}.\n\t */\n\tfocus() {\n\t\tthis._focusCycler.focusFirst();\n\t}\n\n\t/**\n\t * Focuses the last focusable in {@link #focusables}.\n\t */\n\tfocusLast() {\n\t\tthis._focusCycler.focusLast();\n\t}\n\n\t/**\n\t * A utility that expands the plain toolbar configuration into\n\t * {@link module:ui/toolbar/toolbarview~ToolbarView#items} using a given component factory.\n\t *\n\t * @param {Array.<String>|Object} itemsOrConfig The toolbar items or the entire toolbar configuration object.\n\t * @param {module:ui/componentfactory~ComponentFactory} factory A factory producing toolbar items.\n\t */\n\tfillFromConfig( itemsOrConfig, factory ) {\n\t\tconst config = normalizeToolbarConfig( itemsOrConfig );\n\n\t\tconst itemsToClean = config.items\n\t\t\t.filter( ( name, idx, items ) => {\n\t\t\t\tif ( name === '|' ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\t// Items listed in `config.removeItems` should not be added to the toolbar.\n\t\t\t\tif ( config.removeItems.indexOf( name ) !== -1 ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tif ( name === '-' ) {\n\t\t\t\t\t// The toolbar line breaks must not be rendered when toolbar grouping is enabled.\n\t\t\t\t\t// (https://github.com/ckeditor/ckeditor5/issues/8582)\n\t\t\t\t\tif ( this.options.shouldGroupWhenFull ) {\n\t\t\t\t\t\t/**\n\t\t\t\t\t\t * The toolbar multiline breaks (`-` items) only work when the automatic button grouping\n\t\t\t\t\t\t * is disabled in the toolbar configuration.\n\t\t\t\t\t\t * To do this, set the `shouldNotGroupWhenFull` option to `true` in the editor configuration:\n\t\t\t\t\t\t *\n\t\t\t\t\t\t *\t\tconst config = {\n\t\t\t\t\t\t *\t\t\ttoolbar: {\n\t\t\t\t\t\t *\t\t\t\titems: [ ... ],\n\t\t\t\t\t\t *\t\t\t\tshouldNotGroupWhenFull: true\n\t\t\t\t\t\t *\t\t\t}\n\t\t\t\t\t\t *\t\t}\n\t\t\t\t\t\t *\n\t\t\t\t\t\t * Learn more about {@link module:core/editor/editorconfig~EditorConfig#toolbar toolbar configuration}.\n\t\t\t\t\t\t *\n\t\t\t\t\t\t * @error toolbarview-line-break-ignored-when-grouping-items\n\t\t\t\t\t\t */\n\t\t\t\t\t\tlogWarning( 'toolbarview-line-break-ignored-when-grouping-items', items );\n\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\t// For the items that cannot be instantiated we are sending warning message. We also filter them out.\n\t\t\t\tif ( !factory.has( name ) ) {\n\t\t\t\t\t/**\n\t\t\t\t\t * There was a problem processing the configuration of the toolbar. The item with the given\n\t\t\t\t\t * name does not exist so it was omitted when rendering the toolbar.\n\t\t\t\t\t *\n\t\t\t\t\t * This warning usually shows up when the {@link module:core/plugin~Plugin} which is supposed\n\t\t\t\t\t * to provide a toolbar item has not been loaded or there is a typo in the configuration.\n\t\t\t\t\t *\n\t\t\t\t\t * Make sure the plugin responsible for this toolbar item is loaded and the toolbar configuration\n\t\t\t\t\t * is correct, e.g. {@link module:basic-styles/bold~Bold} is loaded for the `'bold'` toolbar item.\n\t\t\t\t\t *\n\t\t\t\t\t * You can use the following snippet to retrieve all available toolbar items:\n\t\t\t\t\t *\n\t\t\t\t\t *\t\tArray.from( editor.ui.componentFactory.names() );\n\t\t\t\t\t *\n\t\t\t\t\t * @error toolbarview-item-unavailable\n\t\t\t\t\t * @param {String} name The name of the component.\n\t\t\t\t\t */\n\t\t\t\t\tlogWarning( 'toolbarview-item-unavailable', { name } );\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t} );\n\n\t\tconst itemsToAdd = this._cleanSeparators( itemsToClean )\n\t\t\t// Instantiate toolbar items.\n\t\t\t.map( name => {\n\t\t\t\tif ( name === '|' ) {\n\t\t\t\t\treturn new ToolbarSeparatorView();\n\t\t\t\t} else if ( name === '-' ) {\n\t\t\t\t\treturn new ToolbarLineBreakView();\n\t\t\t\t}\n\n\t\t\t\treturn factory.create( name );\n\t\t\t} );\n\n\t\tthis.items.addMany( itemsToAdd );\n\t}\n\n\t/**\n\t * Remove leading, trailing, and duplicated separators (`-` and `|`).\n\t *\n\t * @private\n\t * @param {Array.<String>} items\n\t */\n\t_cleanSeparators( items ) {\n\t\tconst nonSeparatorPredicate = item => ( item !== '-' && item !== '|' );\n\t\tconst count = items.length;\n\n\t\t// Find an index of the first item that is not a separator.\n\t\tconst firstCommandItem = items.findIndex( nonSeparatorPredicate );\n\n\t\t// Search from the end of the list, then convert found index back to the original direction.\n\t\tconst lastCommandItem = count - items\n\t\t\t.slice()\n\t\t\t.reverse()\n\t\t\t.findIndex( nonSeparatorPredicate );\n\n\t\treturn items\n\t\t\t// Return items without the leading and trailing separators.\n\t\t\t.slice( firstCommandItem, lastCommandItem )\n\t\t\t// Remove duplicated separators.\n\t\t\t.filter( ( name, idx, items ) => {\n\t\t\t\t// Filter only separators.\n\t\t\t\tif ( nonSeparatorPredicate( name ) ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tconst isDuplicated = idx > 0 && items[ idx - 1 ] === name;\n\n\t\t\t\treturn !isDuplicated;\n\t\t\t} );\n\t}\n\n\t/**\n\t * Fired when some toolbar {@link #items} were grouped or ungrouped as a result of some change\n\t * in the toolbar geometry.\n\t *\n\t * **Note**: This event is always fired **once** regardless of the number of items that were be\n\t * grouped or ungrouped at a time.\n\t *\n\t * **Note**: This event is fired only if the items grouping functionality was enabled in\n\t * the first place (see {@link module:ui/toolbar/toolbarview~ToolbarOptions#shouldGroupWhenFull}).\n\t *\n\t * @event groupedItemsUpdate\n\t */\n}\n\n/**\n * An inner block of the {@link module:ui/toolbar/toolbarview~ToolbarView} hosting its\n * {@link module:ui/toolbar/toolbarview~ToolbarView#items}.\n *\n * @private\n * @extends module:ui/view~View\n */\nclass ItemsView extends View {\n\t/**\n\t * @inheritDoc\n\t */\n\tconstructor( locale ) {\n\t\tsuper( locale );\n\n\t\t/**\n\t\t * A collection of items (buttons, dropdowns, etc.).\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/viewcollection~ViewCollection}\n\t\t */\n\t\tthis.children = this.createCollection();\n\n\t\tthis.setTemplate( {\n\t\t\ttag: 'div',\n\t\t\tattributes: {\n\t\t\t\tclass: [\n\t\t\t\t\t'ck',\n\t\t\t\t\t'ck-toolbar__items'\n\t\t\t\t]\n\t\t\t},\n\t\t\tchildren: this.children\n\t\t} );\n\t}\n}\n\n/**\n * A toolbar behavior that makes it static and unresponsive to the changes of the environment.\n * At the same time, it also makes it possible to display a toolbar with a vertical layout\n * using the {@link module:ui/toolbar/toolbarview~ToolbarView#isVertical} property.\n *\n * @private\n * @implements module:ui/toolbar/toolbarview~ToolbarBehavior\n */\nclass StaticLayout {\n\t/**\n\t * Creates an instance of the {@link module:ui/toolbar/toolbarview~StaticLayout} toolbar\n\t * behavior.\n\t *\n\t * @param {module:ui/toolbar/toolbarview~ToolbarView} view An instance of the toolbar that this behavior\n\t * is added to.\n\t */\n\tconstructor( view ) {\n\t\tconst bind = view.bindTemplate;\n\n\t\t// Static toolbar can be vertical when needed.\n\t\tview.set( 'isVertical', false );\n\n\t\t// 1:1 pass–through binding, all ToolbarView#items are visible.\n\t\tview.itemsView.children.bindTo( view.items ).using( item => item );\n\n\t\t// 1:1 pass–through binding, all ToolbarView#items are focusable.\n\t\tview.focusables.bindTo( view.items ).using( item => item );\n\n\t\tview.extendTemplate( {\n\t\t\tattributes: {\n\t\t\t\tclass: [\n\t\t\t\t\t// When vertical, the toolbar has an additional CSS class.\n\t\t\t\t\tbind.if( 'isVertical', 'ck-toolbar_vertical' )\n\t\t\t\t]\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\trender() {}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tdestroy() {}\n}\n\n/**\n * A toolbar behavior that makes the items respond to changes in the geometry.\n *\n * In a nutshell, it groups {@link module:ui/toolbar/toolbarview~ToolbarView#items}\n * that do not fit visually into a single row of the toolbar (due to limited space).\n * Items that do not fit are aggregated in a dropdown displayed at the end of the toolbar.\n *\n *\t┌──────────────────────────────────────── ToolbarView ──────────────────────────────────────────┐\n *\t| ┌─────────────────────────────────────── #children ─────────────────────────────────────────┐ |\n *\t| |   ┌─────── #itemsView ────────┐ ┌──────────────────────┐ ┌── #groupedItemsDropdown ───┐   | |\n *\t| |   |       #ungroupedItems     | | ToolbarSeparatorView | |        #groupedItems       |   | |\n *\t| |   └──────────────────────────-┘ └──────────────────────┘ └────────────────────────────┘   | |\n *\t| |                                  \\---------- only when toolbar items overflow --------/    | |\n *\t| └───────────────────────────────────────────────────────────────────────────────────────────┘ |\n *\t└───────────────────────────────────────────────────────────────────────────────────────────────┘\n *\n * @private\n * @implements module:ui/toolbar/toolbarview~ToolbarBehavior\n */\nclass DynamicGrouping {\n\t/**\n\t * Creates an instance of the {@link module:ui/toolbar/toolbarview~DynamicGrouping} toolbar\n\t * behavior.\n\t *\n\t * @param {module:ui/toolbar/toolbarview~ToolbarView} view An instance of the toolbar that this behavior\n\t * is added to.\n\t */\n\tconstructor( view ) {\n\t\t/**\n\t\t * A toolbar view this behavior belongs to.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/toolbar~ToolbarView}\n\t\t */\n\t\tthis.view = view;\n\n\t\t/**\n\t\t * A collection of toolbar children.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/viewcollection~ViewCollection}\n\t\t */\n\t\tthis.viewChildren = view.children;\n\n\t\t/**\n\t\t * A collection of focusable toolbar elements.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/viewcollection~ViewCollection}\n\t\t */\n\t\tthis.viewFocusables = view.focusables;\n\n\t\t/**\n\t\t * A view containing toolbar items.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/toolbar/toolbarview~ItemsView}\n\t\t */\n\t\tthis.viewItemsView = view.itemsView;\n\n\t\t/**\n\t\t * Toolbar focus tracker.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:utils/focustracker~FocusTracker}\n\t\t */\n\t\tthis.viewFocusTracker = view.focusTracker;\n\n\t\t/**\n\t\t * Toolbar locale.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:utils/locale~Locale}\n\t\t */\n\t\tthis.viewLocale = view.locale;\n\n\t\t/**\n\t\t * Toolbar element.\n\t\t *\n\t\t * @readonly\n\t\t * @member {HTMLElement} #viewElement\n\t\t */\n\n\t\t/**\n\t\t * A subset of toolbar {@link module:ui/toolbar/toolbarview~ToolbarView#items}.\n\t\t * Aggregates items that fit into a single row of the toolbar and were not {@link #groupedItems grouped}\n\t\t * into a {@link #groupedItemsDropdown dropdown}. Items of this collection are displayed in the\n\t\t * {@link module:ui/toolbar/toolbarview~ToolbarView#itemsView}.\n\t\t *\n\t\t * When none of the {@link module:ui/toolbar/toolbarview~ToolbarView#items} were grouped, it\n\t\t * matches the {@link module:ui/toolbar/toolbarview~ToolbarView#items} collection in size and order.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/viewcollection~ViewCollection}\n\t\t */\n\t\tthis.ungroupedItems = view.createCollection();\n\n\t\t/**\n\t\t * A subset of toolbar {@link module:ui/toolbar/toolbarview~ToolbarView#items}.\n\t\t * A collection of the toolbar items that do not fit into a single row of the toolbar.\n\t\t * Grouped items are displayed in a dedicated {@link #groupedItemsDropdown dropdown}.\n\t\t *\n\t\t * When none of the {@link module:ui/toolbar/toolbarview~ToolbarView#items} were grouped,\n\t\t * this collection is empty.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/viewcollection~ViewCollection}\n\t\t */\n\t\tthis.groupedItems = view.createCollection();\n\n\t\t/**\n\t\t * The dropdown that aggregates {@link #groupedItems grouped items} that do not fit into a single\n\t\t * row of the toolbar. It is displayed on demand as the last of\n\t\t * {@link module:ui/toolbar/toolbarview~ToolbarView#children toolbar children} and offers another\n\t\t * (nested) toolbar which displays items that would normally overflow.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/dropdown/dropdownview~DropdownView}\n\t\t */\n\t\tthis.groupedItemsDropdown = this._createGroupedItemsDropdown();\n\n\t\t/**\n\t\t * An instance of the resize observer that helps dynamically determine the geometry of the toolbar\n\t\t * and manage items that do not fit into a single row.\n\t\t *\n\t\t * **Note:** Created in {@link #_enableGroupingOnResize}.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:utils/dom/resizeobserver~ResizeObserver}\n\t\t */\n\t\tthis.resizeObserver = null;\n\n\t\t/**\n\t\t * A cached value of the horizontal padding style used by {@link #_updateGrouping}\n\t\t * to manage the {@link module:ui/toolbar/toolbarview~ToolbarView#items} that do not fit into\n\t\t * a single toolbar line. This value can be reused between updates because it is unlikely that\n\t\t * the padding will change and re–using `Window.getComputedStyle()` is expensive.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Number}\n\t\t */\n\t\tthis.cachedPadding = null;\n\n\t\t/**\n\t\t * A flag indicating that an items grouping update has been queued (e.g. due to the toolbar being visible)\n\t\t * and should be executed immediately the next time the toolbar shows up.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Boolean}\n\t\t */\n\t\tthis.shouldUpdateGroupingOnNextResize = false;\n\n\t\t// Only those items that were not grouped are visible to the user.\n\t\tview.itemsView.children.bindTo( this.ungroupedItems ).using( item => item );\n\n\t\t// Make sure all #items visible in the main space of the toolbar are \"focuscycleable\".\n\t\tthis.ungroupedItems.on( 'add', this._updateFocusCycleableItems.bind( this ) );\n\t\tthis.ungroupedItems.on( 'remove', this._updateFocusCycleableItems.bind( this ) );\n\n\t\t// Make sure the #groupedItemsDropdown is also included in cycling when it appears.\n\t\tview.children.on( 'add', this._updateFocusCycleableItems.bind( this ) );\n\t\tview.children.on( 'remove', this._updateFocusCycleableItems.bind( this ) );\n\n\t\t// ToolbarView#items is dynamic. When an item is added or removed, it should be automatically\n\t\t// represented in either grouped or ungrouped items at the right index.\n\t\t// In other words #items == concat( #ungroupedItems, #groupedItems )\n\t\t// (in length and order).\n\t\tview.items.on( 'change', ( evt, changeData ) => {\n\t\t\tconst index = changeData.index;\n\n\t\t\t// Removing.\n\t\t\tfor ( const removedItem of changeData.removed ) {\n\t\t\t\tif ( index >= this.ungroupedItems.length ) {\n\t\t\t\t\tthis.groupedItems.remove( removedItem );\n\t\t\t\t} else {\n\t\t\t\t\tthis.ungroupedItems.remove( removedItem );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Adding.\n\t\t\tfor ( let currentIndex = index; currentIndex < index + changeData.added.length; currentIndex++ ) {\n\t\t\t\tconst addedItem = changeData.added[ currentIndex - index ];\n\n\t\t\t\tif ( currentIndex > this.ungroupedItems.length ) {\n\t\t\t\t\tthis.groupedItems.add( addedItem, currentIndex - this.ungroupedItems.length );\n\t\t\t\t} else {\n\t\t\t\t\tthis.ungroupedItems.add( addedItem, currentIndex );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// When new ungrouped items join in and land in #ungroupedItems, there's a chance it causes\n\t\t\t// the toolbar to overflow.\n\t\t\t// Consequently if removed from grouped or ungrouped items, there is a chance\n\t\t\t// some new space is available and we could do some ungrouping.\n\t\t\tthis._updateGrouping();\n\t\t} );\n\n\t\tview.extendTemplate( {\n\t\t\tattributes: {\n\t\t\t\tclass: [\n\t\t\t\t\t// To group items dynamically, the toolbar needs a dedicated CSS class.\n\t\t\t\t\t'ck-toolbar_grouping'\n\t\t\t\t]\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * Enables dynamic items grouping based on the dimensions of the toolbar.\n\t *\n\t * @param {module:ui/toolbar/toolbarview~ToolbarView} view An instance of the toolbar that this behavior\n\t * is added to.\n\t */\n\trender( view ) {\n\t\tthis.viewElement = view.element;\n\n\t\tthis._enableGroupingOnResize();\n\t\tthis._enableGroupingOnMaxWidthChange( view );\n\t}\n\n\t/**\n\t * Cleans up the internals used by this behavior.\n\t */\n\tdestroy() {\n\t\t// The dropdown may not be in ToolbarView#children at the moment of toolbar destruction\n\t\t// so let's make sure it's actually destroyed along with the toolbar.\n\t\tthis.groupedItemsDropdown.destroy();\n\n\t\tthis.resizeObserver.destroy();\n\t}\n\n\t/**\n\t * When called, it will check if any of the {@link #ungroupedItems} do not fit into a single row of the toolbar,\n\t * and it will move them to the {@link #groupedItems} when it happens.\n\t *\n\t * At the same time, it will also check if there is enough space in the toolbar for the first of the\n\t * {@link #groupedItems} to be returned back to {@link #ungroupedItems} and still fit into a single row\n\t * without the toolbar wrapping.\n\t *\n\t * @protected\n\t */\n\t_updateGrouping() {\n\t\t// Do no grouping–related geometry analysis when the toolbar is detached from visible DOM,\n\t\t// for instance before #render(), or after render but without a parent or a parent detached\n\t\t// from DOM. DOMRects won't work anyway and there will be tons of warning in the console and\n\t\t// nothing else. This happens, for instance, when the toolbar is detached from DOM and\n\t\t// some logic adds or removes its #items.\n\t\tif ( !this.viewElement.ownerDocument.body.contains( this.viewElement ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Do not update grouping when the element is invisible. Such toolbar has DOMRect filled with zeros\n\t\t// and that would cause all items to be grouped. Instead, queue the grouping so it runs next time\n\t\t// the toolbar is visible (the next ResizeObserver callback execution). This is handy because\n\t\t// the grouping could be caused by increasing the #maxWidth when the toolbar was invisible and the next\n\t\t// time it shows up, some items could actually be ungrouped (https://github.com/ckeditor/ckeditor5/issues/6575).\n\t\tif ( !this.viewElement.offsetParent ) {\n\t\t\tthis.shouldUpdateGroupingOnNextResize = true;\n\n\t\t\treturn;\n\t\t}\n\n\t\t// Remember how many items were initially grouped so at the it is possible to figure out if the number\n\t\t// of grouped items has changed. If the number has changed, geometry of the toolbar has also changed.\n\t\tconst initialGroupedItemsCount = this.groupedItems.length;\n\t\tlet wereItemsGrouped;\n\n\t\t// Group #items as long as some wrap to the next row. This will happen, for instance,\n\t\t// when the toolbar is getting narrow and there is not enough space to display all items in\n\t\t// a single row.\n\t\twhile ( this._areItemsOverflowing ) {\n\t\t\tthis._groupLastItem();\n\n\t\t\twereItemsGrouped = true;\n\t\t}\n\n\t\t// If none were grouped now but there were some items already grouped before,\n\t\t// then, what the hell, maybe let's see if some of them can be ungrouped. This happens when,\n\t\t// for instance, the toolbar is stretching and there's more space in it than before.\n\t\tif ( !wereItemsGrouped && this.groupedItems.length ) {\n\t\t\t// Ungroup items as long as none are overflowing or there are none to ungroup left.\n\t\t\twhile ( this.groupedItems.length && !this._areItemsOverflowing ) {\n\t\t\t\tthis._ungroupFirstItem();\n\t\t\t}\n\n\t\t\t// If the ungrouping ended up with some item wrapping to the next row,\n\t\t\t// put it back to the group toolbar (\"undo the last ungroup\"). We don't know whether\n\t\t\t// an item will wrap or not until we ungroup it (that's a DOM/CSS thing) so this\n\t\t\t// clean–up is vital for the algorithm.\n\t\t\tif ( this._areItemsOverflowing ) {\n\t\t\t\tthis._groupLastItem();\n\t\t\t}\n\t\t}\n\n\t\tif ( this.groupedItems.length !== initialGroupedItemsCount ) {\n\t\t\tthis.view.fire( 'groupedItemsUpdate' );\n\t\t}\n\t}\n\n\t/**\n\t * Returns `true` when {@link module:ui/toolbar/toolbarview~ToolbarView#element} children visually overflow,\n\t * for instance if the toolbar is narrower than its members. Returns `false` otherwise.\n\t *\n\t * @private\n\t * @type {Boolean}\n\t */\n\tget _areItemsOverflowing() {\n\t\t// An empty toolbar cannot overflow.\n\t\tif ( !this.ungroupedItems.length ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst element = this.viewElement;\n\t\tconst uiLanguageDirection = this.viewLocale.uiLanguageDirection;\n\t\tconst lastChildRect = new Rect( element.lastChild );\n\t\tconst toolbarRect = new Rect( element );\n\n\t\tif ( !this.cachedPadding ) {\n\t\t\tconst computedStyle = global.window.getComputedStyle( element );\n\t\t\tconst paddingProperty = uiLanguageDirection === 'ltr' ? 'paddingRight' : 'paddingLeft';\n\n\t\t\t// parseInt() is essential because of quirky floating point numbers logic and DOM.\n\t\t\t// If the padding turned out too big because of that, the grouped items dropdown would\n\t\t\t// always look (from the Rect perspective) like it overflows (while it's not).\n\t\t\tthis.cachedPadding = Number.parseInt( computedStyle[ paddingProperty ] );\n\t\t}\n\n\t\tif ( uiLanguageDirection === 'ltr' ) {\n\t\t\treturn lastChildRect.right > toolbarRect.right - this.cachedPadding;\n\t\t} else {\n\t\t\treturn lastChildRect.left < toolbarRect.left + this.cachedPadding;\n\t\t}\n\t}\n\n\t/**\n\t * Enables the functionality that prevents {@link #ungroupedItems} from overflowing (wrapping to the next row)\n\t * upon resize when there is little space available. Instead, the toolbar items are moved to the\n\t * {@link #groupedItems} collection and displayed in a dropdown at the end of the row (which has its own nested toolbar).\n\t *\n\t * When called, the toolbar will automatically analyze the location of its {@link #ungroupedItems} and \"group\"\n\t * them in the dropdown if necessary. It will also observe the browser window for size changes in\n\t * the future and respond to them by grouping more items or reverting already grouped back, depending\n\t * on the visual space available.\n\t *\n\t * @private\n\t */\n\t_enableGroupingOnResize() {\n\t\tlet previousWidth;\n\n\t\t// TODO: Consider debounce.\n\t\tthis.resizeObserver = new ResizeObserver( this.viewElement, entry => {\n\t\t\tif ( !previousWidth || previousWidth !== entry.contentRect.width || this.shouldUpdateGroupingOnNextResize ) {\n\t\t\t\tthis.shouldUpdateGroupingOnNextResize = false;\n\n\t\t\t\tthis._updateGrouping();\n\n\t\t\t\tpreviousWidth = entry.contentRect.width;\n\t\t\t}\n\t\t} );\n\n\t\tthis._updateGrouping();\n\t}\n\n\t/**\n\t * Enables the grouping functionality, just like {@link #_enableGroupingOnResize} but the difference is that\n\t * it listens to the changes of {@link module:ui/toolbar/toolbarview~ToolbarView#maxWidth} instead.\n\t *\n\t * @private\n\t */\n\t_enableGroupingOnMaxWidthChange( view ) {\n\t\tview.on( 'change:maxWidth', () => {\n\t\t\tthis._updateGrouping();\n\t\t} );\n\t}\n\n\t/**\n\t * When called, it will remove the last item from {@link #ungroupedItems} and move it back\n\t * to the {@link #groupedItems} collection.\n\t *\n\t * The opposite of {@link #_ungroupFirstItem}.\n\t *\n\t * @private\n\t */\n\t_groupLastItem() {\n\t\tif ( !this.groupedItems.length ) {\n\t\t\tthis.viewChildren.add( new ToolbarSeparatorView() );\n\t\t\tthis.viewChildren.add( this.groupedItemsDropdown );\n\t\t\tthis.viewFocusTracker.add( this.groupedItemsDropdown.element );\n\t\t}\n\n\t\tthis.groupedItems.add( this.ungroupedItems.remove( this.ungroupedItems.last ), 0 );\n\t}\n\n\t/**\n\t * Moves the very first item belonging to {@link #groupedItems} back\n\t * to the {@link #ungroupedItems} collection.\n\t *\n\t * The opposite of {@link #_groupLastItem}.\n\t *\n\t * @private\n\t */\n\t_ungroupFirstItem() {\n\t\tthis.ungroupedItems.add( this.groupedItems.remove( this.groupedItems.first ) );\n\n\t\tif ( !this.groupedItems.length ) {\n\t\t\tthis.viewChildren.remove( this.groupedItemsDropdown );\n\t\t\tthis.viewChildren.remove( this.viewChildren.last );\n\t\t\tthis.viewFocusTracker.remove( this.groupedItemsDropdown.element );\n\t\t}\n\t}\n\n\t/**\n\t * Creates the {@link #groupedItemsDropdown} that hosts the members of the {@link #groupedItems}\n\t * collection when there is not enough space in the toolbar to display all items in a single row.\n\t *\n\t * @private\n\t * @returns {module:ui/dropdown/dropdownview~DropdownView}\n\t */\n\t_createGroupedItemsDropdown() {\n\t\tconst locale = this.viewLocale;\n\t\tconst t = locale.t;\n\t\tconst dropdown = createDropdown( locale );\n\n\t\tdropdown.class = 'ck-toolbar__grouped-dropdown';\n\n\t\t// Make sure the dropdown never sticks out to the left/right. It should be under the main toolbar.\n\t\t// (https://github.com/ckeditor/ckeditor5/issues/5608)\n\t\tdropdown.panelPosition = locale.uiLanguageDirection === 'ltr' ? 'sw' : 'se';\n\n\t\taddToolbarToDropdown( dropdown, [] );\n\n\t\tdropdown.buttonView.set( {\n\t\t\tlabel: t( 'Show more items' ),\n\t\t\ttooltip: true,\n\t\t\ttooltipPosition: locale.uiLanguageDirection === 'rtl' ? 'se' : 'sw',\n\t\t\ticon: verticalDotsIcon\n\t\t} );\n\n\t\t// 1:1 pass–through binding.\n\t\tdropdown.toolbarView.items.bindTo( this.groupedItems ).using( item => item );\n\n\t\treturn dropdown;\n\t}\n\n\t/**\n\t * Updates the {@link module:ui/toolbar/toolbarview~ToolbarView#focusables focus–cycleable items}\n\t * collection so it represents the up–to–date state of the UI from the perspective of the user.\n\t *\n\t * For instance, the {@link #groupedItemsDropdown} can show up and hide but when it is visible,\n\t * it must be subject to focus cycling in the toolbar.\n\t *\n\t * See the {@link module:ui/toolbar/toolbarview~ToolbarView#focusables collection} documentation\n\t * to learn more about the purpose of this method.\n\t *\n\t * @private\n\t */\n\t_updateFocusCycleableItems() {\n\t\tthis.viewFocusables.clear();\n\n\t\tthis.ungroupedItems.map( item => {\n\t\t\tthis.viewFocusables.add( item );\n\t\t} );\n\n\t\tif ( this.groupedItems.length ) {\n\t\t\tthis.viewFocusables.add( this.groupedItemsDropdown );\n\t\t}\n\t}\n}\n\n/**\n * Options passed to the {@link module:ui/toolbar/toolbarview~ToolbarView#constructor} of the toolbar.\n *\n * @interface module:ui/toolbar/toolbarview~ToolbarOptions\n */\n\n/**\n * When set to `true`, the toolbar will automatically group {@link module:ui/toolbar/toolbarview~ToolbarView#items} that\n * would normally wrap to the next line when there is not enough space to display them in a single row, for\n * instance, if the parent container of the toolbar is narrow. For toolbars in absolutely positioned containers\n * without width restrictions also the {@link module:ui/toolbar/toolbarview~ToolbarOptions#isFloating} option is required to be `true`.\n *\n * See also: {@link module:ui/toolbar/toolbarview~ToolbarView#maxWidth}.\n *\n * @member {Boolean} module:ui/toolbar/toolbarview~ToolbarOptions#shouldGroupWhenFull\n */\n\n/**\n * This option should be enabled for toolbars in absolutely positioned containers without width restrictions\n * to enable automatic {@link module:ui/toolbar/toolbarview~ToolbarView#items} grouping.\n * When this option is set to `true`, the items will stop wrapping to the next line\n * and together with {@link module:ui/toolbar/toolbarview~ToolbarOptions#shouldGroupWhenFull},\n * this will allow grouping them when there is not enough space in a single row.\n *\n * @member {Boolean} module:ui/toolbar/toolbarview~ToolbarOptions#isFloating\n */\n\n/**\n * A class interface defining the behavior of the {@link module:ui/toolbar/toolbarview~ToolbarView}.\n *\n * Toolbar behaviors extend its look and functionality and have an impact on the\n * {@link module:ui/toolbar/toolbarview~ToolbarView#element} template or\n * {@link module:ui/toolbar/toolbarview~ToolbarView#render rendering}. They can be enabled\n * conditionally, e.g. depending on the configuration of the toolbar.\n *\n * @private\n * @interface module:ui/toolbar/toolbarview~ToolbarBehavior\n */\n\n/**\n * Creates a new toolbar behavior instance.\n *\n * The instance is created in the {@link module:ui/toolbar/toolbarview~ToolbarView#constructor} of the toolbar.\n * This is the right place to extend the {@link module:ui/toolbar/toolbarview~ToolbarView#template} of\n * the toolbar, define extra toolbar properties, etc.\n *\n * @method #constructor\n * @param {module:ui/toolbar/toolbarview~ToolbarView} view An instance of the toolbar that this behavior is added to.\n */\n\n/**\n * A method called after the toolbar has been {@link module:ui/toolbar/toolbarview~ToolbarView#render rendered}.\n * It can be used to, for example, customize the behavior of the toolbar when its {@link module:ui/toolbar/toolbarview~ToolbarView#element}\n * is available.\n *\n * @readonly\n * @member {Function} #render\n * @param {module:ui/toolbar/toolbarview~ToolbarView} view An instance of the toolbar being rendered.\n */\n\n/**\n * A method called after the toolbar has been {@link module:ui/toolbar/toolbarview~ToolbarView#destroy destroyed}.\n * It allows cleaning up after the toolbar behavior, for instance, this is the right place to detach\n * event listeners, free up references, etc.\n *\n * @readonly\n * @member {Function} #destroy\n */\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/bindings/preventdefault\n */\n\n/**\n * A helper which executes a native `Event.preventDefault()` if the target of an event equals the\n * {@link module:ui/view~View#element element of the view}. It shortens the definition of a\n * {@link module:ui/view~View#template template}.\n *\n *\t\t// In a class extending View.\n *\t\timport preventDefault from '@ckeditor/ckeditor5-ui/src/bindings/preventdefault';\n *\n *\t\t// ...\n *\n *\t\tthis.setTemplate( {\n *\t\t\ttag: 'div',\n *\n *\t\t\ton: {\n *\t\t\t\t// Prevent the default mousedown action on this view.\n *\t\t\t\tmousedown: preventDefault( this )\n *\t\t\t}\n *\t\t} );\n *\n * @param {module:ui/view~View} view View instance that defines the template.\n * @returns {module:ui/template~TemplateToBinding}\n */\nexport default function preventDefault( view ) {\n\treturn view.bindTemplate.to( evt => {\n\t\tif ( evt.target === view.element ) {\n\t\t\tevt.preventDefault();\n\t\t}\n\t} );\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module editor-classic/classiceditoruiview\n */\n\nimport BoxedEditorUIView from '@ckeditor/ckeditor5-ui/src/editorui/boxed/boxededitoruiview';\nimport InlineEditableUIView from '@ckeditor/ckeditor5-ui/src/editableui/inline/inlineeditableuiview';\nimport StickyPanelView from '@ckeditor/ckeditor5-ui/src/panel/sticky/stickypanelview';\nimport ToolbarView from '@ckeditor/ckeditor5-ui/src/toolbar/toolbarview';\n\nimport '../theme/classiceditor.css';\n\n/**\n * Classic editor UI view. Uses an inline editable and a sticky toolbar, all\n * enclosed in a boxed UI view.\n *\n * @extends module:ui/editorui/boxed/boxededitoruiview~BoxedEditorUIView\n */\nexport default class ClassicEditorUIView extends BoxedEditorUIView {\n\t/**\n\t * Creates an instance of the classic editor UI view.\n\t *\n\t * @param {module:utils/locale~Locale} locale The {@link module:core/editor/editor~Editor#locale} instance.\n\t * @param {module:engine/view/view~View} editingView The editing view instance this view is related to.\n\t * @param {Object} [options={}] Configuration options fo the view instance.\n\t * @param {Boolean} [options.shouldToolbarGroupWhenFull] When set `true` enables automatic items grouping\n\t * in the main {@link module:editor-classic/classiceditoruiview~ClassicEditorUIView#toolbar toolbar}.\n\t * See {@link module:ui/toolbar/toolbarview~ToolbarOptions#shouldGroupWhenFull} to learn more.\n\t */\n\tconstructor( locale, editingView, options = {} ) {\n\t\tsuper( locale );\n\n\t\t/**\n\t\t * Sticky panel view instance. This is a parent view of a {@link #toolbar}\n\t\t * that makes toolbar sticky.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/panel/sticky/stickypanelview~StickyPanelView}\n\t\t */\n\t\tthis.stickyPanel = new StickyPanelView( locale );\n\n\t\t/**\n\t\t * Toolbar view instance.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/toolbar/toolbarview~ToolbarView}\n\t\t */\n\t\tthis.toolbar = new ToolbarView( locale, {\n\t\t\tshouldGroupWhenFull: options.shouldToolbarGroupWhenFull\n\t\t} );\n\n\t\t/**\n\t\t * Editable UI view.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/editableui/inline/inlineeditableuiview~InlineEditableUIView}\n\t\t */\n\t\tthis.editable = new InlineEditableUIView( locale, editingView );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\trender() {\n\t\tsuper.render();\n\n\t\t// Set toolbar as a child of a stickyPanel and makes toolbar sticky.\n\t\tthis.stickyPanel.content.add( this.toolbar );\n\n\t\tthis.top.add( this.stickyPanel );\n\t\tthis.main.add( this.editable );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module editor-classic/classiceditor\n */\n\nimport Editor from '@ckeditor/ckeditor5-core/src/editor/editor';\nimport DataApiMixin from '@ckeditor/ckeditor5-core/src/editor/utils/dataapimixin';\nimport ElementApiMixin from '@ckeditor/ckeditor5-core/src/editor/utils/elementapimixin';\nimport attachToForm from '@ckeditor/ckeditor5-core/src/editor/utils/attachtoform';\nimport ClassicEditorUI from './classiceditorui';\nimport ClassicEditorUIView from './classiceditoruiview';\nimport getDataFromElement from '@ckeditor/ckeditor5-utils/src/dom/getdatafromelement';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\nimport { isElement } from 'lodash-es';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n\n/**\n * The {@glink builds/guides/overview#classic-editor classic editor} implementation.\n * It uses an inline editable and a sticky toolbar, all enclosed in a boxed UI.\n * See the {@glink examples/builds/classic-editor demo}.\n *\n * In order to create a classic editor instance, use the static\n * {@link module:editor-classic/classiceditor~ClassicEditor.create `ClassicEditor.create()`} method.\n *\n * # Classic editor and classic build\n *\n * The classic editor can be used directly from source (if you installed the\n * [`@ckeditor/ckeditor5-editor-classic`](https://www.npmjs.com/package/@ckeditor/ckeditor5-editor-classic) package)\n * but it is also available in the {@glink builds/guides/overview#classic-editor classic build}.\n *\n * {@glink builds/guides/overview Builds} are ready-to-use editors with plugins bundled in. When using the editor from\n * source you need to take care of loading all plugins by yourself\n * (through the {@link module:core/editor/editorconfig~EditorConfig#plugins `config.plugins`} option).\n * Using the editor from source gives much better flexibility and allows easier customization.\n *\n * Read more about initializing the editor from source or as a build in\n * {@link module:editor-classic/classiceditor~ClassicEditor.create `ClassicEditor.create()`}.\n *\n * @mixes module:core/editor/utils/dataapimixin~DataApiMixin\n * @mixes module:core/editor/utils/elementapimixin~ElementApiMixin\n * @implements module:core/editor/editorwithui~EditorWithUI\n * @extends module:core/editor/editor~Editor\n */\nexport default class ClassicEditor extends Editor {\n\t/**\n\t * Creates an instance of the classic editor.\n\t *\n\t * **Note:** do not use the constructor to create editor instances. Use the static\n\t * {@link module:editor-classic/classiceditor~ClassicEditor.create `ClassicEditor.create()`} method instead.\n\t *\n\t * @protected\n\t * @param {HTMLElement|String} sourceElementOrData The DOM element that will be the source for the created editor\n\t * or the editor's initial data. For more information see\n\t * {@link module:editor-classic/classiceditor~ClassicEditor.create `ClassicEditor.create()`}.\n\t * @param {module:core/editor/editorconfig~EditorConfig} config The editor configuration.\n\t */\n\tconstructor( sourceElementOrData, config ) {\n\t\tsuper( config );\n\n\t\tif ( isElement( sourceElementOrData ) ) {\n\t\t\tthis.sourceElement = sourceElementOrData;\n\t\t}\n\n\t\tthis.model.document.createRoot();\n\n\t\tconst shouldToolbarGroupWhenFull = !this.config.get( 'toolbar.shouldNotGroupWhenFull' );\n\t\tconst view = new ClassicEditorUIView( this.locale, this.editing.view, {\n\t\t\tshouldToolbarGroupWhenFull\n\t\t} );\n\n\t\tthis.ui = new ClassicEditorUI( this, view );\n\n\t\tattachToForm( this );\n\t}\n\n\t/**\n\t * Destroys the editor instance, releasing all resources used by it.\n\t *\n\t * Updates the editor's source element with the data.\n\t *\n\t * @returns {Promise}\n\t */\n\tdestroy() {\n\t\tif ( this.sourceElement ) {\n\t\t\tthis.updateSourceElement();\n\t\t}\n\n\t\tthis.ui.destroy();\n\n\t\treturn super.destroy();\n\t}\n\n\t/**\n\t * Creates a new classic editor instance.\n\t *\n\t * There are three ways how the editor can be initialized.\n\t *\n\t * # Replacing a DOM element (and loading data from it)\n\t *\n\t * You can initialize the editor using an existing DOM element:\n\t *\n\t *\t\tClassicEditor\n\t *\t\t\t.create( document.querySelector( '#editor' ) )\n\t *\t\t\t.then( editor => {\n\t *\t\t\t\tconsole.log( 'Editor was initialized', editor );\n\t *\t\t\t} )\n\t *\t\t\t.catch( err => {\n\t *\t\t\t\tconsole.error( err.stack );\n\t *\t\t\t} );\n\t *\n\t * The element's content will be used as the editor data and the element will be replaced by the editor UI.\n\t *\n\t * # Creating a detached editor\n\t *\n\t * Alternatively, you can initialize the editor by passing the initial data directly as a string.\n\t * In this case, the editor will render an element that must be inserted into the DOM:\n\t *\n\t *\t\tClassicEditor\n\t *\t\t\t.create( '<p>Hello world!</p>' )\n\t *\t\t\t.then( editor => {\n\t *\t\t\t\tconsole.log( 'Editor was initialized', editor );\n\t *\n\t *\t\t\t\t// Initial data was provided so the editor UI element needs to be added manually to the DOM.\n\t *\t\t\t\tdocument.body.appendChild( editor.ui.element );\n\t *\t\t\t} )\n\t *\t\t\t.catch( err => {\n\t *\t\t\t\tconsole.error( err.stack );\n\t *\t\t\t} );\n\t *\n\t * This lets you dynamically append the editor to your web page whenever it is convenient for you. You may use this method if your\n\t * web page content is generated on the client side and the DOM structure is not ready at the moment when you initialize the editor.\n\t *\n\t * # Replacing a DOM element (and data provided in `config.initialData`)\n\t *\n\t * You can also mix these two ways by providing a DOM element to be used and passing the initial data through the configuration:\n\t *\n\t *\t\tClassicEditor\n\t *\t\t\t.create( document.querySelector( '#editor' ), {\n\t *\t\t\t\tinitialData: '<h2>Initial data</h2><p>Foo bar.</p>'\n\t *\t\t\t} )\n\t *\t\t\t.then( editor => {\n\t *\t\t\t\tconsole.log( 'Editor was initialized', editor );\n\t *\t\t\t} )\n\t *\t\t\t.catch( err => {\n\t *\t\t\t\tconsole.error( err.stack );\n\t *\t\t\t} );\n\t *\n\t * This method can be used to initialize the editor on an existing element with the specified content in case if your integration\n\t * makes it difficult to set the content of the source element.\n\t *\n\t * Note that an error will be thrown if you pass the initial data both as the first parameter and also in the configuration.\n\t *\n\t * # Configuring the editor\n\t *\n\t * See the {@link module:core/editor/editorconfig~EditorConfig editor configuration documentation} to learn more about\n\t * customizing plugins, toolbar and more.\n\t *\n\t * # Using the editor from source\n\t *\n\t * The code samples listed in the previous sections of this documentation assume that you are using an\n\t * {@glink builds/guides/overview editor build} (for example – `@ckeditor/ckeditor5-build-classic`).\n\t *\n\t * If you want to use the classic editor from source (`@ckeditor/ckeditor5-editor-classic/src/classiceditor`),\n\t * you need to define the list of\n\t * {@link module:core/editor/editorconfig~EditorConfig#plugins plugins to be initialized} and\n\t * {@link module:core/editor/editorconfig~EditorConfig#toolbar toolbar items}. Read more about using the editor from\n\t * source in the {@glink builds/guides/integration/advanced-setup \"Advanced setup\" guide}.\n\t *\n\t * @param {HTMLElement|String} sourceElementOrData The DOM element that will be the source for the created editor\n\t * or the editor's initial data.\n\t *\n\t * If a DOM element is passed, its content will be automatically loaded to the editor upon initialization\n\t * and the {@link module:editor-classic/classiceditorui~ClassicEditorUI#element editor element} will replace the passed element\n\t * in the DOM (the original one will be hidden and the editor will be injected next to it).\n\t *\n\t * Moreover, the editor data will be set back to the original element once the editor is destroyed and when a form, in which\n\t * this element is contained, is submitted (if the original element is a `<textarea>`). This ensures seamless integration with native\n\t * web forms.\n\t *\n\t * If the initial data is passed, a detached editor will be created. In this case you need to insert it into the DOM manually.\n\t * It is available under the {@link module:editor-classic/classiceditorui~ClassicEditorUI#element `editor.ui.element`} property.\n\t *\n\t * @param {module:core/editor/editorconfig~EditorConfig} [config] The editor configuration.\n\t * @returns {Promise} A promise resolved once the editor is ready. The promise resolves with the created editor instance.\n\t */\n\tstatic create( sourceElementOrData, config = {} ) {\n\t\treturn new Promise( resolve => {\n\t\t\tconst editor = new this( sourceElementOrData, config );\n\n\t\t\tresolve(\n\t\t\t\teditor.initPlugins()\n\t\t\t\t\t.then( () => editor.ui.init( isElement( sourceElementOrData ) ? sourceElementOrData : null ) )\n\t\t\t\t\t.then( () => {\n\t\t\t\t\t\tif ( !isElement( sourceElementOrData ) && config.initialData ) {\n\t\t\t\t\t\t\t// Documented in core/editor/editorconfig.jdoc.\n\t\t\t\t\t\t\t// eslint-disable-next-line ckeditor5-rules/ckeditor-error-message\n\t\t\t\t\t\t\tthrow new CKEditorError( 'editor-create-initial-data', null );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst initialData = config.initialData || getInitialData( sourceElementOrData );\n\n\t\t\t\t\t\treturn editor.data.init( initialData );\n\t\t\t\t\t} )\n\t\t\t\t\t.then( () => editor.fire( 'ready' ) )\n\t\t\t\t\t.then( () => editor )\n\t\t\t);\n\t\t} );\n\t}\n}\n\nmix( ClassicEditor, DataApiMixin );\nmix( ClassicEditor, ElementApiMixin );\n\nfunction getInitialData( sourceElementOrData ) {\n\treturn isElement( sourceElementOrData ) ? getDataFromElement( sourceElementOrData ) : sourceElementOrData;\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\nimport { isFunction } from 'lodash-es';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n\n/**\n * @module core/editor/utils/attachtoform\n */\n\n/**\n * Checks if the editor is initialized on a `<textarea>` element that belongs to a form. If yes, it updates the editor's element\n * content before submitting the form.\n *\n * This helper requires the {@link module:core/editor/utils/elementapimixin~ElementApi ElementApi interface}.\n *\n * @param {module:core/editor/editor~Editor} editor Editor instance.\n */\nexport default function attachToForm( editor ) {\n\tif ( !isFunction( editor.updateSourceElement ) ) {\n\t\t/**\n\t\t * The editor passed to `attachToForm()` must implement the\n\t\t * {@link module:core/editor/utils/elementapimixin~ElementApi} interface.\n\t\t *\n\t\t * @error attachtoform-missing-elementapi-interface\n\t\t */\n\t\tthrow new CKEditorError(\n\t\t\t'attachtoform-missing-elementapi-interface',\n\t\t\teditor\n\t\t);\n\t}\n\n\tconst sourceElement = editor.sourceElement;\n\n\t// Only when replacing a textarea which is inside of a form element.\n\tif ( sourceElement && sourceElement.tagName.toLowerCase() === 'textarea' && sourceElement.form ) {\n\t\tlet originalSubmit;\n\t\tconst form = sourceElement.form;\n\t\tconst onSubmit = () => editor.updateSourceElement();\n\n\t\t// Replace the original form#submit() to call a custom submit function first.\n\t\t// Check if #submit is a function because the form might have an input named \"submit\".\n\t\tif ( isFunction( form.submit ) ) {\n\t\t\toriginalSubmit = form.submit;\n\n\t\t\tform.submit = () => {\n\t\t\t\tonSubmit();\n\t\t\t\toriginalSubmit.apply( form );\n\t\t\t};\n\t\t}\n\n\t\t// Update the replaced textarea with data before each form#submit event.\n\t\tform.addEventListener( 'submit', onSubmit );\n\n\t\t// Remove the submit listener and revert the original submit method on\n\t\t// editor#destroy.\n\t\teditor.on( 'destroy', () => {\n\t\t\tform.removeEventListener( 'submit', onSubmit );\n\n\t\t\tif ( originalSubmit ) {\n\t\t\t\tform.submit = originalSubmit;\n\t\t\t}\n\t\t} );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/* globals HTMLTextAreaElement */\n\n/**\n * @module utils/dom/getdatafromelement\n */\n\n/**\n * Gets data from a given source element.\n *\n * @param {HTMLElement} el The element from which the data will be retrieved.\n * @returns {String} The data string.\n */\nexport default function getDataFromElement( el ) {\n\tif ( el instanceof HTMLTextAreaElement ) {\n\t\treturn el.value;\n\t}\n\n\treturn el.innerHTML;\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\nimport LiveRange from '@ckeditor/ckeditor5-engine/src/model/liverange';\nimport first from '@ckeditor/ckeditor5-utils/src/first';\n\n/**\n * The block autoformatting engine. It allows to format various block patterns. For example,\n * it can be configured to turn a paragraph starting with `*` and followed by a space into a list item.\n *\n * The autoformatting operation is integrated with the undo manager,\n * so the autoformatting step can be undone if the user's intention was not to format the text.\n *\n * See the {@link module:autoformat/blockautoformatediting~blockAutoformatEditing `blockAutoformatEditing`} documentation\n * to learn how to create custom block autoformatters. You can also use\n * the {@link module:autoformat/autoformat~Autoformat} feature which enables a set of default autoformatters\n * (lists, headings, bold and italic).\n *\n * @module autoformat/blockautoformatediting\n */\n\n/**\n * Creates a listener triggered on {@link module:engine/model/document~Document#event:change:data `change:data`} event in the document.\n * Calls the callback when inserted text matches the regular expression or the command name\n * if provided instead of the callback.\n *\n * Examples of usage:\n *\n * To convert a paragraph to heading 1 when `- ` is typed, using just the command name:\n *\n *\t\tblockAutoformatEditing( editor, plugin, /^\\- $/, 'heading1' );\n *\n * To convert a paragraph to heading 1 when `- ` is typed, using just the callback:\n *\n *\t\tblockAutoformatEditing( editor, plugin, /^\\- $/, ( context ) => {\n *\t\t\tconst { match } = context;\n *\t\t\tconst headingLevel = match[ 1 ].length;\n *\n *\t\t\teditor.execute( 'heading', {\n *\t\t\t\tformatId: `heading${ headingLevel }`\n *\t\t\t} );\n * \t\t} );\n *\n * @param {module:core/editor/editor~Editor} editor The editor instance.\n * @param {module:autoformat/autoformat~Autoformat} plugin The autoformat plugin instance.\n * @param {RegExp} pattern The regular expression to execute on just inserted text. The regular expression is tested against the text\n * from the beginning until the caret position.\n * @param {Function|String} callbackOrCommand The callback to execute or the command to run when the text is matched.\n * In case of providing the callback, it receives the following parameter:\n * * {Object} match RegExp.exec() result of matching the pattern to inserted text.\n */\nexport default function blockAutoformatEditing( editor, plugin, pattern, callbackOrCommand ) {\n\tlet callback;\n\tlet command = null;\n\n\tif ( typeof callbackOrCommand == 'function' ) {\n\t\tcallback = callbackOrCommand;\n\t} else {\n\t\t// We assume that the actual command name was provided.\n\t\tcommand = editor.commands.get( callbackOrCommand );\n\n\t\tcallback = () => {\n\t\t\teditor.execute( callbackOrCommand );\n\t\t};\n\t}\n\n\teditor.model.document.on( 'change:data', ( evt, batch ) => {\n\t\tif ( command && !command.isEnabled || !plugin.isEnabled ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst range = first( editor.model.document.selection.getRanges() );\n\n\t\tif ( !range.isCollapsed ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( batch.type == 'transparent' ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst changes = Array.from( editor.model.document.differ.getChanges() );\n\t\tconst entry = changes[ 0 ];\n\n\t\t// Typing is represented by only a single change.\n\t\tif ( changes.length != 1 || entry.type !== 'insert' || entry.name != '$text' || entry.length != 1 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst blockToFormat = entry.position.parent;\n\n\t\t// Block formatting should be disabled in codeBlocks (#5800).\n\t\tif ( blockToFormat.is( 'element', 'codeBlock' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Only lists should be formatted inside the lists.\n\t\tif ( blockToFormat.is( 'element', 'listItem' ) &&\n\t\t\t![ 'numberedList', 'bulletedList', 'todoList' ].includes( callbackOrCommand )\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\t// In case a command is bound, do not re-execute it over an existing block style which would result with a style removal.\n\t\t// Instead just drop processing so that autoformat trigger text is not lost. E.g. writing \"# \" in a level 1 heading.\n\t\tif ( command && command.value === true ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst firstNode = blockToFormat.getChild( 0 );\n\t\tconst firstNodeRange = editor.model.createRangeOn( firstNode );\n\n\t\t// Range is only expected to be within or at the very end of the first text node.\n\t\tif ( !firstNodeRange.containsRange( range ) && !range.end.isEqual( firstNodeRange.end ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst match = pattern.exec( firstNode.data.substr( 0, range.end.offset ) );\n\n\t\t// ...and this text node's data match the pattern.\n\t\tif ( !match ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Use enqueueChange to create new batch to separate typing batch from the auto-format changes.\n\t\teditor.model.enqueueChange( writer => {\n\t\t\t// Matched range.\n\t\t\tconst start = writer.createPositionAt( blockToFormat, 0 );\n\t\t\tconst end = writer.createPositionAt( blockToFormat, match[ 0 ].length );\n\t\t\tconst range = new LiveRange( start, end );\n\n\t\t\tconst wasChanged = callback( { match } );\n\n\t\t\t// Remove matched text.\n\t\t\tif ( wasChanged !== false ) {\n\t\t\t\twriter.remove( range );\n\n\t\t\t\tconst selectionRange = editor.model.document.selection.getFirstRange();\n\t\t\t\tconst blockRange = writer.createRangeIn( blockToFormat );\n\n\t\t\t\t// If the block is empty and the document selection has been moved when\n\t\t\t\t// applying formatting (e.g. is now in newly created block).\n\t\t\t\tif ( blockToFormat.isEmpty && !blockRange.isEqual( selectionRange ) && !blockRange.containsRange( selectionRange, true ) ) {\n\t\t\t\t\twriter.remove( blockToFormat );\n\t\t\t\t}\n\t\t\t}\n\t\t\trange.detach();\n\t\t} );\n\t} );\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/first\n */\n\n/**\n * Returns first item of the given `iterable`.\n *\n * @param {Iterable.<*>} iterable\n * @returns {*}\n */\nexport default function first( iterable ) {\n\tconst iteratorItem = iterable.next();\n\n\tif ( iteratorItem.done ) {\n\t\treturn null;\n\t}\n\n\treturn iteratorItem.value;\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * The inline autoformatting engine. It allows to format various inline patterns. For example,\n * it can be configured to make \"foo\" bold when typed `**foo**` (the `**` markers will be removed).\n *\n * The autoformatting operation is integrated with the undo manager,\n * so the autoformatting step can be undone if the user's intention was not to format the text.\n *\n * See the {@link module:autoformat/inlineautoformatediting~inlineAutoformatEditing `inlineAutoformatEditing`} documentation\n * to learn how to create custom inline autoformatters. You can also use\n * the {@link module:autoformat/autoformat~Autoformat} feature which enables a set of default autoformatters\n * (lists, headings, bold and italic).\n *\n * @module autoformat/inlineautoformatediting\n */\n\n/**\n * Enables autoformatting mechanism for a given {@link module:core/editor/editor~Editor}.\n *\n * It formats the matched text by applying the given model attribute or by running the provided formatting callback.\n * On every {@link module:engine/model/document~Document#event:change:data data change} in the model document\n * the autoformatting engine checks the text on the left of the selection\n * and executes the provided action if the text matches given criteria (regular expression or callback).\n *\n * @param {module:core/editor/editor~Editor} editor The editor instance.\n * @param {module:autoformat/autoformat~Autoformat} plugin The autoformat plugin instance.\n * @param {Function|RegExp} testRegexpOrCallback The regular expression or callback to execute on text.\n * Provided regular expression *must* have three capture groups. The first and the third capture group\n * should match opening and closing delimiters. The second capture group should match the text to format.\n *\n *\t\t// Matches the `**bold text**` pattern.\n *\t\t// There are three capturing groups:\n *\t\t// - The first to match the starting `**` delimiter.\n *\t\t// - The second to match the text to format.\n *\t\t// - The third to match the ending `**` delimiter.\n *\t\tinlineAutoformatEditing( editor, plugin, /(\\*\\*)([^\\*]+?)(\\*\\*)$/g, formatCallback );\n *\n * When a function is provided instead of the regular expression, it will be executed with the text to match as a parameter.\n * The function should return proper \"ranges\" to delete and format.\n *\n *\t\t{\n *\t\t\tremove: [\n *\t\t\t\t[ 0, 1 ],\t// Remove the first letter from the given text.\n *\t\t\t\t[ 5, 6 ]\t// Remove the 6th letter from the given text.\n *\t\t\t],\n *\t\t\tformat: [\n *\t\t\t\t[ 1, 5 ]\t// Format all letters from 2nd to 5th.\n *\t\t\t]\n *\t\t}\n *\n * @param {Function} formatCallback A callback to apply actual formatting.\n * It should return `false` if changes should not be applied (e.g. if a command is disabled).\n *\n *\t\tinlineAutoformatEditing( editor, plugin, /(\\*\\*)([^\\*]+?)(\\*\\*)$/g, ( writer, rangesToFormat ) => {\n *\t\t\tconst command = editor.commands.get( 'bold' );\n *\n *\t\t\tif ( !command.isEnabled ) {\n *\t\t\t\treturn false;\n *\t\t\t}\n *\n *\t\t\tconst validRanges = editor.model.schema.getValidRanges( rangesToFormat, 'bold' );\n *\n *\t\t\tfor ( let range of validRanges ) {\n *\t\t\t\twriter.setAttribute( 'bold', true, range );\n *\t\t\t}\n *\t\t} );\n */\nexport default function inlineAutoformatEditing( editor, plugin, testRegexpOrCallback, formatCallback ) {\n\tlet regExp;\n\tlet testCallback;\n\n\tif ( testRegexpOrCallback instanceof RegExp ) {\n\t\tregExp = testRegexpOrCallback;\n\t} else {\n\t\ttestCallback = testRegexpOrCallback;\n\t}\n\n\t// A test callback run on changed text.\n\ttestCallback = testCallback || ( text => {\n\t\tlet result;\n\t\tconst remove = [];\n\t\tconst format = [];\n\n\t\twhile ( ( result = regExp.exec( text ) ) !== null ) {\n\t\t\t// There should be full match and 3 capture groups.\n\t\t\tif ( result && result.length < 4 ) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tlet {\n\t\t\t\tindex,\n\t\t\t\t'1': leftDel,\n\t\t\t\t'2': content,\n\t\t\t\t'3': rightDel\n\t\t\t} = result;\n\n\t\t\t// Real matched string - there might be some non-capturing groups so we need to recalculate starting index.\n\t\t\tconst found = leftDel + content + rightDel;\n\t\t\tindex += result[ 0 ].length - found.length;\n\n\t\t\t// Start and End offsets of delimiters to remove.\n\t\t\tconst delStart = [\n\t\t\t\tindex,\n\t\t\t\tindex + leftDel.length\n\t\t\t];\n\t\t\tconst delEnd = [\n\t\t\t\tindex + leftDel.length + content.length,\n\t\t\t\tindex + leftDel.length + content.length + rightDel.length\n\t\t\t];\n\n\t\t\tremove.push( delStart );\n\t\t\tremove.push( delEnd );\n\n\t\t\tformat.push( [ index + leftDel.length, index + leftDel.length + content.length ] );\n\t\t}\n\n\t\treturn {\n\t\t\tremove,\n\t\t\tformat\n\t\t};\n\t} );\n\n\teditor.model.document.on( 'change:data', ( evt, batch ) => {\n\t\tif ( batch.type == 'transparent' || !plugin.isEnabled ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst model = editor.model;\n\t\tconst selection = model.document.selection;\n\n\t\t// Do nothing if selection is not collapsed.\n\t\tif ( !selection.isCollapsed ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst changes = Array.from( model.document.differ.getChanges() );\n\t\tconst entry = changes[ 0 ];\n\n\t\t// Typing is represented by only a single change.\n\t\tif ( changes.length != 1 || entry.type !== 'insert' || entry.name != '$text' || entry.length != 1 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst focus = selection.focus;\n\t\tconst block = focus.parent;\n\t\tconst { text, range } = getTextAfterCode( model.createRange( model.createPositionAt( block, 0 ), focus ), model );\n\t\tconst testOutput = testCallback( text );\n\t\tconst rangesToFormat = testOutputToRanges( range.start, testOutput.format, model );\n\t\tconst rangesToRemove = testOutputToRanges( range.start, testOutput.remove, model );\n\n\t\tif ( !( rangesToFormat.length && rangesToRemove.length ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Use enqueueChange to create new batch to separate typing batch from the auto-format changes.\n\t\tmodel.enqueueChange( writer => {\n\t\t\t// Apply format.\n\t\t\tconst hasChanged = formatCallback( writer, rangesToFormat );\n\n\t\t\t// Strict check on `false` to have backward compatibility (when callbacks were returning `undefined`).\n\t\t\tif ( hasChanged === false ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Remove delimiters - use reversed order to not mix the offsets while removing.\n\t\t\tfor ( const range of rangesToRemove.reverse() ) {\n\t\t\t\twriter.remove( range );\n\t\t\t}\n\t\t} );\n\t} );\n}\n\n// Converts output of the test function provided to the inlineAutoformatEditing and converts it to the model ranges\n// inside provided block.\n//\n// @private\n// @param {module:engine/model/position~Position} start\n// @param {Array.<Array>} arrays\n// @param {module:engine/model/model~Model} model\nfunction testOutputToRanges( start, arrays, model ) {\n\treturn arrays\n\t\t.filter( array => ( array[ 0 ] !== undefined && array[ 1 ] !== undefined ) )\n\t\t.map( array => {\n\t\t\treturn model.createRange( start.getShiftedBy( array[ 0 ] ), start.getShiftedBy( array[ 1 ] ) );\n\t\t} );\n}\n\n// Returns the last text line after the last code element from the given range.\n// It is similar to {@link module:typing/utils/getlasttextline.getLastTextLine `getLastTextLine()`},\n// but it ignores any text before the last `code`.\n//\n// @param {module:engine/model/range~Range} range\n// @param {module:engine/model/model~Model} model\n// @returns {module:typing/utils/getlasttextline~LastTextLineData}\nfunction getTextAfterCode( range, model ) {\n\tlet start = range.start;\n\n\tconst text = Array.from( range.getItems() ).reduce( ( rangeText, node ) => {\n\t\t// Trim text to a last occurrence of an inline element and update range start.\n\t\tif ( !( node.is( '$text' ) || node.is( '$textProxy' ) ) || node.getAttribute( 'code' ) ) {\n\t\t\tstart = model.createPositionAfter( node );\n\n\t\t\treturn '';\n\t\t}\n\n\t\treturn rangeText + node.data;\n\t}, '' );\n\n\treturn { text, range: model.createRange( start, range.end ) };\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module core/plugin\n */\n\nimport ObservableMixin from '@ckeditor/ckeditor5-utils/src/observablemixin';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\n\n/**\n * The base class for CKEditor plugin classes.\n *\n * @implements module:core/plugin~PluginInterface\n * @mixes module:utils/observablemixin~ObservableMixin\n */\nexport default class Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tconstructor( editor ) {\n\t\t/**\n\t\t * The editor instance.\n\t\t *\n\t\t * Note that most editors implement the {@link module:core/editor/editorwithui~EditorWithUI} interface in addition\n\t\t * to the base {@link module:core/editor/editor~Editor} interface. However, editors with an external UI\n\t\t * (i.e. Bootstrap-based) or a headless editor may not implement the {@link module:core/editor/editorwithui~EditorWithUI}\n\t\t * interface.\n\t\t *\n\t\t * Because of above, to make plugins more universal, it is recommended to split features into:\n\t\t *  - The \"editing\" part that only uses the {@link module:core/editor/editor~Editor} interface.\n\t\t *  - The \"UI\" part that uses both the {@link module:core/editor/editor~Editor} interface and\n\t\t *  the {@link module:core/editor/editorwithui~EditorWithUI} interface.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:core/editor/editor~Editor} #editor\n\t\t */\n\t\tthis.editor = editor;\n\n\t\t/**\n\t\t * Flag indicating whether a plugin is enabled or disabled.\n\t\t * A disabled plugin will not transform text.\n\t\t *\n\t\t * Plugin can be simply disabled like that:\n\t\t *\n\t\t *\t\t// Disable the plugin so that no toolbars are visible.\n\t\t *\t\teditor.plugins.get( 'TextTransformation' ).isEnabled = false;\n\t\t *\n\t\t * You can also use {@link #forceDisabled} method.\n\t\t *\n\t\t * @observable\n\t\t * @readonly\n\t\t * @member {Boolean} #isEnabled\n\t\t */\n\t\tthis.set( 'isEnabled', true );\n\n\t\t/**\n\t\t * Holds identifiers for {@link #forceDisabled} mechanism.\n\t\t *\n\t\t * @type {Set.<String>}\n\t\t * @private\n\t\t */\n\t\tthis._disableStack = new Set();\n\t}\n\n\t/**\n\t * Disables the plugin.\n\t *\n\t * Plugin may be disabled by multiple features or algorithms (at once). When disabling a plugin, unique id should be passed\n\t * (e.g. feature name). The same identifier should be used when {@link #clearForceDisabled enabling back} the plugin.\n\t * The plugin becomes enabled only after all features {@link #clearForceDisabled enabled it back}.\n\t *\n\t * Disabling and enabling a plugin:\n\t *\n\t *\t\tplugin.isEnabled; // -> true\n\t *\t\tplugin.forceDisabled( 'MyFeature' );\n\t *\t\tplugin.isEnabled; // -> false\n\t *\t\tplugin.clearForceDisabled( 'MyFeature' );\n\t *\t\tplugin.isEnabled; // -> true\n\t *\n\t * Plugin disabled by multiple features:\n\t *\n\t *\t\tplugin.forceDisabled( 'MyFeature' );\n\t *\t\tplugin.forceDisabled( 'OtherFeature' );\n\t *\t\tplugin.clearForceDisabled( 'MyFeature' );\n\t *\t\tplugin.isEnabled; // -> false\n\t *\t\tplugin.clearForceDisabled( 'OtherFeature' );\n\t *\t\tplugin.isEnabled; // -> true\n\t *\n\t * Multiple disabling with the same identifier is redundant:\n\t *\n\t *\t\tplugin.forceDisabled( 'MyFeature' );\n\t *\t\tplugin.forceDisabled( 'MyFeature' );\n\t *\t\tplugin.clearForceDisabled( 'MyFeature' );\n\t *\t\tplugin.isEnabled; // -> true\n\t *\n\t * **Note:** some plugins or algorithms may have more complex logic when it comes to enabling or disabling certain plugins,\n\t * so the plugin might be still disabled after {@link #clearForceDisabled} was used.\n\t *\n\t * @param {String} id Unique identifier for disabling. Use the same id when {@link #clearForceDisabled enabling back} the plugin.\n\t */\n\tforceDisabled( id ) {\n\t\tthis._disableStack.add( id );\n\n\t\tif ( this._disableStack.size == 1 ) {\n\t\t\tthis.on( 'set:isEnabled', forceDisable, { priority: 'highest' } );\n\t\t\tthis.isEnabled = false;\n\t\t}\n\t}\n\n\t/**\n\t * Clears forced disable previously set through {@link #forceDisabled}. See {@link #forceDisabled}.\n\t *\n\t * @param {String} id Unique identifier, equal to the one passed in {@link #forceDisabled} call.\n\t */\n\tclearForceDisabled( id ) {\n\t\tthis._disableStack.delete( id );\n\n\t\tif ( this._disableStack.size == 0 ) {\n\t\t\tthis.off( 'set:isEnabled', forceDisable );\n\t\t\tthis.isEnabled = true;\n\t\t}\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tdestroy() {\n\t\tthis.stopListening();\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get isContextPlugin() {\n\t\treturn false;\n\t}\n}\n\nmix( Plugin, ObservableMixin );\n\n/**\n * The base interface for CKEditor plugins.\n *\n * In its minimal form a plugin can be a simple function that accepts {@link module:core/editor/editor~Editor the editor}\n * as a parameter:\n *\n *\t\t// A simple plugin that enables a data processor.\n *\t\tfunction MyPlugin( editor ) {\n *\t\t\teditor.data.processor = new MyDataProcessor();\n *\t\t}\n *\n * In most cases however, you will want to inherit from the {@link module:core/plugin~Plugin} class which implements the\n * {@link module:utils/observablemixin~ObservableMixin} and is, therefore, more convenient:\n *\n *\t\tclass MyPlugin extends Plugin {\n *\t\t\tinit() {\n *\t\t\t\t// `listenTo()` and `editor` are available thanks to `Plugin`.\n *\t\t\t\t// By using `listenTo()` you will ensure that the listener is removed when\n *\t\t\t\t// the plugin is destroyed.\n *\t\t\t\tthis.listenTo( this.editor.data, 'ready', () => {\n *\t\t\t\t\t// Do something when the data is ready.\n *\t\t\t\t} );\n *\t\t\t}\n *\t\t}\n *\n * The plugin can also implement methods (e.g. {@link module:core/plugin~PluginInterface#init `init()`} or\n * {@link module:core/plugin~PluginInterface#destroy `destroy()`}) which, when present, will be used to properly\n * initialize and destroy the plugin.\n *\n * **Note:** When defined as a plain function, the plugin acts as a constructor and will be\n * called in parallel with other plugins' {@link module:core/plugin~PluginInterface#constructor constructors}.\n * This means the code of that plugin will be executed **before** {@link module:core/plugin~PluginInterface#init `init()`} and\n * {@link module:core/plugin~PluginInterface#afterInit `afterInit()`} methods of other plugins and, for instance,\n * you cannot use it to extend other plugins' {@glink framework/guides/architecture/editing-engine#schema schema}\n * rules as they are defined later on during the `init()` stage.\n *\n * @interface PluginInterface\n */\n\n/**\n * Creates a new plugin instance. This is the first step of the plugin initialization.\n * See also {@link #init} and {@link #afterInit}.\n *\n * A plugin is always instantiated after its {@link module:core/plugin~PluginInterface.requires dependencies} and the\n * {@link #init} and {@link #afterInit} methods are called in the same order.\n *\n * Usually, you will want to put your plugin's initialization code in the {@link #init} method.\n * The constructor can be understood as \"before init\" and used in special cases, just like\n * {@link #afterInit} serves the special \"after init\" scenarios (e.g.the code which depends on other\n * plugins, but which does not {@link module:core/plugin~PluginInterface.requires explicitly require} them).\n *\n * @method #constructor\n * @param {module:core/editor/editor~Editor} editor\n */\n\n/**\n * An array of plugins required by this plugin.\n *\n * To keep the plugin class definition tight it is recommended to define this property as a static getter:\n *\n *\t\timport Image from './image.js';\n *\n *\t\texport default class ImageCaption {\n *\t\t\tstatic get requires() {\n *\t\t\t\treturn [ Image ];\n *\t\t\t}\n *\t\t}\n *\n * @static\n * @readonly\n * @member {Array.<Function>|undefined} module:core/plugin~PluginInterface.requires\n */\n\n/**\n * An optional name of the plugin. If set, the plugin will be available in\n * {@link module:core/plugincollection~PluginCollection#get} by its\n * name and its constructor. If not, then only by its constructor.\n *\n * The name should reflect the constructor name.\n *\n * To keep the plugin class definition tight, it is recommended to define this property as a static getter:\n *\n *\t\texport default class ImageCaption {\n *\t\t\tstatic get pluginName() {\n *\t\t\t\treturn 'ImageCaption';\n *\t\t\t}\n *\t\t}\n *\n * Note: The native `Function.name` property could not be used to keep the plugin name because\n * it will be mangled during code minification.\n *\n * Naming a plugin is necessary to enable removing it through the\n * {@link module:core/editor/editorconfig~EditorConfig#removePlugins `config.removePlugins`} option.\n *\n * @static\n * @readonly\n * @member {String|undefined} module:core/plugin~PluginInterface.pluginName\n */\n\n/**\n * The second stage (after plugin {@link #constructor}) of the plugin initialization.\n * Unlike the plugin constructor this method can be asynchronous.\n *\n * A plugin's `init()` method is called after its {@link module:core/plugin~PluginInterface.requires dependencies} are initialized,\n * so in the same order as the constructors of these plugins.\n *\n * **Note:** This method is optional. A plugin instance does not need to have it defined.\n *\n * @method #init\n * @returns {null|Promise}\n */\n\n/**\n * The third (and last) stage of the plugin initialization. See also {@link #constructor} and {@link #init}.\n *\n * **Note:** This method is optional. A plugin instance does not need to have it defined.\n *\n * @method #afterInit\n * @returns {null|Promise}\n */\n\n/**\n * Destroys the plugin.\n *\n * **Note:** This method is optional. A plugin instance does not need to have it defined.\n *\n * @method #destroy\n * @returns {null|Promise}\n */\n\n/**\n * A flag which defines if a plugin is allowed or not allowed to be used directly by a {@link module:core/context~Context}.\n *\n * @static\n * @readonly\n * @member {Boolean} module:core/plugin~PluginInterface.isContextPlugin\n */\n\n/**\n * An array of loaded plugins.\n *\n * @typedef {Array.<module:core/plugin~PluginInterface>} module:core/plugin~LoadedPlugins\n */\n\n// Helper function that forces plugin to be disabled.\nfunction forceDisable( evt ) {\n\tevt.return = false;\n\tevt.stop();\n}\n","/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module autoformat/autoformat\n */\n\nimport blockAutoformatEditing from './blockautoformatediting';\nimport inlineAutoformatEditing from './inlineautoformatediting';\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\n\n/**\n * Enables a set of predefined autoformatting actions.\n *\n * For a detailed overview, check the {@glink features/autoformat Autoformatting feature documentation}\n * and the {@glink api/autoformat package page}.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class Autoformat extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get pluginName() {\n\t\treturn 'Autoformat';\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tafterInit() {\n\t\tthis._addListAutoformats();\n\t\tthis._addBasicStylesAutoformats();\n\t\tthis._addHeadingAutoformats();\n\t\tthis._addBlockQuoteAutoformats();\n\t\tthis._addCodeBlockAutoformats();\n\t\tthis._addHorizontalLineAutoformats();\n\t}\n\n\t/**\n\t * Adds autoformatting related to the {@link module:list/list~List}.\n\t *\n\t * When typed:\n\t * - `* ` or `- ` &ndash; A paragraph will be changed to a bulleted list.\n\t * - `1. ` or `1) ` &ndash; A paragraph will be changed to a numbered list (\"1\" can be any digit or a list of digits).\n\t * - `[] ` or `[ ] ` &ndash; A paragraph will be changed to a to-do list.\n\t *\n\t * @private\n\t */\n\t_addListAutoformats() {\n\t\tconst commands = this.editor.commands;\n\n\t\tif ( commands.get( 'bulletedList' ) ) {\n\t\t\tblockAutoformatEditing( this.editor, this, /^[*-]\\s$/, 'bulletedList' );\n\t\t}\n\n\t\tif ( commands.get( 'numberedList' ) ) {\n\t\t\tblockAutoformatEditing( this.editor, this, /^1[.|)]\\s$/, 'numberedList' );\n\t\t}\n\n\t\tif ( commands.get( 'todoList' ) ) {\n\t\t\tblockAutoformatEditing( this.editor, this, /^\\[\\s?\\]\\s$/, 'todoList' );\n\t\t}\n\t}\n\n\t/**\n\t * Adds autoformatting related to the {@link module:basic-styles/bold~Bold},\n\t * {@link module:basic-styles/italic~Italic}, {@link module:basic-styles/code~Code}\n\t * and {@link module:basic-styles/strikethrough~Strikethrough}\n\t *\n\t * When typed:\n\t * - `**foobar**` &ndash; `**` characters are removed and `foobar` is set to bold,\n\t * - `__foobar__` &ndash; `__` characters are removed and `foobar` is set to bold,\n\t * - `*foobar*` &ndash; `*` characters are removed and `foobar` is set to italic,\n\t * - `_foobar_` &ndash; `_` characters are removed and `foobar` is set to italic,\n\t * - ``` `foobar` &ndash; ``` ` ``` characters are removed and `foobar` is set to code,\n\t * - `~~foobar~~` &ndash; `~~` characters are removed and `foobar` is set to strikethrough.\n\t *\n\t * @private\n\t */\n\t_addBasicStylesAutoformats() {\n\t\tconst commands = this.editor.commands;\n\n\t\tif ( commands.get( 'bold' ) ) {\n\t\t\tconst boldCallback = getCallbackFunctionForInlineAutoformat( this.editor, 'bold' );\n\n\t\t\tinlineAutoformatEditing( this.editor, this, /(?:^|\\s)(\\*\\*)([^*]+)(\\*\\*)$/g, boldCallback );\n\t\t\tinlineAutoformatEditing( this.editor, this, /(?:^|\\s)(__)([^_]+)(__)$/g, boldCallback );\n\t\t}\n\n\t\tif ( commands.get( 'italic' ) ) {\n\t\t\tconst italicCallback = getCallbackFunctionForInlineAutoformat( this.editor, 'italic' );\n\n\t\t\t// The italic autoformatter cannot be triggered by the bold markers, so we need to check the\n\t\t\t// text before the pattern (e.g. `(?:^|[^\\*])`).\n\t\t\tinlineAutoformatEditing( this.editor, this, /(?:^|\\s)(\\*)([^*_]+)(\\*)$/g, italicCallback );\n\t\t\tinlineAutoformatEditing( this.editor, this, /(?:^|\\s)(_)([^_]+)(_)$/g, italicCallback );\n\t\t}\n\n\t\tif ( commands.get( 'code' ) ) {\n\t\t\tconst codeCallback = getCallbackFunctionForInlineAutoformat( this.editor, 'code' );\n\n\t\t\tinlineAutoformatEditing( this.editor, this, /(`)([^`]+)(`)$/g, codeCallback );\n\t\t}\n\n\t\tif ( commands.get( 'strikethrough' ) ) {\n\t\t\tconst strikethroughCallback = getCallbackFunctionForInlineAutoformat( this.editor, 'strikethrough' );\n\n\t\t\tinlineAutoformatEditing( this.editor, this, /(~~)([^~]+)(~~)$/g, strikethroughCallback );\n\t\t}\n\t}\n\n\t/**\n\t * Adds autoformatting related to {@link module:heading/heading~Heading}.\n\t *\n\t * It is using a number at the end of the command name to associate it with the proper trigger:\n\t *\n\t * * `heading` with value `heading1` will be executed when typing `#`,\n\t * * `heading` with value `heading2` will be executed when typing `##`,\n\t * * ... up to `heading6` and `######`.\n\t *\n\t * @private\n\t */\n\t_addHeadingAutoformats() {\n\t\tconst command = this.editor.commands.get( 'heading' );\n\n\t\tif ( command ) {\n\t\t\tcommand.modelElements\n\t\t\t\t.filter( name => name.match( /^heading[1-6]$/ ) )\n\t\t\t\t.forEach( modelName => {\n\t\t\t\t\tconst level = modelName[ 7 ];\n\t\t\t\t\tconst pattern = new RegExp( `^(#{${ level }})\\\\s$` );\n\n\t\t\t\t\tblockAutoformatEditing( this.editor, this, pattern, () => {\n\t\t\t\t\t\t// Should only be active if command is enabled and heading style associated with pattern is inactive.\n\t\t\t\t\t\tif ( !command.isEnabled || command.value === modelName ) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.editor.execute( 'heading', { value: modelName } );\n\t\t\t\t\t} );\n\t\t\t\t} );\n\t\t}\n\t}\n\n\t/**\n\t * Adds autoformatting related to {@link module:block-quote/blockquote~BlockQuote}.\n\t *\n\t * When typed:\n\t * * `> ` &ndash; A paragraph will be changed to a block quote.\n\t *\n\t * @private\n\t */\n\t_addBlockQuoteAutoformats() {\n\t\tif ( this.editor.commands.get( 'blockQuote' ) ) {\n\t\t\tblockAutoformatEditing( this.editor, this, /^>\\s$/, 'blockQuote' );\n\t\t}\n\t}\n\n\t/**\n\t * Adds autoformatting related to {@link module:code-block/codeblock~CodeBlock}.\n\t *\n\t * When typed:\n\t * - `` ``` `` &ndash; A paragraph will be changed to a code block.\n\t *\n\t * @private\n\t */\n\t_addCodeBlockAutoformats() {\n\t\tif ( this.editor.commands.get( 'codeBlock' ) ) {\n\t\t\tblockAutoformatEditing( this.editor, this, /^```$/, 'codeBlock' );\n\t\t}\n\t}\n\n\t/**\n\t * Adds autoformatting related to {@link module:horizontal-line/horizontalline~HorizontalLine}.\n\t *\n\t * When typed:\n\t * - `` --- `` &ndash; Will be replaced with a horizontal line.\n\t *\n\t * @private\n\t */\n\t_addHorizontalLineAutoformats() {\n\t\tif ( this.editor.commands.get( 'horizontalLine' ) ) {\n\t\t\tblockAutoformatEditing( this.editor, this, /^---$/, 'horizontalLine' );\n\t\t}\n\t}\n}\n\n// Helper function for getting `inlineAutoformatEditing` callbacks that checks if command is enabled.\n//\n// @param {module:core/editor/editor~Editor} editor\n// @param {String} attributeKey\n// @returns {Function}\nfunction getCallbackFunctionForInlineAutoformat( editor, attributeKey ) {\n\treturn ( writer, rangesToFormat ) => {\n\t\tconst command = editor.commands.get( attributeKey );\n\n\t\tif ( !command.isEnabled ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst validRanges = editor.model.schema.getValidRanges( rangesToFormat, attributeKey );\n\n\t\tfor ( const range of validRanges ) {\n\t\t\twriter.setAttribute( attributeKey, true, range );\n\t\t}\n\n\t\t// After applying attribute to the text, remove given attribute from the selection.\n\t\t// This way user is able to type a text without attribute used by auto formatter.\n\t\twriter.removeSelectionAttribute( attributeKey );\n\t};\n}\n","/**\n * WARNING: Don't import this directly.\n * Use `MuiError` from `@material-ui/utils/macros/MuiError.macro` instead.\n * @param {number} code\n */\nexport default function formatMuiErrorMessage(code) {\n  // Apply babel-plugin-transform-template-literals in loose mode\n  // loose mode is safe iff we're concatenating primitives\n  // see https://babeljs.io/docs/en/babel-plugin-transform-template-literals#loose\n\n  /* eslint-disable prefer-template */\n  var url = 'https://material-ui.com/production-error/?code=' + code;\n\n  for (var i = 1; i < arguments.length; i += 1) {\n    // rest params over-transpile for this case\n    // eslint-disable-next-line prefer-rest-params\n    url += '&args[]=' + encodeURIComponent(arguments[i]);\n  }\n\n  return 'Minified Material-UI error #' + code + '; visit ' + url + ' for the full message.';\n  /* eslint-enable prefer-template */\n}","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","/** @license React v17.0.1\n * react.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var l=require(\"object-assign\"),n=60103,p=60106;exports.Fragment=60107;exports.StrictMode=60108;exports.Profiler=60114;var q=60109,r=60110,t=60112;exports.Suspense=60113;var u=60115,v=60116;\nif(\"function\"===typeof Symbol&&Symbol.for){var w=Symbol.for;n=w(\"react.element\");p=w(\"react.portal\");exports.Fragment=w(\"react.fragment\");exports.StrictMode=w(\"react.strict_mode\");exports.Profiler=w(\"react.profiler\");q=w(\"react.provider\");r=w(\"react.context\");t=w(\"react.forward_ref\");exports.Suspense=w(\"react.suspense\");u=w(\"react.memo\");v=w(\"react.lazy\")}var x=\"function\"===typeof Symbol&&Symbol.iterator;\nfunction y(a){if(null===a||\"object\"!==typeof a)return null;a=x&&a[x]||a[\"@@iterator\"];return\"function\"===typeof a?a:null}function z(a){for(var b=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+a,c=1;c<arguments.length;c++)b+=\"&args[]=\"+encodeURIComponent(arguments[c]);return\"Minified React error #\"+a+\"; visit \"+b+\" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\"}\nvar A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B={};function C(a,b,c){this.props=a;this.context=b;this.refs=B;this.updater=c||A}C.prototype.isReactComponent={};C.prototype.setState=function(a,b){if(\"object\"!==typeof a&&\"function\"!==typeof a&&null!=a)throw Error(z(85));this.updater.enqueueSetState(this,a,b,\"setState\")};C.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,\"forceUpdate\")};\nfunction D(){}D.prototype=C.prototype;function E(a,b,c){this.props=a;this.context=b;this.refs=B;this.updater=c||A}var F=E.prototype=new D;F.constructor=E;l(F,C.prototype);F.isPureReactComponent=!0;var G={current:null},H=Object.prototype.hasOwnProperty,I={key:!0,ref:!0,__self:!0,__source:!0};\nfunction J(a,b,c){var e,d={},k=null,h=null;if(null!=b)for(e in void 0!==b.ref&&(h=b.ref),void 0!==b.key&&(k=\"\"+b.key),b)H.call(b,e)&&!I.hasOwnProperty(e)&&(d[e]=b[e]);var g=arguments.length-2;if(1===g)d.children=c;else if(1<g){for(var f=Array(g),m=0;m<g;m++)f[m]=arguments[m+2];d.children=f}if(a&&a.defaultProps)for(e in g=a.defaultProps,g)void 0===d[e]&&(d[e]=g[e]);return{$$typeof:n,type:a,key:k,ref:h,props:d,_owner:G.current}}\nfunction K(a,b){return{$$typeof:n,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}}function L(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===n}function escape(a){var b={\"=\":\"=0\",\":\":\"=2\"};return\"$\"+a.replace(/[=:]/g,function(a){return b[a]})}var M=/\\/+/g;function N(a,b){return\"object\"===typeof a&&null!==a&&null!=a.key?escape(\"\"+a.key):b.toString(36)}\nfunction O(a,b,c,e,d){var k=typeof a;if(\"undefined\"===k||\"boolean\"===k)a=null;var h=!1;if(null===a)h=!0;else switch(k){case \"string\":case \"number\":h=!0;break;case \"object\":switch(a.$$typeof){case n:case p:h=!0}}if(h)return h=a,d=d(h),a=\"\"===e?\".\"+N(h,0):e,Array.isArray(d)?(c=\"\",null!=a&&(c=a.replace(M,\"$&/\")+\"/\"),O(d,b,c,\"\",function(a){return a})):null!=d&&(L(d)&&(d=K(d,c+(!d.key||h&&h.key===d.key?\"\":(\"\"+d.key).replace(M,\"$&/\")+\"/\")+a)),b.push(d)),1;h=0;e=\"\"===e?\".\":e+\":\";if(Array.isArray(a))for(var g=\n0;g<a.length;g++){k=a[g];var f=e+N(k,g);h+=O(k,b,c,f,d)}else if(f=y(a),\"function\"===typeof f)for(a=f.call(a),g=0;!(k=a.next()).done;)k=k.value,f=e+N(k,g++),h+=O(k,b,c,f,d);else if(\"object\"===k)throw b=\"\"+a,Error(z(31,\"[object Object]\"===b?\"object with keys {\"+Object.keys(a).join(\", \")+\"}\":b));return h}function P(a,b,c){if(null==a)return a;var e=[],d=0;O(a,e,\"\",\"\",function(a){return b.call(c,a,d++)});return e}\nfunction Q(a){if(-1===a._status){var b=a._result;b=b();a._status=0;a._result=b;b.then(function(b){0===a._status&&(b=b.default,a._status=1,a._result=b)},function(b){0===a._status&&(a._status=2,a._result=b)})}if(1===a._status)return a._result;throw a._result;}var R={current:null};function S(){var a=R.current;if(null===a)throw Error(z(321));return a}var T={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:G,IsSomeRendererActing:{current:!1},assign:l};\nexports.Children={map:P,forEach:function(a,b,c){P(a,function(){b.apply(this,arguments)},c)},count:function(a){var b=0;P(a,function(){b++});return b},toArray:function(a){return P(a,function(a){return a})||[]},only:function(a){if(!L(a))throw Error(z(143));return a}};exports.Component=C;exports.PureComponent=E;exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T;\nexports.cloneElement=function(a,b,c){if(null===a||void 0===a)throw Error(z(267,a));var e=l({},a.props),d=a.key,k=a.ref,h=a._owner;if(null!=b){void 0!==b.ref&&(k=b.ref,h=G.current);void 0!==b.key&&(d=\"\"+b.key);if(a.type&&a.type.defaultProps)var g=a.type.defaultProps;for(f in b)H.call(b,f)&&!I.hasOwnProperty(f)&&(e[f]=void 0===b[f]&&void 0!==g?g[f]:b[f])}var f=arguments.length-2;if(1===f)e.children=c;else if(1<f){g=Array(f);for(var m=0;m<f;m++)g[m]=arguments[m+2];e.children=g}return{$$typeof:n,type:a.type,\nkey:d,ref:k,props:e,_owner:h}};exports.createContext=function(a,b){void 0===b&&(b=null);a={$$typeof:r,_calculateChangedBits:b,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null};a.Provider={$$typeof:q,_context:a};return a.Consumer=a};exports.createElement=J;exports.createFactory=function(a){var b=J.bind(null,a);b.type=a;return b};exports.createRef=function(){return{current:null}};exports.forwardRef=function(a){return{$$typeof:t,render:a}};exports.isValidElement=L;\nexports.lazy=function(a){return{$$typeof:v,_payload:{_status:-1,_result:a},_init:Q}};exports.memo=function(a,b){return{$$typeof:u,type:a,compare:void 0===b?null:b}};exports.useCallback=function(a,b){return S().useCallback(a,b)};exports.useContext=function(a,b){return S().useContext(a,b)};exports.useDebugValue=function(){};exports.useEffect=function(a,b){return S().useEffect(a,b)};exports.useImperativeHandle=function(a,b,c){return S().useImperativeHandle(a,b,c)};\nexports.useLayoutEffect=function(a,b){return S().useLayoutEffect(a,b)};exports.useMemo=function(a,b){return S().useMemo(a,b)};exports.useReducer=function(a,b,c){return S().useReducer(a,b,c)};exports.useRef=function(a){return S().useRef(a)};exports.useState=function(a){return S().useState(a)};exports.version=\"17.0.1\";\n","/** @license React v17.0.1\n * react-dom.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n/*\n Modernizr 3.0.0pre (Custom Build) | MIT\n*/\n'use strict';var aa=require(\"react\"),m=require(\"object-assign\"),r=require(\"scheduler\");function y(a){for(var b=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+a,c=1;c<arguments.length;c++)b+=\"&args[]=\"+encodeURIComponent(arguments[c]);return\"Minified React error #\"+a+\"; visit \"+b+\" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\"}if(!aa)throw Error(y(227));var ba=new Set,ca={};function da(a,b){ea(a,b);ea(a+\"Capture\",b)}\nfunction ea(a,b){ca[a]=b;for(a=0;a<b.length;a++)ba.add(b[a])}\nvar fa=!(\"undefined\"===typeof window||\"undefined\"===typeof window.document||\"undefined\"===typeof window.document.createElement),ha=/^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$/,ia=Object.prototype.hasOwnProperty,\nja={},ka={};function la(a){if(ia.call(ka,a))return!0;if(ia.call(ja,a))return!1;if(ha.test(a))return ka[a]=!0;ja[a]=!0;return!1}function ma(a,b,c,d){if(null!==c&&0===c.type)return!1;switch(typeof b){case \"function\":case \"symbol\":return!0;case \"boolean\":if(d)return!1;if(null!==c)return!c.acceptsBooleans;a=a.toLowerCase().slice(0,5);return\"data-\"!==a&&\"aria-\"!==a;default:return!1}}\nfunction na(a,b,c,d){if(null===b||\"undefined\"===typeof b||ma(a,b,c,d))return!0;if(d)return!1;if(null!==c)switch(c.type){case 3:return!b;case 4:return!1===b;case 5:return isNaN(b);case 6:return isNaN(b)||1>b}return!1}function B(a,b,c,d,e,f,g){this.acceptsBooleans=2===b||3===b||4===b;this.attributeName=d;this.attributeNamespace=e;this.mustUseProperty=c;this.propertyName=a;this.type=b;this.sanitizeURL=f;this.removeEmptyString=g}var D={};\n\"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style\".split(\" \").forEach(function(a){D[a]=new B(a,0,!1,a,null,!1,!1)});[[\"acceptCharset\",\"accept-charset\"],[\"className\",\"class\"],[\"htmlFor\",\"for\"],[\"httpEquiv\",\"http-equiv\"]].forEach(function(a){var b=a[0];D[b]=new B(b,1,!1,a[1],null,!1,!1)});[\"contentEditable\",\"draggable\",\"spellCheck\",\"value\"].forEach(function(a){D[a]=new B(a,2,!1,a.toLowerCase(),null,!1,!1)});\n[\"autoReverse\",\"externalResourcesRequired\",\"focusable\",\"preserveAlpha\"].forEach(function(a){D[a]=new B(a,2,!1,a,null,!1,!1)});\"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope\".split(\" \").forEach(function(a){D[a]=new B(a,3,!1,a.toLowerCase(),null,!1,!1)});\n[\"checked\",\"multiple\",\"muted\",\"selected\"].forEach(function(a){D[a]=new B(a,3,!0,a,null,!1,!1)});[\"capture\",\"download\"].forEach(function(a){D[a]=new B(a,4,!1,a,null,!1,!1)});[\"cols\",\"rows\",\"size\",\"span\"].forEach(function(a){D[a]=new B(a,6,!1,a,null,!1,!1)});[\"rowSpan\",\"start\"].forEach(function(a){D[a]=new B(a,5,!1,a.toLowerCase(),null,!1,!1)});var oa=/[\\-:]([a-z])/g;function pa(a){return a[1].toUpperCase()}\n\"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height\".split(\" \").forEach(function(a){var b=a.replace(oa,\npa);D[b]=new B(b,1,!1,a,null,!1,!1)});\"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type\".split(\" \").forEach(function(a){var b=a.replace(oa,pa);D[b]=new B(b,1,!1,a,\"http://www.w3.org/1999/xlink\",!1,!1)});[\"xml:base\",\"xml:lang\",\"xml:space\"].forEach(function(a){var b=a.replace(oa,pa);D[b]=new B(b,1,!1,a,\"http://www.w3.org/XML/1998/namespace\",!1,!1)});[\"tabIndex\",\"crossOrigin\"].forEach(function(a){D[a]=new B(a,1,!1,a.toLowerCase(),null,!1,!1)});\nD.xlinkHref=new B(\"xlinkHref\",1,!1,\"xlink:href\",\"http://www.w3.org/1999/xlink\",!0,!1);[\"src\",\"href\",\"action\",\"formAction\"].forEach(function(a){D[a]=new B(a,1,!1,a.toLowerCase(),null,!0,!0)});\nfunction qa(a,b,c,d){var e=D.hasOwnProperty(b)?D[b]:null;var f=null!==e?0===e.type:d?!1:!(2<b.length)||\"o\"!==b[0]&&\"O\"!==b[0]||\"n\"!==b[1]&&\"N\"!==b[1]?!1:!0;f||(na(b,c,e,d)&&(c=null),d||null===e?la(b)&&(null===c?a.removeAttribute(b):a.setAttribute(b,\"\"+c)):e.mustUseProperty?a[e.propertyName]=null===c?3===e.type?!1:\"\":c:(b=e.attributeName,d=e.attributeNamespace,null===c?a.removeAttribute(b):(e=e.type,c=3===e||4===e&&!0===c?\"\":\"\"+c,d?a.setAttributeNS(d,b,c):a.setAttribute(b,c))))}\nvar ra=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,sa=60103,ta=60106,ua=60107,wa=60108,xa=60114,ya=60109,za=60110,Aa=60112,Ba=60113,Ca=60120,Da=60115,Ea=60116,Fa=60121,Ga=60128,Ha=60129,Ia=60130,Ja=60131;\nif(\"function\"===typeof Symbol&&Symbol.for){var E=Symbol.for;sa=E(\"react.element\");ta=E(\"react.portal\");ua=E(\"react.fragment\");wa=E(\"react.strict_mode\");xa=E(\"react.profiler\");ya=E(\"react.provider\");za=E(\"react.context\");Aa=E(\"react.forward_ref\");Ba=E(\"react.suspense\");Ca=E(\"react.suspense_list\");Da=E(\"react.memo\");Ea=E(\"react.lazy\");Fa=E(\"react.block\");E(\"react.scope\");Ga=E(\"react.opaque.id\");Ha=E(\"react.debug_trace_mode\");Ia=E(\"react.offscreen\");Ja=E(\"react.legacy_hidden\")}\nvar Ka=\"function\"===typeof Symbol&&Symbol.iterator;function La(a){if(null===a||\"object\"!==typeof a)return null;a=Ka&&a[Ka]||a[\"@@iterator\"];return\"function\"===typeof a?a:null}var Ma;function Na(a){if(void 0===Ma)try{throw Error();}catch(c){var b=c.stack.trim().match(/\\n( *(at )?)/);Ma=b&&b[1]||\"\"}return\"\\n\"+Ma+a}var Oa=!1;\nfunction Pa(a,b){if(!a||Oa)return\"\";Oa=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(b)if(b=function(){throw Error();},Object.defineProperty(b.prototype,\"props\",{set:function(){throw Error();}}),\"object\"===typeof Reflect&&Reflect.construct){try{Reflect.construct(b,[])}catch(k){var d=k}Reflect.construct(a,[],b)}else{try{b.call()}catch(k){d=k}a.call(b.prototype)}else{try{throw Error();}catch(k){d=k}a()}}catch(k){if(k&&d&&\"string\"===typeof k.stack){for(var e=k.stack.split(\"\\n\"),\nf=d.stack.split(\"\\n\"),g=e.length-1,h=f.length-1;1<=g&&0<=h&&e[g]!==f[h];)h--;for(;1<=g&&0<=h;g--,h--)if(e[g]!==f[h]){if(1!==g||1!==h){do if(g--,h--,0>h||e[g]!==f[h])return\"\\n\"+e[g].replace(\" at new \",\" at \");while(1<=g&&0<=h)}break}}}finally{Oa=!1,Error.prepareStackTrace=c}return(a=a?a.displayName||a.name:\"\")?Na(a):\"\"}\nfunction Qa(a){switch(a.tag){case 5:return Na(a.type);case 16:return Na(\"Lazy\");case 13:return Na(\"Suspense\");case 19:return Na(\"SuspenseList\");case 0:case 2:case 15:return a=Pa(a.type,!1),a;case 11:return a=Pa(a.type.render,!1),a;case 22:return a=Pa(a.type._render,!1),a;case 1:return a=Pa(a.type,!0),a;default:return\"\"}}\nfunction Ra(a){if(null==a)return null;if(\"function\"===typeof a)return a.displayName||a.name||null;if(\"string\"===typeof a)return a;switch(a){case ua:return\"Fragment\";case ta:return\"Portal\";case xa:return\"Profiler\";case wa:return\"StrictMode\";case Ba:return\"Suspense\";case Ca:return\"SuspenseList\"}if(\"object\"===typeof a)switch(a.$$typeof){case za:return(a.displayName||\"Context\")+\".Consumer\";case ya:return(a._context.displayName||\"Context\")+\".Provider\";case Aa:var b=a.render;b=b.displayName||b.name||\"\";\nreturn a.displayName||(\"\"!==b?\"ForwardRef(\"+b+\")\":\"ForwardRef\");case Da:return Ra(a.type);case Fa:return Ra(a._render);case Ea:b=a._payload;a=a._init;try{return Ra(a(b))}catch(c){}}return null}function Sa(a){switch(typeof a){case \"boolean\":case \"number\":case \"object\":case \"string\":case \"undefined\":return a;default:return\"\"}}function Ta(a){var b=a.type;return(a=a.nodeName)&&\"input\"===a.toLowerCase()&&(\"checkbox\"===b||\"radio\"===b)}\nfunction Ua(a){var b=Ta(a)?\"checked\":\"value\",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,b),d=\"\"+a[b];if(!a.hasOwnProperty(b)&&\"undefined\"!==typeof c&&\"function\"===typeof c.get&&\"function\"===typeof c.set){var e=c.get,f=c.set;Object.defineProperty(a,b,{configurable:!0,get:function(){return e.call(this)},set:function(a){d=\"\"+a;f.call(this,a)}});Object.defineProperty(a,b,{enumerable:c.enumerable});return{getValue:function(){return d},setValue:function(a){d=\"\"+a},stopTracking:function(){a._valueTracker=\nnull;delete a[b]}}}}function Va(a){a._valueTracker||(a._valueTracker=Ua(a))}function Wa(a){if(!a)return!1;var b=a._valueTracker;if(!b)return!0;var c=b.getValue();var d=\"\";a&&(d=Ta(a)?a.checked?\"true\":\"false\":a.value);a=d;return a!==c?(b.setValue(a),!0):!1}function Xa(a){a=a||(\"undefined\"!==typeof document?document:void 0);if(\"undefined\"===typeof a)return null;try{return a.activeElement||a.body}catch(b){return a.body}}\nfunction Ya(a,b){var c=b.checked;return m({},b,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=c?c:a._wrapperState.initialChecked})}function Za(a,b){var c=null==b.defaultValue?\"\":b.defaultValue,d=null!=b.checked?b.checked:b.defaultChecked;c=Sa(null!=b.value?b.value:c);a._wrapperState={initialChecked:d,initialValue:c,controlled:\"checkbox\"===b.type||\"radio\"===b.type?null!=b.checked:null!=b.value}}function $a(a,b){b=b.checked;null!=b&&qa(a,\"checked\",b,!1)}\nfunction ab(a,b){$a(a,b);var c=Sa(b.value),d=b.type;if(null!=c)if(\"number\"===d){if(0===c&&\"\"===a.value||a.value!=c)a.value=\"\"+c}else a.value!==\"\"+c&&(a.value=\"\"+c);else if(\"submit\"===d||\"reset\"===d){a.removeAttribute(\"value\");return}b.hasOwnProperty(\"value\")?bb(a,b.type,c):b.hasOwnProperty(\"defaultValue\")&&bb(a,b.type,Sa(b.defaultValue));null==b.checked&&null!=b.defaultChecked&&(a.defaultChecked=!!b.defaultChecked)}\nfunction cb(a,b,c){if(b.hasOwnProperty(\"value\")||b.hasOwnProperty(\"defaultValue\")){var d=b.type;if(!(\"submit\"!==d&&\"reset\"!==d||void 0!==b.value&&null!==b.value))return;b=\"\"+a._wrapperState.initialValue;c||b===a.value||(a.value=b);a.defaultValue=b}c=a.name;\"\"!==c&&(a.name=\"\");a.defaultChecked=!!a._wrapperState.initialChecked;\"\"!==c&&(a.name=c)}\nfunction bb(a,b,c){if(\"number\"!==b||Xa(a.ownerDocument)!==a)null==c?a.defaultValue=\"\"+a._wrapperState.initialValue:a.defaultValue!==\"\"+c&&(a.defaultValue=\"\"+c)}function db(a){var b=\"\";aa.Children.forEach(a,function(a){null!=a&&(b+=a)});return b}function eb(a,b){a=m({children:void 0},b);if(b=db(b.children))a.children=b;return a}\nfunction fb(a,b,c,d){a=a.options;if(b){b={};for(var e=0;e<c.length;e++)b[\"$\"+c[e]]=!0;for(c=0;c<a.length;c++)e=b.hasOwnProperty(\"$\"+a[c].value),a[c].selected!==e&&(a[c].selected=e),e&&d&&(a[c].defaultSelected=!0)}else{c=\"\"+Sa(c);b=null;for(e=0;e<a.length;e++){if(a[e].value===c){a[e].selected=!0;d&&(a[e].defaultSelected=!0);return}null!==b||a[e].disabled||(b=a[e])}null!==b&&(b.selected=!0)}}\nfunction gb(a,b){if(null!=b.dangerouslySetInnerHTML)throw Error(y(91));return m({},b,{value:void 0,defaultValue:void 0,children:\"\"+a._wrapperState.initialValue})}function hb(a,b){var c=b.value;if(null==c){c=b.children;b=b.defaultValue;if(null!=c){if(null!=b)throw Error(y(92));if(Array.isArray(c)){if(!(1>=c.length))throw Error(y(93));c=c[0]}b=c}null==b&&(b=\"\");c=b}a._wrapperState={initialValue:Sa(c)}}\nfunction ib(a,b){var c=Sa(b.value),d=Sa(b.defaultValue);null!=c&&(c=\"\"+c,c!==a.value&&(a.value=c),null==b.defaultValue&&a.defaultValue!==c&&(a.defaultValue=c));null!=d&&(a.defaultValue=\"\"+d)}function jb(a){var b=a.textContent;b===a._wrapperState.initialValue&&\"\"!==b&&null!==b&&(a.value=b)}var kb={html:\"http://www.w3.org/1999/xhtml\",mathml:\"http://www.w3.org/1998/Math/MathML\",svg:\"http://www.w3.org/2000/svg\"};\nfunction lb(a){switch(a){case \"svg\":return\"http://www.w3.org/2000/svg\";case \"math\":return\"http://www.w3.org/1998/Math/MathML\";default:return\"http://www.w3.org/1999/xhtml\"}}function mb(a,b){return null==a||\"http://www.w3.org/1999/xhtml\"===a?lb(b):\"http://www.w3.org/2000/svg\"===a&&\"foreignObject\"===b?\"http://www.w3.org/1999/xhtml\":a}\nvar nb,ob=function(a){return\"undefined\"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(b,c,d,e){MSApp.execUnsafeLocalFunction(function(){return a(b,c,d,e)})}:a}(function(a,b){if(a.namespaceURI!==kb.svg||\"innerHTML\"in a)a.innerHTML=b;else{nb=nb||document.createElement(\"div\");nb.innerHTML=\"<svg>\"+b.valueOf().toString()+\"</svg>\";for(b=nb.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;b.firstChild;)a.appendChild(b.firstChild)}});\nfunction pb(a,b){if(b){var c=a.firstChild;if(c&&c===a.lastChild&&3===c.nodeType){c.nodeValue=b;return}}a.textContent=b}\nvar qb={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,\nfloodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rb=[\"Webkit\",\"ms\",\"Moz\",\"O\"];Object.keys(qb).forEach(function(a){rb.forEach(function(b){b=b+a.charAt(0).toUpperCase()+a.substring(1);qb[b]=qb[a]})});function sb(a,b,c){return null==b||\"boolean\"===typeof b||\"\"===b?\"\":c||\"number\"!==typeof b||0===b||qb.hasOwnProperty(a)&&qb[a]?(\"\"+b).trim():b+\"px\"}\nfunction tb(a,b){a=a.style;for(var c in b)if(b.hasOwnProperty(c)){var d=0===c.indexOf(\"--\"),e=sb(c,b[c],d);\"float\"===c&&(c=\"cssFloat\");d?a.setProperty(c,e):a[c]=e}}var ub=m({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});\nfunction vb(a,b){if(b){if(ub[a]&&(null!=b.children||null!=b.dangerouslySetInnerHTML))throw Error(y(137,a));if(null!=b.dangerouslySetInnerHTML){if(null!=b.children)throw Error(y(60));if(!(\"object\"===typeof b.dangerouslySetInnerHTML&&\"__html\"in b.dangerouslySetInnerHTML))throw Error(y(61));}if(null!=b.style&&\"object\"!==typeof b.style)throw Error(y(62));}}\nfunction wb(a,b){if(-1===a.indexOf(\"-\"))return\"string\"===typeof b.is;switch(a){case \"annotation-xml\":case \"color-profile\":case \"font-face\":case \"font-face-src\":case \"font-face-uri\":case \"font-face-format\":case \"font-face-name\":case \"missing-glyph\":return!1;default:return!0}}function xb(a){a=a.target||a.srcElement||window;a.correspondingUseElement&&(a=a.correspondingUseElement);return 3===a.nodeType?a.parentNode:a}var yb=null,zb=null,Ab=null;\nfunction Bb(a){if(a=Cb(a)){if(\"function\"!==typeof yb)throw Error(y(280));var b=a.stateNode;b&&(b=Db(b),yb(a.stateNode,a.type,b))}}function Eb(a){zb?Ab?Ab.push(a):Ab=[a]:zb=a}function Fb(){if(zb){var a=zb,b=Ab;Ab=zb=null;Bb(a);if(b)for(a=0;a<b.length;a++)Bb(b[a])}}function Gb(a,b){return a(b)}function Hb(a,b,c,d,e){return a(b,c,d,e)}function Ib(){}var Jb=Gb,Kb=!1,Lb=!1;function Mb(){if(null!==zb||null!==Ab)Ib(),Fb()}\nfunction Nb(a,b,c){if(Lb)return a(b,c);Lb=!0;try{return Jb(a,b,c)}finally{Lb=!1,Mb()}}\nfunction Ob(a,b){var c=a.stateNode;if(null===c)return null;var d=Db(c);if(null===d)return null;c=d[b];a:switch(b){case \"onClick\":case \"onClickCapture\":case \"onDoubleClick\":case \"onDoubleClickCapture\":case \"onMouseDown\":case \"onMouseDownCapture\":case \"onMouseMove\":case \"onMouseMoveCapture\":case \"onMouseUp\":case \"onMouseUpCapture\":case \"onMouseEnter\":(d=!d.disabled)||(a=a.type,d=!(\"button\"===a||\"input\"===a||\"select\"===a||\"textarea\"===a));a=!d;break a;default:a=!1}if(a)return null;if(c&&\"function\"!==\ntypeof c)throw Error(y(231,b,typeof c));return c}var Pb=!1;if(fa)try{var Qb={};Object.defineProperty(Qb,\"passive\",{get:function(){Pb=!0}});window.addEventListener(\"test\",Qb,Qb);window.removeEventListener(\"test\",Qb,Qb)}catch(a){Pb=!1}function Rb(a,b,c,d,e,f,g,h,k){var l=Array.prototype.slice.call(arguments,3);try{b.apply(c,l)}catch(n){this.onError(n)}}var Sb=!1,Tb=null,Ub=!1,Vb=null,Wb={onError:function(a){Sb=!0;Tb=a}};function Xb(a,b,c,d,e,f,g,h,k){Sb=!1;Tb=null;Rb.apply(Wb,arguments)}\nfunction Yb(a,b,c,d,e,f,g,h,k){Xb.apply(this,arguments);if(Sb){if(Sb){var l=Tb;Sb=!1;Tb=null}else throw Error(y(198));Ub||(Ub=!0,Vb=l)}}function Zb(a){var b=a,c=a;if(a.alternate)for(;b.return;)b=b.return;else{a=b;do b=a,0!==(b.flags&1026)&&(c=b.return),a=b.return;while(a)}return 3===b.tag?c:null}function $b(a){if(13===a.tag){var b=a.memoizedState;null===b&&(a=a.alternate,null!==a&&(b=a.memoizedState));if(null!==b)return b.dehydrated}return null}function ac(a){if(Zb(a)!==a)throw Error(y(188));}\nfunction bc(a){var b=a.alternate;if(!b){b=Zb(a);if(null===b)throw Error(y(188));return b!==a?null:a}for(var c=a,d=b;;){var e=c.return;if(null===e)break;var f=e.alternate;if(null===f){d=e.return;if(null!==d){c=d;continue}break}if(e.child===f.child){for(f=e.child;f;){if(f===c)return ac(e),a;if(f===d)return ac(e),b;f=f.sibling}throw Error(y(188));}if(c.return!==d.return)c=e,d=f;else{for(var g=!1,h=e.child;h;){if(h===c){g=!0;c=e;d=f;break}if(h===d){g=!0;d=e;c=f;break}h=h.sibling}if(!g){for(h=f.child;h;){if(h===\nc){g=!0;c=f;d=e;break}if(h===d){g=!0;d=f;c=e;break}h=h.sibling}if(!g)throw Error(y(189));}}if(c.alternate!==d)throw Error(y(190));}if(3!==c.tag)throw Error(y(188));return c.stateNode.current===c?a:b}function cc(a){a=bc(a);if(!a)return null;for(var b=a;;){if(5===b.tag||6===b.tag)return b;if(b.child)b.child.return=b,b=b.child;else{if(b===a)break;for(;!b.sibling;){if(!b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}}return null}\nfunction dc(a,b){for(var c=a.alternate;null!==b;){if(b===a||b===c)return!0;b=b.return}return!1}var ec,fc,gc,hc,ic=!1,jc=[],kc=null,lc=null,mc=null,nc=new Map,oc=new Map,pc=[],qc=\"mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit\".split(\" \");\nfunction rc(a,b,c,d,e){return{blockedOn:a,domEventName:b,eventSystemFlags:c|16,nativeEvent:e,targetContainers:[d]}}function sc(a,b){switch(a){case \"focusin\":case \"focusout\":kc=null;break;case \"dragenter\":case \"dragleave\":lc=null;break;case \"mouseover\":case \"mouseout\":mc=null;break;case \"pointerover\":case \"pointerout\":nc.delete(b.pointerId);break;case \"gotpointercapture\":case \"lostpointercapture\":oc.delete(b.pointerId)}}\nfunction tc(a,b,c,d,e,f){if(null===a||a.nativeEvent!==f)return a=rc(b,c,d,e,f),null!==b&&(b=Cb(b),null!==b&&fc(b)),a;a.eventSystemFlags|=d;b=a.targetContainers;null!==e&&-1===b.indexOf(e)&&b.push(e);return a}\nfunction uc(a,b,c,d,e){switch(b){case \"focusin\":return kc=tc(kc,a,b,c,d,e),!0;case \"dragenter\":return lc=tc(lc,a,b,c,d,e),!0;case \"mouseover\":return mc=tc(mc,a,b,c,d,e),!0;case \"pointerover\":var f=e.pointerId;nc.set(f,tc(nc.get(f)||null,a,b,c,d,e));return!0;case \"gotpointercapture\":return f=e.pointerId,oc.set(f,tc(oc.get(f)||null,a,b,c,d,e)),!0}return!1}\nfunction vc(a){var b=wc(a.target);if(null!==b){var c=Zb(b);if(null!==c)if(b=c.tag,13===b){if(b=$b(c),null!==b){a.blockedOn=b;hc(a.lanePriority,function(){r.unstable_runWithPriority(a.priority,function(){gc(c)})});return}}else if(3===b&&c.stateNode.hydrate){a.blockedOn=3===c.tag?c.stateNode.containerInfo:null;return}}a.blockedOn=null}\nfunction xc(a){if(null!==a.blockedOn)return!1;for(var b=a.targetContainers;0<b.length;){var c=yc(a.domEventName,a.eventSystemFlags,b[0],a.nativeEvent);if(null!==c)return b=Cb(c),null!==b&&fc(b),a.blockedOn=c,!1;b.shift()}return!0}function zc(a,b,c){xc(a)&&c.delete(b)}\nfunction Ac(){for(ic=!1;0<jc.length;){var a=jc[0];if(null!==a.blockedOn){a=Cb(a.blockedOn);null!==a&&ec(a);break}for(var b=a.targetContainers;0<b.length;){var c=yc(a.domEventName,a.eventSystemFlags,b[0],a.nativeEvent);if(null!==c){a.blockedOn=c;break}b.shift()}null===a.blockedOn&&jc.shift()}null!==kc&&xc(kc)&&(kc=null);null!==lc&&xc(lc)&&(lc=null);null!==mc&&xc(mc)&&(mc=null);nc.forEach(zc);oc.forEach(zc)}\nfunction Bc(a,b){a.blockedOn===b&&(a.blockedOn=null,ic||(ic=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ac)))}\nfunction Cc(a){function b(b){return Bc(b,a)}if(0<jc.length){Bc(jc[0],a);for(var c=1;c<jc.length;c++){var d=jc[c];d.blockedOn===a&&(d.blockedOn=null)}}null!==kc&&Bc(kc,a);null!==lc&&Bc(lc,a);null!==mc&&Bc(mc,a);nc.forEach(b);oc.forEach(b);for(c=0;c<pc.length;c++)d=pc[c],d.blockedOn===a&&(d.blockedOn=null);for(;0<pc.length&&(c=pc[0],null===c.blockedOn);)vc(c),null===c.blockedOn&&pc.shift()}\nfunction Dc(a,b){var c={};c[a.toLowerCase()]=b.toLowerCase();c[\"Webkit\"+a]=\"webkit\"+b;c[\"Moz\"+a]=\"moz\"+b;return c}var Ec={animationend:Dc(\"Animation\",\"AnimationEnd\"),animationiteration:Dc(\"Animation\",\"AnimationIteration\"),animationstart:Dc(\"Animation\",\"AnimationStart\"),transitionend:Dc(\"Transition\",\"TransitionEnd\")},Fc={},Gc={};\nfa&&(Gc=document.createElement(\"div\").style,\"AnimationEvent\"in window||(delete Ec.animationend.animation,delete Ec.animationiteration.animation,delete Ec.animationstart.animation),\"TransitionEvent\"in window||delete Ec.transitionend.transition);function Hc(a){if(Fc[a])return Fc[a];if(!Ec[a])return a;var b=Ec[a],c;for(c in b)if(b.hasOwnProperty(c)&&c in Gc)return Fc[a]=b[c];return a}\nvar Ic=Hc(\"animationend\"),Jc=Hc(\"animationiteration\"),Kc=Hc(\"animationstart\"),Lc=Hc(\"transitionend\"),Mc=new Map,Nc=new Map,Oc=[\"abort\",\"abort\",Ic,\"animationEnd\",Jc,\"animationIteration\",Kc,\"animationStart\",\"canplay\",\"canPlay\",\"canplaythrough\",\"canPlayThrough\",\"durationchange\",\"durationChange\",\"emptied\",\"emptied\",\"encrypted\",\"encrypted\",\"ended\",\"ended\",\"error\",\"error\",\"gotpointercapture\",\"gotPointerCapture\",\"load\",\"load\",\"loadeddata\",\"loadedData\",\"loadedmetadata\",\"loadedMetadata\",\"loadstart\",\"loadStart\",\n\"lostpointercapture\",\"lostPointerCapture\",\"playing\",\"playing\",\"progress\",\"progress\",\"seeking\",\"seeking\",\"stalled\",\"stalled\",\"suspend\",\"suspend\",\"timeupdate\",\"timeUpdate\",Lc,\"transitionEnd\",\"waiting\",\"waiting\"];function Pc(a,b){for(var c=0;c<a.length;c+=2){var d=a[c],e=a[c+1];e=\"on\"+(e[0].toUpperCase()+e.slice(1));Nc.set(d,b);Mc.set(d,e);da(e,[d])}}var Qc=r.unstable_now;Qc();var F=8;\nfunction Rc(a){if(0!==(1&a))return F=15,1;if(0!==(2&a))return F=14,2;if(0!==(4&a))return F=13,4;var b=24&a;if(0!==b)return F=12,b;if(0!==(a&32))return F=11,32;b=192&a;if(0!==b)return F=10,b;if(0!==(a&256))return F=9,256;b=3584&a;if(0!==b)return F=8,b;if(0!==(a&4096))return F=7,4096;b=4186112&a;if(0!==b)return F=6,b;b=62914560&a;if(0!==b)return F=5,b;if(a&67108864)return F=4,67108864;if(0!==(a&134217728))return F=3,134217728;b=805306368&a;if(0!==b)return F=2,b;if(0!==(1073741824&a))return F=1,1073741824;\nF=8;return a}function Sc(a){switch(a){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function Tc(a){switch(a){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(y(358,a));}}\nfunction Uc(a,b){var c=a.pendingLanes;if(0===c)return F=0;var d=0,e=0,f=a.expiredLanes,g=a.suspendedLanes,h=a.pingedLanes;if(0!==f)d=f,e=F=15;else if(f=c&134217727,0!==f){var k=f&~g;0!==k?(d=Rc(k),e=F):(h&=f,0!==h&&(d=Rc(h),e=F))}else f=c&~g,0!==f?(d=Rc(f),e=F):0!==h&&(d=Rc(h),e=F);if(0===d)return 0;d=31-Vc(d);d=c&((0>d?0:1<<d)<<1)-1;if(0!==b&&b!==d&&0===(b&g)){Rc(b);if(e<=F)return b;F=e}b=a.entangledLanes;if(0!==b)for(a=a.entanglements,b&=d;0<b;)c=31-Vc(b),e=1<<c,d|=a[c],b&=~e;return d}\nfunction Wc(a){a=a.pendingLanes&-1073741825;return 0!==a?a:a&1073741824?1073741824:0}function Xc(a,b){switch(a){case 15:return 1;case 14:return 2;case 12:return a=Yc(24&~b),0===a?Xc(10,b):a;case 10:return a=Yc(192&~b),0===a?Xc(8,b):a;case 8:return a=Yc(3584&~b),0===a&&(a=Yc(4186112&~b),0===a&&(a=512)),a;case 2:return b=Yc(805306368&~b),0===b&&(b=268435456),b}throw Error(y(358,a));}function Yc(a){return a&-a}function Zc(a){for(var b=[],c=0;31>c;c++)b.push(a);return b}\nfunction $c(a,b,c){a.pendingLanes|=b;var d=b-1;a.suspendedLanes&=d;a.pingedLanes&=d;a=a.eventTimes;b=31-Vc(b);a[b]=c}var Vc=Math.clz32?Math.clz32:ad,bd=Math.log,cd=Math.LN2;function ad(a){return 0===a?32:31-(bd(a)/cd|0)|0}var dd=r.unstable_UserBlockingPriority,ed=r.unstable_runWithPriority,fd=!0;function gd(a,b,c,d){Kb||Ib();var e=hd,f=Kb;Kb=!0;try{Hb(e,a,b,c,d)}finally{(Kb=f)||Mb()}}function id(a,b,c,d){ed(dd,hd.bind(null,a,b,c,d))}\nfunction hd(a,b,c,d){if(fd){var e;if((e=0===(b&4))&&0<jc.length&&-1<qc.indexOf(a))a=rc(null,a,b,c,d),jc.push(a);else{var f=yc(a,b,c,d);if(null===f)e&&sc(a,d);else{if(e){if(-1<qc.indexOf(a)){a=rc(f,a,b,c,d);jc.push(a);return}if(uc(f,a,b,c,d))return;sc(a,d)}jd(a,b,d,null,c)}}}}\nfunction yc(a,b,c,d){var e=xb(d);e=wc(e);if(null!==e){var f=Zb(e);if(null===f)e=null;else{var g=f.tag;if(13===g){e=$b(f);if(null!==e)return e;e=null}else if(3===g){if(f.stateNode.hydrate)return 3===f.tag?f.stateNode.containerInfo:null;e=null}else f!==e&&(e=null)}}jd(a,b,d,e,c);return null}var kd=null,ld=null,md=null;\nfunction nd(){if(md)return md;var a,b=ld,c=b.length,d,e=\"value\"in kd?kd.value:kd.textContent,f=e.length;for(a=0;a<c&&b[a]===e[a];a++);var g=c-a;for(d=1;d<=g&&b[c-d]===e[f-d];d++);return md=e.slice(a,1<d?1-d:void 0)}function od(a){var b=a.keyCode;\"charCode\"in a?(a=a.charCode,0===a&&13===b&&(a=13)):a=b;10===a&&(a=13);return 32<=a||13===a?a:0}function pd(){return!0}function qd(){return!1}\nfunction rd(a){function b(b,d,e,f,g){this._reactName=b;this._targetInst=e;this.type=d;this.nativeEvent=f;this.target=g;this.currentTarget=null;for(var c in a)a.hasOwnProperty(c)&&(b=a[c],this[c]=b?b(f):f[c]);this.isDefaultPrevented=(null!=f.defaultPrevented?f.defaultPrevented:!1===f.returnValue)?pd:qd;this.isPropagationStopped=qd;return this}m(b.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():\"unknown\"!==typeof a.returnValue&&\n(a.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():\"unknown\"!==typeof a.cancelBubble&&(a.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd});return b}\nvar sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=m({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=m({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(a){return void 0===a.relatedTarget?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){if(\"movementX\"in\na)return a.movementX;a!==yd&&(yd&&\"mousemove\"===a.type?(wd=a.screenX-yd.screenX,xd=a.screenY-yd.screenY):xd=wd=0,yd=a);return wd},movementY:function(a){return\"movementY\"in a?a.movementY:xd}}),Bd=rd(Ad),Cd=m({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=m({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=m({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=m({},sd,{clipboardData:function(a){return\"clipboardData\"in a?a.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=m({},sd,{data:0}),Ld=rd(Kd),Md={Esc:\"Escape\",\nSpacebar:\" \",Left:\"ArrowLeft\",Up:\"ArrowUp\",Right:\"ArrowRight\",Down:\"ArrowDown\",Del:\"Delete\",Win:\"OS\",Menu:\"ContextMenu\",Apps:\"ContextMenu\",Scroll:\"ScrollLock\",MozPrintableKey:\"Unidentified\"},Nd={8:\"Backspace\",9:\"Tab\",12:\"Clear\",13:\"Enter\",16:\"Shift\",17:\"Control\",18:\"Alt\",19:\"Pause\",20:\"CapsLock\",27:\"Escape\",32:\" \",33:\"PageUp\",34:\"PageDown\",35:\"End\",36:\"Home\",37:\"ArrowLeft\",38:\"ArrowUp\",39:\"ArrowRight\",40:\"ArrowDown\",45:\"Insert\",46:\"Delete\",112:\"F1\",113:\"F2\",114:\"F3\",115:\"F4\",116:\"F5\",117:\"F6\",118:\"F7\",\n119:\"F8\",120:\"F9\",121:\"F10\",122:\"F11\",123:\"F12\",144:\"NumLock\",145:\"ScrollLock\",224:\"Meta\"},Od={Alt:\"altKey\",Control:\"ctrlKey\",Meta:\"metaKey\",Shift:\"shiftKey\"};function Pd(a){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(a):(a=Od[a])?!!b[a]:!1}function zd(){return Pd}\nvar Qd=m({},ud,{key:function(a){if(a.key){var b=Md[a.key]||a.key;if(\"Unidentified\"!==b)return b}return\"keypress\"===a.type?(a=od(a),13===a?\"Enter\":String.fromCharCode(a)):\"keydown\"===a.type||\"keyup\"===a.type?Nd[a.keyCode]||\"Unidentified\":\"\"},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(a){return\"keypress\"===a.type?od(a):0},keyCode:function(a){return\"keydown\"===a.type||\"keyup\"===a.type?a.keyCode:0},which:function(a){return\"keypress\"===\na.type?od(a):\"keydown\"===a.type||\"keyup\"===a.type?a.keyCode:0}}),Rd=rd(Qd),Sd=m({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=m({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=m({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=m({},Ad,{deltaX:function(a){return\"deltaX\"in a?a.deltaX:\"wheelDeltaX\"in a?-a.wheelDeltaX:0},\ndeltaY:function(a){return\"deltaY\"in a?a.deltaY:\"wheelDeltaY\"in a?-a.wheelDeltaY:\"wheelDelta\"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=fa&&\"CompositionEvent\"in window,be=null;fa&&\"documentMode\"in document&&(be=document.documentMode);var ce=fa&&\"TextEvent\"in window&&!be,de=fa&&(!ae||be&&8<be&&11>=be),ee=String.fromCharCode(32),fe=!1;\nfunction ge(a,b){switch(a){case \"keyup\":return-1!==$d.indexOf(b.keyCode);case \"keydown\":return 229!==b.keyCode;case \"keypress\":case \"mousedown\":case \"focusout\":return!0;default:return!1}}function he(a){a=a.detail;return\"object\"===typeof a&&\"data\"in a?a.data:null}var ie=!1;function je(a,b){switch(a){case \"compositionend\":return he(b);case \"keypress\":if(32!==b.which)return null;fe=!0;return ee;case \"textInput\":return a=b.data,a===ee&&fe?null:a;default:return null}}\nfunction ke(a,b){if(ie)return\"compositionend\"===a||!ae&&ge(a,b)?(a=nd(),md=ld=kd=null,ie=!1,a):null;switch(a){case \"paste\":return null;case \"keypress\":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;case \"compositionend\":return de&&\"ko\"!==b.locale?null:b.data;default:return null}}\nvar le={color:!0,date:!0,datetime:!0,\"datetime-local\":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return\"input\"===b?!!le[a.type]:\"textarea\"===b?!0:!1}function ne(a,b,c,d){Eb(d);b=oe(b,\"onChange\");0<b.length&&(c=new td(\"onChange\",\"change\",null,c,d),a.push({event:c,listeners:b}))}var pe=null,qe=null;function re(a){se(a,0)}function te(a){var b=ue(a);if(Wa(b))return a}\nfunction ve(a,b){if(\"change\"===a)return b}var we=!1;if(fa){var xe;if(fa){var ye=\"oninput\"in document;if(!ye){var ze=document.createElement(\"div\");ze.setAttribute(\"oninput\",\"return;\");ye=\"function\"===typeof ze.oninput}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent(\"onpropertychange\",Be),qe=pe=null)}function Be(a){if(\"value\"===a.propertyName&&te(qe)){var b=[];ne(b,qe,a,xb(a));a=re;if(Kb)a(b);else{Kb=!0;try{Gb(a,b)}finally{Kb=!1,Mb()}}}}\nfunction Ce(a,b,c){\"focusin\"===a?(Ae(),pe=b,qe=c,pe.attachEvent(\"onpropertychange\",Be)):\"focusout\"===a&&Ae()}function De(a){if(\"selectionchange\"===a||\"keyup\"===a||\"keydown\"===a)return te(qe)}function Ee(a,b){if(\"click\"===a)return te(b)}function Fe(a,b){if(\"input\"===a||\"change\"===a)return te(b)}function Ge(a,b){return a===b&&(0!==a||1/a===1/b)||a!==a&&b!==b}var He=\"function\"===typeof Object.is?Object.is:Ge,Ie=Object.prototype.hasOwnProperty;\nfunction Je(a,b){if(He(a,b))return!0;if(\"object\"!==typeof a||null===a||\"object\"!==typeof b||null===b)return!1;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++)if(!Ie.call(b,c[d])||!He(a[c[d]],b[c[d]]))return!1;return!0}function Ke(a){for(;a&&a.firstChild;)a=a.firstChild;return a}\nfunction Le(a,b){var c=Ke(a);a=0;for(var d;c;){if(3===c.nodeType){d=a+c.textContent.length;if(a<=b&&d>=b)return{node:c,offset:b-a};a=d}a:{for(;c;){if(c.nextSibling){c=c.nextSibling;break a}c=c.parentNode}c=void 0}c=Ke(c)}}function Me(a,b){return a&&b?a===b?!0:a&&3===a.nodeType?!1:b&&3===b.nodeType?Me(a,b.parentNode):\"contains\"in a?a.contains(b):a.compareDocumentPosition?!!(a.compareDocumentPosition(b)&16):!1:!1}\nfunction Ne(){for(var a=window,b=Xa();b instanceof a.HTMLIFrameElement;){try{var c=\"string\"===typeof b.contentWindow.location.href}catch(d){c=!1}if(c)a=b.contentWindow;else break;b=Xa(a.document)}return b}function Oe(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return b&&(\"input\"===b&&(\"text\"===a.type||\"search\"===a.type||\"tel\"===a.type||\"url\"===a.type||\"password\"===a.type)||\"textarea\"===b||\"true\"===a.contentEditable)}\nvar Pe=fa&&\"documentMode\"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;\nfunction Ue(a,b,c){var d=c.window===c?c.document:9===c.nodeType?c:c.ownerDocument;Te||null==Qe||Qe!==Xa(d)||(d=Qe,\"selectionStart\"in d&&Oe(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Se&&Je(Se,d)||(Se=d,d=oe(Re,\"onSelect\"),0<d.length&&(b=new td(\"onSelect\",\"select\",null,b,c),a.push({event:b,listeners:d}),b.target=Qe)))}\nPc(\"cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange\".split(\" \"),\n0);Pc(\"drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel\".split(\" \"),1);Pc(Oc,2);for(var Ve=\"change selectionchange textInput compositionstart compositionend compositionupdate\".split(\" \"),We=0;We<Ve.length;We++)Nc.set(Ve[We],0);ea(\"onMouseEnter\",[\"mouseout\",\"mouseover\"]);\nea(\"onMouseLeave\",[\"mouseout\",\"mouseover\"]);ea(\"onPointerEnter\",[\"pointerout\",\"pointerover\"]);ea(\"onPointerLeave\",[\"pointerout\",\"pointerover\"]);da(\"onChange\",\"change click focusin focusout input keydown keyup selectionchange\".split(\" \"));da(\"onSelect\",\"focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange\".split(\" \"));da(\"onBeforeInput\",[\"compositionend\",\"keypress\",\"textInput\",\"paste\"]);da(\"onCompositionEnd\",\"compositionend focusout keydown keypress keyup mousedown\".split(\" \"));\nda(\"onCompositionStart\",\"compositionstart focusout keydown keypress keyup mousedown\".split(\" \"));da(\"onCompositionUpdate\",\"compositionupdate focusout keydown keypress keyup mousedown\".split(\" \"));var Xe=\"abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting\".split(\" \"),Ye=new Set(\"cancel close invalid load scroll toggle\".split(\" \").concat(Xe));\nfunction Ze(a,b,c){var d=a.type||\"unknown-event\";a.currentTarget=c;Yb(d,b,void 0,a);a.currentTarget=null}\nfunction se(a,b){b=0!==(b&4);for(var c=0;c<a.length;c++){var d=a[c],e=d.event;d=d.listeners;a:{var f=void 0;if(b)for(var g=d.length-1;0<=g;g--){var h=d[g],k=h.instance,l=h.currentTarget;h=h.listener;if(k!==f&&e.isPropagationStopped())break a;Ze(e,h,l);f=k}else for(g=0;g<d.length;g++){h=d[g];k=h.instance;l=h.currentTarget;h=h.listener;if(k!==f&&e.isPropagationStopped())break a;Ze(e,h,l);f=k}}}if(Ub)throw a=Vb,Ub=!1,Vb=null,a;}\nfunction G(a,b){var c=$e(b),d=a+\"__bubble\";c.has(d)||(af(b,a,2,!1),c.add(d))}var bf=\"_reactListening\"+Math.random().toString(36).slice(2);function cf(a){a[bf]||(a[bf]=!0,ba.forEach(function(b){Ye.has(b)||df(b,!1,a,null);df(b,!0,a,null)}))}\nfunction df(a,b,c,d){var e=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,f=c;\"selectionchange\"===a&&9!==c.nodeType&&(f=c.ownerDocument);if(null!==d&&!b&&Ye.has(a)){if(\"scroll\"!==a)return;e|=2;f=d}var g=$e(f),h=a+\"__\"+(b?\"capture\":\"bubble\");g.has(h)||(b&&(e|=4),af(f,a,e,b),g.add(h))}\nfunction af(a,b,c,d){var e=Nc.get(b);switch(void 0===e?2:e){case 0:e=gd;break;case 1:e=id;break;default:e=hd}c=e.bind(null,b,c,a);e=void 0;!Pb||\"touchstart\"!==b&&\"touchmove\"!==b&&\"wheel\"!==b||(e=!0);d?void 0!==e?a.addEventListener(b,c,{capture:!0,passive:e}):a.addEventListener(b,c,!0):void 0!==e?a.addEventListener(b,c,{passive:e}):a.addEventListener(b,c,!1)}\nfunction jd(a,b,c,d,e){var f=d;if(0===(b&1)&&0===(b&2)&&null!==d)a:for(;;){if(null===d)return;var g=d.tag;if(3===g||4===g){var h=d.stateNode.containerInfo;if(h===e||8===h.nodeType&&h.parentNode===e)break;if(4===g)for(g=d.return;null!==g;){var k=g.tag;if(3===k||4===k)if(k=g.stateNode.containerInfo,k===e||8===k.nodeType&&k.parentNode===e)return;g=g.return}for(;null!==h;){g=wc(h);if(null===g)return;k=g.tag;if(5===k||6===k){d=f=g;continue a}h=h.parentNode}}d=d.return}Nb(function(){var d=f,e=xb(c),g=[];\na:{var h=Mc.get(a);if(void 0!==h){var k=td,x=a;switch(a){case \"keypress\":if(0===od(c))break a;case \"keydown\":case \"keyup\":k=Rd;break;case \"focusin\":x=\"focus\";k=Fd;break;case \"focusout\":x=\"blur\";k=Fd;break;case \"beforeblur\":case \"afterblur\":k=Fd;break;case \"click\":if(2===c.button)break a;case \"auxclick\":case \"dblclick\":case \"mousedown\":case \"mousemove\":case \"mouseup\":case \"mouseout\":case \"mouseover\":case \"contextmenu\":k=Bd;break;case \"drag\":case \"dragend\":case \"dragenter\":case \"dragexit\":case \"dragleave\":case \"dragover\":case \"dragstart\":case \"drop\":k=\nDd;break;case \"touchcancel\":case \"touchend\":case \"touchmove\":case \"touchstart\":k=Vd;break;case Ic:case Jc:case Kc:k=Hd;break;case Lc:k=Xd;break;case \"scroll\":k=vd;break;case \"wheel\":k=Zd;break;case \"copy\":case \"cut\":case \"paste\":k=Jd;break;case \"gotpointercapture\":case \"lostpointercapture\":case \"pointercancel\":case \"pointerdown\":case \"pointermove\":case \"pointerout\":case \"pointerover\":case \"pointerup\":k=Td}var w=0!==(b&4),z=!w&&\"scroll\"===a,u=w?null!==h?h+\"Capture\":null:h;w=[];for(var t=d,q;null!==\nt;){q=t;var v=q.stateNode;5===q.tag&&null!==v&&(q=v,null!==u&&(v=Ob(t,u),null!=v&&w.push(ef(t,v,q))));if(z)break;t=t.return}0<w.length&&(h=new k(h,x,null,c,e),g.push({event:h,listeners:w}))}}if(0===(b&7)){a:{h=\"mouseover\"===a||\"pointerover\"===a;k=\"mouseout\"===a||\"pointerout\"===a;if(h&&0===(b&16)&&(x=c.relatedTarget||c.fromElement)&&(wc(x)||x[ff]))break a;if(k||h){h=e.window===e?e:(h=e.ownerDocument)?h.defaultView||h.parentWindow:window;if(k){if(x=c.relatedTarget||c.toElement,k=d,x=x?wc(x):null,null!==\nx&&(z=Zb(x),x!==z||5!==x.tag&&6!==x.tag))x=null}else k=null,x=d;if(k!==x){w=Bd;v=\"onMouseLeave\";u=\"onMouseEnter\";t=\"mouse\";if(\"pointerout\"===a||\"pointerover\"===a)w=Td,v=\"onPointerLeave\",u=\"onPointerEnter\",t=\"pointer\";z=null==k?h:ue(k);q=null==x?h:ue(x);h=new w(v,t+\"leave\",k,c,e);h.target=z;h.relatedTarget=q;v=null;wc(e)===d&&(w=new w(u,t+\"enter\",x,c,e),w.target=q,w.relatedTarget=z,v=w);z=v;if(k&&x)b:{w=k;u=x;t=0;for(q=w;q;q=gf(q))t++;q=0;for(v=u;v;v=gf(v))q++;for(;0<t-q;)w=gf(w),t--;for(;0<q-t;)u=\ngf(u),q--;for(;t--;){if(w===u||null!==u&&w===u.alternate)break b;w=gf(w);u=gf(u)}w=null}else w=null;null!==k&&hf(g,h,k,w,!1);null!==x&&null!==z&&hf(g,z,x,w,!0)}}}a:{h=d?ue(d):window;k=h.nodeName&&h.nodeName.toLowerCase();if(\"select\"===k||\"input\"===k&&\"file\"===h.type)var J=ve;else if(me(h))if(we)J=Fe;else{J=De;var K=Ce}else(k=h.nodeName)&&\"input\"===k.toLowerCase()&&(\"checkbox\"===h.type||\"radio\"===h.type)&&(J=Ee);if(J&&(J=J(a,d))){ne(g,J,c,e);break a}K&&K(a,h,d);\"focusout\"===a&&(K=h._wrapperState)&&\nK.controlled&&\"number\"===h.type&&bb(h,\"number\",h.value)}K=d?ue(d):window;switch(a){case \"focusin\":if(me(K)||\"true\"===K.contentEditable)Qe=K,Re=d,Se=null;break;case \"focusout\":Se=Re=Qe=null;break;case \"mousedown\":Te=!0;break;case \"contextmenu\":case \"mouseup\":case \"dragend\":Te=!1;Ue(g,c,e);break;case \"selectionchange\":if(Pe)break;case \"keydown\":case \"keyup\":Ue(g,c,e)}var Q;if(ae)b:{switch(a){case \"compositionstart\":var L=\"onCompositionStart\";break b;case \"compositionend\":L=\"onCompositionEnd\";break b;\ncase \"compositionupdate\":L=\"onCompositionUpdate\";break b}L=void 0}else ie?ge(a,c)&&(L=\"onCompositionEnd\"):\"keydown\"===a&&229===c.keyCode&&(L=\"onCompositionStart\");L&&(de&&\"ko\"!==c.locale&&(ie||\"onCompositionStart\"!==L?\"onCompositionEnd\"===L&&ie&&(Q=nd()):(kd=e,ld=\"value\"in kd?kd.value:kd.textContent,ie=!0)),K=oe(d,L),0<K.length&&(L=new Ld(L,a,null,c,e),g.push({event:L,listeners:K}),Q?L.data=Q:(Q=he(c),null!==Q&&(L.data=Q))));if(Q=ce?je(a,c):ke(a,c))d=oe(d,\"onBeforeInput\"),0<d.length&&(e=new Ld(\"onBeforeInput\",\n\"beforeinput\",null,c,e),g.push({event:e,listeners:d}),e.data=Q)}se(g,b)})}function ef(a,b,c){return{instance:a,listener:b,currentTarget:c}}function oe(a,b){for(var c=b+\"Capture\",d=[];null!==a;){var e=a,f=e.stateNode;5===e.tag&&null!==f&&(e=f,f=Ob(a,c),null!=f&&d.unshift(ef(a,f,e)),f=Ob(a,b),null!=f&&d.push(ef(a,f,e)));a=a.return}return d}function gf(a){if(null===a)return null;do a=a.return;while(a&&5!==a.tag);return a?a:null}\nfunction hf(a,b,c,d,e){for(var f=b._reactName,g=[];null!==c&&c!==d;){var h=c,k=h.alternate,l=h.stateNode;if(null!==k&&k===d)break;5===h.tag&&null!==l&&(h=l,e?(k=Ob(c,f),null!=k&&g.unshift(ef(c,k,h))):e||(k=Ob(c,f),null!=k&&g.push(ef(c,k,h))));c=c.return}0!==g.length&&a.push({event:b,listeners:g})}function jf(){}var kf=null,lf=null;function mf(a,b){switch(a){case \"button\":case \"input\":case \"select\":case \"textarea\":return!!b.autoFocus}return!1}\nfunction nf(a,b){return\"textarea\"===a||\"option\"===a||\"noscript\"===a||\"string\"===typeof b.children||\"number\"===typeof b.children||\"object\"===typeof b.dangerouslySetInnerHTML&&null!==b.dangerouslySetInnerHTML&&null!=b.dangerouslySetInnerHTML.__html}var of=\"function\"===typeof setTimeout?setTimeout:void 0,pf=\"function\"===typeof clearTimeout?clearTimeout:void 0;function qf(a){1===a.nodeType?a.textContent=\"\":9===a.nodeType&&(a=a.body,null!=a&&(a.textContent=\"\"))}\nfunction rf(a){for(;null!=a;a=a.nextSibling){var b=a.nodeType;if(1===b||3===b)break}return a}function sf(a){a=a.previousSibling;for(var b=0;a;){if(8===a.nodeType){var c=a.data;if(\"$\"===c||\"$!\"===c||\"$?\"===c){if(0===b)return a;b--}else\"/$\"===c&&b++}a=a.previousSibling}return null}var tf=0;function uf(a){return{$$typeof:Ga,toString:a,valueOf:a}}var vf=Math.random().toString(36).slice(2),wf=\"__reactFiber$\"+vf,xf=\"__reactProps$\"+vf,ff=\"__reactContainer$\"+vf,yf=\"__reactEvents$\"+vf;\nfunction wc(a){var b=a[wf];if(b)return b;for(var c=a.parentNode;c;){if(b=c[ff]||c[wf]){c=b.alternate;if(null!==b.child||null!==c&&null!==c.child)for(a=sf(a);null!==a;){if(c=a[wf])return c;a=sf(a)}return b}a=c;c=a.parentNode}return null}function Cb(a){a=a[wf]||a[ff];return!a||5!==a.tag&&6!==a.tag&&13!==a.tag&&3!==a.tag?null:a}function ue(a){if(5===a.tag||6===a.tag)return a.stateNode;throw Error(y(33));}function Db(a){return a[xf]||null}\nfunction $e(a){var b=a[yf];void 0===b&&(b=a[yf]=new Set);return b}var zf=[],Af=-1;function Bf(a){return{current:a}}function H(a){0>Af||(a.current=zf[Af],zf[Af]=null,Af--)}function I(a,b){Af++;zf[Af]=a.current;a.current=b}var Cf={},M=Bf(Cf),N=Bf(!1),Df=Cf;\nfunction Ef(a,b){var c=a.type.contextTypes;if(!c)return Cf;var d=a.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===b)return d.__reactInternalMemoizedMaskedChildContext;var e={},f;for(f in c)e[f]=b[f];d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=e);return e}function Ff(a){a=a.childContextTypes;return null!==a&&void 0!==a}function Gf(){H(N);H(M)}function Hf(a,b,c){if(M.current!==Cf)throw Error(y(168));I(M,b);I(N,c)}\nfunction If(a,b,c){var d=a.stateNode;a=b.childContextTypes;if(\"function\"!==typeof d.getChildContext)return c;d=d.getChildContext();for(var e in d)if(!(e in a))throw Error(y(108,Ra(b)||\"Unknown\",e));return m({},c,d)}function Jf(a){a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Cf;Df=M.current;I(M,a);I(N,N.current);return!0}function Kf(a,b,c){var d=a.stateNode;if(!d)throw Error(y(169));c?(a=If(a,b,Df),d.__reactInternalMemoizedMergedChildContext=a,H(N),H(M),I(M,a)):H(N);I(N,c)}\nvar Lf=null,Mf=null,Nf=r.unstable_runWithPriority,Of=r.unstable_scheduleCallback,Pf=r.unstable_cancelCallback,Qf=r.unstable_shouldYield,Rf=r.unstable_requestPaint,Sf=r.unstable_now,Tf=r.unstable_getCurrentPriorityLevel,Uf=r.unstable_ImmediatePriority,Vf=r.unstable_UserBlockingPriority,Wf=r.unstable_NormalPriority,Xf=r.unstable_LowPriority,Yf=r.unstable_IdlePriority,Zf={},$f=void 0!==Rf?Rf:function(){},ag=null,bg=null,cg=!1,dg=Sf(),O=1E4>dg?Sf:function(){return Sf()-dg};\nfunction eg(){switch(Tf()){case Uf:return 99;case Vf:return 98;case Wf:return 97;case Xf:return 96;case Yf:return 95;default:throw Error(y(332));}}function fg(a){switch(a){case 99:return Uf;case 98:return Vf;case 97:return Wf;case 96:return Xf;case 95:return Yf;default:throw Error(y(332));}}function gg(a,b){a=fg(a);return Nf(a,b)}function hg(a,b,c){a=fg(a);return Of(a,b,c)}function ig(){if(null!==bg){var a=bg;bg=null;Pf(a)}jg()}\nfunction jg(){if(!cg&&null!==ag){cg=!0;var a=0;try{var b=ag;gg(99,function(){for(;a<b.length;a++){var c=b[a];do c=c(!0);while(null!==c)}});ag=null}catch(c){throw null!==ag&&(ag=ag.slice(a+1)),Of(Uf,ig),c;}finally{cg=!1}}}var kg=ra.ReactCurrentBatchConfig;function lg(a,b){if(a&&a.defaultProps){b=m({},b);a=a.defaultProps;for(var c in a)void 0===b[c]&&(b[c]=a[c]);return b}return b}var mg=Bf(null),ng=null,og=null,pg=null;function qg(){pg=og=ng=null}\nfunction rg(a){var b=mg.current;H(mg);a.type._context._currentValue=b}function sg(a,b){for(;null!==a;){var c=a.alternate;if((a.childLanes&b)===b)if(null===c||(c.childLanes&b)===b)break;else c.childLanes|=b;else a.childLanes|=b,null!==c&&(c.childLanes|=b);a=a.return}}function tg(a,b){ng=a;pg=og=null;a=a.dependencies;null!==a&&null!==a.firstContext&&(0!==(a.lanes&b)&&(ug=!0),a.firstContext=null)}\nfunction vg(a,b){if(pg!==a&&!1!==b&&0!==b){if(\"number\"!==typeof b||1073741823===b)pg=a,b=1073741823;b={context:a,observedBits:b,next:null};if(null===og){if(null===ng)throw Error(y(308));og=b;ng.dependencies={lanes:0,firstContext:b,responders:null}}else og=og.next=b}return a._currentValue}var wg=!1;function xg(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}\nfunction yg(a,b){a=a.updateQueue;b.updateQueue===a&&(b.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function zg(a,b){return{eventTime:a,lane:b,tag:0,payload:null,callback:null,next:null}}function Ag(a,b){a=a.updateQueue;if(null!==a){a=a.shared;var c=a.pending;null===c?b.next=b:(b.next=c.next,c.next=b);a.pending=b}}\nfunction Bg(a,b){var c=a.updateQueue,d=a.alternate;if(null!==d&&(d=d.updateQueue,c===d)){var e=null,f=null;c=c.firstBaseUpdate;if(null!==c){do{var g={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};null===f?e=f=g:f=f.next=g;c=c.next}while(null!==c);null===f?e=f=b:f=f.next=b}else e=f=b;c={baseState:d.baseState,firstBaseUpdate:e,lastBaseUpdate:f,shared:d.shared,effects:d.effects};a.updateQueue=c;return}a=c.lastBaseUpdate;null===a?c.firstBaseUpdate=b:a.next=\nb;c.lastBaseUpdate=b}\nfunction Cg(a,b,c,d){var e=a.updateQueue;wg=!1;var f=e.firstBaseUpdate,g=e.lastBaseUpdate,h=e.shared.pending;if(null!==h){e.shared.pending=null;var k=h,l=k.next;k.next=null;null===g?f=l:g.next=l;g=k;var n=a.alternate;if(null!==n){n=n.updateQueue;var A=n.lastBaseUpdate;A!==g&&(null===A?n.firstBaseUpdate=l:A.next=l,n.lastBaseUpdate=k)}}if(null!==f){A=e.baseState;g=0;n=l=k=null;do{h=f.lane;var p=f.eventTime;if((d&h)===h){null!==n&&(n=n.next={eventTime:p,lane:0,tag:f.tag,payload:f.payload,callback:f.callback,\nnext:null});a:{var C=a,x=f;h=b;p=c;switch(x.tag){case 1:C=x.payload;if(\"function\"===typeof C){A=C.call(p,A,h);break a}A=C;break a;case 3:C.flags=C.flags&-4097|64;case 0:C=x.payload;h=\"function\"===typeof C?C.call(p,A,h):C;if(null===h||void 0===h)break a;A=m({},A,h);break a;case 2:wg=!0}}null!==f.callback&&(a.flags|=32,h=e.effects,null===h?e.effects=[f]:h.push(f))}else p={eventTime:p,lane:h,tag:f.tag,payload:f.payload,callback:f.callback,next:null},null===n?(l=n=p,k=A):n=n.next=p,g|=h;f=f.next;if(null===\nf)if(h=e.shared.pending,null===h)break;else f=h.next,h.next=null,e.lastBaseUpdate=h,e.shared.pending=null}while(1);null===n&&(k=A);e.baseState=k;e.firstBaseUpdate=l;e.lastBaseUpdate=n;Dg|=g;a.lanes=g;a.memoizedState=A}}function Eg(a,b,c){a=b.effects;b.effects=null;if(null!==a)for(b=0;b<a.length;b++){var d=a[b],e=d.callback;if(null!==e){d.callback=null;d=c;if(\"function\"!==typeof e)throw Error(y(191,e));e.call(d)}}}var Fg=(new aa.Component).refs;\nfunction Gg(a,b,c,d){b=a.memoizedState;c=c(d,b);c=null===c||void 0===c?b:m({},b,c);a.memoizedState=c;0===a.lanes&&(a.updateQueue.baseState=c)}\nvar Kg={isMounted:function(a){return(a=a._reactInternals)?Zb(a)===a:!1},enqueueSetState:function(a,b,c){a=a._reactInternals;var d=Hg(),e=Ig(a),f=zg(d,e);f.payload=b;void 0!==c&&null!==c&&(f.callback=c);Ag(a,f);Jg(a,e,d)},enqueueReplaceState:function(a,b,c){a=a._reactInternals;var d=Hg(),e=Ig(a),f=zg(d,e);f.tag=1;f.payload=b;void 0!==c&&null!==c&&(f.callback=c);Ag(a,f);Jg(a,e,d)},enqueueForceUpdate:function(a,b){a=a._reactInternals;var c=Hg(),d=Ig(a),e=zg(c,d);e.tag=2;void 0!==b&&null!==b&&(e.callback=\nb);Ag(a,e);Jg(a,d,c)}};function Lg(a,b,c,d,e,f,g){a=a.stateNode;return\"function\"===typeof a.shouldComponentUpdate?a.shouldComponentUpdate(d,f,g):b.prototype&&b.prototype.isPureReactComponent?!Je(c,d)||!Je(e,f):!0}\nfunction Mg(a,b,c){var d=!1,e=Cf;var f=b.contextType;\"object\"===typeof f&&null!==f?f=vg(f):(e=Ff(b)?Df:M.current,d=b.contextTypes,f=(d=null!==d&&void 0!==d)?Ef(a,e):Cf);b=new b(c,f);a.memoizedState=null!==b.state&&void 0!==b.state?b.state:null;b.updater=Kg;a.stateNode=b;b._reactInternals=a;d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=e,a.__reactInternalMemoizedMaskedChildContext=f);return b}\nfunction Ng(a,b,c,d){a=b.state;\"function\"===typeof b.componentWillReceiveProps&&b.componentWillReceiveProps(c,d);\"function\"===typeof b.UNSAFE_componentWillReceiveProps&&b.UNSAFE_componentWillReceiveProps(c,d);b.state!==a&&Kg.enqueueReplaceState(b,b.state,null)}\nfunction Og(a,b,c,d){var e=a.stateNode;e.props=c;e.state=a.memoizedState;e.refs=Fg;xg(a);var f=b.contextType;\"object\"===typeof f&&null!==f?e.context=vg(f):(f=Ff(b)?Df:M.current,e.context=Ef(a,f));Cg(a,c,e,d);e.state=a.memoizedState;f=b.getDerivedStateFromProps;\"function\"===typeof f&&(Gg(a,b,f,c),e.state=a.memoizedState);\"function\"===typeof b.getDerivedStateFromProps||\"function\"===typeof e.getSnapshotBeforeUpdate||\"function\"!==typeof e.UNSAFE_componentWillMount&&\"function\"!==typeof e.componentWillMount||\n(b=e.state,\"function\"===typeof e.componentWillMount&&e.componentWillMount(),\"function\"===typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),b!==e.state&&Kg.enqueueReplaceState(e,e.state,null),Cg(a,c,e,d),e.state=a.memoizedState);\"function\"===typeof e.componentDidMount&&(a.flags|=4)}var Pg=Array.isArray;\nfunction Qg(a,b,c){a=c.ref;if(null!==a&&\"function\"!==typeof a&&\"object\"!==typeof a){if(c._owner){c=c._owner;if(c){if(1!==c.tag)throw Error(y(309));var d=c.stateNode}if(!d)throw Error(y(147,a));var e=\"\"+a;if(null!==b&&null!==b.ref&&\"function\"===typeof b.ref&&b.ref._stringRef===e)return b.ref;b=function(a){var b=d.refs;b===Fg&&(b=d.refs={});null===a?delete b[e]:b[e]=a};b._stringRef=e;return b}if(\"string\"!==typeof a)throw Error(y(284));if(!c._owner)throw Error(y(290,a));}return a}\nfunction Rg(a,b){if(\"textarea\"!==a.type)throw Error(y(31,\"[object Object]\"===Object.prototype.toString.call(b)?\"object with keys {\"+Object.keys(b).join(\", \")+\"}\":b));}\nfunction Sg(a){function b(b,c){if(a){var d=b.lastEffect;null!==d?(d.nextEffect=c,b.lastEffect=c):b.firstEffect=b.lastEffect=c;c.nextEffect=null;c.flags=8}}function c(c,d){if(!a)return null;for(;null!==d;)b(c,d),d=d.sibling;return null}function d(a,b){for(a=new Map;null!==b;)null!==b.key?a.set(b.key,b):a.set(b.index,b),b=b.sibling;return a}function e(a,b){a=Tg(a,b);a.index=0;a.sibling=null;return a}function f(b,c,d){b.index=d;if(!a)return c;d=b.alternate;if(null!==d)return d=d.index,d<c?(b.flags=2,\nc):d;b.flags=2;return c}function g(b){a&&null===b.alternate&&(b.flags=2);return b}function h(a,b,c,d){if(null===b||6!==b.tag)return b=Ug(c,a.mode,d),b.return=a,b;b=e(b,c);b.return=a;return b}function k(a,b,c,d){if(null!==b&&b.elementType===c.type)return d=e(b,c.props),d.ref=Qg(a,b,c),d.return=a,d;d=Vg(c.type,c.key,c.props,null,a.mode,d);d.ref=Qg(a,b,c);d.return=a;return d}function l(a,b,c,d){if(null===b||4!==b.tag||b.stateNode.containerInfo!==c.containerInfo||b.stateNode.implementation!==c.implementation)return b=\nWg(c,a.mode,d),b.return=a,b;b=e(b,c.children||[]);b.return=a;return b}function n(a,b,c,d,f){if(null===b||7!==b.tag)return b=Xg(c,a.mode,d,f),b.return=a,b;b=e(b,c);b.return=a;return b}function A(a,b,c){if(\"string\"===typeof b||\"number\"===typeof b)return b=Ug(\"\"+b,a.mode,c),b.return=a,b;if(\"object\"===typeof b&&null!==b){switch(b.$$typeof){case sa:return c=Vg(b.type,b.key,b.props,null,a.mode,c),c.ref=Qg(a,null,b),c.return=a,c;case ta:return b=Wg(b,a.mode,c),b.return=a,b}if(Pg(b)||La(b))return b=Xg(b,\na.mode,c,null),b.return=a,b;Rg(a,b)}return null}function p(a,b,c,d){var e=null!==b?b.key:null;if(\"string\"===typeof c||\"number\"===typeof c)return null!==e?null:h(a,b,\"\"+c,d);if(\"object\"===typeof c&&null!==c){switch(c.$$typeof){case sa:return c.key===e?c.type===ua?n(a,b,c.props.children,d,e):k(a,b,c,d):null;case ta:return c.key===e?l(a,b,c,d):null}if(Pg(c)||La(c))return null!==e?null:n(a,b,c,d,null);Rg(a,c)}return null}function C(a,b,c,d,e){if(\"string\"===typeof d||\"number\"===typeof d)return a=a.get(c)||\nnull,h(b,a,\"\"+d,e);if(\"object\"===typeof d&&null!==d){switch(d.$$typeof){case sa:return a=a.get(null===d.key?c:d.key)||null,d.type===ua?n(b,a,d.props.children,e,d.key):k(b,a,d,e);case ta:return a=a.get(null===d.key?c:d.key)||null,l(b,a,d,e)}if(Pg(d)||La(d))return a=a.get(c)||null,n(b,a,d,e,null);Rg(b,d)}return null}function x(e,g,h,k){for(var l=null,t=null,u=g,z=g=0,q=null;null!==u&&z<h.length;z++){u.index>z?(q=u,u=null):q=u.sibling;var n=p(e,u,h[z],k);if(null===n){null===u&&(u=q);break}a&&u&&null===\nn.alternate&&b(e,u);g=f(n,g,z);null===t?l=n:t.sibling=n;t=n;u=q}if(z===h.length)return c(e,u),l;if(null===u){for(;z<h.length;z++)u=A(e,h[z],k),null!==u&&(g=f(u,g,z),null===t?l=u:t.sibling=u,t=u);return l}for(u=d(e,u);z<h.length;z++)q=C(u,e,z,h[z],k),null!==q&&(a&&null!==q.alternate&&u.delete(null===q.key?z:q.key),g=f(q,g,z),null===t?l=q:t.sibling=q,t=q);a&&u.forEach(function(a){return b(e,a)});return l}function w(e,g,h,k){var l=La(h);if(\"function\"!==typeof l)throw Error(y(150));h=l.call(h);if(null==\nh)throw Error(y(151));for(var t=l=null,u=g,z=g=0,q=null,n=h.next();null!==u&&!n.done;z++,n=h.next()){u.index>z?(q=u,u=null):q=u.sibling;var w=p(e,u,n.value,k);if(null===w){null===u&&(u=q);break}a&&u&&null===w.alternate&&b(e,u);g=f(w,g,z);null===t?l=w:t.sibling=w;t=w;u=q}if(n.done)return c(e,u),l;if(null===u){for(;!n.done;z++,n=h.next())n=A(e,n.value,k),null!==n&&(g=f(n,g,z),null===t?l=n:t.sibling=n,t=n);return l}for(u=d(e,u);!n.done;z++,n=h.next())n=C(u,e,z,n.value,k),null!==n&&(a&&null!==n.alternate&&\nu.delete(null===n.key?z:n.key),g=f(n,g,z),null===t?l=n:t.sibling=n,t=n);a&&u.forEach(function(a){return b(e,a)});return l}return function(a,d,f,h){var k=\"object\"===typeof f&&null!==f&&f.type===ua&&null===f.key;k&&(f=f.props.children);var l=\"object\"===typeof f&&null!==f;if(l)switch(f.$$typeof){case sa:a:{l=f.key;for(k=d;null!==k;){if(k.key===l){switch(k.tag){case 7:if(f.type===ua){c(a,k.sibling);d=e(k,f.props.children);d.return=a;a=d;break a}break;default:if(k.elementType===f.type){c(a,k.sibling);\nd=e(k,f.props);d.ref=Qg(a,k,f);d.return=a;a=d;break a}}c(a,k);break}else b(a,k);k=k.sibling}f.type===ua?(d=Xg(f.props.children,a.mode,h,f.key),d.return=a,a=d):(h=Vg(f.type,f.key,f.props,null,a.mode,h),h.ref=Qg(a,d,f),h.return=a,a=h)}return g(a);case ta:a:{for(k=f.key;null!==d;){if(d.key===k)if(4===d.tag&&d.stateNode.containerInfo===f.containerInfo&&d.stateNode.implementation===f.implementation){c(a,d.sibling);d=e(d,f.children||[]);d.return=a;a=d;break a}else{c(a,d);break}else b(a,d);d=d.sibling}d=\nWg(f,a.mode,h);d.return=a;a=d}return g(a)}if(\"string\"===typeof f||\"number\"===typeof f)return f=\"\"+f,null!==d&&6===d.tag?(c(a,d.sibling),d=e(d,f),d.return=a,a=d):(c(a,d),d=Ug(f,a.mode,h),d.return=a,a=d),g(a);if(Pg(f))return x(a,d,f,h);if(La(f))return w(a,d,f,h);l&&Rg(a,f);if(\"undefined\"===typeof f&&!k)switch(a.tag){case 1:case 22:case 0:case 11:case 15:throw Error(y(152,Ra(a.type)||\"Component\"));}return c(a,d)}}var Yg=Sg(!0),Zg=Sg(!1),$g={},ah=Bf($g),bh=Bf($g),ch=Bf($g);\nfunction dh(a){if(a===$g)throw Error(y(174));return a}function eh(a,b){I(ch,b);I(bh,a);I(ah,$g);a=b.nodeType;switch(a){case 9:case 11:b=(b=b.documentElement)?b.namespaceURI:mb(null,\"\");break;default:a=8===a?b.parentNode:b,b=a.namespaceURI||null,a=a.tagName,b=mb(b,a)}H(ah);I(ah,b)}function fh(){H(ah);H(bh);H(ch)}function gh(a){dh(ch.current);var b=dh(ah.current);var c=mb(b,a.type);b!==c&&(I(bh,a),I(ah,c))}function hh(a){bh.current===a&&(H(ah),H(bh))}var P=Bf(0);\nfunction ih(a){for(var b=a;null!==b;){if(13===b.tag){var c=b.memoizedState;if(null!==c&&(c=c.dehydrated,null===c||\"$?\"===c.data||\"$!\"===c.data))return b}else if(19===b.tag&&void 0!==b.memoizedProps.revealOrder){if(0!==(b.flags&64))return b}else if(null!==b.child){b.child.return=b;b=b.child;continue}if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}return null}var jh=null,kh=null,lh=!1;\nfunction mh(a,b){var c=nh(5,null,null,0);c.elementType=\"DELETED\";c.type=\"DELETED\";c.stateNode=b;c.return=a;c.flags=8;null!==a.lastEffect?(a.lastEffect.nextEffect=c,a.lastEffect=c):a.firstEffect=a.lastEffect=c}function oh(a,b){switch(a.tag){case 5:var c=a.type;b=1!==b.nodeType||c.toLowerCase()!==b.nodeName.toLowerCase()?null:b;return null!==b?(a.stateNode=b,!0):!1;case 6:return b=\"\"===a.pendingProps||3!==b.nodeType?null:b,null!==b?(a.stateNode=b,!0):!1;case 13:return!1;default:return!1}}\nfunction ph(a){if(lh){var b=kh;if(b){var c=b;if(!oh(a,b)){b=rf(c.nextSibling);if(!b||!oh(a,b)){a.flags=a.flags&-1025|2;lh=!1;jh=a;return}mh(jh,c)}jh=a;kh=rf(b.firstChild)}else a.flags=a.flags&-1025|2,lh=!1,jh=a}}function qh(a){for(a=a.return;null!==a&&5!==a.tag&&3!==a.tag&&13!==a.tag;)a=a.return;jh=a}\nfunction rh(a){if(a!==jh)return!1;if(!lh)return qh(a),lh=!0,!1;var b=a.type;if(5!==a.tag||\"head\"!==b&&\"body\"!==b&&!nf(b,a.memoizedProps))for(b=kh;b;)mh(a,b),b=rf(b.nextSibling);qh(a);if(13===a.tag){a=a.memoizedState;a=null!==a?a.dehydrated:null;if(!a)throw Error(y(317));a:{a=a.nextSibling;for(b=0;a;){if(8===a.nodeType){var c=a.data;if(\"/$\"===c){if(0===b){kh=rf(a.nextSibling);break a}b--}else\"$\"!==c&&\"$!\"!==c&&\"$?\"!==c||b++}a=a.nextSibling}kh=null}}else kh=jh?rf(a.stateNode.nextSibling):null;return!0}\nfunction sh(){kh=jh=null;lh=!1}var th=[];function uh(){for(var a=0;a<th.length;a++)th[a]._workInProgressVersionPrimary=null;th.length=0}var vh=ra.ReactCurrentDispatcher,wh=ra.ReactCurrentBatchConfig,xh=0,R=null,S=null,T=null,yh=!1,zh=!1;function Ah(){throw Error(y(321));}function Bh(a,b){if(null===b)return!1;for(var c=0;c<b.length&&c<a.length;c++)if(!He(a[c],b[c]))return!1;return!0}\nfunction Ch(a,b,c,d,e,f){xh=f;R=b;b.memoizedState=null;b.updateQueue=null;b.lanes=0;vh.current=null===a||null===a.memoizedState?Dh:Eh;a=c(d,e);if(zh){f=0;do{zh=!1;if(!(25>f))throw Error(y(301));f+=1;T=S=null;b.updateQueue=null;vh.current=Fh;a=c(d,e)}while(zh)}vh.current=Gh;b=null!==S&&null!==S.next;xh=0;T=S=R=null;yh=!1;if(b)throw Error(y(300));return a}function Hh(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};null===T?R.memoizedState=T=a:T=T.next=a;return T}\nfunction Ih(){if(null===S){var a=R.alternate;a=null!==a?a.memoizedState:null}else a=S.next;var b=null===T?R.memoizedState:T.next;if(null!==b)T=b,S=a;else{if(null===a)throw Error(y(310));S=a;a={memoizedState:S.memoizedState,baseState:S.baseState,baseQueue:S.baseQueue,queue:S.queue,next:null};null===T?R.memoizedState=T=a:T=T.next=a}return T}function Jh(a,b){return\"function\"===typeof b?b(a):b}\nfunction Kh(a){var b=Ih(),c=b.queue;if(null===c)throw Error(y(311));c.lastRenderedReducer=a;var d=S,e=d.baseQueue,f=c.pending;if(null!==f){if(null!==e){var g=e.next;e.next=f.next;f.next=g}d.baseQueue=e=f;c.pending=null}if(null!==e){e=e.next;d=d.baseState;var h=g=f=null,k=e;do{var l=k.lane;if((xh&l)===l)null!==h&&(h=h.next={lane:0,action:k.action,eagerReducer:k.eagerReducer,eagerState:k.eagerState,next:null}),d=k.eagerReducer===a?k.eagerState:a(d,k.action);else{var n={lane:l,action:k.action,eagerReducer:k.eagerReducer,\neagerState:k.eagerState,next:null};null===h?(g=h=n,f=d):h=h.next=n;R.lanes|=l;Dg|=l}k=k.next}while(null!==k&&k!==e);null===h?f=d:h.next=g;He(d,b.memoizedState)||(ug=!0);b.memoizedState=d;b.baseState=f;b.baseQueue=h;c.lastRenderedState=d}return[b.memoizedState,c.dispatch]}\nfunction Lh(a){var b=Ih(),c=b.queue;if(null===c)throw Error(y(311));c.lastRenderedReducer=a;var d=c.dispatch,e=c.pending,f=b.memoizedState;if(null!==e){c.pending=null;var g=e=e.next;do f=a(f,g.action),g=g.next;while(g!==e);He(f,b.memoizedState)||(ug=!0);b.memoizedState=f;null===b.baseQueue&&(b.baseState=f);c.lastRenderedState=f}return[f,d]}\nfunction Mh(a,b,c){var d=b._getVersion;d=d(b._source);var e=b._workInProgressVersionPrimary;if(null!==e)a=e===d;else if(a=a.mutableReadLanes,a=(xh&a)===a)b._workInProgressVersionPrimary=d,th.push(b);if(a)return c(b._source);th.push(b);throw Error(y(350));}\nfunction Nh(a,b,c,d){var e=U;if(null===e)throw Error(y(349));var f=b._getVersion,g=f(b._source),h=vh.current,k=h.useState(function(){return Mh(e,b,c)}),l=k[1],n=k[0];k=T;var A=a.memoizedState,p=A.refs,C=p.getSnapshot,x=A.source;A=A.subscribe;var w=R;a.memoizedState={refs:p,source:b,subscribe:d};h.useEffect(function(){p.getSnapshot=c;p.setSnapshot=l;var a=f(b._source);if(!He(g,a)){a=c(b._source);He(n,a)||(l(a),a=Ig(w),e.mutableReadLanes|=a&e.pendingLanes);a=e.mutableReadLanes;e.entangledLanes|=a;for(var d=\ne.entanglements,h=a;0<h;){var k=31-Vc(h),v=1<<k;d[k]|=a;h&=~v}}},[c,b,d]);h.useEffect(function(){return d(b._source,function(){var a=p.getSnapshot,c=p.setSnapshot;try{c(a(b._source));var d=Ig(w);e.mutableReadLanes|=d&e.pendingLanes}catch(q){c(function(){throw q;})}})},[b,d]);He(C,c)&&He(x,b)&&He(A,d)||(a={pending:null,dispatch:null,lastRenderedReducer:Jh,lastRenderedState:n},a.dispatch=l=Oh.bind(null,R,a),k.queue=a,k.baseQueue=null,n=Mh(e,b,c),k.memoizedState=k.baseState=n);return n}\nfunction Ph(a,b,c){var d=Ih();return Nh(d,a,b,c)}function Qh(a){var b=Hh();\"function\"===typeof a&&(a=a());b.memoizedState=b.baseState=a;a=b.queue={pending:null,dispatch:null,lastRenderedReducer:Jh,lastRenderedState:a};a=a.dispatch=Oh.bind(null,R,a);return[b.memoizedState,a]}\nfunction Rh(a,b,c,d){a={tag:a,create:b,destroy:c,deps:d,next:null};b=R.updateQueue;null===b?(b={lastEffect:null},R.updateQueue=b,b.lastEffect=a.next=a):(c=b.lastEffect,null===c?b.lastEffect=a.next=a:(d=c.next,c.next=a,a.next=d,b.lastEffect=a));return a}function Sh(a){var b=Hh();a={current:a};return b.memoizedState=a}function Th(){return Ih().memoizedState}function Uh(a,b,c,d){var e=Hh();R.flags|=a;e.memoizedState=Rh(1|b,c,void 0,void 0===d?null:d)}\nfunction Vh(a,b,c,d){var e=Ih();d=void 0===d?null:d;var f=void 0;if(null!==S){var g=S.memoizedState;f=g.destroy;if(null!==d&&Bh(d,g.deps)){Rh(b,c,f,d);return}}R.flags|=a;e.memoizedState=Rh(1|b,c,f,d)}function Wh(a,b){return Uh(516,4,a,b)}function Xh(a,b){return Vh(516,4,a,b)}function Yh(a,b){return Vh(4,2,a,b)}function Zh(a,b){if(\"function\"===typeof b)return a=a(),b(a),function(){b(null)};if(null!==b&&void 0!==b)return a=a(),b.current=a,function(){b.current=null}}\nfunction $h(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return Vh(4,2,Zh.bind(null,b,a),c)}function ai(){}function bi(a,b){var c=Ih();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&Bh(b,d[1]))return d[0];c.memoizedState=[a,b];return a}function ci(a,b){var c=Ih();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&Bh(b,d[1]))return d[0];a=a();c.memoizedState=[a,b];return a}\nfunction di(a,b){var c=eg();gg(98>c?98:c,function(){a(!0)});gg(97<c?97:c,function(){var c=wh.transition;wh.transition=1;try{a(!1),b()}finally{wh.transition=c}})}\nfunction Oh(a,b,c){var d=Hg(),e=Ig(a),f={lane:e,action:c,eagerReducer:null,eagerState:null,next:null},g=b.pending;null===g?f.next=f:(f.next=g.next,g.next=f);b.pending=f;g=a.alternate;if(a===R||null!==g&&g===R)zh=yh=!0;else{if(0===a.lanes&&(null===g||0===g.lanes)&&(g=b.lastRenderedReducer,null!==g))try{var h=b.lastRenderedState,k=g(h,c);f.eagerReducer=g;f.eagerState=k;if(He(k,h))return}catch(l){}finally{}Jg(a,e,d)}}\nvar Gh={readContext:vg,useCallback:Ah,useContext:Ah,useEffect:Ah,useImperativeHandle:Ah,useLayoutEffect:Ah,useMemo:Ah,useReducer:Ah,useRef:Ah,useState:Ah,useDebugValue:Ah,useDeferredValue:Ah,useTransition:Ah,useMutableSource:Ah,useOpaqueIdentifier:Ah,unstable_isNewReconciler:!1},Dh={readContext:vg,useCallback:function(a,b){Hh().memoizedState=[a,void 0===b?null:b];return a},useContext:vg,useEffect:Wh,useImperativeHandle:function(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return Uh(4,2,Zh.bind(null,\nb,a),c)},useLayoutEffect:function(a,b){return Uh(4,2,a,b)},useMemo:function(a,b){var c=Hh();b=void 0===b?null:b;a=a();c.memoizedState=[a,b];return a},useReducer:function(a,b,c){var d=Hh();b=void 0!==c?c(b):b;d.memoizedState=d.baseState=b;a=d.queue={pending:null,dispatch:null,lastRenderedReducer:a,lastRenderedState:b};a=a.dispatch=Oh.bind(null,R,a);return[d.memoizedState,a]},useRef:Sh,useState:Qh,useDebugValue:ai,useDeferredValue:function(a){var b=Qh(a),c=b[0],d=b[1];Wh(function(){var b=wh.transition;\nwh.transition=1;try{d(a)}finally{wh.transition=b}},[a]);return c},useTransition:function(){var a=Qh(!1),b=a[0];a=di.bind(null,a[1]);Sh(a);return[a,b]},useMutableSource:function(a,b,c){var d=Hh();d.memoizedState={refs:{getSnapshot:b,setSnapshot:null},source:a,subscribe:c};return Nh(d,a,b,c)},useOpaqueIdentifier:function(){if(lh){var a=!1,b=uf(function(){a||(a=!0,c(\"r:\"+(tf++).toString(36)));throw Error(y(355));}),c=Qh(b)[1];0===(R.mode&2)&&(R.flags|=516,Rh(5,function(){c(\"r:\"+(tf++).toString(36))},\nvoid 0,null));return b}b=\"r:\"+(tf++).toString(36);Qh(b);return b},unstable_isNewReconciler:!1},Eh={readContext:vg,useCallback:bi,useContext:vg,useEffect:Xh,useImperativeHandle:$h,useLayoutEffect:Yh,useMemo:ci,useReducer:Kh,useRef:Th,useState:function(){return Kh(Jh)},useDebugValue:ai,useDeferredValue:function(a){var b=Kh(Jh),c=b[0],d=b[1];Xh(function(){var b=wh.transition;wh.transition=1;try{d(a)}finally{wh.transition=b}},[a]);return c},useTransition:function(){var a=Kh(Jh)[0];return[Th().current,\na]},useMutableSource:Ph,useOpaqueIdentifier:function(){return Kh(Jh)[0]},unstable_isNewReconciler:!1},Fh={readContext:vg,useCallback:bi,useContext:vg,useEffect:Xh,useImperativeHandle:$h,useLayoutEffect:Yh,useMemo:ci,useReducer:Lh,useRef:Th,useState:function(){return Lh(Jh)},useDebugValue:ai,useDeferredValue:function(a){var b=Lh(Jh),c=b[0],d=b[1];Xh(function(){var b=wh.transition;wh.transition=1;try{d(a)}finally{wh.transition=b}},[a]);return c},useTransition:function(){var a=Lh(Jh)[0];return[Th().current,\na]},useMutableSource:Ph,useOpaqueIdentifier:function(){return Lh(Jh)[0]},unstable_isNewReconciler:!1},ei=ra.ReactCurrentOwner,ug=!1;function fi(a,b,c,d){b.child=null===a?Zg(b,null,c,d):Yg(b,a.child,c,d)}function gi(a,b,c,d,e){c=c.render;var f=b.ref;tg(b,e);d=Ch(a,b,c,d,f,e);if(null!==a&&!ug)return b.updateQueue=a.updateQueue,b.flags&=-517,a.lanes&=~e,hi(a,b,e);b.flags|=1;fi(a,b,d,e);return b.child}\nfunction ii(a,b,c,d,e,f){if(null===a){var g=c.type;if(\"function\"===typeof g&&!ji(g)&&void 0===g.defaultProps&&null===c.compare&&void 0===c.defaultProps)return b.tag=15,b.type=g,ki(a,b,g,d,e,f);a=Vg(c.type,null,d,b,b.mode,f);a.ref=b.ref;a.return=b;return b.child=a}g=a.child;if(0===(e&f)&&(e=g.memoizedProps,c=c.compare,c=null!==c?c:Je,c(e,d)&&a.ref===b.ref))return hi(a,b,f);b.flags|=1;a=Tg(g,d);a.ref=b.ref;a.return=b;return b.child=a}\nfunction ki(a,b,c,d,e,f){if(null!==a&&Je(a.memoizedProps,d)&&a.ref===b.ref)if(ug=!1,0!==(f&e))0!==(a.flags&16384)&&(ug=!0);else return b.lanes=a.lanes,hi(a,b,f);return li(a,b,c,d,f)}\nfunction mi(a,b,c){var d=b.pendingProps,e=d.children,f=null!==a?a.memoizedState:null;if(\"hidden\"===d.mode||\"unstable-defer-without-hiding\"===d.mode)if(0===(b.mode&4))b.memoizedState={baseLanes:0},ni(b,c);else if(0!==(c&1073741824))b.memoizedState={baseLanes:0},ni(b,null!==f?f.baseLanes:c);else return a=null!==f?f.baseLanes|c:c,b.lanes=b.childLanes=1073741824,b.memoizedState={baseLanes:a},ni(b,a),null;else null!==f?(d=f.baseLanes|c,b.memoizedState=null):d=c,ni(b,d);fi(a,b,e,c);return b.child}\nfunction oi(a,b){var c=b.ref;if(null===a&&null!==c||null!==a&&a.ref!==c)b.flags|=128}function li(a,b,c,d,e){var f=Ff(c)?Df:M.current;f=Ef(b,f);tg(b,e);c=Ch(a,b,c,d,f,e);if(null!==a&&!ug)return b.updateQueue=a.updateQueue,b.flags&=-517,a.lanes&=~e,hi(a,b,e);b.flags|=1;fi(a,b,c,e);return b.child}\nfunction pi(a,b,c,d,e){if(Ff(c)){var f=!0;Jf(b)}else f=!1;tg(b,e);if(null===b.stateNode)null!==a&&(a.alternate=null,b.alternate=null,b.flags|=2),Mg(b,c,d),Og(b,c,d,e),d=!0;else if(null===a){var g=b.stateNode,h=b.memoizedProps;g.props=h;var k=g.context,l=c.contextType;\"object\"===typeof l&&null!==l?l=vg(l):(l=Ff(c)?Df:M.current,l=Ef(b,l));var n=c.getDerivedStateFromProps,A=\"function\"===typeof n||\"function\"===typeof g.getSnapshotBeforeUpdate;A||\"function\"!==typeof g.UNSAFE_componentWillReceiveProps&&\n\"function\"!==typeof g.componentWillReceiveProps||(h!==d||k!==l)&&Ng(b,g,d,l);wg=!1;var p=b.memoizedState;g.state=p;Cg(b,d,g,e);k=b.memoizedState;h!==d||p!==k||N.current||wg?(\"function\"===typeof n&&(Gg(b,c,n,d),k=b.memoizedState),(h=wg||Lg(b,c,h,d,p,k,l))?(A||\"function\"!==typeof g.UNSAFE_componentWillMount&&\"function\"!==typeof g.componentWillMount||(\"function\"===typeof g.componentWillMount&&g.componentWillMount(),\"function\"===typeof g.UNSAFE_componentWillMount&&g.UNSAFE_componentWillMount()),\"function\"===\ntypeof g.componentDidMount&&(b.flags|=4)):(\"function\"===typeof g.componentDidMount&&(b.flags|=4),b.memoizedProps=d,b.memoizedState=k),g.props=d,g.state=k,g.context=l,d=h):(\"function\"===typeof g.componentDidMount&&(b.flags|=4),d=!1)}else{g=b.stateNode;yg(a,b);h=b.memoizedProps;l=b.type===b.elementType?h:lg(b.type,h);g.props=l;A=b.pendingProps;p=g.context;k=c.contextType;\"object\"===typeof k&&null!==k?k=vg(k):(k=Ff(c)?Df:M.current,k=Ef(b,k));var C=c.getDerivedStateFromProps;(n=\"function\"===typeof C||\n\"function\"===typeof g.getSnapshotBeforeUpdate)||\"function\"!==typeof g.UNSAFE_componentWillReceiveProps&&\"function\"!==typeof g.componentWillReceiveProps||(h!==A||p!==k)&&Ng(b,g,d,k);wg=!1;p=b.memoizedState;g.state=p;Cg(b,d,g,e);var x=b.memoizedState;h!==A||p!==x||N.current||wg?(\"function\"===typeof C&&(Gg(b,c,C,d),x=b.memoizedState),(l=wg||Lg(b,c,l,d,p,x,k))?(n||\"function\"!==typeof g.UNSAFE_componentWillUpdate&&\"function\"!==typeof g.componentWillUpdate||(\"function\"===typeof g.componentWillUpdate&&g.componentWillUpdate(d,\nx,k),\"function\"===typeof g.UNSAFE_componentWillUpdate&&g.UNSAFE_componentWillUpdate(d,x,k)),\"function\"===typeof g.componentDidUpdate&&(b.flags|=4),\"function\"===typeof g.getSnapshotBeforeUpdate&&(b.flags|=256)):(\"function\"!==typeof g.componentDidUpdate||h===a.memoizedProps&&p===a.memoizedState||(b.flags|=4),\"function\"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&p===a.memoizedState||(b.flags|=256),b.memoizedProps=d,b.memoizedState=x),g.props=d,g.state=x,g.context=k,d=l):(\"function\"!==typeof g.componentDidUpdate||\nh===a.memoizedProps&&p===a.memoizedState||(b.flags|=4),\"function\"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&p===a.memoizedState||(b.flags|=256),d=!1)}return qi(a,b,c,d,f,e)}\nfunction qi(a,b,c,d,e,f){oi(a,b);var g=0!==(b.flags&64);if(!d&&!g)return e&&Kf(b,c,!1),hi(a,b,f);d=b.stateNode;ei.current=b;var h=g&&\"function\"!==typeof c.getDerivedStateFromError?null:d.render();b.flags|=1;null!==a&&g?(b.child=Yg(b,a.child,null,f),b.child=Yg(b,null,h,f)):fi(a,b,h,f);b.memoizedState=d.state;e&&Kf(b,c,!0);return b.child}function ri(a){var b=a.stateNode;b.pendingContext?Hf(a,b.pendingContext,b.pendingContext!==b.context):b.context&&Hf(a,b.context,!1);eh(a,b.containerInfo)}\nvar si={dehydrated:null,retryLane:0};\nfunction ti(a,b,c){var d=b.pendingProps,e=P.current,f=!1,g;(g=0!==(b.flags&64))||(g=null!==a&&null===a.memoizedState?!1:0!==(e&2));g?(f=!0,b.flags&=-65):null!==a&&null===a.memoizedState||void 0===d.fallback||!0===d.unstable_avoidThisFallback||(e|=1);I(P,e&1);if(null===a){void 0!==d.fallback&&ph(b);a=d.children;e=d.fallback;if(f)return a=ui(b,a,e,c),b.child.memoizedState={baseLanes:c},b.memoizedState=si,a;if(\"number\"===typeof d.unstable_expectedLoadTime)return a=ui(b,a,e,c),b.child.memoizedState={baseLanes:c},\nb.memoizedState=si,b.lanes=33554432,a;c=vi({mode:\"visible\",children:a},b.mode,c,null);c.return=b;return b.child=c}if(null!==a.memoizedState){if(f)return d=wi(a,b,d.children,d.fallback,c),f=b.child,e=a.child.memoizedState,f.memoizedState=null===e?{baseLanes:c}:{baseLanes:e.baseLanes|c},f.childLanes=a.childLanes&~c,b.memoizedState=si,d;c=xi(a,b,d.children,c);b.memoizedState=null;return c}if(f)return d=wi(a,b,d.children,d.fallback,c),f=b.child,e=a.child.memoizedState,f.memoizedState=null===e?{baseLanes:c}:\n{baseLanes:e.baseLanes|c},f.childLanes=a.childLanes&~c,b.memoizedState=si,d;c=xi(a,b,d.children,c);b.memoizedState=null;return c}function ui(a,b,c,d){var e=a.mode,f=a.child;b={mode:\"hidden\",children:b};0===(e&2)&&null!==f?(f.childLanes=0,f.pendingProps=b):f=vi(b,e,0,null);c=Xg(c,e,d,null);f.return=a;c.return=a;f.sibling=c;a.child=f;return c}\nfunction xi(a,b,c,d){var e=a.child;a=e.sibling;c=Tg(e,{mode:\"visible\",children:c});0===(b.mode&2)&&(c.lanes=d);c.return=b;c.sibling=null;null!==a&&(a.nextEffect=null,a.flags=8,b.firstEffect=b.lastEffect=a);return b.child=c}\nfunction wi(a,b,c,d,e){var f=b.mode,g=a.child;a=g.sibling;var h={mode:\"hidden\",children:c};0===(f&2)&&b.child!==g?(c=b.child,c.childLanes=0,c.pendingProps=h,g=c.lastEffect,null!==g?(b.firstEffect=c.firstEffect,b.lastEffect=g,g.nextEffect=null):b.firstEffect=b.lastEffect=null):c=Tg(g,h);null!==a?d=Tg(a,d):(d=Xg(d,f,e,null),d.flags|=2);d.return=b;c.return=b;c.sibling=d;b.child=c;return d}function yi(a,b){a.lanes|=b;var c=a.alternate;null!==c&&(c.lanes|=b);sg(a.return,b)}\nfunction zi(a,b,c,d,e,f){var g=a.memoizedState;null===g?a.memoizedState={isBackwards:b,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:e,lastEffect:f}:(g.isBackwards=b,g.rendering=null,g.renderingStartTime=0,g.last=d,g.tail=c,g.tailMode=e,g.lastEffect=f)}\nfunction Ai(a,b,c){var d=b.pendingProps,e=d.revealOrder,f=d.tail;fi(a,b,d.children,c);d=P.current;if(0!==(d&2))d=d&1|2,b.flags|=64;else{if(null!==a&&0!==(a.flags&64))a:for(a=b.child;null!==a;){if(13===a.tag)null!==a.memoizedState&&yi(a,c);else if(19===a.tag)yi(a,c);else if(null!==a.child){a.child.return=a;a=a.child;continue}if(a===b)break a;for(;null===a.sibling;){if(null===a.return||a.return===b)break a;a=a.return}a.sibling.return=a.return;a=a.sibling}d&=1}I(P,d);if(0===(b.mode&2))b.memoizedState=\nnull;else switch(e){case \"forwards\":c=b.child;for(e=null;null!==c;)a=c.alternate,null!==a&&null===ih(a)&&(e=c),c=c.sibling;c=e;null===c?(e=b.child,b.child=null):(e=c.sibling,c.sibling=null);zi(b,!1,e,c,f,b.lastEffect);break;case \"backwards\":c=null;e=b.child;for(b.child=null;null!==e;){a=e.alternate;if(null!==a&&null===ih(a)){b.child=e;break}a=e.sibling;e.sibling=c;c=e;e=a}zi(b,!0,c,null,f,b.lastEffect);break;case \"together\":zi(b,!1,null,null,void 0,b.lastEffect);break;default:b.memoizedState=null}return b.child}\nfunction hi(a,b,c){null!==a&&(b.dependencies=a.dependencies);Dg|=b.lanes;if(0!==(c&b.childLanes)){if(null!==a&&b.child!==a.child)throw Error(y(153));if(null!==b.child){a=b.child;c=Tg(a,a.pendingProps);b.child=c;for(c.return=b;null!==a.sibling;)a=a.sibling,c=c.sibling=Tg(a,a.pendingProps),c.return=b;c.sibling=null}return b.child}return null}var Bi,Ci,Di,Ei;\nBi=function(a,b){for(var c=b.child;null!==c;){if(5===c.tag||6===c.tag)a.appendChild(c.stateNode);else if(4!==c.tag&&null!==c.child){c.child.return=c;c=c.child;continue}if(c===b)break;for(;null===c.sibling;){if(null===c.return||c.return===b)return;c=c.return}c.sibling.return=c.return;c=c.sibling}};Ci=function(){};\nDi=function(a,b,c,d){var e=a.memoizedProps;if(e!==d){a=b.stateNode;dh(ah.current);var f=null;switch(c){case \"input\":e=Ya(a,e);d=Ya(a,d);f=[];break;case \"option\":e=eb(a,e);d=eb(a,d);f=[];break;case \"select\":e=m({},e,{value:void 0});d=m({},d,{value:void 0});f=[];break;case \"textarea\":e=gb(a,e);d=gb(a,d);f=[];break;default:\"function\"!==typeof e.onClick&&\"function\"===typeof d.onClick&&(a.onclick=jf)}vb(c,d);var g;c=null;for(l in e)if(!d.hasOwnProperty(l)&&e.hasOwnProperty(l)&&null!=e[l])if(\"style\"===\nl){var h=e[l];for(g in h)h.hasOwnProperty(g)&&(c||(c={}),c[g]=\"\")}else\"dangerouslySetInnerHTML\"!==l&&\"children\"!==l&&\"suppressContentEditableWarning\"!==l&&\"suppressHydrationWarning\"!==l&&\"autoFocus\"!==l&&(ca.hasOwnProperty(l)?f||(f=[]):(f=f||[]).push(l,null));for(l in d){var k=d[l];h=null!=e?e[l]:void 0;if(d.hasOwnProperty(l)&&k!==h&&(null!=k||null!=h))if(\"style\"===l)if(h){for(g in h)!h.hasOwnProperty(g)||k&&k.hasOwnProperty(g)||(c||(c={}),c[g]=\"\");for(g in k)k.hasOwnProperty(g)&&h[g]!==k[g]&&(c||\n(c={}),c[g]=k[g])}else c||(f||(f=[]),f.push(l,c)),c=k;else\"dangerouslySetInnerHTML\"===l?(k=k?k.__html:void 0,h=h?h.__html:void 0,null!=k&&h!==k&&(f=f||[]).push(l,k)):\"children\"===l?\"string\"!==typeof k&&\"number\"!==typeof k||(f=f||[]).push(l,\"\"+k):\"suppressContentEditableWarning\"!==l&&\"suppressHydrationWarning\"!==l&&(ca.hasOwnProperty(l)?(null!=k&&\"onScroll\"===l&&G(\"scroll\",a),f||h===k||(f=[])):\"object\"===typeof k&&null!==k&&k.$$typeof===Ga?k.toString():(f=f||[]).push(l,k))}c&&(f=f||[]).push(\"style\",\nc);var l=f;if(b.updateQueue=l)b.flags|=4}};Ei=function(a,b,c,d){c!==d&&(b.flags|=4)};function Fi(a,b){if(!lh)switch(a.tailMode){case \"hidden\":b=a.tail;for(var c=null;null!==b;)null!==b.alternate&&(c=b),b=b.sibling;null===c?a.tail=null:c.sibling=null;break;case \"collapsed\":c=a.tail;for(var d=null;null!==c;)null!==c.alternate&&(d=c),c=c.sibling;null===d?b||null===a.tail?a.tail=null:a.tail.sibling=null:d.sibling=null}}\nfunction Gi(a,b,c){var d=b.pendingProps;switch(b.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Ff(b.type)&&Gf(),null;case 3:fh();H(N);H(M);uh();d=b.stateNode;d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null);if(null===a||null===a.child)rh(b)?b.flags|=4:d.hydrate||(b.flags|=256);Ci(b);return null;case 5:hh(b);var e=dh(ch.current);c=b.type;if(null!==a&&null!=b.stateNode)Di(a,b,c,d,e),a.ref!==b.ref&&(b.flags|=128);else{if(!d){if(null===\nb.stateNode)throw Error(y(166));return null}a=dh(ah.current);if(rh(b)){d=b.stateNode;c=b.type;var f=b.memoizedProps;d[wf]=b;d[xf]=f;switch(c){case \"dialog\":G(\"cancel\",d);G(\"close\",d);break;case \"iframe\":case \"object\":case \"embed\":G(\"load\",d);break;case \"video\":case \"audio\":for(a=0;a<Xe.length;a++)G(Xe[a],d);break;case \"source\":G(\"error\",d);break;case \"img\":case \"image\":case \"link\":G(\"error\",d);G(\"load\",d);break;case \"details\":G(\"toggle\",d);break;case \"input\":Za(d,f);G(\"invalid\",d);break;case \"select\":d._wrapperState=\n{wasMultiple:!!f.multiple};G(\"invalid\",d);break;case \"textarea\":hb(d,f),G(\"invalid\",d)}vb(c,f);a=null;for(var g in f)f.hasOwnProperty(g)&&(e=f[g],\"children\"===g?\"string\"===typeof e?d.textContent!==e&&(a=[\"children\",e]):\"number\"===typeof e&&d.textContent!==\"\"+e&&(a=[\"children\",\"\"+e]):ca.hasOwnProperty(g)&&null!=e&&\"onScroll\"===g&&G(\"scroll\",d));switch(c){case \"input\":Va(d);cb(d,f,!0);break;case \"textarea\":Va(d);jb(d);break;case \"select\":case \"option\":break;default:\"function\"===typeof f.onClick&&(d.onclick=\njf)}d=a;b.updateQueue=d;null!==d&&(b.flags|=4)}else{g=9===e.nodeType?e:e.ownerDocument;a===kb.html&&(a=lb(c));a===kb.html?\"script\"===c?(a=g.createElement(\"div\"),a.innerHTML=\"<script>\\x3c/script>\",a=a.removeChild(a.firstChild)):\"string\"===typeof d.is?a=g.createElement(c,{is:d.is}):(a=g.createElement(c),\"select\"===c&&(g=a,d.multiple?g.multiple=!0:d.size&&(g.size=d.size))):a=g.createElementNS(a,c);a[wf]=b;a[xf]=d;Bi(a,b,!1,!1);b.stateNode=a;g=wb(c,d);switch(c){case \"dialog\":G(\"cancel\",a);G(\"close\",a);\ne=d;break;case \"iframe\":case \"object\":case \"embed\":G(\"load\",a);e=d;break;case \"video\":case \"audio\":for(e=0;e<Xe.length;e++)G(Xe[e],a);e=d;break;case \"source\":G(\"error\",a);e=d;break;case \"img\":case \"image\":case \"link\":G(\"error\",a);G(\"load\",a);e=d;break;case \"details\":G(\"toggle\",a);e=d;break;case \"input\":Za(a,d);e=Ya(a,d);G(\"invalid\",a);break;case \"option\":e=eb(a,d);break;case \"select\":a._wrapperState={wasMultiple:!!d.multiple};e=m({},d,{value:void 0});G(\"invalid\",a);break;case \"textarea\":hb(a,d);e=\ngb(a,d);G(\"invalid\",a);break;default:e=d}vb(c,e);var h=e;for(f in h)if(h.hasOwnProperty(f)){var k=h[f];\"style\"===f?tb(a,k):\"dangerouslySetInnerHTML\"===f?(k=k?k.__html:void 0,null!=k&&ob(a,k)):\"children\"===f?\"string\"===typeof k?(\"textarea\"!==c||\"\"!==k)&&pb(a,k):\"number\"===typeof k&&pb(a,\"\"+k):\"suppressContentEditableWarning\"!==f&&\"suppressHydrationWarning\"!==f&&\"autoFocus\"!==f&&(ca.hasOwnProperty(f)?null!=k&&\"onScroll\"===f&&G(\"scroll\",a):null!=k&&qa(a,f,k,g))}switch(c){case \"input\":Va(a);cb(a,d,!1);\nbreak;case \"textarea\":Va(a);jb(a);break;case \"option\":null!=d.value&&a.setAttribute(\"value\",\"\"+Sa(d.value));break;case \"select\":a.multiple=!!d.multiple;f=d.value;null!=f?fb(a,!!d.multiple,f,!1):null!=d.defaultValue&&fb(a,!!d.multiple,d.defaultValue,!0);break;default:\"function\"===typeof e.onClick&&(a.onclick=jf)}mf(c,d)&&(b.flags|=4)}null!==b.ref&&(b.flags|=128)}return null;case 6:if(a&&null!=b.stateNode)Ei(a,b,a.memoizedProps,d);else{if(\"string\"!==typeof d&&null===b.stateNode)throw Error(y(166));\nc=dh(ch.current);dh(ah.current);rh(b)?(d=b.stateNode,c=b.memoizedProps,d[wf]=b,d.nodeValue!==c&&(b.flags|=4)):(d=(9===c.nodeType?c:c.ownerDocument).createTextNode(d),d[wf]=b,b.stateNode=d)}return null;case 13:H(P);d=b.memoizedState;if(0!==(b.flags&64))return b.lanes=c,b;d=null!==d;c=!1;null===a?void 0!==b.memoizedProps.fallback&&rh(b):c=null!==a.memoizedState;if(d&&!c&&0!==(b.mode&2))if(null===a&&!0!==b.memoizedProps.unstable_avoidThisFallback||0!==(P.current&1))0===V&&(V=3);else{if(0===V||3===V)V=\n4;null===U||0===(Dg&134217727)&&0===(Hi&134217727)||Ii(U,W)}if(d||c)b.flags|=4;return null;case 4:return fh(),Ci(b),null===a&&cf(b.stateNode.containerInfo),null;case 10:return rg(b),null;case 17:return Ff(b.type)&&Gf(),null;case 19:H(P);d=b.memoizedState;if(null===d)return null;f=0!==(b.flags&64);g=d.rendering;if(null===g)if(f)Fi(d,!1);else{if(0!==V||null!==a&&0!==(a.flags&64))for(a=b.child;null!==a;){g=ih(a);if(null!==g){b.flags|=64;Fi(d,!1);f=g.updateQueue;null!==f&&(b.updateQueue=f,b.flags|=4);\nnull===d.lastEffect&&(b.firstEffect=null);b.lastEffect=d.lastEffect;d=c;for(c=b.child;null!==c;)f=c,a=d,f.flags&=2,f.nextEffect=null,f.firstEffect=null,f.lastEffect=null,g=f.alternate,null===g?(f.childLanes=0,f.lanes=a,f.child=null,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=g.childLanes,f.lanes=g.lanes,f.child=g.child,f.memoizedProps=g.memoizedProps,f.memoizedState=g.memoizedState,f.updateQueue=g.updateQueue,f.type=g.type,a=g.dependencies,\nf.dependencies=null===a?null:{lanes:a.lanes,firstContext:a.firstContext}),c=c.sibling;I(P,P.current&1|2);return b.child}a=a.sibling}null!==d.tail&&O()>Ji&&(b.flags|=64,f=!0,Fi(d,!1),b.lanes=33554432)}else{if(!f)if(a=ih(g),null!==a){if(b.flags|=64,f=!0,c=a.updateQueue,null!==c&&(b.updateQueue=c,b.flags|=4),Fi(d,!0),null===d.tail&&\"hidden\"===d.tailMode&&!g.alternate&&!lh)return b=b.lastEffect=d.lastEffect,null!==b&&(b.nextEffect=null),null}else 2*O()-d.renderingStartTime>Ji&&1073741824!==c&&(b.flags|=\n64,f=!0,Fi(d,!1),b.lanes=33554432);d.isBackwards?(g.sibling=b.child,b.child=g):(c=d.last,null!==c?c.sibling=g:b.child=g,d.last=g)}return null!==d.tail?(c=d.tail,d.rendering=c,d.tail=c.sibling,d.lastEffect=b.lastEffect,d.renderingStartTime=O(),c.sibling=null,b=P.current,I(P,f?b&1|2:b&1),c):null;case 23:case 24:return Ki(),null!==a&&null!==a.memoizedState!==(null!==b.memoizedState)&&\"unstable-defer-without-hiding\"!==d.mode&&(b.flags|=4),null}throw Error(y(156,b.tag));}\nfunction Li(a){switch(a.tag){case 1:Ff(a.type)&&Gf();var b=a.flags;return b&4096?(a.flags=b&-4097|64,a):null;case 3:fh();H(N);H(M);uh();b=a.flags;if(0!==(b&64))throw Error(y(285));a.flags=b&-4097|64;return a;case 5:return hh(a),null;case 13:return H(P),b=a.flags,b&4096?(a.flags=b&-4097|64,a):null;case 19:return H(P),null;case 4:return fh(),null;case 10:return rg(a),null;case 23:case 24:return Ki(),null;default:return null}}\nfunction Mi(a,b){try{var c=\"\",d=b;do c+=Qa(d),d=d.return;while(d);var e=c}catch(f){e=\"\\nError generating stack: \"+f.message+\"\\n\"+f.stack}return{value:a,source:b,stack:e}}function Ni(a,b){try{console.error(b.value)}catch(c){setTimeout(function(){throw c;})}}var Oi=\"function\"===typeof WeakMap?WeakMap:Map;function Pi(a,b,c){c=zg(-1,c);c.tag=3;c.payload={element:null};var d=b.value;c.callback=function(){Qi||(Qi=!0,Ri=d);Ni(a,b)};return c}\nfunction Si(a,b,c){c=zg(-1,c);c.tag=3;var d=a.type.getDerivedStateFromError;if(\"function\"===typeof d){var e=b.value;c.payload=function(){Ni(a,b);return d(e)}}var f=a.stateNode;null!==f&&\"function\"===typeof f.componentDidCatch&&(c.callback=function(){\"function\"!==typeof d&&(null===Ti?Ti=new Set([this]):Ti.add(this),Ni(a,b));var c=b.stack;this.componentDidCatch(b.value,{componentStack:null!==c?c:\"\"})});return c}var Ui=\"function\"===typeof WeakSet?WeakSet:Set;\nfunction Vi(a){var b=a.ref;if(null!==b)if(\"function\"===typeof b)try{b(null)}catch(c){Wi(a,c)}else b.current=null}function Xi(a,b){switch(b.tag){case 0:case 11:case 15:case 22:return;case 1:if(b.flags&256&&null!==a){var c=a.memoizedProps,d=a.memoizedState;a=b.stateNode;b=a.getSnapshotBeforeUpdate(b.elementType===b.type?c:lg(b.type,c),d);a.__reactInternalSnapshotBeforeUpdate=b}return;case 3:b.flags&256&&qf(b.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(y(163));}\nfunction Yi(a,b,c){switch(c.tag){case 0:case 11:case 15:case 22:b=c.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){a=b=b.next;do{if(3===(a.tag&3)){var d=a.create;a.destroy=d()}a=a.next}while(a!==b)}b=c.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){a=b=b.next;do{var e=a;d=e.next;e=e.tag;0!==(e&4)&&0!==(e&1)&&(Zi(c,a),$i(c,a));a=d}while(a!==b)}return;case 1:a=c.stateNode;c.flags&4&&(null===b?a.componentDidMount():(d=c.elementType===c.type?b.memoizedProps:lg(c.type,b.memoizedProps),a.componentDidUpdate(d,\nb.memoizedState,a.__reactInternalSnapshotBeforeUpdate)));b=c.updateQueue;null!==b&&Eg(c,b,a);return;case 3:b=c.updateQueue;if(null!==b){a=null;if(null!==c.child)switch(c.child.tag){case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}Eg(c,b,a)}return;case 5:a=c.stateNode;null===b&&c.flags&4&&mf(c.type,c.memoizedProps)&&a.focus();return;case 6:return;case 4:return;case 12:return;case 13:null===c.memoizedState&&(c=c.alternate,null!==c&&(c=c.memoizedState,null!==c&&(c=c.dehydrated,null!==c&&Cc(c))));\nreturn;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(y(163));}\nfunction aj(a,b){for(var c=a;;){if(5===c.tag){var d=c.stateNode;if(b)d=d.style,\"function\"===typeof d.setProperty?d.setProperty(\"display\",\"none\",\"important\"):d.display=\"none\";else{d=c.stateNode;var e=c.memoizedProps.style;e=void 0!==e&&null!==e&&e.hasOwnProperty(\"display\")?e.display:null;d.style.display=sb(\"display\",e)}}else if(6===c.tag)c.stateNode.nodeValue=b?\"\":c.memoizedProps;else if((23!==c.tag&&24!==c.tag||null===c.memoizedState||c===a)&&null!==c.child){c.child.return=c;c=c.child;continue}if(c===\na)break;for(;null===c.sibling;){if(null===c.return||c.return===a)return;c=c.return}c.sibling.return=c.return;c=c.sibling}}\nfunction bj(a,b){if(Mf&&\"function\"===typeof Mf.onCommitFiberUnmount)try{Mf.onCommitFiberUnmount(Lf,b)}catch(f){}switch(b.tag){case 0:case 11:case 14:case 15:case 22:a=b.updateQueue;if(null!==a&&(a=a.lastEffect,null!==a)){var c=a=a.next;do{var d=c,e=d.destroy;d=d.tag;if(void 0!==e)if(0!==(d&4))Zi(b,c);else{d=b;try{e()}catch(f){Wi(d,f)}}c=c.next}while(c!==a)}break;case 1:Vi(b);a=b.stateNode;if(\"function\"===typeof a.componentWillUnmount)try{a.props=b.memoizedProps,a.state=b.memoizedState,a.componentWillUnmount()}catch(f){Wi(b,\nf)}break;case 5:Vi(b);break;case 4:cj(a,b)}}function dj(a){a.alternate=null;a.child=null;a.dependencies=null;a.firstEffect=null;a.lastEffect=null;a.memoizedProps=null;a.memoizedState=null;a.pendingProps=null;a.return=null;a.updateQueue=null}function ej(a){return 5===a.tag||3===a.tag||4===a.tag}\nfunction fj(a){a:{for(var b=a.return;null!==b;){if(ej(b))break a;b=b.return}throw Error(y(160));}var c=b;b=c.stateNode;switch(c.tag){case 5:var d=!1;break;case 3:b=b.containerInfo;d=!0;break;case 4:b=b.containerInfo;d=!0;break;default:throw Error(y(161));}c.flags&16&&(pb(b,\"\"),c.flags&=-17);a:b:for(c=a;;){for(;null===c.sibling;){if(null===c.return||ej(c.return)){c=null;break a}c=c.return}c.sibling.return=c.return;for(c=c.sibling;5!==c.tag&&6!==c.tag&&18!==c.tag;){if(c.flags&2)continue b;if(null===\nc.child||4===c.tag)continue b;else c.child.return=c,c=c.child}if(!(c.flags&2)){c=c.stateNode;break a}}d?gj(a,c,b):hj(a,c,b)}\nfunction gj(a,b,c){var d=a.tag,e=5===d||6===d;if(e)a=e?a.stateNode:a.stateNode.instance,b?8===c.nodeType?c.parentNode.insertBefore(a,b):c.insertBefore(a,b):(8===c.nodeType?(b=c.parentNode,b.insertBefore(a,c)):(b=c,b.appendChild(a)),c=c._reactRootContainer,null!==c&&void 0!==c||null!==b.onclick||(b.onclick=jf));else if(4!==d&&(a=a.child,null!==a))for(gj(a,b,c),a=a.sibling;null!==a;)gj(a,b,c),a=a.sibling}\nfunction hj(a,b,c){var d=a.tag,e=5===d||6===d;if(e)a=e?a.stateNode:a.stateNode.instance,b?c.insertBefore(a,b):c.appendChild(a);else if(4!==d&&(a=a.child,null!==a))for(hj(a,b,c),a=a.sibling;null!==a;)hj(a,b,c),a=a.sibling}\nfunction cj(a,b){for(var c=b,d=!1,e,f;;){if(!d){d=c.return;a:for(;;){if(null===d)throw Error(y(160));e=d.stateNode;switch(d.tag){case 5:f=!1;break a;case 3:e=e.containerInfo;f=!0;break a;case 4:e=e.containerInfo;f=!0;break a}d=d.return}d=!0}if(5===c.tag||6===c.tag){a:for(var g=a,h=c,k=h;;)if(bj(g,k),null!==k.child&&4!==k.tag)k.child.return=k,k=k.child;else{if(k===h)break a;for(;null===k.sibling;){if(null===k.return||k.return===h)break a;k=k.return}k.sibling.return=k.return;k=k.sibling}f?(g=e,h=c.stateNode,\n8===g.nodeType?g.parentNode.removeChild(h):g.removeChild(h)):e.removeChild(c.stateNode)}else if(4===c.tag){if(null!==c.child){e=c.stateNode.containerInfo;f=!0;c.child.return=c;c=c.child;continue}}else if(bj(a,c),null!==c.child){c.child.return=c;c=c.child;continue}if(c===b)break;for(;null===c.sibling;){if(null===c.return||c.return===b)return;c=c.return;4===c.tag&&(d=!1)}c.sibling.return=c.return;c=c.sibling}}\nfunction ij(a,b){switch(b.tag){case 0:case 11:case 14:case 15:case 22:var c=b.updateQueue;c=null!==c?c.lastEffect:null;if(null!==c){var d=c=c.next;do 3===(d.tag&3)&&(a=d.destroy,d.destroy=void 0,void 0!==a&&a()),d=d.next;while(d!==c)}return;case 1:return;case 5:c=b.stateNode;if(null!=c){d=b.memoizedProps;var e=null!==a?a.memoizedProps:d;a=b.type;var f=b.updateQueue;b.updateQueue=null;if(null!==f){c[xf]=d;\"input\"===a&&\"radio\"===d.type&&null!=d.name&&$a(c,d);wb(a,e);b=wb(a,d);for(e=0;e<f.length;e+=\n2){var g=f[e],h=f[e+1];\"style\"===g?tb(c,h):\"dangerouslySetInnerHTML\"===g?ob(c,h):\"children\"===g?pb(c,h):qa(c,g,h,b)}switch(a){case \"input\":ab(c,d);break;case \"textarea\":ib(c,d);break;case \"select\":a=c._wrapperState.wasMultiple,c._wrapperState.wasMultiple=!!d.multiple,f=d.value,null!=f?fb(c,!!d.multiple,f,!1):a!==!!d.multiple&&(null!=d.defaultValue?fb(c,!!d.multiple,d.defaultValue,!0):fb(c,!!d.multiple,d.multiple?[]:\"\",!1))}}}return;case 6:if(null===b.stateNode)throw Error(y(162));b.stateNode.nodeValue=\nb.memoizedProps;return;case 3:c=b.stateNode;c.hydrate&&(c.hydrate=!1,Cc(c.containerInfo));return;case 12:return;case 13:null!==b.memoizedState&&(jj=O(),aj(b.child,!0));kj(b);return;case 19:kj(b);return;case 17:return;case 23:case 24:aj(b,null!==b.memoizedState);return}throw Error(y(163));}function kj(a){var b=a.updateQueue;if(null!==b){a.updateQueue=null;var c=a.stateNode;null===c&&(c=a.stateNode=new Ui);b.forEach(function(b){var d=lj.bind(null,a,b);c.has(b)||(c.add(b),b.then(d,d))})}}\nfunction mj(a,b){return null!==a&&(a=a.memoizedState,null===a||null!==a.dehydrated)?(b=b.memoizedState,null!==b&&null===b.dehydrated):!1}var nj=Math.ceil,oj=ra.ReactCurrentDispatcher,pj=ra.ReactCurrentOwner,X=0,U=null,Y=null,W=0,qj=0,rj=Bf(0),V=0,sj=null,tj=0,Dg=0,Hi=0,uj=0,vj=null,jj=0,Ji=Infinity;function wj(){Ji=O()+500}var Z=null,Qi=!1,Ri=null,Ti=null,xj=!1,yj=null,zj=90,Aj=[],Bj=[],Cj=null,Dj=0,Ej=null,Fj=-1,Gj=0,Hj=0,Ij=null,Jj=!1;function Hg(){return 0!==(X&48)?O():-1!==Fj?Fj:Fj=O()}\nfunction Ig(a){a=a.mode;if(0===(a&2))return 1;if(0===(a&4))return 99===eg()?1:2;0===Gj&&(Gj=tj);if(0!==kg.transition){0!==Hj&&(Hj=null!==vj?vj.pendingLanes:0);a=Gj;var b=4186112&~Hj;b&=-b;0===b&&(a=4186112&~a,b=a&-a,0===b&&(b=8192));return b}a=eg();0!==(X&4)&&98===a?a=Xc(12,Gj):(a=Sc(a),a=Xc(a,Gj));return a}\nfunction Jg(a,b,c){if(50<Dj)throw Dj=0,Ej=null,Error(y(185));a=Kj(a,b);if(null===a)return null;$c(a,b,c);a===U&&(Hi|=b,4===V&&Ii(a,W));var d=eg();1===b?0!==(X&8)&&0===(X&48)?Lj(a):(Mj(a,c),0===X&&(wj(),ig())):(0===(X&4)||98!==d&&99!==d||(null===Cj?Cj=new Set([a]):Cj.add(a)),Mj(a,c));vj=a}function Kj(a,b){a.lanes|=b;var c=a.alternate;null!==c&&(c.lanes|=b);c=a;for(a=a.return;null!==a;)a.childLanes|=b,c=a.alternate,null!==c&&(c.childLanes|=b),c=a,a=a.return;return 3===c.tag?c.stateNode:null}\nfunction Mj(a,b){for(var c=a.callbackNode,d=a.suspendedLanes,e=a.pingedLanes,f=a.expirationTimes,g=a.pendingLanes;0<g;){var h=31-Vc(g),k=1<<h,l=f[h];if(-1===l){if(0===(k&d)||0!==(k&e)){l=b;Rc(k);var n=F;f[h]=10<=n?l+250:6<=n?l+5E3:-1}}else l<=b&&(a.expiredLanes|=k);g&=~k}d=Uc(a,a===U?W:0);b=F;if(0===d)null!==c&&(c!==Zf&&Pf(c),a.callbackNode=null,a.callbackPriority=0);else{if(null!==c){if(a.callbackPriority===b)return;c!==Zf&&Pf(c)}15===b?(c=Lj.bind(null,a),null===ag?(ag=[c],bg=Of(Uf,jg)):ag.push(c),\nc=Zf):14===b?c=hg(99,Lj.bind(null,a)):(c=Tc(b),c=hg(c,Nj.bind(null,a)));a.callbackPriority=b;a.callbackNode=c}}\nfunction Nj(a){Fj=-1;Hj=Gj=0;if(0!==(X&48))throw Error(y(327));var b=a.callbackNode;if(Oj()&&a.callbackNode!==b)return null;var c=Uc(a,a===U?W:0);if(0===c)return null;var d=c;var e=X;X|=16;var f=Pj();if(U!==a||W!==d)wj(),Qj(a,d);do try{Rj();break}catch(h){Sj(a,h)}while(1);qg();oj.current=f;X=e;null!==Y?d=0:(U=null,W=0,d=V);if(0!==(tj&Hi))Qj(a,0);else if(0!==d){2===d&&(X|=64,a.hydrate&&(a.hydrate=!1,qf(a.containerInfo)),c=Wc(a),0!==c&&(d=Tj(a,c)));if(1===d)throw b=sj,Qj(a,0),Ii(a,c),Mj(a,O()),b;a.finishedWork=\na.current.alternate;a.finishedLanes=c;switch(d){case 0:case 1:throw Error(y(345));case 2:Uj(a);break;case 3:Ii(a,c);if((c&62914560)===c&&(d=jj+500-O(),10<d)){if(0!==Uc(a,0))break;e=a.suspendedLanes;if((e&c)!==c){Hg();a.pingedLanes|=a.suspendedLanes&e;break}a.timeoutHandle=of(Uj.bind(null,a),d);break}Uj(a);break;case 4:Ii(a,c);if((c&4186112)===c)break;d=a.eventTimes;for(e=-1;0<c;){var g=31-Vc(c);f=1<<g;g=d[g];g>e&&(e=g);c&=~f}c=e;c=O()-c;c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3E3>c?3E3:4320>\nc?4320:1960*nj(c/1960))-c;if(10<c){a.timeoutHandle=of(Uj.bind(null,a),c);break}Uj(a);break;case 5:Uj(a);break;default:throw Error(y(329));}}Mj(a,O());return a.callbackNode===b?Nj.bind(null,a):null}function Ii(a,b){b&=~uj;b&=~Hi;a.suspendedLanes|=b;a.pingedLanes&=~b;for(a=a.expirationTimes;0<b;){var c=31-Vc(b),d=1<<c;a[c]=-1;b&=~d}}\nfunction Lj(a){if(0!==(X&48))throw Error(y(327));Oj();if(a===U&&0!==(a.expiredLanes&W)){var b=W;var c=Tj(a,b);0!==(tj&Hi)&&(b=Uc(a,b),c=Tj(a,b))}else b=Uc(a,0),c=Tj(a,b);0!==a.tag&&2===c&&(X|=64,a.hydrate&&(a.hydrate=!1,qf(a.containerInfo)),b=Wc(a),0!==b&&(c=Tj(a,b)));if(1===c)throw c=sj,Qj(a,0),Ii(a,b),Mj(a,O()),c;a.finishedWork=a.current.alternate;a.finishedLanes=b;Uj(a);Mj(a,O());return null}\nfunction Vj(){if(null!==Cj){var a=Cj;Cj=null;a.forEach(function(a){a.expiredLanes|=24&a.pendingLanes;Mj(a,O())})}ig()}function Wj(a,b){var c=X;X|=1;try{return a(b)}finally{X=c,0===X&&(wj(),ig())}}function Xj(a,b){var c=X;X&=-2;X|=8;try{return a(b)}finally{X=c,0===X&&(wj(),ig())}}function ni(a,b){I(rj,qj);qj|=b;tj|=b}function Ki(){qj=rj.current;H(rj)}\nfunction Qj(a,b){a.finishedWork=null;a.finishedLanes=0;var c=a.timeoutHandle;-1!==c&&(a.timeoutHandle=-1,pf(c));if(null!==Y)for(c=Y.return;null!==c;){var d=c;switch(d.tag){case 1:d=d.type.childContextTypes;null!==d&&void 0!==d&&Gf();break;case 3:fh();H(N);H(M);uh();break;case 5:hh(d);break;case 4:fh();break;case 13:H(P);break;case 19:H(P);break;case 10:rg(d);break;case 23:case 24:Ki()}c=c.return}U=a;Y=Tg(a.current,null);W=qj=tj=b;V=0;sj=null;uj=Hi=Dg=0}\nfunction Sj(a,b){do{var c=Y;try{qg();vh.current=Gh;if(yh){for(var d=R.memoizedState;null!==d;){var e=d.queue;null!==e&&(e.pending=null);d=d.next}yh=!1}xh=0;T=S=R=null;zh=!1;pj.current=null;if(null===c||null===c.return){V=1;sj=b;Y=null;break}a:{var f=a,g=c.return,h=c,k=b;b=W;h.flags|=2048;h.firstEffect=h.lastEffect=null;if(null!==k&&\"object\"===typeof k&&\"function\"===typeof k.then){var l=k;if(0===(h.mode&2)){var n=h.alternate;n?(h.updateQueue=n.updateQueue,h.memoizedState=n.memoizedState,h.lanes=n.lanes):\n(h.updateQueue=null,h.memoizedState=null)}var A=0!==(P.current&1),p=g;do{var C;if(C=13===p.tag){var x=p.memoizedState;if(null!==x)C=null!==x.dehydrated?!0:!1;else{var w=p.memoizedProps;C=void 0===w.fallback?!1:!0!==w.unstable_avoidThisFallback?!0:A?!1:!0}}if(C){var z=p.updateQueue;if(null===z){var u=new Set;u.add(l);p.updateQueue=u}else z.add(l);if(0===(p.mode&2)){p.flags|=64;h.flags|=16384;h.flags&=-2981;if(1===h.tag)if(null===h.alternate)h.tag=17;else{var t=zg(-1,1);t.tag=2;Ag(h,t)}h.lanes|=1;break a}k=\nvoid 0;h=b;var q=f.pingCache;null===q?(q=f.pingCache=new Oi,k=new Set,q.set(l,k)):(k=q.get(l),void 0===k&&(k=new Set,q.set(l,k)));if(!k.has(h)){k.add(h);var v=Yj.bind(null,f,l,h);l.then(v,v)}p.flags|=4096;p.lanes=b;break a}p=p.return}while(null!==p);k=Error((Ra(h.type)||\"A React component\")+\" suspended while rendering, but no fallback UI was specified.\\n\\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.\")}5!==V&&(V=2);k=Mi(k,h);p=\ng;do{switch(p.tag){case 3:f=k;p.flags|=4096;b&=-b;p.lanes|=b;var J=Pi(p,f,b);Bg(p,J);break a;case 1:f=k;var K=p.type,Q=p.stateNode;if(0===(p.flags&64)&&(\"function\"===typeof K.getDerivedStateFromError||null!==Q&&\"function\"===typeof Q.componentDidCatch&&(null===Ti||!Ti.has(Q)))){p.flags|=4096;b&=-b;p.lanes|=b;var L=Si(p,f,b);Bg(p,L);break a}}p=p.return}while(null!==p)}Zj(c)}catch(va){b=va;Y===c&&null!==c&&(Y=c=c.return);continue}break}while(1)}\nfunction Pj(){var a=oj.current;oj.current=Gh;return null===a?Gh:a}function Tj(a,b){var c=X;X|=16;var d=Pj();U===a&&W===b||Qj(a,b);do try{ak();break}catch(e){Sj(a,e)}while(1);qg();X=c;oj.current=d;if(null!==Y)throw Error(y(261));U=null;W=0;return V}function ak(){for(;null!==Y;)bk(Y)}function Rj(){for(;null!==Y&&!Qf();)bk(Y)}function bk(a){var b=ck(a.alternate,a,qj);a.memoizedProps=a.pendingProps;null===b?Zj(a):Y=b;pj.current=null}\nfunction Zj(a){var b=a;do{var c=b.alternate;a=b.return;if(0===(b.flags&2048)){c=Gi(c,b,qj);if(null!==c){Y=c;return}c=b;if(24!==c.tag&&23!==c.tag||null===c.memoizedState||0!==(qj&1073741824)||0===(c.mode&4)){for(var d=0,e=c.child;null!==e;)d|=e.lanes|e.childLanes,e=e.sibling;c.childLanes=d}null!==a&&0===(a.flags&2048)&&(null===a.firstEffect&&(a.firstEffect=b.firstEffect),null!==b.lastEffect&&(null!==a.lastEffect&&(a.lastEffect.nextEffect=b.firstEffect),a.lastEffect=b.lastEffect),1<b.flags&&(null!==\na.lastEffect?a.lastEffect.nextEffect=b:a.firstEffect=b,a.lastEffect=b))}else{c=Li(b);if(null!==c){c.flags&=2047;Y=c;return}null!==a&&(a.firstEffect=a.lastEffect=null,a.flags|=2048)}b=b.sibling;if(null!==b){Y=b;return}Y=b=a}while(null!==b);0===V&&(V=5)}function Uj(a){var b=eg();gg(99,dk.bind(null,a,b));return null}\nfunction dk(a,b){do Oj();while(null!==yj);if(0!==(X&48))throw Error(y(327));var c=a.finishedWork;if(null===c)return null;a.finishedWork=null;a.finishedLanes=0;if(c===a.current)throw Error(y(177));a.callbackNode=null;var d=c.lanes|c.childLanes,e=d,f=a.pendingLanes&~e;a.pendingLanes=e;a.suspendedLanes=0;a.pingedLanes=0;a.expiredLanes&=e;a.mutableReadLanes&=e;a.entangledLanes&=e;e=a.entanglements;for(var g=a.eventTimes,h=a.expirationTimes;0<f;){var k=31-Vc(f),l=1<<k;e[k]=0;g[k]=-1;h[k]=-1;f&=~l}null!==\nCj&&0===(d&24)&&Cj.has(a)&&Cj.delete(a);a===U&&(Y=U=null,W=0);1<c.flags?null!==c.lastEffect?(c.lastEffect.nextEffect=c,d=c.firstEffect):d=c:d=c.firstEffect;if(null!==d){e=X;X|=32;pj.current=null;kf=fd;g=Ne();if(Oe(g)){if(\"selectionStart\"in g)h={start:g.selectionStart,end:g.selectionEnd};else a:if(h=(h=g.ownerDocument)&&h.defaultView||window,(l=h.getSelection&&h.getSelection())&&0!==l.rangeCount){h=l.anchorNode;f=l.anchorOffset;k=l.focusNode;l=l.focusOffset;try{h.nodeType,k.nodeType}catch(va){h=null;\nbreak a}var n=0,A=-1,p=-1,C=0,x=0,w=g,z=null;b:for(;;){for(var u;;){w!==h||0!==f&&3!==w.nodeType||(A=n+f);w!==k||0!==l&&3!==w.nodeType||(p=n+l);3===w.nodeType&&(n+=w.nodeValue.length);if(null===(u=w.firstChild))break;z=w;w=u}for(;;){if(w===g)break b;z===h&&++C===f&&(A=n);z===k&&++x===l&&(p=n);if(null!==(u=w.nextSibling))break;w=z;z=w.parentNode}w=u}h=-1===A||-1===p?null:{start:A,end:p}}else h=null;h=h||{start:0,end:0}}else h=null;lf={focusedElem:g,selectionRange:h};fd=!1;Ij=null;Jj=!1;Z=d;do try{ek()}catch(va){if(null===\nZ)throw Error(y(330));Wi(Z,va);Z=Z.nextEffect}while(null!==Z);Ij=null;Z=d;do try{for(g=a;null!==Z;){var t=Z.flags;t&16&&pb(Z.stateNode,\"\");if(t&128){var q=Z.alternate;if(null!==q){var v=q.ref;null!==v&&(\"function\"===typeof v?v(null):v.current=null)}}switch(t&1038){case 2:fj(Z);Z.flags&=-3;break;case 6:fj(Z);Z.flags&=-3;ij(Z.alternate,Z);break;case 1024:Z.flags&=-1025;break;case 1028:Z.flags&=-1025;ij(Z.alternate,Z);break;case 4:ij(Z.alternate,Z);break;case 8:h=Z;cj(g,h);var J=h.alternate;dj(h);null!==\nJ&&dj(J)}Z=Z.nextEffect}}catch(va){if(null===Z)throw Error(y(330));Wi(Z,va);Z=Z.nextEffect}while(null!==Z);v=lf;q=Ne();t=v.focusedElem;g=v.selectionRange;if(q!==t&&t&&t.ownerDocument&&Me(t.ownerDocument.documentElement,t)){null!==g&&Oe(t)&&(q=g.start,v=g.end,void 0===v&&(v=q),\"selectionStart\"in t?(t.selectionStart=q,t.selectionEnd=Math.min(v,t.value.length)):(v=(q=t.ownerDocument||document)&&q.defaultView||window,v.getSelection&&(v=v.getSelection(),h=t.textContent.length,J=Math.min(g.start,h),g=void 0===\ng.end?J:Math.min(g.end,h),!v.extend&&J>g&&(h=g,g=J,J=h),h=Le(t,J),f=Le(t,g),h&&f&&(1!==v.rangeCount||v.anchorNode!==h.node||v.anchorOffset!==h.offset||v.focusNode!==f.node||v.focusOffset!==f.offset)&&(q=q.createRange(),q.setStart(h.node,h.offset),v.removeAllRanges(),J>g?(v.addRange(q),v.extend(f.node,f.offset)):(q.setEnd(f.node,f.offset),v.addRange(q))))));q=[];for(v=t;v=v.parentNode;)1===v.nodeType&&q.push({element:v,left:v.scrollLeft,top:v.scrollTop});\"function\"===typeof t.focus&&t.focus();for(t=\n0;t<q.length;t++)v=q[t],v.element.scrollLeft=v.left,v.element.scrollTop=v.top}fd=!!kf;lf=kf=null;a.current=c;Z=d;do try{for(t=a;null!==Z;){var K=Z.flags;K&36&&Yi(t,Z.alternate,Z);if(K&128){q=void 0;var Q=Z.ref;if(null!==Q){var L=Z.stateNode;switch(Z.tag){case 5:q=L;break;default:q=L}\"function\"===typeof Q?Q(q):Q.current=q}}Z=Z.nextEffect}}catch(va){if(null===Z)throw Error(y(330));Wi(Z,va);Z=Z.nextEffect}while(null!==Z);Z=null;$f();X=e}else a.current=c;if(xj)xj=!1,yj=a,zj=b;else for(Z=d;null!==Z;)b=\nZ.nextEffect,Z.nextEffect=null,Z.flags&8&&(K=Z,K.sibling=null,K.stateNode=null),Z=b;d=a.pendingLanes;0===d&&(Ti=null);1===d?a===Ej?Dj++:(Dj=0,Ej=a):Dj=0;c=c.stateNode;if(Mf&&\"function\"===typeof Mf.onCommitFiberRoot)try{Mf.onCommitFiberRoot(Lf,c,void 0,64===(c.current.flags&64))}catch(va){}Mj(a,O());if(Qi)throw Qi=!1,a=Ri,Ri=null,a;if(0!==(X&8))return null;ig();return null}\nfunction ek(){for(;null!==Z;){var a=Z.alternate;Jj||null===Ij||(0!==(Z.flags&8)?dc(Z,Ij)&&(Jj=!0):13===Z.tag&&mj(a,Z)&&dc(Z,Ij)&&(Jj=!0));var b=Z.flags;0!==(b&256)&&Xi(a,Z);0===(b&512)||xj||(xj=!0,hg(97,function(){Oj();return null}));Z=Z.nextEffect}}function Oj(){if(90!==zj){var a=97<zj?97:zj;zj=90;return gg(a,fk)}return!1}function $i(a,b){Aj.push(b,a);xj||(xj=!0,hg(97,function(){Oj();return null}))}function Zi(a,b){Bj.push(b,a);xj||(xj=!0,hg(97,function(){Oj();return null}))}\nfunction fk(){if(null===yj)return!1;var a=yj;yj=null;if(0!==(X&48))throw Error(y(331));var b=X;X|=32;var c=Bj;Bj=[];for(var d=0;d<c.length;d+=2){var e=c[d],f=c[d+1],g=e.destroy;e.destroy=void 0;if(\"function\"===typeof g)try{g()}catch(k){if(null===f)throw Error(y(330));Wi(f,k)}}c=Aj;Aj=[];for(d=0;d<c.length;d+=2){e=c[d];f=c[d+1];try{var h=e.create;e.destroy=h()}catch(k){if(null===f)throw Error(y(330));Wi(f,k)}}for(h=a.current.firstEffect;null!==h;)a=h.nextEffect,h.nextEffect=null,h.flags&8&&(h.sibling=\nnull,h.stateNode=null),h=a;X=b;ig();return!0}function gk(a,b,c){b=Mi(c,b);b=Pi(a,b,1);Ag(a,b);b=Hg();a=Kj(a,1);null!==a&&($c(a,1,b),Mj(a,b))}\nfunction Wi(a,b){if(3===a.tag)gk(a,a,b);else for(var c=a.return;null!==c;){if(3===c.tag){gk(c,a,b);break}else if(1===c.tag){var d=c.stateNode;if(\"function\"===typeof c.type.getDerivedStateFromError||\"function\"===typeof d.componentDidCatch&&(null===Ti||!Ti.has(d))){a=Mi(b,a);var e=Si(c,a,1);Ag(c,e);e=Hg();c=Kj(c,1);if(null!==c)$c(c,1,e),Mj(c,e);else if(\"function\"===typeof d.componentDidCatch&&(null===Ti||!Ti.has(d)))try{d.componentDidCatch(b,a)}catch(f){}break}}c=c.return}}\nfunction Yj(a,b,c){var d=a.pingCache;null!==d&&d.delete(b);b=Hg();a.pingedLanes|=a.suspendedLanes&c;U===a&&(W&c)===c&&(4===V||3===V&&(W&62914560)===W&&500>O()-jj?Qj(a,0):uj|=c);Mj(a,b)}function lj(a,b){var c=a.stateNode;null!==c&&c.delete(b);b=0;0===b&&(b=a.mode,0===(b&2)?b=1:0===(b&4)?b=99===eg()?1:2:(0===Gj&&(Gj=tj),b=Yc(62914560&~Gj),0===b&&(b=4194304)));c=Hg();a=Kj(a,b);null!==a&&($c(a,b,c),Mj(a,c))}var ck;\nck=function(a,b,c){var d=b.lanes;if(null!==a)if(a.memoizedProps!==b.pendingProps||N.current)ug=!0;else if(0!==(c&d))ug=0!==(a.flags&16384)?!0:!1;else{ug=!1;switch(b.tag){case 3:ri(b);sh();break;case 5:gh(b);break;case 1:Ff(b.type)&&Jf(b);break;case 4:eh(b,b.stateNode.containerInfo);break;case 10:d=b.memoizedProps.value;var e=b.type._context;I(mg,e._currentValue);e._currentValue=d;break;case 13:if(null!==b.memoizedState){if(0!==(c&b.child.childLanes))return ti(a,b,c);I(P,P.current&1);b=hi(a,b,c);return null!==\nb?b.sibling:null}I(P,P.current&1);break;case 19:d=0!==(c&b.childLanes);if(0!==(a.flags&64)){if(d)return Ai(a,b,c);b.flags|=64}e=b.memoizedState;null!==e&&(e.rendering=null,e.tail=null,e.lastEffect=null);I(P,P.current);if(d)break;else return null;case 23:case 24:return b.lanes=0,mi(a,b,c)}return hi(a,b,c)}else ug=!1;b.lanes=0;switch(b.tag){case 2:d=b.type;null!==a&&(a.alternate=null,b.alternate=null,b.flags|=2);a=b.pendingProps;e=Ef(b,M.current);tg(b,c);e=Ch(null,b,d,a,e,c);b.flags|=1;if(\"object\"===\ntypeof e&&null!==e&&\"function\"===typeof e.render&&void 0===e.$$typeof){b.tag=1;b.memoizedState=null;b.updateQueue=null;if(Ff(d)){var f=!0;Jf(b)}else f=!1;b.memoizedState=null!==e.state&&void 0!==e.state?e.state:null;xg(b);var g=d.getDerivedStateFromProps;\"function\"===typeof g&&Gg(b,d,g,a);e.updater=Kg;b.stateNode=e;e._reactInternals=b;Og(b,d,a,c);b=qi(null,b,d,!0,f,c)}else b.tag=0,fi(null,b,e,c),b=b.child;return b;case 16:e=b.elementType;a:{null!==a&&(a.alternate=null,b.alternate=null,b.flags|=2);\na=b.pendingProps;f=e._init;e=f(e._payload);b.type=e;f=b.tag=hk(e);a=lg(e,a);switch(f){case 0:b=li(null,b,e,a,c);break a;case 1:b=pi(null,b,e,a,c);break a;case 11:b=gi(null,b,e,a,c);break a;case 14:b=ii(null,b,e,lg(e.type,a),d,c);break a}throw Error(y(306,e,\"\"));}return b;case 0:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:lg(d,e),li(a,b,d,e,c);case 1:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:lg(d,e),pi(a,b,d,e,c);case 3:ri(b);d=b.updateQueue;if(null===a||null===d)throw Error(y(282));\nd=b.pendingProps;e=b.memoizedState;e=null!==e?e.element:null;yg(a,b);Cg(b,d,null,c);d=b.memoizedState.element;if(d===e)sh(),b=hi(a,b,c);else{e=b.stateNode;if(f=e.hydrate)kh=rf(b.stateNode.containerInfo.firstChild),jh=b,f=lh=!0;if(f){a=e.mutableSourceEagerHydrationData;if(null!=a)for(e=0;e<a.length;e+=2)f=a[e],f._workInProgressVersionPrimary=a[e+1],th.push(f);c=Zg(b,null,d,c);for(b.child=c;c;)c.flags=c.flags&-3|1024,c=c.sibling}else fi(a,b,d,c),sh();b=b.child}return b;case 5:return gh(b),null===a&&\nph(b),d=b.type,e=b.pendingProps,f=null!==a?a.memoizedProps:null,g=e.children,nf(d,e)?g=null:null!==f&&nf(d,f)&&(b.flags|=16),oi(a,b),fi(a,b,g,c),b.child;case 6:return null===a&&ph(b),null;case 13:return ti(a,b,c);case 4:return eh(b,b.stateNode.containerInfo),d=b.pendingProps,null===a?b.child=Yg(b,null,d,c):fi(a,b,d,c),b.child;case 11:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:lg(d,e),gi(a,b,d,e,c);case 7:return fi(a,b,b.pendingProps,c),b.child;case 8:return fi(a,b,b.pendingProps.children,\nc),b.child;case 12:return fi(a,b,b.pendingProps.children,c),b.child;case 10:a:{d=b.type._context;e=b.pendingProps;g=b.memoizedProps;f=e.value;var h=b.type._context;I(mg,h._currentValue);h._currentValue=f;if(null!==g)if(h=g.value,f=He(h,f)?0:(\"function\"===typeof d._calculateChangedBits?d._calculateChangedBits(h,f):1073741823)|0,0===f){if(g.children===e.children&&!N.current){b=hi(a,b,c);break a}}else for(h=b.child,null!==h&&(h.return=b);null!==h;){var k=h.dependencies;if(null!==k){g=h.child;for(var l=\nk.firstContext;null!==l;){if(l.context===d&&0!==(l.observedBits&f)){1===h.tag&&(l=zg(-1,c&-c),l.tag=2,Ag(h,l));h.lanes|=c;l=h.alternate;null!==l&&(l.lanes|=c);sg(h.return,c);k.lanes|=c;break}l=l.next}}else g=10===h.tag?h.type===b.type?null:h.child:h.child;if(null!==g)g.return=h;else for(g=h;null!==g;){if(g===b){g=null;break}h=g.sibling;if(null!==h){h.return=g.return;g=h;break}g=g.return}h=g}fi(a,b,e.children,c);b=b.child}return b;case 9:return e=b.type,f=b.pendingProps,d=f.children,tg(b,c),e=vg(e,\nf.unstable_observedBits),d=d(e),b.flags|=1,fi(a,b,d,c),b.child;case 14:return e=b.type,f=lg(e,b.pendingProps),f=lg(e.type,f),ii(a,b,e,f,d,c);case 15:return ki(a,b,b.type,b.pendingProps,d,c);case 17:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:lg(d,e),null!==a&&(a.alternate=null,b.alternate=null,b.flags|=2),b.tag=1,Ff(d)?(a=!0,Jf(b)):a=!1,tg(b,c),Mg(b,d,e),Og(b,d,e,c),qi(null,b,d,!0,a,c);case 19:return Ai(a,b,c);case 23:return mi(a,b,c);case 24:return mi(a,b,c)}throw Error(y(156,b.tag));\n};function ik(a,b,c,d){this.tag=a;this.key=c;this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null;this.index=0;this.ref=null;this.pendingProps=b;this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null;this.mode=d;this.flags=0;this.lastEffect=this.firstEffect=this.nextEffect=null;this.childLanes=this.lanes=0;this.alternate=null}function nh(a,b,c,d){return new ik(a,b,c,d)}function ji(a){a=a.prototype;return!(!a||!a.isReactComponent)}\nfunction hk(a){if(\"function\"===typeof a)return ji(a)?1:0;if(void 0!==a&&null!==a){a=a.$$typeof;if(a===Aa)return 11;if(a===Da)return 14}return 2}\nfunction Tg(a,b){var c=a.alternate;null===c?(c=nh(a.tag,b,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=b,c.type=a.type,c.flags=0,c.nextEffect=null,c.firstEffect=null,c.lastEffect=null);c.childLanes=a.childLanes;c.lanes=a.lanes;c.child=a.child;c.memoizedProps=a.memoizedProps;c.memoizedState=a.memoizedState;c.updateQueue=a.updateQueue;b=a.dependencies;c.dependencies=null===b?null:{lanes:b.lanes,firstContext:b.firstContext};\nc.sibling=a.sibling;c.index=a.index;c.ref=a.ref;return c}\nfunction Vg(a,b,c,d,e,f){var g=2;d=a;if(\"function\"===typeof a)ji(a)&&(g=1);else if(\"string\"===typeof a)g=5;else a:switch(a){case ua:return Xg(c.children,e,f,b);case Ha:g=8;e|=16;break;case wa:g=8;e|=1;break;case xa:return a=nh(12,c,b,e|8),a.elementType=xa,a.type=xa,a.lanes=f,a;case Ba:return a=nh(13,c,b,e),a.type=Ba,a.elementType=Ba,a.lanes=f,a;case Ca:return a=nh(19,c,b,e),a.elementType=Ca,a.lanes=f,a;case Ia:return vi(c,e,f,b);case Ja:return a=nh(24,c,b,e),a.elementType=Ja,a.lanes=f,a;default:if(\"object\"===\ntypeof a&&null!==a)switch(a.$$typeof){case ya:g=10;break a;case za:g=9;break a;case Aa:g=11;break a;case Da:g=14;break a;case Ea:g=16;d=null;break a;case Fa:g=22;break a}throw Error(y(130,null==a?a:typeof a,\"\"));}b=nh(g,c,b,e);b.elementType=a;b.type=d;b.lanes=f;return b}function Xg(a,b,c,d){a=nh(7,a,d,b);a.lanes=c;return a}function vi(a,b,c,d){a=nh(23,a,d,b);a.elementType=Ia;a.lanes=c;return a}function Ug(a,b,c){a=nh(6,a,null,b);a.lanes=c;return a}\nfunction Wg(a,b,c){b=nh(4,null!==a.children?a.children:[],a.key,b);b.lanes=c;b.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation};return b}\nfunction jk(a,b,c){this.tag=b;this.containerInfo=a;this.finishedWork=this.pingCache=this.current=this.pendingChildren=null;this.timeoutHandle=-1;this.pendingContext=this.context=null;this.hydrate=c;this.callbackNode=null;this.callbackPriority=0;this.eventTimes=Zc(0);this.expirationTimes=Zc(-1);this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0;this.entanglements=Zc(0);this.mutableSourceEagerHydrationData=null}\nfunction kk(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:ta,key:null==d?null:\"\"+d,children:a,containerInfo:b,implementation:c}}\nfunction lk(a,b,c,d){var e=b.current,f=Hg(),g=Ig(e);a:if(c){c=c._reactInternals;b:{if(Zb(c)!==c||1!==c.tag)throw Error(y(170));var h=c;do{switch(h.tag){case 3:h=h.stateNode.context;break b;case 1:if(Ff(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break b}}h=h.return}while(null!==h);throw Error(y(171));}if(1===c.tag){var k=c.type;if(Ff(k)){c=If(c,k,h);break a}}c=h}else c=Cf;null===b.context?b.context=c:b.pendingContext=c;b=zg(f,g);b.payload={element:a};d=void 0===d?null:d;null!==\nd&&(b.callback=d);Ag(e,b);Jg(e,g,f);return g}function mk(a){a=a.current;if(!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function nk(a,b){a=a.memoizedState;if(null!==a&&null!==a.dehydrated){var c=a.retryLane;a.retryLane=0!==c&&c<b?c:b}}function ok(a,b){nk(a,b);(a=a.alternate)&&nk(a,b)}function pk(){return null}\nfunction qk(a,b,c){var d=null!=c&&null!=c.hydrationOptions&&c.hydrationOptions.mutableSources||null;c=new jk(a,b,null!=c&&!0===c.hydrate);b=nh(3,null,null,2===b?7:1===b?3:0);c.current=b;b.stateNode=c;xg(b);a[ff]=c.current;cf(8===a.nodeType?a.parentNode:a);if(d)for(a=0;a<d.length;a++){b=d[a];var e=b._getVersion;e=e(b._source);null==c.mutableSourceEagerHydrationData?c.mutableSourceEagerHydrationData=[b,e]:c.mutableSourceEagerHydrationData.push(b,e)}this._internalRoot=c}\nqk.prototype.render=function(a){lk(a,this._internalRoot,null,null)};qk.prototype.unmount=function(){var a=this._internalRoot,b=a.containerInfo;lk(null,a,null,function(){b[ff]=null})};function rk(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType&&(8!==a.nodeType||\" react-mount-point-unstable \"!==a.nodeValue))}\nfunction sk(a,b){b||(b=a?9===a.nodeType?a.documentElement:a.firstChild:null,b=!(!b||1!==b.nodeType||!b.hasAttribute(\"data-reactroot\")));if(!b)for(var c;c=a.lastChild;)a.removeChild(c);return new qk(a,0,b?{hydrate:!0}:void 0)}\nfunction tk(a,b,c,d,e){var f=c._reactRootContainer;if(f){var g=f._internalRoot;if(\"function\"===typeof e){var h=e;e=function(){var a=mk(g);h.call(a)}}lk(b,g,a,e)}else{f=c._reactRootContainer=sk(c,d);g=f._internalRoot;if(\"function\"===typeof e){var k=e;e=function(){var a=mk(g);k.call(a)}}Xj(function(){lk(b,g,a,e)})}return mk(g)}ec=function(a){if(13===a.tag){var b=Hg();Jg(a,4,b);ok(a,4)}};fc=function(a){if(13===a.tag){var b=Hg();Jg(a,67108864,b);ok(a,67108864)}};\ngc=function(a){if(13===a.tag){var b=Hg(),c=Ig(a);Jg(a,c,b);ok(a,c)}};hc=function(a,b){return b()};\nyb=function(a,b,c){switch(b){case \"input\":ab(a,c);b=c.name;if(\"radio\"===c.type&&null!=b){for(c=a;c.parentNode;)c=c.parentNode;c=c.querySelectorAll(\"input[name=\"+JSON.stringify(\"\"+b)+'][type=\"radio\"]');for(b=0;b<c.length;b++){var d=c[b];if(d!==a&&d.form===a.form){var e=Db(d);if(!e)throw Error(y(90));Wa(d);ab(d,e)}}}break;case \"textarea\":ib(a,c);break;case \"select\":b=c.value,null!=b&&fb(a,!!c.multiple,b,!1)}};Gb=Wj;\nHb=function(a,b,c,d,e){var f=X;X|=4;try{return gg(98,a.bind(null,b,c,d,e))}finally{X=f,0===X&&(wj(),ig())}};Ib=function(){0===(X&49)&&(Vj(),Oj())};Jb=function(a,b){var c=X;X|=2;try{return a(b)}finally{X=c,0===X&&(wj(),ig())}};function uk(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!rk(b))throw Error(y(200));return kk(a,b,null,c)}var vk={Events:[Cb,ue,Db,Eb,Fb,Oj,{current:!1}]},wk={findFiberByHostInstance:wc,bundleType:0,version:\"17.0.1\",rendererPackageName:\"react-dom\"};\nvar xk={bundleType:wk.bundleType,version:wk.version,rendererPackageName:wk.rendererPackageName,rendererConfig:wk.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ra.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){a=cc(a);return null===a?null:a.stateNode},findFiberByHostInstance:wk.findFiberByHostInstance||\npk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(\"undefined\"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var yk=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yk.isDisabled&&yk.supportsFiber)try{Lf=yk.inject(xk),Mf=yk}catch(a){}}exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vk;exports.createPortal=uk;\nexports.findDOMNode=function(a){if(null==a)return null;if(1===a.nodeType)return a;var b=a._reactInternals;if(void 0===b){if(\"function\"===typeof a.render)throw Error(y(188));throw Error(y(268,Object.keys(a)));}a=cc(b);a=null===a?null:a.stateNode;return a};exports.flushSync=function(a,b){var c=X;if(0!==(c&48))return a(b);X|=1;try{if(a)return gg(99,a.bind(null,b))}finally{X=c,ig()}};exports.hydrate=function(a,b,c){if(!rk(b))throw Error(y(200));return tk(null,a,b,!0,c)};\nexports.render=function(a,b,c){if(!rk(b))throw Error(y(200));return tk(null,a,b,!1,c)};exports.unmountComponentAtNode=function(a){if(!rk(a))throw Error(y(40));return a._reactRootContainer?(Xj(function(){tk(null,null,a,!1,function(){a._reactRootContainer=null;a[ff]=null})}),!0):!1};exports.unstable_batchedUpdates=Wj;exports.unstable_createPortal=function(a,b){return uk(a,b,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)};\nexports.unstable_renderSubtreeIntoContainer=function(a,b,c,d){if(!rk(c))throw Error(y(200));if(null==a||void 0===a._reactInternals)throw Error(y(38));return tk(a,b,c,!1,d)};exports.version=\"17.0.1\";\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/scheduler.production.min.js');\n} else {\n  module.exports = require('./cjs/scheduler.development.js');\n}\n","/** @license React v0.20.1\n * scheduler.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f,g,h,k;if(\"object\"===typeof performance&&\"function\"===typeof performance.now){var l=performance;exports.unstable_now=function(){return l.now()}}else{var p=Date,q=p.now();exports.unstable_now=function(){return p.now()-q}}\nif(\"undefined\"===typeof window||\"function\"!==typeof MessageChannel){var t=null,u=null,w=function(){if(null!==t)try{var a=exports.unstable_now();t(!0,a);t=null}catch(b){throw setTimeout(w,0),b;}};f=function(a){null!==t?setTimeout(f,0,a):(t=a,setTimeout(w,0))};g=function(a,b){u=setTimeout(a,b)};h=function(){clearTimeout(u)};exports.unstable_shouldYield=function(){return!1};k=exports.unstable_forceFrameRate=function(){}}else{var x=window.setTimeout,y=window.clearTimeout;if(\"undefined\"!==typeof console){var z=\nwindow.cancelAnimationFrame;\"function\"!==typeof window.requestAnimationFrame&&console.error(\"This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills\");\"function\"!==typeof z&&console.error(\"This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills\")}var A=!1,B=null,C=-1,D=5,E=0;exports.unstable_shouldYield=function(){return exports.unstable_now()>=\nE};k=function(){};exports.unstable_forceFrameRate=function(a){0>a||125<a?console.error(\"forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported\"):D=0<a?Math.floor(1E3/a):5};var F=new MessageChannel,G=F.port2;F.port1.onmessage=function(){if(null!==B){var a=exports.unstable_now();E=a+D;try{B(!0,a)?G.postMessage(null):(A=!1,B=null)}catch(b){throw G.postMessage(null),b;}}else A=!1};f=function(a){B=a;A||(A=!0,G.postMessage(null))};g=function(a,b){C=\nx(function(){a(exports.unstable_now())},b)};h=function(){y(C);C=-1}}function H(a,b){var c=a.length;a.push(b);a:for(;;){var d=c-1>>>1,e=a[d];if(void 0!==e&&0<I(e,b))a[d]=b,a[c]=e,c=d;else break a}}function J(a){a=a[0];return void 0===a?null:a}\nfunction K(a){var b=a[0];if(void 0!==b){var c=a.pop();if(c!==b){a[0]=c;a:for(var d=0,e=a.length;d<e;){var m=2*(d+1)-1,n=a[m],v=m+1,r=a[v];if(void 0!==n&&0>I(n,c))void 0!==r&&0>I(r,n)?(a[d]=r,a[v]=c,d=v):(a[d]=n,a[m]=c,d=m);else if(void 0!==r&&0>I(r,c))a[d]=r,a[v]=c,d=v;else break a}}return b}return null}function I(a,b){var c=a.sortIndex-b.sortIndex;return 0!==c?c:a.id-b.id}var L=[],M=[],N=1,O=null,P=3,Q=!1,R=!1,S=!1;\nfunction T(a){for(var b=J(M);null!==b;){if(null===b.callback)K(M);else if(b.startTime<=a)K(M),b.sortIndex=b.expirationTime,H(L,b);else break;b=J(M)}}function U(a){S=!1;T(a);if(!R)if(null!==J(L))R=!0,f(V);else{var b=J(M);null!==b&&g(U,b.startTime-a)}}\nfunction V(a,b){R=!1;S&&(S=!1,h());Q=!0;var c=P;try{T(b);for(O=J(L);null!==O&&(!(O.expirationTime>b)||a&&!exports.unstable_shouldYield());){var d=O.callback;if(\"function\"===typeof d){O.callback=null;P=O.priorityLevel;var e=d(O.expirationTime<=b);b=exports.unstable_now();\"function\"===typeof e?O.callback=e:O===J(L)&&K(L);T(b)}else K(L);O=J(L)}if(null!==O)var m=!0;else{var n=J(M);null!==n&&g(U,n.startTime-b);m=!1}return m}finally{O=null,P=c,Q=!1}}var W=k;exports.unstable_IdlePriority=5;\nexports.unstable_ImmediatePriority=1;exports.unstable_LowPriority=4;exports.unstable_NormalPriority=3;exports.unstable_Profiling=null;exports.unstable_UserBlockingPriority=2;exports.unstable_cancelCallback=function(a){a.callback=null};exports.unstable_continueExecution=function(){R||Q||(R=!0,f(V))};exports.unstable_getCurrentPriorityLevel=function(){return P};exports.unstable_getFirstCallbackNode=function(){return J(L)};\nexports.unstable_next=function(a){switch(P){case 1:case 2:case 3:var b=3;break;default:b=P}var c=P;P=b;try{return a()}finally{P=c}};exports.unstable_pauseExecution=function(){};exports.unstable_requestPaint=W;exports.unstable_runWithPriority=function(a,b){switch(a){case 1:case 2:case 3:case 4:case 5:break;default:a=3}var c=P;P=a;try{return b()}finally{P=c}};\nexports.unstable_scheduleCallback=function(a,b,c){var d=exports.unstable_now();\"object\"===typeof c&&null!==c?(c=c.delay,c=\"number\"===typeof c&&0<c?d+c:d):c=d;switch(a){case 1:var e=-1;break;case 2:e=250;break;case 5:e=1073741823;break;case 4:e=1E4;break;default:e=5E3}e=c+e;a={id:N++,callback:b,priorityLevel:a,startTime:c,expirationTime:e,sortIndex:-1};c>d?(a.sortIndex=c,H(M,a),null===J(L)&&a===J(M)&&(S?h():S=!0,g(U,c-d))):(a.sortIndex=e,H(L,a),R||Q||(R=!0,f(V)));return a};\nexports.unstable_wrapCallback=function(a){var b=P;return function(){var c=P;P=b;try{return a.apply(this,arguments)}finally{P=c}}};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","module.exports = Array.isArray || function (arr) {\n  return Object.prototype.toString.call(arr) == '[object Array]';\n};\n","/** @license React v16.13.1\n * react-is.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';var b=\"function\"===typeof Symbol&&Symbol.for,c=b?Symbol.for(\"react.element\"):60103,d=b?Symbol.for(\"react.portal\"):60106,e=b?Symbol.for(\"react.fragment\"):60107,f=b?Symbol.for(\"react.strict_mode\"):60108,g=b?Symbol.for(\"react.profiler\"):60114,h=b?Symbol.for(\"react.provider\"):60109,k=b?Symbol.for(\"react.context\"):60110,l=b?Symbol.for(\"react.async_mode\"):60111,m=b?Symbol.for(\"react.concurrent_mode\"):60111,n=b?Symbol.for(\"react.forward_ref\"):60112,p=b?Symbol.for(\"react.suspense\"):60113,q=b?\nSymbol.for(\"react.suspense_list\"):60120,r=b?Symbol.for(\"react.memo\"):60115,t=b?Symbol.for(\"react.lazy\"):60116,v=b?Symbol.for(\"react.block\"):60121,w=b?Symbol.for(\"react.fundamental\"):60117,x=b?Symbol.for(\"react.responder\"):60118,y=b?Symbol.for(\"react.scope\"):60119;\nfunction z(a){if(\"object\"===typeof a&&null!==a){var u=a.$$typeof;switch(u){case c:switch(a=a.type,a){case l:case m:case e:case g:case f:case p:return a;default:switch(a=a&&a.$$typeof,a){case k:case n:case t:case r:case h:return a;default:return u}}case d:return u}}}function A(a){return z(a)===m}exports.AsyncMode=l;exports.ConcurrentMode=m;exports.ContextConsumer=k;exports.ContextProvider=h;exports.Element=c;exports.ForwardRef=n;exports.Fragment=e;exports.Lazy=t;exports.Memo=r;exports.Portal=d;\nexports.Profiler=g;exports.StrictMode=f;exports.Suspense=p;exports.isAsyncMode=function(a){return A(a)||z(a)===l};exports.isConcurrentMode=A;exports.isContextConsumer=function(a){return z(a)===k};exports.isContextProvider=function(a){return z(a)===h};exports.isElement=function(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===c};exports.isForwardRef=function(a){return z(a)===n};exports.isFragment=function(a){return z(a)===e};exports.isLazy=function(a){return z(a)===t};\nexports.isMemo=function(a){return z(a)===r};exports.isPortal=function(a){return z(a)===d};exports.isProfiler=function(a){return z(a)===g};exports.isStrictMode=function(a){return z(a)===f};exports.isSuspense=function(a){return z(a)===p};\nexports.isValidElementType=function(a){return\"string\"===typeof a||\"function\"===typeof a||a===e||a===m||a===g||a===f||a===p||a===q||\"object\"===typeof a&&null!==a&&(a.$$typeof===t||a.$$typeof===r||a.$$typeof===h||a.$$typeof===k||a.$$typeof===n||a.$$typeof===w||a.$$typeof===x||a.$$typeof===y||a.$$typeof===v)};exports.typeOf=z;\n","/** @license React v17.0.1\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';require(\"object-assign\");var f=require(\"react\"),g=60103;exports.Fragment=60107;if(\"function\"===typeof Symbol&&Symbol.for){var h=Symbol.for;g=h(\"react.element\");exports.Fragment=h(\"react.fragment\")}var m=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n=Object.prototype.hasOwnProperty,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,k){var b,d={},e=null,l=null;void 0!==k&&(e=\"\"+k);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(l=a.ref);for(b in a)n.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:g,type:c,key:e,ref:l,props:d,_owner:m.current}}exports.jsx=q;exports.jsxs=q;\n","var defineProperty = require(\"./defineProperty\");\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nmodule.exports = _objectSpread2;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","var superPropBase = require(\"./superPropBase\");\n\nfunction _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    module.exports = _get = Reflect.get;\n  } else {\n    module.exports = _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nmodule.exports = _get;","var getPrototypeOf = require(\"./getPrototypeOf\");\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nmodule.exports = _superPropBase;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","var getPrototypeOf = require(\"./getPrototypeOf\");\n\nvar isNativeReflectConstruct = require(\"./isNativeReflectConstruct\");\n\nvar possibleConstructorReturn = require(\"./possibleConstructorReturn\");\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return possibleConstructorReturn(this, result);\n  };\n}\n\nmodule.exports = _createSuper;","function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nmodule.exports = _isNativeReflectConstruct;","var _typeof = require(\"@babel/runtime/helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","var unsupportedIterableToArray = require(\"./unsupportedIterableToArray\");\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it;\n\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (it = unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nmodule.exports = _createForOfIteratorHelper;","var arrayLikeToArray = require(\"./arrayLikeToArray\");\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\n\nmodule.exports = _unsupportedIterableToArray;","function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nmodule.exports = _arrayLikeToArray;","var React = require('react');\nvar attributesToProps = require('./attributes-to-props');\nvar utilities = require('./utilities');\n\nvar setStyleProp = utilities.setStyleProp;\n\n/**\n * Converts DOM nodes to JSX element(s).\n *\n * @param  {DomElement[]} nodes             - DOM nodes.\n * @param  {object}       [options={}]      - Options.\n * @param  {Function}     [options.replace] - Replacer.\n * @param  {object}       [options.library] - Library (React/Preact/etc.).\n * @return {string|JSX.Element|JSX.Element[]}\n */\nfunction domToReact(nodes, options) {\n  options = options || {};\n\n  var library = options.library || React;\n  var cloneElement = library.cloneElement;\n  var createElement = library.createElement;\n  var isValidElement = library.isValidElement;\n\n  var result = [];\n  var node;\n  var hasReplace = typeof options.replace === 'function';\n  var replaceElement;\n  var props;\n  var children;\n  var data;\n  var trim = options.trim;\n\n  for (var i = 0, len = nodes.length; i < len; i++) {\n    node = nodes[i];\n\n    // replace with custom React element (if present)\n    if (hasReplace) {\n      replaceElement = options.replace(node);\n\n      if (isValidElement(replaceElement)) {\n        // set \"key\" prop for sibling elements\n        // https://fb.me/react-warning-keys\n        if (len > 1) {\n          replaceElement = cloneElement(replaceElement, {\n            key: replaceElement.key || i\n          });\n        }\n        result.push(replaceElement);\n        continue;\n      }\n    }\n\n    if (node.type === 'text') {\n      // if trim option is enabled, skip whitespace text nodes\n      if (trim) {\n        data = node.data.trim();\n        if (data) {\n          result.push(node.data);\n        }\n      } else {\n        result.push(node.data);\n      }\n      continue;\n    }\n\n    props = node.attribs;\n    if (skipAttributesToProps(node)) {\n      setStyleProp(props.style, props);\n    } else if (props) {\n      props = attributesToProps(props);\n    }\n\n    children = null;\n\n    switch (node.type) {\n      case 'script':\n      case 'style':\n        // prevent text in <script> or <style> from being escaped\n        // https://reactjs.org/docs/dom-elements.html#dangerouslysetinnerhtml\n        if (node.children[0]) {\n          props.dangerouslySetInnerHTML = {\n            __html: node.children[0].data\n          };\n        }\n        break;\n\n      case 'tag':\n        // setting textarea value in children is an antipattern in React\n        // https://reactjs.org/docs/forms.html#the-textarea-tag\n        if (node.name === 'textarea' && node.children[0]) {\n          props.defaultValue = node.children[0].data;\n        } else if (node.children && node.children.length) {\n          // continue recursion of creating React elements (if applicable)\n          children = domToReact(node.children, options);\n        }\n        break;\n\n      // skip all other cases (e.g., comment)\n      default:\n        continue;\n    }\n\n    // set \"key\" prop for sibling elements\n    // https://fb.me/react-warning-keys\n    if (len > 1) {\n      props.key = i;\n    }\n\n    result.push(createElement(node.name, props, children));\n  }\n\n  return result.length === 1 ? result[0] : result;\n}\n\n/**\n * Determines whether DOM element attributes should be transformed to props.\n * Web Components should not have their attributes transformed except for `style`.\n *\n * @param  {DomElement} node\n * @return {boolean}\n */\nfunction skipAttributesToProps(node) {\n  return (\n    utilities.PRESERVE_CUSTOM_ATTRIBUTES &&\n    node.type === 'tag' &&\n    utilities.isCustomComponent(node.name, node.attribs)\n  );\n}\n\nmodule.exports = domToReact;\n","var HTMLDOMPropertyConfig = require('./lib/HTMLDOMPropertyConfig');\nvar SVGDOMPropertyConfig = require('./lib/SVGDOMPropertyConfig');\nvar injection = require('./lib/injection');\n\nvar MUST_USE_PROPERTY = injection.MUST_USE_PROPERTY;\nvar HAS_BOOLEAN_VALUE = injection.HAS_BOOLEAN_VALUE;\nvar HAS_NUMERIC_VALUE = injection.HAS_NUMERIC_VALUE;\nvar HAS_POSITIVE_NUMERIC_VALUE = injection.HAS_POSITIVE_NUMERIC_VALUE;\nvar HAS_OVERLOADED_BOOLEAN_VALUE = injection.HAS_OVERLOADED_BOOLEAN_VALUE;\n\n/**\n * @see https://github.com/facebook/react/blob/15-stable/src/renderers/dom/shared/DOMProperty.js#L14-L16\n *\n * @param  {Number}  value\n * @param  {Number}  bitmask\n * @return {Boolean}\n */\nfunction checkMask(value, bitmask) {\n  return (value & bitmask) === bitmask;\n}\n\n/**\n * @see https://github.com/facebook/react/blob/15-stable/src/renderers/dom/shared/DOMProperty.js#L57\n *\n * @param {Object}  domPropertyConfig - HTMLDOMPropertyConfig or SVGDOMPropertyConfig\n * @param {Object}  config            - The object to be mutated\n * @param {Boolean} isSVG             - Whether the injected config is HTML or SVG (it assumes the default is HTML)\n */\nfunction injectDOMPropertyConfig(domPropertyConfig, config, isSVG) {\n  var Properties = domPropertyConfig.Properties;\n  var DOMAttributeNames = domPropertyConfig.DOMAttributeNames;\n  var attributeName;\n  var propertyName;\n  var propConfig;\n\n  for (propertyName in Properties) {\n    attributeName =\n      DOMAttributeNames[propertyName] ||\n      (isSVG ? propertyName : propertyName.toLowerCase());\n    propConfig = Properties[propertyName];\n\n    config[attributeName] = {\n      attributeName: attributeName,\n      propertyName: propertyName,\n      mustUseProperty: checkMask(propConfig, MUST_USE_PROPERTY),\n      hasBooleanValue: checkMask(propConfig, HAS_BOOLEAN_VALUE),\n      hasNumericValue: checkMask(propConfig, HAS_NUMERIC_VALUE),\n      hasPositiveNumericValue: checkMask(\n        propConfig,\n        HAS_POSITIVE_NUMERIC_VALUE\n      ),\n      hasOverloadedBooleanValue: checkMask(\n        propConfig,\n        HAS_OVERLOADED_BOOLEAN_VALUE\n      )\n    };\n  }\n}\n\n/**\n * HTML properties config.\n *\n * @type {Object}\n */\nvar html = {};\ninjectDOMPropertyConfig(HTMLDOMPropertyConfig, html);\n\n/**\n * SVG properties config.\n *\n * @type {Object}\n */\nvar svg = {};\ninjectDOMPropertyConfig(SVGDOMPropertyConfig, svg, true);\n\n/**\n * HTML and SVG properties config.\n *\n * @type {Object}\n */\nvar properties = {};\ninjectDOMPropertyConfig(HTMLDOMPropertyConfig, properties);\ninjectDOMPropertyConfig(SVGDOMPropertyConfig, properties, true);\n\nvar ATTRIBUTE_NAME_START_CHAR =\n  ':A-Z_a-z\\\\u00C0-\\\\u00D6\\\\u00D8-\\\\u00F6\\\\u00F8-\\\\u02FF\\\\u0370-\\\\u037D\\\\u037F-\\\\u1FFF\\\\u200C-\\\\u200D\\\\u2070-\\\\u218F\\\\u2C00-\\\\u2FEF\\\\u3001-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFFD';\nvar ATTRIBUTE_NAME_CHAR =\n  ATTRIBUTE_NAME_START_CHAR + '\\\\-.0-9\\\\u00B7\\\\u0300-\\\\u036F\\\\u203F-\\\\u2040';\n\nmodule.exports = {\n  html: html,\n  svg: svg,\n  properties: properties,\n\n  /**\n   * Checks whether a property name is a custom attribute.\n   *\n   * @see https://github.com/facebook/react/blob/15-stable/src/renderers/dom/shared/HTMLDOMPropertyConfig.js#L23-L25\n   *\n   * @param {String}\n   * @return {Boolean}\n   */\n  isCustomAttribute: RegExp.prototype.test.bind(\n    new RegExp('^(data|aria)-[' + ATTRIBUTE_NAME_CHAR + ']*$')\n  )\n};\n","module.exports = {\n  Properties: {\n    autoFocus: 4,\n    accept: 0,\n    acceptCharset: 0,\n    accessKey: 0,\n    action: 0,\n    allowFullScreen: 4,\n    allowTransparency: 0,\n    alt: 0,\n    as: 0,\n    async: 4,\n    autoComplete: 0,\n    autoPlay: 4,\n    capture: 4,\n    cellPadding: 0,\n    cellSpacing: 0,\n    charSet: 0,\n    challenge: 0,\n    checked: 5,\n    cite: 0,\n    classID: 0,\n    className: 0,\n    cols: 24,\n    colSpan: 0,\n    content: 0,\n    contentEditable: 0,\n    contextMenu: 0,\n    controls: 4,\n    controlsList: 0,\n    coords: 0,\n    crossOrigin: 0,\n    data: 0,\n    dateTime: 0,\n    default: 4,\n    defer: 4,\n    dir: 0,\n    disabled: 4,\n    download: 32,\n    draggable: 0,\n    encType: 0,\n    form: 0,\n    formAction: 0,\n    formEncType: 0,\n    formMethod: 0,\n    formNoValidate: 4,\n    formTarget: 0,\n    frameBorder: 0,\n    headers: 0,\n    height: 0,\n    hidden: 4,\n    high: 0,\n    href: 0,\n    hrefLang: 0,\n    htmlFor: 0,\n    httpEquiv: 0,\n    icon: 0,\n    id: 0,\n    inputMode: 0,\n    integrity: 0,\n    is: 0,\n    keyParams: 0,\n    keyType: 0,\n    kind: 0,\n    label: 0,\n    lang: 0,\n    list: 0,\n    loop: 4,\n    low: 0,\n    manifest: 0,\n    marginHeight: 0,\n    marginWidth: 0,\n    max: 0,\n    maxLength: 0,\n    media: 0,\n    mediaGroup: 0,\n    method: 0,\n    min: 0,\n    minLength: 0,\n    multiple: 5,\n    muted: 5,\n    name: 0,\n    nonce: 0,\n    noValidate: 4,\n    open: 4,\n    optimum: 0,\n    pattern: 0,\n    placeholder: 0,\n    playsInline: 4,\n    poster: 0,\n    preload: 0,\n    profile: 0,\n    radioGroup: 0,\n    readOnly: 4,\n    referrerPolicy: 0,\n    rel: 0,\n    required: 4,\n    reversed: 4,\n    role: 0,\n    rows: 24,\n    rowSpan: 8,\n    sandbox: 0,\n    scope: 0,\n    scoped: 4,\n    scrolling: 0,\n    seamless: 4,\n    selected: 5,\n    shape: 0,\n    size: 24,\n    sizes: 0,\n    span: 24,\n    spellCheck: 0,\n    src: 0,\n    srcDoc: 0,\n    srcLang: 0,\n    srcSet: 0,\n    start: 8,\n    step: 0,\n    style: 0,\n    summary: 0,\n    tabIndex: 0,\n    target: 0,\n    title: 0,\n    type: 0,\n    useMap: 0,\n    value: 0,\n    width: 0,\n    wmode: 0,\n    wrap: 0,\n    about: 0,\n    datatype: 0,\n    inlist: 0,\n    prefix: 0,\n    property: 0,\n    resource: 0,\n    typeof: 0,\n    vocab: 0,\n    autoCapitalize: 0,\n    autoCorrect: 0,\n    autoSave: 0,\n    color: 0,\n    itemProp: 0,\n    itemScope: 4,\n    itemType: 0,\n    itemID: 0,\n    itemRef: 0,\n    results: 0,\n    security: 0,\n    unselectable: 0\n  },\n  DOMAttributeNames: {\n    acceptCharset: 'accept-charset',\n    className: 'class',\n    htmlFor: 'for',\n    httpEquiv: 'http-equiv'\n  }\n};\n","module.exports = {\n  Properties: {\n    accentHeight: 0,\n    accumulate: 0,\n    additive: 0,\n    alignmentBaseline: 0,\n    allowReorder: 0,\n    alphabetic: 0,\n    amplitude: 0,\n    arabicForm: 0,\n    ascent: 0,\n    attributeName: 0,\n    attributeType: 0,\n    autoReverse: 0,\n    azimuth: 0,\n    baseFrequency: 0,\n    baseProfile: 0,\n    baselineShift: 0,\n    bbox: 0,\n    begin: 0,\n    bias: 0,\n    by: 0,\n    calcMode: 0,\n    capHeight: 0,\n    clip: 0,\n    clipPath: 0,\n    clipRule: 0,\n    clipPathUnits: 0,\n    colorInterpolation: 0,\n    colorInterpolationFilters: 0,\n    colorProfile: 0,\n    colorRendering: 0,\n    contentScriptType: 0,\n    contentStyleType: 0,\n    cursor: 0,\n    cx: 0,\n    cy: 0,\n    d: 0,\n    decelerate: 0,\n    descent: 0,\n    diffuseConstant: 0,\n    direction: 0,\n    display: 0,\n    divisor: 0,\n    dominantBaseline: 0,\n    dur: 0,\n    dx: 0,\n    dy: 0,\n    edgeMode: 0,\n    elevation: 0,\n    enableBackground: 0,\n    end: 0,\n    exponent: 0,\n    externalResourcesRequired: 0,\n    fill: 0,\n    fillOpacity: 0,\n    fillRule: 0,\n    filter: 0,\n    filterRes: 0,\n    filterUnits: 0,\n    floodColor: 0,\n    floodOpacity: 0,\n    focusable: 0,\n    fontFamily: 0,\n    fontSize: 0,\n    fontSizeAdjust: 0,\n    fontStretch: 0,\n    fontStyle: 0,\n    fontVariant: 0,\n    fontWeight: 0,\n    format: 0,\n    from: 0,\n    fx: 0,\n    fy: 0,\n    g1: 0,\n    g2: 0,\n    glyphName: 0,\n    glyphOrientationHorizontal: 0,\n    glyphOrientationVertical: 0,\n    glyphRef: 0,\n    gradientTransform: 0,\n    gradientUnits: 0,\n    hanging: 0,\n    horizAdvX: 0,\n    horizOriginX: 0,\n    ideographic: 0,\n    imageRendering: 0,\n    in: 0,\n    in2: 0,\n    intercept: 0,\n    k: 0,\n    k1: 0,\n    k2: 0,\n    k3: 0,\n    k4: 0,\n    kernelMatrix: 0,\n    kernelUnitLength: 0,\n    kerning: 0,\n    keyPoints: 0,\n    keySplines: 0,\n    keyTimes: 0,\n    lengthAdjust: 0,\n    letterSpacing: 0,\n    lightingColor: 0,\n    limitingConeAngle: 0,\n    local: 0,\n    markerEnd: 0,\n    markerMid: 0,\n    markerStart: 0,\n    markerHeight: 0,\n    markerUnits: 0,\n    markerWidth: 0,\n    mask: 0,\n    maskContentUnits: 0,\n    maskUnits: 0,\n    mathematical: 0,\n    mode: 0,\n    numOctaves: 0,\n    offset: 0,\n    opacity: 0,\n    operator: 0,\n    order: 0,\n    orient: 0,\n    orientation: 0,\n    origin: 0,\n    overflow: 0,\n    overlinePosition: 0,\n    overlineThickness: 0,\n    paintOrder: 0,\n    panose1: 0,\n    pathLength: 0,\n    patternContentUnits: 0,\n    patternTransform: 0,\n    patternUnits: 0,\n    pointerEvents: 0,\n    points: 0,\n    pointsAtX: 0,\n    pointsAtY: 0,\n    pointsAtZ: 0,\n    preserveAlpha: 0,\n    preserveAspectRatio: 0,\n    primitiveUnits: 0,\n    r: 0,\n    radius: 0,\n    refX: 0,\n    refY: 0,\n    renderingIntent: 0,\n    repeatCount: 0,\n    repeatDur: 0,\n    requiredExtensions: 0,\n    requiredFeatures: 0,\n    restart: 0,\n    result: 0,\n    rotate: 0,\n    rx: 0,\n    ry: 0,\n    scale: 0,\n    seed: 0,\n    shapeRendering: 0,\n    slope: 0,\n    spacing: 0,\n    specularConstant: 0,\n    specularExponent: 0,\n    speed: 0,\n    spreadMethod: 0,\n    startOffset: 0,\n    stdDeviation: 0,\n    stemh: 0,\n    stemv: 0,\n    stitchTiles: 0,\n    stopColor: 0,\n    stopOpacity: 0,\n    strikethroughPosition: 0,\n    strikethroughThickness: 0,\n    string: 0,\n    stroke: 0,\n    strokeDasharray: 0,\n    strokeDashoffset: 0,\n    strokeLinecap: 0,\n    strokeLinejoin: 0,\n    strokeMiterlimit: 0,\n    strokeOpacity: 0,\n    strokeWidth: 0,\n    surfaceScale: 0,\n    systemLanguage: 0,\n    tableValues: 0,\n    targetX: 0,\n    targetY: 0,\n    textAnchor: 0,\n    textDecoration: 0,\n    textRendering: 0,\n    textLength: 0,\n    to: 0,\n    transform: 0,\n    u1: 0,\n    u2: 0,\n    underlinePosition: 0,\n    underlineThickness: 0,\n    unicode: 0,\n    unicodeBidi: 0,\n    unicodeRange: 0,\n    unitsPerEm: 0,\n    vAlphabetic: 0,\n    vHanging: 0,\n    vIdeographic: 0,\n    vMathematical: 0,\n    values: 0,\n    vectorEffect: 0,\n    version: 0,\n    vertAdvY: 0,\n    vertOriginX: 0,\n    vertOriginY: 0,\n    viewBox: 0,\n    viewTarget: 0,\n    visibility: 0,\n    widths: 0,\n    wordSpacing: 0,\n    writingMode: 0,\n    x: 0,\n    xHeight: 0,\n    x1: 0,\n    x2: 0,\n    xChannelSelector: 0,\n    xlinkActuate: 0,\n    xlinkArcrole: 0,\n    xlinkHref: 0,\n    xlinkRole: 0,\n    xlinkShow: 0,\n    xlinkTitle: 0,\n    xlinkType: 0,\n    xmlBase: 0,\n    xmlns: 0,\n    xmlnsXlink: 0,\n    xmlLang: 0,\n    xmlSpace: 0,\n    y: 0,\n    y1: 0,\n    y2: 0,\n    yChannelSelector: 0,\n    z: 0,\n    zoomAndPan: 0\n  },\n  DOMAttributeNames: {\n    accentHeight: 'accent-height',\n    alignmentBaseline: 'alignment-baseline',\n    arabicForm: 'arabic-form',\n    baselineShift: 'baseline-shift',\n    capHeight: 'cap-height',\n    clipPath: 'clip-path',\n    clipRule: 'clip-rule',\n    colorInterpolation: 'color-interpolation',\n    colorInterpolationFilters: 'color-interpolation-filters',\n    colorProfile: 'color-profile',\n    colorRendering: 'color-rendering',\n    dominantBaseline: 'dominant-baseline',\n    enableBackground: 'enable-background',\n    fillOpacity: 'fill-opacity',\n    fillRule: 'fill-rule',\n    floodColor: 'flood-color',\n    floodOpacity: 'flood-opacity',\n    fontFamily: 'font-family',\n    fontSize: 'font-size',\n    fontSizeAdjust: 'font-size-adjust',\n    fontStretch: 'font-stretch',\n    fontStyle: 'font-style',\n    fontVariant: 'font-variant',\n    fontWeight: 'font-weight',\n    glyphName: 'glyph-name',\n    glyphOrientationHorizontal: 'glyph-orientation-horizontal',\n    glyphOrientationVertical: 'glyph-orientation-vertical',\n    horizAdvX: 'horiz-adv-x',\n    horizOriginX: 'horiz-origin-x',\n    imageRendering: 'image-rendering',\n    letterSpacing: 'letter-spacing',\n    lightingColor: 'lighting-color',\n    markerEnd: 'marker-end',\n    markerMid: 'marker-mid',\n    markerStart: 'marker-start',\n    overlinePosition: 'overline-position',\n    overlineThickness: 'overline-thickness',\n    paintOrder: 'paint-order',\n    panose1: 'panose-1',\n    pointerEvents: 'pointer-events',\n    renderingIntent: 'rendering-intent',\n    shapeRendering: 'shape-rendering',\n    stopColor: 'stop-color',\n    stopOpacity: 'stop-opacity',\n    strikethroughPosition: 'strikethrough-position',\n    strikethroughThickness: 'strikethrough-thickness',\n    strokeDasharray: 'stroke-dasharray',\n    strokeDashoffset: 'stroke-dashoffset',\n    strokeLinecap: 'stroke-linecap',\n    strokeLinejoin: 'stroke-linejoin',\n    strokeMiterlimit: 'stroke-miterlimit',\n    strokeOpacity: 'stroke-opacity',\n    strokeWidth: 'stroke-width',\n    textAnchor: 'text-anchor',\n    textDecoration: 'text-decoration',\n    textRendering: 'text-rendering',\n    underlinePosition: 'underline-position',\n    underlineThickness: 'underline-thickness',\n    unicodeBidi: 'unicode-bidi',\n    unicodeRange: 'unicode-range',\n    unitsPerEm: 'units-per-em',\n    vAlphabetic: 'v-alphabetic',\n    vHanging: 'v-hanging',\n    vIdeographic: 'v-ideographic',\n    vMathematical: 'v-mathematical',\n    vectorEffect: 'vector-effect',\n    vertAdvY: 'vert-adv-y',\n    vertOriginX: 'vert-origin-x',\n    vertOriginY: 'vert-origin-y',\n    wordSpacing: 'word-spacing',\n    writingMode: 'writing-mode',\n    xHeight: 'x-height',\n    xlinkActuate: 'xlink:actuate',\n    xlinkArcrole: 'xlink:arcrole',\n    xlinkHref: 'xlink:href',\n    xlinkRole: 'xlink:role',\n    xlinkShow: 'xlink:show',\n    xlinkTitle: 'xlink:title',\n    xlinkType: 'xlink:type',\n    xmlBase: 'xml:base',\n    xmlnsXlink: 'xmlns:xlink',\n    xmlLang: 'xml:lang',\n    xmlSpace: 'xml:space'\n  }\n};\n","module.exports = {\n  MUST_USE_PROPERTY: 1,\n  HAS_BOOLEAN_VALUE: 4,\n  HAS_NUMERIC_VALUE: 8,\n  HAS_POSITIVE_NUMERIC_VALUE: 24,\n  HAS_OVERLOADED_BOOLEAN_VALUE: 32\n};\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar style_to_object_1 = __importDefault(require(\"style-to-object\"));\nvar utilities_1 = require(\"./utilities\");\nfunction StyleToJS(style, options) {\n    var output = {};\n    if (!style || typeof style !== 'string') {\n        return output;\n    }\n    style_to_object_1[\"default\"](style, function (property, value) {\n        if (property && value) {\n            output[utilities_1.camelCase(property, options)] = value;\n        }\n    });\n    return output;\n}\nexports[\"default\"] = StyleToJS;\n","var parse = require('inline-style-parser');\n\n/**\n * Parses inline style to object.\n *\n * @example\n * // returns { 'line-height': '42' }\n * StyleToObject('line-height: 42;');\n *\n * @param  {String}      style      - The inline style.\n * @param  {Function}    [iterator] - The iterator function.\n * @return {null|Object}\n */\nfunction StyleToObject(style, iterator) {\n  var output = null;\n  if (!style || typeof style !== 'string') {\n    return output;\n  }\n\n  var declaration;\n  var declarations = parse(style);\n  var hasIterator = typeof iterator === 'function';\n  var property;\n  var value;\n\n  for (var i = 0, len = declarations.length; i < len; i++) {\n    declaration = declarations[i];\n    property = declaration.property;\n    value = declaration.value;\n\n    if (hasIterator) {\n      iterator(property, value, declaration);\n    } else if (value) {\n      output || (output = {});\n      output[property] = value;\n    }\n  }\n\n  return output;\n}\n\nmodule.exports = StyleToObject;\n","// http://www.w3.org/TR/CSS21/grammar.html\n// https://github.com/visionmedia/css-parse/pull/49#issuecomment-30088027\nvar COMMENT_REGEX = /\\/\\*[^*]*\\*+([^/*][^*]*\\*+)*\\//g;\n\nvar NEWLINE_REGEX = /\\n/g;\nvar WHITESPACE_REGEX = /^\\s*/;\n\n// declaration\nvar PROPERTY_REGEX = /^(\\*?[-#/*\\\\\\w]+(\\[[0-9a-z_-]+\\])?)\\s*/;\nvar COLON_REGEX = /^:\\s*/;\nvar VALUE_REGEX = /^((?:'(?:\\\\'|.)*?'|\"(?:\\\\\"|.)*?\"|\\([^)]*?\\)|[^};])+)/;\nvar SEMICOLON_REGEX = /^[;\\s]*/;\n\n// https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String/Trim#Polyfill\nvar TRIM_REGEX = /^\\s+|\\s+$/g;\n\n// strings\nvar NEWLINE = '\\n';\nvar FORWARD_SLASH = '/';\nvar ASTERISK = '*';\nvar EMPTY_STRING = '';\n\n// types\nvar TYPE_COMMENT = 'comment';\nvar TYPE_DECLARATION = 'declaration';\n\n/**\n * @param {String} style\n * @param {Object} [options]\n * @return {Object[]}\n * @throws {TypeError}\n * @throws {Error}\n */\nmodule.exports = function(style, options) {\n  if (typeof style !== 'string') {\n    throw new TypeError('First argument must be a string');\n  }\n\n  if (!style) return [];\n\n  options = options || {};\n\n  /**\n   * Positional.\n   */\n  var lineno = 1;\n  var column = 1;\n\n  /**\n   * Update lineno and column based on `str`.\n   *\n   * @param {String} str\n   */\n  function updatePosition(str) {\n    var lines = str.match(NEWLINE_REGEX);\n    if (lines) lineno += lines.length;\n    var i = str.lastIndexOf(NEWLINE);\n    column = ~i ? str.length - i : column + str.length;\n  }\n\n  /**\n   * Mark position and patch `node.position`.\n   *\n   * @return {Function}\n   */\n  function position() {\n    var start = { line: lineno, column: column };\n    return function(node) {\n      node.position = new Position(start);\n      whitespace();\n      return node;\n    };\n  }\n\n  /**\n   * Store position information for a node.\n   *\n   * @constructor\n   * @property {Object} start\n   * @property {Object} end\n   * @property {undefined|String} source\n   */\n  function Position(start) {\n    this.start = start;\n    this.end = { line: lineno, column: column };\n    this.source = options.source;\n  }\n\n  /**\n   * Non-enumerable source string.\n   */\n  Position.prototype.content = style;\n\n  var errorsList = [];\n\n  /**\n   * Error `msg`.\n   *\n   * @param {String} msg\n   * @throws {Error}\n   */\n  function error(msg) {\n    var err = new Error(\n      options.source + ':' + lineno + ':' + column + ': ' + msg\n    );\n    err.reason = msg;\n    err.filename = options.source;\n    err.line = lineno;\n    err.column = column;\n    err.source = style;\n\n    if (options.silent) {\n      errorsList.push(err);\n    } else {\n      throw err;\n    }\n  }\n\n  /**\n   * Match `re` and return captures.\n   *\n   * @param {RegExp} re\n   * @return {undefined|Array}\n   */\n  function match(re) {\n    var m = re.exec(style);\n    if (!m) return;\n    var str = m[0];\n    updatePosition(str);\n    style = style.slice(str.length);\n    return m;\n  }\n\n  /**\n   * Parse whitespace.\n   */\n  function whitespace() {\n    match(WHITESPACE_REGEX);\n  }\n\n  /**\n   * Parse comments.\n   *\n   * @param {Object[]} [rules]\n   * @return {Object[]}\n   */\n  function comments(rules) {\n    var c;\n    rules = rules || [];\n    while ((c = comment())) {\n      if (c !== false) {\n        rules.push(c);\n      }\n    }\n    return rules;\n  }\n\n  /**\n   * Parse comment.\n   *\n   * @return {Object}\n   * @throws {Error}\n   */\n  function comment() {\n    var pos = position();\n    if (FORWARD_SLASH != style.charAt(0) || ASTERISK != style.charAt(1)) return;\n\n    var i = 2;\n    while (\n      EMPTY_STRING != style.charAt(i) &&\n      (ASTERISK != style.charAt(i) || FORWARD_SLASH != style.charAt(i + 1))\n    ) {\n      ++i;\n    }\n    i += 2;\n\n    if (EMPTY_STRING === style.charAt(i - 1)) {\n      return error('End of comment missing');\n    }\n\n    var str = style.slice(2, i - 2);\n    column += 2;\n    updatePosition(str);\n    style = style.slice(i);\n    column += 2;\n\n    return pos({\n      type: TYPE_COMMENT,\n      comment: str\n    });\n  }\n\n  /**\n   * Parse declaration.\n   *\n   * @return {Object}\n   * @throws {Error}\n   */\n  function declaration() {\n    var pos = position();\n\n    // prop\n    var prop = match(PROPERTY_REGEX);\n    if (!prop) return;\n    comment();\n\n    // :\n    if (!match(COLON_REGEX)) return error(\"property missing ':'\");\n\n    // val\n    var val = match(VALUE_REGEX);\n\n    var ret = pos({\n      type: TYPE_DECLARATION,\n      property: trim(prop[0].replace(COMMENT_REGEX, EMPTY_STRING)),\n      value: val\n        ? trim(val[0].replace(COMMENT_REGEX, EMPTY_STRING))\n        : EMPTY_STRING\n    });\n\n    // ;\n    match(SEMICOLON_REGEX);\n\n    return ret;\n  }\n\n  /**\n   * Parse declarations.\n   *\n   * @return {Object[]}\n   */\n  function declarations() {\n    var decls = [];\n\n    comments(decls);\n\n    // declarations\n    var decl;\n    while ((decl = declaration())) {\n      if (decl !== false) {\n        decls.push(decl);\n        comments(decls);\n      }\n    }\n\n    return decls;\n  }\n\n  whitespace();\n  return declarations();\n};\n\n/**\n * Trim `str`.\n *\n * @param {String} str\n * @return {String}\n */\nfunction trim(str) {\n  return str ? str.replace(TRIM_REGEX, EMPTY_STRING) : EMPTY_STRING;\n}\n","\"use strict\";\nexports.__esModule = true;\nexports.camelCase = void 0;\nvar CUSTOM_PROPERTY_REGEX = /^--[a-zA-Z0-9-]+$/;\nvar HYPHEN_REGEX = /-([a-z])/g;\nvar NO_HYPHEN_REGEX = /^[^-]+$/;\nvar VENDOR_PREFIX_REGEX = /^-(webkit|moz|ms|o|khtml)-/;\nvar skipCamelCase = function (property) {\n    return !property ||\n        NO_HYPHEN_REGEX.test(property) ||\n        CUSTOM_PROPERTY_REGEX.test(property);\n};\nvar capitalize = function (match, character) {\n    return character.toUpperCase();\n};\nvar trimHyphen = function (match, prefix) { return prefix + \"-\"; };\nvar camelCase = function (property, options) {\n    if (options === void 0) { options = {}; }\n    if (skipCamelCase(property)) {\n        return property;\n    }\n    property = property.toLowerCase();\n    if (!options.reactCompat) {\n        property = property.replace(VENDOR_PREFIX_REGEX, trimHyphen);\n    }\n    return property.replace(HYPHEN_REGEX, capitalize);\n};\nexports.camelCase = camelCase;\n","var domparser = require('./domparser');\nvar formatDOM = require('./utilities').formatDOM;\n\nvar DIRECTIVE_REGEX = /<(![a-zA-Z\\s]+)>/; // e.g., <!doctype html>\n\n/**\n * Parses HTML string to DOM nodes in browser.\n *\n * @param  {string} html  - HTML markup.\n * @return {DomElement[]} - DOM elements.\n */\nfunction HTMLDOMParser(html) {\n  if (typeof html !== 'string') {\n    throw new TypeError('First argument must be a string');\n  }\n\n  if (html === '') {\n    return [];\n  }\n\n  // match directive\n  var match = html.match(DIRECTIVE_REGEX);\n  var directive;\n\n  if (match && match[1]) {\n    directive = match[1];\n  }\n\n  return formatDOM(domparser(html), null, directive);\n}\n\nmodule.exports = HTMLDOMParser;\n","// constants\nvar HTML = 'html';\nvar HEAD = 'head';\nvar BODY = 'body';\nvar FIRST_TAG_REGEX = /<([a-zA-Z]+[0-9]?)/; // e.g., <h1>\nvar HEAD_TAG_REGEX = /<head.*>/i;\nvar BODY_TAG_REGEX = /<body.*>/i;\n\n// falls back to `parseFromString` if `createHTMLDocument` cannot be used\nvar parseFromDocument = function () {\n  throw new Error(\n    'This browser does not support `document.implementation.createHTMLDocument`'\n  );\n};\n\nvar parseFromString = function () {\n  throw new Error(\n    'This browser does not support `DOMParser.prototype.parseFromString`'\n  );\n};\n\n/**\n * DOMParser (performance: slow).\n *\n * @see https://developer.mozilla.org/docs/Web/API/DOMParser#Parsing_an_SVG_or_HTML_document\n */\nif (typeof window.DOMParser === 'function') {\n  var domParser = new window.DOMParser();\n  var mimeType = 'text/html';\n\n  /**\n   * Creates an HTML document using `DOMParser.parseFromString`.\n   *\n   * @param  {string} html      - The HTML string.\n   * @param  {string} [tagName] - The element to render the HTML (with 'body' as fallback).\n   * @return {HTMLDocument}\n   */\n  parseFromString = function (html, tagName) {\n    if (tagName) {\n      html = '<' + tagName + '>' + html + '</' + tagName + '>';\n    }\n\n    return domParser.parseFromString(html, mimeType);\n  };\n\n  parseFromDocument = parseFromString;\n}\n\n/**\n * DOMImplementation (performance: fair).\n *\n * @see https://developer.mozilla.org/docs/Web/API/DOMImplementation/createHTMLDocument\n */\nif (document.implementation) {\n  var isIE = require('./utilities').isIE;\n\n  // title parameter is required in IE\n  // https://msdn.microsoft.com/en-us/library/ff975457(v=vs.85).aspx\n  var doc = document.implementation.createHTMLDocument(\n    isIE() ? 'html-dom-parser' : undefined\n  );\n\n  /**\n   * Use HTML document created by `document.implementation.createHTMLDocument`.\n   *\n   * @param  {string} html      - The HTML string.\n   * @param  {string} [tagName] - The element to render the HTML (with 'body' as fallback).\n   * @return {HTMLDocument}\n   */\n  parseFromDocument = function (html, tagName) {\n    if (tagName) {\n      doc.documentElement.getElementsByTagName(tagName)[0].innerHTML = html;\n      return doc;\n    }\n\n    doc.documentElement.innerHTML = html;\n    return doc;\n  };\n}\n\n/**\n * Template (performance: fast).\n *\n * @see https://developer.mozilla.org/docs/Web/HTML/Element/template\n */\nvar template = document.createElement('template');\nvar parseFromTemplate;\n\nif (template.content) {\n  /**\n   * Uses a template element (content fragment) to parse HTML.\n   *\n   * @param  {string} html - The HTML string.\n   * @return {NodeList}\n   */\n  parseFromTemplate = function (html) {\n    template.innerHTML = html;\n    return template.content.childNodes;\n  };\n}\n\n/**\n * Parses HTML string to DOM nodes.\n *\n * @param  {string}   html - HTML markup.\n * @return {NodeList}\n */\nfunction domparser(html) {\n  var firstTagName;\n  var match = html.match(FIRST_TAG_REGEX);\n\n  if (match && match[1]) {\n    firstTagName = match[1].toLowerCase();\n  }\n\n  var doc;\n  var element;\n  var elements;\n\n  switch (firstTagName) {\n    case HTML:\n      doc = parseFromString(html);\n\n      // the created document may come with filler head/body elements,\n      // so make sure to remove them if they don't actually exist\n      if (!HEAD_TAG_REGEX.test(html)) {\n        element = doc.getElementsByTagName(HEAD)[0];\n        if (element) {\n          element.parentNode.removeChild(element);\n        }\n      }\n\n      if (!BODY_TAG_REGEX.test(html)) {\n        element = doc.getElementsByTagName(BODY)[0];\n        if (element) {\n          element.parentNode.removeChild(element);\n        }\n      }\n\n      return doc.getElementsByTagName(HTML);\n\n    case HEAD:\n    case BODY:\n      elements = parseFromDocument(html).getElementsByTagName(firstTagName);\n\n      // if there's a sibling element, then return both elements\n      if (BODY_TAG_REGEX.test(html) && HEAD_TAG_REGEX.test(html)) {\n        return elements[0].parentNode.childNodes;\n      }\n      return elements;\n\n    // low-level tag or text\n    default:\n      if (parseFromTemplate) {\n        return parseFromTemplate(html);\n      }\n\n      return parseFromDocument(html, BODY).getElementsByTagName(BODY)[0]\n        .childNodes;\n  }\n}\n\nmodule.exports = domparser;\n","/**\n * SVG elements are case-sensitive.\n *\n * @see {@link https://developer.mozilla.org/docs/Web/SVG/Element#SVG_elements_A_to_Z}\n */\nvar CASE_SENSITIVE_TAG_NAMES = [\n  'animateMotion',\n  'animateTransform',\n  'clipPath',\n  'feBlend',\n  'feColorMatrix',\n  'feComponentTransfer',\n  'feComposite',\n  'feConvolveMatrix',\n  'feDiffuseLighting',\n  'feDisplacementMap',\n  'feDropShadow',\n  'feFlood',\n  'feFuncA',\n  'feFuncB',\n  'feFuncG',\n  'feFuncR',\n  'feGaussainBlur',\n  'feImage',\n  'feMerge',\n  'feMergeNode',\n  'feMorphology',\n  'feOffset',\n  'fePointLight',\n  'feSpecularLighting',\n  'feSpotLight',\n  'feTile',\n  'feTurbulence',\n  'foreignObject',\n  'linearGradient',\n  'radialGradient',\n  'textPath'\n];\n\nmodule.exports = {\n  CASE_SENSITIVE_TAG_NAMES: CASE_SENSITIVE_TAG_NAMES\n};\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.cloneNode = exports.Element = exports.Document = exports.NodeWithChildren = exports.ProcessingInstruction = exports.Comment = exports.Text = exports.DataNode = exports.Node = void 0;\nvar nodeTypes = new Map([\n    [\"tag\" /* Tag */, 1],\n    [\"script\" /* Script */, 1],\n    [\"style\" /* Style */, 1],\n    [\"directive\" /* Directive */, 1],\n    [\"text\" /* Text */, 3],\n    [\"cdata\" /* CDATA */, 4],\n    [\"comment\" /* Comment */, 8],\n    [\"root\" /* Root */, 9],\n]);\n/**\n * This object will be used as the prototype for Nodes when creating a\n * DOM-Level-1-compliant structure.\n */\nvar Node = /** @class */ (function () {\n    /**\n     *\n     * @param type The type of the node.\n     */\n    function Node(type) {\n        this.type = type;\n        /** Parent of the node */\n        this.parent = null;\n        /** Previous sibling */\n        this.prev = null;\n        /** Next sibling */\n        this.next = null;\n        /** The start index of the node. Requires `withStartIndices` on the handler to be `true. */\n        this.startIndex = null;\n        /** The end index of the node. Requires `withEndIndices` on the handler to be `true. */\n        this.endIndex = null;\n    }\n    Object.defineProperty(Node.prototype, \"nodeType\", {\n        // Read-only aliases\n        get: function () {\n            var _a;\n            return (_a = nodeTypes.get(this.type)) !== null && _a !== void 0 ? _a : 1;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Node.prototype, \"parentNode\", {\n        // Read-write aliases for properties\n        get: function () {\n            return this.parent;\n        },\n        set: function (parent) {\n            this.parent = parent;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Node.prototype, \"previousSibling\", {\n        get: function () {\n            return this.prev;\n        },\n        set: function (prev) {\n            this.prev = prev;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Node.prototype, \"nextSibling\", {\n        get: function () {\n            return this.next;\n        },\n        set: function (next) {\n            this.next = next;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * Clone this node, and optionally its children.\n     *\n     * @param recursive Clone child nodes as well.\n     * @returns A clone of the node.\n     */\n    Node.prototype.cloneNode = function (recursive) {\n        if (recursive === void 0) { recursive = false; }\n        return cloneNode(this, recursive);\n    };\n    return Node;\n}());\nexports.Node = Node;\nvar DataNode = /** @class */ (function (_super) {\n    __extends(DataNode, _super);\n    /**\n     * @param type The type of the node\n     * @param data The content of the data node\n     */\n    function DataNode(type, data) {\n        var _this = _super.call(this, type) || this;\n        _this.data = data;\n        return _this;\n    }\n    Object.defineProperty(DataNode.prototype, \"nodeValue\", {\n        get: function () {\n            return this.data;\n        },\n        set: function (data) {\n            this.data = data;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return DataNode;\n}(Node));\nexports.DataNode = DataNode;\nvar Text = /** @class */ (function (_super) {\n    __extends(Text, _super);\n    function Text(data) {\n        return _super.call(this, \"text\" /* Text */, data) || this;\n    }\n    return Text;\n}(DataNode));\nexports.Text = Text;\nvar Comment = /** @class */ (function (_super) {\n    __extends(Comment, _super);\n    function Comment(data) {\n        return _super.call(this, \"comment\" /* Comment */, data) || this;\n    }\n    return Comment;\n}(DataNode));\nexports.Comment = Comment;\nvar ProcessingInstruction = /** @class */ (function (_super) {\n    __extends(ProcessingInstruction, _super);\n    function ProcessingInstruction(name, data) {\n        var _this = _super.call(this, \"directive\" /* Directive */, data) || this;\n        _this.name = name;\n        return _this;\n    }\n    return ProcessingInstruction;\n}(DataNode));\nexports.ProcessingInstruction = ProcessingInstruction;\n/**\n * A `Node` that can have children.\n */\nvar NodeWithChildren = /** @class */ (function (_super) {\n    __extends(NodeWithChildren, _super);\n    /**\n     * @param type Type of the node.\n     * @param children Children of the node. Only certain node types can have children.\n     */\n    function NodeWithChildren(type, children) {\n        var _this = _super.call(this, type) || this;\n        _this.children = children;\n        return _this;\n    }\n    Object.defineProperty(NodeWithChildren.prototype, \"firstChild\", {\n        // Aliases\n        get: function () {\n            var _a;\n            return (_a = this.children[0]) !== null && _a !== void 0 ? _a : null;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(NodeWithChildren.prototype, \"lastChild\", {\n        get: function () {\n            return this.children.length > 0\n                ? this.children[this.children.length - 1]\n                : null;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(NodeWithChildren.prototype, \"childNodes\", {\n        get: function () {\n            return this.children;\n        },\n        set: function (children) {\n            this.children = children;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return NodeWithChildren;\n}(Node));\nexports.NodeWithChildren = NodeWithChildren;\nvar Document = /** @class */ (function (_super) {\n    __extends(Document, _super);\n    function Document(children) {\n        return _super.call(this, \"root\" /* Root */, children) || this;\n    }\n    return Document;\n}(NodeWithChildren));\nexports.Document = Document;\nvar Element = /** @class */ (function (_super) {\n    __extends(Element, _super);\n    /**\n     * @param name Name of the tag, eg. `div`, `span`.\n     * @param attribs Object mapping attribute names to attribute values.\n     * @param children Children of the node.\n     */\n    function Element(name, attribs, children) {\n        if (children === void 0) { children = []; }\n        var _this = _super.call(this, name === \"script\"\n            ? \"script\" /* Script */\n            : name === \"style\"\n                ? \"style\" /* Style */\n                : \"tag\" /* Tag */, children) || this;\n        _this.name = name;\n        _this.attribs = attribs;\n        _this.attribs = attribs;\n        return _this;\n    }\n    Object.defineProperty(Element.prototype, \"tagName\", {\n        // DOM Level 1 aliases\n        get: function () {\n            return this.name;\n        },\n        set: function (name) {\n            this.name = name;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Element.prototype, \"attributes\", {\n        get: function () {\n            var _this = this;\n            return Object.keys(this.attribs).map(function (name) {\n                var _a, _b;\n                return ({\n                    name: name,\n                    value: _this.attribs[name],\n                    namespace: (_a = _this[\"x-attribsNamespace\"]) === null || _a === void 0 ? void 0 : _a[name],\n                    prefix: (_b = _this[\"x-attribsPrefix\"]) === null || _b === void 0 ? void 0 : _b[name],\n                });\n            });\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return Element;\n}(NodeWithChildren));\nexports.Element = Element;\n/**\n * Clone a node, and optionally its children.\n *\n * @param recursive Clone child nodes as well.\n * @returns A clone of the node.\n */\nfunction cloneNode(node, recursive) {\n    if (recursive === void 0) { recursive = false; }\n    var result;\n    switch (node.type) {\n        case \"text\" /* Text */:\n            result = new Text(node.data);\n            break;\n        case \"directive\" /* Directive */: {\n            var instr = node;\n            result = new ProcessingInstruction(instr.name, instr.data);\n            if (instr[\"x-name\"] != null) {\n                result[\"x-name\"] = instr[\"x-name\"];\n                result[\"x-publicId\"] = instr[\"x-publicId\"];\n                result[\"x-systemId\"] = instr[\"x-systemId\"];\n            }\n            break;\n        }\n        case \"comment\" /* Comment */:\n            result = new Comment(node.data);\n            break;\n        case \"tag\" /* Tag */:\n        case \"script\" /* Script */:\n        case \"style\" /* Style */: {\n            var elem = node;\n            var children = recursive ? cloneChildren(elem.children) : [];\n            var clone_1 = new Element(elem.name, __assign({}, elem.attribs), children);\n            children.forEach(function (child) { return (child.parent = clone_1); });\n            if (elem[\"x-attribsNamespace\"]) {\n                clone_1[\"x-attribsNamespace\"] = __assign({}, elem[\"x-attribsNamespace\"]);\n            }\n            if (elem[\"x-attribsPrefix\"]) {\n                clone_1[\"x-attribsPrefix\"] = __assign({}, elem[\"x-attribsPrefix\"]);\n            }\n            result = clone_1;\n            break;\n        }\n        case \"cdata\" /* CDATA */: {\n            var cdata = node;\n            var children = recursive ? cloneChildren(cdata.children) : [];\n            var clone_2 = new NodeWithChildren(node.type, children);\n            children.forEach(function (child) { return (child.parent = clone_2); });\n            result = clone_2;\n            break;\n        }\n        case \"root\" /* Root */: {\n            var doc = node;\n            var children = recursive ? cloneChildren(doc.children) : [];\n            var clone_3 = new Document(children);\n            children.forEach(function (child) { return (child.parent = clone_3); });\n            if (doc[\"x-mode\"]) {\n                clone_3[\"x-mode\"] = doc[\"x-mode\"];\n            }\n            result = clone_3;\n            break;\n        }\n        case \"doctype\" /* Doctype */: {\n            // This type isn't used yet.\n            throw new Error(\"Not implemented yet: ElementType.Doctype case\");\n        }\n    }\n    result.startIndex = node.startIndex;\n    result.endIndex = node.endIndex;\n    return result;\n}\nexports.cloneNode = cloneNode;\nfunction cloneChildren(childs) {\n    var children = childs.map(function (child) { return cloneNode(child, true); });\n    for (var i = 1; i < children.length; i++) {\n        children[i].prev = children[i - 1];\n        children[i - 1].next = children[i];\n    }\n    return children;\n}\n","import copyObject from './_copyObject.js';\nimport createAssigner from './_createAssigner.js';\nimport keysIn from './keysIn.js';\n\n/**\n * This method is like `_.assign` except that it iterates over own and\n * inherited source properties.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @alias extend\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @see _.assign\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * function Bar() {\n *   this.c = 3;\n * }\n *\n * Foo.prototype.b = 2;\n * Bar.prototype.d = 4;\n *\n * _.assignIn({ 'a': 0 }, new Foo, new Bar);\n * // => { 'a': 1, 'b': 2, 'c': 3, 'd': 4 }\n */\nvar assignIn = createAssigner(function(object, source) {\n  copyObject(source, keysIn(source), object);\n});\n\nexport default assignIn;\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\nimport capitalize from '../utils/capitalize';\nexport var styles = function styles(theme) {\n  return {\n    /* Styles applied to the root element. */\n    root: _defineProperty({\n      width: '100%',\n      marginLeft: 'auto',\n      boxSizing: 'border-box',\n      marginRight: 'auto',\n      paddingLeft: theme.spacing(2),\n      paddingRight: theme.spacing(2),\n      display: 'block'\n    }, theme.breakpoints.up('sm'), {\n      paddingLeft: theme.spacing(3),\n      paddingRight: theme.spacing(3)\n    }),\n\n    /* Styles applied to the root element if `disableGutters={true}`. */\n    disableGutters: {\n      paddingLeft: 0,\n      paddingRight: 0\n    },\n\n    /* Styles applied to the root element if `fixed={true}`. */\n    fixed: Object.keys(theme.breakpoints.values).reduce(function (acc, breakpoint) {\n      var value = theme.breakpoints.values[breakpoint];\n\n      if (value !== 0) {\n        acc[theme.breakpoints.up(breakpoint)] = {\n          maxWidth: value\n        };\n      }\n\n      return acc;\n    }, {}),\n\n    /* Styles applied to the root element if `maxWidth=\"xs\"`. */\n    maxWidthXs: _defineProperty({}, theme.breakpoints.up('xs'), {\n      maxWidth: Math.max(theme.breakpoints.values.xs, 444)\n    }),\n\n    /* Styles applied to the root element if `maxWidth=\"sm\"`. */\n    maxWidthSm: _defineProperty({}, theme.breakpoints.up('sm'), {\n      maxWidth: theme.breakpoints.values.sm\n    }),\n\n    /* Styles applied to the root element if `maxWidth=\"md\"`. */\n    maxWidthMd: _defineProperty({}, theme.breakpoints.up('md'), {\n      maxWidth: theme.breakpoints.values.md\n    }),\n\n    /* Styles applied to the root element if `maxWidth=\"lg\"`. */\n    maxWidthLg: _defineProperty({}, theme.breakpoints.up('lg'), {\n      maxWidth: theme.breakpoints.values.lg\n    }),\n\n    /* Styles applied to the root element if `maxWidth=\"xl\"`. */\n    maxWidthXl: _defineProperty({}, theme.breakpoints.up('xl'), {\n      maxWidth: theme.breakpoints.values.xl\n    })\n  };\n};\nvar Container = /*#__PURE__*/React.forwardRef(function Container(props, ref) {\n  var classes = props.classes,\n      className = props.className,\n      _props$component = props.component,\n      Component = _props$component === void 0 ? 'div' : _props$component,\n      _props$disableGutters = props.disableGutters,\n      disableGutters = _props$disableGutters === void 0 ? false : _props$disableGutters,\n      _props$fixed = props.fixed,\n      fixed = _props$fixed === void 0 ? false : _props$fixed,\n      _props$maxWidth = props.maxWidth,\n      maxWidth = _props$maxWidth === void 0 ? 'lg' : _props$maxWidth,\n      other = _objectWithoutProperties(props, [\"classes\", \"className\", \"component\", \"disableGutters\", \"fixed\", \"maxWidth\"]);\n\n  return /*#__PURE__*/React.createElement(Component, _extends({\n    className: clsx(classes.root, className, fixed && classes.fixed, disableGutters && classes.disableGutters, maxWidth !== false && classes[\"maxWidth\".concat(capitalize(String(maxWidth)))]),\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? Container.propTypes = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\n  // ----------------------------------------------------------------------\n\n  /**\n   * @ignore\n   */\n  children: PropTypes\n  /* @typescript-to-proptypes-ignore */\n  .node.isRequired,\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n\n  /**\n   * The component used for the root node.\n   * Either a string to use a HTML element or a component.\n   */\n  component: PropTypes\n  /* @typescript-to-proptypes-ignore */\n  .elementType,\n\n  /**\n   * If `true`, the left and right padding is removed.\n   */\n  disableGutters: PropTypes.bool,\n\n  /**\n   * Set the max-width to match the min-width of the current breakpoint.\n   * This is useful if you'd prefer to design for a fixed set of sizes\n   * instead of trying to accommodate a fully fluid viewport.\n   * It's fluid by default.\n   */\n  fixed: PropTypes.bool,\n\n  /**\n   * Determine the max-width of the container.\n   * The container width grows with the size of the screen.\n   * Set to `false` to disable `maxWidth`.\n   */\n  maxWidth: PropTypes.oneOf(['lg', 'md', 'sm', 'xl', 'xs', false])\n} : void 0;\nexport default withStyles(styles, {\n  name: 'MuiContainer'\n})(Container);","import _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\n// A grid component using the following libs as inspiration.\n//\n// For the implementation:\n// - https://getbootstrap.com/docs/4.3/layout/grid/\n// - https://github.com/kristoferjoseph/flexboxgrid/blob/master/src/css/flexboxgrid.css\n// - https://github.com/roylee0704/react-flexbox-grid\n// - https://material.angularjs.org/latest/layout/introduction\n//\n// Follow this flexbox Guide to better understand the underlying model:\n// - https://css-tricks.com/snippets/css/a-guide-to-flexbox/\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\nimport requirePropFactory from '../utils/requirePropFactory';\nvar SPACINGS = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10];\nvar GRID_SIZES = ['auto', true, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12];\n\nfunction generateGrid(globalStyles, theme, breakpoint) {\n  var styles = {};\n  GRID_SIZES.forEach(function (size) {\n    var key = \"grid-\".concat(breakpoint, \"-\").concat(size);\n\n    if (size === true) {\n      // For the auto layouting\n      styles[key] = {\n        flexBasis: 0,\n        flexGrow: 1,\n        maxWidth: '100%'\n      };\n      return;\n    }\n\n    if (size === 'auto') {\n      styles[key] = {\n        flexBasis: 'auto',\n        flexGrow: 0,\n        maxWidth: 'none'\n      };\n      return;\n    } // Keep 7 significant numbers.\n\n\n    var width = \"\".concat(Math.round(size / 12 * 10e7) / 10e5, \"%\"); // Close to the bootstrap implementation:\n    // https://github.com/twbs/bootstrap/blob/8fccaa2439e97ec72a4b7dc42ccc1f649790adb0/scss/mixins/_grid.scss#L41\n\n    styles[key] = {\n      flexBasis: width,\n      flexGrow: 0,\n      maxWidth: width\n    };\n  }); // No need for a media query for the first size.\n\n  if (breakpoint === 'xs') {\n    _extends(globalStyles, styles);\n  } else {\n    globalStyles[theme.breakpoints.up(breakpoint)] = styles;\n  }\n}\n\nfunction getOffset(val) {\n  var div = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  var parse = parseFloat(val);\n  return \"\".concat(parse / div).concat(String(val).replace(String(parse), '') || 'px');\n}\n\nfunction generateGutter(theme, breakpoint) {\n  var styles = {};\n  SPACINGS.forEach(function (spacing) {\n    var themeSpacing = theme.spacing(spacing);\n\n    if (themeSpacing === 0) {\n      return;\n    }\n\n    styles[\"spacing-\".concat(breakpoint, \"-\").concat(spacing)] = {\n      margin: \"-\".concat(getOffset(themeSpacing, 2)),\n      width: \"calc(100% + \".concat(getOffset(themeSpacing), \")\"),\n      '& > $item': {\n        padding: getOffset(themeSpacing, 2)\n      }\n    };\n  });\n  return styles;\n} // Default CSS values\n// flex: '0 1 auto',\n// flexDirection: 'row',\n// alignItems: 'flex-start',\n// flexWrap: 'nowrap',\n// justifyContent: 'flex-start',\n\n\nexport var styles = function styles(theme) {\n  return _extends({\n    /* Styles applied to the root element. */\n    root: {},\n\n    /* Styles applied to the root element if `container={true}`. */\n    container: {\n      boxSizing: 'border-box',\n      display: 'flex',\n      flexWrap: 'wrap',\n      width: '100%'\n    },\n\n    /* Styles applied to the root element if `item={true}`. */\n    item: {\n      boxSizing: 'border-box',\n      margin: '0' // For instance, it's useful when used with a `figure` element.\n\n    },\n\n    /* Styles applied to the root element if `zeroMinWidth={true}`. */\n    zeroMinWidth: {\n      minWidth: 0\n    },\n\n    /* Styles applied to the root element if `direction=\"column\"`. */\n    'direction-xs-column': {\n      flexDirection: 'column'\n    },\n\n    /* Styles applied to the root element if `direction=\"column-reverse\"`. */\n    'direction-xs-column-reverse': {\n      flexDirection: 'column-reverse'\n    },\n\n    /* Styles applied to the root element if `direction=\"row-reverse\"`. */\n    'direction-xs-row-reverse': {\n      flexDirection: 'row-reverse'\n    },\n\n    /* Styles applied to the root element if `wrap=\"nowrap\"`. */\n    'wrap-xs-nowrap': {\n      flexWrap: 'nowrap'\n    },\n\n    /* Styles applied to the root element if `wrap=\"reverse\"`. */\n    'wrap-xs-wrap-reverse': {\n      flexWrap: 'wrap-reverse'\n    },\n\n    /* Styles applied to the root element if `alignItems=\"center\"`. */\n    'align-items-xs-center': {\n      alignItems: 'center'\n    },\n\n    /* Styles applied to the root element if `alignItems=\"flex-start\"`. */\n    'align-items-xs-flex-start': {\n      alignItems: 'flex-start'\n    },\n\n    /* Styles applied to the root element if `alignItems=\"flex-end\"`. */\n    'align-items-xs-flex-end': {\n      alignItems: 'flex-end'\n    },\n\n    /* Styles applied to the root element if `alignItems=\"baseline\"`. */\n    'align-items-xs-baseline': {\n      alignItems: 'baseline'\n    },\n\n    /* Styles applied to the root element if `alignContent=\"center\"`. */\n    'align-content-xs-center': {\n      alignContent: 'center'\n    },\n\n    /* Styles applied to the root element if `alignContent=\"flex-start\"`. */\n    'align-content-xs-flex-start': {\n      alignContent: 'flex-start'\n    },\n\n    /* Styles applied to the root element if `alignContent=\"flex-end\"`. */\n    'align-content-xs-flex-end': {\n      alignContent: 'flex-end'\n    },\n\n    /* Styles applied to the root element if `alignContent=\"space-between\"`. */\n    'align-content-xs-space-between': {\n      alignContent: 'space-between'\n    },\n\n    /* Styles applied to the root element if `alignContent=\"space-around\"`. */\n    'align-content-xs-space-around': {\n      alignContent: 'space-around'\n    },\n\n    /* Styles applied to the root element if `justify=\"center\"`. */\n    'justify-xs-center': {\n      justifyContent: 'center'\n    },\n\n    /* Styles applied to the root element if `justify=\"flex-end\"`. */\n    'justify-xs-flex-end': {\n      justifyContent: 'flex-end'\n    },\n\n    /* Styles applied to the root element if `justify=\"space-between\"`. */\n    'justify-xs-space-between': {\n      justifyContent: 'space-between'\n    },\n\n    /* Styles applied to the root element if `justify=\"space-around\"`. */\n    'justify-xs-space-around': {\n      justifyContent: 'space-around'\n    },\n\n    /* Styles applied to the root element if `justify=\"space-evenly\"`. */\n    'justify-xs-space-evenly': {\n      justifyContent: 'space-evenly'\n    }\n  }, generateGutter(theme, 'xs'), theme.breakpoints.keys.reduce(function (accumulator, key) {\n    // Use side effect over immutability for better performance.\n    generateGrid(accumulator, theme, key);\n    return accumulator;\n  }, {}));\n};\nvar Grid = /*#__PURE__*/React.forwardRef(function Grid(props, ref) {\n  var _props$alignContent = props.alignContent,\n      alignContent = _props$alignContent === void 0 ? 'stretch' : _props$alignContent,\n      _props$alignItems = props.alignItems,\n      alignItems = _props$alignItems === void 0 ? 'stretch' : _props$alignItems,\n      classes = props.classes,\n      classNameProp = props.className,\n      _props$component = props.component,\n      Component = _props$component === void 0 ? 'div' : _props$component,\n      _props$container = props.container,\n      container = _props$container === void 0 ? false : _props$container,\n      _props$direction = props.direction,\n      direction = _props$direction === void 0 ? 'row' : _props$direction,\n      _props$item = props.item,\n      item = _props$item === void 0 ? false : _props$item,\n      _props$justify = props.justify,\n      justify = _props$justify === void 0 ? 'flex-start' : _props$justify,\n      _props$lg = props.lg,\n      lg = _props$lg === void 0 ? false : _props$lg,\n      _props$md = props.md,\n      md = _props$md === void 0 ? false : _props$md,\n      _props$sm = props.sm,\n      sm = _props$sm === void 0 ? false : _props$sm,\n      _props$spacing = props.spacing,\n      spacing = _props$spacing === void 0 ? 0 : _props$spacing,\n      _props$wrap = props.wrap,\n      wrap = _props$wrap === void 0 ? 'wrap' : _props$wrap,\n      _props$xl = props.xl,\n      xl = _props$xl === void 0 ? false : _props$xl,\n      _props$xs = props.xs,\n      xs = _props$xs === void 0 ? false : _props$xs,\n      _props$zeroMinWidth = props.zeroMinWidth,\n      zeroMinWidth = _props$zeroMinWidth === void 0 ? false : _props$zeroMinWidth,\n      other = _objectWithoutProperties(props, [\"alignContent\", \"alignItems\", \"classes\", \"className\", \"component\", \"container\", \"direction\", \"item\", \"justify\", \"lg\", \"md\", \"sm\", \"spacing\", \"wrap\", \"xl\", \"xs\", \"zeroMinWidth\"]);\n\n  var className = clsx(classes.root, classNameProp, container && [classes.container, spacing !== 0 && classes[\"spacing-xs-\".concat(String(spacing))]], item && classes.item, zeroMinWidth && classes.zeroMinWidth, direction !== 'row' && classes[\"direction-xs-\".concat(String(direction))], wrap !== 'wrap' && classes[\"wrap-xs-\".concat(String(wrap))], alignItems !== 'stretch' && classes[\"align-items-xs-\".concat(String(alignItems))], alignContent !== 'stretch' && classes[\"align-content-xs-\".concat(String(alignContent))], justify !== 'flex-start' && classes[\"justify-xs-\".concat(String(justify))], xs !== false && classes[\"grid-xs-\".concat(String(xs))], sm !== false && classes[\"grid-sm-\".concat(String(sm))], md !== false && classes[\"grid-md-\".concat(String(md))], lg !== false && classes[\"grid-lg-\".concat(String(lg))], xl !== false && classes[\"grid-xl-\".concat(String(xl))]);\n  return /*#__PURE__*/React.createElement(Component, _extends({\n    className: className,\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? Grid.propTypes = {\n  /**\n   * Defines the `align-content` style property.\n   * It's applied for all screen sizes.\n   */\n  alignContent: PropTypes.oneOf(['stretch', 'center', 'flex-start', 'flex-end', 'space-between', 'space-around']),\n\n  /**\n   * Defines the `align-items` style property.\n   * It's applied for all screen sizes.\n   */\n  alignItems: PropTypes.oneOf(['flex-start', 'center', 'flex-end', 'stretch', 'baseline']),\n\n  /**\n   * The content of the component.\n   */\n  children: PropTypes.node,\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object.isRequired,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n\n  /**\n   * The component used for the root node.\n   * Either a string to use a HTML element or a component.\n   */\n  component: PropTypes\n  /* @typescript-to-proptypes-ignore */\n  .elementType,\n\n  /**\n   * If `true`, the component will have the flex *container* behavior.\n   * You should be wrapping *items* with a *container*.\n   */\n  container: PropTypes.bool,\n\n  /**\n   * Defines the `flex-direction` style property.\n   * It is applied for all screen sizes.\n   */\n  direction: PropTypes.oneOf(['row', 'row-reverse', 'column', 'column-reverse']),\n\n  /**\n   * If `true`, the component will have the flex *item* behavior.\n   * You should be wrapping *items* with a *container*.\n   */\n  item: PropTypes.bool,\n\n  /**\n   * Defines the `justify-content` style property.\n   * It is applied for all screen sizes.\n   */\n  justify: PropTypes.oneOf(['flex-start', 'center', 'flex-end', 'space-between', 'space-around', 'space-evenly']),\n\n  /**\n   * Defines the number of grids the component is going to use.\n   * It's applied for the `lg` breakpoint and wider screens if not overridden.\n   */\n  lg: PropTypes.oneOf([false, 'auto', true, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]),\n\n  /**\n   * Defines the number of grids the component is going to use.\n   * It's applied for the `md` breakpoint and wider screens if not overridden.\n   */\n  md: PropTypes.oneOf([false, 'auto', true, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]),\n\n  /**\n   * Defines the number of grids the component is going to use.\n   * It's applied for the `sm` breakpoint and wider screens if not overridden.\n   */\n  sm: PropTypes.oneOf([false, 'auto', true, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]),\n\n  /**\n   * Defines the space between the type `item` component.\n   * It can only be used on a type `container` component.\n   */\n  spacing: PropTypes.oneOf(SPACINGS),\n\n  /**\n   * Defines the `flex-wrap` style property.\n   * It's applied for all screen sizes.\n   */\n  wrap: PropTypes.oneOf(['nowrap', 'wrap', 'wrap-reverse']),\n\n  /**\n   * Defines the number of grids the component is going to use.\n   * It's applied for the `xl` breakpoint and wider screens.\n   */\n  xl: PropTypes.oneOf([false, 'auto', true, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]),\n\n  /**\n   * Defines the number of grids the component is going to use.\n   * It's applied for all the screen sizes with the lowest priority.\n   */\n  xs: PropTypes.oneOf([false, 'auto', true, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]),\n\n  /**\n   * If `true`, it sets `min-width: 0` on the item.\n   * Refer to the limitations section of the documentation to better understand the use case.\n   */\n  zeroMinWidth: PropTypes.bool\n} : void 0;\nvar StyledGrid = withStyles(styles, {\n  name: 'MuiGrid'\n})(Grid);\n\nif (process.env.NODE_ENV !== 'production') {\n  var requireProp = requirePropFactory('Grid');\n  StyledGrid.propTypes = _extends({}, StyledGrid.propTypes, {\n    alignContent: requireProp('container'),\n    alignItems: requireProp('container'),\n    direction: requireProp('container'),\n    justify: requireProp('container'),\n    lg: requireProp('item'),\n    md: requireProp('item'),\n    sm: requireProp('item'),\n    spacing: requireProp('container'),\n    wrap: requireProp('container'),\n    xs: requireProp('item'),\n    zeroMinWidth: requireProp('item')\n  });\n}\n\nexport default StyledGrid;","// TODO v5: consider to make it private\nexport default function setRef(ref, value) {\n  if (typeof ref === 'function') {\n    ref(value);\n  } else if (ref) {\n    ref.current = value;\n  }\n}","import * as React from 'react';\nimport setRef from './setRef';\nexport default function useForkRef(refA, refB) {\n  /**\n   * This will create a new function if the ref props change and are defined.\n   * This means react will call the old forkRef with `null` and the new forkRef\n   * with the ref. Cleanup naturally emerges from this behavior\n   */\n  return React.useMemo(function () {\n    if (refA == null && refB == null) {\n      return null;\n    }\n\n    return function (refValue) {\n      setRef(refA, refValue);\n      setRef(refB, refValue);\n    };\n  }, [refA, refB]);\n}","import * as React from 'react';\nvar useEnhancedEffect = typeof window !== 'undefined' ? React.useLayoutEffect : React.useEffect;\n/**\n * https://github.com/facebook/react/issues/14099#issuecomment-440013892\n *\n * @param {function} fn\n */\n\nexport default function useEventCallback(fn) {\n  var ref = React.useRef(fn);\n  useEnhancedEffect(function () {\n    ref.current = fn;\n  });\n  return React.useCallback(function () {\n    return (0, ref.current).apply(void 0, arguments);\n  }, []);\n}","// based on https://github.com/WICG/focus-visible/blob/v4.1.5/src/focus-visible.js\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nvar hadKeyboardEvent = true;\nvar hadFocusVisibleRecently = false;\nvar hadFocusVisibleRecentlyTimeout = null;\nvar inputTypesWhitelist = {\n  text: true,\n  search: true,\n  url: true,\n  tel: true,\n  email: true,\n  password: true,\n  number: true,\n  date: true,\n  month: true,\n  week: true,\n  time: true,\n  datetime: true,\n  'datetime-local': true\n};\n/**\n * Computes whether the given element should automatically trigger the\n * `focus-visible` class being added, i.e. whether it should always match\n * `:focus-visible` when focused.\n * @param {Element} node\n * @return {boolean}\n */\n\nfunction focusTriggersKeyboardModality(node) {\n  var type = node.type,\n      tagName = node.tagName;\n\n  if (tagName === 'INPUT' && inputTypesWhitelist[type] && !node.readOnly) {\n    return true;\n  }\n\n  if (tagName === 'TEXTAREA' && !node.readOnly) {\n    return true;\n  }\n\n  if (node.isContentEditable) {\n    return true;\n  }\n\n  return false;\n}\n/**\n * Keep track of our keyboard modality state with `hadKeyboardEvent`.\n * If the most recent user interaction was via the keyboard;\n * and the key press did not include a meta, alt/option, or control key;\n * then the modality is keyboard. Otherwise, the modality is not keyboard.\n * @param {KeyboardEvent} event\n */\n\n\nfunction handleKeyDown(event) {\n  if (event.metaKey || event.altKey || event.ctrlKey) {\n    return;\n  }\n\n  hadKeyboardEvent = true;\n}\n/**\n * If at any point a user clicks with a pointing device, ensure that we change\n * the modality away from keyboard.\n * This avoids the situation where a user presses a key on an already focused\n * element, and then clicks on a different element, focusing it with a\n * pointing device, while we still think we're in keyboard modality.\n */\n\n\nfunction handlePointerDown() {\n  hadKeyboardEvent = false;\n}\n\nfunction handleVisibilityChange() {\n  if (this.visibilityState === 'hidden') {\n    // If the tab becomes active again, the browser will handle calling focus\n    // on the element (Safari actually calls it twice).\n    // If this tab change caused a blur on an element with focus-visible,\n    // re-apply the class when the user switches back to the tab.\n    if (hadFocusVisibleRecently) {\n      hadKeyboardEvent = true;\n    }\n  }\n}\n\nfunction prepare(doc) {\n  doc.addEventListener('keydown', handleKeyDown, true);\n  doc.addEventListener('mousedown', handlePointerDown, true);\n  doc.addEventListener('pointerdown', handlePointerDown, true);\n  doc.addEventListener('touchstart', handlePointerDown, true);\n  doc.addEventListener('visibilitychange', handleVisibilityChange, true);\n}\n\nexport function teardown(doc) {\n  doc.removeEventListener('keydown', handleKeyDown, true);\n  doc.removeEventListener('mousedown', handlePointerDown, true);\n  doc.removeEventListener('pointerdown', handlePointerDown, true);\n  doc.removeEventListener('touchstart', handlePointerDown, true);\n  doc.removeEventListener('visibilitychange', handleVisibilityChange, true);\n}\n\nfunction isFocusVisible(event) {\n  var target = event.target;\n\n  try {\n    return target.matches(':focus-visible');\n  } catch (error) {} // browsers not implementing :focus-visible will throw a SyntaxError\n  // we use our own heuristic for those browsers\n  // rethrow might be better if it's not the expected error but do we really\n  // want to crash if focus-visible malfunctioned?\n  // no need for validFocusTarget check. the user does that by attaching it to\n  // focusable events only\n\n\n  return hadKeyboardEvent || focusTriggersKeyboardModality(target);\n}\n/**\n * Should be called if a blur event is fired on a focus-visible element\n */\n\n\nfunction handleBlurVisible() {\n  // To detect a tab/window switch, we look for a blur event followed\n  // rapidly by a visibility change.\n  // If we don't see a visibility change within 100ms, it's probably a\n  // regular focus change.\n  hadFocusVisibleRecently = true;\n  window.clearTimeout(hadFocusVisibleRecentlyTimeout);\n  hadFocusVisibleRecentlyTimeout = window.setTimeout(function () {\n    hadFocusVisibleRecently = false;\n  }, 100);\n}\n\nexport default function useIsFocusVisible() {\n  var ref = React.useCallback(function (instance) {\n    var node = ReactDOM.findDOMNode(instance);\n\n    if (node != null) {\n      prepare(node.ownerDocument);\n    }\n  }, []);\n\n  if (process.env.NODE_ENV !== 'production') {\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    React.useDebugValue(isFocusVisible);\n  }\n\n  return {\n    isFocusVisible: isFocusVisible,\n    onBlurVisible: handleBlurVisible,\n    ref: ref\n  };\n}","import React from 'react';\nexport default React.createContext(null);","import { Children, cloneElement, isValidElement } from 'react';\n/**\n * Given `this.props.children`, return an object mapping key to child.\n *\n * @param {*} children `this.props.children`\n * @return {object} Mapping of key to child\n */\n\nexport function getChildMapping(children, mapFn) {\n  var mapper = function mapper(child) {\n    return mapFn && isValidElement(child) ? mapFn(child) : child;\n  };\n\n  var result = Object.create(null);\n  if (children) Children.map(children, function (c) {\n    return c;\n  }).forEach(function (child) {\n    // run the map function here instead so that the key is the computed one\n    result[child.key] = mapper(child);\n  });\n  return result;\n}\n/**\n * When you're adding or removing children some may be added or removed in the\n * same render pass. We want to show *both* since we want to simultaneously\n * animate elements in and out. This function takes a previous set of keys\n * and a new set of keys and merges them with its best guess of the correct\n * ordering. In the future we may expose some of the utilities in\n * ReactMultiChild to make this easy, but for now React itself does not\n * directly have this concept of the union of prevChildren and nextChildren\n * so we implement it here.\n *\n * @param {object} prev prev children as returned from\n * `ReactTransitionChildMapping.getChildMapping()`.\n * @param {object} next next children as returned from\n * `ReactTransitionChildMapping.getChildMapping()`.\n * @return {object} a key set that contains all keys in `prev` and all keys\n * in `next` in a reasonable order.\n */\n\nexport function mergeChildMappings(prev, next) {\n  prev = prev || {};\n  next = next || {};\n\n  function getValueForKey(key) {\n    return key in next ? next[key] : prev[key];\n  } // For each key of `next`, the list of keys to insert before that key in\n  // the combined list\n\n\n  var nextKeysPending = Object.create(null);\n  var pendingKeys = [];\n\n  for (var prevKey in prev) {\n    if (prevKey in next) {\n      if (pendingKeys.length) {\n        nextKeysPending[prevKey] = pendingKeys;\n        pendingKeys = [];\n      }\n    } else {\n      pendingKeys.push(prevKey);\n    }\n  }\n\n  var i;\n  var childMapping = {};\n\n  for (var nextKey in next) {\n    if (nextKeysPending[nextKey]) {\n      for (i = 0; i < nextKeysPending[nextKey].length; i++) {\n        var pendingNextKey = nextKeysPending[nextKey][i];\n        childMapping[nextKeysPending[nextKey][i]] = getValueForKey(pendingNextKey);\n      }\n    }\n\n    childMapping[nextKey] = getValueForKey(nextKey);\n  } // Finally, add the keys which didn't appear before any key in `next`\n\n\n  for (i = 0; i < pendingKeys.length; i++) {\n    childMapping[pendingKeys[i]] = getValueForKey(pendingKeys[i]);\n  }\n\n  return childMapping;\n}\n\nfunction getProp(child, prop, props) {\n  return props[prop] != null ? props[prop] : child.props[prop];\n}\n\nexport function getInitialChildMapping(props, onExited) {\n  return getChildMapping(props.children, function (child) {\n    return cloneElement(child, {\n      onExited: onExited.bind(null, child),\n      in: true,\n      appear: getProp(child, 'appear', props),\n      enter: getProp(child, 'enter', props),\n      exit: getProp(child, 'exit', props)\n    });\n  });\n}\nexport function getNextChildMapping(nextProps, prevChildMapping, onExited) {\n  var nextChildMapping = getChildMapping(nextProps.children);\n  var children = mergeChildMappings(prevChildMapping, nextChildMapping);\n  Object.keys(children).forEach(function (key) {\n    var child = children[key];\n    if (!isValidElement(child)) return;\n    var hasPrev = (key in prevChildMapping);\n    var hasNext = (key in nextChildMapping);\n    var prevChild = prevChildMapping[key];\n    var isLeaving = isValidElement(prevChild) && !prevChild.props.in; // item is new (entering)\n\n    if (hasNext && (!hasPrev || isLeaving)) {\n      // console.log('entering', key)\n      children[key] = cloneElement(child, {\n        onExited: onExited.bind(null, child),\n        in: true,\n        exit: getProp(child, 'exit', nextProps),\n        enter: getProp(child, 'enter', nextProps)\n      });\n    } else if (!hasNext && hasPrev && !isLeaving) {\n      // item is old (exiting)\n      // console.log('leaving', key)\n      children[key] = cloneElement(child, {\n        in: false\n      });\n    } else if (hasNext && hasPrev && isValidElement(prevChild)) {\n      // item hasn't changed transition states\n      // copy over the last transition props;\n      // console.log('unchanged', key)\n      children[key] = cloneElement(child, {\n        onExited: onExited.bind(null, child),\n        in: prevChild.props.in,\n        exit: getProp(child, 'exit', nextProps),\n        enter: getProp(child, 'enter', nextProps)\n      });\n    }\n  });\n  return children;\n}","import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport TransitionGroupContext from './TransitionGroupContext';\nimport { getChildMapping, getInitialChildMapping, getNextChildMapping } from './utils/ChildMapping';\n\nvar values = Object.values || function (obj) {\n  return Object.keys(obj).map(function (k) {\n    return obj[k];\n  });\n};\n\nvar defaultProps = {\n  component: 'div',\n  childFactory: function childFactory(child) {\n    return child;\n  }\n};\n/**\n * The `<TransitionGroup>` component manages a set of transition components\n * (`<Transition>` and `<CSSTransition>`) in a list. Like with the transition\n * components, `<TransitionGroup>` is a state machine for managing the mounting\n * and unmounting of components over time.\n *\n * Consider the example below. As items are removed or added to the TodoList the\n * `in` prop is toggled automatically by the `<TransitionGroup>`.\n *\n * Note that `<TransitionGroup>`  does not define any animation behavior!\n * Exactly _how_ a list item animates is up to the individual transition\n * component. This means you can mix and match animations across different list\n * items.\n */\n\nvar TransitionGroup = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(TransitionGroup, _React$Component);\n\n  function TransitionGroup(props, context) {\n    var _this;\n\n    _this = _React$Component.call(this, props, context) || this;\n\n    var handleExited = _this.handleExited.bind(_assertThisInitialized(_this)); // Initial children should all be entering, dependent on appear\n\n\n    _this.state = {\n      contextValue: {\n        isMounting: true\n      },\n      handleExited: handleExited,\n      firstRender: true\n    };\n    return _this;\n  }\n\n  var _proto = TransitionGroup.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.mounted = true;\n    this.setState({\n      contextValue: {\n        isMounting: false\n      }\n    });\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.mounted = false;\n  };\n\n  TransitionGroup.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, _ref) {\n    var prevChildMapping = _ref.children,\n        handleExited = _ref.handleExited,\n        firstRender = _ref.firstRender;\n    return {\n      children: firstRender ? getInitialChildMapping(nextProps, handleExited) : getNextChildMapping(nextProps, prevChildMapping, handleExited),\n      firstRender: false\n    };\n  } // node is `undefined` when user provided `nodeRef` prop\n  ;\n\n  _proto.handleExited = function handleExited(child, node) {\n    var currentChildMapping = getChildMapping(this.props.children);\n    if (child.key in currentChildMapping) return;\n\n    if (child.props.onExited) {\n      child.props.onExited(node);\n    }\n\n    if (this.mounted) {\n      this.setState(function (state) {\n        var children = _extends({}, state.children);\n\n        delete children[child.key];\n        return {\n          children: children\n        };\n      });\n    }\n  };\n\n  _proto.render = function render() {\n    var _this$props = this.props,\n        Component = _this$props.component,\n        childFactory = _this$props.childFactory,\n        props = _objectWithoutPropertiesLoose(_this$props, [\"component\", \"childFactory\"]);\n\n    var contextValue = this.state.contextValue;\n    var children = values(this.state.children).map(childFactory);\n    delete props.appear;\n    delete props.enter;\n    delete props.exit;\n\n    if (Component === null) {\n      return /*#__PURE__*/React.createElement(TransitionGroupContext.Provider, {\n        value: contextValue\n      }, children);\n    }\n\n    return /*#__PURE__*/React.createElement(TransitionGroupContext.Provider, {\n      value: contextValue\n    }, /*#__PURE__*/React.createElement(Component, props, children));\n  };\n\n  return TransitionGroup;\n}(React.Component);\n\nTransitionGroup.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  /**\n   * `<TransitionGroup>` renders a `<div>` by default. You can change this\n   * behavior by providing a `component` prop.\n   * If you use React v16+ and would like to avoid a wrapping `<div>` element\n   * you can pass in `component={null}`. This is useful if the wrapping div\n   * borks your css styles.\n   */\n  component: PropTypes.any,\n\n  /**\n   * A set of `<Transition>` components, that are toggled `in` and out as they\n   * leave. the `<TransitionGroup>` will inject specific transition props, so\n   * remember to spread them through if you are wrapping the `<Transition>` as\n   * with our `<Fade>` example.\n   *\n   * While this component is meant for multiple `Transition` or `CSSTransition`\n   * children, sometimes you may want to have a single transition child with\n   * content that you want to be transitioned out and in when you change it\n   * (e.g. routes, images etc.) In that case you can change the `key` prop of\n   * the transition child as you change its content, this will cause\n   * `TransitionGroup` to transition the child out and back in.\n   */\n  children: PropTypes.node,\n\n  /**\n   * A convenience prop that enables or disables appear animations\n   * for all children. Note that specifying this will override any defaults set\n   * on individual children Transitions.\n   */\n  appear: PropTypes.bool,\n\n  /**\n   * A convenience prop that enables or disables enter animations\n   * for all children. Note that specifying this will override any defaults set\n   * on individual children Transitions.\n   */\n  enter: PropTypes.bool,\n\n  /**\n   * A convenience prop that enables or disables exit animations\n   * for all children. Note that specifying this will override any defaults set\n   * on individual children Transitions.\n   */\n  exit: PropTypes.bool,\n\n  /**\n   * You may need to apply reactive updates to a child as it is exiting.\n   * This is generally done by using `cloneElement` however in the case of an exiting\n   * child the element has already been removed and not accessible to the consumer.\n   *\n   * If you do need to update a child as it leaves you can provide a `childFactory`\n   * to wrap every child, even the ones that are leaving.\n   *\n   * @type Function(child: ReactElement) -> ReactElement\n   */\n  childFactory: PropTypes.func\n} : {};\nTransitionGroup.defaultProps = defaultProps;\nexport default TransitionGroup;","import * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport useEventCallback from '../utils/useEventCallback';\nvar useEnhancedEffect = typeof window === 'undefined' ? React.useEffect : React.useLayoutEffect;\n/**\n * @ignore - internal component.\n */\n\nfunction Ripple(props) {\n  var classes = props.classes,\n      _props$pulsate = props.pulsate,\n      pulsate = _props$pulsate === void 0 ? false : _props$pulsate,\n      rippleX = props.rippleX,\n      rippleY = props.rippleY,\n      rippleSize = props.rippleSize,\n      inProp = props.in,\n      _props$onExited = props.onExited,\n      onExited = _props$onExited === void 0 ? function () {} : _props$onExited,\n      timeout = props.timeout;\n\n  var _React$useState = React.useState(false),\n      leaving = _React$useState[0],\n      setLeaving = _React$useState[1];\n\n  var rippleClassName = clsx(classes.ripple, classes.rippleVisible, pulsate && classes.ripplePulsate);\n  var rippleStyles = {\n    width: rippleSize,\n    height: rippleSize,\n    top: -(rippleSize / 2) + rippleY,\n    left: -(rippleSize / 2) + rippleX\n  };\n  var childClassName = clsx(classes.child, leaving && classes.childLeaving, pulsate && classes.childPulsate);\n  var handleExited = useEventCallback(onExited); // Ripple is used for user feedback (e.g. click or press) so we want to apply styles with the highest priority\n\n  useEnhancedEffect(function () {\n    if (!inProp) {\n      // react-transition-group#onExit\n      setLeaving(true); // react-transition-group#onExited\n\n      var timeoutId = setTimeout(handleExited, timeout);\n      return function () {\n        clearTimeout(timeoutId);\n      };\n    }\n\n    return undefined;\n  }, [handleExited, inProp, timeout]);\n  return /*#__PURE__*/React.createElement(\"span\", {\n    className: rippleClassName,\n    style: rippleStyles\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: childClassName\n  }));\n}\n\nprocess.env.NODE_ENV !== \"production\" ? Ripple.propTypes = {\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object.isRequired,\n\n  /**\n   * @ignore - injected from TransitionGroup\n   */\n  in: PropTypes.bool,\n\n  /**\n   * @ignore - injected from TransitionGroup\n   */\n  onExited: PropTypes.func,\n\n  /**\n   * If `true`, the ripple pulsates, typically indicating the keyboard focus state of an element.\n   */\n  pulsate: PropTypes.bool,\n\n  /**\n   * Diameter of the ripple.\n   */\n  rippleSize: PropTypes.number,\n\n  /**\n   * Horizontal position of the ripple center.\n   */\n  rippleX: PropTypes.number,\n\n  /**\n   * Vertical position of the ripple center.\n   */\n  rippleY: PropTypes.number,\n\n  /**\n   * exit delay\n   */\n  timeout: PropTypes.number.isRequired\n} : void 0;\nexport default Ripple;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport { TransitionGroup } from 'react-transition-group';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\nimport Ripple from './Ripple';\nvar DURATION = 550;\nexport var DELAY_RIPPLE = 80;\nexport var styles = function styles(theme) {\n  return {\n    /* Styles applied to the root element. */\n    root: {\n      overflow: 'hidden',\n      pointerEvents: 'none',\n      position: 'absolute',\n      zIndex: 0,\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0,\n      borderRadius: 'inherit'\n    },\n\n    /* Styles applied to the internal `Ripple` components `ripple` class. */\n    ripple: {\n      opacity: 0,\n      position: 'absolute'\n    },\n\n    /* Styles applied to the internal `Ripple` components `rippleVisible` class. */\n    rippleVisible: {\n      opacity: 0.3,\n      transform: 'scale(1)',\n      animation: \"$enter \".concat(DURATION, \"ms \").concat(theme.transitions.easing.easeInOut)\n    },\n\n    /* Styles applied to the internal `Ripple` components `ripplePulsate` class. */\n    ripplePulsate: {\n      animationDuration: \"\".concat(theme.transitions.duration.shorter, \"ms\")\n    },\n\n    /* Styles applied to the internal `Ripple` components `child` class. */\n    child: {\n      opacity: 1,\n      display: 'block',\n      width: '100%',\n      height: '100%',\n      borderRadius: '50%',\n      backgroundColor: 'currentColor'\n    },\n\n    /* Styles applied to the internal `Ripple` components `childLeaving` class. */\n    childLeaving: {\n      opacity: 0,\n      animation: \"$exit \".concat(DURATION, \"ms \").concat(theme.transitions.easing.easeInOut)\n    },\n\n    /* Styles applied to the internal `Ripple` components `childPulsate` class. */\n    childPulsate: {\n      position: 'absolute',\n      left: 0,\n      top: 0,\n      animation: \"$pulsate 2500ms \".concat(theme.transitions.easing.easeInOut, \" 200ms infinite\")\n    },\n    '@keyframes enter': {\n      '0%': {\n        transform: 'scale(0)',\n        opacity: 0.1\n      },\n      '100%': {\n        transform: 'scale(1)',\n        opacity: 0.3\n      }\n    },\n    '@keyframes exit': {\n      '0%': {\n        opacity: 1\n      },\n      '100%': {\n        opacity: 0\n      }\n    },\n    '@keyframes pulsate': {\n      '0%': {\n        transform: 'scale(1)'\n      },\n      '50%': {\n        transform: 'scale(0.92)'\n      },\n      '100%': {\n        transform: 'scale(1)'\n      }\n    }\n  };\n};\n/**\n * @ignore - internal component.\n *\n * TODO v5: Make private\n */\n\nvar TouchRipple = /*#__PURE__*/React.forwardRef(function TouchRipple(props, ref) {\n  var _props$center = props.center,\n      centerProp = _props$center === void 0 ? false : _props$center,\n      classes = props.classes,\n      className = props.className,\n      other = _objectWithoutProperties(props, [\"center\", \"classes\", \"className\"]);\n\n  var _React$useState = React.useState([]),\n      ripples = _React$useState[0],\n      setRipples = _React$useState[1];\n\n  var nextKey = React.useRef(0);\n  var rippleCallback = React.useRef(null);\n  React.useEffect(function () {\n    if (rippleCallback.current) {\n      rippleCallback.current();\n      rippleCallback.current = null;\n    }\n  }, [ripples]); // Used to filter out mouse emulated events on mobile.\n\n  var ignoringMouseDown = React.useRef(false); // We use a timer in order to only show the ripples for touch \"click\" like events.\n  // We don't want to display the ripple for touch scroll events.\n\n  var startTimer = React.useRef(null); // This is the hook called once the previous timeout is ready.\n\n  var startTimerCommit = React.useRef(null);\n  var container = React.useRef(null);\n  React.useEffect(function () {\n    return function () {\n      clearTimeout(startTimer.current);\n    };\n  }, []);\n  var startCommit = React.useCallback(function (params) {\n    var pulsate = params.pulsate,\n        rippleX = params.rippleX,\n        rippleY = params.rippleY,\n        rippleSize = params.rippleSize,\n        cb = params.cb;\n    setRipples(function (oldRipples) {\n      return [].concat(_toConsumableArray(oldRipples), [/*#__PURE__*/React.createElement(Ripple, {\n        key: nextKey.current,\n        classes: classes,\n        timeout: DURATION,\n        pulsate: pulsate,\n        rippleX: rippleX,\n        rippleY: rippleY,\n        rippleSize: rippleSize\n      })]);\n    });\n    nextKey.current += 1;\n    rippleCallback.current = cb;\n  }, [classes]);\n  var start = React.useCallback(function () {\n    var event = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var cb = arguments.length > 2 ? arguments[2] : undefined;\n    var _options$pulsate = options.pulsate,\n        pulsate = _options$pulsate === void 0 ? false : _options$pulsate,\n        _options$center = options.center,\n        center = _options$center === void 0 ? centerProp || options.pulsate : _options$center,\n        _options$fakeElement = options.fakeElement,\n        fakeElement = _options$fakeElement === void 0 ? false : _options$fakeElement;\n\n    if (event.type === 'mousedown' && ignoringMouseDown.current) {\n      ignoringMouseDown.current = false;\n      return;\n    }\n\n    if (event.type === 'touchstart') {\n      ignoringMouseDown.current = true;\n    }\n\n    var element = fakeElement ? null : container.current;\n    var rect = element ? element.getBoundingClientRect() : {\n      width: 0,\n      height: 0,\n      left: 0,\n      top: 0\n    }; // Get the size of the ripple\n\n    var rippleX;\n    var rippleY;\n    var rippleSize;\n\n    if (center || event.clientX === 0 && event.clientY === 0 || !event.clientX && !event.touches) {\n      rippleX = Math.round(rect.width / 2);\n      rippleY = Math.round(rect.height / 2);\n    } else {\n      var _ref = event.touches ? event.touches[0] : event,\n          clientX = _ref.clientX,\n          clientY = _ref.clientY;\n\n      rippleX = Math.round(clientX - rect.left);\n      rippleY = Math.round(clientY - rect.top);\n    }\n\n    if (center) {\n      rippleSize = Math.sqrt((2 * Math.pow(rect.width, 2) + Math.pow(rect.height, 2)) / 3); // For some reason the animation is broken on Mobile Chrome if the size if even.\n\n      if (rippleSize % 2 === 0) {\n        rippleSize += 1;\n      }\n    } else {\n      var sizeX = Math.max(Math.abs((element ? element.clientWidth : 0) - rippleX), rippleX) * 2 + 2;\n      var sizeY = Math.max(Math.abs((element ? element.clientHeight : 0) - rippleY), rippleY) * 2 + 2;\n      rippleSize = Math.sqrt(Math.pow(sizeX, 2) + Math.pow(sizeY, 2));\n    } // Touche devices\n\n\n    if (event.touches) {\n      // check that this isn't another touchstart due to multitouch\n      // otherwise we will only clear a single timer when unmounting while two\n      // are running\n      if (startTimerCommit.current === null) {\n        // Prepare the ripple effect.\n        startTimerCommit.current = function () {\n          startCommit({\n            pulsate: pulsate,\n            rippleX: rippleX,\n            rippleY: rippleY,\n            rippleSize: rippleSize,\n            cb: cb\n          });\n        }; // Delay the execution of the ripple effect.\n\n\n        startTimer.current = setTimeout(function () {\n          if (startTimerCommit.current) {\n            startTimerCommit.current();\n            startTimerCommit.current = null;\n          }\n        }, DELAY_RIPPLE); // We have to make a tradeoff with this value.\n      }\n    } else {\n      startCommit({\n        pulsate: pulsate,\n        rippleX: rippleX,\n        rippleY: rippleY,\n        rippleSize: rippleSize,\n        cb: cb\n      });\n    }\n  }, [centerProp, startCommit]);\n  var pulsate = React.useCallback(function () {\n    start({}, {\n      pulsate: true\n    });\n  }, [start]);\n  var stop = React.useCallback(function (event, cb) {\n    clearTimeout(startTimer.current); // The touch interaction occurs too quickly.\n    // We still want to show ripple effect.\n\n    if (event.type === 'touchend' && startTimerCommit.current) {\n      event.persist();\n      startTimerCommit.current();\n      startTimerCommit.current = null;\n      startTimer.current = setTimeout(function () {\n        stop(event, cb);\n      });\n      return;\n    }\n\n    startTimerCommit.current = null;\n    setRipples(function (oldRipples) {\n      if (oldRipples.length > 0) {\n        return oldRipples.slice(1);\n      }\n\n      return oldRipples;\n    });\n    rippleCallback.current = cb;\n  }, []);\n  React.useImperativeHandle(ref, function () {\n    return {\n      pulsate: pulsate,\n      start: start,\n      stop: stop\n    };\n  }, [pulsate, start, stop]);\n  return /*#__PURE__*/React.createElement(\"span\", _extends({\n    className: clsx(classes.root, className),\n    ref: container\n  }, other), /*#__PURE__*/React.createElement(TransitionGroup, {\n    component: null,\n    exit: true\n  }, ripples));\n});\nprocess.env.NODE_ENV !== \"production\" ? TouchRipple.propTypes = {\n  /**\n   * If `true`, the ripple starts at the center of the component\n   * rather than at the point of interaction.\n   */\n  center: PropTypes.bool,\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object.isRequired,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string\n} : void 0;\nexport default withStyles(styles, {\n  flip: false,\n  name: 'MuiTouchRipple'\n})( /*#__PURE__*/React.memo(TouchRipple));","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport * as ReactDOM from 'react-dom';\nimport clsx from 'clsx';\nimport { elementTypeAcceptingRef, refType } from '@material-ui/utils';\nimport useForkRef from '../utils/useForkRef';\nimport useEventCallback from '../utils/useEventCallback';\nimport withStyles from '../styles/withStyles';\nimport useIsFocusVisible from '../utils/useIsFocusVisible';\nimport TouchRipple from './TouchRipple';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {\n    display: 'inline-flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    position: 'relative',\n    WebkitTapHighlightColor: 'transparent',\n    backgroundColor: 'transparent',\n    // Reset default value\n    // We disable the focus ring for mouse, touch and keyboard users.\n    outline: 0,\n    border: 0,\n    margin: 0,\n    // Remove the margin in Safari\n    borderRadius: 0,\n    padding: 0,\n    // Remove the padding in Firefox\n    cursor: 'pointer',\n    userSelect: 'none',\n    verticalAlign: 'middle',\n    '-moz-appearance': 'none',\n    // Reset\n    '-webkit-appearance': 'none',\n    // Reset\n    textDecoration: 'none',\n    // So we take precedent over the style of a native <a /> element.\n    color: 'inherit',\n    '&::-moz-focus-inner': {\n      borderStyle: 'none' // Remove Firefox dotted outline.\n\n    },\n    '&$disabled': {\n      pointerEvents: 'none',\n      // Disable link interactions\n      cursor: 'default'\n    },\n    '@media print': {\n      colorAdjust: 'exact'\n    }\n  },\n\n  /* Pseudo-class applied to the root element if `disabled={true}`. */\n  disabled: {},\n\n  /* Pseudo-class applied to the root element if keyboard focused. */\n  focusVisible: {}\n};\n/**\n * `ButtonBase` contains as few styles as possible.\n * It aims to be a simple building block for creating a button.\n * It contains a load of style reset and some focus/ripple logic.\n */\n\nvar ButtonBase = /*#__PURE__*/React.forwardRef(function ButtonBase(props, ref) {\n  var action = props.action,\n      buttonRefProp = props.buttonRef,\n      _props$centerRipple = props.centerRipple,\n      centerRipple = _props$centerRipple === void 0 ? false : _props$centerRipple,\n      children = props.children,\n      classes = props.classes,\n      className = props.className,\n      _props$component = props.component,\n      component = _props$component === void 0 ? 'button' : _props$component,\n      _props$disabled = props.disabled,\n      disabled = _props$disabled === void 0 ? false : _props$disabled,\n      _props$disableRipple = props.disableRipple,\n      disableRipple = _props$disableRipple === void 0 ? false : _props$disableRipple,\n      _props$disableTouchRi = props.disableTouchRipple,\n      disableTouchRipple = _props$disableTouchRi === void 0 ? false : _props$disableTouchRi,\n      _props$focusRipple = props.focusRipple,\n      focusRipple = _props$focusRipple === void 0 ? false : _props$focusRipple,\n      focusVisibleClassName = props.focusVisibleClassName,\n      onBlur = props.onBlur,\n      onClick = props.onClick,\n      onFocus = props.onFocus,\n      onFocusVisible = props.onFocusVisible,\n      onKeyDown = props.onKeyDown,\n      onKeyUp = props.onKeyUp,\n      onMouseDown = props.onMouseDown,\n      onMouseLeave = props.onMouseLeave,\n      onMouseUp = props.onMouseUp,\n      onTouchEnd = props.onTouchEnd,\n      onTouchMove = props.onTouchMove,\n      onTouchStart = props.onTouchStart,\n      onDragLeave = props.onDragLeave,\n      _props$tabIndex = props.tabIndex,\n      tabIndex = _props$tabIndex === void 0 ? 0 : _props$tabIndex,\n      TouchRippleProps = props.TouchRippleProps,\n      _props$type = props.type,\n      type = _props$type === void 0 ? 'button' : _props$type,\n      other = _objectWithoutProperties(props, [\"action\", \"buttonRef\", \"centerRipple\", \"children\", \"classes\", \"className\", \"component\", \"disabled\", \"disableRipple\", \"disableTouchRipple\", \"focusRipple\", \"focusVisibleClassName\", \"onBlur\", \"onClick\", \"onFocus\", \"onFocusVisible\", \"onKeyDown\", \"onKeyUp\", \"onMouseDown\", \"onMouseLeave\", \"onMouseUp\", \"onTouchEnd\", \"onTouchMove\", \"onTouchStart\", \"onDragLeave\", \"tabIndex\", \"TouchRippleProps\", \"type\"]);\n\n  var buttonRef = React.useRef(null);\n\n  function getButtonNode() {\n    // #StrictMode ready\n    return ReactDOM.findDOMNode(buttonRef.current);\n  }\n\n  var rippleRef = React.useRef(null);\n\n  var _React$useState = React.useState(false),\n      focusVisible = _React$useState[0],\n      setFocusVisible = _React$useState[1];\n\n  if (disabled && focusVisible) {\n    setFocusVisible(false);\n  }\n\n  var _useIsFocusVisible = useIsFocusVisible(),\n      isFocusVisible = _useIsFocusVisible.isFocusVisible,\n      onBlurVisible = _useIsFocusVisible.onBlurVisible,\n      focusVisibleRef = _useIsFocusVisible.ref;\n\n  React.useImperativeHandle(action, function () {\n    return {\n      focusVisible: function focusVisible() {\n        setFocusVisible(true);\n        buttonRef.current.focus();\n      }\n    };\n  }, []);\n  React.useEffect(function () {\n    if (focusVisible && focusRipple && !disableRipple) {\n      rippleRef.current.pulsate();\n    }\n  }, [disableRipple, focusRipple, focusVisible]);\n\n  function useRippleHandler(rippleAction, eventCallback) {\n    var skipRippleAction = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : disableTouchRipple;\n    return useEventCallback(function (event) {\n      if (eventCallback) {\n        eventCallback(event);\n      }\n\n      var ignore = skipRippleAction;\n\n      if (!ignore && rippleRef.current) {\n        rippleRef.current[rippleAction](event);\n      }\n\n      return true;\n    });\n  }\n\n  var handleMouseDown = useRippleHandler('start', onMouseDown);\n  var handleDragLeave = useRippleHandler('stop', onDragLeave);\n  var handleMouseUp = useRippleHandler('stop', onMouseUp);\n  var handleMouseLeave = useRippleHandler('stop', function (event) {\n    if (focusVisible) {\n      event.preventDefault();\n    }\n\n    if (onMouseLeave) {\n      onMouseLeave(event);\n    }\n  });\n  var handleTouchStart = useRippleHandler('start', onTouchStart);\n  var handleTouchEnd = useRippleHandler('stop', onTouchEnd);\n  var handleTouchMove = useRippleHandler('stop', onTouchMove);\n  var handleBlur = useRippleHandler('stop', function (event) {\n    if (focusVisible) {\n      onBlurVisible(event);\n      setFocusVisible(false);\n    }\n\n    if (onBlur) {\n      onBlur(event);\n    }\n  }, false);\n  var handleFocus = useEventCallback(function (event) {\n    // Fix for https://github.com/facebook/react/issues/7769\n    if (!buttonRef.current) {\n      buttonRef.current = event.currentTarget;\n    }\n\n    if (isFocusVisible(event)) {\n      setFocusVisible(true);\n\n      if (onFocusVisible) {\n        onFocusVisible(event);\n      }\n    }\n\n    if (onFocus) {\n      onFocus(event);\n    }\n  });\n\n  var isNonNativeButton = function isNonNativeButton() {\n    var button = getButtonNode();\n    return component && component !== 'button' && !(button.tagName === 'A' && button.href);\n  };\n  /**\n   * IE 11 shim for https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/repeat\n   */\n\n\n  var keydownRef = React.useRef(false);\n  var handleKeyDown = useEventCallback(function (event) {\n    // Check if key is already down to avoid repeats being counted as multiple activations\n    if (focusRipple && !keydownRef.current && focusVisible && rippleRef.current && event.key === ' ') {\n      keydownRef.current = true;\n      event.persist();\n      rippleRef.current.stop(event, function () {\n        rippleRef.current.start(event);\n      });\n    }\n\n    if (event.target === event.currentTarget && isNonNativeButton() && event.key === ' ') {\n      event.preventDefault();\n    }\n\n    if (onKeyDown) {\n      onKeyDown(event);\n    } // Keyboard accessibility for non interactive elements\n\n\n    if (event.target === event.currentTarget && isNonNativeButton() && event.key === 'Enter' && !disabled) {\n      event.preventDefault();\n\n      if (onClick) {\n        onClick(event);\n      }\n    }\n  });\n  var handleKeyUp = useEventCallback(function (event) {\n    // calling preventDefault in keyUp on a <button> will not dispatch a click event if Space is pressed\n    // https://codesandbox.io/s/button-keyup-preventdefault-dn7f0\n    if (focusRipple && event.key === ' ' && rippleRef.current && focusVisible && !event.defaultPrevented) {\n      keydownRef.current = false;\n      event.persist();\n      rippleRef.current.stop(event, function () {\n        rippleRef.current.pulsate(event);\n      });\n    }\n\n    if (onKeyUp) {\n      onKeyUp(event);\n    } // Keyboard accessibility for non interactive elements\n\n\n    if (onClick && event.target === event.currentTarget && isNonNativeButton() && event.key === ' ' && !event.defaultPrevented) {\n      onClick(event);\n    }\n  });\n  var ComponentProp = component;\n\n  if (ComponentProp === 'button' && other.href) {\n    ComponentProp = 'a';\n  }\n\n  var buttonProps = {};\n\n  if (ComponentProp === 'button') {\n    buttonProps.type = type;\n    buttonProps.disabled = disabled;\n  } else {\n    if (ComponentProp !== 'a' || !other.href) {\n      buttonProps.role = 'button';\n    }\n\n    buttonProps['aria-disabled'] = disabled;\n  }\n\n  var handleUserRef = useForkRef(buttonRefProp, ref);\n  var handleOwnRef = useForkRef(focusVisibleRef, buttonRef);\n  var handleRef = useForkRef(handleUserRef, handleOwnRef);\n\n  var _React$useState2 = React.useState(false),\n      mountedState = _React$useState2[0],\n      setMountedState = _React$useState2[1];\n\n  React.useEffect(function () {\n    setMountedState(true);\n  }, []);\n  var enableTouchRipple = mountedState && !disableRipple && !disabled;\n\n  if (process.env.NODE_ENV !== 'production') {\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    React.useEffect(function () {\n      if (enableTouchRipple && !rippleRef.current) {\n        console.error(['Material-UI: The `component` prop provided to ButtonBase is invalid.', 'Please make sure the children prop is rendered in this custom component.'].join('\\n'));\n      }\n    }, [enableTouchRipple]);\n  }\n\n  return /*#__PURE__*/React.createElement(ComponentProp, _extends({\n    className: clsx(classes.root, className, focusVisible && [classes.focusVisible, focusVisibleClassName], disabled && classes.disabled),\n    onBlur: handleBlur,\n    onClick: onClick,\n    onFocus: handleFocus,\n    onKeyDown: handleKeyDown,\n    onKeyUp: handleKeyUp,\n    onMouseDown: handleMouseDown,\n    onMouseLeave: handleMouseLeave,\n    onMouseUp: handleMouseUp,\n    onDragLeave: handleDragLeave,\n    onTouchEnd: handleTouchEnd,\n    onTouchMove: handleTouchMove,\n    onTouchStart: handleTouchStart,\n    ref: handleRef,\n    tabIndex: disabled ? -1 : tabIndex\n  }, buttonProps, other), children, enableTouchRipple ?\n  /*#__PURE__*/\n\n  /* TouchRipple is only needed client-side, x2 boost on the server. */\n  React.createElement(TouchRipple, _extends({\n    ref: rippleRef,\n    center: centerRipple\n  }, TouchRippleProps)) : null);\n});\nprocess.env.NODE_ENV !== \"production\" ? ButtonBase.propTypes = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\n  // ----------------------------------------------------------------------\n\n  /**\n   * A ref for imperative actions.\n   * It currently only supports `focusVisible()` action.\n   */\n  action: refType,\n\n  /**\n   * @ignore\n   *\n   * Use that prop to pass a ref to the native button component.\n   * @deprecated Use `ref` instead.\n   */\n  buttonRef: refType,\n\n  /**\n   * If `true`, the ripples will be centered.\n   * They won't start at the cursor interaction position.\n   */\n  centerRipple: PropTypes.bool,\n\n  /**\n   * The content of the component.\n   */\n  children: PropTypes.node,\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n\n  /**\n   * The component used for the root node.\n   * Either a string to use a HTML element or a component.\n   */\n  component: elementTypeAcceptingRef,\n\n  /**\n   * If `true`, the base button will be disabled.\n   */\n  disabled: PropTypes.bool,\n\n  /**\n   * If `true`, the ripple effect will be disabled.\n   *\n   * ⚠️ Without a ripple there is no styling for :focus-visible by default. Be sure\n   * to highlight the element by applying separate styles with the `focusVisibleClassName`.\n   */\n  disableRipple: PropTypes.bool,\n\n  /**\n   * If `true`, the touch ripple effect will be disabled.\n   */\n  disableTouchRipple: PropTypes.bool,\n\n  /**\n   * If `true`, the base button will have a keyboard focus ripple.\n   */\n  focusRipple: PropTypes.bool,\n\n  /**\n   * This prop can help a person know which element has the keyboard focus.\n   * The class name will be applied when the element gain the focus through a keyboard interaction.\n   * It's a polyfill for the [CSS :focus-visible selector](https://drafts.csswg.org/selectors-4/#the-focus-visible-pseudo).\n   * The rationale for using this feature [is explained here](https://github.com/WICG/focus-visible/blob/master/explainer.md).\n   * A [polyfill can be used](https://github.com/WICG/focus-visible) to apply a `focus-visible` class to other components\n   * if needed.\n   */\n  focusVisibleClassName: PropTypes.string,\n\n  /**\n   * @ignore\n   */\n  href: PropTypes.string,\n\n  /**\n   * @ignore\n   */\n  onBlur: PropTypes.func,\n\n  /**\n   * @ignore\n   */\n  onClick: PropTypes.func,\n\n  /**\n   * @ignore\n   */\n  onDragLeave: PropTypes.func,\n\n  /**\n   * @ignore\n   */\n  onFocus: PropTypes.func,\n\n  /**\n   * Callback fired when the component is focused with a keyboard.\n   * We trigger a `onFocus` callback too.\n   */\n  onFocusVisible: PropTypes.func,\n\n  /**\n   * @ignore\n   */\n  onKeyDown: PropTypes.func,\n\n  /**\n   * @ignore\n   */\n  onKeyUp: PropTypes.func,\n\n  /**\n   * @ignore\n   */\n  onMouseDown: PropTypes.func,\n\n  /**\n   * @ignore\n   */\n  onMouseLeave: PropTypes.func,\n\n  /**\n   * @ignore\n   */\n  onMouseUp: PropTypes.func,\n\n  /**\n   * @ignore\n   */\n  onTouchEnd: PropTypes.func,\n\n  /**\n   * @ignore\n   */\n  onTouchMove: PropTypes.func,\n\n  /**\n   * @ignore\n   */\n  onTouchStart: PropTypes.func,\n\n  /**\n   * @ignore\n   */\n  tabIndex: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n\n  /**\n   * Props applied to the `TouchRipple` element.\n   */\n  TouchRippleProps: PropTypes.object,\n\n  /**\n   * @ignore\n   */\n  type: PropTypes.oneOfType([PropTypes.oneOf(['button', 'reset', 'submit']), PropTypes.string])\n} : void 0;\nexport default withStyles(styles, {\n  name: 'MuiButtonBase'\n})(ButtonBase);","import _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\nimport { fade } from '../styles/colorManipulator';\nimport ButtonBase from '../ButtonBase';\nimport capitalize from '../utils/capitalize';\nexport var styles = function styles(theme) {\n  return {\n    /* Styles applied to the root element. */\n    root: _extends({}, theme.typography.button, {\n      boxSizing: 'border-box',\n      minWidth: 64,\n      padding: '6px 16px',\n      borderRadius: theme.shape.borderRadius,\n      color: theme.palette.text.primary,\n      transition: theme.transitions.create(['background-color', 'box-shadow', 'border'], {\n        duration: theme.transitions.duration.short\n      }),\n      '&:hover': {\n        textDecoration: 'none',\n        backgroundColor: fade(theme.palette.text.primary, theme.palette.action.hoverOpacity),\n        // Reset on touch devices, it doesn't add specificity\n        '@media (hover: none)': {\n          backgroundColor: 'transparent'\n        },\n        '&$disabled': {\n          backgroundColor: 'transparent'\n        }\n      },\n      '&$disabled': {\n        color: theme.palette.action.disabled\n      }\n    }),\n\n    /* Styles applied to the span element that wraps the children. */\n    label: {\n      width: '100%',\n      // Ensure the correct width for iOS Safari\n      display: 'inherit',\n      alignItems: 'inherit',\n      justifyContent: 'inherit'\n    },\n\n    /* Styles applied to the root element if `variant=\"text\"`. */\n    text: {\n      padding: '6px 8px'\n    },\n\n    /* Styles applied to the root element if `variant=\"text\"` and `color=\"primary\"`. */\n    textPrimary: {\n      color: theme.palette.primary.main,\n      '&:hover': {\n        backgroundColor: fade(theme.palette.primary.main, theme.palette.action.hoverOpacity),\n        // Reset on touch devices, it doesn't add specificity\n        '@media (hover: none)': {\n          backgroundColor: 'transparent'\n        }\n      }\n    },\n\n    /* Styles applied to the root element if `variant=\"text\"` and `color=\"secondary\"`. */\n    textSecondary: {\n      color: theme.palette.secondary.main,\n      '&:hover': {\n        backgroundColor: fade(theme.palette.secondary.main, theme.palette.action.hoverOpacity),\n        // Reset on touch devices, it doesn't add specificity\n        '@media (hover: none)': {\n          backgroundColor: 'transparent'\n        }\n      }\n    },\n\n    /* Styles applied to the root element if `variant=\"outlined\"`. */\n    outlined: {\n      padding: '5px 15px',\n      border: \"1px solid \".concat(theme.palette.type === 'light' ? 'rgba(0, 0, 0, 0.23)' : 'rgba(255, 255, 255, 0.23)'),\n      '&$disabled': {\n        border: \"1px solid \".concat(theme.palette.action.disabledBackground)\n      }\n    },\n\n    /* Styles applied to the root element if `variant=\"outlined\"` and `color=\"primary\"`. */\n    outlinedPrimary: {\n      color: theme.palette.primary.main,\n      border: \"1px solid \".concat(fade(theme.palette.primary.main, 0.5)),\n      '&:hover': {\n        border: \"1px solid \".concat(theme.palette.primary.main),\n        backgroundColor: fade(theme.palette.primary.main, theme.palette.action.hoverOpacity),\n        // Reset on touch devices, it doesn't add specificity\n        '@media (hover: none)': {\n          backgroundColor: 'transparent'\n        }\n      }\n    },\n\n    /* Styles applied to the root element if `variant=\"outlined\"` and `color=\"secondary\"`. */\n    outlinedSecondary: {\n      color: theme.palette.secondary.main,\n      border: \"1px solid \".concat(fade(theme.palette.secondary.main, 0.5)),\n      '&:hover': {\n        border: \"1px solid \".concat(theme.palette.secondary.main),\n        backgroundColor: fade(theme.palette.secondary.main, theme.palette.action.hoverOpacity),\n        // Reset on touch devices, it doesn't add specificity\n        '@media (hover: none)': {\n          backgroundColor: 'transparent'\n        }\n      },\n      '&$disabled': {\n        border: \"1px solid \".concat(theme.palette.action.disabled)\n      }\n    },\n\n    /* Styles applied to the root element if `variant=\"contained\"`. */\n    contained: {\n      color: theme.palette.getContrastText(theme.palette.grey[300]),\n      backgroundColor: theme.palette.grey[300],\n      boxShadow: theme.shadows[2],\n      '&:hover': {\n        backgroundColor: theme.palette.grey.A100,\n        boxShadow: theme.shadows[4],\n        // Reset on touch devices, it doesn't add specificity\n        '@media (hover: none)': {\n          boxShadow: theme.shadows[2],\n          backgroundColor: theme.palette.grey[300]\n        },\n        '&$disabled': {\n          backgroundColor: theme.palette.action.disabledBackground\n        }\n      },\n      '&$focusVisible': {\n        boxShadow: theme.shadows[6]\n      },\n      '&:active': {\n        boxShadow: theme.shadows[8]\n      },\n      '&$disabled': {\n        color: theme.palette.action.disabled,\n        boxShadow: theme.shadows[0],\n        backgroundColor: theme.palette.action.disabledBackground\n      }\n    },\n\n    /* Styles applied to the root element if `variant=\"contained\"` and `color=\"primary\"`. */\n    containedPrimary: {\n      color: theme.palette.primary.contrastText,\n      backgroundColor: theme.palette.primary.main,\n      '&:hover': {\n        backgroundColor: theme.palette.primary.dark,\n        // Reset on touch devices, it doesn't add specificity\n        '@media (hover: none)': {\n          backgroundColor: theme.palette.primary.main\n        }\n      }\n    },\n\n    /* Styles applied to the root element if `variant=\"contained\"` and `color=\"secondary\"`. */\n    containedSecondary: {\n      color: theme.palette.secondary.contrastText,\n      backgroundColor: theme.palette.secondary.main,\n      '&:hover': {\n        backgroundColor: theme.palette.secondary.dark,\n        // Reset on touch devices, it doesn't add specificity\n        '@media (hover: none)': {\n          backgroundColor: theme.palette.secondary.main\n        }\n      }\n    },\n\n    /* Styles applied to the root element if `disableElevation={true}`. */\n    disableElevation: {\n      boxShadow: 'none',\n      '&:hover': {\n        boxShadow: 'none'\n      },\n      '&$focusVisible': {\n        boxShadow: 'none'\n      },\n      '&:active': {\n        boxShadow: 'none'\n      },\n      '&$disabled': {\n        boxShadow: 'none'\n      }\n    },\n\n    /* Pseudo-class applied to the ButtonBase root element if the button is keyboard focused. */\n    focusVisible: {},\n\n    /* Pseudo-class applied to the root element if `disabled={true}`. */\n    disabled: {},\n\n    /* Styles applied to the root element if `color=\"inherit\"`. */\n    colorInherit: {\n      color: 'inherit',\n      borderColor: 'currentColor'\n    },\n\n    /* Styles applied to the root element if `size=\"small\"` and `variant=\"text\"`. */\n    textSizeSmall: {\n      padding: '4px 5px',\n      fontSize: theme.typography.pxToRem(13)\n    },\n\n    /* Styles applied to the root element if `size=\"large\"` and `variant=\"text\"`. */\n    textSizeLarge: {\n      padding: '8px 11px',\n      fontSize: theme.typography.pxToRem(15)\n    },\n\n    /* Styles applied to the root element if `size=\"small\"` and `variant=\"outlined\"`. */\n    outlinedSizeSmall: {\n      padding: '3px 9px',\n      fontSize: theme.typography.pxToRem(13)\n    },\n\n    /* Styles applied to the root element if `size=\"large\"` and `variant=\"outlined\"`. */\n    outlinedSizeLarge: {\n      padding: '7px 21px',\n      fontSize: theme.typography.pxToRem(15)\n    },\n\n    /* Styles applied to the root element if `size=\"small\"` and `variant=\"contained\"`. */\n    containedSizeSmall: {\n      padding: '4px 10px',\n      fontSize: theme.typography.pxToRem(13)\n    },\n\n    /* Styles applied to the root element if `size=\"large\"` and `variant=\"contained\"`. */\n    containedSizeLarge: {\n      padding: '8px 22px',\n      fontSize: theme.typography.pxToRem(15)\n    },\n\n    /* Styles applied to the root element if `size=\"small\"`. */\n    sizeSmall: {},\n\n    /* Styles applied to the root element if `size=\"large\"`. */\n    sizeLarge: {},\n\n    /* Styles applied to the root element if `fullWidth={true}`. */\n    fullWidth: {\n      width: '100%'\n    },\n\n    /* Styles applied to the startIcon element if supplied. */\n    startIcon: {\n      display: 'inherit',\n      marginRight: 8,\n      marginLeft: -4,\n      '&$iconSizeSmall': {\n        marginLeft: -2\n      }\n    },\n\n    /* Styles applied to the endIcon element if supplied. */\n    endIcon: {\n      display: 'inherit',\n      marginRight: -4,\n      marginLeft: 8,\n      '&$iconSizeSmall': {\n        marginRight: -2\n      }\n    },\n\n    /* Styles applied to the icon element if supplied and `size=\"small\"`. */\n    iconSizeSmall: {\n      '& > *:first-child': {\n        fontSize: 18\n      }\n    },\n\n    /* Styles applied to the icon element if supplied and `size=\"medium\"`. */\n    iconSizeMedium: {\n      '& > *:first-child': {\n        fontSize: 20\n      }\n    },\n\n    /* Styles applied to the icon element if supplied and `size=\"large\"`. */\n    iconSizeLarge: {\n      '& > *:first-child': {\n        fontSize: 22\n      }\n    }\n  };\n};\nvar Button = /*#__PURE__*/React.forwardRef(function Button(props, ref) {\n  var children = props.children,\n      classes = props.classes,\n      className = props.className,\n      _props$color = props.color,\n      color = _props$color === void 0 ? 'default' : _props$color,\n      _props$component = props.component,\n      component = _props$component === void 0 ? 'button' : _props$component,\n      _props$disabled = props.disabled,\n      disabled = _props$disabled === void 0 ? false : _props$disabled,\n      _props$disableElevati = props.disableElevation,\n      disableElevation = _props$disableElevati === void 0 ? false : _props$disableElevati,\n      _props$disableFocusRi = props.disableFocusRipple,\n      disableFocusRipple = _props$disableFocusRi === void 0 ? false : _props$disableFocusRi,\n      endIconProp = props.endIcon,\n      focusVisibleClassName = props.focusVisibleClassName,\n      _props$fullWidth = props.fullWidth,\n      fullWidth = _props$fullWidth === void 0 ? false : _props$fullWidth,\n      _props$size = props.size,\n      size = _props$size === void 0 ? 'medium' : _props$size,\n      startIconProp = props.startIcon,\n      _props$type = props.type,\n      type = _props$type === void 0 ? 'button' : _props$type,\n      _props$variant = props.variant,\n      variant = _props$variant === void 0 ? 'text' : _props$variant,\n      other = _objectWithoutProperties(props, [\"children\", \"classes\", \"className\", \"color\", \"component\", \"disabled\", \"disableElevation\", \"disableFocusRipple\", \"endIcon\", \"focusVisibleClassName\", \"fullWidth\", \"size\", \"startIcon\", \"type\", \"variant\"]);\n\n  var startIcon = startIconProp && /*#__PURE__*/React.createElement(\"span\", {\n    className: clsx(classes.startIcon, classes[\"iconSize\".concat(capitalize(size))])\n  }, startIconProp);\n  var endIcon = endIconProp && /*#__PURE__*/React.createElement(\"span\", {\n    className: clsx(classes.endIcon, classes[\"iconSize\".concat(capitalize(size))])\n  }, endIconProp);\n  return /*#__PURE__*/React.createElement(ButtonBase, _extends({\n    className: clsx(classes.root, classes[variant], className, color === 'inherit' ? classes.colorInherit : color !== 'default' && classes[\"\".concat(variant).concat(capitalize(color))], size !== 'medium' && [classes[\"\".concat(variant, \"Size\").concat(capitalize(size))], classes[\"size\".concat(capitalize(size))]], disableElevation && classes.disableElevation, disabled && classes.disabled, fullWidth && classes.fullWidth),\n    component: component,\n    disabled: disabled,\n    focusRipple: !disableFocusRipple,\n    focusVisibleClassName: clsx(classes.focusVisible, focusVisibleClassName),\n    ref: ref,\n    type: type\n  }, other), /*#__PURE__*/React.createElement(\"span\", {\n    className: classes.label\n  }, startIcon, children, endIcon));\n});\nprocess.env.NODE_ENV !== \"production\" ? Button.propTypes = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\n  // ----------------------------------------------------------------------\n\n  /**\n   * The content of the button.\n   */\n  children: PropTypes.node,\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n\n  /**\n   * The color of the component. It supports those theme colors that make sense for this component.\n   */\n  color: PropTypes.oneOf(['default', 'inherit', 'primary', 'secondary']),\n\n  /**\n   * The component used for the root node.\n   * Either a string to use a HTML element or a component.\n   */\n  component: PropTypes\n  /* @typescript-to-proptypes-ignore */\n  .elementType,\n\n  /**\n   * If `true`, the button will be disabled.\n   */\n  disabled: PropTypes.bool,\n\n  /**\n   * If `true`, no elevation is used.\n   */\n  disableElevation: PropTypes.bool,\n\n  /**\n   * If `true`, the  keyboard focus ripple will be disabled.\n   */\n  disableFocusRipple: PropTypes.bool,\n\n  /**\n   * If `true`, the ripple effect will be disabled.\n   *\n   * ⚠️ Without a ripple there is no styling for :focus-visible by default. Be sure\n   * to highlight the element by applying separate styles with the `focusVisibleClassName`.\n   */\n  disableRipple: PropTypes.bool,\n\n  /**\n   * Element placed after the children.\n   */\n  endIcon: PropTypes.node,\n\n  /**\n   * @ignore\n   */\n  focusVisibleClassName: PropTypes.string,\n\n  /**\n   * If `true`, the button will take up the full width of its container.\n   */\n  fullWidth: PropTypes.bool,\n\n  /**\n   * The URL to link to when the button is clicked.\n   * If defined, an `a` element will be used as the root node.\n   */\n  href: PropTypes.string,\n\n  /**\n   * The size of the button.\n   * `small` is equivalent to the dense button styling.\n   */\n  size: PropTypes.oneOf(['large', 'medium', 'small']),\n\n  /**\n   * Element placed before the children.\n   */\n  startIcon: PropTypes.node,\n\n  /**\n   * @ignore\n   */\n  type: PropTypes.oneOfType([PropTypes.oneOf(['button', 'reset', 'submit']), PropTypes.string]),\n\n  /**\n   * The variant to use.\n   */\n  variant: PropTypes.oneOf(['contained', 'outlined', 'text'])\n} : void 0;\nexport default withStyles(styles, {\n  name: 'MuiButton'\n})(Button);"],"sourceRoot":""}